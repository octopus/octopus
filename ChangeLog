2013-01-04 11:48  xavier

	* [r9805] src/basic/Makefile.am: Missing build dependency.

2013-01-05 13:51  xavier

	* [r9806] src/basic/json.F90: Removed useless return statments from
	  the json code.

2013-01-05 13:58  xavier

	* [r9807] src/basic/json.F90: More cleaning of the json module.

2013-01-05 14:41  xavier

	* [r9808] src/states/restart.F90: The json code is causing problems
	  with the Blue Gene/Q, so I disabled the json output of the
	  geometry. This should not be a problem since this output is not
	  used.

2013-01-06 10:54  xavier

	* [r9809] src/grid/partition.F90: Removed PUSH_SUB/POP_SUB from a
	  subroutine and declared it pure to avoid recursive I/O.

2013-01-06 11:10  xavier

	* [r9810] src/grid/mesh_init.F90, src/hamiltonian/kick.F90: Some
	  integer values were initialized using M_ZERO.

2013-01-06 12:11  xavier

	* [r9811] src/basic/utils.F90, src/sternheimer/kdotp.F90: Declared
	  pure and removed PUSH_SUB/POP_SUB from two functions that are
	  called from an I/O statement.

2013-01-06 12:22  xavier

	* [r9812] src/hamiltonian/epot.F90, src/main/casida.F90,
	  src/poisson/poisson.F90: * More fixes about recursive I/O.
	  * Fixed a FLOAT literal declaration.

2013-01-06 15:00  xavier

	* [r9813] testsuite/components/01-derivatives_1d.test: Increased
	  the tolerance for the Fortran derivatives tests, as it appears
	  that this implementation is more compiler dependent that the C
	  version.

2013-01-07 15:19  xavier

	* [r9814] src/basic/comm_inc.F90, src/states/states_calc_inc.F90: A
	  reduction of size 0 caused a problem on the Blue Gene Q.

2013-01-07 15:58  xavier

	* [r9815] src/basic/comm_inc.F90: Added a check for size 0 in
	  reductions of dimension 2.

2013-01-07 18:11  xavier

	* [r9816] src/basic/comm_inc.F90: A fix to my last commit. An
	  optional value was used, even when not present.

2013-01-11 09:44  joseba

	* [r9817] src/math/pfft.F90: Updated the label of the PFFT plans to
	  be properly printed.

2013-01-14 19:25  dstrubbe

	* [r9818] src/basic/varinfo_low.c, src/grid/io_function_inc.F90,
	  src/ions/simul_box.F90: * Typos.
	  * Putting warning about 1D and 2D ion-ion interaction in variable
	  reference too.

2013-01-14 20:49  dstrubbe

	* [r9819] testsuite/components/01-derivatives_1d.test,
	  testsuite/components/02-derivatives_2d.test,
	  testsuite/components/03-derivatives_3d.test,
	  testsuite/components/06-hartree_3d.test,
	  testsuite/components/07-gram_schmidt.test,
	  testsuite/components/08-mgs.test,
	  testsuite/components/09-qr.test,
	  testsuite/components/10-hartree_pfft.test,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/02-neon_mpi.test,
	  testsuite/finite_systems_1d/09-morse.test,
	  testsuite/finite_systems_2d/01-quadratic_box.test,
	  testsuite/finite_systems_2d/02-fock-darwin.test,
	  testsuite/finite_systems_2d/03-helium_atom.test,
	  testsuite/finite_systems_2d/04-biot_savart.test,
	  testsuite/finite_systems_2d/05-spin_precession.test,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/finite_systems_3d/01-carbon_atom.test,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.test,
	  testsuite/finite_systems_3d/03-magnetic.test,
	  testsuite/finite_systems_3d/04-jellium.test,
	  testsuite/finite_systems_3d/05-output.test,
	  testsuite/finite_systems_3d/06-restart.test,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.test,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.test,
	  testsuite/finite_systems_3d/09-spinors.test,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/11-sic.test,
	  testsuite/finite_systems_3d/12-forces.test,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test,
	  testsuite/finite_systems_3d/18-current.test,
	  testsuite/finite_systems_3d/20-eigensolver.test,
	  testsuite/finite_systems_3d/21-lobpcg.test,
	  testsuite/finite_systems_3d/22-time_propagation.test,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/finite_systems_3d/24-o2-spin.test,
	  testsuite/finite_systems_3d/25-multiresolution.test,
	  testsuite/finite_systems_3d/26-nlcc.test,
	  testsuite/finite_systems_3d/27-fine_mesh.test,
	  testsuite/finite_systems_3d/28-carbon_big_box.test,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/04-oep.test,
	  testsuite/functionals/05-ks_inversion.test,
	  testsuite/linear_response/01-casida.test,
	  testsuite/linear_response/02-h2o_pol_lr.test,
	  testsuite/linear_response/03-vdw_sternheimer.test,
	  testsuite/linear_response/04-vib_modes.test,
	  testsuite/linear_response/05-polarizability.test,
	  testsuite/open_systems/01-wavepacket.test,
	  testsuite/open_systems/02-wavepacket_2d.test,
	  testsuite/open_systems/03-extended_eigenstate.test,
	  testsuite/open_systems/04-propagate_eigenstate.test,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/periodic_systems/01-free_electrons.test,
	  testsuite/periodic_systems/02-cosine_potential.test,
	  testsuite/periodic_systems/03-sodium_chain.test,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/07-tb09.test,
	  testsuite/photo_electron/01-h1d_lin.test,
	  testsuite/photo_electron/02-restart.test,
	  testsuite/photo_electron/03-h1d_ati.test,
	  testsuite/photo_electron/04-nfft.test,
	  testsuite/real_time/01-etrs.test,
	  testsuite/real_time/02-aetrs.test,
	  testsuite/real_time/03-exp_mid.test,
	  testsuite/real_time/04-etrs_single.test,
	  testsuite/real_time/05-cpmd.test,
	  testsuite/real_time/06-caetrs.test,
	  testsuite/real_time/08-laser.test,
	  testsuite/real_time/09-angular_momentum.test,
	  testsuite/real_time/10-bomd.test,
	  testsuite/real_time/11-tdmagnetic.test,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test: Added directory
	  names to TestGroups for each test, as suggested by Carlo.

2013-01-14 22:16  dstrubbe

	* [r9820] testsuite/TestGroups,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test: * Removed 'oct' test
	  group, now superseded by 'optimal_control'.
	  * Updated TestGroups file.

2013-01-14 23:56  dstrubbe

	* [r9821] src/ions/geometry.F90, src/ions/kpoints.F90: * Error
	  message if no coordinates are given in input.
	  * Clarification to documentation.

2013-01-15 02:51  dstrubbe

	* [r9822] src/grid/multigrid.F90: Clarification and separation
	  lines.

2013-01-15 09:27  joseba

	* [r9823] src/grid/cube.F90, src/grid/mesh_init.F90,
	  src/ions/symmetries.F90, src/poisson/poisson.F90: * Added the
	  possibility to disable the execution of the partition, since it
	  is used only with the only purpose of printing information. The
	  importance of this changes comes from the fact that computing
	  this part in big systems with large number of processes takes
	  longer and longer (even hours), consuming almost useless
	  core-hours.
	  * Added the possibility to disable the execution of symmetries
	  calculation
	  * Some line breaks

2013-01-15 12:43  marques

	* [r9824] libxc/src/gga_xc_b97.c: Let's see if this corrects the
	  bug with B97-like functionals

2013-01-15 12:47  marques

	* [r9825] libxc/src/xc_f.c: Added interface as noted by Fabien
	  Tran.

2013-01-15 13:56  marques

	* [r9827] libxc/src/mgga_c_pkzb.c: The same kind of bug was also
	  present in TPSS.

2013-01-15 15:03  marques

	* [r9828] libxc/src/mgga_c_vsxc.c: And again the same error in vsxc

2013-01-15 19:31  dstrubbe

	* [r9829] src/grid/cube.F90, src/ions/symmetries.F90: Improvements
	  to r9823: 'SymmetriesCompute' disables all symmetry calculations,
	  not just for finite systems, and does leave proper initialization
	  to identity. Also, fixed typo and unnecessarily added variables.

2013-01-16 09:47  marques

	* [r9831] libxc/src/mgga_c_bc95.c: Still another POLARIZED missing
	  in a functional that uses the stoll decomposition.

2013-01-16 13:42  marques

	* [r9832] libxc/src/Makefile.am, libxc/src/gga_c_ft97.c,
	  libxc/src/mgga_x_ms.c, libxc/src/test.c: Added new metagga
	  functionals: X_MS0, X_MS1, X_MS2, and X_MS2H (a hybrid version of
	  MS2)

2013-01-16 20:37  dstrubbe

	* [r9833] src/poisson/poisson.F90: Improvements to Poisson solver
	  info, including reference to recent arXiV paper.

2013-01-16 21:12  dstrubbe

	* [r9834] src/poisson/poisson.F90,
	  src/poisson/poisson_corrections.F90,
	  src/poisson/solver_3d_inc.F90: Clarifications to documentation
	  and output regarding Poisson solvers.

2013-01-17 21:26  dstrubbe

	* [r9835] src/grid/grid.F90, src/ions/simul_box.F90: Reducing
	  verbosity of warnings by making only one comment about Lsize or
	  Spacing not matching the recommended value if they were specified
	  as one value rather than separately for each direction in the
	  input file.

2013-01-17 21:49  dstrubbe

	* [r9836] src/ions/symmetries.F90, src/states/states.F90: * Small
	  bugfix: condition for warning about Smearing needing ExtraStates
	  was mistaken for spin-polarized calculations.
	  * Message when disabling symmetries for user-defined species now
	  says only that non-spherically symmetric species "may" be
	  present, rather than definitely are present, since we are not
	  actually analyzing that.

2013-01-17 23:19  dstrubbe

	* [r9837] src/grid/io_function_inc.F90: * Corrected misplaced
	  PUSH_SUB.
	  * Warning about no XSF except in 3D now states which function it
	  is talking about.

2013-01-18 00:06  dstrubbe

	* [r9838] src/poisson/poisson.F90: * For 2D systems periodic in 2D,
	  the default Poisson FFT kernel was set to be the planar one, but
	  that was not even considered a possibility in later code, leading
	  to an assertion failure and/or nonsensical results. Now the
	  default is fft_nocut, which seems to have been the intention from
	  the rest of the code.
	  * The default for PoissonFFTKernel are enumerated in the
	  documentation.
	  * Removed attempts at HTML formatting in output.

2013-01-18 08:59  marques

	* [r9839] libxc/src/gga_c_optc.c, libxc/src/gga_x_hjs.c,
	  libxc/src/mgga_x_m08.c: Small bug fixes. Micael can you check if
	  any of the segfaults disapears?

2013-01-18 18:46  dstrubbe

	* [r9841]
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp:
	  Removed keyword 'OnlyUserDef' from input files which does not
	  exist, and is presumably obsolete.

2013-01-18 21:52  dstrubbe

	* [r9842] testsuite/periodic_systems/03-sodium_chain.test: Added
	  tests for total energy components in sodium chain test. I am
	  surprised that we get a negative number for the Hartree energy
	  here.

2013-01-18 21:59  dstrubbe

	* [r9843] src/ions/simul_box.F90: Fix of uninitialized use of
	  'idir' as flagged by valgrind.

2013-01-18 22:08  dstrubbe

	* [r9844] libxc: svn:ignore for new file 'test-driver'

2013-01-19 05:37  dstrubbe

	* [r9845] src/poisson/poisson.F90: More specific and helpful error
	  messages when an incompatible Poisson solver is chosen.

2013-01-19 05:41  dstrubbe

	* [r9846] src/poisson/poisson_fft.F90: Removed variable DELTA_R in
	  favor of M_EPSILON which is our standard tolerance for
	  floating-point comparisons.

2013-01-19 20:25  dstrubbe

	* [r9847] src/poisson/poisson.F90: Restored if-condition
	  accidentally removed in r9845, which broke a lot of tests.

2013-01-19 20:55  dstrubbe

	* [r9848] src/poisson/solver_3d_inc.F90,
	  testsuite/components/06-hartree_3d.06-direct3d.inp,
	  testsuite/components/06-hartree_3d.test: * Direct3D Poisson
	  solver (at least in serial case) was only working for curvilinear
	  coordinates. Now it works for regular grids too.
	  * Added a test for this solver.

2013-01-19 22:15  dstrubbe

	* [r9849] src/poisson/solver_3d_inc.F90,
	  testsuite/components/06-hartree_3d.test: * The serial version of
	  the direct3D Poisson solver was mistakenly using a prefactor
	  copied from the 2D case. Also, the parallel case used two subtly
	  different values for no good reason. Now the same prefactor is
	  always used.
	  * This improves slightly the accuracy of the integration in the
	  test.

2013-01-19 22:40  dstrubbe

	* [r9850] src/poisson/poisson.F90, src/poisson/solver_1d_inc.F90:
	  Documenting a secret variable and specifying when it applies.

2013-01-19 23:01  dstrubbe

	* [r9851] src/poisson/poisson.F90: Consolidated useless repeated
	  code in select statement.

2013-01-19 23:10  dstrubbe

	* [r9852] src/poisson/poisson.F90, src/poisson/solver_3d_inc.F90:
	  Consolidated options for direct-sum Poisson solver into one,
	  rather than separately for each dimension. It is better to select
	  automatically the correct dimensionality than to just complain or
	  give a wrong answer if a different dimensionality was selected.

2013-01-19 23:22  dstrubbe

	* [r9853] src/poisson/poisson.F90, src/poisson/solver_1d_inc.F90:
	  Removed useless routine zpoisson1D_solve for complex scaling: it
	  adds unnecessary complexity and computational expense, compared
	  to the approach used for the other solvers.

2013-01-19 23:28  dstrubbe

	* [r9854] src/poisson/poisson.F90, src/poisson/solver_1d_inc.F90:
	  Now the direct Poisson solver actually tries to work in
	  curvilinear mode, as claimed by the code elsewhere.

2013-01-19 23:48  dstrubbe

	* [r9855] testsuite/components/06-hartree_3d.06-direct3d.inp:
	  Updating name in testsuite file.

2013-01-20 00:01  dstrubbe

	* [r9856] src/poisson/solver_3d_inc.F90: * In 3D direct solver,
	  simplified code in parallel branch with volume_element and
	  vol_pp, and in serial branch, removed unstated assumption that
	  the spacing is identical in all directions. (At this point, I
	  think that this solver existing only for "testing" is actually
	  correct...)
	  * Began generalizing to arbitrary number of dimensions.

2013-01-20 00:04  dstrubbe

	* [r9857] src/poisson/solver_3d_inc.F90: Removed explicit reference
	  to 3D and useless variable xg.

2013-01-20 00:12  dstrubbe

	* [r9858] src/poisson/poisson.F90, src/poisson/solver_3d_inc.F90:
	  The 2D direct Poisson solver is decommissioned in favor of a
	  general 2D/3D one. This corrects several problems with the 2D one
	  which I recently fixed in the 3D one.

2013-01-20 00:35  dstrubbe

	* [r9859] src/poisson/solver_2d_inc.F90: Removing 2D direct solver
	  since the general 2D/3D one is now used.

2013-01-20 00:40  dstrubbe

	* [r9860] src/poisson/solver_3d_inc.F90: Fixing exponent on volume
	  which is 1/3 in 3D but 1/2 in 2D. Moving to prefactor when not
	  curvilinear to help performance.

2013-01-20 00:49  dstrubbe

	* [r9861] src/poisson/solver_3d_inc.F90: It is better not to have
	  so many if's in the inner do loop.

2013-01-20 01:04  dstrubbe

	* [r9862] testsuite/open_systems/02-wavepacket_2d.01-full_q.inp,
	  testsuite/open_systems/03-extended_eigenstate.01-square_well_1d.inp:
	  Removed unneeded PoissonSolver lines in input files that have
	  TheoryLevel = independent_particles.

2013-01-20 01:09  dstrubbe

	* [r9863] src/poisson/solver_3d_inc.F90: Fixing syntax errors.

2013-01-20 03:25  dstrubbe

	* [r9864] src/system/output.F90: Allowing compilation with
	  BerkeleyGW and --with-max-dim=4.

2013-01-20 03:30  dstrubbe

	* [r9865] src/poisson/solver_3d_inc.F90: Explicit bounds to avoid
	  an issue with max dim = 4 on lascar. Also, a 3 was accidentally
	  left in one place that would cause trouble for 2D direct sum
	  Poisson.

2013-01-20 03:43  dstrubbe

	* [r9866] src/poisson/solver_3d_inc.F90: intel doesn't seem to like
	  my syntax. Bringing back the temporary variable 'xg'.

2013-01-20 04:27  dstrubbe

	* [r9867] src/poisson/poisson_fft.F90: * Documenting secret
	  variable PoissonCutoffRadius. I am not sure why you would wish to
	  adjust this though.
	  * Some combinations of dimensionality did not parse the variable
	  or write output, now they all do the same thing.
	  * The default, and condition for warning, should be based only on
	  finite directions, not on periodic directions -- in the case that
	  a periodic direction was larger than a finite direction (unusual
	  but certainly possible), I think you would get the wrong answer.

2013-01-21 10:11  marques

	* [r9868] libxc/src/gga_c_optc.c: No more NaNs in optc ;)

2013-01-21 10:23  marques

	* [r9869] libxc/src/gga_c_wl.c: No more NaN in gga_c_wl

2013-01-21 12:29  marques

	* [r9870] libxc/src/gga_x_hjs.c: This fixes the NaNs that were
	  appearing on the HJS_B88 functional

2013-01-21 12:34  marques

	* [r9871] libxc/src/mgga_c_pkzb.c: Fixed NaNs in the TPSS and PKZB

2013-01-21 14:40  micael

	* [r9872] libxc/src/gga_c_optc.c, libxc/src/gga_x_hjs.c: * Some NaN
	  were still appearing.

2013-01-21 16:37  micael

	* [r9874] libxc/ChangeLog: * Tagging Libxc version 2.0.1.

2013-01-22 12:25  marques

	* [r9875] libxc/src/functionals.c, libxc/src/libxc_master.F90,
	  libxc/src/xc.h, libxc/src/xc_f.c: Added interfaces to get/set
	  hybrid and cam parameters

2013-01-22 13:15  marques

	* [r9876] libxc/src/gga_c_optc.c, libxc/src/gga_c_pbe.c,
	  libxc/src/gga_x_hjs.c, libxc/src/work_gga_x.c: Added the variant
	  PBE (vPBE) functional. From my tests this is virtually identical
	  to the PBE.

2013-01-22 13:20  marques

	* [r9877] libxc/testsuite/regression/gga_c_ft97.data.bz2,
	  libxc/testsuite/regression/gga_c_optc.data.bz2,
	  libxc/testsuite/regression/gga_c_vpbe.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_1.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_2.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_3.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_d.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_gga1.data.bz2,
	  libxc/testsuite/regression/gga_xc_b97_k.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_120.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_147.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_407.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_407p.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_93.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_a.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_p14.data.bz2,
	  libxc/testsuite/regression/gga_xc_hcth_p76.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_1a.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_1b.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_1c.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_2a.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_2b.data.bz2,
	  libxc/testsuite/regression/gga_xc_sb98_2c.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_b97.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_b97_1.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_b97_2.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_b97_3.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_b97_k.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_1a.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_1b.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_1c.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_2a.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_2b.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_sb98_2c.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_b86b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_b88b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_bb1k.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_m05.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_m05_2x.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_m06.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_m06_2x.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_m06_hf.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_mpw1b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_mpwb1k.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_pw86b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_x1b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_xb1k.data.bz2,
	  libxc/testsuite/regression/mgga_c_bc95.data.bz2,
	  libxc/testsuite/regression/mgga_c_m05.data.bz2,
	  libxc/testsuite/regression/mgga_c_m05_2x.data.bz2,
	  libxc/testsuite/regression/mgga_c_m06.data.bz2,
	  libxc/testsuite/regression/mgga_c_m06_2x.data.bz2,
	  libxc/testsuite/regression/mgga_c_m06_hf.data.bz2,
	  libxc/testsuite/regression/mgga_c_m06_l.data.bz2,
	  libxc/testsuite/regression/mgga_c_pkzb.data.bz2,
	  libxc/testsuite/regression/mgga_c_tpss.data.bz2,
	  libxc/testsuite/regression/mgga_c_vsxc.data.bz2,
	  libxc/testsuite/regression/mgga_x_ms0.data.bz2,
	  libxc/testsuite/regression/mgga_x_ms1.data.bz2,
	  libxc/testsuite/regression/mgga_x_ms2.data.bz2,
	  libxc/testsuite/regression/mgga_x_ms2h.data.bz2: Reset of the
	  testsuite after all the bug corrections

2013-01-22 13:28  mjv500

	* [r9878] src/td/spectrum.F90: bug in normalization of propag
	  spectrum, for non kick case - this has been patched before...

2013-01-22 13:40  marques

	* [r9879] libxc/src/mgga_c_pkzb.c, libxc/src/mgga_c_vsxc.c: Added
	  revisedTPSS correlation

2013-01-23 09:23  marques

	* [r9880] libxc/src/gga_c_pbe.c: Corrected reference. Thanks David.

2013-01-23 09:52  marques

	* [r9881] libxc/src/functionals.c, libxc/src/hyb_gga_xc_hse.c,
	  libxc/src/hyb_gga_xc_pbeh.c, libxc/src/libxc_master.F90,
	  libxc/src/xc.h, libxc/src/xc_f.c: Removed interface to _set_cam
	  and _set_exx.
	  Added interface to set mixing of both pbe0 and hse

2013-01-23 11:52  marques

	* [r9882] libxc/src/libxc_master.F90: Changed the name of a
	  variable and a comment. Thanks Fabien.

2013-01-24 10:39  joseba

	* [r9883] src/poisson/poisson_fmm.F90,
	  src/poisson/solver_3d_inc.F90: Corrections in the explanations of
	  Hamiltonian/Poisson input variables
	  Deleted unused input variables
	  
	  Changes by Pablo Garcia RisueÃ±o

2013-01-24 14:41  joseba

	* [r9884] src/math/root_solver.F90, src/scf/scf.F90,
	  src/system/linear_solver.F90, src/td/spectrum.F90: Removed
	  useless white spaces
	  Added few doxygen comments

2013-01-24 14:49  joseba

	* [r9885] src/math/tdfunction.F90, src/species/species.F90: More
	  useless white spaces

2013-01-24 17:14  dstrubbe

	* [r9886] src/poisson/poisson_fmm.F90,
	  src/poisson/solver_3d_inc.F90: Little cleanups of documentation.

2013-01-24 17:34  joseba

	* [r9887] m4/libfm.m4, src/poisson/poisson_fmm.F90: Adapted the
	  configuration to the new library of LIBFM included in the general
	  ScaFaCos.
	  Cleaning of variables in the code.

2013-01-24 17:39  joseba

	* [r9888] src/grid/cube.F90, src/grid/cube_function_inc.F90,
	  src/grid/par_vec.F90, src/math/fft.F90, src/math/fft_inc.F90,
	  src/math/pfft.F90, src/poisson/poisson_fmm.F90,
	  src/poisson/poisson_isf.F90: Updated my name in the (c)

2013-01-24 20:04  dstrubbe

	* [r9889] src/poisson/poisson.F90: References.

2013-01-25 17:35  dstrubbe

	* [r9890] src/poisson/poisson_cg.F90,
	  src/poisson/poisson_corrections.F90: Making a routine name more
	  specific.

2013-01-25 18:24  dstrubbe

	* [r9891] src/poisson/poisson.F90,
	  src/poisson/poisson_corrections.F90: Blocking multipole
	  corrections for Poisson in periodic systems.

2013-01-27 12:24  xavier

	* [r9892] src/states/states_calc_inc.F90: Missing call to
	  opencl_finish.

2013-01-27 12:34  xavier

	* [r9893] src/poisson/poisson_cutoff.F90: Removed some PUSH_SUBs
	  from routines that are called too often.

2013-01-27 13:09  xavier

	* [r9894] src/basic/getopt_f.c, src/basic/utils.F90: * Added
	  clamdblas and clamdfft to the list of optional libraries and
	  config options.

2013-01-27 13:13  xavier

	* [r9895] testsuite/components/11-hartree_cl.01-fft.inp,
	  testsuite/components/11-hartree_cl.test: Added a test for the
	  OpenCL Poisson solver.

2013-01-28 15:11  xavier

	* [r9896] testsuite/components/10-hartree_pfft.test,
	  testsuite/components/11-hartree_cl.test,
	  testsuite/components/Makefile.am: * Added the new tests to the
	  makefile.
	  * Changed the title of the specific Hatree tests.

2013-01-28 16:58  xavier

	* [r9897] src/grid/fourier_space_inc.F90: Bugfix: the size of the
	  Fourier space operator was wrong for OpenCL.

2013-01-28 17:05  dstrubbe

	* [r9898] m4/libfm.m4: Removed unnecessary output.

2013-01-28 17:51  dstrubbe

	* [r9899] src/poisson/poisson_fft.F90: Comments and more checking.

2013-01-28 18:10  dstrubbe

	* [r9900] src/poisson/poisson_fft.F90: Removed unused variables
	  'gx'.

2013-01-28 21:08  dstrubbe

	* [r9901] src/grid/fourier_space_inc.F90,
	  src/poisson/poisson_cutoff.F90, src/poisson/poisson_fft.F90: *
	  Fixed confusing names of arguments to intcoslog: its gx and gy
	  were named in reverse from other occurrences.
	  * Making sure to use double precision in converting integer to
	  float.
	  * Removed useless variable 'vec'.
	  * Some comments.
	  * Formatting.

2013-01-29 10:59  acastro

	* [r9902] src/math/oct_gsl_min_f.c, src/td/spectrum.F90:
	  Initialized a variable that sometimes could be used
	  uninitialized.
	  
	  Added gsl_set_error_handler_off in oct_1dminimize routine, since
	  the code
	  should continue even if the minimization is not successful.
	  (Perhaps we should
	  think about a general policy for gsl_set_error_handler_off?)

2013-01-29 16:16  xavier

	* [r9903] share/opencl/mesh_to_cube.cl: The opencl implementation
	  of mesh_to_cube was wrong.

2013-01-29 19:43  dstrubbe

	* [r9904] src/poisson/poisson.F90: Just as the spherical cut-off
	  FFT kernel takes the maximum box size for a finite direction as
	  the one to use in all directions, the cylindrical cut-off FFT
	  kernel should take the maximum box size for the two finite
	  directions to use in both of those. This was not happening and
	  could easily give spurious interactions.

2013-01-29 21:06  dstrubbe

	* [r9905] src/main/unocc.F90, src/system/output.F90: * The unocc
	  mode now obeys 'OutputEvery' so you can get restart data written
	  for calculations that get killed by a scheduler.
	  * Clarified and updated documentation on OutputEvery, which was
	  quite misleading. Note: the Sternheimer modes write restart data
	  on every iteration always.

2013-01-30 02:01  dstrubbe

	* [r9906] src/main/unocc.F90: Option for testing to show
	  convergence of occupied states too in unocc mode.

2013-01-30 02:28  dstrubbe

	* [r9907] src/grid/mesh_partition.F90, src/grid/zoltan.F90:
	  Clarifications to documentation about mesh partitioners.

2013-01-30 03:51  dstrubbe

	* [r9908] src/grid/mesh_partition.F90, src/grid/partition.F90: Some
	  comments regarding mesh partitioning.

2013-01-30 11:02  xavier

	* [r9909] src/math/fft_inc.F90: Missing condition for an if.

2013-01-30 19:13  dstrubbe

	* [r9910] src/states/restart.F90: Fixing race condition in
	  clean_stop: proc 0 might find the file 'stop' present, delete it,
	  and then exit the loop, but other processors arriving in the
	  routine later would not see the file there anymore, and not exit
	  the loop, so the code would hang rather than exit cleanly.

2013-01-30 19:42  dstrubbe

	* [r9911] src/basic/messages.F90, src/system/eigensolver.F90: *
	  Fixed intent.
	  * Indentation.

2013-01-30 22:43  dstrubbe

	* [r9912] src/system/subspace_inc.F90: Missing deallocation.

2013-01-31 05:20  dstrubbe

	* [r9913] src/grid/submesh.F90, src/states/states_calc_inc.F90,
	  src/system/eigen_cg_inc.F90: Formatting, indentation, push/pop.

2013-01-31 18:07  dstrubbe

	* [r9914] src/system/eigen_cg_inc.F90,
	  src/system/eigen_evolution_inc.F90,
	  src/system/eigen_lobpcg_inc.F90: * Improved usefulness of
	  DebugLevel = 1 output from CG eigensolver by expressing residual
	  in scientific notation.
	  * Added similar output for CG_new and evolution solvers.
	  * Fixed indentation in LOBPCG.

2013-01-31 23:03  dstrubbe

	* [r9915] src/main/geom_opt.F90, src/main/phonons_fd.F90,
	  src/main/static_pol.F90, src/main/unocc.F90,
	  src/opt_control/opt_control.F90, src/scf/ground_state.F90,
	  src/scf/scf.F90, src/states/restart.F90,
	  src/sternheimer/sternheimer_inc.F90, src/td/td.F90: On chum intel
	  mpich2, my recent change to clean_stop involving MPI_Bcast
	  (r9910) caused the CAETRS test to hang because it uses 'task
	  parallelization' with slave nodes for the Poisson equation. The
	  slaves do not enter the "calculation mode" routine and thus do
	  not call clean_stop. That routine, therefore, should broadcast
	  only over the communicator for the masters, not MPI world. To do
	  so, we must now pass the multicomm object in some more places.

2013-02-01 16:52  dstrubbe

	* [r9916] src/system/eigensolver.F90: Initialization to zero of the
	  eigensolver errors for each state. Otherwise, if you do rmmdiis
	  without subspace diagonalization (or with independent particles),
	  since the routine for the initial minimization steps does not
	  calculate residuals, you will may get scary NaN or 10^200 or
	  something in the Error column since it was uninitialized. Now you
	  will have zero there instead, which still looks odd but doesn't
	  imply that the calculation has gone crazy.

2013-02-01 17:41  dstrubbe

	* [r9917] src/main/casida.F90: Reducing error verbosity a little.

2013-02-01 17:42  dstrubbe

	* [r9918] src/basic/profiling.F90: Increasing the label length for
	  profiling tags since some were being cut off.

2013-02-01 18:03  dstrubbe

	* [r9919] src/basic/multicomm.F90: Typo in variable documentation.

2013-02-01 20:18  dstrubbe

	* [r9920] src/basic/multicomm.F90: Revision to documentation on
	  ParallelizationGroupRanks, which seemed to suggest there was no
	  way of specifying domain/other parallelization.

2013-02-01 21:50  dstrubbe

	* [r9921] testsuite/real_time/06-caetrs.04-kick-tp2.inp: Removed
	  conflicting duplicated input tag.

2013-02-01 22:46  dstrubbe

	* [r9922] src/scf/scf.F90: Adding an option to require convergence
	  of the individual eigenvectors.

2013-02-01 23:49  dstrubbe

	* [r9923] src/main/casida.F90: Two more errors should be
	  only_root_writes in casida.

2013-02-02 05:29  dstrubbe

	* [r9924] testsuite/oct-run_regression_test.pl: Inserting a note
	  when a test run wants more than 4 MPI tasks. This can be done (in
	  moderation) to increase the likelihood of finding race
	  conditions, says Xavier.

2013-02-02 19:23  dstrubbe

	* [r9925] testsuite/oct-run_regression_test.pl: Comment about
	  running with more than 4 MPI tasks in the testsuite.

2013-02-04 09:43  marques

	* [r9926] libxc/src/Makefile.am, libxc/src/mgga_x_mn12.c: Added the
	  functionals MGGA_X_MN12_L and MGGA_X_MN12_SX

2013-02-04 11:10  marques

	* [r9927] libxc/src/gga_x_pw91.c, libxc/src/xc.h,
	  libxc/testsuite/regression/gga_c_vpbe.data.bz2,
	  libxc/testsuite/regression/gga_x_mpw91.data.bz2,
	  libxc/testsuite/regression/gga_xc_mpwlyp1w.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_mpw1k.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_mpw1pw.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_mpw3lyp.data.bz2,
	  libxc/testsuite/regression/hyb_gga_xc_mpw3pw.data.bz2,
	  libxc/testsuite/regression/mgga_c_revtpss.data.bz2,
	  libxc/testsuite/regression/mgga_x_mn12_l.data.bz2,
	  libxc/testsuite/regression/mgga_x_mn12_sx.data.bz2: Made PW91
	  code a bit more general.
	  Reset of the testsuite

2013-02-04 12:16  marques

	* [r9928] libxc/src/mgga_c_bc95.c, libxc/src/xc.h: Added more
	  flexibility to Becke95

2013-02-04 12:34  marques

	* [r9929] libxc/src/gga_x_pw91.c, libxc/src/hyb_mgga_xc_m05.c,
	  libxc/testsuite/regression/hyb_mgga_xc_pw6b95.data.bz2,
	  libxc/testsuite/regression/hyb_mgga_xc_pwb6k.data.bz2: Added
	  mgga_xc_pwb6k and mgga_xc_pw6b95

2013-02-04 13:17  marques

	* [r9930] libxc/src/gga_xc_1w.c, libxc/src/hyb_mgga_xc_m05.c,
	  libxc/testsuite/regression/mgga_xc_tpsslyp1w.data.bz2: Added
	  mgga_xc_tpsslyp1w

2013-02-04 13:47  marques

	* [r9931] libxc/src/hyb_gga_xc_b1wc.c,
	  libxc/testsuite/regression/hyb_gga_xc_mpwlyp1m.data.bz2: Added
	  hyb_gga_xc_mpwlyp1m

2013-02-05 09:31  marques

	* [r9932] libxc/src/Makefile.am, libxc/src/gga_x_n12.c,
	  libxc/testsuite/regression/gga_x_n12.data.bz2,
	  libxc/testsuite/regression/gga_x_n12_sx.data.bz2: Added the
	  functionals GGA_X_N12 and GGA_X_N12_SX. Note that the library
	  "Minnesota Functional Module" seems to have a bug: F1 is
	  initialized, so Pi=acos(-F1) gets the value of Pi/2 ;(((

2013-02-05 11:46  marques

	* [r9933] libxc/src/gga_x_n12.c, libxc/src/gga_xc_b97.c,
	  libxc/src/mgga_x_mn12.c,
	  libxc/testsuite/regression/gga_c_n12.data.bz2,
	  libxc/testsuite/regression/gga_c_n12_sx.data.bz2,
	  libxc/testsuite/regression/gga_x_n12.data.bz2,
	  libxc/testsuite/regression/gga_x_n12_sx.data.bz2,
	  libxc/testsuite/regression/mgga_x_mn12_l.data.bz2,
	  libxc/testsuite/regression/mgga_x_mn12_sx.data.bz2: Added
	  GGA_C_N12 and GGA_C_N12_SX.
	  Corrected the spelling of Minnesota.

2013-02-05 13:34  marques

	* [r9934] libxc/src/Makefile.am, libxc/src/mgga_c_m08.c,
	  libxc/testsuite/regression/mgga_c_m08_hx.data.bz2,
	  libxc/testsuite/regression/mgga_c_m08_so.data.bz2,
	  libxc/testsuite/regression/mgga_c_m11.data.bz2,
	  libxc/testsuite/regression/mgga_c_m11_l.data.bz2,
	  libxc/testsuite/regression/mgga_c_mn12_l.data.bz2,
	  libxc/testsuite/regression/mgga_c_mn12_sx.data.bz2: Added
	  functionals MGGA_C_M08_HX, MGGA_C_M08_SO, MGGA_C_M11,
	  MGGA_C_M11_L, MGGA_C_MN12_L, and MGGA_C_MN12_SX

2013-02-05 15:53  marques

	* [r9935] libxc/src/mgga_x_m08.c,
	  libxc/testsuite/regression/hyb_mgga_x_m11.data.bz2,
	  libxc/testsuite/regression/mgga_x_m08_hx.data.bz2,
	  libxc/testsuite/regression/mgga_x_m08_so.data.bz2,
	  libxc/testsuite/regression/mgga_x_m11_l.data.bz2: Added the
	  functionals hyb_mgga_x_m11 and mgga_x_m11_l. I guess that most of
	  the functionals of Truhlar are now in.

2013-02-05 22:59  xavier

	* [r9936] src/math/fft.F90: Removed 5 from the factors used for the
	  OpenCL FFT. This fixes an
	  error (fpe) and improves performance.

2013-02-06 00:33  acastro

	* [r9937] src/td/spectrum.F90: One variable could be used
	  uninitialized sometimes.

2013-02-06 14:25  marques

	* [r9938] libxc/TODO, libxc/src/Makefile.am,
	  libxc/src/mgga_c_cc06.c,
	  libxc/testsuite/regression/mgga_c_cc06.data.bz2: Added functional
	  mgga_c_cc06

2013-02-06 22:04  dstrubbe

	* [r9939] src/scf/scf.F90: Adding an extra initialization to stop
	  the test failure which began with r9922.

2013-02-07 08:45  marques

	* [r9940] libxc/src/Makefile.am, libxc/src/mgga_x_mk00.c,
	  libxc/src/work_mgga_x.c,
	  libxc/testsuite/regression/mgga_x_br89.data.bz2,
	  libxc/testsuite/regression/mgga_x_mk00.data.bz2,
	  libxc/testsuite/regression/mgga_x_mk00b.data.bz2: Added the
	  functionals MGGA_X_MK00 and MGGA_X_MK00B. Now we have all
	  functionals of molpro.
	  Corrected bug in the evaluation of fxc for the metaggas that
	  depend both in tau and nabla^2 n (only br89 up to now, actually).

2013-02-08 13:25  marques

	* [r9941] src/ions/symmetries.F90: Default is now to calculate the
	  symmetries if there are less than 100
	  atoms.

2013-02-08 13:49  marques

	* [r9942] build/mk_functionals_list.pl,
	  src/xc/functionals_list.F90: Updated functional list for libxc
	  2.0.1 I explicitly removed from the
	  list kinetic energy functionals and the CAM hybrids.

2013-02-08 13:50  marques

	* [r9943] src/ions/symmetries.F90: Changed documentation of
	  SymmetriesCompute in order to reflect the new
	  default

2013-02-08 21:48  xavier

	* [r9944] testsuite/components/06-hartree_3d.06-direct3d.inp,
	  testsuite/components/06-hartree_3d.test,
	  testsuite/components/12-hartree_direct_3d.01.inp,
	  testsuite/components/12-hartree_direct_3d.test,
	  testsuite/components/Makefile.am: * Move the direct 3d poisson
	  test takes too long. So I moved it to an
	  independent long-run test.

2013-02-08 21:50  xavier

	* [r9945] src/poisson/solver_3d_inc.F90: Added explicit boundaries
	  to the operations in the direct poisson
	  solver.

2013-02-08 22:11  xavier

	* [r9946] build/mk_functionals_list.pl,
	  src/xc/functionals_list.F90: Added ks_inversion to the list of
	  functionals and to the generator script.

2013-02-09 01:39  xavier

	* [r9947] src/ions/simul_box.F90,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-ground_state_disp.inp:
	  Declared mixed periodicity systems as experimental.

2013-02-09 03:55  xavier

	* [r9949] configure.ac: The new name for the development version
	  (chosen by David) is 'octopus
	  superciliosus', the frilled pygmy octopus:
	  
	  http://portphillipmarinelife.net.au/species/7307

2013-02-09 05:06  xavier

	* [r9950] src/math/fft.F90, src/math/fft_inc.F90: Two clAmdFft
	  plans are now used. This is required for real ffts.

2013-02-09 13:25  xavier

	* [r9951] src/poisson/solver_3d_inc.F90: The direct 3D test started
	  failing in parallel. It seems to me that
	  there was an obvious error in the code, but I don't understand
	  why the
	  test was working before.

2013-02-09 22:26  xavier

	* [r9953] src/math/fft.F90, src/poisson/poisson.F90,
	  testsuite/components/11-hartree_cl.01-fft.inp: * Now the Poisson
	  test honors the TestRepetitions variable.
	  
	  * The OpenCL fft Poisson solver has some problems with the real
	  FFT,
	  it segfaults for more than one call to the Poisson solver, so I
	  am
	  switching back to complex FFTs for the moment.

2013-02-10 01:03  xavier

	* [r9954] external_libs/fortrancl/clamdfft.f90,
	  external_libs/fortrancl/clamdfft_low.c, src/basic/types.F90,
	  src/math/fft.F90, src/math/fft_inc.F90: The problem with the real
	  FFT appears to be a bug with the library. It
	  is avoided by passing an external temporary buffer.

2013-02-10 01:28  xavier

	* [r9955] share/opencl/mesh_to_cube.cl,
	  src/grid/cube_function_inc.F90, src/math/fft.F90,
	  src/math/fft_inc.F90: * The real FFT is done directly, instead of
	  using an intermediate
	  complex array (that was used to simplify testing).
	  
	  * Fixed non-cl compilation.

2013-02-10 01:32  xavier

	* [r9956] src/math/fft_inc.F90: Removed some unused variables.

2013-02-10 21:42  xavier

	* [r9957] src/math/fft.F90, src/poisson/poisson_fft.F90: Improved
	  the output for the FFT and the FFT poisson solver.

2013-02-10 22:29  xavier

	* [r9958] src/grid/cube_function_inc.F90, src/math/fft.F90: The
	  array strides are now stored for the opencl fft.

2013-02-10 23:03  xavier

	* [r9959] src/grid/fourier_space_inc.F90: For OpenCL, the Fourier
	  space kernel is now stored according to the
	  stride used by the library.

2013-02-12 13:20  marques

	* [r9960] libxc/src/Makefile.am, libxc/src/mgga_c_cc06.c,
	  libxc/src/mgga_c_cs.c,
	  libxc/testsuite/regression/mgga_c_cc06.data.bz2,
	  libxc/testsuite/regression/mgga_c_cs.data.bz2: I had forgotten
	  the Colle and Salvetti functional. It is added now ;)

2013-02-12 14:29  micael

	* [r9961] src/system/Makefile.am, src/system/xc_kli_inc.F90,
	  src/system/xc_kli_pauli_inc.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_inc.F90, src/system/xc_oep_sic_inc.F90,
	  src/system/xc_oep_x_inc.F90: * Added calculation of OEP
	  potentials with non-collinear spin. This is still a work in
	  progress, as there are still some functionallities that do not
	  work, like parallelization in states, and the code still needs
	  some improvements.
	  
	  Most of this work was done by Myrta Gruning and Pedro Melo.

2013-02-12 20:08  dstrubbe

	* [r9962] src/system/output.F90: Clarifications to variable
	  documentation for Output = potential.

2013-02-13 10:08  micael

	* [r9963] src/system/xc_oep_inc.F90: * Fixed bug introduced by the
	  recent changes in the OEP part that affected parallelization in
	  states.

2013-02-13 21:05  dstrubbe

	* [r9964] src/basic/blacs_proc_grid.F90: Making an array explicit
	  just to avoid (unimportant) warnings about array temporaries.

2013-02-13 21:38  dstrubbe

	* [r9965] src/states/modelmb_exchange_syms_inc.F90: Unused
	  arguments.

2013-02-13 21:48  dstrubbe

	* [r9966] src/states/modelmb_exchange_syms_inc.F90: Removing
	  explicit array bounds.

2013-02-13 22:17  dstrubbe

	* [r9967] testsuite/periodic_systems/03-sodium_chain.test: Note on
	  test.

2013-02-14 18:16  dstrubbe

	* [r9968] testsuite/oct-run_regression_test.pl: Fixing -n "dry run"
	  behavior for testsuite script: it ignored most of the logic about
	  determining what would be on the command line.

2013-02-14 19:26  dstrubbe

	* [r9969] src/states/restart_inc.F90, src/sternheimer/em_resp.F90:
	  Simplifying the interface for restart_read_lr_rho by using the
	  density directly instead of the lr_t object.

2013-02-14 19:57  dstrubbe

	* [r9970] src/main/casida.F90: Beginning implementation of Casida
	  excited-state forces.

2013-02-14 20:45  dstrubbe

	* [r9971] src/main/casida.F90: Casida K_term now can be separately
	  queried for the Hartree and fxc parts.

2013-02-14 22:52  dstrubbe

	* [r9972] src/main/casida.F90: * Calculating lr_fxc = kxc * dl_rho
	  for excited-state forces.
	  * K_term can now work with either fxc or lr_fxc.

2013-02-14 23:04  xavier

	* [r9973] configure.ac: Lets see if we can move to C99, last time
	  some autoconf versions
	  didn't have the macro.

2013-02-14 23:09  dstrubbe

	* [r9974] src/main/casida.F90: Cleaner way of setting xc for
	  K_term.

2013-02-14 23:35  dstrubbe

	* [r9975] src/main/casida.F90: A bit of reorganization, and making
	  eps_diff work too, for excited-state forces.

2013-02-15 02:46  dstrubbe

	* [r9976] src/main/casida.F90, src/main/casida_inc.F90: Refactored
	  out the calculation of transition matrix elements in Casida.
	  Also, now Arto Sakko's q-dependent X-ray stuff is enabled for
	  complex as well as real wavefunctions.

2013-02-15 03:58  dstrubbe

	* [r9977] src/main/casida.F90, src/main/casida_inc.F90: Casida
	  Petersilka/eps_diff now use X(transition_matrix_element).

2013-02-15 04:03  dstrubbe

	* [r9978] src/main/casida.F90: Casida Petersilka/eps_diff now uses
	  the same routine for oscillator strengths as the other Casida
	  theory levels. They are all automatically able to use
	  q-dependence now.

2013-02-15 04:38  dstrubbe

	* [r9979] src/main/casida.F90, src/main/casida_inc.F90: Casida info
	  and profiling.

2013-02-15 17:41  dstrubbe

	* [r9980] testsuite/linear_response/01-casida.test: Nicer matches
	  in Casida test.

2013-02-16 15:27  dstrubbe

	* [r9981] src/utils/casida_spectrum.F90: Bugfix: the x,y,z columns
	  from oct-casida_spectrum were not physically meaningful. They
	  need to be the sum of the squares of the matrix elements from
	  each transition, not just the sum of the matrix elements, or else
	  this quantity is dependent on the arbitrary phase of the
	  wavefunctions. Now they are really the cross sections for each
	  polarization.

2013-02-16 15:29  dstrubbe

	* [r9982] testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.test: * Running all the
	  theory levels in the Casida test.
	  * Adding matches for oscillator strengths and spectra from the
	  utility run.

2013-02-16 20:37  xavier

	* [r9983] src/system/eigen_rmmdiis_inc.F90: Added explicit
	  functions for the calculation of the matrix elements in
	  rmmdiis.

2013-02-16 22:07  xavier

	* [r9984] src/system/eigen_rmmdiis_inc.F90: Implemented the rmmdiis
	  iteration for packed batches.

2013-02-17 00:19  xavier

	* [r9985] share/opencl/Makefile.am, share/opencl/cl_rtype.h,
	  src/system/eigen_rmmdiis.F90, src/system/eigen_rmmdiis_inc.F90:
	  Initial implementation of rmmdiis_iter_3 for OpenCL.

2013-02-17 01:36  xavier

	* [r9986] share/opencl/rmmdiis.cl: Compilation works better if I
	  include all the files in the commit.

2013-02-17 16:40  xavier

	* [r9987] share/opencl/Makefile.am, share/opencl/rmmdiis.cl,
	  src/system/eigen_rmmdiis.F90, src/system/eigen_rmmdiis_inc.F90:
	  Adding special code for the rmmdiis matrix elements complicates
	  the
	  code too much, so I will remove it.

2013-02-17 17:40  xavier

	* [r9988] src/basic/global.F90, src/grid/mesh_init.F90,
	  src/states/states.F90: The default value of MeshBlockSize is
	  selected by the value of
	  StatesBlockSize.

2013-02-17 19:03  xavier

	* [r9989] src/states/states.F90: The default value of
	  StatesBlockSize is reduced when it is too large
	  for the system.

2013-02-17 20:55  xavier

	* [r9990] src/basic/getopt_f.c: A space was missing in the
	  configuration output.

2013-02-18 02:01  xavier

	* [r9992]
	  testsuite/components/04-hartree_3d_cg.01-cg_corrected.inp,
	  testsuite/components/04-hartree_3d_cg.test,
	  testsuite/components/05-hartree_3d_fft.01-fft.inp,
	  testsuite/components/05-hartree_3d_fft.02-fft_corrected.inp,
	  testsuite/components/05-hartree_3d_fft.test,
	  testsuite/components/06-hartree_3d.01-isf.inp,
	  testsuite/components/06-hartree_3d.02-multigrid.inp,
	  testsuite/components/06-hartree_3d.03-fft.inp,
	  testsuite/components/06-hartree_3d.04-fft_corrected.inp,
	  testsuite/components/06-hartree_3d.05-cg_corrected.inp,
	  testsuite/components/06-hartree_3d.test,
	  testsuite/components/06-hartree_3d_isf.01-isf.inp,
	  testsuite/components/06-hartree_3d_isf.test,
	  testsuite/components/13-hartree_3d_mg.01-multigrid.inp,
	  testsuite/components/13-hartree_3d_mg.test,
	  testsuite/components/Makefile.am: Split the Hartree test. This
	  should help with the valgrind buildbot.

2013-02-18 03:45  xavier

	* [r9993] testsuite/real_time/12-absorption.test: Increased
	  tolerance to a test that started failing after my changes to
	  the default value of MeshBlockSize.

2013-02-18 05:13  xavier

	* [r9995] src/ions/simul_box.F90: Declared non-orthogonal cells as
	  experimental.

2013-02-18 05:54  xavier

	* [r9997] src/hamiltonian/hamiltonian_inc.F90: Fixed the problem
	  with periodic systems and spinors reported by
	  Fabiana Da Pieve.

2013-02-18 06:02  xavier

	* [r9999] debian/changelog: Forwardport: updated the debian
	  changelog.

2013-02-18 06:12  xavier

	* [r10000] src/basic/opencl.F90: Added the OpenCLBenchmark
	  variable, that runs benchmarks to test the
	  hardware capabilities. This is useful to detect bugs in the
	  implementation. For the moment only the PCIe link is tested.

2013-02-18 14:56  xavier

	* [r10001] src/basic/opencl.F90: Fixed the problem with compilation
	  without OpenCL.

2013-02-19 04:53  dstrubbe

	* [r10002] testsuite/linear_response/01-casida.test: In a system
	  with degeneracies (such as N2), our Petersilka implementation
	  does not give well-defined answers, and so we should not test its
	  spectrum results. (We need to construct and diagonalize the whole
	  matrix in degenerate subspaces.)

2013-02-19 05:01  dstrubbe

	* [r10003] src/xc/fxc_inc.F90: More helpful alignment of PUSH_SUB
	  with respect to error message.

2013-02-19 05:03  dstrubbe

	* [r10004] src/utils/casida_spectrum.F90: Bugfix:
	  oct-casida_spectrum would misinterpret the columns for a
	  spin-polarized eps_diff or petersilka calculation.

2013-02-19 16:19  dstrubbe

	* [r10006] testsuite/linear_response/05-polarizability.test:
	  Loosening tolerance very slightly, since polarizability xx for
	  finite diffs failed with discrepancy 0.0011 on chum pgi test.

2013-02-19 18:45  dstrubbe

	* [r10010] testsuite/oct-run_regression_test.pl: Now we can do the
	  utility runs with mpiexec on one processor. This should allow
	  testing the utilities always in the buildslaves and when running
	  the testsuite on supercomputers. Assuming no problem arises with
	  this, we can make utilities be built always, even when MPI is
	  enabled.

2013-02-19 18:48  dstrubbe

	* [r10011] testsuite/oct-run_regression_test.pl: Removing line
	  which I think was debugging info accidentally left in r8324: we
	  will see what command_suffix in the next line of output anyway.

2013-02-19 19:08  dstrubbe

	* [r10012] src/states/excited_states.F90: More helpful error
	  message.

2013-02-19 19:13  dstrubbe

	* [r10013] src/utils/casida_spectrum.F90: Removing hard-coding of
	  dim=3 in oct-casida_spectrum.

2013-02-19 19:25  dstrubbe

	* [r10014] src/grid/mesh_batch_inc.F90: Redundant initializations.

2013-02-19 20:01  dstrubbe

	* [r10015] src/main/casida.F90,
	  testsuite/linear_response/01-casida.03-casida.inp: Adding some
	  caveats for Casida: triplets, Tamm-Dancoff, CV(2), and
	  CasidaMomentumTransfer are experimental. k-points and partial
	  occupations are not implemented. CasidaQuadratureOrder need only
	  be read when CasidaMomentumTransfer is set; made documentation
	  reflect this.

2013-02-19 20:07  dstrubbe

	* [r10016] src/main/casida_inc.F90: Triplets have no oscillator
	  strength, due to the symmetry of their wavefunctions (|up -> up>
	  - |dn -> dn>).

2013-02-19 22:06  dstrubbe

	* [r10019] src/main/casida.F90: Making treatment of dimensionality
	  more general in Casida.

2013-02-19 22:42  dstrubbe

	* [r10020] src/main/casida.F90, src/main/casida_inc.F90: * The
	  dimension cas%nspin should really be st%d%nik to be correct for
	  spinors and/or k-points.
	  * Partially and half filled states should be included as both
	  occupied and unoccupied when we have occupations implemented in
	  Casida.

2013-02-19 23:18  dstrubbe

	* [r10021] testsuite/linear_response/05-polarizability.test: Fixing
	  silly mistake in r10006.

2013-02-19 23:32  dstrubbe

	* [r10023] perl/backport.sh: Adding a useful script. Automatic
	  backport by, e.g. 'backport.sh 10006'. It is a little perverse to
	  put a bash script in the perl directory, but I don't see a better
	  place for it. Not worthwhile to install to bin since it is only
	  for development anyway.

2013-02-20 02:29  xavier

	* [r10024] src/system/eigensolver.F90: * Added a messages about the
	  memory requirements of the rmmdiis
	  eigensolver.
	  
	  * The eigensolver output is now "stressed".

2013-02-20 03:17  dstrubbe

	* [r10025] Makefile.am, configure.ac, perl, scripts: Renaming
	  'perl' directory to 'scripts' since it now has a bash one.
	  Hopefully I changed everything necessary for that.

2013-02-20 03:36  dstrubbe

	* [r10026] src/basic/multicomm.F90, src/main/casida.F90,
	  src/utils/casida_spectrum.F90,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.test: Pure 'other'
	  parallelization is a bad default. Trying to solve Poisson
	  separately on each node consumes excessive memory and time. In
	  principle, we would have joint domain/other parallelization, but
	  'other' parallelization takes precedence, especially since
	  multicomm_init does not know the actual problem size and uses a
	  fictitious value of 10000, making it impossible to choose joint
	  parallelization wisely, and generally resulting in a choice of
	  only one domain group. This should be fixed later.
	  
	  * For now, I have made domain parallelization the default for
	  Casida.
	  * Clarified that the parallelization is not in e-h pairs really,
	  but their matrix elements (i.e. between two e-h pairs).
	  * Using hybrid domain/other parallelization for the Casida test.

2013-02-20 04:02  dstrubbe

	* [r10027] src/main/casida.F90, src/utils/casida_spectrum.F90,
	  testsuite/linear_response/01-casida.test: Output from casida and
	  oct-casida_spectrum now include the units in a header.

2013-02-20 05:28  dstrubbe

	* [r10028] src/basic/multicomm.F90, src/main/casida.F90: * Fixing
	  mistaken 'clarification' from r10026: yes it really is e-h pairs,
	  not matrix elements; I misunderstood the code.
	  * Comment on reuse of Poisson solution in Casida.

2013-02-20 14:52  dstrubbe

	* [r10029] src/grid/subarray_inc.F90: Fixing indentation.

2013-02-20 14:58  dstrubbe

	* [r10030] src/basic/command_line.F90,
	  src/grid/derivatives_inc.F90, src/grid/nl_operator.F90,
	  src/grid/nl_operator_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90: Suppressing some warnings
	  from g95:
	  * Added intents in command_line interfaces, and removed an unused
	  variable (in the interface!)
	  * Some places target should be specified so the compiler realizes
	  an intent(out) variable will be changed via being put into a
	  batch.
	  * Unused profiling variable.

2013-02-20 15:02  dstrubbe

	* [r10031] src/hamiltonian/lasers.F90: Clarification to variable
	  reference.

2013-02-20 17:03  dstrubbe

	* [r10034] src/basic/multicomm.F90: ParallelizationGroupRanks
	  writes a warning for each parallelization strategy that is not
	  available, no matter what you write in the corresponding column.
	  This is not helpful. Let's warn only if the value is not 1, i.e.
	  there was an attempt to use that strategy.

2013-02-20 19:10  dstrubbe

	* [r10037] src/species/ps.F90, src/species/species.F90: Warnings
	  for inappropriate pseudopotential species input.

2013-02-20 19:59  dstrubbe

	* [r10038] src/species/ps.F90, src/species/ps_cpi.F90,
	  src/species/ps_in_grid.F90, src/species/ps_psf.F90: * Grammar and
	  spelling.
	  * Formatting.
	  * Fixed an intent, as suggested by a WARNING that has been there
	  since r2526, 6 years ago...
	  * Doxygen comments.

2013-02-20 20:29  dstrubbe

	* [r10039] src/species/ps.F90, src/species/species.F90: Changing
	  warnings to fatal errors about bad values of lmax and lloc, since
	  Micael points out (and I verified with -g -C) that all kinds of
	  things go wrong if these values are not ok, even if the run would
	  superficially seem ok otherwise.

2013-02-20 22:54  dstrubbe

	* [r10040] configure.ac: Reverting r9973 until such time as someone
	  upgrades chum's autoconf to support AC_PROG_CC_C99.

2013-02-20 23:04  dstrubbe

	* [r10042] src/main/unocc.F90, src/states/states.F90: * Declaring
	  unocc + spinors experimental. This kind of run is not tested, and
	  in my tests I found it destroys the gs wfns and makes everything
	  unpolarized, even in LCAO is not used. gs + ExtraStates seems
	  fine though.
	  * The variable SpinComponents accepts 'non_collinear' and
	  'spinors' as equivalent, but the way the info is displayed on the
	  website, only 'spinors' shows up. Both are used extensively in
	  the testsuite, and appear in other documentation, so I won't
	  remove one, but just make sure the documentation makes clear that
	  both can be used. (This was added in r1581.)

2013-02-21 00:15  dstrubbe

	* [r10044] src/species/ps_psf.F90: Undoing intent change from
	  r10038, which does not compile on pathscale. Miguel lied in his
	  comment...

2013-02-21 00:39  xavier

	* [r10045] src/system/eigen_rmmdiis_inc.F90: * In rmmdiis the
	  residual is recalculated instead of calculated as a
	  linear combination.
	  
	  * Simplified the allocation in rmmdiis.

2013-02-21 01:12  xavier

	* [r10046] src/system/eigen_rmmdiis_inc.F90: Removed a double
	  allocation in my last commit.

2013-02-21 03:55  dstrubbe

	* [r10047] src/scf/lcao_inc.F90: LCAO debug now writes more info on
	  the orbital indices.

2013-02-21 04:41  dstrubbe

	* [r10048] configure.ac: Building utilities is now enabled by
	  default, unless in single precision. If you don't want them for
	  some reason, use --disable-utils. Of course, if you prefer to run
	  them in serial without "mpirun -n 1", you can ignore the
	  MPI-built ones and make a separate serial build, just as before.

2013-02-21 10:34  joseba

	* [r10049] src/grid/cube.F90, src/grid/mesh_cube_parallel_map.F90,
	  src/grid/partition_transfer.F90: Updated the creation of the
	  mesh/cube map, to need only a constant time for a given system.
	  Until now it doubles the execution time doubling the number of
	  processes

2013-02-21 15:55  xavier

	* [r10050] src/grid/batch.F90, src/grid/mesh_batch_inc.F90,
	  src/system/eigen_rmmdiis_inc.F90, src/system/eigensolver.F90:
	  Added an option to save memory in rmmdiis eigensolver
	  (EigensolverSaveMem).

2013-02-21 17:00  xavier

	* [r10051] src/grid/mesh_batch_inc.F90: A small fix in my previous
	  commit.

2013-02-21 19:16  dstrubbe

	* [r10052] src/grid/mesh.F90, src/states/density.F90: Suppressing
	  (very small) array copies, to avoid meaningless warnings from
	  ifort -check all.

2013-02-21 19:19  dstrubbe

	* [r10053]
	  testsuite/finite_systems_3d/20-eigensolver.06-rmmdiis.inp,
	  testsuite/finite_systems_3d/20-eigensolver.test: Re-enabling
	  hybrid domain/state parallelization for a test, which had it
	  commented out due to some disabling that is clearly no longer the
	  case. Also, setting number of states and processors to compatible
	  values, since 5 states and 4 procs causes an error due to an
	  empty states-group.

2013-02-21 19:52  dstrubbe

	* [r10054] src/ions/geometry.F90, src/scf/lcao.F90,
	  src/species/species.F90: * Simplifying documentation for Species
	  block: column 4 is basically always the same.
	  * More explanation about LCAO orbitals.
	  * LCAOStart = lcao_none should be default for species_from_file
	  and spec_jelli_slab and spec_charge_density, not just for
	  spec_user_def, since these three have in common that they do not
	  represent an atom and so we do not know where (if anywhere) it
	  would be appropriate to have the orbitals centered.
	  * Message tells how many LCAO orbitals are available for
	  pseudopotential species.

2013-02-21 22:18  dstrubbe

	* [r10055]
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp: Enabling
	  LCAO for some jellium runs, which speeds up convergence a bit,
	  and allows more testing of LCAO for non-pseudopotential species.

2013-02-21 22:32  dstrubbe

	* [r10056] src/scf/lcao.F90: Documentation on atomic guess
	  densities.

2013-02-22 00:56  dstrubbe

	* [r10059] src/ions/simul_box.F90: I am pretty sure any
	  'experiment' with non-orthogonal cells will fail.

2013-02-22 01:07  dstrubbe

	* [r10060] src/basic/comm_inc.F90, src/grid/mesh_batch.F90,
	  src/grid/mesh_batch_inc.F90: * Making optional arguments explicit
	  by keyword.
	  * Removing explicit array bounds which caused a (small) array
	  temporary.

2013-02-22 01:19  dstrubbe

	* [r10062] src/grid/mesh.F90: The big box test has such a large
	  volume/point that it overflowed the format statement.

2013-02-22 03:39  dstrubbe

	* [r10064] src/scf/lcao.F90: Typo.

2013-02-22 11:11  joseba

	* [r10066] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_libisf.F90, src/poisson/solver_3d_inc.F90:
	  Implemented a new Poisson solver using ISF solver of BigDFT
	  (version 1.6.0)
	  
	  I did this to get a separate library ISF library:
	  - Compile BigDFT in the machine
	  - Install it
	  - Copy all these libraries to a empty directory:
	  libabinit.a libbigdft.a libdft_common.a libpoissonsolver.a
	  libxc.a
	  
	  - Extract all *.o of those libraries:
	  ar x lib*.a
	  
	  - Collect all *.o in a new library:
	  ar cru libisfsolver.a *.o
	  ranlib libisfsolver.a
	  - Copy to a new directory the libisfsolver.a and the module
	  poisson_solver.mod
	  Include both when compiling with this new library. Mandatory to
	  include also blas and lapack librari
	  es.
	  
	  @TODO Prepare a m4 script to link with the library
	  @TODO Adapt this library to all options that now has the previous
	  ISF
	  @TODO Remove old version and integrate there this one
	  @TODO Clean memory

2013-02-22 12:24  acastro

	* [r10067] src/hamiltonian/hamiltonian.F90: Fix of a bug reported
	  by Maria Tsoneva: the use of a laser field with spinors
	  was unphysical. The reason is that the non-diagonal parts of the
	  local
	  potential were also populated with the electric potential.

2013-02-22 16:10  dstrubbe

	* [r10068] src/poisson/Makefile.am, src/poisson/poisson_libisf.F90,
	  src/poisson/solver_3d_inc.F90: * Removed unnecessary module usage
	  of poisson_cutoff_m which was causing compilation failures due to
	  lack of a corresponding dependency.
	  * Removing apostrophes in comments.
	  * Removed duplicate dependency, and broke a long one into two
	  lines.

2013-02-22 16:18  joseba

	* [r10069] src/poisson/poisson_libisf.F90: Deleted unused variable
	  and also related comment in basque. Sorry for that

2013-02-22 16:24  dstrubbe

	* [r10070] src/main/casida.F90: It is best to do Petersilka last,
	  for performance reasons, due to the better ability to reuse
	  Poisson solutions when generating the whole matrix.

2013-02-22 17:48  dstrubbe

	* [r10071] src/main/casida.F90: Clarifying that Tamm-Dancoff
	  calculations are ok with complex wavefunctions, actually.

2013-02-22 19:37  dstrubbe

	* [r10073] src/species/ps.F90: I don't see any reason not to use
	  orbitals for LCAO that are above the maximum angular momentum
	  being considered for the pseudopotential. This was apparently
	  introduced in r3233 by Miguel. If you don't want so many
	  orbitals, you can always avoid them with LCAODimension. Perhaps
	  the intention was to avoid unbound atomic orbitals (maybe
	  correlated with being above the lmax of the pseudo?), but we
	  remove these since r7551.

2013-02-22 20:10  askhl

	* [r10074] build/mk_functionals_list.pl, configure.ac,
	  m4/arpack.m4, m4/parpack.m4, src/basic/getopt_f.c,
	  src/basic/messages.F90, src/basic/utils.F90,
	  src/common-rules.make, src/grid/Makefile.am,
	  src/grid/batch_ops.F90, src/grid/cmplxscl.F90, src/grid/mesh.F90,
	  src/grid/mesh_function_inc.F90, src/hamiltonian/Makefile.am,
	  src/hamiltonian/epot.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/species_pot.F90, src/include/global.h,
	  src/scf/scf.F90, src/states/density.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_calc.F90, src/states/states_calc_inc.F90,
	  src/states/states_dim.F90, src/states/states_inc.F90,
	  src/states/states_io.F90, src/system/Makefile.am,
	  src/system/eigen_arpack.F90, src/system/eigen_arpack_inc.F90,
	  src/system/eigen_cg.F90, src/system/eigensolver.F90,
	  src/system/energy_calc.F90, src/system/energy_calc_inc.F90,
	  src/system/exponential.F90, src/system/output_h_inc.F90,
	  src/system/output_states_inc.F90, src/system/system.F90,
	  src/system/v_ks.F90, src/td/propagator.F90, src/td/spectrum.F90,
	  src/td/td.F90, src/td/td_write.F90, src/xc/functionals.F90,
	  src/xc/functionals_list.F90, src/xc/vxc_inc.F90, src/xc/xc.F90,
	  testsuite/Makefile.am, testsuite/complex_scaling,
	  testsuite/complex_scaling/01-harmonic-oscillator.complex-lda.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.lda.inp,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/Makefile.am: add complex-scaling code
	  which hopefully doesn't break everything

2013-02-22 20:20  dstrubbe

	* [r10075] testsuite/complex_scaling: svn:ignore properties for new
	  directory.

2013-02-22 21:54  dstrubbe

	* [r10076] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: * No buildslaves have
	  arpack, so the complex_scaling tests must check for that option
	  or they will definitely fail.
	  * Fixing TestGroups in accordance with current conventions.

2013-02-22 21:57  dstrubbe

	* [r10077] src/main/casida.F90: Creating a new subsubroutine for
	  Casida forces.

2013-02-22 22:02  askhl

	* [r10078] src/hamiltonian/Makefile.am: reinstate
	  hamiltonian/Makefile.am to its former glory

2013-02-22 22:04  askhl

	* [r10079] src/common-rules.make: remove comments from old conflict
	  in common-rules.make

2013-02-23 01:34  xavier

	* [r10080] src/system/eigen_rmmdiis.F90,
	  src/system/eigen_rmmdiis_inc.F90: * Added some profiling regions
	  to the rmmdiis eigensolver.
	  * Some functions should be executed only in 'save memory' mode.

2013-02-23 03:21  xavier

	* [r10081] src/states/states.F90: Removed debugging output.

2013-02-23 04:11  dstrubbe

	* [r10082] doc/html/vars/Makefile.am: Adding ComplexScaling.html to
	  Makefile for installation, to fix the dist check buildslave.

2013-02-23 04:29  dstrubbe

	* [r10083] testsuite/finite_systems_3d/20-eigensolver.test:
	  Tweaking tolerances to let mauchly pass the tests.

2013-02-23 04:53  dstrubbe

	* [r10084] src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90: * Fixing non-ARPACK compilation:
	  functions calling ARPACK routines were not inside #ifdef's.
	  Surprising this was ok for some compilers.
	  * Indentation.
	  * A variable systematically contained a typo.
	  * The arpack_debug and arpack_check_error routines need not be
	  hidden since they do not contain ARPACK calls.
	  * Fixing PUSH/POPs.

2013-02-23 05:04  dstrubbe

	* [r10085] doc/html/vars/Makefile.am, src/grid/cmplxscl.F90:
	  Actually the variable section 'ComplexScaling' appears to be a
	  mistake. Everything else is in section 'Hamiltonian.' I recommend
	  to Ask to put it all in 'Hamiltonian::ComplexScaling' for
	  tidiness.

2013-02-23 05:16  askhl

	* [r10086] src/system/eigen_arpack.F90: remove debugging variables
	  for now

2013-02-23 05:27  xavier

	* [r10087]
	  testsuite/finite_systems_3d/10-fullerene.02-gs_packed.inp,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/Makefile.am: Added a run with
	  StatesPack=yes to the fullerene test.

2013-02-23 13:40  xavier

	* [r10088] src/grid/batch_ops_inc.F90: * Optimized the
	  batch_get_points and batch_set_points functions.

2013-02-23 15:35  xavier

	* [r10089] external_libs/fortrancl/clamdblas.f90,
	  external_libs/fortrancl/clamdblas_low.c,
	  src/states/states_calc_inc.F90: Now states_overlap is calculated
	  by blocks of points instead of blocks
	  of states.

2013-02-23 16:44  xavier

	* [r10090] src/system/subspace.F90, src/system/subspace_inc.F90:
	  Moved the calculation of the subspace hamiltonian to a
	  subroutine.

2013-02-23 16:48  askhl

	* [r10091] src/xc/vxc_inc.F90: clean up and remove older function

2013-02-23 16:50  askhl

	* [r10092] src/system/output_h_inc.F90, src/system/v_ks.F90:
	  indentation

2013-02-23 16:51  askhl

	* [r10093] src/system/eigen_cg.F90, src/system/eigensolver.F90:
	  remove direct eigensolver as it is slightly unsightly and
	  unlikely to be used from now on

2013-02-23 17:19  dstrubbe

	* [r10094] src/poisson/poisson_libisf.F90: * Fixed mistaken #ifdef
	  symbol.
	  * Formatting, corrected PUSH/POP's.

2013-02-23 17:29  xavier

	* [r10095] src/system/subspace.F90, src/system/subspace_inc.F90:
	  When using OpenCL the subspace diagonalization is done by blocks
	  of points.

2013-02-23 17:39  askhl

	* [r10096] src/grid/Makefile.am, src/hamiltonian/Makefile.am,
	  src/states/restart.F90, src/states/states_calc.F90,
	  src/system/Makefile.am: minor cleanups and style fixes mostly in
	  complex scaling code

2013-02-23 17:41  dstrubbe

	* [r10097] src/poisson/poisson_libisf.F90: Removed unnecessary
	  module usages. Somehow this seems to fix the BOMD test on chum.

2013-02-23 17:43  askhl

	* [r10098] src/grid/mesh_function_inc.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/species_pot.F90: more minor style fixes

2013-02-23 18:33  askhl

	* [r10099] src/xc/vxc_inc.F90: slightly more cleanup

2013-02-23 19:44  dstrubbe

	* [r10100] src/scf/lcao.F90: Updating documentation to reflect
	  r10073.

2013-02-23 19:47  dstrubbe

	* [r10101] src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90: Making it possible to call
	  calc_hvar without having set up linear_response_t and
	  sternheimer_t objects.

2013-02-23 20:30  dstrubbe

	* [r10102] src/main/casida.F90: Setting up for derivatives of
	  eigenvalues in Casida forces.

2013-02-23 23:25  xavier

	* [r10103]
	  testsuite/finite_systems_3d/10-fullerene.02-gs_packed.inp: This
	  part of the test cannot be run parallel in states.

2013-02-23 23:31  xavier

	* [r10104] src/system/subspace_inc.F90: When all the states are in
	  one block, blas can be called directly.

2013-02-23 23:40  xavier

	* [r10105] src/grid/mesh_init.F90, src/states/states_calc_inc.F90:
	  Merged the calls to syrk and herk.

2013-02-23 23:41  xavier

	* [r10106] src/grid/mesh_init.F90: Reverting change made by
	  mistake.

2013-02-24 02:07  dstrubbe

	* [r10107] src/main/casida.F90,
	  src/sternheimer/sternheimer_inc.F90: fxc must be an optional
	  argument to calc_hvar, or else we would be passing it unallocated
	  for magnetic or kdotp perturbations. This made the g95 tests fail
	  with a runtime error.

2013-02-24 14:35  xavier

	* [r10108] src/poisson/poisson.F90: Added a batch interface for the
	  Poisson solver.

2013-02-24 16:54  acastro

	* [r10110] scripts/backport.sh: Small modification to the
	  backport.sh script to make sure that it works with
	  version 1.7.8 of subversion.

2013-02-24 22:49  xavier

	* [r10111] src/main/casida_inc.F90: Replaces access to st%dpsi with
	  a call to states_get_state.

2013-02-25 01:05  xavier

	* [r10112] src/main/casida_inc.F90, src/states/states.F90,
	  src/states/states_inc.F90: * Added the states_get_points
	  function, that returns the value of the
	  states for a range of points.
	  
	  * Removed an access to st%X(psi) from the Casida code, replaced
	  by a
	  states_get_points call.

2013-02-25 01:35  xavier

	* [r10113] src/main/casida.F90, src/main/casida_inc.F90: More calls
	  to states_get_state. Now st%X(psi) is not used by Casida.

2013-02-25 02:28  xavier

	* [r10114] src/states/density.F90: Removed other access to
	  st%X(psi). In this case the previous code was
	  broken. This is part of the frozen orbitals implementation, that
	  I
	  think was never used.

2013-02-25 02:46  xavier

	* [r10115] src/sternheimer/em_resp.F90: Removed a reference to
	  st%X(psi).

2013-02-25 02:57  dstrubbe

	* [r10116] src/main/casida.F90, src/main/casida_inc.F90,
	  src/utils/casida_spectrum.F90,
	  testsuite/linear_response/01-casida.test: Implementing the proper
	  single-pole approximation of Petersilka. We now construct the
	  whole matrix, but set to zero everything except diagonals and
	  degenerate subspaces. This should make the Petersilka match that
	  was failing pass, since the results will no longer be dependent
	  on the arbitrary choice of orbitals in the degenerate subspaces.
	  Also, Petersilka spectrum matches are enabled.
	  
	  The Petersilka results used to differ strongly from both Casida
	  and Tamm-Dancoff for the N2 test. Now the Petersilka spectrum
	  looks identical to Tamm-Dancoff, actually, as it should when
	  there is little mixing between (non-degenerate) transitions.
	  
	  As a result, we no longer can write the 'From' and 'To' indices
	  for Petersilka eigenvalues, since they may be a mixture in
	  degenerate subspaces, but we write an 'excitations' directory
	  like for Casida, where you can see what the eigenvector is.
	  
	  Still to be done: better treatment of degeneracy threshold,
	  better progress bar.

2013-02-25 04:57  xavier

	* [r10117] src/states/states_io.F90: More st%X(psi) removed.

2013-02-25 05:08  dstrubbe

	* [r10118] src/main/casida.F90: * Cleaning up remnants of old
	  Petersilka implementation.
	  * Separating 'solve_casida' routine into two parts.

2013-02-25 11:27  askhl

	* [r10119] src/system/eigen_arpack.F90: remove commas after string
	  format specification to appease bluegene xlf compiler

2013-02-25 14:36  xavier

	* [r10120] src/scf/lcao.F90: Replaced st%X(psi) with
	  states_set_state.

2013-02-25 20:42  dstrubbe

	* [r10121] scripts/backport.sh: More comments on backport script.

2013-02-26 20:48  dstrubbe

	* [r10122] src/main/casida.F90: Fixing progress bar for Petersilka.

2013-02-27 04:25  dstrubbe

	* [r10123] src/main/casida.F90, src/main/casida_inc.F90: * Reusing
	  'rho' for something unrelated in K_term is dubious. Let's use a
	  different variable there.
	  * More promptly deallocating.
	  * Consolidated statements for unpolarized and spin-polarized.
	  * Notes on what needs to be done for casida run mode to work for
	  complex wavefunctions.

2013-02-27 16:09  dstrubbe

	* [r10124] src/main/casida.F90: * Adding some new components to
	  casida_t.
	  * Making messages_experimental arguments singular, so the
	  resulting sentence is more grammatical.
	  * hvar from vib_modes should always be real, even with complex
	  wavefunctions.

2013-02-27 16:12  dstrubbe

	* [r10125] src/main/casida.F90: While Tamm-Dancoff calculations
	  with complex wavefunctions are possible in principle, the current
	  code assumes things are real in some places that will make the
	  result incorrect.

2013-02-27 19:40  dstrubbe

	* [r10128] src/main/casida.F90: Another plural for
	  messages_experimental.

2013-02-27 20:38  dstrubbe

	* [r10129] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_inc.F90: Refactored real/cplx poisson start
	  and finish routines into an included file.

2013-02-27 21:25  dstrubbe

	* [r10130] src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/poisson/poisson.F90, src/poisson/poisson_corrections.F90,
	  src/poisson/poisson_fft.F90, src/poisson/poisson_fmm.F90,
	  src/poisson/poisson_inc.F90, src/poisson/poisson_multigrid.F90: *
	  Fixing unnecessarily generous intents: inout that should be in
	  mostly, but a few that should be out (init routines).
	  * Formatting.
	  * Doxygen comments.
	  * der in poisson_multigrid_solver was target, for no apparent
	  reason. Not anymore.

2013-02-27 21:43  dstrubbe

	* [r10131] src/grid/mesh_batch.F90, src/hamiltonian/epot.F90,
	  src/states/physics_op_inc.F90, src/states/states_inc.F90,
	  src/system/pert_inc.F90: * gr was unnecessarily 'inout' in pert
	  routines.
	  * Indentation.
	  * Doxygen comments.
	  * Fixing unterminated apostrophe.

2013-02-27 23:11  dstrubbe

	* [r10132] src/main/casida.F90: Adding a component cas%nst to the
	  casida_t type, and using it in some places to make the
	  appropriate generalization for partial occupations. Also, the
	  second dimension of cas%index was being allocated with one more
	  element (at the bottom of the range) than necessary.

2013-02-27 23:24  dstrubbe

	* [r10133] src/main/casida.F90, src/main/casida_inc.F90:
	  Calculating electron-phonon matrix elements for change in
	  eigenvalues part of Casida matrix, for excited-state forces.

2013-02-28 05:11  dstrubbe

	* [r10134] src/main/casida.F90, src/main/casida_inc.F90: * Changed
	  cas%forces (logical) to cas%calc_forces, and used cas%forces for
	  a FLOAT array of the actual forces.
	  * A bit of rearrangement.
	  * The actual forces for eps_diff are now calculated and written
	  out.
	  * Fixing initializations for lr_hmat arrays.
	  * Making array indices for lr_hmat1 more intuitive.

2013-02-28 20:56  dstrubbe

	* [r10135] src/main/casida.F90: Clarified warnings about bad
	  excitation energies in Casida.

2013-02-28 22:48  dstrubbe

	* [r10137] src/main/casida.F90: Rationalized sorting in Casida:
	  only eps_diff actually needs it, as diagonalization returns
	  sorted eigenvalues anyway.

2013-03-01 03:35  dstrubbe

	* [r10138] src/grid/io_function.F90: Doxygen comments.

2013-03-01 04:53  dstrubbe

	* [r10139] src/main/casida.F90: * Implemented (nearly) degenerate
	  perturbation theory for excited-state forces, only eps_diff so
	  far. This consideration seems to have been wholly neglected in
	  previous literature on the subject!
	  * Correcting sign error for forces, and using ordering index
	  properly.

2013-03-01 16:05  xavier

	* [r10140] src/states/states_calc_inc.F90,
	  src/system/subspace_inc.F90: Some operations are now counted.

2013-03-01 17:44  askhl

	* [r10141] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/solver_1d_inc.F90,
	  src/poisson/solver_1d_init_inc.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: adapt 1d direct poisson
	  solver for complex scaling. This is necessary because the
	  soft-Coulomb kernel does not correspond to a linear system, so
	  one cannot solve separately for real/imag parts. Reinstate the
	  relevant parts of the complex scaling tests.

2013-03-01 20:39  dstrubbe

	* [r10142] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/solver_1d_inc.F90,
	  src/poisson/solver_1d_init_inc.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: Reverting r10141 which
	  did not compile for several reasons. I am not sure what was
	  intended, it needs another try.

2013-03-01 22:11  dstrubbe

	* [r10143] src/main/casida.F90: Writing out saved matrix elements
	  for Casida will now be in casida_get_matrix not casida_solve.

2013-03-01 23:02  dstrubbe

	* [r10144] src/main/casida.F90: * Loading saved data is done by
	  casida_get_matrix.
	  * saved_K renamed is_saved, and moved inside casida_get_matrix.
	  * is_saved array and restart filename are passed as arguments.

2013-03-01 23:18  dstrubbe

	* [r10145] src/main/casida.F90: We use an array for the effective
	  triplet kernel of the same size as for the singlet kernel.

2013-03-01 23:31  dstrubbe

	* [r10146] src/main/casida.F90: The matrix is now passed as an
	  argument to various routines in Casida.

2013-03-02 00:15  acastro

	* [r10147] src/math/Makefile.am, src/math/lalg_adv.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/math/math.F90,
	  src/xc/fxc_inc.F90, src/xc/xc.F90: Support for LDA kernel with
	  non-collinear spin densities.

2013-03-02 00:24  dstrubbe

	* [r10148] src/main/casida.F90: Casida restart data now goes to a
	  directory restart/casida, and a file kernel or kernel_triplet.
	  Note: this breaks compatibility with restart data written by
	  4.1.x, though you can just create the directory and rename the
	  files, and then it is compatible.

2013-03-02 00:51  dstrubbe

	* [r10149] src/main/casida.F90: * Fixed extra slash with Casida
	  restart path.
	  * Implemented forces for Petersilka and Tamm-Dancoff theory
	  levels.

2013-03-02 02:23  askhl

	* [r10150] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/solver_1d_inc.F90,
	  src/poisson/solver_1d_init_inc.F90,
	  src/poisson/solver_1d_solve_inc.F90: attempt 2: adapt 1d direct
	  poisson solver for complex scaling. This is necessary because the
	  soft-Coulomb kernel does not correspond to a linear system, so
	  one cannot solve separately for real/imag parts.

2013-03-02 02:26  askhl

	* [r10151] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: reinstate complex
	  scaling tests that use 1d poisson solver

2013-03-02 03:41  dstrubbe

	* [r10152] src/main/casida.F90: In r10148, I tried to use loct_rm
	  to delete the restart directory, which does not work (and was
	  probably not a good idea anyway). Instead, we delete the
	  individual restart files, if they are the ones we will be working
	  with.

2013-03-02 13:08  acastro

	* [r10153] src/math/lalg_adv.F90, src/xc/fxc_inc.F90: Added some
	  comments, some PUSH_SUB/POP_SUB, and removed some unnecessary
	  duplicated code, regarding the noncollinear LDA kernel.

2013-03-02 17:44  xavier

	* [r10154] src/grid/batch_ops.F90, src/states/states_calc_inc.F90,
	  src/system/subspace_inc.F90: * Added a function that returns the
	  points block-size for a batch. For
	  the moment this is a constant.
	  
	  * Removed an extra operation count.

2013-03-02 18:07  dstrubbe

	* [r10155] src/main/casida.F90,
	  testsuite/linear_response/01-casida.test: * In r10116, I boasted
	  that now the Petersilka spectrum looks the same as Tamm-Dancoff.
	  Now I realized that they were the same to machine precision.
	  Turns out I was not handling the restart data correctly, so
	  exactly the same matrix was being diagonalized for Petersilka as
	  for Tamm-Dancoff. This needs to be fixed better, but for now we
	  just neither use nor generate restart data in a Petersilka run,
	  to ensure correctness. The Petersilka spectrum is no longer
	  identical to Tamm-Dancoff, but still much more similar than
	  before r10116. In particular, the oscillator strengths used to be
	  identical to eps_diff, which are quite inaccurate in degenerate
	  subspaces.
	  * Marking excited-state forces as experimental.

2013-03-02 23:30  dstrubbe

	* [r10156] src/main/casida.F90: * Petersilka now uses saved matrix
	  elements again, but zeroes the ones that should not be used.
	  * An array stores which were being calculated, and is used to
	  decide which to write out as restart info, so we do not store
	  zeroes that would be used incorrectly by another theory level.
	  * A function decides whether two pairs are degenerate or not.

2013-03-03 15:02  xavier

	* [r10157] share/opencl/projector.cl,
	  src/hamiltonian/hamiltonian_base_inc.F90: Some optimization of
	  the projector code.

2013-03-03 18:08  acastro

	* [r10158] src/math/lalg_adv.F90, src/xc/fxc_inc.F90: This avoids
	  (at least some, hopefully all) NaNs returned when computing the
	  kernel with very small non-collinear densities.

2013-03-03 19:19  xavier

	* [r10159] share/opencl/projector.cl,
	  src/hamiltonian/hamiltonian_base_inc.F90: More optimization of
	  the projectors.

2013-03-04 17:15  joseba

	* [r10160] src/grid/cube_function_inc.F90: Corrected a bug that
	  affected LIBISF and PFFT with one MPI process

2013-03-04 21:40  xavier

	* [r10161] share/opencl/projector.cl,
	  src/hamiltonian/hamiltonian_base_inc.F90: Reverted some
	  optimizations. There is some issue with my changes that
	  produces segfaults and other errors, but that I haven't been able
	  to
	  locate.

2013-03-06 10:02  micael

	* [r10162] src/system/xc_oep_x_inc.F90: * Bug fix in the
	  calculation of the OEP exchange energy with non-collinear spin.

2013-03-06 23:04  dstrubbe

	* [r10163] m4/libxc.m4: Enabling use of environment variables
	  LIBS_LIBXC and FCFLAGS_LIBXC as alternative to
	  --with-libxc-prefix.

2013-03-06 23:10  dstrubbe

	* [r10164] src/xc/vxc_inc.F90: Removing unterminated apostrophe.

2013-03-06 23:14  dstrubbe

	* [r10165] m4/libxc.m4: Using a more explicit syntax for linking
	  libxc. I think this should help with the problems users are
	  always reporting, that earlier versions of libxc are interfing in
	  the linking and giving errors about unresolved symbols.

2013-03-07 10:46  acastro

	* [r10166] src/math/lalg_adv.F90, src/xc/fxc_inc.F90,
	  src/xc/vxc_inc.F90: Made sure that some constants are used with
	  the correct precision.
	  
	  Removed some unused variables.

2013-03-07 14:17  askhl

	* [r10167] src/states/smear.F90: remove imaginary part of fermi
	  energy in complex scaling, which was somewhat ill-defined anyway.
	  Should also fix a complaint from valgrind

2013-03-07 17:12  dstrubbe

	* [r10168] src/system/output_states_inc.F90: Fixing mistaken units
	  for current density, introduced r5962, as reported by Yalei Jia.

2013-03-07 17:20  dstrubbe

	* [r10170] src/main/casida.F90: * Moving progress bar finishing to
	  casida_get_matrix, so it comes out right for forces.
	  * Excited-state forces were mistakenly restarting from data from
	  a different displacement. Now they each have their own restart
	  file.

2013-03-07 20:00  dstrubbe

	* [r10171] src/main/casida.F90: Petersilka should not have the
	  "From", "To" header anymore since r10116.

2013-03-07 20:24  dstrubbe

	* [r10172] src/main/casida.F90: Clarifications about complex
	  wavefunctions in Casida, and nature of Petersilka theory level.

2013-03-07 20:42  dstrubbe

	* [r10174] src/main/casida.F90: CasidaCalcForces = yes with
	  CasidaTheoryLevel containing lrtddft_casida no longer causes an
	  error, rather just a warning and it does not try to perform that
	  calculation.

2013-03-07 21:54  dstrubbe

	* [r10175] m4/arpack.m4, m4/parpack.m4, m4/pspio.m4,
	  m4/sparskit.m4: Defining strings to hold test programs, so they
	  are not duplicated in the m4 macros.

2013-03-07 22:04  dstrubbe

	* [r10176] m4/libxc.m4: The libxc m4 macro now tries to link
	  dynamically after trying static linkage. This is necessary to
	  keep my change in r10165 from breaking compilation with libxc
	  supplied by a package.

2013-03-07 22:43  dstrubbe

	* [r10177] src/grid/mesh_partition.F90: A helpful message for
	  debugging.

2013-03-07 23:30  dstrubbe

	* [r10178] src/grid/mesh_partition.F90: Removing a barrier I did
	  not mean to leave in the previous commit, and which broke serial
	  compilation.

2013-03-07 23:33  dstrubbe

	* [r10179] src/main/casida.F90: * Fixing the filenames for deletion
	  of old Casida force restart files when starting from scratch.
	  * Forgot to set the pointer for use of lr_fxc for forces matrix
	  elements.

2013-03-07 23:50  dstrubbe

	* [r10180] src/main/casida.F90: For excited-state forces, the
	  Hartree term was mistakenly being calculated.

2013-03-08 04:46  dstrubbe

	* [r10181] src/main/casida.F90, src/main/casida_inc.F90: *
	  Initializing the lower triangle of lr_hmat2.
	  * Aligning arguments.

2013-03-09 04:12  dstrubbe

	* [r10182] testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/linear_response/01-casida.test: Adding FilterPotentials
	  = filter_TS to the Casida test, in preparation for adding
	  excited-state forces to it. Some small changes in results occur.

2013-03-09 04:42  dstrubbe

	* [r10183] testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.test: Added vibrational
	  calculation to Casida test.

2013-03-10 02:47  dstrubbe

	* [r10184] src/hamiltonian/scf_tol.F90,
	  src/sternheimer/em_resp.F90: A little cleaning up:
	  * The obsolete message for PolConvAbsDens was in two places.
	  * Module alphabetization.
	  * Formatting.
	  * PUSH/POP's.

2013-03-10 02:54  dstrubbe

	* [r10188] testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.test: Trying to make test
	  pass by reducing density convergence threshold.

2013-03-10 04:15  dstrubbe

	* [r10189] src/hamiltonian/scf_tol.F90, src/scf/scf.F90,
	  src/sternheimer/sternheimer_inc.F90: Adding an option
	  LRConvRelDens for Sternheimer, like the ground-state case.

2013-03-10 04:20  dstrubbe

	* [r10190] testsuite/linear_response/03-vdw_sternheimer.test:
	  Adding gs matches for VdW test.

2013-03-10 04:43  dstrubbe

	* [r10191] m4/arpack.m4, m4/parpack.m4: * Reducing duplication in
	  m4 macros.
	  * The (P)ARPACK macros were leaving guess links (e.g. -larpack)
	  to be substituted into the final link line, even when the
	  relevant library was not found.

2013-03-10 05:02  dstrubbe

	* [r10192] src/hamiltonian/scf_tol.F90,
	  src/sternheimer/sternheimer.F90, src/system/v_ks.F90,
	  src/system/xc_kli_pauli_inc.F90, src/system/xc_oep.F90: * Making
	  adaptive tol scheme with both LRConvAbsDens and LRConvRelDens.
	  * Fixing default for LRConvRelDens.
	  * Formatting.

2013-03-10 05:12  dstrubbe

	* [r10193] src/hamiltonian/scf_tol.F90,
	  src/sternheimer/sternheimer_inc.F90: * Fixing mistake in previous
	  commit.
	  * Less blank space in output.

2013-03-10 17:22  dstrubbe

	* [r10194] testsuite/linear_response/01-casida.test: Loosening
	  tolerances.

2013-03-10 19:35  dstrubbe

	* [r10195] src/main/casida.F90: * Casida load_saved zeroes out the
	  matrix first, for safety.
	  * Formatting.
	  * Removing obsolete comment.

2013-03-10 21:35  dstrubbe

	* [r10196] src/main/casida_inc.F90: Fixing accidental doubling of
	  diagonal elements in lr_hmat2 (r10181).

2013-03-11 03:34  dstrubbe

	* [r10197] src/main/casida.F90,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.test: * Setting factor for
	  degenerate perturbation theory in excited-state forces to a more
	  reasonable number; the previous value was throwing away most of
	  the significant figures in the result.
	  * The Casida test now runs the force calculation and has matches
	  for forces.

2013-03-11 17:08  dstrubbe

	* [r10198] src/main/casida.F90: Fixing allocation and deallocation
	  of cas%mat_save and cas%forces so things work for multiple theory
	  levels, and the test does not seg fault.

2013-03-11 17:11  micael

	* [r10199] src/system/xc_kli_pauli_inc.F90, src/system/xc_oep.F90:
	  Bug fix: a MPI allreduce was missing in the non-collinear spin
	  OEP implementation.

2013-03-11 18:33  dstrubbe

	* [r10200] src/poisson/solver_1d_solve_inc.F90: Unterminated
	  apostrophes.

2013-03-11 18:39  dstrubbe

	* [r10201] testsuite/linear_response/01-casida.test: Adding matches
	  for Tamm-Dancoff excitations, and more excited-state force
	  matches.

2013-03-11 19:10  dstrubbe

	* [r10202] testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.test: The vib_modes test in
	  Casida takes far too long with the convergence threshold I set.
	  However, that level of convergence makes almost no difference to
	  the excited-state forces, so let's relax it.

2013-03-11 19:37  dstrubbe

	* [r10203] src/main/casida.F90: In fact, the kernel derivative was
	  not being included in the excited-state force calculation. Now it
	  is enabled (but still off by default for the time being). It
	  appears surprisingly unimportant.

2013-03-11 20:41  dstrubbe

	* [r10204] src/main/casida.F90: * Fixed typo of dmat2 instead of
	  zmat2 in complex branch.
	  * The electron-phonon matrix elements are now written to restart,
	  though they are not read in.
	  * Comments.

2013-03-11 21:31  dstrubbe

	* [r10205] src/main/casida.F90: The factors of two for spin and the
	  variational theory need to be applied in the forces case too.

2013-03-11 22:10  dstrubbe

	* [r10206] src/main/casida.F90,
	  testsuite/linear_response/01-casida.test: Turning on kernel
	  derivatives for excited-state forces.

2013-03-11 22:19  dstrubbe

	* [r10207] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: Let us be bold and let
	  the complex-scaling tests run. The tigger buildslave has arpack
	  and parpack actually, so it can run these. It is parallel but we
	  can run on just one processor to use the serial implementation
	  only.

2013-03-11 22:34  dstrubbe

	* [r10208] src/ions/geometry.F90,
	  testsuite/components/14-center-geom.01-run.inp,
	  testsuite/components/14-center-geom.test: * Adding a test for
	  oct-center-geom.
	  * Clarifications to documentation.

2013-03-12 01:33  dstrubbe

	* [r10209] testsuite/real_time/05-cpmd.test: Adding a test run for
	  oct-xyz-anim.

2013-03-12 16:30  dstrubbe

	* [r10210] testsuite/real_time/05-cpmd.04-xyz-anim.inp: Forgot a
	  file in r10209.

2013-03-12 16:43  dstrubbe

	* [r10211] src/main/casida.F90: Removing something mistakenly
	  committed in r10204: Petersilka forces only need off-diagonals in
	  degenerate subspaces.

2013-03-12 17:30  dstrubbe

	* [r10212] src/main/casida.F90: Being less profligate with memory
	  for excited-state forces: we do not need to keep the derivative
	  of the density or the kernel for all the displacements, just the
	  current one.

2013-03-12 17:45  dstrubbe

	* [r10213] src/scf/scf.F90: If you try 'clean stop' on geometry
	  optimization, it just breaks out of the current SCF run, but
	  continues the optimization cycle. To pass this info into the C
	  routines for optimization seems complicated, and while GSL in
	  principle can receive an error code of the forces being NaN, it
	  does not seem to care and keeps going. Therefore, we will
	  remember whether a clean stop was requested in the SCF object,
	  and die when asked to run if this is set, so the calculation
	  actually will finish.

2013-03-12 19:11  dstrubbe

	* [r10214] src/utils/xyzanim.F90: oct-xyz-anim was broken for
	  max-dim=4 (non-alphanumeric characters were written as dim=4 of
	  the coordinates, even for a 3D system). Simply using the routine
	  available elsewhere for writing xyz files fixes this.

2013-03-12 19:16  dstrubbe

	* [r10215] src/main/casida.F90: The barrier I introduced in Casida
	  in r9629 is no longer necessary, after improving the handling of
	  restart info.

2013-03-12 19:17  dstrubbe

	* [r10216] src/utils/xyzanim.F90: oct-xyz-anim now behaves properly
	  for an arbitrary number of dimensions (rather than just 3).

2013-03-12 19:36  dstrubbe

	* [r10219] src/main/geom_opt.F90: Correcting and clarifying
	  documentation about geometry optimization convergence criteria.

2013-03-12 19:59  dstrubbe

	* [r10220] src/main/casida.F90, src/main/casida_inc.F90: Removing
	  unused variable.

2013-03-12 21:37  dstrubbe

	* [r10221] testsuite/linear_response/01-casida.test: Recentering
	  reference value for Casida N2 bond stretch so tests pass.

2013-03-12 21:42  dstrubbe

	* [r10222] src/ions/simul_box.F90, src/main/geom_opt.F90: If an
	  atom moves outside the box during geometry optimization, results
	  will be meaningless afterward, so the run should terminate with
	  an error.

2013-03-12 22:24  dstrubbe

	* [r10224] src/ions/geometry.F90, src/ions/xyz_file.F90: * The code
	  now identifies how coordinates are read in (filename, or block).
	  * Clarifying comments about Coordinates inputs.

2013-03-12 22:54  dstrubbe

	* [r10225] src/main/geom_opt.F90: Adding units to geometry
	  optimization output, and a message about min.xyz.

2013-03-12 23:33  dstrubbe

	* [r10227] src/main/casida.F90: The gs forces can now be included
	  to give total excited-state forces rather than gradients of the
	  excitation energy.

2013-03-13 03:19  dstrubbe

	* [r10230] src/main/geom_opt.F90: For ease in dealing with
	  restarting geometry optimization runs, the old contents of the
	  'geom' directory are deleted to avoid confusion, and each step is
	  written to last.xyz (overwriting the old) so this can be used as
	  the coordinates for restart. (By constrast, min.xyz is only
	  written if the optimization finishes.)

2013-03-13 16:11  xavier

	* [r10231] src/main/geom_opt.F90, src/math/Makefile.am,
	  src/math/loct_math.F90, src/math/minimizer.F90,
	  src/math/minimizer_low.c, src/opt_control/opt_control.F90,
	  src/scf/rdmft.F90, src/td/spectrum.F90,
	  src/utils/oscillator_strength.F90: Moved the minimization
	  functions to its own module.

2013-03-13 21:21  dstrubbe

	* [r10232] src/main/geom_opt.F90: * GSL error codes are now written
	  out.
	  * Writing a unit label with energies.

2013-03-13 21:59  dstrubbe

	* [r10233] src/ions/simul_box.F90: Typo.

2013-03-13 23:03  dstrubbe

	* [r10234] src/ions/xyz_adjust.F90: PUSH/POPs.

2013-03-13 23:05  dstrubbe

	* [r10235] src/main/geom_opt.F90: Actually, the error unknown to
	  GSL is not an error, but a code reported by our routine what
	  GOMaxIter is hit.

2013-03-13 23:19  dstrubbe

	* [r10236] testsuite/finite_systems_3d/23-go-na2.02-simplex.inp,
	  testsuite/finite_systems_3d/23-go-na2.test: Testing some more
	  features of geometry optimization.

2013-03-13 23:20  dstrubbe

	* [r10237] src/system/subspace_inc.F90: Dividing subspace_diag
	  routine into wrapper and standard algorithm.

2013-03-14 03:33  dstrubbe

	* [r10238] src/system/eigensolver.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90: Unifying the options
	  EigensolverSubspaceDiag (turning it on or off) and
	  SubspaceDiagonalization (choosing a method) in favor of the
	  latter. Set SubspaceDiagonalization = none to turn it off. I also
	  noted that doing so is generally a bad idea. When
	  EigensolverSubspaceDiag was introduced in r6312, Miguel commented
	  that subspace diagonalization was destroying his calculations and
	  could be a bad idea for restarting unocc with a larger number of
	  states. I think the root cause of this problem (possibly
	  inconsistent LAPACK diagonalization on each processor?) has
	  probably been solved since then, so I removed the comment. You
	  may lose orthogonality and get bad results if subspace
	  diagonalization is not used for unocc.

2013-03-14 18:33  dstrubbe

	* [r10239] src/main/memory.F90: Adding PUSH/POPs.

2013-03-14 19:15  dstrubbe

	* [r10240] src/sternheimer/phonons_lr.F90: Vibrational calculations
	  with max-dim=4 (specifically the Casida one) had a small
	  discrepancy from the proper values. Changing MAX_DIM to ndim in
	  some places seems to fix it. (Also for simplicity used this
	  shortcut for some longer references to the same value.)

2013-03-14 20:20  dstrubbe

	* [r10241] configure.ac, m4/gdlib.m4, m4/gsl.m4, m4/pspio.m4: *
	  Some m4 scripts were making changes to CFLAGS and LIBS, which
	  they should not do.
	  * It is best to allow use of environment variables such as
	  FCFLAGS_PSPIO to control the behavior, not to set them to blank
	  in the m4 macros.

2013-03-15 01:41  dstrubbe

	* [r10242] src/ions/atom.F90: Cleaning.

2013-03-15 01:59  dstrubbe

	* [r10243] src/ions/xyz_adjust.F90: Correcting variable section, to
	  the utility's actual name.

2013-03-15 03:11  dstrubbe

	* [r10246] src/main/casida.F90: Option to test Hermiticity of
	  Casida matrix. In the testsuite run, it makes no difference in
	  the casida matches, and only very small differences in the
	  oct-casida_spectrum matches.

2013-03-15 03:27  dstrubbe

	* [r10247] src/main/geom_opt.F90: * Link to GSL optimization
	  documentation.
	  * Only use 1:sb%dim of forces, not up to MAX_DIM.
	  * With GOMethod = simplex, a spurious line of output (message(6)
	  was not assigned, and was the correlation energy from a previous
	  write) was being written for each iteration. I converted to the
	  new style of message writing, and fixed it.

2013-03-15 18:21  dstrubbe

	* [r10249] src/hamiltonian/projector.F90: Formatting.

2013-03-15 19:40  dstrubbe

	* [r10250] src/grid/submesh.F90, src/hamiltonian/projector.F90:
	  Changing two intent's that were causing errors about
	  uninitialized value created by a stack allocation, from valgrind,
	  with linear_response/04-vib_modes.01-gs.inp.

2013-03-15 19:58  dstrubbe

	* [r10251] src/opt_control/target.F90: Better formatting in
	  variable reference.

2013-03-15 20:58  dstrubbe

	* [r10253] liboct_parser/Makefile.am, src/common-rules.make: When I
	  removed GSL_CFLAGS and GD_CFLAGS from CFLAGS in r10241, it broke
	  compilation on some systems (if the corresponding include files
	  were not in a default path, I guess). Now these CFLAGS are
	  explicitly added to the compilation command for C source files,
	  following the treatment of Zoltan, METIS, spglib, etc.

2013-03-15 21:55  dstrubbe

	* [r10254] src/grid/submesh.F90: Fixing another intent problem
	  flagged by valgrind, with max-dim = 4.

2013-03-16 03:32  dstrubbe

	* [r10257] src/grid/submesh.F90: Submesh should use only the
	  relevant dimensions.

2013-03-16 16:16  dstrubbe

	* [r10258] src/main/unocc.F90: Warning if occupied states are not
	  converged in an unocc calculation, which can indicate serious
	  problems.

2013-03-16 22:37  dstrubbe

	* [r10259] src/sternheimer/vdw.F90: Little improvement to
	  documentation.

2013-03-16 23:00  dstrubbe

	* [r10260] src/grid/submesh.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/projector.F90: * If lmax = 0 for a
	  pseudopotential species (typical for H!), its projector was not
	  really initialized, but some of its components could be used
	  later anyway. This was causing segmentation faults with
	  mesh%sb%dim in submesh_overlap, for atom coloring. Now we
	  initialize as much as is relevant for this case.
	  * Added an assertion that could have detected this problem.
	  * Adding initialization to 'null' for submesh%mesh.

2013-03-17 02:38  dstrubbe

	* [r10261] src/hamiltonian/hamiltonian_base.F90: Moved ASSERT
	  inside if condition so it doesn't make every run with
	  non-pseudotential species crash...

2013-03-17 03:09  dstrubbe

	* [r10262] src/grid/submesh.F90, src/hamiltonian/projector.F90:
	  Undoing ill-advised parts of r10260.

2013-03-17 20:11  dstrubbe

	* [r10263] src/hamiltonian/hamiltonian_base.F90: * I think we
	  should be checking overlaps provided there are any projectors,
	  not just if they are KB projectors (i.e. include HGH and RKB
	  too).
	  * Skip overlap check if there are no projectors, to avoid seg
	  faulting for lmax = 0.

2013-03-18 15:54  acastro

	* [r10264] src/basic/command_line.F90: Some intent(in)'s that
	  should be intent(inout)'s.

2013-03-19 13:39  helbig

	* [r10265] src/scf/ground_state.F90, src/scf/rdmft.F90: Occupation
	  numbers minimization in RDMFT

2013-03-19 17:36  joseba

	* [r10266] src/grid/mesh_init.F90: Added the possibility to use a
	  bigger domain partition than the actual number of domains.
	  Sometimes is not possible to run serial domain partitioning in
	  big computers, and instead partition files can be transfered.

2013-03-19 17:55  joseba

	* [r10267] src/basic/messages.F90: Started adding support for 8
	  byte long integers.
	  The code should compile and run with 8 byte integer support in
	  the near future.

2013-03-19 20:47  acastro

	* [r10268] src/math/fft.F90, src/opt_control/controlfunction.F90: A
	  message in controlfunction.F90 was not properly output.
	  
	  In the fft_init routine, I have moved the warning about
	  non-optimal grid sizes
	  to the place where the info about the grid size is printed. This
	  way it is not
	  printed multiple times when the routine is called multiple times
	  with the same
	  FFT size.

2013-03-20 11:49  xavier

	* [r10269] src/scf/ground_state.F90, src/scf/rdmft.F90: * The rdmft
	  file was in DOS format, converted to Unix format.
	  
	  * Several style fixes and code cleaning.
	  
	  * Removed unnecessary arguments.

2013-03-20 11:50  xavier

	* [r10270] src/math/oct_gsl_min_f.c: I forgot to commit this file
	  removal.

2013-03-20 13:00  xavier

	* [r10271] src/main/geom_opt.F90, src/math/minimizer.F90,
	  src/opt_control/opt_control.F90: Defines an intermediate function
	  for multidimensional minimization
	  instead of calling GSL directly.
	  
	  Alberto: Do you think we can integrate Newuoa to this function,
	  instead of calling it directly?

2013-03-20 15:45  xavier

	* [r10272] src/main/geom_opt.F90, src/math/minimizer.F90,
	  src/opt_control/opt_control.F90: * Now the minimize functions
	  receive an array instead of the first
	  element.
	  
	  * Started the implementation of a native version of steepest
	  descent.
	  Nicole and Iris are having issues with the GSL minimization
	  routines
	  for optimizing occupation numbers that are very similar to the
	  ones we
	  have with geometry optimization. So I want to implement some
	  minimizers directly to check if there is something wrong with our
	  GSL
	  implementation.

2013-03-20 15:52  joseba

	* [r10273] src/grid/mesh_init.F90: Initialized to false
	  has_virtual_partition, in case it is not readed the input
	  parameter
	  Corrected grammar

2013-03-20 21:00  acastro

	* [r10274] src/math/minimizer.F90, src/opt_control/opt_control.F90:
	  Integrated the newuoa function into the new
	  "minimize_multimin_nograd"
	  function in the minimizer_m module, as suggested by Xavier.

2013-03-20 21:26  dstrubbe

	* [r10275] src/basic/command_line.F90: Fixing some more intents for
	  command-line function interfaces.

2013-03-20 21:29  dstrubbe

	* [r10276] src/utils/vibrational.F90: Typo in call to input_error.

2013-03-21 02:34  dstrubbe

	* [r10278] src/math/minimizer.F90: Standardizing indentation.

2013-03-21 02:37  dstrubbe

	* [r10279] src/math/minimizer.F90: PUSH/POPs.

2013-03-21 02:47  dstrubbe

	* [r10280] doc/Makefile.am, doc/oct-vibrational.pod,
	  doc/oct-vibrational_spectrum.pod: Correcting name of utility.

2013-03-21 19:32  xavier

	* [r10281] src/scf/rdmft.F90: Now the rdmft code uses
	  states_get_state.

2013-03-22 17:00  umberto

	* [r10282] testsuite/photo_electron/04-nfft.test: loosen the test
	  criteria in order to match the changes with NFFT 3.2.2

2013-03-22 17:30  umberto

	* [r10283] src/system/forces.F90, src/td/td.F90: Calculate forces
	  also when a td-external field is expressed in velocity gauge.

2013-03-22 17:50  umberto

	* [r10284] src/td/td.F90: Cleaning

2013-03-22 17:54  umberto

	* [r10285] src/hamiltonian/lasers.F90, src/states/restart.F90:
	  Documentiation:
	  * possible choices of file format in UserDefinedStates
	  * documenting the carrier phase option in TDExternalFields

2013-03-22 17:57  umberto

	* [r10286] m4/arpack.m4, m4/nfft.m4, m4/parpack.m4: preamble and
	  credits

2013-03-22 18:04  umberto

	* [r10287] src/math/fft.F90: * nn_temp was not initialized when
	  library_= FFTLIB_NFFT
	  * reserving FFTLIB_PNFFT = 5 for coming PNFFT support

2013-03-24 12:14  acastro

	* [r10288] src/opt_control/check_input_inc.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90:
	  Added a new high harmonic generation target for optimal control
	  runs.

2013-03-26 09:29  marques

	* [r10289] libxc/src/gga_c_op.c: Small typo found by Xavier Gonze

2013-03-26 18:52  dstrubbe

	* [r10291] testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test: Typos.

2013-03-27 00:57  dstrubbe

	* [r10293] src/main/geom_opt.F90, src/math/minimizer.F90,
	  src/math/minimizer_low.c, src/opt_control/opt_control.F90: A new
	  variable GOLineTol enables the user to set the tolerance for line
	  minimization in GSL methods that use the forces, for
	  CalculationMode = go. We were just using the recommended value of
	  0.1, but perhaps playing around with this will help improve the
	  behavior.

2013-04-01 15:08  acastro

	* [r10294] src/opt_control/propagation.F90,
	  src/opt_control/target.F90: Use of FFTs instead of DFTs for the
	  hhg target in the optimal control module.

2013-04-01 18:02  dstrubbe

	* [r10295] src/opt_control/target.F90: Typo.

2013-04-06 17:24  xavier

	* [r10296] src/hamiltonian/hamiltonian.F90: Bugfix: the periodic
	  boundary conditions were not properly set for calculations done
	  only with the gamma point.

2013-04-07 01:20  xavier

	* [r10298] src/system/eigen_rmmdiis_inc.F90: Bugfix: an assertion
	  failed in the rmmdiis eigensolver in systems
	  where the Hamiltonian cannot be applied packed.

2013-04-07 02:06  xavier

	* [r10299]
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/Makefile.am: Added a short test for
	  benzene in a supercell with the rmmdiis
	  eigensolver. This test would have detected the two bugs I fixed
	  previously.

2013-04-07 02:30  xavier

	* [r10300] src/grid/derivatives_inc.F90,
	  src/hamiltonian/hamiltonian.F90: Implemented periodic boundary
	  conditions for non-cl packed batches.

2013-04-07 04:30  xavier

	* [r10301] src/grid/boundaries.F90, src/grid/derivatives_inc.F90,
	  src/hamiltonian/hamiltonian.F90: Implemented setting periodic
	  boundary condition for non-cl packed
	  batches and domain parallelization.

2013-04-07 12:30  xavier

	* [r10302] src/grid/derivatives_inc.F90: Setting the periodic
	  boundary conditions now uses the same MPI copies for the packed
	  and non-packed.

2013-04-07 12:54  xavier

	* [r10303] src/grid/boundaries.F90, src/grid/derivatives_inc.F90:
	  Removed the definition of the datatypes for copying the periodic
	  points. They are no longer required.

2013-04-07 13:31  xavier

	* [r10304] src/grid/boundaries.F90, src/grid/derivatives_inc.F90:
	  Improvements and openmp parallelization in the periodic boundary
	  copies.

2013-04-07 16:02  xavier

	* [r10305] share/opencl/Makefile.am, share/opencl/boundaries.cl,
	  src/grid/boundaries.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90: Implemented periodic
	  boundary conditions with OpenCL (gamma point only).

2013-04-07 22:10  xavier

	* [r10306] share/opencl/boundaries.cl, src/grid/boundaries.F90,
	  src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/hamiltonian/hamiltonian.F90: Implementation of periodic
	  boundaries with OpenCL and domain
	  parallelization.

2013-04-07 22:34  xavier

	* [r10307] src/grid/derivatives_inc.F90: Fixed a bug in the copy of
	  periodic points.

2013-04-07 23:22  xavier

	* [r10308] src/grid/derivatives_inc.F90,
	  src/hamiltonian/hamiltonian.F90: Fixed non-cl compilation.

2013-04-08 00:36  xavier

	* [r10309] src/ions/kpoints.F90: Fixed some out of bound errors I
	  introduced in [9793].

2013-04-08 01:35  xavier

	* [r10310] testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.test: Changed the silicon
	  test to used k-points generated by octopus instead
	  of k-points given in the input file. For some reasons the points
	  for a
	  4x4x4 with a 1/2 shift are different from the ones we have in the
	  input file, that were generated with an old version of Octopus.

2013-04-08 13:39  askhl

	* [r10312] src/states/states_calc.F90: remove extraneous
	  message_info

2013-04-08 13:46  askhl

	* [r10313] src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90, src/system/eigensolver.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.complex-lda.inp:
	  introduce parameter ArpackInitialTolerance to use a coarse
	  eigensolver convergence criterion in the beginning of an scf
	  cycle. This is done by communicationg rel_dens error from scf to
	  the eigensolver on each iteration. Update complex-scaling test to
	  use this feature

2013-04-08 16:42  joseba

	* [r10314] src/grid/mesh_init.F90, src/grid/par_vec.F90,
	  src/ions/simul_box.F90: Code makeup
	  Few documentation

2013-04-09 12:59  joseba

	* [r10315] src/grid/mesh_init.F90, src/grid/par_vec.F90:
	  Deallocated vp%xghost_neigh at the initialization, as is not used
	  anymore in the code
	  Parallelized the check of the number of ghost neighbours. Each
	  process computing a part will result having computed all

2013-04-09 16:02  joseba

	* [r10316] src/basic/datasets.F90, src/basic/distributed.F90,
	  src/basic/global.F90, src/basic/ialist.F90, src/basic/iihash.F90,
	  src/basic/io.F90, src/basic/loct.F90, src/basic/messages.F90,
	  src/basic/mpi.F90, src/basic/mpi_debug.F90,
	  src/basic/multicomm.F90, src/basic/parser.F90,
	  src/basic/profiling.F90, src/basic/string.F90,
	  src/basic/unit_system.F90, src/grid/basins.F90,
	  src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/grid/grid.F90,
	  src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh.F90, src/grid/mesh_function_inc.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/multigrid.F90, src/grid/nl_operator.F90,
	  src/grid/ob_grid.F90, src/grid/ob_interface.F90,
	  src/grid/par_vec.F90, src/grid/par_vec_inc.F90,
	  src/grid/stencil_cube.F90, src/grid/stencil_starplus.F90,
	  src/grid/submesh_inc.F90, src/hamiltonian/berry.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/lasers.F90, src/hamiltonian/ob_lead.F90,
	  src/hamiltonian/projector_inc.F90,
	  src/hamiltonian/species_pot.F90, src/ions/geometry.F90,
	  src/ions/ion_dynamics.F90, src/ions/kpoints.F90,
	  src/ions/simul_box.F90, src/ions/xyz_adjust.F90,
	  src/ions/xyz_file.F90, src/main/casida.F90,
	  src/main/casida_inc.F90, src/main/gcm.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/main.F90,
	  src/main/static_pol.F90, src/main/test.F90, src/main/unocc.F90,
	  src/math/fft.F90, src/math/lalg_adv.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/math/math.F90,
	  src/math/math_inc.F90, src/math/mix.F90,
	  src/math/ode_solver_inc.F90, src/math/root_solver.F90,
	  src/math/root_solver_inc.F90, src/math/sgfft.F90,
	  src/math/solvers_inc.F90, src/math/sparskit_inc.F90,
	  src/math/tdfunction.F90, src/opt_control/check_input_inc.F90,
	  src/opt_control/controlfunction.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/initst.F90, src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/poisson/poisson.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_isf.F90, src/poisson/poisson_sete.F90,
	  src/poisson/scaling_function.F90,
	  src/poisson/solver_1d_solve_inc.F90, src/scf/ground_state.F90,
	  src/scf/lcao.F90, src/scf/ob_lippmann_schwinger.F90,
	  src/scf/rdmft.F90, src/scf/scf.F90, src/species/atomic.F90,
	  src/species/ps.F90, src/species/ps_cpi_file.F90,
	  src/species/ps_fhi.F90, src/species/ps_fhi_file.F90,
	  src/species/ps_hgh.F90, src/species/ps_in_grid.F90,
	  src/species/ps_psf.F90, src/species/ps_psf_file.F90,
	  src/species/species.F90, src/states/excited_states.F90,
	  src/states/excited_states_inc.F90,
	  src/states/linear_response_inc.F90, src/states/ob_green.F90,
	  src/states/physics_op_inc.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_block_inc.F90, src/states/states_calc.F90,
	  src/states/states_calc_inc.F90, src/states/states_io.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/vdw.F90, src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90, src/system/eigen_cg_inc.F90,
	  src/system/eigen_lobpcg_inc.F90, src/system/eigen_plan_inc.F90,
	  src/system/eigensolver.F90, src/system/elf.F90,
	  src/system/energy_calc.F90, src/system/exponential.F90,
	  src/system/output.F90, src/system/output_etsf_inc.F90,
	  src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_me.F90, src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/pert_inc.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_kli_inc.F90, src/system/xc_kli_pauli_inc.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_inc.F90, src/system/xc_oep_sic_inc.F90,
	  src/system/xc_oep_x_inc.F90, src/td/ob_mem.F90,
	  src/td/ob_propagator.F90, src/td/ob_src.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90, src/td/pes_rc.F90,
	  src/td/propagator.F90, src/td/propagator_qoct_inc.F90,
	  src/td/spectrum.F90, src/td/td.F90, src/td/td_write.F90,
	  src/td/tdpsf.F90, src/utils/casida_spectrum.F90,
	  src/utils/centergeom.F90, src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/help.F90,
	  src/utils/liquid.F90, src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/xyzanim.F90,
	  src/xc/functionals.F90, src/xc/fxc_inc.F90, src/xc/kxc_inc.F90,
	  src/xc/vxc_inc.F90, src/xc/xc.F90: Code makeup: all the logical
	  expressions are now in the same format

2013-04-09 22:26  dstrubbe

	* [r10317] src/grid/boundaries.F90: Typo.

2013-04-10 10:25  joseba

	* [r10318] doc/doxygen/Doxyfile, src/grid/nl_operator.F90: Deleted
	  unused subroutines; never are called.
	  Improved Doxyfile

2013-04-10 10:49  joseba

	* [r10319] src/grid/nl_operator.F90: Deleted more unused
	  subroutines

2013-04-10 16:02  dstrubbe

	* [r10320] src/system/eigen_arpack_inc.F90,
	  src/system/eigensolver.F90: * Commenting out SAFE_(DE)ALLOCATE
	  macros is not good since in some cases they are expanded into
	  multiple lines which may no longer be commented. I think this was
	  the cause of the tigger compilation failure after r10313. You can
	  fix this by inserting extra exclamation marks into the macro.
	  * Removed extra exclamation marks from header.
	  * Unterminated apostrophe.

2013-04-10 16:55  joseba

	* [r10321] src/grid/par_vec.F90, src/grid/par_vec_inc.F90: Deleted
	  more unused subroutines

2013-04-10 18:19  askhl

	* [r10322] src/scf/scf.F90, src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90: use M_ZERO rather than 0.
	  Include default value in ArpackInitialTolerance parameter
	  documentation. Pass current relative density error from scf to
	  eigensolver on each iteration. (We should use the more general
	  src/hamiltonian/scf_tol.F90 eventually)

2013-04-11 01:57  xavier

	* [r10323] src/grid/Makefile.am, src/grid/cmplxscl.F90,
	  src/states/Makefile.am, src/states/cmplxscl.F90, src/td/td.F90: *
	  Since the complex scaling module does not have anything to do
	  with the
	  grid, I moved it from grid/ to states/ where I think it belongs.
	  
	  * Improved formatting.
	  
	  * td_m needs to include cmplxscl_m.

2013-04-11 13:27  joseba

	* [r10324] src/grid/mesh_init.F90, src/grid/par_vec.F90,
	  src/grid/par_vec_inc.F90: Code makeup: now pv_t has np_global
	  instead of np, just the same as mesh_t. Now np is reserved to the
	  local number of points

2013-04-12 18:55  xavier

	* [r10325] src/ions/kpoints.F90,
	  testsuite/periodic_systems/04-silicon.test: * Improved the output
	  of kpoints printed to static/info.
	  * Added a match for the number of k-points to the silicon test.

2013-04-13 03:43  xavier

	* [r10326] src/grid/batch.F90: Bugfix: an error in the batch_copy
	  routine caused problems in the
	  rmmdiis eigensolver for spinors. Thanks David for reporting this
	  problem.

2013-04-13 03:44  xavier

	* [r10327]
	  testsuite/finite_systems_3d/09-spinors.03-rmmdiis_extra_states.inp,
	  testsuite/finite_systems_3d/09-spinors.test,
	  testsuite/finite_systems_3d/Makefile.am: Added a test that would
	  have detected the problem fixed in [10326].

2013-04-13 05:16  xavier

	* [r10329] src/grid/batch.F90, src/grid/batch_inc.F90,
	  src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/grid/mesh_batch_inc.F90, src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/projector_inc.F90: Improved the interface for
	  converting batch indexes.

2013-04-13 13:52  xavier

	* [r10330] src/ions/kpoints.F90: Improved the sorting of k-points,
	  to prevent changes in the order from
	  small differences in numerical calculations.

2013-04-13 16:10  xavier

	* [r10331] src/ions/kpoints.F90,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.test: * More improvements
	  to the k-point sorting.
	  * Updated test results.

2013-04-13 18:40  xavier

	* [r10332] src/ions/kpoints.F90, src/states/restart.F90,
	  src/states/states_io.F90,
	  testsuite/periodic_systems/04-silicon.test: * K-points are now
	  printed in relative coordinates to the screen and
	  to the restart files.
	  * This commit breaks backwards compatibility for restarting open
	  systems.

2013-04-13 20:09  xavier

	* [r10333] src/states/restart.F90, src/states/states.F90: The
	  complex DFT code had introduced an extra field for the imaginary
	  part of the eigenvalues in the 'occs' file, this means that the
	  file
	  was read different depending on the input variable. Since this is
	  a
	  bad idea, the extra field is now always present.
	  
	  This change breaks backwards compatibility of the restart files,
	  if
	  you want to fix an old 'occs' file you need to add a column of
	  zeros
	  by hand after the column of eigenvalues. Compatibility is also
	  broken
	  for complex DFT, since their format was missing a '|' character.

2013-04-14 20:47  xavier

	* [r10334] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/system/preconditioners.F90,
	  src/system/preconditioners_inc.F90: Now Octopus can use packed
	  batches with k-points.

2013-04-15 03:00  xavier

	* [r10336] share/opencl/projector.cl, src/basic/opencl.F90,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: * Now the kernels
	  required for the projectors are compiled by the
	  subroutine that calls them.
	  
	  * Started the implementation of opencl support for k-points.

2013-04-15 04:00  xavier

	* [r10337] share/opencl/projector.cl,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Projectors with
	  k-points can now be applied with OpenCL.

2013-04-15 14:25  xavier

	* [r10338] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/system/preconditioners_inc.F90: * Added a function to apply
	  the k-point phase.
	  * The k-point phase is now allocated and stored for opencl.

2013-04-15 16:28  joseba

	* [r10339] src/grid/boundaries.F90, src/grid/boundaries_inc.F90,
	  src/grid/derivatives_inc.F90, src/grid/double_grid.F90,
	  src/grid/mesh_init.F90, src/grid/nl_operator.F90,
	  src/grid/par_vec.F90, src/poisson/poisson_corrections.F90: Made
	  vp%np_ghost and vp%np_bndry local. During the initialization have
	  to be global yet.

2013-04-15 17:21  xavier

	* [r10340] share/opencl/phase.cl, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/system/preconditioners_inc.F90: Now periodic systems
	  calculation with k-points can be done on the GPU.

2013-04-15 20:45  dstrubbe

	* [r10341] src/main/casida_inc.F90, src/states/states_inc.F90:
	  Unused arguments.

2013-04-15 22:13  xavier

	* [r10342] src/system/preconditioners_inc.F90,
	  testsuite/periodic_systems/07-tb09.01-gs_symm.inp,
	  testsuite/periodic_systems/07-tb09.02-gs_nosymm.inp: Apparently
	  the preconditioner works better without the k-point phase.

2013-04-16 03:54  dstrubbe

	* [r10343] src/basic/profiling.F90: Widening the profiling label
	  field so things don't get cut off, and making sure the header
	  formatting matches.

2013-04-16 10:41  umberto

	* [r10345] libxc/src/gga_x_lb.c: Fixes LB94 NaN in TD runs with
	  adsorbing boundaries.

2013-04-16 13:34  xavier

	* [r10346] src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test: There is a
	  problem with the benzene supercell test that is taking too
	  much in the boundary communication. I added some profiling
	  regions,
	  whose results are printed by the test, to try to locate the
	  problem.

2013-04-16 14:51  xavier

	* [r10347] testsuite/periodic_systems/08-benzene_supercell.test:
	  Removed the dummy checks, since they only work with parallel
	  runs.

2013-04-16 17:11  joseba

	* [r10348] src/grid/boundaries_inc.F90, src/grid/mesh_init.F90,
	  src/grid/par_vec.F90, src/states/restart_inc.F90: * Made
	  vp%np_ghost_neigh deallocated in the initialization part. This
	  becomes a huge array with many processes; e.g. with 8192 domains
	  will have 256 MiB. Instead two arrays equals to the number of
	  domain processes are exported.
	  * Few documentation
	  * rank+1 => vp%partno

2013-04-16 17:14  xavier

	* [r10349] src/grid/derivatives_inc.F90: Removed the forall loops
	  in the communication of the periodic
	  boundaries. Lets see if this fixes the performance problem with
	  the
	  pgi "compiler".

2013-04-16 18:34  xavier

	* [r10350] src/scf/lcao.F90: Added the LCAOMaximumOrbitalRadius
	  variable, that removes from the
	  LCAO orbitals that are to large. The default value is 20.0.

2013-04-16 20:36  xavier

	* [r10351] src/hamiltonian/species_pot.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90: * Added the option of rescaling the atomic
	  orbitals for LCAO.
	  * Fixed the documentation for LCAOMaximumOrbitalRadius.

2013-04-16 23:17  dstrubbe

	* [r10352] testsuite/real_time/09-angular_momentum.02-td_gipaw.inp,
	  testsuite/real_time/09-angular_momentum.test: Adding a test for
	  quadrupole moments, which are not tested anywhere else I could
	  see.

2013-04-17 01:12  dstrubbe

	* [r10354] src/td/td_write.F90: * Renamed TDDipoleLmax to
	  TDMultipoleLmax, since we have multipoles beyond dipoles whenever
	  this is greater than 1.
	  * A needless restriction to multipoles of order < 4 (or < 5,
	  according to documentation...) was being enforced. There does not
	  seem to be any maximum we need to check for. I ran with lmax = 7
	  with no problem.

2013-04-17 01:19  dstrubbe

	* [r10355] testsuite/real_time/09-angular_momentum.02-td_gipaw.inp:
	  Adding forgotten specification to test. Fortunately it is only in
	  the long run so it didn't fail yet!

2013-04-17 02:41  xavier

	* [r10356] src/states/states_calc_inc.F90: Fix for
	  orthogonalization with complex functions.

2013-04-17 03:42  xavier

	* [r10357] src/states/states_calc_inc.F90: Fixed opencl
	  compilation.

2013-04-17 03:52  dstrubbe

	* [r10358] src/td/td_write.F90: Cleaned up documentation and
	  setting of defaults regarding TDOutput variable.

2013-04-17 10:23  joseba

	* [r10359] src/grid/par_vec.F90: * Made xghost_neigh only be used
	  in the initialization.
	  * Removed a counter array of size PxP.
	  * Added missing deallocations.
	  * Removed a variable

2013-04-17 10:57  joseba

	* [r10360] src/grid/par_vec.F90: Actually, xghost_neigh_partno is
	  the same as xghost. So is removed

2013-04-17 11:28  joseba

	* [r10361] src/grid/par_vec.F90: Previous commit -r 10360 is not
	  passing all the tests, reverting changes.
	  Sorry

2013-04-17 13:13  xavier

	* [r10362] src/basic/messages.F90: * Added a message at the end of
	  the run warning (and hopefully
	  frightening) users about experimental features.

2013-04-17 14:29  xavier

	* [r10363] src/basic/messages.F90: * Now the error messages for
	  experimental variables points to the
	  website and does not mention the ExperimentalFeatures variable.
	  
	  * The url form experimental features is given in the
	  documentation for
	  the variable.

2013-04-17 20:51  dstrubbe

	* [r10364] src/opt_control/target.F90, src/td/td_write.F90: Unused
	  variables.

2013-04-17 21:49  dstrubbe

	* [r10365] testsuite/oct-run_regression_test.pl: Write the command
	  to matches.sh before execution, for help in debugging if the
	  command fails.

2013-04-18 11:01  joseba

	* [r10366] src/grid/par_vec.F90: Get rid of xghost_neigh of size
	  PxP. Instead a two vector of size P are used and an extra
	  communication step is performed

2013-04-18 18:33  dstrubbe

	* [r10369] src/states/states_io.F90: k-points unit removed since
	  the reduced coords since r10332 are dimensionless.

2013-04-18 18:55  dstrubbe

	* [r10370] src/states/states_io.F90: Actually, there is no point in
	  writing the 'k-points' line at all when we do not have a unit.

2013-04-18 19:04  dstrubbe

	* [r10371] src/main/unocc.F90: Enabling all output from unocc mode.

2013-04-18 19:23  dstrubbe

	* [r10372] src/ions/kpoints.F90: Updating documentation about
	  specifying kpoints manually, given r10332.

2013-04-19 09:59  joseba

	* [r10373] src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90: Deleted never used subroutines:
	  mf_copy, mf_partial_integrate and mf_interpolate

2013-04-19 14:28  xavier

	* [r10374] src/basic/messages.F90: Added an alias for the
	  experimental features url. This shortens the
	  url and allows to keep the link updated if we change the website
	  in
	  the future.

2013-04-19 14:29  joseba

	* [r10375] src/hamiltonian/kb_projector_inc.F90: With this change
	  doxygen compiles without stoping in any error.
	  Tested with 1.7.6.1, 1.8.1 and 1.8.3.1

2013-04-19 21:13  dstrubbe

	* [r10380] src/states/restart.F90: A deallocation failed in the
	  finemesh test because of an attempt to deallocate zrho even when
	  not using complex scaling.

2013-04-19 21:21  dstrubbe

	* [r10381] testsuite/finite_systems_3d/27-fine_mesh.test: The
	  finemesh test was checking the first 4 eigenvalues 4 times,
	  instead of checking eigenvalues 1-16.

2013-04-19 22:34  xavier

	* [r10382] src/hamiltonian/hamiltonian_base.F90: The atom coloring
	  algorithm was not working due to last changes.

2013-04-20 22:13  xavier

	* [r10384] src/basic/Makefile.am, src/basic/openscad.F90,
	  src/grid/io_function.F90, src/ions/geometry.F90,
	  src/system/output.F90: Added output of geometries in OpenSCAD
	  format. This format can be
	  opened by the program of the same name.

2013-04-21 15:59  xavier

	* [r10385] src/basic/openscad.F90, src/ions/geometry.F90: Improved
	  the openscad geometry files to make them simpler to edit.

2013-04-21 20:33  dstrubbe

	* [r10386] testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp: Using
	  LCAOMaximumOrbitalRadius to restore results for Casida test.

2013-04-21 22:23  dstrubbe

	* [r10387] src/basic/calc_mode.F90, src/basic/opencl.F90:
	  Standardizing indentation (pertaining to the placement of
	  'contains').

2013-04-21 22:45  dstrubbe

	* [r10388] src/basic/datasets.F90,
	  src/hamiltonian/born_charges.F90, src/main/gcm.F90: A few trivial
	  fixes to formatting, comments, Doxygen.

2013-04-21 22:57  xavier

	* [r10389] src/basic/openscad.F90, src/grid/io_function.F90,
	  src/grid/io_function_inc.F90: Initial dirty implementation of
	  output of fields with OpenSCAD.

2013-04-21 23:05  dstrubbe

	* [r10390] src/math/tdfunction.F90, src/math/young.F90,
	  src/opt_control/initst.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/target.F90: Some trivial cleaning.

2013-04-21 23:11  dstrubbe

	* [r10391] src/td/pes_rc.F90: Fixing indentation.

2013-04-21 23:14  dstrubbe

	* [r10392] src/hamiltonian/kick.F90: Adding a reference.

2013-04-22 00:15  dstrubbe

	* [r10393] src/opt_control/opt_control_state.F90: I guess
	  chum_x86_64_pgi wants messages_m to compile this file.

2013-04-22 10:39  joseba

	* [r10395] doc/doxygen, doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh, doc/doxygen/index.html,
	  doc/doxygen/menu.html, doc/doxygen/octopus.png, src, src/basic,
	  src/frozen, src/grid, src/hamiltonian, src/include, src/ions,
	  src/main, src/math, src/opt_control, src/poisson, src/scf,
	  src/species, src/states, src/sternheimer, src/system, src/td,
	  src/utils, src/xc: Rearrangement of the Doxygen stuff:
	  * With only one Doxyfile the entire documentation is created
	  (with the newest version it needs only few minutes)
	  * Updated Doxyfile to the 1.8.3 version
	  * Deleted accordingly index.html and menu.html
	  * Updated the script of the creation
	  * Updated svn:ignore properties

2013-04-22 15:16  umberto

	* [r10396] libxc/src/gga_x_lb.c: Profiled minimum density values
	  for lb94 functional.
	  The value previously set to 5e-13 is now 1e-14.
	  I haven''t checked against an extensive test set so the threshold
	  value may not be definitive.

2013-04-22 16:06  micael

	* [r10397] src/grid/mesh.F90, src/ions/simul_box.F90,
	  src/poisson/poisson.F90: * Removed the fft_alpha component from
	  the simulation box. This is now read in the Poisson solver, where
	  it belongs. This also breaks backward compatibility of the
	  restart files. To fix it, one just needs to add or remove one
	  line in the correct place from the "mesh" file.

2013-04-22 17:23  dstrubbe

	* [r10398] src/hamiltonian/kick.F90: The TDDeltaStrengthMode was
	  being written out for all calculation modes. This is confusing
	  for non-td calculations, where it is not going to be used anyway,
	  and is unnecessary for td, since more complete information about
	  the kick is written out later.

2013-04-22 20:57  dstrubbe

	* [r10399] src/scf/lcao.F90: Fixing output of the wrong variable.

2013-04-22 21:38  dstrubbe

	* [r10400] src/ions/symmetries.F90: Filtering out symmetry
	  operations with fractional translations when the system is a
	  supercell, in accordance with treatment by Quantum ESPRESSO. This
	  is to be sure the operations form a group.

2013-04-23 01:18  dstrubbe

	* [r10401] src/ions/kpoints.F90: Checking that k-point weights are
	  positive, and renormalizing them to sum to 1.

2013-04-23 01:22  dstrubbe

	* [r10402] src/main/unocc.F90, src/sternheimer/em_resp.F90: * unocc
	  should say what kind of wavefunctions it is using.
	  * Sternheimer should not say it is SCF in the corresponding
	  message.

2013-04-23 04:14  xavier

	* [r10403] src/grid/io_function_inc.F90: Added a check for the size
	  of the arrays passed to
	  io_function_output_global.

2013-04-23 12:51  xavier

	* [r10404] src/opt_control/check_input_inc.F90,
	  src/opt_control/finalcheck_inc.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90: Some style changes:
	  * Added () to some subroutines without arguments.
	  * Using the name 'target' for a variable is a bad idea, since
	  this is
	  a Fortran keyword. Renamed it to oct_target.

2013-04-23 13:01  joseba

	* [r10405] src/grid/boundaries.F90, src/grid/double_grid.F90,
	  src/grid/mesh_cube_parallel_map.F90, src/grid/mesh_init.F90,
	  src/grid/nl_operator.F90, src/grid/par_vec.F90: * If the system
	  is not periodic the vp%bndry vector becomes local to the running
	  process, instead of being of size vp%total
	  * Also xbndry becomes local
	  * np_ghost_neigh is used only once
	  * Small changes

2013-04-23 13:11  xavier

	* [r10406] src/opt_control/propagation.F90: * Renamed a single
	  letter variable.
	  * Added a progress bar to the optimal control propagation.

2013-04-23 13:40  joseba

	* [r10407] src/grid/nl_operator.F90, src/grid/par_vec.F90,
	  src/poisson/poisson_multigrid.F90: Changed single letter variable
	  i to index in nl_operator_t
	  Improved a doxygen comment

2013-04-23 14:12  micael

	* [r10408] src/scf/rdmft.F90: * Restored header that was once again
	  delete from scf/rdmft.F90. Added svn:keywords to this file.

2013-04-23 15:59  joseba

	* [r10409] src/grid/double_grid.F90, src/grid/mesh_init.F90,
	  src/grid/nl_operator.F90, src/grid/par_vec.F90: * xghost is only
	  local
	  * Deleted xghost_neigh_partno, xghost_neigh_back and
	  np_ghost_neigh_back. The first two are only used at the
	  initialization and the third one is equal to rcounts

2013-04-23 16:16  dstrubbe

	* [r10410] src/ions/symmetries.F90: Disabling fractional
	  translation for a supercell does not really need to be a warning.

2013-04-24 12:48  xavier

	* [r10411] share/Makefile.am, share/marching_cubes_edges.data,
	  share/marching_cubes_triangles.data, src/basic/openscad.F90,
	  src/grid/io_function_inc.F90: Implemented the marching cubes
	  algorithm to generate isosurfaces in
	  openscad format. The surfaces are very smooth now. In fact, I
	  think
	  this algorithm could be useful to do more precise integration
	  over
	  subregions of the grid.

2013-04-24 18:35  xavier

	* [r10412] src/basic/openscad.F90, src/ions/geometry.F90:
	  Impromevents in openscad geometry output.

2013-04-25 02:13  dstrubbe

	* [r10413] src/main/unocc.F90, src/states/restart.F90: unocc mode
	  has no business writing a density. It should already be present
	  from the gs calculation, and can easily get corrupted if unocc
	  has problems.

2013-04-25 02:35  dstrubbe

	* [r10414] src/poisson/poisson.F90, src/poisson/solver_3d_inc.F90:
	  Clarifications to Poisson solver info.

2013-04-25 03:37  xavier

	* [r10415] src/basic/Makefile.am, src/basic/openscad.F90,
	  src/basic/polyhedron.F90, src/grid/io_function.F90,
	  src/grid/io_function_inc.F90: Defined a polyhedron object to
	  improve the openscad output.

2013-04-25 03:47  dstrubbe

	* [r10416] src/sternheimer/em_resp.F90: Blocking em_resp
	  calculations where the k-points were reduced by symmetries,
	  because some more sophisticated operations need to be performed
	  to get the right answer for a tensor, rather than a scalar such
	  as total energy.

2013-04-25 09:49  umberto

	* [r10417] src/xc/vxc_inc.F90: Modified XC tail correction to dump
	  (debug) data only in in_debug_mode.

2013-04-25 11:59  joseba

	* [r10418] src/grid/basins.F90, src/grid/boundaries.F90,
	  src/grid/boundaries_inc.F90, src/grid/cube_function_inc.F90,
	  src/grid/derivatives_inc.F90, src/grid/double_grid.F90,
	  src/grid/mesh_batch_inc.F90, src/grid/mesh_cube_parallel_map.F90,
	  src/grid/mesh_init.F90, src/grid/multigrid.F90,
	  src/grid/multigrid_inc.F90, src/grid/nl_operator.F90,
	  src/grid/par_vec.F90, src/grid/par_vec_inc.F90,
	  src/grid/symmetrizer_inc.F90, src/hamiltonian/species_pot.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/restart_inc.F90, src/states/states.F90: * Separated
	  xlocal and xlocal_vec; np_local and np_local_vec; and, local and
	  local_vec. Thus, we can identify the local and global usage of
	  those vectors
	  * Improved documentation

2013-04-25 12:08  acastro

	* [r10419] src/opt_control/target.F90: Bug fixed: one of the
	  optimization modes of optimal control (hhg) was not
	  working for gradient-less optimization methods.

2013-04-25 12:53  xavier

	* [r10420] src/basic/openscad.F90, src/grid/io_function_inc.F90:
	  All the triangles associated to a cube are stored in a single
	  polyhedron.

2013-04-25 15:57  joseba

	* [r10422] src/math/lalg_adv_lapack_inc.F90,
	  src/states/restart_inc.F90: * Deleted list vector of size
	  np_global. Actually, is the same vector as vp%local_vec
	  * A small change in Doxygen comment of Lapack

2013-04-25 16:02  joseba

	* [r10423] src/states/restart_inc.F90: Deleted variables that are
	  not used any longer, due to previous commit

2013-04-25 20:14  dstrubbe

	* [r10430] src/states/restart.F90: Fixing an intent.

2013-04-25 21:04  dstrubbe

	* [r10431] src/scf/ground_state.F90: Consolidating unneeded if.

2013-04-26 11:01  micael

	* [r10432] src/poisson/poisson_fft.F90: * Bug fix: an index was
	  wrong in the Poisson solver for 3d periodic systems when looping
	  over the cube points. This only affected calculations that had
	  different sizes along the y and z directions.

2013-04-26 15:23  umberto

	* [r10434] testsuite/photo_electron/05-pfft-h3d.01-gs.inp,
	  testsuite/photo_electron/05-pfft-h3d.02-mask.inp,
	  testsuite/photo_electron/05-pfft-h3d.03-ba.inp,
	  testsuite/photo_electron/05-pfft.test,
	  testsuite/photo_electron/Makefile.am: Added PFFT tests to the
	  photo_electron set.

2013-04-26 19:12  umberto

	* [r10435] configure.ac, m4/pnfft.m4, src/basic/getopt_f.c,
	  src/basic/utils.F90: Beginning implementation of PNFFT support.

2013-04-27 02:10  dstrubbe

	* [r10436] src/main/invert_ks.F90, src/main/static_pol.F90,
	  src/main/unocc.F90, src/opt_control/propagation.F90,
	  src/scf/scf.F90, src/states/restart.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/sternheimer_inc.F90, src/td/td.F90: * Removing
	  unused 'geo' argument from restart_write.
	  * Better memory management of 'zrho_fine' in restart_write.

2013-04-27 02:26  dstrubbe

	* [r10437] configure.ac, m4/gsl.m4: * Fixing formatting of
	  ./configure --help with AS_HELP_STRING, for GSL.
	  * Removing mistaken AC_ARG_ENABLE lines in configure.ac: they are
	  for --enable strings, not --with strings, and fortunately did not
	  seem to show up in ./configure --help anyway.

2013-04-27 02:31  dstrubbe

	* [r10438] m4/fft.m4, m4/gsl.m4, m4/scalapack.m4: Fixing
	  indentation in m4 scripts, and formatting of PFX.

2013-04-27 02:58  dstrubbe

	* [r10439] m4/nfft.m4, m4/pfft.m4, m4/pnfft.m4: * Cleaning up
	  nfft.m4.
	  * Undoing orphaned output from 'checking' in p(n)fft.m4.

2013-04-27 03:01  dstrubbe

	* [r10440] src/main/unocc.F90, src/states/restart.F90: *
	  Implemented reading of density from restart info.
	  * unocc mode now reads the density, and only constructs it from
	  the wavefunctions if the density could not be read. I think this
	  will enable nscf calculations with a different k-grid from scf.

2013-04-27 03:10  dstrubbe

	* [r10441] src/states/restart.F90: Fixes for restart_read_rho with
	  fine mesh.

2013-04-27 03:44  dstrubbe

	* [r10442] src/main/unocc.F90, src/td/td.F90: * density_calc in
	  unocc for complex-scaling case too.
	  * Unused variables.
	  * Doxygen comment.

2013-04-27 03:56  dstrubbe

	* [r10443] m4/fft.m4: Removing meaningless configuration option
	  --with-fft, which is a relic of FFTW2 support, long-ago
	  decommissioned. If this was set to anything other than 'fftw3',
	  the configure script would not merely fail to find FFTW, but
	  would crash with a syntax error.

2013-04-27 05:49  dstrubbe

	* [r10444] src/poisson/poisson.F90, src/system/v_ks.F90: Labeling
	  the initialization output of the Poisson solver on the fine mesh.

2013-04-27 06:03  dstrubbe

	* [r10445] m4/fft.m4, src/ions/geometry.F90,
	  src/poisson/poisson_fft.F90, src/td/td.F90: * Removing unused
	  variables from fft.m4 and td.F90.
	  * PUSH/POP's.

2013-04-27 13:37  xavier

	* [r10446] src/grid/io_function_inc.F90, src/ions/geometry.F90,
	  src/main/geom_opt.F90, src/system/output.F90,
	  src/utils/centergeom.F90, src/utils/xyzanim.F90: * Simplified the
	  interface for geometry_write_xyz and geometry_write_openscad.
	  * The openscad output of functions now includes the geometry.

2013-04-27 21:09  dstrubbe

	* [r10450] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/check_input_inc.F90, src/opt_control/target.F90,
	  src/td/ob_mem.F90, src/td/ob_propagator.F90, src/td/ob_src.F90,
	  src/td/propagator.F90: "Crank-Nicolson" was systematically
	  misspelled as "Crank-Nicholson" (compare
	  http://link.springer.com/article/10.1007%2FBF02127704). I have
	  removed the extra "h" everywhere. The input options using
	  'nicholson' still exist as synonyms to the corrected ones with
	  'nicolson'.

2013-04-27 21:13  dstrubbe

	* [r10451] src/td/propagator.F90: * Unused variables.
	  * Subroutine calls missing parentheses.

2013-04-27 21:40  dstrubbe

	* [r10453]
	  testsuite/open_systems/01-wavepacket.01-deriv_order_1.inp,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp,
	  testsuite/open_systems/02-wavepacket_2d.01-full_q.inp,
	  testsuite/open_systems/04-propagate_eigenstate.02-ring_leads_2d.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp:
	  Changing input variables in testsuite from Nicholson to Nicolson.

2013-04-27 23:33  dstrubbe

	* [r10456] testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test: Adding some
	  ground-state matches for optimal-control tests.

2013-04-28 01:46  dstrubbe

	* [r10457] src/td/propagator.F90: Typo, correcting and adding
	  PUSH/POP's, parentheses for subroutines, formatting.

2013-04-28 02:11  dstrubbe

	* [r10458] src/hamiltonian/hamiltonian_inc.F90: More informative
	  error message.

2013-04-28 02:13  dstrubbe

	* [r10459] testsuite/real_time/Makefile.am: Missing files for
	  testsuite installation.

2013-04-28 02:15  dstrubbe

	* [r10460] testsuite/real_time/15-crank_nicolson.01-gs.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/15-crank_nicolson.test,
	  testsuite/real_time/Makefile.am: Adding a test for the
	  Crank-Nicolson propagator.

2013-04-28 16:51  dstrubbe

	* [r10462] testsuite/real_time/15-crank_nicolson.02-kick.inp:
	  Running TDPropagator = crank_nicolson with domain/state
	  parallelism never converges currently. I am changing the test to
	  do only domain parallelism, which runs but has a number of
	  warnings and some resulting discrepancies in the matches,
	  compared to state parallelism and serial which both agree fine.
	  This propagator seems to have some bugs.

2013-04-28 17:18  dstrubbe

	* [r10463] src/main/unocc.F90: Removing the warning about
	  unconverged occupied states in each iteration of unocc mode
	  (added r10258), and corresponding writing of all the states in
	  the output, because it is very common for this to happen in early
	  iterations; it is only a problem at the end. Also, the
	  possibility of corrupting the gs data is gone, since unocc now
	  uses the density from gs, which it will not modify. Now, there is
	  only a warning at the end about unconverged occupied states, and
	  the messages in static/eigenvalues do not speak of 'unoccupied
	  states', but just of 'states', since they are dependent on
	  convergence of all the states.

2013-04-28 17:33  dstrubbe

	* [r10464] testsuite/real_time/03-exp_mid.02-td.inp,
	  testsuite/real_time/16-sparskit.01-gs.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp,
	  testsuite/real_time/16-sparskit.test,
	  testsuite/real_time/Makefile.am: * Adding SPARSKIT Crank-Nicolson
	  test. It is currently disabled since it fails due to a runtime
	  error.
	  * Adding missing final newline.

2013-04-29 13:38  joseba

	* [r10465] src/grid/mesh_batch_inc.F90,
	  src/grid/mesh_cube_parallel_map.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/nl_operator.F90,
	  src/grid/par_vec.F90, src/grid/partition.F90,
	  src/poisson/solver_1d_solve_inc.F90,
	  src/poisson/solver_3d_inc.F90: * Created a local version of
	  vp%part vector
	  * Added the infrastructure needed by MPI_Alltoall to pv_t, almost
	  copied from mesh_batch_inc

2013-04-29 14:42  joseba

	* [r10466] src/grid/mesh_batch_inc.F90, src/states/restart_inc.F90:
	  * Backward map is not used anymore in the
	  mesh_batch_exchange_points. Consequently, vp%local_vec is not
	  used anymore (outside par_vec_m) if a parallel Poisson solver is
	  used.
	  * Simplified exchange points subroutine.

2013-04-29 15:41  joseba

	* [r10467] src/grid/mesh_batch_inc.F90, src/grid/par_vec.F90: *
	  Added another part local vector
	  * Used those in mesh_batch

2013-04-29 16:59  dstrubbe

	* [r10468] libxc/src/Makefile.am: libxc: Fixing dependency that was
	  poorly written (by me) and could cause "make -j install" to fail.

2013-04-29 17:05  umberto

	* [r10469] src/td/pes_mask_out_inc.F90: Fixed crash with PFFT test
	  when parallel writing pes wfs

2013-04-29 17:09  umberto

	* [r10470] src/grid/mesh_function_inc.F90: correct dipole moment
	  when complex scaling

2013-04-29 17:14  joseba

	* [r10471] src/grid/par_vec.F90: Corrected POP/PUSH_SUBs

2013-04-29 17:33  dstrubbe

	* [r10472] src/math/math.F90, src/math/root_solver_inc.F90: *
	  Making a real -> integer conversion explicit.
	  * Doxygen comments.

2013-04-29 17:54  dstrubbe

	* [r10473] src/opt_control/propagation.F90, src/td/cpmd_inc.F90,
	  src/td/pes_mask.F90, src/td/td_write.F90, src/td/tdpsf.F90: *
	  Removed now-unused argument 'geo' from oct_prop_output.
	  * Doxygen comments.
	  * Making some real->complex conversions explicit.
	  * Fixing some use of floats where integers seem to have been
	  meant.
	  * Other unused variable ist2 in cpmd_inc.
	  * Vector expression.

2013-04-29 19:27  dstrubbe

	* [r10474] src/sternheimer/em_resp_calc.F90: Fixing critical bug in
	  lr_calc_current. A tautologous initialization "np = NP" was not
	  caught when the NP macro was removed in r5114 (2009!), leaving np
	  uninitialized, so probably the arrays in this function were not
	  allocated at all. Fortunately, I don't think this function has
	  been used much.

2013-04-29 19:45  dstrubbe

	* [r10475] src/system/eigen_arpack_inc.F90, src/td/ob_mem.F90,
	  src/td/spectrum.F90, src/td/td_calc.F90: * Explicit type
	  conversions, and more appropriate initialization type.
	  * Uncapitalizing variable names which seem to be relics of the
	  NP, NP_PART macros.

2013-04-30 22:02  nitsche

	* [r10477] src/td/propagator.F90: Rewrote Crank-Nicolson propagator
	  for SPARSKIT to fix the problem with different times found by
	  David. It also supports the Complex scaling. If one wants to use
	  it, 'SPARSKITSolver = sk_bcg' should be added to the input file.
	  The default sk_cg will not work.

2013-05-01 02:16  dstrubbe

	* [r10478] src/math/sparskit.F90: Doxygen comments.

2013-05-01 02:18  dstrubbe

	* [r10479] src/math/sparskit_inc.F90: * Setting default for
	  SPARSKITSolver to sk_bcg, as recommended by Danilo, since this
	  one actually works in the propagator, unlike sk_cg.
	  * All but one of the other SPARSKIT variables had incorrect
	  defaults listed.
	  * Clarified what the default -1 means anyway for SPARSKITIterOut.

2013-05-01 02:23  dstrubbe

	* [r10480] testsuite/real_time/16-sparskit.test: Updating the
	  reference values for the SPARSKIT propagation test (only slightly
	  different from the native Crank-Nicolson implementation), and
	  enabling it (only when SPARSKIT is linked, of course).

2013-05-01 03:15  dstrubbe

	* [r10481] src/td/propagator.F90: td_zop and td_zopt don't need to
	  be inside #ifdef HAVE_SPARSKIT: while they are only being used
	  with SPARSKIT, they do not call it and can be compiled fine
	  regardless.

2013-05-01 09:32  joseba

	* [r10482] src/grid/cube.F90: Corrected a bug introduced by myself
	  in r9496 that prevented to run with only states parallelization
	  and PFFT (now also LibISF)

2013-05-01 10:19  joseba

	* [r10483] src/grid/mesh_batch_inc.F90: Partly correcte the bug
	  introduced by myself in r10466 and reported by David.
	  Still working
	  
	  Thanks David!

2013-05-01 19:56  dstrubbe

	* [r10484] src/math/sparskit.F90, src/math/sparskit_inc.F90,
	  src/td/propagator.F90: Making the module-scope global work arrays
	  for sparskit live instead in the sparskit object, for clearer
	  information flow.

2013-05-01 20:00  dstrubbe

	* [r10485] src/grid/mesh_batch_inc.F90: Corrected half of the error
	  caused by r10466 in the r10483 commit and the other correction is
	  here. -- commit on behalf of Joseba
	  At least in lascar corrected the error.

2013-05-01 22:11  dstrubbe

	* [r10486] src/td/propagator.F90: I think this fixes the failure of
	  the Crank-Nicolson (non-SPARSKIT) propagator when parallel in
	  domains. The problem was that collective operations for dot
	  products and norms were not being defined. This is the same
	  problem that was fixed for QMR in the context of Sternheimer in
	  r4811. Danilo, I believe that ob_lippman_schwinger.F90 still
	  suffers from the same problem.

2013-05-02 08:54  joseba

	* [r10488] src/grid/mesh_batch_inc.F90: Corrected the error caused
	  by r10466, intented to correct in r10485 (it had to be changed a
	  different line).

2013-05-02 09:19  nitsche

	* [r10489] src/scf/ob_lippmann_schwinger.F90,
	  src/td/ob_propagator.F90: Fixed problems with the QMR solver when
	  parallel in domains for Lippmann-Schwinger and Open-Boundary
	  propagator pointed out by David. I think there are still some
	  issues left related to parallel in domains, but the
	  parallelization strategy should be k-points as it is trivial.

2013-05-02 10:43  joseba

	* [r10490] src/grid/mesh_init.F90: Apparently
	  mesh%vp%ghost(mesh%vp%xghost + ii - 1) and mesh%vp%xghost + ii -
	  1 are the same

2013-05-02 15:48  umberto

	* [r10491] src/td/pes_mask.F90: Partially reverted changes from
	  r10473 due to mysterious behavior of array assignment. This
	  should fix PFFT pes tests.

2013-05-02 15:49  umberto

	* [r10492] m4/pfft.m4, m4/pnfft.m4, src/common-rules.make: Reviewed
	  pfft and pnfft autoconf scripts according to David suggestions.

2013-05-02 17:35  umberto

	* [r10493] src/td/pes_mask.F90: The "mysterious" behavior was not
	  mysterious at all.
	  The problem with r10473 is that is misses the PFFT index mapping
	  1->3
	  2->1
	  3->2
	  

2013-05-02 19:25  dstrubbe

	* [r10494] src/td/propagator.F90,
	  testsuite/real_time/16-sparskit.02-kick.inp: The SPARSKIT
	  propagator does not work parallel in domains. (I believe it is
	  for the reason as discussed in r10486, i.e. the dot product and
	  norm being done by SPARSKIT is not collective.)

2013-05-03 02:46  xavier

	* [r10495] src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90:
	  Optimization and omp parallelization of batch_axpy.

2013-05-03 14:52  dstrubbe

	* [r10496] testsuite/linear_response/01-casida.test: Loosening
	  tolerances for vib_modes in casida test, since they occasionally
	  fail. This suggest a problem that needs to be investigated in
	  more detail.

2013-05-03 15:11  xavier

	* [r10497] src/grid/batch_ops_inc.F90: Fixed the error in openmp
	  parallelization in my last commit.

2013-05-03 15:19  xavier

	* [r10498] src/main/run.F90: * Added a profiling region for the
	  calculation mode.
	  * Missing POP_SUB.
	  * Converted output to new format.

2013-05-03 16:07  joseba

	* [r10499] src/states/restart_inc.F90: Updated the description of
	  the restart_read_function. Now each process never has the entire
	  function

2013-05-03 16:51  dstrubbe

	* [r10500] src/grid/basins.F90: The Bader analysis was broken since
	  mesh%vol_pp was made allocated for all the points only for
	  curvilinear. Now it is fixed with mesh%volume_element.

2013-05-03 17:59  dstrubbe

	* [r10501] src/grid/basins.F90: Adding some units to Bader output.

2013-05-03 18:33  dstrubbe

	* [r10502] src/grid/io_function.F90,
	  testsuite/periodic_systems/09-etsf_io.01-gs.inp,
	  testsuite/periodic_systems/09-etsf_io.test: * Adding a test for
	  ETSF_IO output. The files are binary, so we cannot test anything
	  about them, but at least we can check that this run finished
	  without crashing.
	  * Comment on what can be output with ETSF_IO.

2013-05-03 18:56  dstrubbe

	* [r10505] src/grid/par_vec.F90: Removing unterminated apostrophe.

2013-05-03 21:31  dstrubbe

	* [r10507] testsuite/oct-run_regression_test.pl,
	  testsuite/periodic_systems/09-etsf_io.test: * Adding a match type
	  for file size.
	  * Using it to test ETSF_IO outputs.

2013-05-03 21:34  dstrubbe

	* [r10508] src/math/solvers.F90, src/math/solvers_inc.F90: Doxygen
	  comments.

2013-05-03 21:41  dstrubbe

	* [r10510] testsuite/finite_systems_3d/05-output.01-gs.inp: Let's
	  output some more stuff in the output test.

2013-05-04 00:35  xavier

	* [r10512] src/hamiltonian/hamiltonian.F90, src/species/ps.F90:
	  Added a couple of profiling regions.

2013-05-04 00:51  dstrubbe

	* [r10513] src/math/sparskit.F90: Using interface instead of
	  explicit preprocessing.

2013-05-04 01:00  dstrubbe

	* [r10514] src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: * Bugfix: the
	  'average' column for infrared activity in vib_modes was in fact
	  the sum. Corrected corresponding test match.
	  * Linear-response vib_modes assumes real wavefunctions in various
	  places.

2013-05-04 01:01  xavier

	* [r10515] src/math/splines.F90: OpenMP parallelization of the
	  spline Bessel transform.

2013-05-04 01:11  dstrubbe

	* [r10516] src/sternheimer/phonons_lr.F90: * Adding appropriate
	  units for IR intensities.
	  * Generalizing output to arbitrary number of dimensions.

2013-05-04 02:19  xavier

	* [r10517] src/grid/submesh_inc.F90: Bugfix: vol_pp(1) replaced by
	  volume_element.

2013-05-04 02:23  xavier

	* [r10518] src/math/splines.F90: Reverted the omp parallelization
	  of the bessel transform. It seems it
	  causes problems with ifort.

2013-05-04 02:39  xavier

	* [r10519] src/scf/lcao.F90, src/scf/lcao_inc.F90: * Added the
	  default in the description of a variable.
	  * Changed messages to new format.

2013-05-04 03:34  dstrubbe

	* [r10520] testsuite/real_time/15-crank_nicolson.02-kick.inp:
	  Restoring domain/states parallelization for native Crank-Nicolson
	  test.

2013-05-04 14:06  xavier

	* [r10521] src/states/states_calc_inc.F90,
	  src/system/subspace_inc.F90: Missing opencl_finish calls.

2013-05-04 14:18  xavier

	* [r10522] src/basic/opencl.F90, src/grid/mesh_batch_inc.F90: *
	  Removed the profiling region for CL kernel run.
	  * Added a profiling region for mesh_batch_nrm2.

2013-05-04 15:37  dstrubbe

	* [r10523] src/grid/mesh_function.F90, src/math/sparskit.F90,
	  src/td/propagator.F90,
	  testsuite/real_time/16-sparskit.02-kick.inp: SPARSKIT propagator
	  is now working with domain parallelization, after making the
	  'distdot' function use mf_dotp_aux.

2013-05-04 16:07  dstrubbe

	* [r10524] src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90: * SPARSKIT is only in double
	  precision, so it is incorrect to define distdot with FLOAT in the
	  single-precision case.
	  * Initializing mesh_aux to null, and then adding an ASSERT for it
	  to be associated in dotp_aux, for safety.
	  * Adding some comments.

2013-05-04 18:49  dstrubbe

	* [r10525] src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90, src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90: Centralizing the auxiliary dot
	  product and norm routines from the linear solver module to
	  mesh_function_m, where a basically identical dotp function
	  existed already.

2013-05-04 18:58  dstrubbe

	* [r10526] src/td/propagator.F90: Propagators no longer use their
	  own dotp and nrm2 functions. Also, removing some routines used
	  only privately from the public list.

2013-05-04 19:19  dstrubbe

	* [r10527] src/scf/ob_lippmann_schwinger.F90,
	  src/td/ob_propagator.F90, src/td/propagator.F90: Open boundaries
	  uses the aux mesh functions now.

2013-05-04 20:14  xavier

	* [r10529] src/system/eigen_rmmdiis_inc.F90: Optimization: The norm
	  calculation for the rmmdiis eigensolver is now done by
	  mesh_batch_dotp_vector instead of mesh_batch_nrm2.

2013-05-04 21:09  dstrubbe

	* [r10530] src/td/ob_propagator.F90: Removing explicit array bounds
	  from routines to avoid array temporaries.

2013-05-04 21:22  dstrubbe

	* [r10531] src/td/propagator.F90: Bugfix to r10526, which
	  accidentally removed a call to mesh_init_mesh_aux.

2013-05-04 22:00  dstrubbe

	* [r10532] src/td/ob_mem.F90: Reading and writing the other half of
	  a matrix avoids array temporaries.

2013-05-04 22:19  dstrubbe

	* [r10533] src/grid/mesh.F90, src/states/states_io.F90: Getting rid
	  of more array temporaries.

2013-05-05 02:35  dstrubbe

	* [r10534] src/system/eigen_lobpcg_inc.F90: Purging more array
	  temporaries.

2013-05-05 03:45  dstrubbe

	* [r10535] src/ions/xyz_adjust.F90, src/td/spectrum.F90: More array
	  temporaries decommissioned.

2013-05-05 15:42  dstrubbe

	* [r10536] src/math/lalg_adv_lapack_inc.F90: Correction to
	  comments: our geneigensolve routines are solving specifically the
	  A*x=lambda*B*x form.

2013-05-05 16:25  dstrubbe

	* [r10537] src/states/states.F90, src/states/states_io.F90: *
	  Comments, doxygen and otherwise.
	  * Organized argument list and made 'inout' variables just 'out'
	  since their input values are not used.

2013-05-06 01:52  dstrubbe

	* [r10538] src/states/restart.F90: Currently it is possible to run
	  gs with complex wavefunctions (e.g. via ForceComplex = true), and
	  then read them in for calculation with another mode, such as
	  vib_modes, which happens to be expecting real wavefunctions. In
	  this case, the restart will just result in the real part of the
	  complex wavefunctions being read, which of course will lead to
	  incorrect results. Now, the restart file 'wfns' will identify
	  them as real or complex, and this will be checked when reading
	  restart for a calculation expecting real wavefunctions. To avoid
	  breaking backward compatibility, failure to find this tag in
	  'wfns' will result in a warning, but not an error.

2013-05-06 11:37  umberto

	* [r10539] m4/fft.m4, m4/pfft.m4, m4/pnfft.m4,
	  src/common-rules.make: Rationalized autoconf fft, pfft, and
	  pnfft.
	  * removed mpifftw-prefix option.
	  * fft-lib is now turned into prefix with an optional fft-include
	  * added a test for fftw3_mpi for more flexibility
	  * moved @LIBS_FFT@ to core_LIBS where it should belong
	  
	  Setting
	  --with-pfft-prefix=$PFFT_PREFIX \
	  --with-fft-prefix=$FFT_PREFIX \
	  --with-pnfft-prefix=$PNFFT_PREFIX
	  
	  should now allow to compile with P/N/FFT libraries

2013-05-06 16:35  umberto

	* [r10540] m4/fft.m4: No need to check for include 'fftw3.f' which
	  actually can cause problems.
	  Include check is done only in the fftw3_mpi part.

2013-05-06 16:54  umberto

	* [r10541] m4/fft.m4: Reverted from --with-fft-prefix to
	  --with-fft-lib.
	  The option is still treated as prefix.

2013-05-06 17:33  dstrubbe

	* [r10542] m4/libfm.m4: The libfm m4 macro was using cpp syntax for
	  an include file, but the way the test program was handled would
	  not be preprocessed, so warnings were being generated. Now we use
	  the Fortran built-in way of including files.

2013-05-06 17:47  dstrubbe

	* [r10543] src/math/fft.F90: Missing PUSH/POP's.

2013-05-06 19:16  umberto

	* [r10544] m4/fft.m4: Try FCFLAGS only when checking for ffw3_mpi.
	  This should fix PGI configure fail.

2013-05-06 20:50  dstrubbe

	* [r10545] src/states/states.F90, src/states/states_calc_inc.F90:
	  For some reason, we have been using the term 'Gram-Schmidt' to
	  refer to orthogonalization in general. Seems to date back to
	  r5549. In fact, none of the methods that can be set by
	  StatesOrthogonalization are Gram-Schmidt any more: there is
	  'modified Gram-Schmidt', but the ones called gram_schmidt and
	  par_gram_schmidt are actually Cholesky decomposition.
	  
	  * Clarified documentation regarding meaning and range of validity
	  of orthogonalization methods.
	  * Warnings and errors refer more specifically to the actual
	  method being used.

2013-05-06 22:28  dstrubbe

	* [r10546] src/states/states.F90, src/states/states_calc.F90,
	  src/states/states_calc_inc.F90, src/states/states_dim.F90,
	  testsuite/components/07-cholesky_serial.01-real.inp,
	  testsuite/components/07-cholesky_serial.02-complex.inp,
	  testsuite/components/07-cholesky_serial.test,
	  testsuite/components/Makefile.am: * The orthogonalization methods
	  called Gram-Schmidt which are actually Cholesky will now be named
	  accordingly. (I left the old options to StatesOrthogonalization
	  as synonyms though.)
	  * Doxygen comments.

2013-05-06 22:34  dstrubbe

	* [r10547] testsuite/components/07-gram_schmidt.01-real.inp,
	  testsuite/components/07-gram_schmidt.02-complex.inp,
	  testsuite/components/07-gram_schmidt.test: It seems I failed to
	  commit the deletion part of the moves in the previous commit.

2013-05-06 22:52  dstrubbe

	* [r10548] testsuite/components/09-qr.02-complex.inp,
	  testsuite/components/09-qr.test,
	  testsuite/components/Makefile.am: Let's test the complex QR
	  orthogonalization too.

2013-05-06 23:14  dstrubbe

	* [r10549] testsuite/components/15-cholesky_parallel.01-real.inp,
	  testsuite/components/15-cholesky_parallel.02-complex.inp,
	  testsuite/components/15-cholesky_parallel.test,
	  testsuite/components/Makefile.am: Adding tests for parallel
	  Cholesky orthogonalization.

2013-05-07 00:01  dstrubbe

	* [r10550] src/ions/symmetries_finite.c: Fixing memory leak in
	  symmetries_finite: improper axes were not being deallocated. This
	  was showing up in the valgrind buildslave, for
	  finite_systems_3d/20-eigensolver. Apparently that is the only
	  test with a structure possessing an improper axis.

2013-05-07 08:41  umberto

	* [r10551] m4/fft.m4, src/common-rules.make: reverted changes on
	  fft.m4.

2013-05-07 08:59  umberto

	* [r10552] m4/pfft.m4: Rolled back to previous pfft configure
	  script.
	  Probably --with-mpifftw-prefix is not strictly necessary since
	  fftw3.f constants are already included in the fftw_m module
	  anyways. Nevertheless I would like to keep it for the time it
	  takes to implement the pnfft module.
	  Also --with-mpifftw-prefix is optional and the test now tries to
	  figure out as much as possible from --with-fft-lib option.
	  A minimal set of configure options would be:
	  --with-fft-lib=$FFTW_PREFIX/lib/libfftw3.a
	  --with-pfft-prefix=$PFFT_PREFIX
	  

2013-05-07 21:51  dstrubbe

	* [r10555] src/grid/mesh_function_inc.F90: Correction of references
	  to dot product functions.

2013-05-08 03:54  dstrubbe

	* [r10556] src/main/unocc.F90, src/scf/scf.F90: * Let's write a
	  warning in standard output as well as the 'static/info' file if
	  the eigenvectors are not converged in scf.
	  * The corresponding warning in unocc was only looking at the
	  k-points held by the local process, so I think that would result
	  in the warning being written only if node 0 had the unconverged
	  states. Now this is fixed.

2013-05-08 10:40  micael

	* [r10557] src/grid/cube.F90, src/poisson/poisson.F90,
	  src/td/pes_mask.F90: *) Some cleaning in cube_init. This routine
	  should not need to know what is happening in the PES module or
	  what other parallelization modes are being used.

2013-05-08 10:46  micael

	* [r10558] src/poisson/poisson.F90: * Reverted unintended changes.

2013-05-08 16:11  joseba

	* [r10559] configure.ac, m4/dune.m4, m4/dune_all.m4,
	  m4/dune_check_lib.m4, m4/parmetis.m4: Added the support to
	  compile with ParMETIS. Copied from DUNE project (GPL licence)
	  http://users.dune-project.org/ with small changes
	  Needs cleaning

2013-05-08 16:40  joseba

	* [r10560] m4/dune_all.m4, m4/parmetis.m4: Added header and ID.
	  Deleted unused stuff

2013-05-08 16:51  joseba

	* [r10561] m4/parmetis.m4: Properly added the ID

2013-05-08 18:56  xavier

	* [r10562] src/grid/batch_ops_inc.F90, src/grid/mesh_batch_inc.F90,
	  src/grid/submesh_inc.F90: Added some operation counts.

2013-05-09 10:18  umberto

	* [r10563] src/math/nfft.F90: Reformatted nfft info output

2013-05-10 01:21  xavier

	* [r10564] src/scf/ground_state.F90, src/states/states.F90:
	  Printing of information about the blocks of states.

2013-05-10 04:28  dstrubbe

	* [r10565] src/system/output_etsf_inc.F90: Better error-handling
	  for ETSF_IO: its native error-handling routine writes to standard
	  output for some reason, so I copied it here, and made it write to
	  standard eror, and only root write.

2013-05-10 08:28  micael

	* [r10566] src/grid/Makefile.am, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/partition.F90,
	  src/grid/partitioner.F90: * Removed genetic algorithm method to
	  generate the mesh partition.

2013-05-10 08:31  micael

	* [r10567] src/grid/mesh.F90: * Removed unused function
	  "tranlate_point".

2013-05-10 10:20  micael

	* [r10568] src/grid/mesh_init.F90, src/grid/partition.F90: *
	  Removed unused components from partition_t.

2013-05-10 13:34  micael

	* [r10569] src/states/states_io.F90: * Only the root node should
	  output the DOS.

2013-05-10 13:48  joseba

	* [r10570] src/grid/mesh_partition.F90, src/grid/partition.F90:
	  Implemented ParMETIS partition.
	  For the moment is using entire vector to create the local ones.
	  Once partition is calculated locally is gathered to continues as
	  in METIS

2013-05-10 16:44  dstrubbe

	* [r10571] src/basic/loct.F90, src/basic/oct_f.c,
	  src/sternheimer/em_resp.F90: Adding interface for
	  oct_search_file_lr, and making one of its pointer arguments
	  const.

2013-05-10 16:54  dstrubbe

	* [r10572] src/grid/mesh_partition.F90: Spelling.

2013-05-10 18:28  dstrubbe

	* [r10573] src/basic/loct.F90, src/main/geom_opt.F90: * Comments on
	  why we cannot use intent's for calc_point_ng.
	  * Interface for oct_wfs_list.

2013-05-11 20:40  dstrubbe

	* [r10574] src/basic/opencl.F90, src/basic/opencl_inc.F90,
	  src/grid/batch.F90, src/grid/io_function_inc.F90: Removing
	  PUSH/POP's from some very frequently called OpenCL and batch
	  routines.

2013-05-11 23:07  dstrubbe

	* [r10575] src/grid/io_function_inc.F90: Reverting accidental
	  change in r10574.

2013-05-11 23:23  dstrubbe

	* [r10576] src/basic/opencl.F90: Removing PUSH/POP's from another
	  routine called too frequently.

2013-05-11 23:25  dstrubbe

	* [r10577] src/grid/io_function_inc.F90, src/system/output.F90:
	  Initializing outp%how to an illegal value, so that it can later
	  be checked for having been set properly.

2013-05-12 01:38  dstrubbe

	* [r10578] src/system/output.F90: Bugfix to r10577: I guess -1 by
	  two's complement is equivalent to having all bits set in the flag
	  OutputHow. This caused runtime errors for most of the slaves due
	  to an attempt to perform ETSF_IO output when the library is not
	  linked, in almost all the tests.

2013-05-12 18:38  dstrubbe

	* [r10579]
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.test: * Reducing
	  EigensolverTolerance for lobpcg test as it could fail sometimes
	  with a small discrepancy with ifort 13.
	  * Correcting the name of the molecule involved.

2013-05-12 21:50  dstrubbe

	* [r10580] src/main/invert_ks.F90: TheKS inversion test could fail
	  when writing final output, with 50% probability, if compiled with
	  MPI, because there was a call to MPI_Barrier with an unitialized
	  communicator (if < 0, the call was skipped, that is the only
	  reason it ever worked). The problem is that the aux_st states
	  object is only partly initialized.

2013-05-12 22:14  dstrubbe

	* [r10581] src/ions/kpoints.F90: Symmetries are not used with a
	  user-defined k-grid.

2013-05-12 23:14  dstrubbe

	* [r10582] testsuite/oct-run_regression_test.pl: All match commands
	  in the testsuite now filter for only reasonable numeric
	  characters, and also NaN (or nan) is now included too, which
	  would otherwise show up as blank in the results.

2013-05-13 00:57  dstrubbe

	* [r10583] src/grid/batch.F90: Restoring a PUSH/POP removed in
	  r10574. Somehow this made periodic_systems/05-lithium.test fail
	  on chum_x86_64_intel. Also, fixed a typo.

2013-05-13 01:18  dstrubbe

	* [r10584] src/ions/kpoints.F90: Fix to r10581: line was in the
	  wrong place, needs to be only if user-defined block is present.

2013-05-13 07:31  marques

	* [r10585] libxc/src/lda_x.c: Bug found by Toon Verstraelen fixed.

2013-05-13 15:41  joseba

	* [r10590] src/grid/mesh_partition.F90: xadj_size is equal to
	  lsize(ipart), so the first one is removed

2013-05-14 18:29  dstrubbe

	* [r10591] src/system/output.F90: Fix to r10577, r10578: better way
	  to make sure outp%how is initialized, and avoiding valgrind error
	  'Uninitialised value was created by a stack allocation' coming
	  from trying to set it in declaration.

2013-05-14 20:24  dstrubbe

	* [r10592] src/opt_control/target.F90: Fix to memory leak in
	  optimal control: missing calls to parse_block_end.

2013-05-14 20:27  dstrubbe

	* [r10593] src/opt_control/controlfunction.F90: Fixing memory leak
	  in optimal control: controlfunction_copy now calls end rather
	  than nullify to make sure the old one is deallocated (there were
	  many loops containing copies but no ends), and
	  controlfunction_copy is made safe to call even on a nullified
	  object.

2013-05-14 20:30  dstrubbe

	* [r10594] src/opt_control/opt_control.F90: Fixing memory leak in
	  optimal_control: par_ was never ended. Also, removing some
	  controlfunction_end calls, no longer necessary since this is now
	  included in controlfunction_copy.

2013-05-15 13:42  umberto

	* [r10595] src/td/td.F90: (Re)Introducing TDFreezeHXC input
	  variable to select hartree and exchange-correlation potential
	  freeze during time evolution.

2013-05-15 14:48  joseba

	* [r10596] configure.ac, m4/dune_metis.m4, src/common-rules.make,
	  src/grid/mesh_partition.F90: Added support for METIS 5 as is Free
	  Software, Apache License 2.0
	  * Has to be compiled for example:
	  --with-metis="METIS_INSTALATION"
	  * For the moment ---disable-metis should be also added (not to be
	  confused with version 4 included here)

2013-05-15 18:24  dstrubbe

	* [r10601] src/system/output.F90: Removing keywords from call to
	  BerkeleyGW library, since the renaming of one of the argument
	  names there between versions can cause compilation failure.

2013-05-16 12:47  joseba

	* [r10602] src/grid/mesh_partition.F90: Added "multilevel recursive
	  bisection" to METIS 5
	  Deleted unused variable
	  Selected METIS as default aslo if METIS 5 is compiled

2013-05-16 15:25  joseba

	* [r10603] external_libs/metis-5.1,
	  external_libs/metis-5.1/BUILD.txt,
	  external_libs/metis-5.1/CMakeLists.txt,
	  external_libs/metis-5.1/Changelog, external_libs/metis-5.1/GKlib,
	  external_libs/metis-5.1/GKlib/BUILD.txt,
	  external_libs/metis-5.1/GKlib/CMakeLists.txt,
	  external_libs/metis-5.1/GKlib/GKlib.h,
	  external_libs/metis-5.1/GKlib/GKlibSystem.cmake,
	  external_libs/metis-5.1/GKlib/Makefile,
	  external_libs/metis-5.1/GKlib/b64.c,
	  external_libs/metis-5.1/GKlib/blas.c,
	  external_libs/metis-5.1/GKlib/conf,
	  external_libs/metis-5.1/GKlib/conf/check_thread_storage.c,
	  external_libs/metis-5.1/GKlib/csr.c,
	  external_libs/metis-5.1/GKlib/error.c,
	  external_libs/metis-5.1/GKlib/evaluate.c,
	  external_libs/metis-5.1/GKlib/fkvkselect.c,
	  external_libs/metis-5.1/GKlib/fs.c,
	  external_libs/metis-5.1/GKlib/getopt.c,
	  external_libs/metis-5.1/GKlib/gk_arch.h,
	  external_libs/metis-5.1/GKlib/gk_defs.h,
	  external_libs/metis-5.1/GKlib/gk_externs.h,
	  external_libs/metis-5.1/GKlib/gk_getopt.h,
	  external_libs/metis-5.1/GKlib/gk_macros.h,
	  external_libs/metis-5.1/GKlib/gk_mkblas.h,
	  external_libs/metis-5.1/GKlib/gk_mkmemory.h,
	  external_libs/metis-5.1/GKlib/gk_mkpqueue.h,
	  external_libs/metis-5.1/GKlib/gk_mkpqueue2.h,
	  external_libs/metis-5.1/GKlib/gk_mkrandom.h,
	  external_libs/metis-5.1/GKlib/gk_mksort.h,
	  external_libs/metis-5.1/GKlib/gk_mkutils.h,
	  external_libs/metis-5.1/GKlib/gk_proto.h,
	  external_libs/metis-5.1/GKlib/gk_struct.h,
	  external_libs/metis-5.1/GKlib/gk_types.h,
	  external_libs/metis-5.1/GKlib/gkregex.c,
	  external_libs/metis-5.1/GKlib/gkregex.h,
	  external_libs/metis-5.1/GKlib/graph.c,
	  external_libs/metis-5.1/GKlib/htable.c,
	  external_libs/metis-5.1/GKlib/io.c,
	  external_libs/metis-5.1/GKlib/itemsets.c,
	  external_libs/metis-5.1/GKlib/mcore.c,
	  external_libs/metis-5.1/GKlib/memory.c,
	  external_libs/metis-5.1/GKlib/ms_inttypes.h,
	  external_libs/metis-5.1/GKlib/ms_stat.h,
	  external_libs/metis-5.1/GKlib/ms_stdint.h,
	  external_libs/metis-5.1/GKlib/omp.c,
	  external_libs/metis-5.1/GKlib/pdb.c,
	  external_libs/metis-5.1/GKlib/pqueue.c,
	  external_libs/metis-5.1/GKlib/random.c,
	  external_libs/metis-5.1/GKlib/rw.c,
	  external_libs/metis-5.1/GKlib/seq.c,
	  external_libs/metis-5.1/GKlib/sort.c,
	  external_libs/metis-5.1/GKlib/string.c,
	  external_libs/metis-5.1/GKlib/test,
	  external_libs/metis-5.1/GKlib/test/CMakeLists.txt,
	  external_libs/metis-5.1/GKlib/test/Makefile.in.old,
	  external_libs/metis-5.1/GKlib/test/Makefile.old,
	  external_libs/metis-5.1/GKlib/test/fis.c,
	  external_libs/metis-5.1/GKlib/test/gkgraph.c,
	  external_libs/metis-5.1/GKlib/test/gksort.c,
	  external_libs/metis-5.1/GKlib/test/rw.c,
	  external_libs/metis-5.1/GKlib/test/strings.c,
	  external_libs/metis-5.1/GKlib/timers.c,
	  external_libs/metis-5.1/GKlib/tokenizer.c,
	  external_libs/metis-5.1/GKlib/util.c,
	  external_libs/metis-5.1/Install.txt,
	  external_libs/metis-5.1/LICENSE.txt,
	  external_libs/metis-5.1/Makefile,
	  external_libs/metis-5.1/include,
	  external_libs/metis-5.1/include/CMakeLists.txt,
	  external_libs/metis-5.1/include/metis.h,
	  external_libs/metis-5.1/libmetis,
	  external_libs/metis-5.1/libmetis/CMakeLists.txt,
	  external_libs/metis-5.1/libmetis/auxapi.c,
	  external_libs/metis-5.1/libmetis/balance.c,
	  external_libs/metis-5.1/libmetis/bucketsort.c,
	  external_libs/metis-5.1/libmetis/checkgraph.c,
	  external_libs/metis-5.1/libmetis/coarsen.c,
	  external_libs/metis-5.1/libmetis/compress.c,
	  external_libs/metis-5.1/libmetis/contig.c,
	  external_libs/metis-5.1/libmetis/debug.c,
	  external_libs/metis-5.1/libmetis/defs.h,
	  external_libs/metis-5.1/libmetis/fm.c,
	  external_libs/metis-5.1/libmetis/fortran.c,
	  external_libs/metis-5.1/libmetis/frename.c,
	  external_libs/metis-5.1/libmetis/gklib.c,
	  external_libs/metis-5.1/libmetis/gklib_defs.h,
	  external_libs/metis-5.1/libmetis/gklib_rename.h,
	  external_libs/metis-5.1/libmetis/graph.c,
	  external_libs/metis-5.1/libmetis/initpart.c,
	  external_libs/metis-5.1/libmetis/kmetis.c,
	  external_libs/metis-5.1/libmetis/kwayfm.c,
	  external_libs/metis-5.1/libmetis/kwayrefine.c,
	  external_libs/metis-5.1/libmetis/macros.h,
	  external_libs/metis-5.1/libmetis/mcutil.c,
	  external_libs/metis-5.1/libmetis/mesh.c,
	  external_libs/metis-5.1/libmetis/meshpart.c,
	  external_libs/metis-5.1/libmetis/metislib.h,
	  external_libs/metis-5.1/libmetis/minconn.c,
	  external_libs/metis-5.1/libmetis/mincover.c,
	  external_libs/metis-5.1/libmetis/mmd.c,
	  external_libs/metis-5.1/libmetis/ometis.c,
	  external_libs/metis-5.1/libmetis/options.c,
	  external_libs/metis-5.1/libmetis/parmetis.c,
	  external_libs/metis-5.1/libmetis/pmetis.c,
	  external_libs/metis-5.1/libmetis/proto.h,
	  external_libs/metis-5.1/libmetis/refine.c,
	  external_libs/metis-5.1/libmetis/rename.h,
	  external_libs/metis-5.1/libmetis/separator.c,
	  external_libs/metis-5.1/libmetis/sfm.c,
	  external_libs/metis-5.1/libmetis/srefine.c,
	  external_libs/metis-5.1/libmetis/stat.c,
	  external_libs/metis-5.1/libmetis/stdheaders.h,
	  external_libs/metis-5.1/libmetis/struct.h,
	  external_libs/metis-5.1/libmetis/timing.c,
	  external_libs/metis-5.1/libmetis/util.c,
	  external_libs/metis-5.1/libmetis/wspace.c,
	  external_libs/metis-5.1/manual,
	  external_libs/metis-5.1/manual/manual.pdf: Added METIS-5.1.0
	  version into our code. Still has to be compiled separately
	  through CMake

2013-05-16 16:09  dstrubbe

	* [r10604] testsuite/components/14-center-geom.test: Fixed
	  oct-center-geom test, which was always being skipped with message
	  "No valid executable found for
	  ../../testsuite/components/14-center-geom.test". I think this was
	  because it could not respond to the query for options in the perl
	  script. Now it is setup like other utility tests, though this one
	  lacks a main octopus(_mpi) run.

2013-05-16 16:10  dstrubbe

	* [r10605] src/states/states_calc_inc.F90: Forgotten word.

2013-05-16 16:50  joseba

	* [r10607] external_libs/metis-5.1/Makefile: We don't need the
	  previous makefile

2013-05-16 17:09  joseba

	* [r10608] external_libs/metis-5.1/CMakeLists.txt: We are not going
	  to use CMake

2013-05-16 17:12  joseba

	* [r10609] external_libs/metis-5.1/GKlib/CMakeLists.txt,
	  external_libs/metis-5.1/GKlib/GKlibSystem.cmake,
	  external_libs/metis-5.1/GKlib/test/CMakeLists.txt,
	  external_libs/metis-5.1/include/CMakeLists.txt,
	  external_libs/metis-5.1/libmetis/CMakeLists.txt: Removing more
	  file from CMake that we don't need

2013-05-16 17:14  joseba

	* [r10610] external_libs/metis-5.1/GKlib/Makefile: One more

2013-05-16 17:54  joseba

	* [r10611] configure.ac, external_libs/metis-5.1/GKlib/Makefile.am,
	  external_libs/metis-5.1/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am, m4/metis.m4,
	  src/common-rules.make: Started with METIS 5 support with
	  autotools, it doesn't work yet
	  Added ID to Makefile.am and common-rules.make

2013-05-16 20:48  dstrubbe

	* [r10612] src/ions/xyz_adjust.F90: Some output from
	  oct-center-geom.

2013-05-16 21:06  dstrubbe

	* [r10613] testsuite/finite_systems_3d/11-sic.test: Widening
	  precision for SIC test, since mauchly just failed on this.
	  Probably indicates numerical issues that need to be fixed.

2013-05-17 02:50  dstrubbe

	* [r10614] src/ions/xyz_adjust.F90,
	  testsuite/components/14-center-geom.test: * The oct-center-geom
	  test was failing on chum path because of the arbitrariness of the
	  sign of the eigenvectors of the moment of inertia. Now a
	  particular arbitrary choice will be made to fix the sign and make
	  them reproducible.
	  * More info from oct-center-geom: center of mass, primary and
	  secondary axes used for alignment, moment of inertia tensor,
	  eigenvalues of moment of inertia.

2013-05-17 03:03  dstrubbe

	* [r10615] src/ions/xyz_adjust.F90: Adding a caveat:
	  oct-center-geom is currently assuming 3D in many places.

2013-05-17 04:02  dstrubbe

	* [r10617] src/ions/xyz_adjust.F90: * Bugfix to oct-center-geom:
	  the formula for moment of inertia was wrong, and not even
	  dimensionally correct. Seems to have involved some false analogy
	  to quadrupole moments. Does not affect the results of the test I
	  added recently though.
	  * Incorrect default was listed for MainAxis.
	  
	  These problems go all the way back to initial implementation of
	  this utility in r745-r746.

2013-05-17 04:41  dstrubbe

	* [r10618] src/ions/xyz_adjust.F90: * The piece of code to check
	  axes for a linear molecule is only triggered in an impossible
	  case: the eigenvectors of the moment of inertia tensor will be
	  always be normalized coming from LAPACK. An eigenvalue, not an
	  eigenvector, will be zero for a linear molecule.
	  * Removing unnecessary copy from tinertia to vec.

2013-05-17 08:56  joseba

	* [r10619] external_libs/metis-5.1, external_libs/metis-5.1/GKlib,
	  external_libs/metis-5.1/GKlib/Makefile.am,
	  external_libs/metis-5.1/Makefile.am,
	  external_libs/metis-5.1/libmetis,
	  external_libs/metis-5.1/libmetis/Makefile.am: GKlib and libmetis
	  are compiled inside METIS 5. Not yet the entire library
	  Added ignore properties for Makefiles

2013-05-17 09:28  joseba

	* [r10620] configure.ac, external_libs/metis-5.1/Makefile.am,
	  external_libs/metis-5.1/include,
	  external_libs/metis-5.1/include/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am,
	  src/main/Makefile.am: Created Makefile.am for the include and
	  ignored Makefiles
	  Library is now compiled but when trying to link says: "could not
	  read symbols: Archive has no index"
	  Added Id for another Makefile.am

2013-05-17 09:33  marques

	* [r10621] libxc/src/mgga_x_tpss.c: Added BLOC meta-GGA

2013-05-17 10:16  joseba

	* [r10622] src/grid/mesh_init.F90: Reverted a bug of out of bound
	  introduced in r10490

2013-05-17 10:17  joseba

	* [r10623] src/grid/mesh_init.F90: Reverted also in case of
	  curvilinear meshes of bug introduced in r10490

2013-05-17 11:40  marques

	* [r10624] libxc/src/Makefile.am, libxc/src/gga_x_vmt.c: Added
	  functional gga_x_vmt

2013-05-17 12:48  marques

	* [r10625] libxc/src/gga_x_vmt.c: Added two version of VMT{8,4}

2013-05-17 14:27  dstrubbe

	* [r10626] libxc/src/lda_c_pw.c, libxc/src/mgga_x_tpss.c: Typos in
	  libxc.

2013-05-17 14:32  dstrubbe

	* [r10627] src/ions/xyz_adjust.F90: * oct-center-geom is
	  generalized to other than 3 dimensions (other than the rotation
	  part, which is complicated to do).
	  * AxisType can now be 'none', to just do the centering but not
	  rotation.
	  * 'Moment of inertia' is now called 'Moment of pseudo-inertia' if
	  AxisType = pseudo_inertia.

2013-05-17 14:41  dstrubbe

	* [r10628] src/ions/xyz_adjust.F90: Fixing POP_SUB name.

2013-05-17 20:07  dstrubbe

	* [r10631] src/math/math.F90: * Removing PUSH/POP's from function
	  called too frequently.
	  * Doxygen comments.

2013-05-18 01:10  xavier

	* [r10632] external_libs/metis-5.1/libmetis/Makefile.am: Fix for
	  compilation of metis 5.1 out of the source directory.

2013-05-18 01:37  xavier

	* [r10633] src/system/eigen_plan_inc.F90: Fixed the article
	  reference for the plan eigensolver.

2013-05-18 01:44  xavier

	* [r10634] configure.ac, external_libs/Makefile.am,
	  external_libs/metis-4.0, external_libs/metis-5.1/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am, m4/metis.m4,
	  src/common-rules.make, src/grid/Makefile.am,
	  src/grid/mesh_partition.F90, src/grid/metis.c: * Fixed
	  compilation with metis-5.1
	  * Removed metis-4.0 support and source.
	  

2013-05-18 01:50  xavier

	* [r10635] COPYING: Updated the license for metis.

2013-05-18 02:41  xavier

	* [r10636] COPYING, configure.ac, external_libs/Makefile.am,
	  external_libs/zoltan, m4/zoltan.m4, src/common-rules.make,
	  src/grid/Makefile.am, src/grid/mesh_partition.F90,
	  src/grid/zoltan.F90, src/grid/zoltan_low.c: Removed Zoltan, this
	  is no longer required since Metis is now open
	  source.

2013-05-18 03:14  xavier

	* [r10637] configure.ac, external_libs/metis-5.1/GKlib/error.c,
	  external_libs/metis-5.1/GKlib/gk_externs.h,
	  external_libs/metis-5.1/GKlib/memory.c, m4/tls.m4: Added a check
	  for C compiler support for __thread, this should fix the
	  problem with PGI.

2013-05-18 04:24  xavier

	* [r10638] external_libs/metis-5.1/GKlib/string.c: Another fix to
	  try to get metis to compile with PGI.

2013-05-18 19:33  umberto

	* [r10639] src/math/pnfft.F90, src/math/pnfft_inc.F90: FIrst try at
	  implementing PNFFT module. not working yet.

2013-05-18 19:38  umberto

	* [r10640] src/math/Makefile.am, src/math/fft.F90,
	  src/math/fft_inc.F90: use PNFFT in fft_m

2013-05-18 19:44  umberto

	* [r10641] src/grid/cube.F90: Making the cube able to initialize
	  PNFFT and NFFT libraries.

2013-05-18 20:11  dstrubbe

	* [r10642] src/system/output.F90: Message for writing output:
	  otherwise can look like the calculation is hanging.

2013-05-19 18:57  dstrubbe

	* [r10643] src/basic/multicomm.F90, src/states/states_io.F90:
	  Comment and colons.

2013-05-19 20:21  dstrubbe

	* [r10644] src/scf/lcao_inc.F90: Bugfix: LCAO (standard, not
	  alternative) produced incorrect real-space wavefunctions when
	  parallel in states. The problem was confusion between
	  'lcao_start' in its original meaning of the lowest state to be
	  used from LCAO, and its new value assigned as max(lcao_start,
	  st%st_start). This led to the states not being properly
	  initialized to zero before accumulation of contributions from the
	  atomic orbitals. Also, only processors in states-group 0 had the
	  full list of eigenvalues, even though they are supposed to be
	  global; this probably was not a problem though. I have converted
	  use of st%X(psi) to states_set_state in the initialization to
	  zero, and also removed the distinction between initialization
	  when lcao_start == 1 and when it is not. Finally, I had to rename
	  the integer 'max' which interfered with the ability to use the
	  'max' intrinsic Fortran function -- don't use a Fortran keyword
	  as a variable!
	  reported by Varadharajan Srinivasan.

2013-05-19 20:24  dstrubbe

	* [r10645]
	  testsuite/finite_systems_3d/10-fullerene.03-gs_stdlcao.inp,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/Makefile.am: Adding a test that uses
	  standard LCAO with states parallelization, that might have caught
	  the problem fixed in r10644 (which was reported by Varadharajan
	  Srinivasan), in which the states resulting from LCAO are wrong,
	  causing a huge difference in eigenvalues between LCAO and SCF
	  iteration 1 and slow convergence, even if the LCAO eigenvalues
	  are close to the final answer.

2013-05-20 12:38  joseba

	* [r10647] src/grid/boundaries_inc.F90: Corrected the bug with
	  OpenCL reported by Xavier.
	  This is an error from a forgotten change of r10348

2013-05-20 12:43  micael

	* [r10648] src/states/states.F90: * Bug fix: k-points
	  parallelization for spin-polarized calculations was not done
	  properly in states_calc_quantities.

2013-05-20 13:01  micael

	* [r10649] src/xc/vxc_inc.F90: * Cleaned the calc_tb09_c routine
	  and removed the very annoying instruction to print the "c"
	  parameter everytime it was calculated.

2013-05-20 20:35  dstrubbe

	* [r10651] src/system/output_etsf_inc.F90,
	  testsuite/periodic_systems/09-etsf_io.test: Comments on ETSF_IO
	  test; Indentation.

2013-05-20 20:50  dstrubbe

	* [r10652] src/basic/datasets.F90, src/basic/parser.F90,
	  src/grid/boundaries.F90, src/hamiltonian/born_charges.F90,
	  src/ions/kpoints.F90: Fixing some intent's: _end routines should
	  always be inout, or else we may be trying to deallocate
	  uninitialized pointers/arrays, or not passing out the fact that
	  they are deallocated and nullified.

2013-05-20 21:25  dstrubbe

	* [r10653] src/species/atomic.F90, src/system/eigen_cg_inc.F90: *
	  Removing explicit argument bounds in atomic.
	  * In one case, the debug info would not be written in CG. Now it
	  is.

2013-05-20 21:50  dstrubbe

	* [r10654] src/main/geom_opt.F90, src/main/one_shot.F90,
	  src/main/phonons_fd.F90, src/opt_control/initst.F90,
	  src/opt_control/propagation.F90, src/system/v_ks.F90: The
	  parameter 'geo' cannot be optional in v_ks_calc(_start) since it
	  is passed regardless to v_a_xc. This makes it be needed in
	  update_hamiltonian_psi too.

2013-05-21 01:57  dstrubbe

	* [r10655] src/states/states.F90: After reading in occupations on
	  restart, the Fermi energy was not computed, and could be used
	  unitialized in a certain case. In td mode, a call to
	  energy_calc_total which in turn called smear_calc_entropy would
	  use the Fermi energy unless the run used fixed occupations. Now
	  the Fermi energy is computed as part of initialization of the
	  occupations.

2013-05-21 09:02  micael

	* [r10657] src/states/states.F90, src/xc/vxc_inc.F90,
	  src/xc/xc.F90: * I believe it is very misleading to have a
	  routine that can compute two different quantities, the kinetic
	  energy density and the gauge-independent kinetic energy density,
	  and have some variable (CurrentInTau) that might make the second
	  quantity equal to the first, i.e. the gauge-independent KED might
	  in fact be gauge-dependent (!) depending on some input option. It
	  is much more logical to use either the gauge-dependent or the
	  gauge-independent KED depending on the input option without
	  acutally changing the definintion of those quantities.
	  * Renamed the CurrentInTau variable XCUseGaugeIndependentKED and
	  moved it to xc_m module to make it clear that this is used when
	  evaluating the XC functional.

2013-05-21 10:09  nitsche

	* [r10658] src/td/ob_mem.F90: * Added more checks while reading the
	  open boundary memory coefficients files. Hopefully this fixes the
	  occasional failures on mauchly.

2013-05-21 11:03  joseba

	* [r10659] m4/pfft.m4, src/math/pfft.F90: Added support for PFFT
	  1.0.7 using with a patched version of FFTW3.3.3, it won't work
	  anymore with PFFT 1.0.5 as it uses one less parameter. Now PFFT
	  and FFTW3 flags are in a single parameter.
	  Modified m4 to be able to compile it.
	  
	  Compiling instructions at
	  http://www-user.tu-chemnitz.de/~mpip/software.php?lang=en

2013-05-21 14:00  micael

	* [r10660] src/grid/mesh_partition.F90, src/math/Makefile.am,
	  src/math/metis.F90, src/math/metis_f.c: * Added an explicit
	  Fortran interface to the (Par)Metis routines.
	  * We now pass explicitly the NULL pointers to (Par)Metis using
	  the C interface.

2013-05-21 14:49  micael

	* [r10661] src/grid/mesh_partition.F90: * Removed PFFT partition of
	  the mesh.
	  * Removed unused variables.

2013-05-21 15:28  joseba

	* [r10662] m4/pfft.m4: More information about the versions in the
	  m4 of PFFT and also success with 1.0.7 and fails with 1.0.5
	  Thanks David

2013-05-21 16:28  dstrubbe

	* [r10663] src/states/states.F90, src/td/td.F90: Fix to r10655
	  which was wrong for restart with smearing (causing test
	  failures): we need the eigenvalues to compute the Fermi energy in
	  that case, which were not available yet. Now there is just a call
	  for td for states_fermi. I think the issue addressed in r10655 is
	  only formal currently: the TS term in the energy would be wrong
	  in the first iteration of time propagation, but it was not
	  written out anyway. Probably should be for systems with smearing
	  though.

2013-05-21 16:46  joseba

	* [r10664] m4/pfft.m4: Reverted the need of the fftw3 library
	  Removed unused variables in the check program
	  
	  Thanks to David and Umberto

2013-05-21 16:58  dstrubbe

	* [r10665] src/basic/loct.F90, src/main/casida.F90: Changing some
	  occurences of 'max' as a variable. Since this is also an
	  intrinsic function, it is a confusing name and may cause trouble
	  in some cases.

2013-05-21 17:00  dstrubbe

	* [r10666] m4/sparskit.m4: SPARSKIT m4 should guess with the more
	  flexible -l style of linking so that both .a and .so libraries
	  can be used.

2013-05-21 17:01  dstrubbe

	* [r10667] m4/pfft.m4: Typo.

2013-05-21 17:18  dstrubbe

	* [r10668] m4/dune_metis.m4, m4/parmetis.m4: * The dune metis check
	  gave the ridiculous output:
	  
	  checking for METIS library... failed
	  yes
	  
	  Now, an if-condition is written properly so that it doesn't write
	  'yes' when the check fails.
	  
	  * Using 'no' rather than 'failed' as a test result in m4 macros,
	  according to the standard for all our other macros.

2013-05-21 17:27  dstrubbe

	* [r10669] src/states/smear.F90,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp: * Adding
	  PUSH/POP's and Doxygen comment.
	  * Tests should not set DebugLevel = 0; this is default.

2013-05-21 18:07  dstrubbe

	* [r10670] m4/blacs.m4, m4/blas.m4, m4/fft.m4, m4/fortran.m4,
	  m4/lapack.m4, m4/libfm.m4, m4/mpi.m4, m4/openmp.m4,
	  m4/scalapack.m4: Replacing AC_TRY_LINK_FUNC with AC_LINK_IFELSE.
	  The former has been considered obsolete since at least autoconf
	  version 2.59.
	  
	  http://www.gnu.org/software/autoconf/manual/autoconf-2.64/html_node/Obsolete-Macros.html#index-AC_005fTRY_005fLINK_005fFUNC-1990

2013-05-21 18:12  dstrubbe

	* [r10671] m4/pfft.m4: Adding 'implicit none' to test program makes
	  it fail properly for PFFT 1.0.4. Otherwise good old Fortran
	  doesn't care if the symbols are undefined...

2013-05-21 19:11  dstrubbe

	* [r10672] m4/blacs.m4, m4/blas.m4, m4/fft.m4, m4/fortran.m4,
	  m4/lapack.m4, m4/libfm.m4, m4/openmp.m4, m4/scalapack.m4: Fix to
	  r10670: AC_LINK_IFELSE is supposed to be used in conjection with
	  AC_LANG_CALL. Otherwise, the test program is just the text of the
	  function. This only seemed to work because not all the checks in
	  each m4 macro used AC_LINK_IFELSE, some used AC_CHECK_LIB.

2013-05-21 19:47  dstrubbe

	* [r10673] testsuite/periodic_systems/07-tb09.01-gs_symm.inp,
	  testsuite/periodic_systems/07-tb09.02-gs_nosymm.inp: Updating
	  tests in light of r10657.

2013-05-21 19:56  dstrubbe

	* [r10674] src/species/atomic.F90: Fixing the intent for 'y' in
	  numin: it should be intent(inout) since it was partly set in
	  numout already. Formatting of argument list.

2013-05-21 21:12  dstrubbe

	* [r10675] src/hamiltonian/epot.F90,
	  testsuite/periodic_systems/03-sodium_chain.test: Bugfix: external
	  potential in periodic systems could be incorrect if a
	  pseudopotential projector spanned the whole cell. This is the
	  case for the sodium test, resulting in some slightly different
	  values. The problem is an ambiguous vector assignment, dating
	  back to r3830. The index sphere%map has duplicate values, making
	  it not entirely clear what the assignment means. Hence this sort
	  of thing is forbidden by the Fortran standard,
	  6.2.2.3.2((http://j3-fortran.org/doc/standing/archive/007/97-007r2/pdf/97-007r2.pdf).
	  Problem reported by Vittorio.

2013-05-22 01:42  dstrubbe

	* [r10676] src/hamiltonian/ob_lead.F90,
	  src/math/lalg_basic_blas_inc.F90: * Removing explicit bounds from
	  arguments.
	  * Doxygen comments.

2013-05-22 02:47  dstrubbe

	* [r10677] src/math/lalg_basic_blas_inc.F90,
	  src/scf/ob_lippmann_schwinger.F90: * Removed unused variables
	  declared only for OpenMP.
	  * Formatting and Doxygen comments.

2013-05-22 03:34  dstrubbe

	* [r10678] src/system/preconditioners_inc.F90, src/xc/vxc_inc.F90:
	  * Avoiding operating on the part of l_tau which is not in the
	  current block. In some cases, this avoids accessing uninitialized
	  data.
	  * Fixing intent for preconditioner: while no data of bb comes in,
	  some other elements of the batch are set up previously.
	  Both addressing problems pointed out by Vittorio.

2013-05-22 09:24  joseba

	* [r10679] src/states/states.F90, src/states/states_calc.F90,
	  src/states/states_calc_inc.F90: Removed few unused variables

2013-05-22 10:24  acastro

	* [r10680] src/opt_control/check_input_inc.F90,
	  src/system/exponential.F90: Removed an unnecessary constraint on
	  the choice of propagators available for
	  QOCT runs.

2013-05-22 12:20  micael

	* [r10681] src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/partition.F90: *) Move the content of the partition
	  module to a single routine in the mesh_partition module.
	  *) I'm not removing the partition module, as I will use it for
	  the distributed partition.

2013-05-22 13:00  joseba

	* [r10682] src/math/metis_f.c: Added the inclusion of the mpi.h to
	  be sure that the datatype of MPI_Comm is defined

2013-05-22 13:03  micael

	* [r10683] src/grid/mesh_partition.F90: * Renumbered the parameters
	  in mesh_partition_m.
	  * Some clarifications to the variables documention.
	  * Cleaning.

2013-05-22 13:06  micael

	* [r10684] src/grid/mesh_partition.F90: * Making the RCB and GRAPH
	  parameters private.

2013-05-22 13:09  micael

	* [r10685] src/grid/mesh_partition.F90: * The MeshPartition
	  variable is only used with METIS.

2013-05-22 13:45  joseba

	* [r10686] m4/parmetis.m4, src/math/metis_f.c: Parmetis is only
	  check if MPI is found
	  Moved to the proper place the mpi.h

2013-05-22 20:41  dstrubbe

	* [r10688] external_libs/bpdn/bpdn.f90,
	  src/math/compressed_sensing.F90: * Added missing intent's for
	  bpdn and put arguments in list.
	  * Fixed intent for compressed_sensing_spectral_analysis this.
	  (Reported by Vittorio Zecca.)
	  * Indentation, removed useless semicolon.

2013-05-22 21:40  dstrubbe

	* [r10689] m4/fft.m4: Let's try a little harder to find
	  dfftw_init_threads.

2013-05-23 08:09  micael

	* [r10690] Makefile.am, doc/ChangeLog.2009.gz,
	  doc/ChangeLog.2010.gz, doc/ChangeLog.2011.gz: Updated ChangeLog
	  archive.

2013-05-23 08:20  micael

	* [r10692] Makefile.am, doc/ChangeLog.2012.gz: I forgot the
	  ChangeLog from 2012.

2013-05-23 09:41  micael

	* [r10695] testsuite/linear_response/Makefile.am: A file was
	  missing from the tarball.

2013-05-23 10:56  acastro

	* [r10697] src/states/states.F90: Some info about the distribution
	  of blocks in states was printed to stdout
	  everytime that the states_init_block subroutine was called. I
	  added an
	  optional verbose option to give the option to the caller to
	  supress it (that
	  routine is called every time a states_copy is invoked, and this
	  is done very
	  often in some run modes).

2013-05-23 13:38  acastro

	* [r10698] testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/06-zbr98.test: The commit #10680
	  slightly changed the lanczos propagation algorithm, which
	  slightly changed the values of some testsuite reference values. I
	  update here
	  those reference values.

2013-05-23 17:23  acastro

	* [r10699] src/math/math.F90: The computation of hyperspherical
	  coordinates from cartesian coordinates had
	  the risk of attempting "atan2(0.0,0.0)". It is unclear from the
	  standard
	  definition what this could mean. I changed this, I think the
	  computation is
	  more robust now (thanks to Vittorio Zecca for reporting this).
	  
	  Also, the two-dimensional case had a bug.

2013-05-23 17:28  micael

	* [r10700] src/grid/mesh_partition.F90: Now the graph is
	  constructed and stored locally. It is gathered in all nodes only
	  when necessery, i.e. when METIS is used or we run in debug mode.

2013-05-23 21:37  dstrubbe

	* [r10701] src/system/magnetic.F90: * Operating on only the
	  relevant section of a_ind (i.e. not up to np_part).
	  * Updating comments.
	  * Doxygen comments.

2013-05-23 21:46  dstrubbe

	* [r10702] src/math/pnfft.F90: Removed apostrophe making cpp
	  warning, and Doxygen comment.

2013-05-23 22:37  dstrubbe

	* [r10703] src/math/minimizer.F90: Making sure values are returned
	  for the 'minimum' and 'ierr' arguments in the minimizers.

2013-05-24 01:44  dstrubbe

	* [r10704] configure.ac, m4/fortran.m4: A better guess and check
	  for cpp for Fortran preprocessing. Previously, we used a variable
	  FCCPP for Fortran preprocessing, which was set independently of
	  CPP, with a value of either the environment variable FCCPP, or
	  "/lib/cpp -ansi". However, there was no check that FCCPP
	  (initialized by either of this methods) was an existing or
	  executable file, or any check that it would actually work for our
	  purposes. This is a problem particularly on a Mac, where /lib/cpp
	  does not exist, and the default cpp in the path (/usr/bin/cpp)
	  will fail in compilation.
	  
	  On the other hand, autoconf is finding cpp for C properly. So why
	  not just work with that? I abolished the FCCPP variable, and now
	  we use CPP for all purposes. However, we need to check that CPP
	  will work for Fortran, specifically for two issues:
	  * Will it strip C++ style comments, and thus destroy any F90
	  lines with a string concatenation? (running without -ansi
	  generally makes this problem occur)
	  * Will it concatenate strings with ## as we need for many macros?
	  (Mac's /usr/bin/cpp will fail this)
	  So, we perform these two checks, and add -ansi if necessary to
	  make them work, or otherwise throw an error, rather than have
	  peculiar compilation failures later. This change may mean we now
	  use some unnecessary flags for cpp on C files, but I don't see
	  any problem with that.
	  
	  In case you wonder how good the previous set up was, note these
	  original comments in the source from Miguel in r799:
	  "this should not be hardwired"
	  "this is a hack, and should be changed in the future"

2013-05-24 01:46  dstrubbe

	* [r10705] src/common-rules.make: This was supposed to be in the
	  last commit, as part of changing FCCPP to CPP.

2013-05-24 02:06  dstrubbe

	* [r10706] configure.ac, m4/fortran.m4: Reverting r10704 and
	  r10705, since I realize that gcc -E will pass the tests but fail
	  on a file with extension .F90!

2013-05-24 08:04  micael

	* [r10707] testsuite/finite_systems_2d/04-biot_savart.01-gs.inp:
	  Changed the eigensolver of the Biot-Savart test to to make its
	  SCF convergence more stable.

2013-05-24 08:23  micael

	* [r10708] src/common-rules.make: r10706 failed to revert the
	  changes to this file.

2013-05-24 08:36  micael

	* [r10709] src/grid/partition.F90: * New routines to define and
	  store a distributed partition. Not yet used in the rest of the
	  code.

2013-05-24 13:22  acastro

	* [r10710] src/opt_control/propagation.F90,
	  src/opt_control/target.F90: Removed the variable name "target",
	  since it is a Fortran language element and
	  could confuse the compilers.

2013-05-24 14:06  acastro

	* [r10711] src/opt_control/check_input_inc.F90,
	  src/opt_control/controlfunction.F90: I remove the possibility of
	  doing phase-only OCT runs, which was not being
	  properly maintained.

2013-05-24 14:44  umberto

	* [r10712] src/math/Makefile.am, src/math/fft.F90,
	  src/math/fft_inc.F90, src/math/pnfft.F90, src/math/pnfft_inc.F90:
	  Updated version of PNFFT module.
	  New forward and backward transforms. fft_inc forward and backward
	  transforms pass an optional norm factor to help the inverse
	  rs-.fs mapping used with nfft.

2013-05-24 14:51  umberto

	* [r10713] src/grid/cube.F90, src/grid/cube_function_inc.F90: Added
	  additional vectors to cube_t to hold information needed to gather
	  fs functions when using PNFFT.
	  Updated accordingly cube_function_allgather and cube_do_mapping.

2013-05-24 15:06  umberto

	* [r10714] src/td/Makefile.am, src/td/pes.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90,
	  testsuite/photo_electron/04-nfft.test: * Updated PES module to
	  make use of PNFFT and all the new cube_t technology. Both PNFFT
	  and NFFT X_to_K maps now use backward tranforms. this give
	  slightly different numbers for the nfft-test which has been
	  updated accordingly.
	  * moved pes_mask_out_inc file as par t of pes_mask.F90 where it
	  should belong. Lot of cleaning still to be done on the module.

2013-05-24 15:16  umberto

	* [r10715] src/math/pnfft.F90: Fixed problem with pnfft module when
	  PNFFT is not available.

2013-05-24 16:34  umberto

	* [r10716] src/grid/cube.F90: substitute => NULL() with nullify()

2013-05-24 16:46  umberto

	* [r10717] src/td/pes.F90: Cleaning unused modules.

2013-05-24 17:23  dstrubbe

	* [r10719] src/basic/global.F90: Unnecessary semicolon.

2013-05-24 17:50  acastro

	* [r10720] src/opt_control/controlfunction.F90,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/10-current.02-oct.inp: The
	  "OCTLaserEnvelope" is now read using the "TDFunctions" block.

2013-05-24 17:56  umberto

	* [r10721] src/td/pes_mask.F90,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/photo_electron/05-pfft-h3d.03-ba.inp: Changed the
	  EnlargeLev options into EnlargeFactor to allow for real numbers
	  bigger than one instead of just powers of 2. This allow for more
	  flexibility in big simulations.
	  The testsuite has been changed accordingly.

2013-05-24 18:16  dstrubbe

	* [r10722] configure.ac, m4/fortran.m4: Another try at r10704:
	  
	  Better guesses and check for cpp for Fortran preprocessing. We
	  use a variable FCCPP for Fortran preprocessing, which was
	  previously set independently of CPP, with a value of either the
	  environment variable FCCPP, or "/lib/cpp -ansi". However, there
	  was no check that FCCPP (initialized by either of this methods)
	  was an existing or executable file, or any check that it would
	  actually work for our purposes. This is a problem particularly on
	  a Mac, where /lib/cpp does not exist, and the default cpp in the
	  path (/usr/bin/cpp) will fail in compilation.
	  Now we check in sequence FCCPP, CPP (initialized either from the
	  environment, or an autoconf check), `which cpp`, and /lib/cpp,
	  and for each we check that it can be run, and that it will work
	  for Fortran, specifically for two issues:
	  Will it strip C++ style comments, and thus destroy any F90 lines
	  with a string concatenation? (running without -ansi generally
	  makes this problem occur)
	  Will it concatenate strings with ## as we need for many macros?
	  (Mac's /usr/bin/cpp will fail this, as will gcc -E, but not gcc
	  -E -x c)
	  So, we perform these two checks, and add -ansi if necessary to
	  make them work, or otherwise throw an error, rather than have
	  peculiar compilation failures later.
	  
	  In case you wonder how good the previous set up was, note these
	  original comments in the source from Miguel:
	  r112: "this should not be hardwired" (regarding /lib/cpp)
	  r801: "this is a hack, and should be changed in the future"

2013-05-24 18:36  dstrubbe

	* [r10723] configure.ac, m4/fortran.m4: * autoconf on some machines
	  would give this error on the previous commit:
	  
	  sh: -c: line 0: syntax error near unexpected token `('
	  
	  Now, it doesn't, though it makes a number of warnings instead
	  about AC_LANG_PREPROC(Fortran).
	  
	  * /lib/cpp should be tried before CPP, since the check somehow
	  does not fail if '//' gets turned into '/ /'.

2013-05-27 09:58  micael

	* [r10724] libxc/src/gga_x_lb.c: Reverting #10345 and #10396.

2013-05-27 13:22  xavier

	* [r10727] src/scf/scf.F90: Now the total torque is printed to
	  static info.

2013-05-27 18:00  joseba

	* [r10728] m4/libfm.m4, src/poisson/poisson_fmm.F90: Updated m4 of
	  libfm to the library that creates Scafacos
	  Corrected the execution with 1 MPI process of the FMM
	  
	  Note. I used to compile with FMM the next line:
	  --with-libfm=" -I$LIBFM_HOME/include -L$LIBFM_HOME/lib -lfcs
	  -lfcs_fmm -lfcs_common -lfcs_direct -lfcs_near -lfcs_gridsort
	  -lfcs4fortran"

2013-05-28 13:11  marques

	* [r10729] libxc/src/libxc_master.F90, libxc/src/xc_f.c: Patch by
	  Yann Pouillon:
	  
	  Please find attached a patch for LibXC 2.0.1 adding the following
	  Fortran
	  wrappers:
	  
	  * subroutine xc_f90_functional_get_name(id, name)
	  * integer function xc_f90_functional_get_number(name)
	  
	  that have been requested many times for various projects. In
	  particular, it
	  solves the issue of getting a functional number from the
	  corresponding
	  description string, avoiding many potential typos in input files
	  of Fortran
	  codes.

2013-05-28 13:18  marques

	* [r10730] libxc/src/Makefile.am: Following Yann's suggestion, I
	  separated libxc in two libraries, one containing the actual
	  library (libxc) and another the Fortran bindings (libxcf).

2013-05-28 13:19  marques

	* [r10731] m4/libxc.m4: Corrected libxc.m4 so that it knowns how to
	  compile with the Fortran binding to libxc. Let's hope it works.

2013-05-28 14:18  marques

	* [r10732] libxc/src/Makefile.am: Let's see if this fixes
	  compilation with some slaves

2013-05-28 14:29  marques

	* [r10733] libxc/src/Makefile.am: I really hate libtools

2013-05-28 14:35  marques

	* [r10734] libxc/src/Makefile.am, m4/libxc.m4: Following's Xavier
	  suggestion, I changed the name of the library to libxcf90

2013-05-28 14:42  marques

	* [r10735] libxc/src/Makefile.am: Next attempt at compiling in
	  chum. But can someone update the buggy libtool of this machine?

2013-05-28 16:52  joseba

	* [r10736] external_libs/metis-5.1/GKlib/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am: METIS has to be
	  compiled only when desired, not always as before

2013-05-28 17:21  micael

	* [r10737] external_libs/metis-5.1/GKlib/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am: We should compile
	  Metis without debug options, otherwise it is slower by several
	  orders of magnitude.

2013-05-28 17:26  joseba

	* [r10738] configure.ac, m4/dune_metis.m4, m4/metis.m4,
	  src/common-rules.make: If a METIS is found outside Octopus; it is
	  not check our version.
	  Fixed the compilation with the linked METIS

2013-05-28 17:46  joseba

	* [r10739] configure.ac, m4/dune_metis.m4, m4/metis.m4: All the
	  METIS checks are done in a unique file

2013-05-28 17:48  joseba

	* [r10740] configure.ac, m4/dune_metis.m4, m4/metis.m4: Renamed to
	  metis.m4
	  Deleted a forgotten comment

2013-05-28 19:13  dstrubbe

	* [r10741] m4/metis.m4, m4/parmetis.m4: * AC_ARG_VAR makes the
	  variable there appear in ./configure --help "Some influential
	  environment variables". METIS and PARMETIS are of low
	  significance compared to FCFLAGS etc. which are the other ones
	  there, so I am removing the calls.
	  * Trying to clarify what HAVE_COMP_METIS means.
	  * Typos.

2013-05-28 20:36  dstrubbe

	* [r10742] m4/libxc.m4: * libxc.m4 now can accept the new separate
	  Fortran interface, or the old combined interface, by trying all
	  the possibilities.
	  * Some removing of duplicated lines or unnecessary intermediate
	  variables.
	  * Removing calls to $1 and $2 since no arguments are passed to
	  this routine anyway.

2013-05-28 21:18  dstrubbe

	* [r10743] m4/fortran.m4: Revision to m4 cpp check: making sure
	  that in macro expansions '//' is not expanded to '/ /'.

2013-05-29 09:26  micael

	* [r10744] src/math/metis_f.c: Fixed problem with ParMETIS and
	  OpenMPI.

2013-05-29 09:29  micael

	* [r10745] src/math/metis_f.c: Reverted unintended changes.

2013-05-29 15:54  dstrubbe

	* [r10747] m4/libxc.m4: * Fix to libxc.m4: libraries for static
	  linkage were in the wrong order, so always failed.
	  * If LIBS_LIBXC is set in the environment, that will be used
	  first for trying to link.

2013-05-29 16:11  joseba

	* [r10748] m4/libfm.m4: Following David's suggestion, simplified
	  the configuration step to get FMM working. Now is enough to call
	  it --with-libfm="$LIBFM_HOME"

2013-05-29 16:45  joseba

	* [r10749] src/poisson/poisson_libisf.F90: Updated the version of
	  the Poisson solver included in the BigDFT code and can be
	  compiled as a separate library.
	  Library compilation instructions here:
	  http://bigdft.org/Wiki/index.php?title=Installation#Building_the_Poisson_Solver_library_only
	  Soon will be released

2013-05-29 16:52  joseba

	* [r10750] src/poisson/poisson_libisf.F90: ISF kernel's datatype is
	  defined in the library, so it is compiled only with the library

2013-05-29 19:36  dstrubbe

	* [r10751] src/system/output.F90: Message about writing output
	  should be done only if some output is occurring.

2013-05-30 16:28  dstrubbe

	* [r10752] COPYING, src/opt_control/opt_control_global.F90,
	  testsuite/finite_systems_3d/21-lobpcg.test: * Removed funny
	  characters (^L) from COPYING.
	  * Updated comment in testsuite file.
	  * Doxygenation (doxidation?)

2013-05-30 17:33  joseba

	* [r10753] m4/libfm.m4: To check FMM is used --with-libfm-prefix
	  Printed the result of the first check

2013-05-30 17:34  joseba

	* [r10754] m4/libfm.m4: Deleted a forgotten debug print

2013-05-31 08:57  umberto

	* [r10755] src/td/pes_mask.F90: Try to avoid some ill-defined
	  calculations.

2013-05-31 16:57  micael

	* [r10756] src/grid/Makefile.am, src/grid/mesh.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/partition.F90: * Expanded the partition module by
	  including several useful functions.
	  * Started to use the distributed partition. At the moment this is
	  done mainly in the mesh_partition module, but it will extended to
	  all the code soon.
	  * The partition is now split in two: inner points and boundary
	  points. This is necessary to avoid strong load imbalance in
	  communications. This breaks backward compatibility for the mesh
	  partition restart, which is not too serious, as it is easy to
	  recalculate it.

2013-06-01 08:44  acastro

	* [r10757] src/opt_control/controlfunction.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90: Just some re-organization
	  of the code.

2013-06-01 10:14  acastro

	* [r10758] src/math/tdfunction.F90,
	  src/opt_control/controlfunction.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90: Some more code cleaning.

2013-06-04 13:58  dstrubbe

	* [r10759] src/grid/partition.F90, src/math/sgfft.F90: Typos.

2013-06-04 14:04  dstrubbe

	* [r10760] src/math/tdfunction.F90,
	  src/opt_control/controlfunction.F90, src/td/pes_mask.F90: *
	  Typos.
	  * Missing PUSH/POP.
	  * Adding asserts to be sure optionals are present when needed.

2013-06-04 15:36  dstrubbe

	* [r10761] m4/newuoa.m4: Let's enable newuoa by default and see if
	  all the slaves are happy with it.

2013-06-04 15:56  dstrubbe

	* [r10762] COPYING: Adding COPYING info for SPG1 in bpdn external
	  library: LGPL 2.1 from http://www.gnu.org/licenses/lgpl-2.1.txt

2013-06-04 16:19  dstrubbe

	* [r10763] external_libs/spglib/AUTHORS,
	  external_libs/spglib/ChangeLog, external_libs/spglib/INSTALL,
	  external_libs/spglib/NEWS, external_libs/spglib/README,
	  external_libs/spglib/configure: Removing some unnecessary files
	  from spglib.

2013-06-04 16:21  dstrubbe

	* [r10764] COPYING: Adding COPYING info about FortranCL, newuoa,
	  slatec, and spglib. For simplicity, we can provide just LGPL 3
	  and GPL 3 (and not versions 2.1 and 2) since the libraries using
	  those allow later versions too.

2013-06-04 16:24  dstrubbe

	* [r10765] COPYING: Inserting LGPL 3 in place of LGPL 2.1 in
	  COPYING since it can serve for both libraries licensed under
	  LGPL.

2013-06-04 16:28  dstrubbe

	* [r10766] external_libs/newuoa/Makefile.am: newuoa's make clean
	  rule was deficient, leaving *.mod behind and making the distcheck
	  buildslave fail.

2013-06-04 16:38  dstrubbe

	* [r10767] m4/libfm.m4: Removing useless logic and output from
	  libfm.m4.

2013-06-04 18:54  dstrubbe

	* [r10768] m4/libfm.m4, src/common-rules.make: Fixing libfm.m4:
	  * the cases listed were appropriate for lib not prefix
	  * FCFLAGS_LIBFM should be used
	  * removed tests that seem unlikely to work given the link line
	  Joseba says is needed

2013-06-06 16:20  dstrubbe

	* [r10769] src/td/propagator.F90: Consolidated the Crank-Nicolson
	  propagators with and without SPARSKIT, since they differed by
	  only a few lines.

2013-06-06 16:24  dstrubbe

	* [r10770] src/species/atomic.F90: Doxygen comments.

2013-06-06 16:43  dstrubbe

	* [r10771] src/grid/io_function_inc.F90,
	  src/td/pes_mask_out_inc.F90: Adding unit conversion to NetCDF
	  output. Guillermo pointed out this was missing.
	  
	  Umberto -- an appropriate unit should be specified for the PES
	  mask output.

2013-06-06 17:08  dstrubbe

	* [r10772] testsuite/periodic_systems/09-etsf_io.01-gs.inp,
	  testsuite/periodic_systems/09-etsf_io.test: Adding netcdf output
	  to a test. Since ETSF requires netcdf, we will always have netcdf
	  support if this test is runnable.

2013-06-06 17:11  dstrubbe

	* [r10773] src/system/eigen_arpack_inc.F90: * Renaming array
	  'select' for ARPACK: this is a poor name since it is a Fortran
	  keyword.
	  * Uses of 'real' were lacking REAL_PRECISION, so they could be
	  losing precision.

2013-06-06 17:14  dstrubbe

	* [r10774] src/system/eigensolver.F90,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp: Marking
	  lobpcg with more than one block as experimental. This is quite
	  unfortunate, given the name "locally optimal *block*
	  preconditioned conjugate gradients", but in all cases with more
	  than one block which I tried, except for
	  finite_systems_3d/21-lobpcg.02-spinors.inp, the results were
	  totally wrong. For example, a large fraction of eigenvalues were
	  0.00000 after a few iterations.

2013-06-06 17:20  dstrubbe

	* [r10775] src/grid/mesh.F90, src/grid/mesh_function_inc.F90,
	  src/hamiltonian/ob_lead.F90: * Doxygen comments.
	  * More parsimonious sizes for variable 'pp'.
	  * Making 'lead' intent(inout) since lead_init_kin initializes
	  only part of the object, and the rest was done by a preceding
	  call.

2013-06-06 20:15  dstrubbe

	* [r10776] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: Seems to me that the
	  complex scaling tests work as well, or better, in parallel than
	  in serial. All but one pass with PARPACK on MacOS, whereas none
	  pass with just ARPACK.

2013-06-06 20:26  dstrubbe

	* [r10777] src/include/global.h, src/system/eigen_lobpcg_inc.F90: *
	  Typo.
	  * Doxygen comments.

2013-06-07 15:23  dstrubbe

	* [r10778] src/td/propagator.F90: Fixing my improper use of
	  messages_fatal.

2013-06-07 18:12  dstrubbe

	* [r10779] share/util/README: Typos, updated link.

2013-06-07 18:13  dstrubbe

	* [r10780] src/ions/simul_box.F90: Documentation and error-checking
	  for BoxShape = box_image.

2013-06-07 19:03  dstrubbe

	* [r10781] src/ions/simul_box.F90: * Comment on unusual number for
	  BOX_USDEF.
	  * Doxygen comments.
	  * simul_box_t components pertaining to gdlib do not need to be
	  hidden when not compiling with gdlib.
	  * simul_box_t now stores the image filename, and writes it in
	  static/info.
	  * Note that there is no default for BoxShapeImage.

2013-06-07 19:31  dstrubbe

	* [r10782] src/math/fft.F90, testsuite/oct-run_regression_test.pl:
	  * Clarifying error message from testsuite script.
	  * Fixing funny character and removing unterminated quote.

2013-06-07 19:35  dstrubbe

	* [r10783] src/ions/simul_box.F90: BoxShapeImage now looks in
	  /share as well as working directory, and checks whether the file
	  exists before trying to open with gdlib.

2013-06-07 19:41  dstrubbe

	* [r10784] share/Makefile.am, share/gdlib.png,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_2d/08-gdlib.test,
	  testsuite/finite_systems_2d/Makefile.am: Adding a test for gdlib.

2013-06-07 19:55  dstrubbe

	* [r10785] src/grid/Makefile.am, src/grid/partition.F90,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.test: * Typos and
	  grammar.
	  * Removing cyclic dependency.

2013-06-07 21:13  dstrubbe

	* [r10786] src/ions/simul_box.F90: * Documentation and comments.
	  * Better check for periodicity with cylinder box, and
	  construction without explicit reference to 3D.
	  * Formatting.

2013-06-07 21:15  dstrubbe

	* [r10787] src/grid/io_function.F90: I don't like silent resetting
	  of OutputHow. Let's make clear what is going on to the user.

2013-06-07 21:38  dstrubbe

	* [r10788] src/grid/io_function_inc.F90, src/system/output.F90: *
	  Let's write only the real part for axis, plane, and mesh_index
	  output, when plotting a real function.
	  * Standardizing usage of mformat and iostat=ierr in these
	  routines.
	  * Indentation.

2013-06-08 00:03  dstrubbe

	* [r10790] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  Implementation of 2D XCrySDen output.

2013-06-08 00:16  dstrubbe

	* [r10791] src/basic/oct_gdlib_f.c, src/ions/simul_box.F90,
	  testsuite/finite_systems_2d/08-gdlib.test: * Write out image
	  dimensions in output for box_image.
	  * Bugfix: The coordinate conversion for the image was flipped
	  vertically, due to confusion about the origin convention.

2013-06-08 01:10  dstrubbe

	* [r10792] src/basic/oct_f.c: Warning should go to standard error.

2013-06-08 01:57  dstrubbe

	* [r10793] src/grid/grid.F90, src/ions/simul_box.F90: * More info
	  in variable reference.
	  * Box_image can be used for periodic systems.
	  * Removed empty loop accidentally left behind from r9835.
	  * Small adjustments to Lsize may be necessary depending on the
	  parity of the image size and of the grid.

2013-06-08 02:37  dstrubbe

	* [r10794]
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/21-lobpcg.01-spin_polarized.inp:
	  Apparently the block size is different on the CL intel slave, so
	  we need to set ExperimentalFeatures for two more tests.

2013-06-08 22:01  dstrubbe

	* [r10796] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: Reverting r10776: the
	  complex-scaling tests fail with PARPACK on tigger (Ubuntu).

2013-06-09 01:11  dstrubbe

	* [r10797] src/opt_control/controlfunction.F90,
	  src/opt_control/opt_control.F90: * Doxygen comments.
	  * Using nullify instead of =>NULL().

2013-06-09 02:15  dstrubbe

	* [r10798] src/math/tdfunction.F90: * Formatting.
	  * messages_fatal instead of stop.

2013-06-09 02:21  dstrubbe

	* [r10799] src/poisson/cbsurf.F90, src/td/spectrum.F90: *
	  messages_fatal instead of stop.
	  * Removed unused file.

2013-06-09 02:50  dstrubbe

	* [r10800] src/math/tdfunction.F90: * Fixing memory leak in
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp:
	  f%val was not deallocated for TDF_FOURIER_SERIES or
	  TDF_ZERO_FOURIER if tdf_init_numerical was called without rep
	  present.
	  * TDF_ZERO_FOURIER entirely lacked a case in tdf_end.
	  * Consolidating TDF_FOURIER_SERIES and TDF_ZERO_FOURIER cases in
	  several places.

2013-06-09 03:39  dstrubbe

	* [r10801] src/math/tdfunction.F90: * Removing useless component
	  coeffs to tdf_t.
	  * Including TDF_ZERO_FOURIER in multiply routine.

2013-06-09 04:02  dstrubbe

	* [r10802] src/opt_control/controlfunction.F90: * nullify instead
	  of => NULL.
	  * Checks on calls to controlfunction_mod_init and
	  controlfunction_mod_close.

2013-06-09 04:46  dstrubbe

	* [r10803] src/grid/grid.F90, src/ions/simul_box.F90: The spacing
	  with box_image is now only given a default by the image
	  resolution, but this can be set explicitly too.

2013-06-09 13:02  xavier

	* [r10804] src/states/states_block.F90,
	  src/states/states_block_inc.F90: Removed an unused function.

2013-06-09 14:45  dstrubbe

	* [r10805]
	  testsuite/complex_scaling/01-harmonic-oscillator.complex-lda.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.independent.inp,
	  testsuite/complex_scaling/02-1dwell.lda.inp: Removed illegal
	  options to OutputHow in complex_scaling tests.

2013-06-09 14:52  dstrubbe

	* [r10806]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.complex-lda.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/02-1dwell.lda.inp,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/Makefile.am: Renaming complex scaling
	  test files in accordance with our conventions.

2013-06-09 19:59  xavier

	* [r10807] src/hamiltonian/hamiltonian_inc.F90,
	  src/scf/lcao_inc.F90, src/states/Makefile.am,
	  src/states/density.F90, src/states/states.F90,
	  src/states/states_calc_inc.F90, src/states/states_group.F90,
	  src/states/states_inc.F90, src/system/eigen_rmmdiis_inc.F90,
	  src/system/energy_calc_inc.F90, src/system/exponential.F90,
	  src/system/pert_inc.F90, src/system/subspace_inc.F90,
	  src/td/propagator.F90: Added an object, states_group_t, that
	  contains the blocks from states_t.

2013-06-10 00:36  dstrubbe

	* [r10808] src/math/tdfunction.F90,
	  src/opt_control/controlfunction.F90: * Using units in parsing
	  TDFunction block, and consolidating select statements.
	  * Renaming variables named 'value' which is a Fortran 2003
	  keyword.

2013-06-10 01:22  dstrubbe

	* [r10809] src/opt_control/controlfunction.F90: Fixing the memory
	  leak flagged by valgrind in
	  testsuite/optimal_control/01-asym_doublewell.02-oct_run.inp:
	  since tdf_read initializes a tdf_t object,
	  controlfunction_mod_init was initializing the td_penalty
	  functions twice, without ending them. The solution is to use only
	  tdf_read or tdf_init_numerical, but not both.

2013-06-10 01:31  dstrubbe

	* [r10810] src/basic/json_parser.F90, src/basic/loct.F90,
	  src/basic/messages.F90, src/basic/varinfo.F90,
	  src/system/pert.F90: Renaming variables called 'value', a Fortran
	  2003 keyword.

2013-06-10 01:51  dstrubbe

	* [r10811] src/system/eigen_lobpcg_inc.F90: * More info in journal
	  reference about LOBPCG.
	  * Removing unnecessary (:, :, :) from array references.

2013-06-10 02:29  dstrubbe

	* [r10812] src/math/lalg_basic_blas_inc.F90,
	  src/species/atomic.F90: * Removing unused macro definition.
	  * Making some array arguments intent(inout), where the routine
	  doesn't necessarily set the whole array.

2013-06-10 03:00  dstrubbe

	* [r10813] src/grid/batch_inc.F90, src/grid/derivatives_inc.F90,
	  src/states/states_calc_inc.F90, src/states/states_inc.F90: *
	  Making some arguments in intent(inout) which are often passed as
	  size np_part but only set 1:np.
	  * Making states_orthogonalize_single, complex-scaling part, use
	  lalg_scal instead of loop by hand, for efficiency and to avoid
	  referring to np+1:np_part section unnecessarily.

2013-06-10 16:08  dstrubbe

	* [r10814] testsuite/linear_response/01-casida.test: The libration
	  match needs a still wider tolerance: just failed on hbar test
	  with discrepancy 0.0227.

2013-06-10 18:12  umberto

	* [r10815] src/basic/command_line.F90, src/basic/getopt_f.c,
	  src/math/math.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: *Changed mode 3
	  oct-photoelectron-spectrum so that the z axis is always aligned
	  with the laser polarization. This helps the averaging process
	  when dealing with randomly oriented molecules in the laboratory
	  frame.
	  *Bugfix: apparently the rotation matrix had several flipped
	  signs.. (the reference is
	  http://en.wikipedia.org/wiki/Rotation_matrix for Q_u(\theta) -
	  rotation around a given vector u)

2013-06-10 18:30  umberto

	* [r10816] src/utils/photoelectron_spectrum.F90: default value for
	  pvec

2013-06-10 19:01  dstrubbe

	* [r10817] src/hamiltonian/projector_matrix.F90,
	  src/math/pnfft.F90: * Uses of nullify.
	  * Fixing intent for projector_matrix_deallocate.
	  * write instead of print.

2013-06-10 20:48  dstrubbe

	* [r10818] src/system/output_states_inc.F90: Bugfix: the
	  CurrentThroughPlane output in 2D accidentally used uninitalized
	  outp%plane%origin instead of the appropriate outp%line%origin.
	  Thanks to Vittorio Zecca for reporting the issue.

2013-06-10 21:17  dstrubbe

	* [r10819] src/main/casida.F90,
	  testsuite/linear_response/01-casida.test: New scheme for
	  parallelization in electron-hole pairs for Casida. The previous
	  scheme divided up the columns of the lower diagonal of the
	  matrix, which was not very good since they range in size from 1
	  to N. This also meant the progress bar was fairly misleading. To
	  improve load-balancing, we use a portion of each column, taking
	  advantage of Hermiticity to compute some elements in the lower
	  diagonal and some in the upper diagonal. The portion of each
	  column used is almost the same, differing only by 1 depending on
	  odd/evenness of the matrix size. The results differ very slightly
	  from the old implementation, only insofar as our matrix has small
	  deviations from Hermiticity.

2013-06-10 22:04  dstrubbe

	* [r10820] testsuite/finite_systems_3d/09-spinors.test: Testing
	  external energy too.

2013-06-10 22:46  dstrubbe

	* [r10821] src/grid/mesh_function_inc.F90, src/states/density.F90,
	  src/system/output.F90: * The description of CurrentThroughPlane
	  was too limited.
	  * nullify
	  * Formatting.
	  * Using only the relevant part of line%n.

2013-06-10 22:58  dstrubbe

	* [r10822] src/basic/command_line.F90, src/basic/getopt_f.c,
	  src/math/math.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Reverting umberto's r10815
	  temporarily, until he can address the assertion failures it
	  causes in the photoelectron tests. Umberto, you can use "svn
	  merge -c -10821 ." to undo this change and restore your change,
	  and then apply the fix, when you find it. (I do appreciate
	  putting the unit in the output, too!)

2013-06-10 23:03  dstrubbe

	* [r10823] src/states/states.F90: Bugfix: when running parallel in
	  states with spinors, the reported spin directions <Sx>, <Sy>,
	  <Sz> were scrambled among states and directions, due to incorrect
	  usage of the allgatherv routine. Passing arrays with specified
	  indices AFTER colons will usually not give what you want. The
	  test finite_systems_3d/21-lobpcg.02-spinors.inp had this problem,
	  but unfortunately the spin directions were not being checked.

2013-06-11 03:59  dstrubbe

	* [r10824] src/hamiltonian/epot.F90: An argument seemed to be
	  missing for complex scaling here.

2013-06-11 09:02  acastro

	* [r10825] src/opt_control/controlfunction.F90: Removed an unused
	  subroutine, and corrected the documentation of the
	  OCTLaserEnvelope variable, that changed a few commits ago.

2013-06-11 10:25  umberto

	* [r10826] src/basic/command_line.F90, src/basic/getopt_f.c,
	  src/math/math.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Rolled back r10816 changes
	  + assertion failure fix

2013-06-11 12:29  joseba

	* [r10827] src/grid/boundaries_inc.F90: Correted a deadlock while
	  calculating the Hamiltonian, introduced by myself in r10348

2013-06-11 16:34  dstrubbe

	* [r10830] configure.ac, m4/fortran.m4: Writing my own EGREP macro
	  for Fortran preprocessing, which will hopefully work generally
	  and not cause warnings.
	  
	  My previous attempt at a proper check for FCCPP in the configure
	  script worked but caused a series of warnings in the autconf
	  stage of the form:
	  
	  configure.ac:190: warning: AC_LANG_PREPROC(Fortran) is
	  m4_require'd but is not m4_defun'd
	  configure.ac:190: AC_LANG_PREPROC(Fortran) is required by...
	  autoconf/lang.m4:338: AC_LANG_PREPROC_REQUIRE is expanded from...
	  autoconf/general.m4:2129: AC_EGREP_CPP is expanded from...
	  m4/fortran.m4:134: ACX_FCCPP is expanded from...
	  configure.ac:190: the top level
	  
	  I could not properly do AC_DEFUN([AC_LANG_PREPROC(Fortran)])
	  since there is a bug in older autoconf that was fixed by 2.69,
	  that makes that this cause autconf to crash.
	  (http://osdir.com/ml/sysutils.automake.general/2002-10/msg00018.html)
	  
	  I guess I should have taken more seriously the statement in
	  autconf documentation regarding AC_EGREP_CPP: "The macros
	  described in this section cannot be used for tests in Erlang,
	  Fortran, or Go, since those languages require no preprocessor"
	  ...

2013-06-11 17:20  dstrubbe

	* [r10831] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  testsuite/finite_systems_3d/09-spinors.test: The external energy
	  was wrong for spinors, and would vary depending on factors such
	  as parallelization in states. The origin seems to be that
	  X(hamiltonian_external) was not maintained with corresponding
	  changes for batches as was happening with the very similar
	  X(hamiltonian_base_local). To fix the problem and avoid it in
	  future, both X(hamiltonian_external) and
	  X(hamiltonian_base_local) are now wrappers around a common
	  routine X(hamiltonian_base_local_sub) which is based on
	  X(hamiltonian_base_local) with only minor modifications to
	  generalize it. This changes the values for external energy in a
	  test (which was not being checked until a recent commit).

2013-06-11 17:49  dstrubbe

	* [r10832] testsuite/finite_systems_3d/21-lobpcg.test: Testing
	  energy components and spin directions in 21-lobpcg, that would
	  have detected the problems I recently fixed in r10831 and r10823.
	  Also, fixing mistaken labels for the eigenvalues in the spinor
	  case, which are not up or down.

2013-06-11 19:30  dstrubbe

	* [r10833] src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90: * Fixing variable name for
	  OpenCL compilation.
	  * Removing unused variable.

2013-06-11 19:50  dstrubbe

	* [r10834] testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/21-lobpcg.test: Checking some more
	  things, in particular 'Int[n*v_xc]' which was checked nowhere in
	  the testsuite as far as I can tell.

2013-06-11 22:54  dstrubbe

	* [r10835] src/system/eigensolver.F90: Bugfix: when parallel in
	  k-points, the number of matrix-vector operations, and the number
	  of converged vectors, were not reduced/gathered among processors
	  in the k-points group. As a result, the calculation would almost
	  certainly warn that some states were unconverged, even if they
	  all were.

2013-06-11 23:33  dstrubbe

	* [r10836] testsuite/periodic_systems/05-lithium.test: Adding
	  matches for oct-dielectric-function run.

2013-06-11 23:35  dstrubbe

	* [r10837] src/utils/dielectric_function.F90: Removing possible
	  array temporary.

2013-06-11 23:50  dstrubbe

	* [r10838] src/system/energy_calc.F90,
	  src/system/energy_calc_inc.F90: Consolidating
	  energy_calc_eigenvalues and energy_calc_electronic, which are
	  almost the same, into wrappers around a common subroutine. This
	  makes some small changes to energy_calc_electronic, in favor of
	  the presumably better maintained energy_calc_eigenvalues.

2013-06-12 02:24  dstrubbe

	* [r10839] src/hamiltonian/hamiltonian_inc.F90: Fixing calculation
	  of external potential with OpenCL.

2013-06-12 02:43  dstrubbe

	* [r10840] src/system/energy_calc_inc.F90: Removed unused
	  variables, one of which was being deallocated.

2013-06-12 15:11  dstrubbe

	* [r10841] src/system/energy_calc_inc.F90: Fixing mistake in
	  r10838: the start indices for array 'eigen' need to be specified
	  in the argument declaration.

2013-06-12 15:55  dstrubbe

	* [r10842] m4/fortran.m4: Using $EGREP in the FCCPP m4 macro is not
	  safe unless we can require that a macro to set this variable was
	  previously. However, doing so causes warnings I don't understand.
	  So we'll just use ordinary unqualified 'grep'. Many other macros
	  use plain 'grep' anyway.

2013-06-12 16:14  dstrubbe

	* [r10843] testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp,
	  testsuite/finite_systems_3d/21-lobpcg.test: Removing unnecessary
	  limitation on convergence in a test, to help it pass with ifort
	  13 on Stampede.

2013-06-12 18:23  dstrubbe

	* [r10844] src/states/states.F90, src/system/output_me.F90: Fix to
	  r10838: (z)states_eigenvalues_sum now expects only a local
	  k-point range, and the angular momentum calculation provides just
	  that now. Some calculations parallel in k-points were having a
	  runtime error (from energy_calc_electronic) due to this issue.
	  Incidentally, I doubt the ang mom code worked parallel in states
	  before this.

2013-06-13 04:12  dstrubbe

	* [r10845] testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp:
	  The spinor lobpcg test requires StatesBlockSize to be set so that
	  each processor has only one block, or else if the eigensolver
	  tries more than 10 or so iterations, it will fail to solve the
	  states and give large residuals.

2013-06-13 12:51  marques

	* [r10846] libxc/src/Makefile.am, libxc/src/gga_c_pbe.c,
	  libxc/src/gga_xc_oblyp_d.c, libxc/src/mgga_c_pkzb.c,
	  libxc/src/mgga_x_tpss.c, libxc/src/mgga_xc_otpss_d.c,
	  libxc/src/xc.h: Added a few functionals:
	  
	  *) mgga_x_modtpss : tpss with optimized coefficients
	  *) gga_x_oblyp_d, opwlyp_d, opbe_d, tpss_d : reoptimizations by
	  Grimme to include dispersion terms.

2013-06-13 13:46  marques

	* [r10847] libxc/src/xc.h: Sorry, small mistake in definition.

2013-06-14 21:34  dstrubbe

	* [r10848] src/states/Makefile.am: Fixing dependency.

2013-06-14 22:34  dstrubbe

	* [r10849] m4/fortran.m4: Making FCCPP show up on the './configure
	  --help' list of "Some influential environment variables".

2013-06-14 23:07  dstrubbe

	* [r10850] src/system/eigen_arpack.F90, src/system/output_me.F90,
	  src/system/preconditioners.F90: * Fixing default for
	  Preconditioner.
	  * Making parameters capitalized.
	  * Improving variable documentation.
	  * Undoing my mistaken comment about dimensions of angular
	  momentum output.
	  * Removing unnecessary colons.
	  * Moving ARPACK eigensolver options to their own category.

2013-06-15 00:16  dstrubbe

	* [r10851] src/math/splines.F90: Bugfix: FilterPotentials =
	  filter_TS caused an uninitialized value to be returned for
	  spline_cutoff_radius and used in the initialization of the
	  pseudopotential. This is because 'oct_spline_fit' was used within
	  splines.F90 to initialize spline objects, rather than the wrapper
	  'spline_fit', which also includes initialization of x_limit.
	  * Now, the wrapper is used everywhere, which simplifies the call
	  anyway.
	  * x_limit is initialized to illegal values, and then we assert
	  they are ok in the routines that use x_limit. ('ASSERT' makes
	  spline_cutoff_radius no longer pure. I don't see any particular
	  reason it was pure though.)

2013-06-15 02:23  dstrubbe

	* [r10854] src/system/output_me_inc.F90: Bugfix: for
	  OutputMatrixElements = one_body, an array was too small, given
	  that a derivative was being applied to it, causing a possible
	  segmentation fault.

2013-06-15 02:24  dstrubbe

	* [r10855] src/grid/derivatives_inc.F90: Inserting an assertion for
	  derivatives to make sure the array is large enough for the
	  boundary conditions to be handled.

2013-06-16 03:35  dstrubbe

	* [r10856] src/math/spline_filter.F90, src/species/ps.F90: *
	  Doxygen comments.
	  * PUSH/POP's.
	  * Formatting.

2013-06-16 21:43  dstrubbe

	* [r10857] configure.ac, doc/Makefile.am,
	  doc/oct-run_testsuite.pod, doc/oct-run_testsuite.sh.pod,
	  testsuite, testsuite/Makefile.am, testsuite/oct-run_testsuite.in,
	  testsuite/oct-run_testsuite.sh.in: Renaming oct-run_testsuite to
	  oct-run_testsuite.sh to make clear that it is a shell script. I
	  think people rarely use this directly, so this shouldn't be a
	  very disruptive change.

2013-06-17 04:55  dstrubbe

	* [r10858] m4/check_cl.m4: The OpenCL m4 macro is unnecessarily
	  complicating matters by putting X11 libraries on the link lines
	  in the tests, even though they are not necessary for octopus to
	  link with OpenCL, as far as I can tell.

2013-06-17 05:05  dstrubbe

	* [r10859] libxc/m4/acx.m4, libxc/m4/fortran.m4: Renaming libxc m4
	  macro in accordance with name change in octopus since it was
	  copied in. This is in preparation for merging recent changes in
	  octopus file to libxc.

2013-06-17 15:05  dstrubbe

	* [r10860] libxc/configure.ac, libxc/m4/fortran.m4: Updating libxc
	  build system from octopus changes:
	  * Replaced obsolete AC_TRY_LINK_FUNC with AC_LINK_IFELSE.
	  * Removed AC_LANG_PREPROC(Fortran) and imported new ACX_FCCPP and
	  its dependency ACX_GREP_FCCPP.
	  Now libxc will make sure that a proper preprocessor for Fortran
	  is available.

2013-06-17 16:21  dstrubbe

	* [r10861] testsuite/complex_scaling/02-1dwell.test: Fixing
	  mistaken title of test.

2013-06-17 16:51  dstrubbe

	* [r10862] testsuite/oct-run_testsuite.sh.in: Enhancement to job
	  parallelism in testsuite (OCT_TEST_NJOBS): rather than waiting
	  until the first job in the queue is done to write results and
	  queue a new job, we will check whether any of the jobs in the
	  queue are done. This improves load balancing, by keeping the
	  queue full even while one long job runs; make sure all tests that
	  are done have their results written, giving more info even the
	  testsuite run is cut off for some reason; and makes output more
	  frequent, helping to keep buildslave runs from timing out.

2013-06-17 21:28  dstrubbe

	* [r10863]
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.test: *
	  Removing unrealistically low convergence criterion.
	  * Adding matches for energy components, which are not otherwise
	  checked for curvilinear tests, I think.

2013-06-17 22:25  dstrubbe

	* [r10864]
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test,
	  testsuite/finite_systems_3d/18-current.01-current.inp,
	  testsuite/finite_systems_3d/18-current.test,
	  testsuite/finite_systems_3d/Makefile.am: Merged tested features
	  from finite_systems_3d/18-current.test into
	  finite_systems_3d/13-full_potential_hydrogen.01-gs.inp.
	  
	  The test finite_systems_3d/18-current takes a long time, since it
	  cannot do LCAO for more than one state because there is only one
	  bound state for its H psf pseudopotential. SCF was converging
	  just by chance, or not at all in 200 iterations. We can do a
	  better job emulating the paper this test refers to by testing
	  current and induced magnetic field from a full-potential H
	  calculation, which we have already. Then, LCAO is usable and SCF
	  converges quickly. That test does not use curv_gygi, but that
	  feature is tested already in 02-curvilinear, so I don't see a
	  particular need to have it involved in this test.

2013-06-17 22:41  dstrubbe

	* [r10865] configure.ac, src/basic/loct.F90, src/basic/oct_f.c: *
	  Two routines (oct_nanosleep and get_memory_usage) in oct_f.c
	  contained #ifdef linux. This was presumably due to a concern that
	  routines inside that part might not exist on other platforms. The
	  more appropriate procedure is just to check whether the desired
	  routines (nanosleep, sysconf, getpid) are available, which we are
	  already doing in the configure script for other routines. These
	  are all available on MacOS, for example, so it is unnecessarily
	  restrictive to disable usage if not Linux.
	  * Documentation and clearer name for (l)oct_nanosleep arguments.
	  I think they were copied by false analogy from gettimeofday:
	  there usec means microseconds, but here it is nanoseconds.
	  * oct_nanosleep can just pass NULL for the rem argument, since we
	  are not going to use the possible return value there anyway.

2013-06-17 23:05  dstrubbe

	* [r10866] src/states/states.F90: Reclassifying the variables
	  StatesOrthogonalization to a place that makes more sense to me.

2013-06-18 00:14  dstrubbe

	* [r10867] src/basic/mpi_lib_inc.F90: Adding an assertion to make
	  sure there is room for the data being received in
	  lmpi_gen_allgatherv.

2013-06-18 15:05  marques

	* [r10868] libxc/src/hyb_gga_xc_b3lyp.c: Added a revised B3LYP
	  functional.

2013-06-18 18:51  dstrubbe

	* [r10869] src/scf/scf.F90: Clean stop message resulting from 'go'
	  mode need only be written by root node.

2013-06-18 20:36  dstrubbe

	* [r10870] src/system/eigen_mg_inc.F90: Bugfix: The multigrid
	  eigensolver did not deallocate anything.

2013-06-18 20:59  dstrubbe

	* [r10871] src/system/eigen_mg_inc.F90, src/system/eigensolver.F90:
	  * Declaring Eigensolver = multigrid experimental, in accordance
	  with the variable reference, and the fact that it doesn't seem to
	  work (and is not in the testsuite at all).
	  * Providing proper debug output from multigrid eigensolver.
	  * Fixing incorrect reference to vol_pp which would cause a seg
	  fault except for curvilinear coordinates.

2013-06-18 22:13  dstrubbe

	* [r10872] src/system/eigen_arpack_inc.F90,
	  src/system/eigen_lobpcg_inc.F90, src/system/eigen_plan_inc.F90,
	  src/system/eigen_rmmdiis_inc.F90: * Adding debug modes for
	  LOBPCG, PLAN, and RMMDIIS eigensolvers.
	  * Allocating 'eigen' once for all the various uses in RMMDIIS.
	  * Removed unused (but allocated and deallocated) variables in
	  rmmmdiis_min.
	  * Typo.
	  * Adding missing ID line.

2013-06-19 16:59  dstrubbe

	* [r10873] testsuite/oct-run_testsuite.sh.in: Bugfix to r10862: my
	  enhanced job parallelism in the testsuite broke the ability to
	  count job failures properly, because the return status of a sleep
	  command was being used rather than the return status of the call
	  to oct-run_regression_test.pl.

2013-06-19 17:17  dstrubbe

	* [r10874] testsuite/oct-run_testsuite.sh.in: Fix to ordering of
	  lines in oct-run_testsuite.sh, for newer version of autoconf. The
	  'local run' option wouldn't work because the default testsuite
	  path was missing the beginning.

2013-06-19 17:20  dstrubbe

	* [r10875] external_libs/metis-5.1/GKlib,
	  external_libs/metis-5.1/libmetis: Older versions of svn do not
	  ignore *.a by default.

2013-06-19 17:26  dstrubbe

	* [r10876] testsuite/components/01-derivatives_1d.test: ifort 11.1
	  needs a slightly looser tolerance on
	  testsuite/components/01-derivatives_1d.01-inp.

2013-06-19 18:48  dstrubbe

	* [r10877] src/poisson/solver_1d_solve_inc.F90,
	  src/states/states_group.F90, src/system/preconditioners_inc.F90,
	  src/system/subspace_inc.F90, src/td/ob_propagator.F90,
	  src/td/pes_mask.F90, src/td/propagator.F90: Removing unused
	  variables and arguments.

2013-06-19 23:28  dstrubbe

	* [r10878] src/states/states.F90: Checking that the number of rows
	  in block Occupations is correct, and that the number of columns
	  is the same in all rows, to give a more helpful message than the
	  assertion failure that would otherwise result from
	  parse_block_float. Also, made documentation clearer about these
	  requirements.

2013-06-20 01:12  dstrubbe

	* [r10879] testsuite/functionals/02-xc_2d.lda_prm.inp: Removing
	  spurious extra line in Occupations block for a test which is not
	  spin-polarized.

2013-06-20 02:43  dstrubbe

	* [r10880] src/system/output_me.F90: Removing if-conditions that
	  handle a situation that can never happen.

2013-06-21 19:20  dstrubbe

	* [r10886] testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp: The derivatives
	  tests do not use the Coordinates and Species, but something must
	  be present anyway for the initialization to proceed without an
	  error. However, it would be better to provide something that at
	  least would be acceptable for an ordinary run. Thus, I am putting
	  a dummy user-defined species instead of the Na pseudopotential
	  for the 1D and 2D runs.

2013-06-21 19:25  dstrubbe

	* [r10887] src/grid/double_grid_apply_inc.F90,
	  src/ions/geometry.F90, src/species/species.F90: Notes and error
	  message regarding pseudopotentials only being usable in 3D. Also,
	  adding an assertion that will be triggered if double grid is
	  called other than in 3D, which is assumed extensively in those
	  routines.

2013-06-23 01:55  dstrubbe

	* [r10888] src/basic/messages.F90: When messages_fatal is called
	  with only_root_writes = .true., it is possible for a non-root
	  process to call MPI_Abort before root has written the error
	  message, so it is never printed. This seems to happen
	  particularly when running directly on the command line. To avoid
	  this, the other processes will wait, and then write it themselves
	  if root does not. Also this will avoid missing messages if
	  only_root_writes is used mistakenly for an error case that does
	  not happen on root.

2013-06-23 17:41  dstrubbe

	* [r10889] src/basic/messages.F90: 'input_error' should be
	  implemented via 'messages_fatal', for consistency, and to take
	  advantage of messages_fatal's writing of the stack trace and new
	  provision for making sure message gets written before abort.

2013-06-23 18:11  dstrubbe

	* [r10890] src/basic/multicomm.F90, src/system/output_me_inc.F90: *
	  Offering another place to look for multicomm problems.
	  * Blocking some OutputMatrixElements calculations that are
	  incompatible with states parallelization.

2013-06-23 18:19  dstrubbe

	* [r10891] src/states/states_calc_inc.F90,
	  src/system/output_me.F90,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test:
	  Bugfix: OutputMatrixElements = momentum or angular_momentum
	  suffered from a wide array of problems, too many to bother
	  listing. I hope no one was using them, because any results were
	  surely wrong. Now they work, and are tested.

2013-06-23 19:15  dstrubbe

	* [r10892] src/system/output_me.F90: Fixing compilation error in
	  serial.

2013-06-23 20:00  dstrubbe

	* [r10893] src/td/pes_mask_out_inc.F90, src/td/spectrum.F90:
	  Getting rid of two array temporaries.

2013-06-24 15:36  dstrubbe

	* [r10894] testsuite/periodic_systems/09-etsf_io.test: Moving the
	  ETSF_IO test to the long run only.

2013-06-24 16:19  dstrubbe

	* [r10895] src/system/forces.F90: Removing unused modules.

2013-06-24 20:02  dstrubbe

	* [r10896] src/grid/mesh.F90, src/grid/mesh_partition.F90,
	  src/sternheimer/kdotp.F90,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test: *
	  Correction to comment about orbital in test.
	  * Fixing format statement to avoid ****** output.
	  * Unused variable.
	  * More precision in output of mesh cutoff.

2013-06-24 20:05  dstrubbe

	* [r10897] external_libs/bpdn/bpdn.f90,
	  external_libs/newuoa/newuoa_mod.f90: * Fixing intent(out) :: y to
	  intent(inout) in bpdn interface for dgemv, as we correctly have
	  in the main code.
	  * Doxygen comments.
	  * Replacing non-standard extension 'dfloat' with equivalent
	  'dble' in newuoa.

2013-06-25 03:41  dstrubbe

	* [r10898] src/states/modelmb_density_matrix_inc.F90,
	  src/states/states_calc_inc.F90: * Removing (excessively large)
	  explicit argument array bound.
	  * Using optional_default.
	  * Adding extra checks in states_orthogonalize_single.

2013-06-25 04:53  dstrubbe

	* [r10899] src/math/lalg_adv_lapack_inc.F90: Fixing intents in
	  accordance with the actual LAPACK routines.

2013-06-25 15:20  dstrubbe

	* [r10900] src/grid/mesh.F90, src/ions/symmetries_finite.c: *
	  Typos.
	  * Using float constant for float arithmetic.

2013-06-25 15:41  dstrubbe

	* [r10901] src/math/sgfft.F90: sgfft specifies the maximal size for
	  argument 'trig' which means uninitialized or out-of-bounds data
	  might be copied when the size is actually smaller. Since this is
	  a module, there is no need to specify the size anyway.

2013-06-25 15:58  dstrubbe

	* [r10902] src/math/Makefile.am: Unnecessary dependency.

2013-06-25 16:13  askhl

	* [r10903] src/states/states_dim.F90: add comma to achieve what is
	  presumably the correct meaning

2013-06-25 17:14  dstrubbe

	* [r10904] src/scf/scf.F90: Preventing some unlikely divide-by-zero
	  cases for convergence criteria.

2013-06-25 18:08  dstrubbe

	* [r10905] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90, src/math/blas.F90,
	  src/math/dablas.c: Creating C wrappers for calling dgemm with
	  complex values from hamiltonian_base, so we can actually use
	  blas_m and have interfaces. This is along the same lines as the
	  existing "dablas" wrappers for scaling a complex vector by a real
	  scalar.

2013-06-25 18:18  dstrubbe

	* [r10906] src/math/blas.F90: Forgotten part of interface in
	  previous commit.

2013-06-25 18:46  dstrubbe

	* [r10907] src/hamiltonian/hamiltonian_base_inc.F90,
	  src/math/blas.F90: ifort and other compilers objected to previous
	  interface form for zdgemm. Now, unified into blas_gemm, which
	  seems satisfactory.

2013-06-25 19:22  dstrubbe

	* [r10908] src/grid/fourier_shell.F90, src/system/output.F90,
	  src/system/output_etsf_inc.F90: Correction to generation of
	  Fourier shell: in r8674 I added a "convention" as to whether to
	  include -N/2 or N/2 in the shell. Well, to follow how plane-wave
	  codes do it, we should actually include neither of them.

2013-06-25 19:49  dstrubbe

	* [r10909] testsuite/oct-run_testsuite.sh.in: Fix to r10873 (job
	  parallelism in testsuite): the check for the status of a test via
	  the return code of its pid could fail, because it was possible
	  for a new process with the same pid to have started before the
	  check occurred. This happened on the chum_x86_64_pgi_test slave,
	  producing error message:
	  
	  ./oct-run_testsuite.sh: line 123: wait: pid 23407 is not a child
	  of this shell
	  
	  The new approach is to capture the return code into a variable
	  named after the test, which will then be read when the job has
	  finished.

2013-06-26 13:49  dstrubbe

	* [r10910] testsuite/oct-run_testsuite.sh.in,
	  testsuite/periodic_systems/09-etsf_io.test: * Updating ETSF_IO
	  wfn file size in light of r10908.
	  * Removing debugging output left in r10909.

2013-06-26 16:46  askhl

	* [r10911] libxc/src/lda_c_2d_amgb.c: spelling

2013-06-27 01:07  dstrubbe

	* [r10912] src/ions/kpoints.F90, src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90: * Removing some debugging
	  output.
	  * Adding a warning if KPointsGrid is not set, when writing
	  BerkeleyGW.
	  * Allowing KPointsGrid to be set even if KPoints or
	  KPointsReduced is used to specify the k-points. This has no
	  effect (I hope!) except that BerkeleyGW output needs the values
	  from there.

2013-06-27 03:37  dstrubbe

	* [r10913] testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp: We are not testing
	  TDOutput = populations anywhere. Let's.

2013-06-27 15:16  dstrubbe

	* [r10914] src/states/states.F90, src/td/td_write.F90: For TDOutput
	  = td_occup or populations, we copy the whole states object, then
	  deallocate a lot of it, then refill it. It would be more
	  efficient to just refrain from copying the parts we don't need.
	  In particular, before we needed memory available for all the
	  states again, whereas now, if TDProjStart > 1, we will only need
	  memory for the number of states we will actually use.

2013-06-27 15:35  dstrubbe

	* [r10915] src/states/states.F90: Fix to last commit:
	  states_init_block needs to be in the exclude section of
	  states_copy too.

2013-06-27 18:30  dstrubbe

	* [r10916] src/states/states.F90: Another fix to r10914/r10915: the
	  original order of things in states_copy must be preserved.

2013-06-27 18:40  dstrubbe

	* [r10917] src/system/forces_inc.F90, src/system/output_me_inc.F90:
	  * Fixing an intent.
	  * Comments on how to implement OutputMatrixElements for parallel
	  in states.

2013-06-27 19:04  dstrubbe

	* [r10918] src/states/excited_states.F90, src/td/td_write.F90: *
	  Bugfix: condition for when to read TDProjStateStart was
	  accidentally reversed in r3597 (6 yrs ago!).
	  * Improvement of documentation regarding TDOutput = td_occup,
	  populations.

2013-06-27 20:38  dstrubbe

	* [r10919] src/states/states_io.F90: We should always write the
	  k-points for periodic systems.

2013-06-28 10:29  acastro

	* [r10920]
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.test: Removed the
	  "EigenSolverMaxIter = 1000" line, from some test input files,
	  since this is not a recommended value and in fact the code emits
	  a warning if
	  it finds it.

2013-06-28 18:16  dstrubbe

	* [r10921] testsuite/buildbot_query.pl: Adding tool to look up the
	  values reported by the buildslaves for a particular match. This
	  can be helpful, for example, in choosing an appropriate
	  tolerance.

2013-06-28 21:01  dstrubbe

	* [r10923] src/scf/scf.F90: Clarification to documentation.

2013-06-30 18:02  xavier

	* [r10924] src/grid/batch.F90: Bugfix: CL buffer had the wrong
	  mode.

2013-06-30 18:07  xavier

	* [r10925] src/grid/batch.F90: Reverted an accidental change in my
	  last commit.

2013-06-30 18:54  xavier

	* [r10926] src/grid/cube_function_inc.F90: Bugfix: A CL buffer was
	  initialized with the wrong mode.
	  
	  With this changes Octopus appears to run correctly on the Intel
	  Xeon Phi.

2013-06-30 19:02  xavier

	* [r10927] src/basic/opencl.F90, src/basic/opencl_inc.F90: * Added
	  a check for the mode of CL buffers.
	  * Removed a CL compilation flag that causes problem with the Xeon
	  Phi.

2013-07-01 13:15  marques

	* [r10928] libxc/src/gga_x_c09x.c,
	  libxc/testsuite/xc-consistency.c: *) Corrected vug in c09x as
	  reported by Lampros Andrinopoulos
	  *) Corrected bug in xc-consistency

2013-07-01 13:20  marques

	* [r10929] libxc/src/util.c: Making sure we never divide by zero.
	  Reported by Vittorio Zecca and David.

2013-07-01 18:43  xavier

	* [r10930] src/basic/opencl.F90: * The OpenCL code now defines the
	  SHARED_MEM preprocessor macro. It is
	  defined for GPUs and undefined for accelerators and CPUs.
	  
	  * The type of processor is not printed.

2013-07-01 19:00  xavier

	* [r10931] share/opencl/operate.cl, src/grid/nl_operator_inc.F90:
	  Added non-shared memory version of the non-local operator.

2013-07-02 01:27  xavier

	* [r10932] src/basic/opencl.F90: Fixed non-opencl compilation.

2013-07-02 10:58  acastro

	* [r10933] testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-oct_long.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp: Changed some
	  small things in some test inputs to avoid warnings.

2013-07-02 13:16  xavier

	* [r10934] share/opencl/operate.cl, src/grid/derivatives_inc.F90: *
	  Added an initial iteration to the derivatives test to avoid
	  benchmarking initializations.
	  * Registerization of a variable in the operate kernel.

2013-07-02 18:14  acastro

	* [r10935] testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/10-current.test: Changed little details
	  in tests input files to avoid the emission of warnings.

2013-07-02 19:37  acastro

	* [r10936] src/opt_control/controlfunction.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_global.F90,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/Makefile.am: Eliminated a rarely used
	  feature (using "mixing" for the optimal control
	  algorithms) that complicates the code.

2013-07-03 16:53  acastro

	* [r10940] src/opt_control/Makefile.am,
	  src/opt_control/check_input_inc.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.02-oct.inp: Some clean-up of
	  the optimal control code (current & density targets)

2013-07-03 18:18  xavier

	* [r10941] src/grid/Makefile.am, src/grid/hilbert.c,
	  src/grid/mesh_init.F90: A new feature: Ordering of grid points
	  based on a Hilbert space
	  filling curve.

2013-07-03 19:59  xavier

	* [r10942] src/grid/hilbert.c, src/grid/mesh_init.F90: Increased
	  the size of the hilbert curve index to 64 bits.

2013-07-03 20:04  acastro

	* [r10943] src/opt_control/Makefile.am, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_velocity_inc.F90: Some more cleaning of
	  the oct part of the code.

2013-07-03 20:48  xavier

	* [r10944] src/grid/batch_ops_inc.F90: Bugfix: a CL buffer had the
	  wrong intent.

2013-07-03 22:37  acastro

	* [r10945] src/opt_control/Makefile.am, src/opt_control/target.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90: Added one file for
	  each one of the optimal control targets.

2013-07-04 03:17  xavier

	* [r10946] src/grid/hilbert.c, src/grid/mesh_init.F90: Added a
	  Hilbert 2D mesh order.

2013-07-04 08:21  acastro

	* [r10947] testsuite/optimal_control/01-asym_doublewell.test:
	  Increased the tolerance of a test that seems to be rather
	  sensitive to
	  machine/compiler/etc. changes.

2013-07-04 19:52  acastro

	* [r10948] src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/opt_control/target_velocity_inc.F90,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp: Removed an
	  unnecessary variable ("OCTMoveIons"), there are too many
	  variables... Also, more splitting of the opt_control_target_m
	  module.

2013-07-05 14:22  umberto

	* [r10949] src/basic/command_line.F90, src/basic/getopt_f.c,
	  src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Added feature to
	  prooct-photoelectron-spectrum that allow to plot velocity map
	  slices of the photoelectron-spectrum integrated over an angle.
	  This should help direct comparison with experimental velocity-map
	  images that are reconstructed by imposing cylindrical symmetry
	  around the laser polarization axis.

2013-07-06 20:01  xavier

	* [r10950] share/opencl/operate.cl, src/grid/nl_operator.F90,
	  src/grid/nl_operator_inc.F90: Added a new opencl non-local
	  operator, it does not use a map to get the neighbors indexes.

2013-07-07 22:22  xavier

	* [r10951] share/opencl/operate.cl: Improvements for the nomap
	  operate.

2013-07-09 17:36  dstrubbe

	* [r10952] src/opt_control/target.F90: Typo.

2013-07-09 17:40  dstrubbe

	* [r10953] src/scf/scf.F90: Clarification about MaximumIter = 0.

2013-07-09 17:42  xavier

	* [r10954] src/td/spectrum.F90: Removed some output in the
	  calculation of the propagation spectrum
	  introduced in [10074].

2013-07-09 21:46  acastro

	* [r10955] src/hamiltonian/species_pot.F90,
	  src/species/species.F90,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/08-velocities.test: Added the
	  "soft-Coulomb" potential as a new species type. Of couse the
	  "user
	  defined" type could be used to create soft-Coulomb potentials,
	  but then it is
	  terribly slow to do dynamics moving the ions, since the parsing
	  of the user
	  defined expressions is very slow. Since soft-Coulomb potentials
	  are used quite
	  often, I think they deserve their own type.
	  
	  [Perhaps a better solution would be to improve the parser to make
	  it faster,
	  but this is not an easy task]

2013-07-09 23:17  dstrubbe

	* [r10956] src/td/td_write.F90: Valgrind and compiler debugging
	  flags do not consider it acceptable to pass null pointers. Thus,
	  we will pass a whole object containing the possibly null pointer.

2013-07-10 07:59  micael

	* [r10957] libxc/NEWS, libxc/PACKAGING, libxc/configure.ac: *
	  Tagging version 2.0.2
	  * Updated ChangeLog, NEWS, etc.

2013-07-10 18:41  dstrubbe

	* [r10958] src/grid/curv_gygi.F90, src/grid/curv_modine.F90,
	  src/states/states_io.F90: Moving to the new style with units for
	  parse_float in a few places.

2013-07-10 18:54  dstrubbe

	* [r10959] src/grid/curv_modine.F90: Documenting secret variables.

2013-07-10 19:08  dstrubbe

	* [r10960] src/main/geom_opt.F90, src/main/phonons_fd.F90: *
	  Another place to use the new unit parsing call.
	  * Default for GOMinimumMove will be zero except for simplex
	  method. Using only the forces as convergence criterion seems to
	  make more sense for the other methods.

2013-07-10 21:28  dstrubbe

	* [r10961] src/basic/io.F90: Bugfix: an error was not sent to
	  standard error.

2013-07-10 21:33  dstrubbe

	* [r10962] src/grid/curv_modine.F90: Better documentation for
	  curv_modine.

2013-07-10 23:08  dstrubbe

	* [r10965] testsuite/photo_electron/05-pfft-h3d.01-gs.inp,
	  testsuite/photo_electron/05-pfft-h3d.02-mask.inp,
	  testsuite/photo_electron/05-pfft-h3d.03-ba.inp,
	  testsuite/photo_electron/05-pfft.01-gs.inp,
	  testsuite/photo_electron/05-pfft.02-mask.inp,
	  testsuite/photo_electron/05-pfft.03-ba.inp,
	  testsuite/photo_electron/05-pfft.test,
	  testsuite/photo_electron/Makefile.am: Rationalizing filenames.

2013-07-10 23:16  dstrubbe

	* [r10966] src/states/states_calc_inc.F90: Making states_matrix a
	  little more compatible with parallelization, and the possibility
	  of not using all the states.

2013-07-11 02:00  dstrubbe

	* [r10967] src/states/states_calc_inc.F90: * Fixing compilation
	  error from previous commit.
	  * Go up to st_end instead of nst, in case they differ.

2013-07-11 02:30  xavier

	* [r10968] src/basic/io_binary.c, src/basic/oct_f.c,
	  src/basic/write_iter_low.c, src/include/Makefile.am,
	  src/include/fortran_types.h, src/math/dablas.c,
	  src/math/fftw_low.c, src/math/oct_gsl_f.c, src/math/ylm.c: Added
	  a C include file 'fortran_types.h' that defines the types fint,
	  fint4 and fint8, equivalent to the Fortran integer, integer(4)
	  and
	  integer(8) types, respectively. (I still have to implement the
	  autoconf checks required to define the types.)
	  
	  C code that defines Fortran functions (using FC_FUNC) should
	  always
	  use these types in the interface to ensure compatibility with
	  8-byte
	  Fortran integers.

2013-07-11 02:49  dstrubbe

	* [r10969] src/basic/oct_f.c: Removing spurious argument.

2013-07-11 10:34  umberto

	* [r10970] src/math/math.F90: Reimplemented buggy rotation matrix

2013-07-11 10:36  umberto

	* [r10971] src/basic/getopt_f.c, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Integrate velocity map
	  along kx, ky, kz in order to directly compare with experimental
	  raw velocity map images

2013-07-11 12:17  umberto

	* [r10972] src/td/pes_mask_out_inc.F90: wrong angle

2013-07-11 12:50  micael

	* [r10973] libxc/src/gga_c_am05.c, libxc/src/gga_c_ft97.c,
	  libxc/src/gga_c_lm.c, libxc/src/gga_c_lyp.c,
	  libxc/src/gga_c_op.c, libxc/src/gga_c_optc.c,
	  libxc/src/gga_c_p86.c, libxc/src/gga_c_pbe.c,
	  libxc/src/gga_c_pw91.c, libxc/src/gga_c_sogga11.c,
	  libxc/src/gga_c_tca.c, libxc/src/gga_c_wi.c,
	  libxc/src/gga_c_wl.c, libxc/src/gga_k_dk.c,
	  libxc/src/gga_k_ol1.c, libxc/src/gga_k_ol2.c,
	  libxc/src/gga_k_pearson.c, libxc/src/gga_k_tflw.c,
	  libxc/src/gga_x_2d_b86.c, libxc/src/gga_x_2d_b86_mgc.c,
	  libxc/src/gga_x_2d_b88.c, libxc/src/gga_x_2d_pbe.c,
	  libxc/src/gga_x_airy.c, libxc/src/gga_x_am05.c,
	  libxc/src/gga_x_b86.c, libxc/src/gga_x_b86_mgc.c,
	  libxc/src/gga_x_b88.c, libxc/src/gga_x_bayesian.c,
	  libxc/src/gga_x_bpccac.c, libxc/src/gga_x_c09x.c,
	  libxc/src/gga_x_dk87.c, libxc/src/gga_x_ft97.c,
	  libxc/src/gga_x_g96.c, libxc/src/gga_x_herman.c,
	  libxc/src/gga_x_hjs.c, libxc/src/gga_x_htbs.c,
	  libxc/src/gga_x_ityh.c, libxc/src/gga_x_kt.c,
	  libxc/src/gga_x_lb.c, libxc/src/gga_x_lg93.c,
	  libxc/src/gga_x_mpbe.c, libxc/src/gga_x_n12.c,
	  libxc/src/gga_x_optx.c, libxc/src/gga_x_pbe.c,
	  libxc/src/gga_x_pbea.c, libxc/src/gga_x_pw86.c,
	  libxc/src/gga_x_pw91.c, libxc/src/gga_x_rpbe.c,
	  libxc/src/gga_x_sogga11.c, libxc/src/gga_x_ssb_sw.c,
	  libxc/src/gga_x_vmt.c, libxc/src/gga_x_wc.c,
	  libxc/src/gga_x_wpbeh.c, libxc/src/gga_xc_1w.c,
	  libxc/src/gga_xc_b97.c, libxc/src/gga_xc_edf1.c,
	  libxc/src/gga_xc_oblyp_d.c, libxc/src/gga_xc_th.c,
	  libxc/src/hyb_gga_xc_b1wc.c, libxc/src/hyb_gga_xc_b3lyp.c,
	  libxc/src/hyb_gga_xc_b97.c, libxc/src/hyb_gga_xc_cam_b3lyp.c,
	  libxc/src/hyb_gga_xc_hse.c, libxc/src/hyb_gga_xc_o3lyp.c,
	  libxc/src/hyb_gga_xc_pbeh.c, libxc/src/hyb_mgga_xc_m05.c,
	  libxc/src/lda_c_1d_csc.c, libxc/src/lda_c_1d_loos.c,
	  libxc/src/lda_c_2d_amgb.c, libxc/src/lda_c_2d_prm.c,
	  libxc/src/lda_c_gombas.c, libxc/src/lda_c_hl.c,
	  libxc/src/lda_c_ml1.c, libxc/src/lda_c_pw.c,
	  libxc/src/lda_c_pz.c, libxc/src/lda_c_rc04.c,
	  libxc/src/lda_c_rpa.c, libxc/src/lda_c_vwn.c,
	  libxc/src/lda_c_wigner.c, libxc/src/lda_k_tf.c,
	  libxc/src/lda_x.c, libxc/src/lda_x_1d.c, libxc/src/lda_x_2d.c,
	  libxc/src/lda_xc_teter93.c, libxc/src/mgga_xc_otpss_d.c: * Fixed
	  warnings about missing field initializers.

2013-07-11 13:19  micael

	* [r10975] libxc/src/gga_x_kt.c, libxc/src/gga_x_ssb_sw.c,
	  libxc/src/gga_x_vmt.c, libxc/src/lda_c_2d_prm.c,
	  libxc/src/mgga_c_pkzb.c, libxc/src/mgga_x_pkzb.c: * Removed
	  unused variables in libxc.

2013-07-11 14:39  dstrubbe

	* [r10977] src/main/casida_inc.F90: Resolving matter of degenerate
	  perturbation theory for Petersilka forces.

2013-07-11 15:28  micael

	* [r10978] COPYING, Makefile.am, build/Makefile.am,
	  build/mk_functionals_list.pl, build/mk_varinfo.pl,
	  build/var2html.pl, configure.ac, doc/Makefile.am,
	  doc/doxygen/create_documentation.sh, doc/html/Makefile.am,
	  doc/html/icons/Makefile.am, doc/html/js/Makefile.am,
	  doc/html/vars/Makefile.am, doc/pdf/Makefile.am,
	  external_libs/Makefile.am, external_libs/bpdn/Makefile.am,
	  external_libs/fortrancl/Makefile.am,
	  external_libs/fortrancl/string_f.h,
	  external_libs/metis-5.1/GKlib/Makefile.am,
	  external_libs/metis-5.1/GKlib/getopt.c,
	  external_libs/metis-5.1/GKlib/gk_mksort.h,
	  external_libs/metis-5.1/GKlib/gkregex.c,
	  external_libs/metis-5.1/GKlib/gkregex.h,
	  external_libs/metis-5.1/Makefile.am,
	  external_libs/metis-5.1/include/Makefile.am,
	  external_libs/metis-5.1/libmetis/Makefile.am,
	  external_libs/newuoa/Makefile.am,
	  external_libs/qshep/Makefile.am,
	  external_libs/slatec/Makefile.am, liboct_parser/Makefile.am,
	  liboct_parser/grammar.y, liboct_parser/gsl_userdef.c,
	  liboct_parser/gsl_userdef.h, liboct_parser/liboct_parser.h,
	  liboct_parser/parse.c, liboct_parser/parse_exp.c,
	  liboct_parser/parser_f.c, liboct_parser/string_f.h,
	  liboct_parser/symbols.c, liboct_parser/symbols.h,
	  libxc/Makefile.am, libxc/build/Makefile.am, libxc/configure.ac,
	  libxc/m4/fc_integer.m4, libxc/m4/fcflags.m4, libxc/m4/fortran.m4,
	  libxc/src/Makefile.am, libxc/src/libxc_master.F90,
	  libxc/src/string_f.h, libxc/testsuite/Makefile.am, m4/arch.m4,
	  m4/arpack.m4, m4/fc_command_line.m4, m4/fc_f2003_c_ptr.m4,
	  m4/fc_integer.m4, m4/fc_sizeof.m4, m4/fcflags.m4, m4/fft.m4,
	  m4/fortran.m4, m4/libfm.m4, m4/metis.m4, m4/nfft.m4,
	  m4/octopus_compilation_info.m4, m4/openmp.m4, m4/papi.m4,
	  m4/parmetis.m4, m4/parpack.m4, m4/pfft.m4, m4/pnfft.m4,
	  m4/pspio.m4, scripts/Makefile.am, share/Makefile.am,
	  share/PP/HGH/Makefile.am, share/PP/Makefile.am,
	  share/PP/PSF/Makefile.am, share/PP/UPF/Makefile.am, share/logo,
	  share/opencl/Makefile.am, share/opencl/axpy.cl,
	  share/opencl/boundaries.cl, share/opencl/cl_complex.h,
	  share/opencl/cl_global.h, share/opencl/cl_rtype.h,
	  share/opencl/convert.cl, share/opencl/copy.cl,
	  share/opencl/density.cl, share/opencl/mesh_batch.cl,
	  share/opencl/mesh_to_cube.cl, share/opencl/mul.cl,
	  share/opencl/operate.cl, share/opencl/pack.cl,
	  share/opencl/phase.cl, share/opencl/points.cl,
	  share/opencl/projector.cl, share/opencl/rotate.cl,
	  share/opencl/set_zero.cl, share/opencl/subarray.cl,
	  share/opencl/trsm.cl, share/opencl/vpsi.cl,
	  share/recipes/Makefile.am, share/recipes/en/Makefile.am,
	  share/recipes/es/Makefile.am, share/recipes/it/Makefile.am,
	  share/util/Makefile.am, src/Makefile.am, src/basic/Makefile.am,
	  src/basic/blacs.F90, src/basic/blacs_proc_grid.F90,
	  src/basic/c_pointer.F90, src/basic/calc_mode.F90,
	  src/basic/comm.F90, src/basic/comm_inc.F90,
	  src/basic/command_line.F90, src/basic/datasets.F90,
	  src/basic/distributed.F90, src/basic/getopt_f.c,
	  src/basic/global.F90, src/basic/hardware.F90,
	  src/basic/ialist.F90, src/basic/iihash.F90, src/basic/io.F90,
	  src/basic/io_binary.c, src/basic/io_binary.h,
	  src/basic/io_binary_f.F90, src/basic/io_csv.c,
	  src/basic/io_csv.h, src/basic/io_csv_f.F90, src/basic/json.F90,
	  src/basic/json_parser.F90, src/basic/loct.F90,
	  src/basic/loct_pointer.F90, src/basic/loct_pointer_inc.F90,
	  src/basic/lookup.F90, src/basic/messages.F90, src/basic/mpi.F90,
	  src/basic/mpi_debug.F90, src/basic/mpi_debug_inc.F90,
	  src/basic/mpi_lib.F90, src/basic/mpi_lib_inc.F90,
	  src/basic/multicomm.F90, src/basic/oct_f.c,
	  src/basic/oct_gdlib_f.c, src/basic/octcl_kernel.F90,
	  src/basic/opencl.F90, src/basic/opencl_inc.F90,
	  src/basic/openscad.F90, src/basic/papi.c, src/basic/papi_f.F90,
	  src/basic/parser.F90, src/basic/polyhedron.F90,
	  src/basic/profiling.F90, src/basic/recipes.c,
	  src/basic/signals.c, src/basic/space.F90, src/basic/string.F90,
	  src/basic/topology.F90, src/basic/types.F90, src/basic/unit.F90,
	  src/basic/unit_system.F90, src/basic/utils.F90,
	  src/basic/varia.c, src/basic/varia.h, src/basic/varinfo.F90,
	  src/basic/varinfo_low.c, src/basic/write_iter.F90,
	  src/basic/write_iter_low.c, src/common-rules.make,
	  src/frozen/Makefile.am, src/grid/Makefile.am,
	  src/grid/basins.F90, src/grid/batch.F90, src/grid/batch_inc.F90,
	  src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/grid/boundaries.F90, src/grid/boundaries_inc.F90,
	  src/grid/cube.F90, src/grid/cube_function.F90,
	  src/grid/cube_function_inc.F90, src/grid/curv_briggs.F90,
	  src/grid/curv_gygi.F90, src/grid/curv_modine.F90,
	  src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/grid/double_grid.F90,
	  src/grid/double_grid_apply_inc.F90, src/grid/fourier_shell.F90,
	  src/grid/fourier_space.F90, src/grid/fourier_space_inc.F90,
	  src/grid/grid.F90, src/grid/hilbert.c, src/grid/hypercube.F90,
	  src/grid/index.F90, src/grid/io_function.F90,
	  src/grid/io_function_inc.F90, src/grid/mesh.F90,
	  src/grid/mesh_batch.F90, src/grid/mesh_batch_inc.F90,
	  src/grid/mesh_cube_map.F90, src/grid/mesh_cube_parallel_map.F90,
	  src/grid/mesh_function.F90, src/grid/mesh_function_inc.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/modelmb_1part.F90, src/grid/multigrid.F90,
	  src/grid/multigrid_inc.F90, src/grid/nl_operator.F90,
	  src/grid/nl_operator_inc.F90, src/grid/ob_grid.F90,
	  src/grid/ob_interface.F90, src/grid/operate.c,
	  src/grid/operate_f.F90, src/grid/operate_inc.c,
	  src/grid/par_vec.F90, src/grid/par_vec_inc.F90,
	  src/grid/partition.F90, src/grid/partition_transfer.F90,
	  src/grid/partition_transfer_inc.F90, src/grid/stencil.F90,
	  src/grid/stencil_cube.F90, src/grid/stencil_star.F90,
	  src/grid/stencil_starplus.F90, src/grid/stencil_variational.F90,
	  src/grid/subarray.F90, src/grid/subarray_inc.F90,
	  src/grid/submesh.F90, src/grid/submesh_inc.F90,
	  src/grid/symmetrizer.F90, src/grid/symmetrizer_inc.F90,
	  src/grid/transfer_table.F90, src/hamiltonian/Makefile.am,
	  src/hamiltonian/berry.F90, src/hamiltonian/born_charges.F90,
	  src/hamiltonian/energy.F90, src/hamiltonian/epot.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/hgh_projector.F90,
	  src/hamiltonian/hgh_projector_inc.F90,
	  src/hamiltonian/kb_projector.F90,
	  src/hamiltonian/kb_projector_inc.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/lasers.F90, src/hamiltonian/lasers_inc.F90,
	  src/hamiltonian/ob_lead.F90, src/hamiltonian/projector.F90,
	  src/hamiltonian/projector_inc.F90,
	  src/hamiltonian/projector_matrix.F90,
	  src/hamiltonian/rkb_projector.F90, src/hamiltonian/scf_tol.F90,
	  src/hamiltonian/species_pot.F90, src/include/Makefile.am,
	  src/include/complex.F90, src/include/fortran_types.h,
	  src/include/global.h, src/include/integer.F90,
	  src/include/real.F90, src/include/undef.F90,
	  src/include/vectors.h, src/ions/Makefile.am,
	  src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/kpoints.F90, src/ions/simul_box.F90,
	  src/ions/solids.F90, src/ions/spglib_f.c,
	  src/ions/symmetries.F90, src/ions/vibrations.F90,
	  src/ions/xyz_adjust.F90, src/ions/xyz_file.F90,
	  src/main/Makefile.am, src/main/casida.F90,
	  src/main/casida_inc.F90, src/main/gcm.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/main.F90, src/main/memory.F90,
	  src/main/one_shot.F90, src/main/phonons_fd.F90,
	  src/main/pulpo.F90, src/main/run.F90, src/main/static_pol.F90,
	  src/main/test.F90, src/main/unocc.F90, src/math/Makefile.am,
	  src/math/blas.F90, src/math/checksum.c,
	  src/math/checksum_interface.F90, src/math/dablas.c,
	  src/math/fft.F90, src/math/fft_inc.F90, src/math/fftw.F90,
	  src/math/fftw_low.c, src/math/gauss_legendre.F90,
	  src/math/lalg_adv.F90, src/math/lalg_adv_lapack_inc.F90,
	  src/math/lalg_adv_scalapack_inc.F90, src/math/lalg_basic.F90,
	  src/math/lalg_basic_blas_inc.F90, src/math/lapack.F90,
	  src/math/loct_math.F90, src/math/math.F90, src/math/math_inc.F90,
	  src/math/matrix.F90, src/math/matrix_inc.F90, src/math/metis.F90,
	  src/math/metis_f.c, src/math/minimizer.F90,
	  src/math/minimizer_low.c, src/math/mix.F90, src/math/mix_inc.F90,
	  src/math/nfft.F90, src/math/nfft_f.c, src/math/nfft_inc.F90,
	  src/math/oct_gsl_f.c, src/math/ode_solver.F90,
	  src/math/ode_solver_inc.F90, src/math/pblas.F90,
	  src/math/permutations.F90, src/math/pfft.F90, src/math/pnfft.F90,
	  src/math/pnfft_inc.F90, src/math/root_solver.F90,
	  src/math/root_solver_inc.F90, src/math/scalapack.F90,
	  src/math/solvers.F90, src/math/solvers_inc.F90,
	  src/math/sparskit.F90, src/math/sparskit_inc.F90,
	  src/math/spline_filter.F90, src/math/splines.F90,
	  src/math/symm_op.F90, src/math/symm_op_inc.F90,
	  src/math/tdfunction.F90, src/math/ylm.c, src/math/young.F90,
	  src/opt_control/Makefile.am, src/opt_control/check_input_inc.F90,
	  src/opt_control/controlfunction.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/filters.F90, src/opt_control/finalcheck_inc.F90,
	  src/opt_control/initst.F90, src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/opt_control/target_velocity_inc.F90, src/poisson/Makefile.am,
	  src/poisson/poisson.F90, src/poisson/poisson_cg.F90,
	  src/poisson/poisson_corrections.F90,
	  src/poisson/poisson_cutoff.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_fmm.F90, src/poisson/poisson_inc.F90,
	  src/poisson/poisson_isf.F90, src/poisson/poisson_libisf.F90,
	  src/poisson/poisson_multigrid.F90, src/poisson/poisson_sete.F90,
	  src/poisson/scaling_function.F90,
	  src/poisson/solver_1d_init_inc.F90,
	  src/poisson/solver_1d_solve_inc.F90,
	  src/poisson/solver_2d_inc.F90, src/poisson/solver_3d_inc.F90,
	  src/scf/Makefile.am, src/scf/ground_state.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90, src/scf/ob_lippmann_schwinger.F90,
	  src/scf/rdmft.F90, src/scf/scf.F90, src/species/Makefile.am,
	  src/species/atomic.F90, src/species/logrid.F90,
	  src/species/periodic_table.F90, src/species/ps.F90,
	  src/species/ps_cpi.F90, src/species/ps_cpi_file.F90,
	  src/species/ps_fhi.F90, src/species/ps_fhi_file.F90,
	  src/species/ps_hgh.F90, src/species/ps_in_grid.F90,
	  src/species/ps_psf.F90, src/species/ps_psf_file.F90,
	  src/species/ps_pspio_inc.F90, src/species/ps_upf.F90,
	  src/species/species.F90, src/states/Makefile.am,
	  src/states/cmplxscl.F90, src/states/density.F90,
	  src/states/excited_states.F90, src/states/excited_states_inc.F90,
	  src/states/linear_response.F90,
	  src/states/linear_response_inc.F90,
	  src/states/modelmb_density_matrix.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_exchange_syms_inc.F90,
	  src/states/modelmb_particles.F90, src/states/ob_green.F90,
	  src/states/physics_op.F90, src/states/physics_op_inc.F90,
	  src/states/restart.F90, src/states/restart_inc.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_block.F90, src/states/states_block_inc.F90,
	  src/states/states_calc.F90, src/states/states_calc_inc.F90,
	  src/states/states_dim.F90, src/states/states_group.F90,
	  src/states/states_inc.F90, src/states/states_io.F90,
	  src/sternheimer/Makefile.am, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/system/Makefile.am, src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90, src/system/eigen_cg.F90,
	  src/system/eigen_cg_inc.F90, src/system/eigen_evolution_inc.F90,
	  src/system/eigen_lobpcg.F90, src/system/eigen_lobpcg_inc.F90,
	  src/system/eigen_mg_inc.F90, src/system/eigen_plan_inc.F90,
	  src/system/eigen_rmmdiis.F90, src/system/eigen_rmmdiis_inc.F90,
	  src/system/eigensolver.F90, src/system/elf.F90,
	  src/system/energy_calc.F90, src/system/energy_calc_inc.F90,
	  src/system/exponential.F90, src/system/forces.F90,
	  src/system/forces_inc.F90, src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90, src/system/magnetic.F90,
	  src/system/output.F90, src/system/output_berkeleygw_inc.F90,
	  src/system/output_etsf_inc.F90, src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_me.F90, src/system/output_me_inc.F90,
	  src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90, src/system/preconditioners.F90,
	  src/system/preconditioners_inc.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90, src/system/system.F90,
	  src/system/v_ks.F90, src/system/xc_kli_inc.F90,
	  src/system/xc_kli_pauli_inc.F90, src/system/xc_ks_inversion.F90,
	  src/system/xc_oep.F90, src/system/xc_oep_inc.F90,
	  src/system/xc_oep_sic_inc.F90, src/system/xc_oep_x_inc.F90,
	  src/td/Makefile.am, src/td/cpmd.F90, src/td/cpmd_inc.F90,
	  src/td/ob_mem.F90, src/td/ob_propagator.F90, src/td/ob_src.F90,
	  src/td/ob_terms.F90, src/td/pes.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90, src/td/pes_rc.F90,
	  src/td/propagator.F90, src/td/propagator_qoct_inc.F90,
	  src/td/spectrum.F90, src/td/td.F90, src/td/td_calc.F90,
	  src/td/td_init_inc.F90, src/td/td_write.F90, src/td/tdpsf.F90,
	  src/utils/Makefile.am, src/utils/casida_spectrum.F90,
	  src/utils/centergeom.F90, src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/help.F90,
	  src/utils/infrared.F90, src/utils/liquid.F90,
	  src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90, src/xc/Makefile.am,
	  src/xc/functionals.F90, src/xc/fxc_inc.F90, src/xc/kxc_inc.F90,
	  src/xc/vxc_inc.F90, src/xc/xc.F90, testsuite/Makefile.am,
	  testsuite/complex_scaling/Makefile.am,
	  testsuite/components/Makefile.am,
	  testsuite/finite_systems_1d/Makefile.am,
	  testsuite/finite_systems_2d/Makefile.am,
	  testsuite/finite_systems_3d/Makefile.am,
	  testsuite/functionals/Makefile.am,
	  testsuite/linear_response/Makefile.am,
	  testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in,
	  testsuite/open_systems/Makefile.am,
	  testsuite/optimal_control/Makefile.am,
	  testsuite/periodic_systems/Makefile.am,
	  testsuite/photo_electron/Makefile.am,
	  testsuite/real_time/Makefile.am: Corrected the FSF address in the
	  copyright.

2013-07-11 16:42  dstrubbe

	* [r10979] libxc/src/Makefile.am: libxc has had occasional trouble
	  with a parallel build (make -j). I have tried to fix this before,
	  but with only partial success. I think this might be real
	  solution. Dependencies are in terms of the funny objects libtool
	  makes, not the normal .o files. Dependencies are declared on
	  module files, and the module files (while not having actual
	  rules) are declared dependent on the .lo files that will created
	  in the same compilation that produces the modules. It is
	  necessary to declare dependencies for both .lo and .o because
	  'make' and 'make install' don't both necessary work with the same
	  ones.

2013-07-11 16:54  dstrubbe

	* [r10980] src/ions/kpoints.F90: Spurious comma.

2013-07-11 17:05  dstrubbe

	* [r10981] src/main/geom_opt.F90: It seems GOMinimumMove and
	  GOTolerance have to be negative to be definitely not used as
	  convergence criteria, since tolgrad or toldr exactly zero is
	  possible. Setting them negative makes the condition impossible.

2013-07-11 18:39  dstrubbe

	* [r10982] libxc/src/Makefile.am: I broke libxc compilation on chum
	  (older automake/libtool versions) with r10979, by explicitly
	  referring to the objects produced by libtool. Unfortunately,
	  their names are not always the same. Surprisingly,
	  libtool/automake do not seem to provide a macro or variable for
	  what the object names will be, so we have to extract it
	  ourselves. LTPREF=libxcf90_la-, or blank for older
	  libtool/automake versions.
	  
	  Produces these warnings on some systems. Does not seem to matter.
	  
	  src/Makefile.am:140: subst xc_f.lo,,$(firstword
	  $(am_libxcf90_la_OBJECTS: non-POSIX variable name
	  src/Makefile.am:140: (probably a GNU make extension)

2013-07-11 18:45  dstrubbe

	* [r10983] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  * Fixing possible loss of precision in netcdf and cube output
	  where 'real' is used.
	  * Noting which options in OutputHow give only the real part.

2013-07-11 19:38  dstrubbe

	* [r10985] src/main/unocc.F90, src/opt_control/propagation.F90,
	  src/scf/scf.F90, src/system/output.F90, src/td/pes.F90,
	  src/td/td.F90, src/td/td_init_inc.F90,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/open_systems/01-wavepacket.01-deriv_order_1.inp,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp,
	  testsuite/open_systems/02-wavepacket_2d.01-full_q.inp,
	  testsuite/open_systems/04-propagate_eigenstate.01-square_well_1d.inp,
	  testsuite/open_systems/04-propagate_eigenstate.02-ring_leads_2d.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/real_time/02-aetrs.04-kick.inp,
	  testsuite/real_time/02-aetrs.05-spectrum.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp: The variable
	  OutputEvery had a confusing meaning, differing in different
	  CalculationModes, regarding whether it controlled ordinary
	  output, restart, or both. I have separated its functionality into
	  OutputInterval and RestartWriteInterval. OutputInterval now works
	  with OutputDuringSCF (whereas OutputEvery did not).
	  
	  Three subtleties:
	  * RecalculateGSDuringEvolution presumably would make more sense
	  to work with OutputEvery than RestartWriteInterval, however it
	  overwrites the states and then restarts from the td directory, so
	  it will destroy the calculation if it does not perform a restart
	  write previous to that.
	  * The PES code does not distinguish clearly between output and
	  restart. PES_mask (but not PES_rc) writes restart files in a
	  function about output, and indeed will fail if called before the
	  restart directory is created. Umberto, you should clean this up.
	  For the time being, all PES output is controlled by
	  RestartWriteInterval and not OutputInterval.
	  * No tests seem to rely on the behavior of these variables at
	  all, though many set OutputEvery. I changed them all to
	  OutputInterval.

2013-07-11 21:24  dstrubbe

	* [r10986] src/main/casida.F90: Refactoring casida:
	  casida_get_matrix is no longer subordinate to casida_work, taking
	  with it load_saved and K_term, thus requiring some more arguments
	  and elements of casida_t.

2013-07-12 02:30  dstrubbe

	* [r10987] src/main/casida.F90: Breaking casida_forces_init out of
	  casida_work.

2013-07-12 10:08  acastro

	* [r10988] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: The code allows the
	  possibility of changing the mass of the particles, but
	  then forgets to consider this change of mass when applying the
	  magnetic terms
	  of the Hamiltonian.

2013-07-12 14:57  dstrubbe

	* [r10990] src/main/casida.F90: Fixing POP_SUB.

2013-07-12 16:07  dstrubbe

	* [r10991] src/main/casida.F90, src/main/casida_inc.F90: * Making
	  routines casida_get_matrix and write_K_term into templated ones.
	  * casida_t now keeps track itself of whether it is real or
	  complex.
	  * cas%mat, cas%tm, cas%pot, and cas%mat_save now have real and
	  complex versions.
	  * casida_matrix_factors now is casida_matrix_factor and just
	  returns the factor rather than applying it.
	  * oscillator strengths are closer to working with complex.

2013-07-12 16:24  dstrubbe

	* [r10992] external_libs/bpdn/bpdn.f90, src/basic/global.F90,
	  src/basic/messages.F90: * There was an interface declared for
	  assert_die in global_m, but it
	  was private and so had no effect. Now it is public and thus
	  checked.
	  * assert_die itself does not need global_m, and cannot use it or
	  there
	  is a conflict with its own interface declared there.
	  * Removing useless variable from bpdn.

2013-07-12 16:36  dstrubbe

	* [r10993] src/main/casida.F90, src/main/casida_inc.F90: * More
	  generalization of Casida for complex wfns.
	  * Unused variables.

2013-07-12 17:00  dstrubbe

	* [r10994] src/main/casida.F90, src/main/casida_inc.F90: * Made
	  casida_forces_init a template routine, greatly simplifying it.
	  * Fixed indentation for casida_matrix_factor.

2013-07-12 18:01  dstrubbe

	* [r10997] src/main/casida.F90: casida_matrix_factor did not
	  actually return anything. (Astonishing, the code still worked, at
	  least when the expected return value was 1...)

2013-07-12 18:37  dstrubbe

	* [r10998] src/main/casida.F90, src/main/casida_inc.F90: * Renaming
	  casida_forces_init to casida_forces, since it does everything,
	  not just initialize.
	  * Renaming casida_lr_hmat1 to casida_calc_lr_hmat1.
	  * Refactoring new routine casida_get_lr_hmat1 out of
	  casida_forces, which will read or calculate and write lr_hmat1.

2013-07-12 21:58  dstrubbe

	* [r10999] src/main/casida.F90, src/main/casida_inc.F90: * The
	  one-body matrix elements for Casida forces are now used for
	  restart.
	  * These files now are opened with is_tmp = .true. for consistency
	  with the other Casida restart files.
	  * Renamed 'is' and 'js' to 'ik' and 'jk' since they could be
	  k-points not just spin, in principle.
	  * Restart in casida now has error-handling for finding illegal
	  indices.

2013-07-13 03:43  dstrubbe

	* [r11000] src/main/casida_inc.F90: * Skipping more work for forces
	  when restarting.
	  * Must MPI broadcast what was read as saved.
	  * Hermitian conjugates for read matrix elements.

2013-07-13 04:03  dstrubbe

	* [r11001] src/main/casida_inc.F90: Fixing compilation error in
	  r11000.

2013-07-13 17:28  dstrubbe

	* [r11002] src/main/casida.F90: Fixing PUSH_SUB.

2013-07-14 00:47  dstrubbe

	* [r11003] src/basic/getopt_f.c, src/basic/utils.F90: newuoa should
	  be in the list of configuration options.

2013-07-14 14:47  acastro

	* [r11004] src/grid/mesh_function_inc.F90: The mesh_random routine
	  places Gaussians with characteristics widths and
	  center positions that are indpendent of the grid spacing. This is
	  a problem
	  when using very large grid spacing (for example when one works
	  with a 2DEG
	  with a small efective mass).

2013-07-14 16:49  acastro

	* [r11005] testsuite/finite_systems_3d/09-spinors.test: Last commit
	  produced small but non-negligible changes in this test.

2013-07-14 16:55  acastro

	* [r11006] src/opt_control/check_input_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_velocity_inc.F90,
	  testsuite/optimal_control/08-velocities.03-movingions.inp,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/Makefile.am: Corrected a couple of
	  things related to the use of a velocity target in
	  optimal control runs. Added a test for this feature.

2013-07-14 18:17  acastro

	* [r11007] testsuite/optimal_control/Makefile.am: Fixed compilation
	  problem.

2013-07-14 19:01  acastro

	* [r11008] src/grid/mesh_function_inc.F90: The use of a wrong
	  variable caused out-of-bounds error.

2013-07-16 07:41  acastro

	* [r11009] src/main/casida_inc.F90: Wrong POP_SUB.

2013-07-16 16:56  micael

	* [r11010] libxc/src/lda_xc_teter93.c: Bug fix: some variable were
	  used before being set when calculating the second and third
	  derivatives with spin-polarization.

2013-07-16 16:59  micael

	* [r11011] libxc/src/xc_f.c: * Improved the functional_get_name
	  Fortran interface.

2013-07-17 11:54  acastro

	* [r11013] src/td/td_write.F90: Bug fix for the problem reported by
	  several users: the laser printed in file
	  td.general/laser changes after performing a restart.

2013-07-18 18:19  dstrubbe

	* [r11016] testsuite/linear_response/01-casida.test: Let's use 4
	  processors for all parts of the Casida test, to help speed up the
	  lengthy unocc and vib_modes calculations.

2013-07-19 07:48  acastro

	* [r11017] src/opt_control/propagation.F90, src/td/propagator.F90,
	  src/td/td.F90, src/td/td_init_inc.F90: All the operations needed
	  to propagate the system one time step are done now
	  inside the propagator_m module (including both the electrons and
	  the ions),
	  instead of inside the iteration loop in the td_run subroutine. I
	  separated the
	  cases of Ehrenfest, CP, and BO dynamics, since mixing them led to
	  quite
	  complicated code.

2013-07-19 10:21  acastro

	* [r11018] src/opt_control/propagation.F90,
	  src/opt_control/target_density_inc.F90, src/td/propagator.F90: A
	  couple of bugs fixed: the propagator_dt routine did not handle
	  well the dt<0
	  case, and one uninitialized variable.

2013-07-19 15:48  dstrubbe

	* [r11019] share/util/README, src/grid/io_function_inc.F90: *
	  Expanding format for mesh_index since there can easily be more
	  than a million points. More than a trillion is probably unlikely
	  ;-)
	  * Documentation about display_mesh_index.gp.

2013-07-19 15:49  dstrubbe

	* [r11020] testsuite/finite_systems_3d/05-output.01-gs.inp: Adding
	  mesh_index to the output test.

2013-07-19 20:36  dstrubbe

	* [r11021] doc/doxygen/Doxyfile, src/common-rules.make: * Removing
	  zoltan from Doxygen config, since it is gone.
	  * 'make clean' should remove .deps files too, or things can
	  accumulate invisibly in there.

2013-07-19 20:53  dstrubbe

	* [r11022] src/common-rules.make: Reverting previous addition of
	  .deps to files to be cleaned by 'make clean.' They are only
	  created by configure, and do not have appropriate dependencies
	  set to regenerate them, so my change made './configure; make
	  clean; make install' fail, which ought to work.

2013-07-20 16:05  dstrubbe

	* [r11023] src/td/propagator.F90: Typo in POP_SUB.

2013-07-20 23:30  dstrubbe

	* [r11024] src/basic/command_line.F90, src/basic/getopt_f.c,
	  src/basic/utils.F90, src/main/main.F90, src/main/test.F90: We
	  were maintaining two ways of writing out the configuration
	  options for octopus, one to be accessed from the command line and
	  written in C, and one to write in the main output file and
	  written in Fortran. I have unified them into Fortran routines
	  that write strings which can be passed to C. I added max-dim to
	  the list given on the command line, and parmetis also which was
	  missing.

2013-07-21 21:31  dstrubbe

	* [r11025] build/svn_release_number.sh, build/true_compiler.sh,
	  m4/octopus_compilation_info.m4: Fixing two small issues with the
	  extraction of the "true compiler":
	  * echo from sh, at least on MacOS, does not support the -n
	  option, so this was ending up in the output from
	  true_compiler.sh. However, if we use bash everywhere, this seems
	  portable.
	  * MPI compilers/wrappers usually, but not always, called mpicc
	  and mpif90. For example, MacPorts openmpi calls them openmpicc
	  and openmpif90; Intel MPI calls the mpiicc and mpiifort. I made
	  true_compiler.sh be a bit more general, and try -show as long as
	  the name contains 'mpi', which includes all these cases.
	  
	  Also, for consistency and general good practice, I used
	  /usr/bin/env bash rather than just bash, and did the same for
	  svn_release_number.sh.

2013-07-22 00:06  dstrubbe

	* [r11026] src/ions/symmetries_finite.c, src/math/metis_f.c: Fixing
	  two warnings flagged by clang:
	  * metis function did not use the same capitalization as in
	  metis.h, so it seemed not to be declared.
	  * warning: add explicit braces to avoid dangling else
	  [-Wdangling-else]

2013-07-22 00:22  dstrubbe

	* [r11027] testsuite/real_time/06-caetrs.test: This test, with task
	  parallelization, requires MPI2.

2013-07-22 03:07  dstrubbe

	* [r11029]
	  testsuite/finite_systems_3d/10-fullerene.02-gs_packed.inp,
	  testsuite/finite_systems_3d/10-fullerene.03-gs_stdlcao.inp,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/14-fullerene_packed.01-gs.inp,
	  testsuite/finite_systems_3d/14-fullerene_packed.test,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.01-gs.inp,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.test,
	  testsuite/finite_systems_3d/Makefile.am: * Splitting the
	  fullerene test into 3 separate ones, since they are independent
	  ground-state calculations, and sometimes the build slaves are
	  timing out on those long calculations, which would be less likely
	  if the process could return after each one.
	  * Adding a missing test file in Makefile.am.

2013-07-22 17:38  acastro

	* [r11034] src/opt_control/controlfunction.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/propagation.F90,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/08-velocities.03-movingions.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp:
	  Eliminated the unnecessary variable "OCTControlRepresentation".
	  It made a
	  somehow artificial distinction between functions represented by a
	  "set of
	  parameters", and functions represented "in real time". In a
	  computer,
	  functions represented in real time are in fact represented by a
	  set of
	  parameters, which are the values of the function in the
	  discretized time
	  grid.

2013-07-22 18:47  dstrubbe

	* [r11035] build/true_compiler.sh: "true compiler" support for Cray
	  compiler wrappers cc and ftn (which may or may not be in
	  parallel).

2013-07-23 16:29  dstrubbe

	* [r11037] src/grid/derivatives_inc.F90: With debugging flags
	  turned on, the call to MPI_Alltoallv with explicit reference to
	  the first element of each array is considered illegal when the
	  arrays have size zero, which I found to be the case in a
	  calculation of silicon with 32 processors.

2013-07-23 16:59  dstrubbe

	* [r11038] src/grid/fourier_shell.F90, src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90: * BerkeleyGW wavefunction
	  output was ignoring the way that plane-wave codes do not use the
	  same set of G-vectors for all k-points, but rather construct the
	  set of G-vectors such that |k+G|^2/2 < cutoff. BerkeleyGW
	  requires this so that k-points are treated consistently for a
	  certain cutoff. The Fourier shell now does this if a k-point is
	  supplied as an argument. ETSF_IO maybe ought to do this too.
	  * All wavefunction G-vectors, and those resulting from symmetry
	  rotations on the k-points, need to yield G-vectors within the set
	  of G-vectors for the density. To ensure this, we cannot use the
	  same cutoff for the wavefunctions and the density, as we were
	  doing, but must reduce the wavefunction cutoff. The exception is
	  when we are doing a finite system, and there will be only Gamma.
	  * Thus we now need to find ngkmax, and use different Fourier
	  shells for each wavefunction, different from the density shell.
	  * A function is split off in Fourier shell to return this usable
	  wavefunction cutoff.

2013-07-23 20:41  acastro

	* [r11039] src/opt_control/finalcheck_inc.F90,
	  src/opt_control/initst.F90, src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90: Started the
	  generalization of the optimal control run mode to deal with
	  Ehrenfest systems.

2013-07-24 08:00  acastro

	* [r11040] src/opt_control/finalcheck_inc.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90: One
	  more step in the generalization of the optimal control procedures
	  for
	  control of Ehrenfest systems.

2013-07-24 17:05  acastro

	* [r11041] src/opt_control/opt_control.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90: Some
	  more changes to allow for optimal control of Ehrenfest systems.

2013-07-25 16:23  acastro

	* [r11042] src/opt_control/initst.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_state.F90: Added the classical
	  degrees of freedom to the opt_control_state_t data
	  structure.

2013-07-25 21:55  dstrubbe

	* [r11044] src/opt_control/Makefile.am, src/opt_control/filter.F90,
	  src/opt_control/filters.F90: * Missing dependencies.
	  * Renaming filters.F90 for consistency with its module filter_m.
	  
	  (Alberto, you should make the target and propagation modules and
	  filenames consistent too.)

2013-07-26 18:38  dstrubbe

	* [r11045] src/opt_control/Makefile.am: Missing dependency.

2013-07-27 09:32  acastro

	* [r11046] src/opt_control/propagation.F90: Little bug that
	  affected backwards propagations only.

2013-07-29 02:04  dstrubbe

	* [r11047] testsuite/periodic_systems/10-berkeleygw.01-gs.inp,
	  testsuite/periodic_systems/10-berkeleygw.test,
	  testsuite/periodic_systems/Makefile.am: * Adding a test for
	  BerkeleyGW output, only in serial for now.
	  * Adding missing files to Makefile.am.

2013-07-29 07:43  acastro

	* [r11048] src/opt_control/initst.F90,
	  src/opt_control/opt_control.F90, src/opt_control/propagation.F90,
	  src/opt_control/target.F90: Changed the name of some modules, to
	  make them match the corresponding
	  filenames.

2013-07-29 17:24  dstrubbe

	* [r11049] testsuite/oct-run_regression_test.pl: Implementing
	  field-based LINE and GREP commands in the testsuite script, that
	  can be used instead of the column-based ones we currently have
	  (but which require lots of counting by hand to set up, and the
	  output must be in a fixed format).

2013-07-29 20:58  dstrubbe

	* [r11050] testsuite/periodic_systems/10-berkeleygw.test: Using new
	  LINEFIELD matches for BerkeleyGW test, and testing diagonal
	  elements only, which are not subject to arbitrary phases.

2013-07-30 10:18  acastro

	* [r11051] src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90: Added the computation of the
	  forces in a couple of places where they were
	  missing. Improved the opt_control_state_t data structure.

2013-07-31 09:27  acastro

	* [r11052] src/ions/ion_dynamics.F90,
	  src/opt_control/propagation.F90: During the backwards
	  propagation, the ions need to be frozen.

2013-08-01 10:20  acastro

	* [r11053] src/opt_control/Makefile.am,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90: Added a new target to
	  the OCT code. It depends only on the classical degrees
	  of freedom. It does not really work yet.

2013-08-01 14:23  acastro

	* [r11054] src/basic/parser.F90,
	  src/opt_control/target_velocity_inc.F90: Moved
	  target_parse_velocity to the parser, where it belongs.

2013-08-01 19:54  dstrubbe

	* [r11055] src/basic/parser.F90: Typo.

2013-08-01 21:37  dstrubbe

	* [r11056] src/poisson/poisson_fft.F90: Bugfix: loop went only to 2
	  instead of 3 in a poisson_fft routine. Fortunately, I don't think
	  this mattered in most casees. (I caused this in r8523.)

2013-08-02 01:48  xavier

	* [r11057] src/ions/vibrations.F90,
	  testsuite/linear_response/04-vib_modes.test: * Bugfix: The
	  dynamical matrix had the wrong units, it should have
	  dimensions of energy**2 instead of energy. This error was
	  discovered
	  by Jacob Sanders.
	  
	  * The dynamical matrix is now printed in scientific notation.

2013-08-02 11:35  xavier

	* [r11058] testsuite/linear_response/04-vib_modes.test: I forgot to
	  update the precision values to the proper units in the
	  vibrational modes test.

2013-08-02 13:49  acastro

	* [r11059] src/opt_control/propagation.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90: Added some necessary
	  input variables to define classical targets.

2013-08-02 21:42  dstrubbe

	* [r11060] src/poisson/poisson_fft.F90: Refactoring duplicated code
	  in poisson_fft routines.

2013-08-03 19:34  dstrubbe

	* [r11061] src/hamiltonian/hamiltonian_inc.F90: The exchange
	  operator is supposed to have a loop over k-points. This is in
	  preparation for implementing exchange for k-points properly.

2013-08-03 23:36  dstrubbe

	* [r11062] testsuite/linear_response/04-vib_modes.test: Recentering
	  dynamical-matrix match and increasing tolerance slightly, so all
	  can pass.

2013-08-05 05:46  dstrubbe

	* [r11063] testsuite/linear_response/04-vib_modes.test: I
	  accidentally missed a zero in the precision in r11062.

2013-08-05 14:51  marques

	* [r11064] libxc/src/gga_c_pbe.c: Added c_PBEint, c_zPBEsol,
	  c_zPBEint

2013-08-05 15:04  marques

	* [r11065] libxc/src/gga_x_pbe.c: Added x_pbeint

2013-08-05 15:09  xavier

	* [r11066] libxc/src/Makefile.am, libxc/src/util.h, libxc/src/xc.h,
	  libxc/src/xc_f.c, libxc/src/xc_unconfig.h,
	  libxc/testsuite/xc-get_data.c: Bugfix: xc.h was defining FLOAT
	  and other undocumented macros that
	  could case name clashes with user code. Now these macros are not
	  declared. Internal libxc code that uses them needs to include
	  "xc_config.h" explicitly.

2013-08-05 21:36  acastro

	* [r11067] src/ions/ion_dynamics.F90,
	  src/opt_control/propagation.F90,
	  src/opt_control/target_classical_inc.F90: Corrected a couple of
	  bugs that affected the classical OCT target.

2013-08-05 23:31  dstrubbe

	* [r11068] src/main/unocc.F90: Initialization, for the case
	  UnoccMaximumIter = 0.

2013-08-05 23:46  dstrubbe

	* [r11069] src/hamiltonian/hamiltonian.F90, src/main/run.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90: Making the hamiltonian type keep
	  track of its own geometry, for convenience and to ensure that it
	  deallocates itself consistently.

2013-08-06 15:40  acastro

	* [r11070] src/ions/ion_dynamics.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90: The OCT classical
	  target was assuming unit-mass for all classical
	  particles. Changed the symbols "r" and "v" by "q" and "p" to
	  enter the
	  description of the classical target in the inp file.

2013-08-06 23:37  dstrubbe

	* [r11071] src/main/unocc.F90,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp: For simplicity,
	  unocc can use the same variable name as in SCF, namely
	  MaximumIter.

2013-08-07 05:08  dstrubbe

	* [r11072] src/main/unocc.F90: Removing a useless initialization
	  (followed by another initialization later), and removing modules
	  which are not really used.

2013-08-07 14:23  umberto

	* [r11073] src/math/oct_gsl_f.c: Added interface to gsl_combination

2013-08-07 14:26  umberto

	* [r11074] src/td/td_calc.F90, src/td/td_write.F90: Added
	  ionization_channels to TDoutput.
	  This allow to calculate the multiple ionization probability based
	  on KS orbitals as done in:
	  C. Ullrich, Journal of Molecular Structure: THEOCHEM 501, 315
	  (2000)

2013-08-07 14:45  umberto

	* [r11075] src/td/td_calc.F90: Fixed error compiling with mpi.

2013-08-07 15:52  joseba

	* [r11076] src/poisson/poisson.F90,
	  src/poisson/solver_1d_solve_inc.F90,
	  src/poisson/solver_3d_inc.F90: Deleted two instances of part_vec

2013-08-07 16:04  umberto

	* [r11077] src/td/td_calc.F90, src/td/td_write.F90: Fixed
	  ionization channels when running parallel on states.

2013-08-07 18:31  acastro

	* [r11078] src/opt_control/target_velocity_inc.F90: Wrong
	  allocation of one array.

2013-08-07 18:45  dstrubbe

	* [r11079] src/states/restart.F90: Ensuring initializations in
	  restart.

2013-08-07 19:50  dstrubbe

	* [r11080] src/main/unocc.F90: * Determining the actual number of
	  occupied states, in unocc, and using it for the warning about
	  lack of convergence.
	  * Changing a variable name to avoid clashing with the
	  occupied_states routine.

2013-08-07 20:16  dstrubbe

	* [r11081] src/main/unocc.F90: Using occ_states array in more
	  places in unocc mode.

2013-08-07 22:11  dstrubbe

	* [r11082] src/states/states.F90, src/states/states_calc_inc.F90:
	  Typos.

2013-08-08 04:58  dstrubbe

	* [r11083] src/states/restart.F90: Refactored out the reading of
	  the lxyz file in restart.

2013-08-08 05:22  dstrubbe

	* [r11084] src/states/restart.F90: restart_read_rho can now handle
	  a changed/reordered grid, like restart_read.

2013-08-08 06:22  dstrubbe

	* [r11085] src/opt_control/initst.F90: Checking validity of input
	  to avoid possible array out of bounds in optimal control.

2013-08-08 06:23  dstrubbe

	* [r11086] src/grid/mesh_init.F90: Documentation formatting.

2013-08-08 09:37  joseba

	* [r11087] src/states/modelmb_exchange_syms_inc.F90: SAFE_ALLOCATE
	  started from 1 to be able to print in profiling memory

2013-08-08 11:44  umberto

	* [r11088] src/math/loct_math.F90: Added interface for
	  gsl_combination

2013-08-08 11:45  umberto

	* [r11089] src/td/td_calc.F90: use loct_math interfaces

2013-08-08 17:41  dstrubbe

	* [r11090] src/math/loct_math.F90: * We can't use PUSH/POP in
	  loct_math as it does not load the relevant modules.
	  * Doxygenation.

2013-08-08 18:39  dstrubbe

	* [r11091] src/hamiltonian/hamiltonian_inc.F90, src/main/gcm.F90,
	  src/scf/rdmft.F90: Hartree-Fock was broken for parallelization in
	  k-points (and probably states too) due to incorrect communication
	  in the Poisson solve. I think I fixed the same problem in the OCT
	  exchange, and I suspect it is present in GCM and RDMFT too (which
	  I commented on but did not change).

2013-08-08 19:11  dstrubbe

	* [r11092] src/system/eigensolver.F90: Bugfix: the check for more
	  than one block in lobpcg was not very accurate. (r10774)

2013-08-08 19:20  dstrubbe

	* [r11093] src/main/unocc.F90: unocc should write density after
	  all. While the physical values should not be changed, it should
	  be rewritten in case the grid was reordered; otherwise the newly
	  written wavefunctions will be inconsistent with the old grid for
	  the density from the previous calculation.

2013-08-09 09:20  joseba

	* [r11094] src/grid/cube.F90, src/grid/mesh_cube_parallel_map.F90:
	  Deleted cube_part of size mesh%np_global. Let's see if it is fast
	  enough with big systems
	  Addapted cube to the new requeriments

2013-08-09 18:35  dstrubbe

	* [r11095] src/states/restart.F90: Since 'map' is intent(out), it
	  must be nullified if not being allocated, or else the
	  SAFE_DEALLOCATE_P may fail in restart_read (as was happening on
	  the mauchly intel slaves).

2013-08-09 18:42  dstrubbe

	* [r11096] src/states/restart.F90: I don't see a reason why calls
	  to restart_read should demand that they be on the same grid when
	  they use 'exact'. Just getting all the needed wavefunctions seems
	  sufficient. This is used in td, static_pol, one_shot, phonons_fd,
	  and optimal control.

2013-08-09 22:27  dstrubbe

	* [r11101] src/hamiltonian/hamiltonian_inc.F90: Blocking
	  Hartree-Fock calculations parallel in states, which will crash or
	  be wrong.

2013-08-09 22:33  dstrubbe

	* [r11102] src/states/restart.F90: 'exact' restart from a changed
	  grid now causes an error, except if it is merely reordered.

2013-08-09 23:30  dstrubbe

	* [r11103] src/scf/ground_state.F90, src/states/restart.F90: I
	  don't see a need to make the distinction between 'exact' and
	  'rdmft' in restart_read. RDMFT can just use 'exact', with a more
	  general error message. (The 'exact' one before could be triggered
	  for HF too anyway.)

2013-08-09 23:51  dstrubbe

	* [r11104] src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/vdw.F90:
	  Sternheimer calculations should read with 'exact' since a
	  different grid is not acceptable.

2013-08-12 13:06  marques

	* [r11105] libxc/src/gga_x_pbea.c: Bug fix: the value of alpha of
	  PBEalpha seems to be 0.52 and not 0.5. Strangely enough the
	  original routine (with alpha=0.5) had been sent to be by G.
	  Madsen, the author of the functional.

2013-08-12 23:42  dstrubbe

	* [r11106] testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/functionals/04-oep.test: Re-enabling the full OEP EXX
	  test.

2013-08-13 04:33  dstrubbe

	* [r11107] src/basic/varinfo_low.c: Making some arguments in C
	  const, and removing a goto (!)

2013-08-13 05:10  dstrubbe

	* [r11108] src/basic/parser.F90: Clarifying error messages.

2013-08-13 09:05  joseba

	* [r11109] src/poisson/solver_1d_solve_inc.F90,
	  src/poisson/solver_3d_inc.F90: All the partition is gathered
	  together, intented to be a faster implementation of r11076

2013-08-13 14:09  joseba

	* [r11110] src/grid/mesh_cube_parallel_map.F90: Deleted an instance
	  of part_vec
	  Renamed part_local to cube_part_local

2013-08-13 15:40  joseba

	* [r11111] src/grid/nl_operator.F90: Moved the usage of global
	  par_vec to a local version.
	  All the tests are passed, but probably curvilinear implementation
	  in parallel is broken (before also to this commit).

2013-08-13 22:41  dstrubbe

	* [r11112] testsuite/functionals/03-xc.test: Updating match for
	  PBEA in light for recent libxc change.

2013-08-13 23:25  dstrubbe

	* [r11113] src/main/unocc.F90, src/states/states.F90,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-oct_long.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-ground_state_disp.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp: CalculationMode =
	  unocc now decides how many states to use via ExtraStates (as for
	  gs) rather than NumberUnoccStates. This is for convenience, in
	  reducing the number of variables that do similar things, and also
	  helps for performance and parallelization. Choices such as
	  distribution of states over nodes, and the block size for states
	  and mesh, were being made based on the number of states before
	  NumberUnoccStates, rather than the actual number of states being
	  used. Now we can do things more appropriately.

2013-08-14 04:46  dstrubbe

	* [r11118] src/states/states.F90: Fixing types: floats were
	  assigned to an integer stsmear%%el_per_state, and a function
	  state_spin needlessly returned complex, and assigned it to the
	  real st%spin.

2013-08-14 13:46  joseba

	* [r11119] src/grid/mesh_init.F90, src/grid/mesh_partition.F90:
	  Deleted part_vec from mesh_partition and by the way when printing
	  is only iterated over the local points.

2013-08-14 16:17  joseba

	* [r11121] src/grid/mesh_init.F90, src/grid/par_vec.F90,
	  src/grid/partition.F90: Created a function to calculate the local
	  number of points for each partition. Then, adapted the call to
	  vec_init and deleted two instances of part_vec

2013-08-14 17:54  dstrubbe

	* [r11122] src/grid/mesh_init.F90, src/grid/partition.F90: * Fixing
	  compilation errors in serial.
	  * Doxygen comments.

2013-08-14 18:09  dstrubbe

	* [r11123] src/grid/Makefile.am: Missing dependency.

2013-08-14 18:18  dstrubbe

	* [r11124] src/system/xc_oep_x_inc.F90: Making the OEP exchange
	  routine less OEP-specific:
	  * Replaced oep%socc ("spin occupation", apparently) with local
	  variable socc = 1 / el_per_state. This does not really have
	  anything to do with OEP per se.
	  * Replaced oep%socc * oep%sfact ("spin factor", apparently) with
	  1, since their product is always one.

2013-08-14 18:42  dstrubbe

	* [r11125] src/system/xc_oep_inc.F90, src/system/xc_oep_x_inc.F90:
	  Further generalization of OEP's exchange routine.

2013-08-14 19:05  dstrubbe

	* [r11126] src/system/xc_kli_inc.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_sic_inc.F90, src/system/xc_oep_x_inc.F90: *
	  Replacing parameter 'small' with standard M_EPSILON in OEP.
	  * Moving profiling and PUSH_SUB to the beginning of X(oep_x).
	  * Adding caveat about k-points from
	  hamiltonian_exchange_operator.

2013-08-14 19:24  dstrubbe

	* [r11127] src/system/xc_oep.F90, src/system/xc_oep_inc.F90,
	  src/system/xc_oep_x_inc.F90: OEP exchange now uses der not gr,
	  like hamiltonian_exchange_operator.

2013-08-14 22:12  dstrubbe

	* [r11128] src/system/xc_oep_x_inc.F90: Correcting OEP exchange for
	  parallel in states (bug from r11125).

2013-08-15 05:11  dstrubbe

	* [r11129] src/main/run.F90: Use the ground_state_run_init for
	  unocc too, so that it can run parallel in states, use scalapack,
	  etc.

2013-08-15 17:28  dstrubbe

	* [r11130] src/main/unocc.F90: unocc now does not require any
	  wavefunctions to be present for restart, as long as the density
	  can be read. This is helpful for doing a calculation on a
	  different set of k-points, which previously required some kind of
	  dummy calculation first to create the states.

2013-08-15 17:40  dstrubbe

	* [r11131] src/states/states.F90: LCAO none when parallel in states
	  would often fail with an error from pdpotrf in cholesky_parallel.
	  I think this is because some states turned out to be linearly
	  dependent, and that was happening due to the same seed being used
	  for different states on different processors when generating the
	  random wavefunctions. An additional issue is that the random
	  numbers used were reproducible when not parallel in states, but
	  were different when parallel in states or k-points. Now, the
	  results are reproducible, and don't give the cholesky_parallel
	  error in some testsuite cases where they did before. I made that
	  all processors do the calls to X(mf_random), they just don't set
	  the states unless they are managing them, which ensures that the
	  same seed will be used for a given state and k-point regardless
	  of parallelization and processor count.

2013-08-17 04:25  dstrubbe

	* [r11132] src/states/states.F90: Fixes to r11131:
	  * The bounds ist_start and ist_end need to be used for unocc
	  random wavefunctions to work.
	  * Seeds all are set to zero, independent of parallelization.
	  * Initialization of eigenvalues is before the cycle.
	  * Iterate over all k-points.

2013-08-18 06:40  dstrubbe

	* [r11133] src/main/casida_inc.F90,
	  src/sternheimer/sternheimer_inc.F90, src/xc/xc.F90: Initial
	  implementation of the long-range correction (LRC) that can be
	  added to the LDA kernel.

2013-08-18 07:06  dstrubbe

	* [r11134] src/main/casida.F90: Forgot a file in last commit.

2013-08-18 11:09  jrfsousa

	* [r11135] src/frozen/Makefile.am, src/frozen/basis.F90,
	  src/frozen/domain.F90, src/frozen/frozen.F90,
	  src/frozen/frozen_basis.F90, src/frozen/frozen_epot.F90,
	  src/frozen/frozen_geometry.F90,
	  src/frozen/frozen_interpolation.F90,
	  src/frozen/frozen_states.F90, src/frozen/functional.F90,
	  src/frozen/gga.F90, src/frozen/iatom.F90,
	  src/frozen/igeometry.F90, src/frozen/igrid.F90,
	  src/frozen/interface_xc.F90, src/frozen/interpolation.F90,
	  src/frozen/ispace.F90, src/frozen/kinds.F90, src/frozen/lda.F90,
	  src/frozen/map.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90, src/frozen/template.h,
	  src/frozen/thash.F90, src/frozen/tlist.F90, src/frozen/tpair.F90:
	  Starting to update frozen densities code.

2013-08-18 16:48  jrfsousa

	* [r11136] src/frozen/fio_config.F90, src/frozen/fio_density.F90,
	  src/frozen/fio_external.F90, src/frozen/fio_geometry.F90,
	  src/frozen/fio_grid.F90, src/frozen/fio_mesh.F90,
	  src/frozen/fio_simul_box.F90, src/frozen/fio_simulation.F90,
	  src/frozen/tbase_density.F90, src/frozen/tcalc.F90,
	  src/frozen/texternal_potential.F90, src/frozen/tgeo.F90,
	  src/frozen/thamiltonian.F90, src/frozen/tpotential.F90,
	  src/frozen/tstates.F90, src/frozen/tsystem.F90,
	  src/frozen/tterm.F90, src/frozen/twrap.F90: Continuing to update
	  frozen densities code.

2013-08-18 20:10  jrfsousa

	* [r11137] src/frozen/Makefile.am, src/frozen/fio_mesh.F90,
	  src/frozen/fio_output.F90: Add corrections and a missing file

2013-08-18 21:31  jrfsousa

	* [r11138] src/species/species.F90: * Add parameter SPEC_FROZEN = 5
	  
	  * Add subroutine species_set_type
	  
	  * Add subroutine species_nullify
	  
	  * Add subroutine species_end_species acessible trough generic
	  interface species_end

2013-08-19 14:03  jrfsousa

	* [r11139] src/frozen/Makefile.am, src/frozen/functional.F90,
	  src/frozen/gga.F90, src/frozen/interface_xc.F90,
	  src/frozen/lda.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90, src/frozen/tbase_density.F90,
	  src/frozen/tcalc.F90, src/frozen/texternal_potential.F90,
	  src/frozen/thamiltonian.F90, src/frozen/tpotential.F90,
	  src/frozen/tsystem.F90, src/frozen/twrap.F90: * Several
	  corrections

2013-08-19 15:47  jrfsousa

	* [r11140] src/basic/json.F90, src/basic/json_parser.F90,
	  src/grid/io_function.F90: * Add parameter C_OUTPUT_HOW_JSON =
	  524288 to grid/io_function.F90
	  
	  * Numerous updates to json*.F90 files

2013-08-19 18:45  jrfsousa

	* [r11141] src/frozen/Makefile.am, src/frozen/basis.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_geometry.F90, src/frozen/fio_grid.F90,
	  src/frozen/fio_mesh.F90, src/frozen/fio_simul_box.F90,
	  src/frozen/fio_simulation.F90, src/frozen/frozen_config.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_external.F90,
	  src/frozen/frozen_geometry.F90, src/frozen/frozen_grid.F90,
	  src/frozen/frozen_ionic.F90, src/frozen/frozen_simulation.F90,
	  src/frozen/frozen_tnadd.F90, src/frozen/igeometry.F90,
	  src/frozen/simulation.F90, src/frozen/tbase_density.F90,
	  src/frozen/tcalc.F90, src/frozen/texternal_potential.F90,
	  src/frozen/tgeo.F90, src/frozen/thamiltonian.F90,
	  src/frozen/tionic_term.F90, src/frozen/tpotential.F90,
	  src/frozen/tstates.F90, src/frozen/tsystem.F90,
	  src/frozen/tterm.F90, src/frozen/twrap.F90: * Additional files
	  for frozen calculation and some more corrections.

2013-08-19 19:39  jrfsousa

	* [r11142] configure.ac, src/Makefile.am, src/common-rules.make,
	  src/frozen/Makefile.am, src/main/Makefile.am: * Slowly start to
	  go live.

2013-08-19 20:07  jrfsousa

	* [r11143] src/system/Makefile.am, src/system/output.F90,
	  src/system/output_fio.F90: * Add parameter C_OUTPUT_FROZEN =
	  1073741824 for frozen output.
	  
	  * Add output support for frozen calculations.

2013-08-19 20:21  jrfsousa

	* [r11144] src/frozen/basis.F90: * Tries to fix problems with
	  Pathscale.

2013-08-19 20:59  jrfsousa

	* [r11145] src/frozen/Makefile.am: * Add missing noinst_HEADERS

2013-08-19 21:07  jrfsousa

	* [r11146] src/frozen/ispace.F90: * Let us try to make PGI happy.

2013-08-19 22:55  jrfsousa

	* [r11147] src/utils/Makefile.am: * Add references to libfrozen

2013-08-19 23:58  jrfsousa

	* [r11148] src/basic/space.F90, src/frozen/ispace.F90,
	  src/frozen/tsystem.F90, src/system/output_fio.F90: * Some
	  shuffling of files to make PGI happy

2013-08-19 23:59  jrfsousa

	* [r11149] src/frozen/Makefile.am: * Add missing file.

2013-08-20 00:29  jrfsousa

	* [r11150] src/basic/Makefile.am, src/basic/space.F90: * Fixes
	  missing dependency and wrong subroutine name.

2013-08-20 14:36  marques

	* [r11151] libxc/src/gga_x_sogga11.c: Wrong citation

2013-08-20 15:03  jrfsousa

	* [r11152] src/frozen/Makefile.am: * Adds missing dependency.

2013-08-21 09:57  marques

	* [r11153] libxc/src/gga_x_bpccac.c, libxc/src/gga_x_pbe.c: Buf
	  fixed: bpccac functional should use a different version of
	  revPBE. People should be more original with the names of the
	  functionals!!!
	  Added another revise dversion of PBE, that I called PBE_TCA

2013-08-21 10:24  marques

	* [r11154] libxc/TODO: Forgot to merge TODo

2013-08-21 16:25  micael

	* [r11155] libxc/TODO: * Removed references to already implemented
	  functionals.
	  * Added several missing functionals.

2013-08-22 08:52  micael

	* [r11156] libxc/TODO: * Added more missing functionals to the TODO
	  file.

2013-08-22 15:15  joseba

	* [r11157] src/grid/par_vec.F90, src/grid/partition.F90: Deleted
	  several instances of part_vec
	  Created a subroutine to get the global points of the local array
	  Few formatting

2013-08-23 10:02  joseba

	* [r11158] src/grid/partition.F90: Bugfix to the previous r11157
	  commit:
	  The send buffer is now big enough
	  Corrected the intent of the result buffer
	  Deleted commented and useless lines

2013-08-23 14:18  joseba

	* [r11159] src/grid/partition.F90: The same logic of r11157 but
	  using less memory

2013-08-23 23:01  jrfsousa

	* [r11160] src/basic/Makefile.am, src/basic/json.F90,
	  src/basic/json_parser.F90, src/basic/kinds.F90,
	  src/frozen/Makefile.am, src/frozen/kinds.F90: * Move
	  ./src/frozen/kinds.F90 to ./src/basic and reflect changes.

2013-08-24 13:31  jrfsousa

	* [r11161] src/frozen/Makefile.am, src/frozen/fio_output.F90,
	  src/frozen/iatom.F90, src/frozen/igeometry.F90,
	  src/frozen/thash.F90, src/frozen/tlist.F90, src/frozen/tpair.F90,
	  src/ions/atom.F90: * Add equal and not equal operators to
	  atom.F90
	  
	  * Code cleanup, add PUSH_SUB, POP_SUB
	  
	  * Remove redundant files.

2013-08-24 13:54  jrfsousa

	* [r11162] src/ions/atom.F90: * Fix mistake.

2013-08-24 14:40  jrfsousa

	* [r11163] src/frozen/iatom.F90, src/ions/atom.F90: * Fix some more
	  mistakes.

2013-08-24 20:32  jrfsousa

	* [r11164] src/frozen/basis.F90, src/frozen/domain.F90,
	  src/frozen/functional.F90, src/frozen/gga.F90,
	  src/frozen/igrid.F90, src/frozen/interface_xc.F90,
	  src/frozen/interpolation.F90, src/frozen/lda.F90,
	  src/frozen/map.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90: * Code cleanup add PUSH_SUB & POP_SUB

2013-08-24 21:13  jrfsousa

	* [r11165] src/frozen/Makefile.am: * Forgot Makefile...

2013-08-25 14:08  xavier

	* [r11166] src/main/casida.F90, src/main/casida_inc.F90: Added some
	  profiling regions to the casida code.

2013-08-26 08:19  joseba

	* [r11167] src/grid/par_vec.F90: Variable simplification

2013-08-26 10:07  joseba

	* [r11168] src/grid/par_vec.F90: Deleted one more usage of part_vec
	  Deallocated a matrix

2013-08-26 18:04  acastro

	* [r11169] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.test,
	  testsuite/finite_systems_2d/Makefile.am: Added the Bychkov-Rashba
	  spin-orbit coupling term, for 2D electron systems.

2013-08-27 12:28  joseba

	* [r11170] src/grid/mesh_batch_inc.F90, src/grid/par_vec.F90:
	  Deleted a usage of part_vec
	  Reordered some commands
	  Improved few comments and fortmat

2013-08-27 12:58  joseba

	* [r11171] src/grid/par_vec.F90: Another part_vec deletion

2013-08-27 14:55  joseba

	* [r11172] src/grid/par_vec.F90: The calculation of the ghost
	  points is done in another way and so completely deleted part_vec
	  from par_vec.F90

2013-08-27 15:23  jrfsousa

	* [r11173] src/frozen/Makefile.am, src/frozen/fio_geometry.F90,
	  src/frozen/fio_simul_box.F90, src/ions/symmetries_finite.c: * Add
	  variable initialization and final variable cleanup to
	  symmetries_finite.c
	  
	  * Code cleanup, add PUSH_SUB POP_SUB and turn on the compiling of
	  a few more files.

2013-08-27 20:03  xavier

	* [r11174] src/main/casida.F90, src/main/casida_inc.F90: * Added an
	  object to store the previous potential, instead of storing it
	  in a global object.
	  * Some code cleaning.

2013-08-28 02:36  dstrubbe

	* [r11175] src/system/preconditioners_inc.F90: Fixing a type.

2013-08-28 09:24  micael

	* [r11176] libxc/TODO: Added another missing functional to the TODO
	  list.

2013-08-28 09:27  jrfsousa

	* [r11177] src/ions/symmetries_finite.c: * Removes duplicate code.

2013-08-28 09:32  joseba

	* [r11178] src/grid/mesh_batch.F90, src/grid/mesh_batch_inc.F90:
	  Deleted two instances of part_vec
	  Still two more exists

2013-08-28 09:52  acastro

	* [r11179]
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.test: Changed a test;
	  now it uses effective atomic units. Included a lengthy comment
	  about these units.

2013-08-28 11:26  jrfsousa

	* [r11180] src/frozen/Makefile.am, src/frozen/fio_grid.F90,
	  src/frozen/fio_mesh.F90, src/frozen/fio_simulation.F90,
	  src/grid/mesh_init.F90: * Make mesh_get_vol_pp in mesh_init.F90
	  visible.
	  
	  * Add PUSH_SUB and POP_SUB and some more small changes.
	  
	  * Turn on the compilation of a few more files.

2013-08-28 13:07  joseba

	* [r11181] src/grid/mesh_batch_inc.F90: Deleted one more time
	  part_vec.
	  Still one is there.

2013-08-28 13:49  micael

	* [r11182] src/species/atomic.F90: Bug fix: in some specific
	  situations, the total number of atomic wavefunctions for a given
	  species could exceed the hard-wired value of 6.

2013-08-28 18:44  dstrubbe

	* [r11184] src/system/xc_kli_inc.F90, src/system/xc_oep.F90: *
	  Bugfix to OEP/KLI: a complex conjugate was missing, so results
	  could have been wrong for complex wavefunctions (though not for
	  spinors which didn't use this routine).
	  * Citation had the wrong journal.

2013-08-28 20:18  dstrubbe

	* [r11185] src/system/xc_kli_inc.F90, src/system/xc_oep_inc.F90: *
	  Made some complex -> real conversions explicit.
	  * Removed unnecessary temp variable 'occ' which unwisely was
	  R_TYPE even though it was always assigned a FLOAT value.

2013-08-28 21:14  dstrubbe

	* [r11186] src/main/casida.F90: * A variable had a mistaken type in
	  Casida. This doesn't matter until we implement fractional
	  occupations.
	  * Refactoring the oscillator strengths out of two places they
	  were called. They also only need to be called on the root proc of
	  the Casida MPI group for the time being.

2013-08-28 22:36  dstrubbe

	* [r11187] src/basic/varinfo_low.c: Fixing a (tiny) memory leak
	  flagged by valgrind, which I inadvertently caused in r11107. I am
	  glad to say I do not understand well enough all the details of
	  using 'goto' in C...

2013-08-28 22:44  dstrubbe

	* [r11188] src/scf/lcao.F90: An extra check for unocc LCAO.

2013-08-29 04:18  dstrubbe

	* [r11189] src/utils/Makefile.am: The utilities do not need to link
	  the frozen stuff.

2013-08-29 16:48  dstrubbe

	* [r11190] src/utils/Makefile.am: Reverting r11189: apparently PGI
	  does need libfrozen.a for the utilities.

2013-08-29 20:44  dstrubbe

	* [r11191] src/system/xc_oep_x_inc.F90: OEP exchange now uses
	  states_get_state instead of st%X(psi).

2013-08-29 21:02  dstrubbe

	* [r11192] src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90, src/sternheimer/vdw.F90:
	  Making some type conversions explicit.

2013-08-29 21:15  dstrubbe

	* [r11193] src/poisson/poisson.F90: Removing duplicative commented
	  code and fixing indentation.

2013-08-29 21:20  dstrubbe

	* [r11194] src/system/xc_oep_x_inc.F90: We don't need 'recv_buffer'
	  anymore.

2013-08-29 21:43  dstrubbe

	* [r11195] src/hamiltonian/hamiltonian_inc.F90,
	  src/poisson/poisson.F90, src/poisson/solver_1d_solve_inc.F90,
	  src/system/system.F90, src/system/v_ks.F90, src/xc/vxc_inc.F90:
	  Simplifying the proliferating thetas a bit in the Poisson
	  solvers: we can just set it in the object and not pass it around
	  so much.

2013-08-29 22:23  dstrubbe

	* [r11196] src/poisson/poisson.F90,
	  src/poisson/solver_1d_solve_inc.F90: * Fix to r11195: routine
	  zpoisson1d_solve must only be called for POISSON_DIRECT_SUM, or
	  an assertion fails.
	  * Making a parameter POISSON_NULL instead of the -99's around.
	  * Using POISSON_DIRECT_SUM instead of -1 in the assert.
	  * ASSERT must not come before PUSH_SUB, for debug stack to be
	  useful.

2013-08-29 22:26  dstrubbe

	* [r11197] src/poisson/poisson.F90,
	  src/poisson/solver_1d_solve_inc.F90: Clarifying a routine's name.

2013-08-29 22:31  dstrubbe

	* [r11198] src/hamiltonian/hamiltonian_inc.F90,
	  src/system/xc_oep_x_inc.F90: Simplifying unnecessarily divergent
	  code for complex scaling in exchange. Also, enabling complex
	  scaling (only one line now required) for OEP exchange.

2013-08-30 10:21  jrfsousa

	* [r11199] src/frozen/fio_mesh.F90, src/grid/mesh_init.F90:
	  ./src/grid/
	  
	  * Revert mesh_init.F90 to revision 11179.
	  
	  ./src/frozen/
	  
	  * Reflect changes.

2013-08-30 15:21  joseba

	* [r11200] src/grid/mesh_init.F90, src/grid/mesh_partition.F90:
	  Corrected the possibility to create partitions bigger than the
	  number of domains

2013-08-30 15:55  dstrubbe

	* [r11201] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test: The complex-scaling
	  tests did not test imaginary parts of any quantities. This seems
	  quite unwise given the point of that formalism. I think there was
	  the intention to test the imaginary part of the total energy in
	  these files, but the testsuite match commands do not work if you
	  give two numbers as reference.

2013-08-30 16:31  dstrubbe

	* [r11202] src/poisson/poisson.F90: Fixing a mistake in r11195:
	  wrong argument order to optional_default.

2013-08-30 18:32  xavier

	* [r11203] src/main/casida.F90, src/main/casida_inc.F90: For
	  performance reasons, the casida_get_rho function accesses
	  directly
	  the blocks of states, instead of using states_get_state.

2013-08-30 19:05  xavier

	* [r11204] src/system/system.F90: Bugfix: Theta should not be used
	  if complex scaling is not enabled.

2013-08-30 19:16  dstrubbe

	* [r11205] src/main/casida_inc.F90: Removing apostrophe.

2013-08-30 19:21  dstrubbe

	* [r11206] src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90: Better checking of validity
	  of input parameters for BerkeleyGW, and making it possible to
	  avoid calculating diagonal Vxc matrix elements.

2013-08-30 20:06  dstrubbe

	* [r11207] testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/10-berkeleygw.test: * Making
	  BerkeleyGW test run in parallel.
	  * Another test run for unocc mode. Note that is using the new
	  functionality I added recently, allowing unocc to use a different
	  set of k-points from what was used in 'gs'.

2013-08-30 20:52  dstrubbe

	* [r11208] src/main/casida.F90: Making a routine casida_count_pairs
	  to find the number of occupied-unoccupied pairs in Casida. It
	  does not use the casida_t type, in preparation for being called
	  from elsewhere.

2013-08-30 21:43  dstrubbe

	* [r11209] testsuite/finite_systems_1d/02-neon_mpi.test: More
	  extensive testing of 1D neon.

2013-08-30 22:36  xavier

	* [r11210] external_libs/fortrancl/cl_kernel_low.c: Bugfix: A
	  function had the wrong uppercase name.

2013-08-30 23:45  xavier

	* [r11212] external_libs/fortrancl/cl_platform.f90: Bugfix: fixed
	  out of bounds access when the number of platforms in the
	  system is larger than the requested number of platforms.

2013-08-31 00:37  dstrubbe

	* [r11214] src/states/cmplxscl.F90, src/system/system.F90: I prefer
	  this approach to handling theta for poisson, as a follow-up to
	  r11195 and r11204. Theta will be zero unless complex-scaling is
	  being used.

2013-08-31 00:40  dstrubbe

	* [r11215] src/system/system.F90: We don't need to call
	  poisson_init for independent particles. This should settle the
	  test failure for
	  complex_scaling/01-harmonic-oscillator.01-independent.inp.

2013-08-31 01:26  dstrubbe

	* [r11216] src/system/system.F90: Reverting r11215. For periodic
	  systems, we need a Poisson solver for the external potential, as
	  Xavier points out. It doesn't matter for either of the periodic
	  independent-particles tests in the testsuite though: I guess
	  because they are neutral user-defined species.

2013-08-31 01:40  dstrubbe

	* [r11217] testsuite/finite_systems_1d/02-neon_mpi.04-unocc.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.05-casida.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.test,
	  testsuite/finite_systems_1d/Makefile.am: Adding Casida test in
	  1D, to complement the very slow N2 test.

2013-08-31 18:05  dstrubbe

	* [r11218]
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.04-unocc.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.test: Parameters that
	  allow all states to be converged in the neon test. But the
	  oscillator strengths still differ somewhat between different
	  machines.

2013-08-31 19:08  dstrubbe

	* [r11219] testsuite/finite_systems_1d/02-neon_mpi.04-unocc.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.05-casida.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.test,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/03-neon.test,
	  testsuite/finite_systems_1d/Makefile.am: Doing unocc with an
	  orbital-dependent functional seems to be the root of the troubles
	  with the test runs I added for neon: keeping the density fixed
	  doesn't mean all that much in this case. Instead, I will do unocc
	  and casida with LDA for neon.

2013-08-31 19:19  dstrubbe

	* [r11220] src/main/casida.F90: Casida should require the exact
	  mesh.

2013-08-31 19:20  dstrubbe

	* [r11221] testsuite/finite_systems_1d/03-neon.test: Finding
	  something that runs unocc and Casida properly in 1D seems doomed.
	  Disabling the test for now.

2013-08-31 19:23  dstrubbe

	* [r11222] src/poisson/poisson.F90: Setting an appropriate default
	  Poisson solver for 1D complex scaling.

2013-08-31 22:15  dstrubbe

	* [r11223] src/main/casida.F90, src/main/unocc.F90,
	  src/opt_control/opt_control.F90, src/states/excited_states.F90,
	  src/states/states.F90: * Moved routine 'occupied_states' to
	  states_m from excited_states_m for convenience, since it does not
	  relate directly the objects defined in excited_states_m.
	  * Moved casida_count_pairs to states_count_pairs, to make it
	  accessible from a lower level than casida_m.

2013-09-02 17:26  micael

	* [r11224] src/species/ps_upf.F90: * More informative error message
	  when not finding a tag in the UPF file format.

2013-09-02 17:29  micael

	* [r11225] src/species/species.F90: * Clarified supported UPF
	  versions in the Species block documentation.

2013-09-02 18:00  acastro

	* [r11228] src/hamiltonian/hamiltonian_base_inc.F90,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.test,
	  testsuite/finite_systems_2d/Makefile.am: A couple of lines of the
	  Rashba spin-orbit operator were not very clear.
	  
	  Also, added a test that demonstrates the use of effective atomic
	  units for 2D
	  electron gas quantum dots.

2013-09-03 08:28  acastro

	* [r11229]
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp:
	  Some computers seem to have problems with this test using the cg
	  eigensolver
	  (others don't). It probably has to do with different random
	  initial guesses,
	  but in any case it is solved using a different eigensolver.

2013-09-03 20:20  dstrubbe

	* [r11231] src/main/unocc.F90, src/xc/xc.F90: Caveat about unocc
	  for orbital-dependent functionals. Have I forgotten any other
	  cases that are orbital-dependent?

2013-09-04 08:35  joseba

	* [r11232] src/basic/profiling.F90: Added the ability to print the
	  minimum execution time of a function in the profiling

2013-09-04 09:49  marques

	* [r11233] libxc/src/gga_x_pbe.c: Corrected bug in PBEint

2013-09-04 09:59  marques

	* [r11234] libxc/src/gga_x_pbe.c: Sorry, a 0 in the wrong place...
	  don't know how it got there ;)

2013-09-04 16:39  micael

	* [r11235] libxc/TODO: Yet another set of missing functionals from
	  libxc.

2013-09-04 19:48  dstrubbe

	* [r11236] src/poisson/poisson.F90, src/poisson/poisson_fft.F90:
	  Initial implementation of support for q-points (q=k-k') in FFT
	  Poisson solver, for use in calculating exact exchange in periodic
	  systems. This is not yet used.

2013-09-05 01:46  xavier

	* [r11237] src/system/forces.F90, src/system/forces_inc.F90:
	  X(forces_from_potential) now stores the result in an array,
	  rather
	  than inside the geo object.

2013-09-05 03:40  xavier

	* [r11238] testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.test: Added a test
	  for the forces in periodic systems.

2013-09-05 03:48  xavier

	* [r11239] src/system/forces.F90, src/system/forces_inc.F90:
	  Started the implementation of the calculation of the forces by
	  blocks.

2013-09-05 04:52  xavier

	* [r11240] src/main/casida_inc.F90,
	  src/opt_control/propagation.F90, src/scf/scf.F90,
	  src/system/forces.F90, src/system/forces_inc.F90,
	  src/td/propagator.F90, src/td/td.F90: Now forces_calculate
	  receives a hamiltonian argument.

2013-09-05 13:58  xavier

	* [r11241] src/system/forces_inc.F90: The gradient required for the
	  forces is now calculated by blocks.

2013-09-05 14:52  xavier

	* [r11242] src/main/geom_opt.F90: Geometry optimization honors the
	  StatesPack variable.

2013-09-05 15:42  dstrubbe

	* [r11243] src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/target_classical_inc.F90, src/td/td_calc.F90,
	  src/td/td_write.F90: Unused variables.

2013-09-06 06:10  xavier

	* [r11244] share/opencl/Makefile.am, share/opencl/cl_complex.h,
	  share/opencl/cl_rtype.h, src/system/forces.F90,
	  src/system/forces_inc.F90: The calculation of the gradient of the
	  density, required for the
	  forces, is now done in batch form.

2013-09-06 12:51  xavier

	* [r11245] share/opencl/forces.cl: I forgot to include this file in
	  my last commit.

2013-09-09 09:32  marques

	* [r11246] libxc/src/Makefile.am, libxc/src/gga_x_ityh.c,
	  libxc/src/gga_x_lv_rpw86.c, libxc/src/gga_x_pw86.c,
	  libxc/src/util.h: Added functional gga_x_lv_rpw86

2013-09-09 14:05  marques

	* [r11247] libxc/TODO: Another functional for the TODO list

2013-09-09 14:53  marques

	* [r11248] libxc/src/gga_x_n12.c: N12_SX is a hybrid GGA, not a GGA

2013-09-10 08:26  micael

	* [r11249] src/grid/partition.F90: * Changed the partitioning of
	  the partition in order to fix the problem that appeared when the
	  number of partitions was larger than the number of points per
	  process. This should also improve the load balancing.

2013-09-10 14:32  micael

	* [r11250] src/grid/partition.F90: * Bug fixed. An expression was
	  wrong in my previous commit.

2013-09-13 08:56  marques

	* [r11251] libxc/src/hyb_gga_xc_pbeh.c: Added another reference to
	  PBE0

2013-09-15 01:43  xavier

	* [r11252] src/hamiltonian/hamiltonian_base_inc.F90: Improved the
	  check for the Rashba term.

2013-09-15 01:46  xavier

	* [r11253] src/hamiltonian/hamiltonian_base_inc.F90: Proper check
	  for Rashba.

2013-09-15 02:33  xavier

	* [r11254] src/td/Makefile.am, src/td/cpmd.F90,
	  src/td/cpmd_inc.F90, src/td/propagator.F90, src/td/td.F90,
	  testsuite/finite_systems_3d/22-time_propagation.04-td_md.inp,
	  testsuite/finite_systems_3d/22-time_propagation.05-td_fast_md.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/real_time/01-etrs.02-td.inp,
	  testsuite/real_time/01-etrs.03-td_lanczos.inp,
	  testsuite/real_time/02-aetrs.02-td.inp,
	  testsuite/real_time/02-aetrs.03-td_lanczos.inp,
	  testsuite/real_time/03-exp_mid.02-td.inp,
	  testsuite/real_time/05-cpmd.01-gs.inp,
	  testsuite/real_time/05-cpmd.02-verlet.inp,
	  testsuite/real_time/05-cpmd.03-vel_verlet.inp,
	  testsuite/real_time/05-cpmd.04-xyz-anim.inp,
	  testsuite/real_time/05-cpmd.test,
	  testsuite/real_time/10-bomd.02-td.inp,
	  testsuite/real_time/10-bomd.03-td_restart.inp,
	  testsuite/real_time/Makefile.am: * Removed the CPMD
	  implementation, since it is not used.
	  
	  * The MoveIons variable is boolean, but in several tests the
	  value
	  'vel_verlet', defined by CPMD, was given instead of 'yes'.

2013-09-15 02:54  xavier

	* [r11255]
	  testsuite/finite_systems_3d/22-time_propagation.01-gs.inp,
	  testsuite/finite_systems_3d/22-time_propagation.02-td_domains.inp,
	  testsuite/finite_systems_3d/22-time_propagation.03-td_domains_states.inp,
	  testsuite/finite_systems_3d/22-time_propagation.04-td_md.inp,
	  testsuite/finite_systems_3d/22-time_propagation.05-td_fast_md.inp,
	  testsuite/finite_systems_3d/22-time_propagation.test,
	  testsuite/finite_systems_3d/Makefile.am,
	  testsuite/real_time/05-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.01-gs.inp,
	  testsuite/real_time/05-time_propagation.02-td_domains.inp,
	  testsuite/real_time/05-time_propagation.03-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp,
	  testsuite/real_time/05-time_propagation.test,
	  testsuite/real_time/Makefile.am: Moved the time propagation test
	  to the real_time directory.

2013-09-15 03:28  xavier

	* [r11256] src/scf/lcao.F90, src/states/states_calc.F90,
	  src/system/subspace.F90: Some modules do not really use
	  states_block_m.

2013-09-15 11:10  acastro

	* [r11257] src/opt_control/propagation.F90: Bug fix: optimal
	  control with Ehrenfest failed when using more than one
	  atom (still it is not working, the implementation is half way).

2013-09-15 18:50  acastro

	* [r11258] src/opt_control/propagation.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90, src/system/forces.F90:
	  Added a few things that were missing in the optimal control part,
	  causing
	  segfaults with certain run modes.

2013-09-16 10:31  micael

	* [r11259] libxc/src/gga_k_tflw.c: * A reference was slightly
	  wrong.

2013-09-16 12:29  marques

	* [r11260] libxc/src/Makefile.am, libxc/src/gga_k_meyer.c: Added
	  another GGA kinetic energy

2013-09-16 12:34  marques

	* [r11261] libxc/src/gga_k_meyer.c, libxc/src/gga_k_tflw.c,
	  libxc/src/xc.h: Changed name of functional from gga_k_absr(1,2)
	  to gga_k_absp(1,2)
	  Had forgotten factor of 8 in gga_k_meyer

2013-09-16 20:18  acastro

	* [r11262] src/opt_control/propagation.F90: Bug fix: the atomic
	  numbers were missing somewhere in the optimal control
	  part.

2013-09-17 17:16  acastro

	* [r11263] src/opt_control/propagation.F90: Bug fix: there was a
	  hamiltonian initialization missing.

2013-09-18 10:57  acastro

	* [r11264] src/ions/ion_dynamics.F90,
	  src/opt_control/propagation.F90, src/system/forces.F90: Optimal
	  control for quantum-classical systems may now use more than one
	  classical particle (the ion-ion interaction was not considered
	  before this).

2013-09-19 01:41  xavier

	* [r11265] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90, src/system/forces.F90,
	  src/system/forces_inc.F90: Implemented calculation of the forces
	  from the non-local potentials
	  using blocks of states.

2013-09-19 02:12  xavier

	* [r11266] src/hamiltonian/hamiltonian_base_inc.F90: Merged the
	  matrix multiplication in the calculation of the forces.

2013-09-19 02:47  xavier

	* [r11267] src/hamiltonian/hamiltonian_base_inc.F90,
	  src/system/forces_inc.F90: The force from the non-local potential
	  is now calculated for all
	  directions at once.

2013-09-19 14:11  xavier

	* [r11268] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Fixed the calculation
	  of the forces in parallel, that was broken after
	  my last commits.

2013-09-19 14:13  marques

	* [r11269] libxc/src/Makefile.am, libxc/src/gga_x_sfat.c,
	  libxc/src/hyb_gga_xc_camy_blyp.c, libxc/src/lda_x.c,
	  libxc/src/xc.h: Submitted patch by Rolf Wuerdemann implementing
	  CAMY_BLYP

2013-09-19 15:06  marques

	* [r11270] libxc/src/gga_x_ityh.c, libxc/src/gga_x_sfat.c,
	  libxc/src/lda_x.c, libxc/src/mgga_x_m08.c, libxc/src/util.c,
	  libxc/src/util.h: A little cleaning:
	  *) now the names of the attenuation interactions are defined
	  *) little routine that returns the enhancement factors avoiding
	  duplicated code

2013-09-19 19:34  acastro

	* [r11271] src/opt_control/propagation.F90, src/system/forces.F90:
	  Some more dwarf steps towards the implementation of oct for
	  Ehrenfest
	  dynamics.

2013-09-19 21:33  acastro

	* [r11272] src/opt_control/propagation.F90, src/system/forces.F90:
	  Bug fix: my previous commit did not allow for more than one atom.

2013-09-20 04:25  xavier

	* [r11273] src/hamiltonian/hamiltonian_base_inc.F90: Appartently
	  --disable-f90-forall was confused by a loop in one of my
	  commits.

2013-09-20 11:26  marques

	* [r11274] libxc/src/Makefile.am, libxc/src/gga_x_ak13.c,
	  libxc/src/libxc_master.F90, libxc/src/xc.h: Added exchange
	  functional of Armiento and Kummel that is becoming so popular

2013-09-20 11:49  marques

	* [r11275] libxc/src/xc.h: Little think I forgot to save before
	  committing...

2013-09-20 15:41  acastro

	* [r11276] src/opt_control/propagation.F90: One calculation worked
	  only for 1D cases, or for lasers polarized only in the
	  x direction.

2013-09-20 21:02  dstrubbe

	* [r11277] testsuite/real_time/10-bomd.04-xyz-anim.inp,
	  testsuite/real_time/10-bomd.test,
	  testsuite/real_time/Makefile.am: Restoring a test for the
	  oct-xyz-anim utility, since the only one was removed along with
	  CPMD in r11254.

2013-09-20 21:34  dstrubbe

	* [r11278] testsuite/real_time/05-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.test: Fixing problems
	  with r11255: a spurious copy of a file was created, and the
	  filenames were not updated in the test file after the move.
	  Please check whether a test passes when you change it, and pay
	  attention to build failures afterwards.

2013-09-23 08:19  micael

	* [r11279] libxc/src/libxc_master.F90: * XC_GGA_K_ABSR1 and
	  XC_GGA_K_ABSR2 should also be included in the Fortran interface.

2013-09-23 09:36  micael

	* [r11280] libxc/src/libxc_master.F90, libxc/src/xc_f.c: * The C
	  part of the Fortran interface for the gga_ak13_get_asymptotic
	  function was missing.
	  * Made the Fortran name of the gga_ak13_get_asymptotic consistent
	  with the C name.

2013-09-25 19:20  dstrubbe

	* [r11281] src/system/xc_kli_inc.F90, src/system/xc_oep_x_inc.F90:
	  Reverting mistaken "bugfix" in r11184, and adding clarifying
	  comment.

2013-09-30 15:47  joseba

	* [r11282] src/basic/io_binary.c, src/basic/mpi_debug.F90,
	  src/grid/mesh_partition.F90, src/grid/partition.F90: With this
	  change the partition is read/write in parallel if MPI2 is
	  available

2013-09-30 18:54  marques

	* [r11283] libxc/src/libxc_master.F90: Let's see if it now compiles
	  in chum

2013-09-30 19:09  marques

	* [r11284] libxc/src/libxc_master.F90: Sorry, there was one line I
	  forgot to delete

2013-10-01 06:49  joseba

	* [r11285] src/basic/io_binary.c, src/grid/mesh_partition.F90:
	  Let's be more conservative and more verbose, to see if it runs in
	  mauchly

2013-10-01 07:51  joseba

	* [r11286] src/grid/mesh_partition.F90: MPI call must be only
	  called if compiled

2013-10-02 10:51  joseba

	* [r11287] src/grid/par_vec.F90: More robust way to init par_vec:
	  * Added check-points with MPI_Barrier to sync all the processes
	  * Don't compute if the number of points is equal to 0

2013-10-02 11:23  joseba

	* [r11288] src/basic/io_binary_f.F90, src/grid/partition.F90: Made
	  an explicit Fortran interface for write_header

2013-10-03 18:19  acastro

	* [r11289] src/ions/geometry.F90, src/opt_control/propagation.F90:
	  Improvement on the backwards propagation of optimal control runs,
	  when both
	  ions are electrons are propagated.

2013-10-04 07:10  marques

	* [r11290] libxc/src/libxc_master.F90, libxc/src/xc_f.c: Changed
	  function into subroutine. Apparently, there is no way to keep all
	  compilers happy when interfacing functions between C and Fortran!

2013-10-04 09:27  joseba

	* [r11291] src/grid/partition.F90: bugfix to r11282 :
	  - The printing to the screen is there to avoid an optimization
	  (that I really don't undertand why)
	  - A deallocation was done twice
	  - Return value was missing with parallel I/O

2013-10-04 14:38  dstrubbe

	* [r11292] src/grid/nl_operator.F90: The debug output for
	  finite-difference weights overflowed the format for derivatives
	  1D test. I made it much larger.

2013-10-04 15:22  acastro

	* [r11293] src/opt_control/propagation.F90, src/system/forces.F90:
	  This allows using soft-Coulomb atoms when doing optimal control
	  for Ehrenfest
	  dynamics.

2013-10-06 14:48  acastro

	* [r11294] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/propagation.F90, src/system/forces.F90:
	  Improvement on the optimal control for Ehrenfest dynamics: now it
	  works for
	  arbitrary potentials (not only for soft-Coulomb and harmonic
	  potentials, as
	  before).

2013-10-06 19:25  acastro

	* [r11295] src/opt_control/opt_control_c_inc.F90,
	  src/system/forces.F90: The calculation of a component of the
	  force on the costate variables in
	  optimal control runs only worked in 1D cases.

2013-10-06 19:26  acastro

	* [r11296] src/opt_control/opt_control_c_inc.F90: My previous
	  commit had a "stop" that should not be there.

2013-10-07 08:47  joseba

	* [r11297] src/basic/io_binary.c: Created a C interface to correct
	  compilation errors with two underscores

2013-10-07 15:50  dstrubbe

	* [r11298] src/basic/messages.F90, src/basic/multicomm.F90: *
	  Enabling format argument to messages_write_str.
	  * Using this to write out max available sizes of parallelization
	  groups in debug mode.

2013-10-08 16:15  joseba

	* [r11299] src/grid/partition.F90: Count is a reserved word in
	  Fortran

2013-10-08 21:10  dstrubbe

	* [r11301] scripts/backport.sh: Making backport.sh work properly
	  for subversion 1.8: it was giving an extra line with "URL::" in
	  the commit message.

2013-10-08 22:10  dstrubbe

	* [r11302] src/basic/multicomm.F90: * Minor bugfix to r7250: the
	  sanity check for parallelization gives misleading information
	  when there are slaves, since real_group_sizes is compared to the
	  total number of MPI tasks in the output, whereas the error
	  condition is flagged when mc%group_sizes and MPI tasks do not
	  match.
	  * Typo.

2013-10-09 12:32  marques

	* [r11303] libxc/src/gga_x_pbe.c: Added revAPBE for the kinetic
	  energy

2013-10-09 13:10  marques

	* [r11304] libxc/src/gga_x_pbe.c: Added K_APBEINT and K_REVAPBEINT

2013-10-10 10:34  joseba

	* [r11305] src/grid/partition.F90: Let's see if this solves the
	  optimization problem with gfortran 4.4

2013-10-10 11:15  micael

	* [r11306] libxc/testsuite/atomic_densities,
	  libxc/testsuite/atomic_densities/H,
	  libxc/testsuite/atomic_densities/Li: * Added atomic densities and
	  corresponding derivatives for H and Li atoms.

2013-10-10 11:36  micael

	* [r11307] libxc/src/gga_k_tflw.c: Added XC_GGA_K_TFVW.

2013-10-10 12:03  marques

	* [r11308] libxc/TODO, libxc/src/gga.c, libxc/src/gga_c_op.c,
	  libxc/src/gga_k_dk.c, libxc/src/gga_k_meyer.c,
	  libxc/src/gga_k_ol1.c, libxc/src/gga_k_ol2.c,
	  libxc/src/gga_k_pearson.c, libxc/src/gga_k_tflw.c,
	  libxc/src/gga_x_2d_b86.c, libxc/src/gga_x_2d_b86_mgc.c,
	  libxc/src/gga_x_2d_b88.c, libxc/src/gga_x_2d_pbe.c,
	  libxc/src/gga_x_airy.c, libxc/src/gga_x_ak13.c,
	  libxc/src/gga_x_am05.c, libxc/src/gga_x_b86.c,
	  libxc/src/gga_x_b86_mgc.c, libxc/src/gga_x_b88.c,
	  libxc/src/gga_x_bayesian.c, libxc/src/gga_x_bpccac.c,
	  libxc/src/gga_x_c09x.c, libxc/src/gga_x_dk87.c,
	  libxc/src/gga_x_g96.c, libxc/src/gga_x_herman.c,
	  libxc/src/gga_x_htbs.c, libxc/src/gga_x_ityh.c,
	  libxc/src/gga_x_lg93.c, libxc/src/gga_x_lv_rpw86.c,
	  libxc/src/gga_x_mpbe.c, libxc/src/gga_x_optx.c,
	  libxc/src/gga_x_pbe.c, libxc/src/gga_x_pbea.c,
	  libxc/src/gga_x_pw86.c, libxc/src/gga_x_pw91.c,
	  libxc/src/gga_x_rpbe.c, libxc/src/gga_x_sfat.c,
	  libxc/src/gga_x_sogga11.c, libxc/src/gga_x_ssb_sw.c,
	  libxc/src/gga_x_vmt.c, libxc/src/gga_x_wc.c,
	  libxc/src/libxc_master.F90, libxc/src/mgga_x_m05.c,
	  libxc/src/mgga_x_m06l.c, libxc/src/mgga_x_m08.c,
	  libxc/src/mix_func.c, libxc/src/test.c, libxc/src/util.h,
	  libxc/src/work_gga_c.c, libxc/src/work_gga_x.c, libxc/src/xc.h,
	  libxc/src/xc_f.c, libxc/testsuite/xc-get_data.c,
	  libxc/testsuite/xc-regression.c: Started implementing Kxc for the
	  GGAs

2013-10-10 15:03  joseba

	* [r11309] src/grid/partition.F90: Corrected the partition write
	  with MPI2, the offset has to have the type MPI_OFFSET_KIND and
	  has to skip the header too.
	  MPI_File_close inside an "if" statement to avoid the optimization
	  Corrected the number of print lines with messages_fatal
	  
	  This passes all the tests with gfortran 4.4 in my machine (Ubuntu
	  12.04, x86_64, openmpi), let's hope in tigger too.

2013-10-10 17:29  acastro

	* [r11310] src/opt_control/propagation.F90: Bug fix: a variable
	  should be initialized to zero.

2013-10-10 18:17  dstrubbe

	* [r11311] testsuite/real_time/02-aetrs.04-kick.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp: Removing useless
	  OutputInterval lines from testsuite input files which do not have
	  Output set anyway. I put RestartWriteInterval instead for a few,
	  which will have some effect.

2013-10-10 18:45  dstrubbe

	* [r11312] src/basic/messages.F90: Error-handling for exceeding
	  line length in messages_write_logical, since this kind of error
	  seems to be happening for the CL buildslaves on lascar.

2013-10-10 20:38  acastro

	* [r11313] src/ions/geometry.F90, src/opt_control/propagation.F90:
	  Some error corrections in the backwards propagation for optimal
	  control runs.

2013-10-11 03:41  dstrubbe

	* [r11314] src/basic/space.F90: Please don't try to initialize
	  members of types. They often cause
	  errors from valgrind. In this case, we had:
	  
	  Uninitialised value was created by a stack allocation
	  at 0x6A660D: __system_m_MOD_system_init (system.F90:56)

2013-10-11 09:42  marques

	* [r11315] libxc/src/gga.c, libxc/src/gga_x_b86.c,
	  libxc/src/test.c, libxc/src/util.c, libxc/src/util.h,
	  libxc/src/work_gga_x.c: We can now calculate third derivatives
	  for the exhange GGAs. For now only B86 works. Note that most
	  tests are failing at the moment.

2013-10-11 09:44  marques

	* [r11316] libxc/src/gga_x_lb.c: This should fix the problem of
	  David.

2013-10-11 09:45  marques

	* [r11317] libxc/src/gga_x_lb.c: Sorry, made an error in the
	  prvious commit

2013-10-11 10:01  marques

	* [r11318] libxc/src/gga_x_b88.c: Kxc for B88-like functionals

2013-10-11 10:17  helbig

	* [r11319] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/main/run.F90,
	  src/scf/ground_state.F90, src/scf/rdmft.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  testsuite/functionals/06-rdmft.01-hf_smear.inp,
	  testsuite/functionals/06-rdmft.02-gs.inp,
	  testsuite/functionals/06-rdmft.test,
	  testsuite/functionals/Makefile.am: Added orbital minimization for
	  RDMFT and added RDMFT test

2013-10-11 11:20  marques

	* [r11320] libxc/src/gga_x_pbe.c: Added Kxc to exchange PBE-like
	  functionals

2013-10-11 11:30  marques

	* [r11321] libxc/src/gga_x_wc.c: Added Kxc to X_WC

2013-10-11 12:39  marques

	* [r11322] libxc/src/gga_x_g96.c, libxc/src/gga_x_htbs.c,
	  libxc/src/gga_x_pw86.c, libxc/src/gga_x_pw91.c,
	  libxc/src/gga_x_rpbe.c: Added KXC for X_G96, X_RPBE, X_HTBS,
	  X_PW86, and X_PW91

2013-10-11 14:34  joseba

	* [r11323] src/basic/io_binary_f.F90, src/grid/partition.F90:
	  Created interfaces to MPI_File_read/write and started using them
	  with the partition

2013-10-11 14:37  joseba

	* [r11324] src/basic/io_binary_f.F90: Deleted useless comments

2013-10-11 16:38  joseba

	* [r11325] src/basic/io_binary_f.F90: Getting the size in bytes of
	  the actual vector, instead of assuming a given size

2013-10-11 17:05  dstrubbe

	* [r11326] src/basic/messages.F90: Error-checking for trying to
	  write too long a line in messages_write_str. Perhaps this is what
	  is happening for the lascar CL slaves?

2013-10-11 20:53  dstrubbe

	* [r11327] src/grid/mesh_init.F90: Some extra checking in the
	  construction of the mesh, to detect problems relating to MPI2
	  failures, which have been seen for OpenMPI on MacOS, and for
	  IntelMPI in one case.

2013-10-11 21:20  dstrubbe

	* [r11328] src/opt_control/initst.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/scf/rdmft.F90, src/states/states_calc.F90,
	  src/states/states_calc_inc.F90, src/td/td.F90: * The RDMFT test
	  recently added was failing on some gfortran slaves with error:
	  Assertion "leading_dimension_is_known(array)" failed in line 446
	  of file "basic/utils.F90".
	  This was due to the curious way states_rotate was written. By
	  making it a template_routine and thus removing real( ) from the
	  call to lalg_gemm, the leading dimension becomes known.
	  * I noted in the variable reference that TransformStates and
	  friends are complex coefficients, though the imaginary part is
	  ignored for real wavefunctions. I suggest they should just be
	  real in this case instead, for clarity to the user.

2013-10-11 21:28  dstrubbe

	* [r11329] src/scf/rdmft.F90: * Fixing initialization of integers
	  with real constants.
	  * Removing unused variable.

2013-10-11 21:30  dstrubbe

	* [r11330] src/basic/io_binary_f.F90: The status argument to MPI
	  routines is supposed to be an array of size MPI_STATUS_SIZE. The
	  code with MPI_Get_Count would not compile when using mpi.mod from
	  MPICH2 without this change.

2013-10-11 21:34  dstrubbe

	* [r11331] src/basic/io_binary_f.F90: Follow-up to previous commit:
	  the declaration of 'status' now should be inside #ifdef MPI2.
	  read_count can be too since it is only used in that case. Also, I
	  forgot one MPI_STATUS_SIZE.

2013-10-14 10:33  joseba

	* [r11332] src/basic/io_binary_f.F90: Deleted forgotten duplicated
	  code
	  Uncommented the checks of reads

2013-10-14 10:43  joseba

	* [r11333] src/basic/io_binary.c, src/basic/io_binary.h,
	  src/basic/io_binary_f.F90, src/grid/partition.F90: Added svn Id
	  to several files

2013-10-14 11:00  acastro

	* [r11334] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/propagation.F90, src/system/forces.F90:
	  Correction of some parts of the optimal control code that wrongly
	  assunmed 1D
	  systems.

2013-10-15 13:07  theophilou

	* [r11335] src/scf/rdmft.F90: set default number of scf rdmft
	  iterations to 100 and hard copied maximum number of iterations
	  needed for bisection inside rdmft

2013-10-15 17:52  dstrubbe

	* [r11336] src/hamiltonian/hamiltonian.F90, src/species/ps_upf.F90,
	  src/system/forces.F90: * Fixing push/pop's.
	  * Doxygen comments.
	  * Formatting.

2013-10-15 18:33  dstrubbe

	* [r11337] testsuite/finite_systems_3d/21-lobpcg.test: Slightly
	  loosening tolerance so a test can pass on Stampede.

2013-10-15 18:41  dstrubbe

	* [r11338] src/math/math.F90: PUSH/POP's to 'hermite' were 90% of
	  the DebugLevel=2 output from
	  finite_systems_3d/13-full_potential_hydrogen.01-gs.inp.

2013-10-15 22:23  dstrubbe

	* [r11339] src/basic/opencl.F90: Suppressing useless \n character
	  in build log in OpenCL.

2013-10-16 01:11  dstrubbe

	* [r11340] src/frozen/Makefile.am: Missing dependency.

2013-10-16 10:12  acastro

	* [r11341] src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/propagation.F90: Bug fix: a couple of lines were
	  swapped.

2013-10-16 14:45  marques

	* [r11342] libxc/src/work_gga_x.c: Bug fixed: a factor of 4 too
	  much in the calculation of Fxc

2013-10-16 21:32  dstrubbe

	* [r11343] m4/mpi.m4: You can now use 'mpi.mod' instead of
	  'mpif.h', thus enabling compile-time checking of interfaces to
	  MPI routines, by passing --enable-mpi_mod to configure. The
	  default remains to use 'mpif.h' instead.

2013-10-16 21:54  dstrubbe

	* [r11344] src/basic/io_binary_f.F90: The interfaces in mpi.mod for
	  OpenMPI 1.4 seem to have the file_handle argument of
	  MPI_File_set_atomicity as out or inout, requiring a change in the
	  intent of our calling routines.

2013-10-16 22:36  dstrubbe

	* [r11345] src/sternheimer/Makefile.am,
	  src/sternheimer/phonons_lr.F90, src/system/pert_inc.F90:
	  CalculationMode = vib_modes now works for complex wavefunctions.

2013-10-16 23:15  dstrubbe

	* [r11346] src/sternheimer/phonons_lr_inc.F90: Forgot to add this
	  file in previous commit.

2013-10-17 00:30  dstrubbe

	* [r11347] src/main/casida.F90: Making a separate routine
	  casida_solve from the subsubroutine casida_work.solve_casida.

2013-10-17 02:33  dstrubbe

	* [r11348] src/basic/opencl.F90: Fix to r11339: we should remove
	  only the last newline, or else later
	  lines of output get truncated.

2013-10-17 07:28  marques

	* [r11349] libxc/src/gga_x_airy.c, libxc/src/test.c,
	  libxc/src/util.c, libxc/src/util.h: Added Kxc to GGA_X_AIRY

2013-10-17 09:55  marques

	* [r11350] libxc/src/gga.c, libxc/src/gga_x_ak13.c,
	  libxc/src/test.c, libxc/src/util.h, libxc/src/work_gga_x.c: Added
	  Kxc to AK13

2013-10-17 11:06  marques

	* [r11351] libxc/src/work_gga_x.c: Bug fix: had some lines
	  misplaced, so Fxc and Kxc were badly calculated if (and only if)
	  Vxc was not calculated.

2013-10-17 11:32  theophilou

	* [r11352] src/system/v_ks.F90: Removed vxc for rdmft since it is
	  not used for the moment

2013-10-17 16:12  theophilou

	* [r11353] src/system/v_ks.F90,
	  testsuite/functionals/06-rdmft.test: not calling v_a_xc for
	  RDMFT, this should fix the memory leak

2013-10-17 18:57  acastro

	* [r11354] src/opt_control/propagation.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90: The possibility of
	  moving the ions was only available for one of the optimal
	  control target types. Started to allow that option for all of
	  them.

2013-10-17 20:12  dstrubbe

	* [r11355] src/main/casida.F90: Casida keeps track of the
	  dimensionality of space itself for when 'sb%dim' is not available
	  directly, and CasidaMomentumTransfer is read only to that size,
	  not MAX_DIM.

2013-10-17 21:14  dstrubbe

	* [r11356] src/system/v_ks.F90: A variable was not initialized for
	  independent particles.

2013-10-17 21:40  dstrubbe

	* [r11357] src/basic/blacs_proc_grid.F90,
	  src/grid/boundaries_inc.F90, src/grid/mesh_init.F90,
	  src/poisson/poisson_isf.F90, src/scf/lcao_inc.F90,
	  src/states/states_calc_inc.F90: Changes of first element to whole
	  array argument in some MPI calls, to allow compilation with
	  mpi.mod. I checked that in none of these cases does ifort gives a
	  warning about making an array temporary for the call, and they
	  are all fairly small arrays anyway, so this shouldn't be a
	  significant concern.

2013-10-17 22:19  dstrubbe

	* [r11358] src/main/casida.F90, src/main/casida_inc.F90: Making
	  some routine templated to enable 'casida' runs with complex
	  wavefunctions (although only eps_diff, petersilka, and
	  tamm_dancoff theory levels are actually possible). casida_write
	  is moved into casida_work. casida_write has wider columns for
	  complex output. The code to fix the phase is made general to the
	  complex case. A complex vib_modes density is read, but converted
	  to real for use in forces.
	  Forces are enabled too

2013-10-18 07:33  marques

	* [r11359] libxc/src/gga_x_b86.c, libxc/src/gga_x_b86_mgc.c,
	  libxc/src/gga_x_bayesian.c, libxc/src/gga_x_bpccac.c,
	  libxc/src/test.c, libxc/src/util.c, libxc/src/util.h: Added Kxc
	  to B86, B86_MGC, BAYESIAN, and BPCCAC.

2013-10-18 08:14  marques

	* [r11360] libxc/src/gga_x_b86_mgc.c, libxc/src/gga_x_bpccac.c,
	  libxc/src/gga_x_c09x.c, libxc/src/gga_x_htbs.c,
	  libxc/src/gga_x_wc.c, libxc/src/test.c, libxc/src/util.c,
	  libxc/src/util.h: KXC for C08x plus a series of bug corrections.

2013-10-18 18:21  dstrubbe

	* [r11361] src/states/restart_inc.F90: Sanity checks in restart.

2013-10-18 21:25  dstrubbe

	* [r11362] src/main/casida.F90, src/main/casida_inc.F90: * Updating
	  variable reference about complex wavefunctions for
	  CalculationMode = casida.
	  * Adding additional check and comments about complex
	  variational/Casida.
	  * Fixing writing of header for eps_diff, casida, etc. files.

2013-10-18 21:28  dstrubbe

	* [r11363] src/basic/messages.F90: More robust attempt to catch
	  problems with too-long lines in messages_write_str. The CL slaves
	  have a very long line for -I${share}/opencl due to how it is
	  installed, and so when DebugLevel = 1 and we try to write this,
	  it exceeds the length of the character arrays in messages.

2013-10-19 22:29  dstrubbe

	* [r11364] src/basic/opencl.F90: Solution to the ongoing CL debug
	  info writing error on lascar: the
	  compilation flags string could be quite long, so I am breaking it
	  up
	  into two parts to make it less likely to overflow the messages
	  string.

2013-10-19 23:28  dstrubbe

	* [r11365] src/utils/casida_spectrum.F90: oct-casida_spectrum:
	  Using iostat instead of the implicit goto construct with 'end='
	  in a read statement.

2013-10-20 23:20  dstrubbe

	* [r11366] src/main/casida_inc.F90, src/utils/casida_spectrum.F90:
	  * oct-casida_spectrum now can detect complex casida output files
	  (the dipole matrix elements are complex) and calculate spectra
	  from them.
	  * Fixing alignment of columns in header for complex casida output
	  files.

2013-10-20 23:25  dstrubbe

	* [r11367] src/ions/kpoints.F90: When the KPoints block is used,
	  the code was first initializing the k-points structures for the
	  default KPointsGrid, namely the gamma point, and then
	  reallocating and overwriting the structures for the user-defined
	  k-points. This is confusing and causes a small memory leak. Now
	  we just do one initialization.

2013-10-21 03:19  dstrubbe

	* [r11368] src/main/main.F90: More info about multiple datasets in
	  CalculationMode.

2013-10-21 03:24  dstrubbe

	* [r11369] src/states/restart.F90: restart_read_rho did not
	  deallocate an array.

2013-10-21 14:29  acastro

	* [r11370] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/propagation.F90, src/system/forces.F90:
	  Eliminated one unused argument passed to a subroutine, and
	  separated one
	  subroutine into two, which will be useful later.

2013-10-21 17:10  dstrubbe

	* [r11371] src/main/main.F90: Improving formatting in variable
	  reference for CalculationMode multi-dataset example.

2013-10-21 20:45  dstrubbe

	* [r11372] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_fft.F90, src/poisson/solver_1d_init_inc.F90,
	  src/poisson/solver_2d_inc.F90, src/poisson/solver_3d_inc.F90: *
	  Consolidating the poisson init routines for each dimensionality
	  into 1, since they are identical for FFT kernel except for the
	  soft Coulomb parameter in 1D, and there is no good reason to
	  treat these cases separately. Renaming routine poisson3D_init
	  accordingly to poisson_kernel_init.
	  * Adding a subroutine to return the q-point of the Poisson
	  kernel.
	  * Fixing PUSH/POP's in poisson_fft.

2013-10-21 21:53  dstrubbe

	* [r11373] src/system/v_ks.F90: * Simplifying treatment of time in
	  v_ks_calc by setting time=0 when it is not supplied as an
	  optional argument.
	  * By analogy to ks%calc%total_density, ks%calc%Imtotal_density
	  should be nullified too.

2013-10-22 02:29  dstrubbe

	* [r11374] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/solver_3d_inc.F90: Renamed solver_3d_inc.F90 in
	  accordance with its current contents.

2013-10-22 09:44  acastro

	* [r11375] src/system/forces.F90: Bug fix: a couple of signs were
	  wrong.

2013-10-22 09:49  joseba

	* [r11376] src/basic/mpi_debug.F90: Uppercase one letter

2013-10-22 10:38  joseba

	* [r11377] src/basic/io_binary.c: Separated the reading into the
	  header and the body

2013-10-22 11:33  marques

	* [r11378] libxc/src/mgga_x_ms.c: Updated reference

2013-10-22 13:29  joseba

	* [r11379] src/basic/io_binary.c: * Moved avobe the new function
	  * Simplified the function of get_info

2013-10-22 23:12  dstrubbe

	* [r11380] src/hamiltonian/hamiltonian_inc.F90,
	  src/system/v_ks.F90: Making messages_not_implemented calls for
	  H(F) with k-points at the point of reading TheoryLevel, and
	  broadening the condition in X(exchange_operator): what matters is
	  the number of k-points in the full, not symmetry-reduced,
	  Brillouin zone.

2013-10-23 07:04  joseba

	* [r11381] src/poisson/poisson_fft.F90: Corrected a POP_SUB

2013-10-23 10:19  acastro

	* [r11382]
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/Makefile.am: Added a new optimal
	  control test for the recently introduced "classical"
	  targets. Also, added to the Makefile.am some files that were
	  previously not
	  taken into account.

2013-10-23 19:03  dstrubbe

	* [r11383] src/poisson/poisson.F90,
	  src/poisson/poisson_init_direct_inc.F90: * q-point is now passed
	  to FFT Poisson solver initialization.
	  * New routine to regenerate FFT kernel with a different q-point.

2013-10-23 19:21  dstrubbe

	* [r11384] src/scf/scf.F90: The eigenvalues and occupations were
	  not being recomputed for MaximumIter = 0.

2013-10-23 19:42  dstrubbe

	* [r11385] src/main/main.F90: Fix to r11371 which made some lines
	  in the example disappear.

2013-10-23 21:13  dstrubbe

	* [r11386] src/system/xc_oep.F90, src/system/xc_oep_inc.F90: *
	  Critical bugfix to r9961: a calculation with full OEP and spinors
	  was enabled but it was silently doing nothing. Now it is blocked
	  since that is not implemented.
	  * Bugfix: an attempt to block full OEP parallel in states was
	  ineffective since it was placed before initialization of the OEP
	  method.
	  * I am marking OEP with spinors as experimental, since the
	  implementation in r9961 was commented as "a work in progress";
	  moreover it is not in the testsuite, and an example KLI
	  calculation I tried generated NaN's.

2013-10-23 21:49  dstrubbe

	* [r11387] src/main/casida.F90, src/main/casida_inc.F90,
	  src/states/excited_states.F90, src/states/excited_states_inc.F90:
	  Renaming 'sigma' to 'kk' in states_pair_t, to begin generalizing
	  to k-points rather than just spins.

2013-10-23 22:26  dstrubbe

	* [r11388] src/opt_control/target_excited_inc.F90: One more %sigma
	  -> %kk forgotten in the last commit.

2013-10-24 15:43  dstrubbe

	* [r11389] src/poisson/poisson_fft.F90: Correction of use of
	  q-point in FFT Poisson solver: it must come in at the same
	  footing as 'ixx' since it is in reduced coordinates, i.e. between
	  -0.5 and 0.5. This entails a bit of reorganization of the
	  poisson_fft_gg_transform subroutine.

2013-10-24 22:54  dstrubbe

	* [r11392] src/ions/kpoints.F90: Reverting r11367: I was
	  accidentally undoing my change in r10912. While that one did
	  cause a small memory leak, I can just deallocate the appropriate
	  things rather than undo it. Now there is a comment explaining
	  too. klattice needs to be nullified so that SAFE_DEALLOCATE_P
	  recognizes it as not yet associated in the call to kpoints_end I
	  added.

2013-10-24 23:06  dstrubbe

	* [r11395] src/frozen/Makefile.am: Missing dependency.

2013-10-25 09:18  acastro

	* [r11396] src/opt_control/controlfunction.F90,
	  src/opt_control/propagation.F90, src/system/forces.F90,
	  testsuite/optimal_control/11-classical.test: Correction of some
	  misplaced factors, and of some missing occupation factors,
	  which affected some optimal control runs with more than one
	  electron.

2013-10-25 09:48  acastro

	* [r11397] src/td/propagator.F90, src/td/propagator_qoct_inc.F90:
	  The qoct_tddft_propagator did not allow the possibility of moving
	  the ions.

2013-10-25 15:58  dstrubbe

	* [r11398] testsuite/fix_testsuite.py: Updating fix_testsuite.py
	  from BerkeleyGW r5630 which incorporates various minor
	  improvements and fixes.

2013-10-25 17:15  dstrubbe

	* [r11399] src/main/casida.F90, src/states/states.F90: New approach
	  for selecting basis for Casida: rather than listing the
	  single-particle states to be used, we can set an energy window
	  with CasidaKSEnergyWindow and include all transitions with energy
	  difference less than that.

2013-10-25 19:24  dstrubbe

	* [r11400] src/main/casida_inc.F90: * Providing format so matrix
	  elements do not have garbage for imaginary part in Casida
	  excitations files when running with complex wavefunctions.
	  * Changing column header from "Spin" to "Spin/k" in preparation
	  for enabling k-points in Casida.

2013-10-27 08:45  acastro

	* [r11401] src/opt_control/propagation.F90, src/system/forces.F90,
	  testsuite/optimal_control/11-classical.test: A couple of
	  procedures (regarding OCT runs) only worked for one-electron
	  systems.

2013-10-27 19:23  dstrubbe

	* [r11402] testsuite/oct-run_regression_test.pl,
	  testsuite/real_time/13-absorption-spin.06-td_spinkick.inp,
	  testsuite/real_time/13-absorption-spin.07-spectrum_triplet.inp,
	  testsuite/real_time/13-absorption-spin.test: * Allowing a switch
	  back from a utility to the main executable in a test file.
	  * Using this to add test runs for "kick_spin" to obtain triplets.

2013-10-27 19:54  dstrubbe

	* [r11403] src/td/spectrum.F90: Splitting up calculation and
	  writing parts for cross section tensor.

2013-10-28 20:13  dstrubbe

	* [r11404] src/main/casida.F90, src/main/casida_inc.F90: Undoing
	  r10016 which set the oscillator strengths to zero for Casida
	  triplets. While this is true for electric-dipole transitions, if
	  we just don't set it to zero, we do get something useful, the
	  spin part of the magnetic-dipole oscillator strengths, which
	  indeed agrees quite well with results from kick_spin in td
	  (http://www.tddft.org/programs/octopus/wiki/index.php/Tutorial:Triplet_Spectra).

2013-10-28 20:45  dstrubbe

	* [r11405] src/system/forces_inc.F90: Missing PUSH/POP.

2013-10-28 21:14  dstrubbe

	* [r11406] src/system/forces_inc.F90: Removing useless variable.

2013-10-28 21:26  dstrubbe

	* [r11407] src/system/forces_inc.F90: Reordering loops from r11244
	  to avoid optimization problem leading to seg-fault at -O3 on
	  chum_x86_64_intel_test. I suspect this way may be faster anyway
	  since it follows the ordering in
	  grad_psib(idir)%states_linear(ii)%X(psi)(ip) -- correct me if I
	  am wrong...

2013-10-28 21:51  dstrubbe

	* [r11408] src/states/states.F90: Secretly, you could use
	  SpinComponents = polarized, even though this did not show up in
	  the variable reference. I made this possibility explicit, and
	  changed a place it was referred to in documenting Occupations
	  block to the more standard version spin_polarized.

2013-10-28 22:26  dstrubbe

	* [r11409] src/hamiltonian/kick.F90: Improving variable reference
	  formatting.

2013-10-29 00:55  dstrubbe

	* [r11410] src/system/forces.F90: Unused variables.

2013-10-29 09:06  joseba

	* [r11411] src/basic/io_binary_f.F90, src/grid/partition.F90: Moved
	  all the MPI I/O logic to the io_binary_f.F90 of the reading.
	  Files are opened and closed there.
	  Added interfaces for the writing of the headers for all the
	  data-types.
	  Simplified accordingly the partition.F90

2013-10-29 11:11  joseba

	* [r11412] src/basic/io_binary_f.F90, src/grid/mesh_init.F90,
	  src/grid/partition.F90: * Moved to io_binary_f.F90 the MPI I/O
	  logic of writing.
	  * Simplified accordingly the partition.F90
	  * The writing of the header is decided by the type of the vector
	  * xlocal has to be initialized always

2013-10-29 11:13  joseba

	* [r11413] src/basic/io_binary_f.F90: Reverted accidentally deleted
	  line

2013-10-29 12:07  joseba

	* [r11414] src/system/Makefile.am, src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90, src/system/eigen_cg.F90,
	  src/system/eigen_cg_inc.F90, src/system/eigen_evolution_inc.F90,
	  src/system/eigen_lobpcg.F90, src/system/eigen_lobpcg_inc.F90,
	  src/system/eigen_mg_inc.F90, src/system/eigen_plan_inc.F90,
	  src/system/eigen_rmmdiis.F90, src/system/eigen_rmmdiis_inc.F90,
	  src/system/eigensolver.F90, src/system/elf.F90,
	  src/system/linear_solver.F90, src/system/magnetic.F90,
	  src/system/output.F90, src/system/output_berkeleygw_inc.F90,
	  src/system/output_etsf_inc.F90, src/system/output_fio.F90,
	  src/system/output_h_inc.F90, src/system/output_me.F90,
	  src/system/output_me_inc.F90, src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90, src/system/xc_kli_pauli_inc.F90,
	  src/system/xc_ks_inversion.F90: Added the SVN Id to several files

2013-10-29 16:28  askhl

	* [r11415] src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90: clean up a bit and add asserts
	  for things we dont want to do presently in arpack. Explicitly set
	  variables to avoid warnings from valgrind. Always set initial
	  residual to 1. Remove some debug output that seems to be at odds
	  with some compilers

2013-10-29 17:11  askhl

	* [r11416] src/system/v_ks.F90: fix calculation of complex-scaled
	  spin-polarized densities. A better way would be to use some
	  abstraction in the long run

2013-10-29 17:28  askhl

	* [r11417] src/states/cmplxscl.F90: for complex scaling, add
	  function to assign score based on a state's energy for the
	  purposes of occupying them in some order. So far this is not very
	  systematic but we will figure out something better

2013-10-29 17:37  askhl

	* [r11418] src/states/states_calc.F90: call code from cmplxscl

2013-10-29 18:00  askhl

	* [r11419] src/states/Makefile.am, src/states/smear.F90,
	  src/states/states.F90: for complex scaling, add support for
	  assigning occupation with spin polarization

2013-10-29 18:18  dstrubbe

	* [r11420] src/hamiltonian/hamiltonian_base_inc.F90: Typos.

2013-10-29 19:07  askhl

	* [r11421] src/states/density.F90, src/xc/functionals.F90,
	  src/xc/functionals_list.F90, src/xc/vxc_inc.F90: add code for
	  complex-scaled PBE and for spin-polarized complex-scaled LDA

2013-10-29 20:12  dstrubbe

	* [r11422] src/basic/multicomm.F90: Making an error message more
	  informative.

2013-10-29 20:27  dstrubbe

	* [r11423] src/basic/parser.F90: Let's check that 'variables' and
	  'inp' exist before creating 'exec/parser.log': sometimes I
	  accidentally run octopus in the wrong directory and then end up
	  creating this file which I need to delete.

2013-10-29 20:58  dstrubbe

	* [r11424] src/basic/parser.F90: Oops, removing incorrect (and
	  cyclic) dependency.

2013-10-30 02:31  dstrubbe

	* [r11426] src/utils/Makefile.am, src/utils/casida_spectrum.F90: A
	  rotation can be applied in oct-casida_spectrum.

2013-10-30 03:47  dstrubbe

	* [r11427] src/utils/Makefile.am: Some compilers object to my
	  ordering of .a files on the link line for oct-casida_spectrum.

2013-10-30 12:17  marques

	* [r11428] libxc/src/gga_x_am05.c, libxc/src/gga_x_wc.c,
	  libxc/src/util.c, libxc/src/util.h: Added Kxc to X_AM05

2013-10-30 12:30  marques

	* [r11429] libxc/src/gga_x_dk87.c, libxc/src/util.c,
	  libxc/src/util.h: Kxc for DK87_R1 and DK87_R2

2013-10-30 12:58  marques

	* [r11430] libxc/src/gga_x_herman.c, libxc/src/gga_x_lg93.c,
	  libxc/src/util.c, libxc/src/util.h: Added Kxc for hermand and
	  lg93

2013-10-30 13:32  marques

	* [r11431] libxc/src/gga_x_dk87.c, libxc/src/gga_x_lv_rpw86.c,
	  libxc/src/util.c, libxc/src/util.h: Added Kxc to lv_rpw86
	  added missing flags to dk87 (thanks Micael)

2013-10-30 14:41  marques

	* [r11432] libxc/src/gga_x_mpbe.c, libxc/src/gga_x_optx.c,
	  libxc/src/gga_x_sogga11.c, libxc/src/util.c, libxc/src/util.h:
	  Kxc for optx, mpbe, sogga11 and variants

2013-10-30 15:20  marques

	* [r11433] libxc/src/gga_x_ssb_sw.c, libxc/src/gga_x_vmt.c,
	  libxc/src/util.c, libxc/src/util.h: SSB_SW and VMT also have Kxc.
	  I finished all exchange GGA for which Kxc was relatively simple
	  to calculate.

2013-10-30 20:57  dstrubbe

	* [r11434] src/utils/casida_spectrum.F90: Fixes for
	  CasidaSpectrumRotationMatrix:
	  * Reading made matrix transposed
	  * Orthogonal matrix definition uses transpose
	  * Warning, not error, if not orthogonal
	  * More reasonable precision for orthogonality check, so one does
	  not need to enter something accurate to 14 digits...

2013-10-30 22:04  dstrubbe

	* [r11435] src/utils/casida_spectrum.F90,
	  testsuite/linear_response/01-casida.test: Bugfixes for the three
	  directions of the spectrum in oct-casida_spectrum; the isotropic
	  average is not affected.
	  * The length units for the x, y, z dipole matrix elements were
	  not considered, so the results were incorrect when using
	  eV_Angstrom units.
	  * The spectrum for x, y, z was mistakenly divided by the
	  dimensionality of space; this is only supposed to be done for the
	  isotropic average.
	  * Better labels for the spectrum.
	  * Corresponding updates to test values.

2013-10-31 15:35  dstrubbe

	* [r11437] src/ions/simul_box.F90: Two parsing blocks were not
	  being ended.

2013-10-31 17:04  joseba

	* [r11438] configure.ac, m4/isf.m4: Added the configure for the new
	  ISF library

2013-11-01 18:52  dstrubbe

	* [r11440] src/grid/batch_ops_inc.F90: Some assertions.

2013-11-01 19:02  dstrubbe

	* [r11441] src/basic/blacs.F90: Adding intent's to blacs interface
	  for numroc, and removing 'implicit none' from each interface,
	  which I don't think is doing anything.

2013-11-01 19:04  dstrubbe

	* [r11442] src/basic/write_iter_low.c: Marking what is const of
	  arguments in write_iter_low.c.

2013-11-02 01:55  dstrubbe

	* [r11443] src/basic/blacs.F90, src/basic/c_pointer.F90,
	  src/basic/command_line.F90, src/basic/global.F90,
	  src/basic/loct.F90, src/basic/papi_f.F90, src/basic/parser.F90,
	  src/basic/string.F90, src/basic/varinfo.F90,
	  src/basic/write_iter.F90, src/grid/nl_operator.F90,
	  src/grid/ob_interface.F90, src/grid/operate_f.F90,
	  src/ions/symmetries.F90, src/math/blas.F90,
	  src/math/checksum_interface.F90, src/math/fftw.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/math/lapack.F90,
	  src/math/loct_math.F90, src/math/metis.F90,
	  src/math/minimizer.F90, src/math/mix_inc.F90,
	  src/math/ode_solver_inc.F90, src/math/pblas.F90,
	  src/math/pfft.F90, src/math/root_solver.F90,
	  src/math/root_solver_inc.F90, src/math/scalapack.F90,
	  src/math/solvers_inc.F90, src/math/sparskit_inc.F90,
	  src/math/splines.F90, src/xc/vxc_inc.F90: All interfaces now have
	  'implicit none' (at least as far as my Perl script could check).
	  Xavier pointed out that without this the compiler doesn't mind if
	  types are not declared for some arguments.

2013-11-02 17:58  dstrubbe

	* [r11444] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Removing unnecessary
	  argument, pointer, and target attributes.

2013-11-02 23:27  dstrubbe

	* [r11445] src/hamiltonian/epot.F90,
	  src/system/energy_calc_inc.F90: Unused/useless variables.

2013-11-02 23:36  dstrubbe

	* [r11446] src/basic/utils.F90: The format in output_tensor was
	  valid only for ndim <= 3.

2013-11-02 23:37  dstrubbe

	* [r11447] src/grid/partition.F90: Memory leak in partition
	  writing.

2013-11-03 00:41  dstrubbe

	* [r11448] src/basic/varinfo.F90: Interfaces for varinfo C
	  functions.

2013-11-03 00:52  dstrubbe

	* [r11449] src/basic/write_iter.F90: Interfaces for C routines in
	  write_iter.

2013-11-03 10:29  acastro

	* [r11450] src/td/td_write.F90: With the new interfaces, I think
	  there were a lot of intent(in)'s that should
	  be intent(inout).

2013-11-03 12:05  acastro

	* [r11451] src/opt_control/propagation.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90,
	  src/opt_control/target_velocity_inc.F90,
	  testsuite/optimal_control/08-velocities.03-movingions.inp,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/Makefile.am: Some code simplification:
	  now one cannot use the oct_tg_velocity target with
	  moving ions, because the same functionality can be obtained with
	  the oct_tg_classical target (actually, the previous
	  implementation of this
	  had a bug).
	  
	  Removed the corresponding test.

2013-11-03 19:03  dstrubbe

	* [r11452] src/system/forces_inc.F90: Useless variable.

2013-11-03 19:06  dstrubbe

	* [r11453] src/basic/varinfo.F90, src/math/loct_math.F90: Two more
	  interfaces.

2013-11-03 19:27  askhl

	* [r11454] testsuite/complex_scaling/01-harmonic-oscillator.test:
	  in complex scaling test, refrain from testing eigenvalue of 9th
	  state. Higher states are numerically more sensitive and do not
	  really improve the test

2013-11-03 19:51  dstrubbe

	* [r11455] src/ions/symmetries.F90: Interfaces were misspelled and
	  so had no effect. Also, I put them at
	  module scope like other interfaces in the code.

2013-11-04 01:51  dstrubbe

	* [r11456] src/frozen/fio_mesh.F90, src/grid/mesh.F90,
	  src/grid/mesh_init.F90, src/math/checksum_interface.F90: *
	  Renaming module in checksum_interface to match the filename.
	  * This module was not 'used' in the main place it should have
	  been, namely mesh_init; now it is, and removed from mesh.F90
	  where it is not relevant.

2013-11-04 04:09  dstrubbe

	* [r11457] src/grid/mesh_init.F90, src/hamiltonian/kick.F90,
	  src/states/restart.F90: * Interface for hilbert_index_to_point.
	  * Using interfaces for write_iter in kick, and correcting intent.
	  * Interfaces for block_signals and unblock_signals.

2013-11-04 04:37  dstrubbe

	* [r11458] src/poisson/poisson.F90, src/states/smear.F90: Unused
	  and useless variables.

2013-11-04 08:50  joseba

	* [r11459] m4/isf.m4: Added additional libraries to the ISF
	  compilation

2013-11-04 09:23  joseba

	* [r11460] m4/isf.m4: Spelling

2013-11-04 13:25  joseba

	* [r11461] m4/isf.m4: Added the include directory of ISF

2013-11-04 18:02  askhl

	* [r11462] src/xc/vxc_inc.F90: calculate polarization only for
	  spin-polarized case, obviously. Made less obvious by the
	  ridiculous tendency of this archaic technology to attribute
	  problems to wrong line numbers even with -O0.

2013-11-05 07:51  joseba

	* [r11463] m4/isf.m4: Removed BLAS and LAPACK lines, following the
	  advice of David
	  
	  Thanks David!

2013-11-05 08:08  joseba

	* [r11464] testsuite/components/01-derivatives_1d.test,
	  testsuite/components/02-derivatives_2d.test,
	  testsuite/components/03-derivatives_3d.test,
	  testsuite/components/04-hartree_3d_cg.test,
	  testsuite/components/05-hartree_3d_fft.test,
	  testsuite/components/06-hartree_3d_isf.test,
	  testsuite/components/07-cholesky_serial.test,
	  testsuite/components/08-mgs.test,
	  testsuite/components/09-qr.test,
	  testsuite/components/10-hartree_pfft.test,
	  testsuite/components/11-hartree_cl.test,
	  testsuite/components/12-hartree_direct_3d.test,
	  testsuite/components/13-hartree_3d_mg.test,
	  testsuite/components/14-center-geom.test,
	  testsuite/components/15-cholesky_parallel.test: Added svn Id to
	  several files

2013-11-05 08:13  joseba

	* [r11465] testsuite/components/06-hartree_3d_isf.test: Reverted
	  accidentally changed file

2013-11-05 08:40  joseba

	* [r11466] src/poisson/poisson_libisf.F90,
	  testsuite/components/16-hartree_3d_libisf.01-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.02-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.test: Added a test for
	  LibISF
	  Removed warnings of deallocations. Actually, nothing is allocated
	  here
	  Less verbose library calls
	  Code make-up

2013-11-05 08:47  joseba

	* [r11467] testsuite/components/16-hartree_3d_libisf.test: Forgot
	  to add the svn Id
	  Forgot to mention that now the default is the parallel ISF

2013-11-05 08:59  joseba

	* [r11468] src/poisson/poisson_libisf.F90: Set also to quiet the
	  other kernel

2013-11-05 11:00  joseba

	* [r11469] src/states/Makefile.am, src/states/cmplxscl.F90,
	  src/states/excited_states.F90, src/states/excited_states_inc.F90,
	  src/states/modelmb_density_matrix.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_exchange_syms_inc.F90,
	  src/states/modelmb_particles.F90, src/states/ob_green.F90,
	  src/states/physics_op.F90, src/states/physics_op_inc.F90,
	  src/states/smear.F90, src/states/states_block.F90,
	  src/states/states_block_inc.F90, src/states/states_group.F90,
	  src/states/states_inc.F90, src/states/states_io.F90: More svn Ids
	  Doxygen

2013-11-05 12:45  askhl

	* [r11470] src/hamiltonian/epot.F90, src/xc/vxc_inc.F90: make
	  user-defined charge densities work properly with complex scaling

2013-11-05 14:39  askhl

	* [r11471] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/complex_scaling/03-stark.test,
	  testsuite/complex_scaling/Makefile.am: new complex scaling test
	  with PBE and stark ionization. Add comments to the other tests to
	  communicate their purpose.

2013-11-05 15:15  marques

	* [r11472] libxc/src/gga_x_am05.c: Bug fix. David, can you check if
	  the test is passed now?

2013-11-05 16:14  joseba

	* [r11473] src/poisson/poisson_libisf.F90: Clearer variable
	  reference of PoissonSolverISFParallelData

2013-11-05 20:01  dstrubbe

	* [r11474] src/utils/casida_spectrum.F90: Moving unnecessarily
	  repeated code out of a loop.

2013-11-06 08:03  joseba

	* [r11475] src/poisson/poisson_libisf.F90: Corrected the
	  description of PoissonSolverISFParallelData following the
	  recomendations of David

2013-11-06 16:31  dstrubbe

	* [r11476] src/ions/vibrations.F90, src/sternheimer/phonons_lr.F90:
	  Making 'infrared' part of the vibrations_t object.

2013-11-06 19:48  dstrubbe

	* [r11477] src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90: Separating computation of
	  Born charges from infrared.

2013-11-06 20:20  dstrubbe

	* [r11478] src/grid/cube.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90: Unused or useless variables.
	  Also, hiding one used only for MPI.

2013-11-06 20:44  dstrubbe

	* [r11479] src/ions/vibrations.F90, src/main/phonons_fd.F90,
	  src/sternheimer/phonons_lr.F90: Operations on vib%dyn_matrix were
	  being performed in the opposite order from the usual Fortan
	  convention, which is a bit confusing and slower. Since the matrix
	  is symmetrical, we can just swap all the indices.

2013-11-06 21:23  acastro

	* [r11480] src/opt_control/Makefile.am, src/opt_control/target.F90,
	  src/opt_control/target_spin_inc.F90,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.test,
	  testsuite/optimal_control/Makefile.am: Added a target to
	  manipulate the spin of a system, and added a corresponding
	  test.

2013-11-06 22:05  dstrubbe

	* [r11481] src/basic/write_iter_low.c: Making an argument const.

2013-11-06 22:23  dstrubbe

	* [r11482] src/system/pert_inc.F90: Swapping indices of dynamical
	  matrix in one more place forgotten in r11479.

2013-11-07 12:12  askhl

	* [r11483] src/hamiltonian/species_pot.F90: simplify. Add assertion

2013-11-07 13:06  marques

	* [r11484] libxc/src/gga_c_wi.c, libxc/src/test.c,
	  libxc/src/util.h, libxc/src/work_gga_c.c: First attempt at Kxc
	  for the GGA correlations. For now, the WI functional is working.
	  This is however a very simple functional with most of the
	  dependencies missing. A lot of work is still left...

2013-11-07 16:26  dstrubbe

	* [r11485] testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.test,
	  testsuite/linear_response/04-vib_modes.02-vib_modes.inp,
	  testsuite/linear_response/04-vib_modes.test: Tightening
	  convergence criteria for vib_modes runs.

2013-11-07 16:46  dstrubbe

	* [r11486] src/ions/vibrations.F90, src/main/phonons_fd.F90,
	  src/sternheimer/phonons_lr.F90: * The dynamic matrix is now
	  written out by row.
	  * Also, when not symmetrizing, the opposite half of the matrix is
	  being copied over than before.

2013-11-07 18:34  dstrubbe

	* [r11487] src/basic/unit_system.F90, src/ions/vibrations.F90: *
	  Comment on invcm unit.
	  * Reducing duplicated operations in symmetrizing dynamical
	  matrix.

2013-11-07 18:36  dstrubbe

	* [r11488] testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test: Disabling the
	  recent optimal control tests until they can be fixed. Leaving so
	  many tests failing makes it likely that new problems will not be
	  noticed...

2013-11-07 19:14  dstrubbe

	* [r11489] src/ions/vibrations.F90, src/main/phonons_fd.F90,
	  src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: * A header for
	  vib_modes/dynamical_matrix is now written, noting the unit.
	  * Message about symmetrizing matrix and discrepancy from
	  symmetry.
	  * Updating query for test matches, and moving to more robust
	  LINEFIELD.

2013-11-07 19:25  dstrubbe

	* [r11490] src/ions/vibrations.F90, src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: * The units were
	  wrong for the dynamical matrix. Moving to the appropriate
	  energy/length^2 also puts them in a more convenient range (not
	  10^9).
	  * Removing now unused variable.

2013-11-07 19:46  dstrubbe

	* [r11491] src/ions/vibrations.F90: Breaking up a line made long by
	  macro replacement.

2013-11-07 20:04  dstrubbe

	* [r11492] src/ions/vibrations.F90: * More convenient name for
	  variable with file unit for writing dynamical matrix.
	  * Changing single-letter variables.
	  * Removing unused variables.

2013-11-07 20:19  dstrubbe

	* [r11493] src/ions/vibrations.F90, src/main/phonons_fd.F90,
	  src/sternheimer/phonons_lr.F90: * The vibrations module handles
	  its own header-writing.
	  * The file for the dynamical matrix is not left open but is
	  opened and closed when writing occurs. This makes sure the output
	  is not buffered, so if the calculation is interrupted, the
	  results so far are in the file.

2013-11-07 20:24  dstrubbe

	* [r11494] src/sternheimer/phonons_lr.F90: * Moving 'iunit' to
	  local scope of calc_infrared and renaming to be more specific.
	  * Using 'trim' to avoid warning of overflow of string size.

2013-11-07 21:32  dstrubbe

	* [r11495] src/states/linear_response.F90,
	  src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: * Making a separate
	  routine to set linear-response wavefunctions and density to zero.
	  * Using this when starting each mode in phonon calculation, since
	  the previous mode is probably not a good starting point. In
	  particular, starting from the previous mode results allows small
	  numerical differences to accumulate over the whole run. Results
	  should be more reproducible now. They certainly obey symmetry a
	  bit better.
	  * Doxygen comments.

2013-11-07 22:43  dstrubbe

	* [r11496] src/ions/vibrations.F90, src/sternheimer/phonons_lr.F90:
	  Linear-response vib_modes now stores calculated elements of the
	  dynamical matrix (and infrared vectors) and reads them on
	  restart, starting with the first mode that was not yet converged.
	  Restarting from an interrupted calculation previously could waste
	  a lot of time on modes already calculated, reading restart
	  wavefunctions and densities, setting up, confirming the results
	  satisfied the Sternheimer equation, writing restart data to disk,
	  and computing the row of the dynamical matrix. Now these things
	  do not have to be done at all.

2013-11-08 12:04  acastro

	* [r11497] src/opt_control/finalcheck_inc.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90, src/td/td_init_inc.F90,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test: Some modifications
	  to make the g95 compiler happy about two tests.

2013-11-08 16:35  dstrubbe

	* [r11498] src/sternheimer/phonons_lr.F90: * Removed
	  'UseRestartDontSolve' in linear-response vib_modes, for which the
	  proper restart from the saved dynamical matrix I recently
	  implemented is a much better replacement.
	  * Bugfix (regarding performance) to r8180: when I moved to use
	  forces_derivative instead of pert_expectation_value, I
	  accidentally left it inside a loop over modes. As a result,
	  rather than reducing the amount of work a bit, instead it
	  multiplied the work by the number of modes. Now this is fixed.

2013-11-09 04:25  xavier

	* [r11499] libxc/testsuite/xc-get_data.c: Converted a C++ style
	  comment into a C style one.

2013-11-09 14:46  xavier

	* [r11500] src/grid/mesh_batch_inc.F90: Avoided an overflow in the
	  count of operations.

2013-11-09 15:05  xavier

	* [r11501] src/grid/mesh_init.F90: Hilbert meshes were broken since
	  [11457]. Declaring arrays as
	  arguments of C functions causes problems, I am not sure why. I
	  will
	  add a test soon.

2013-11-10 10:47  acastro

	* [r11503] src/math/tdfunction.F90,
	  testsuite/optimal_control/12-spintarget.test: Removed some
	  unnecessary assertion, and reduced the precision of one test
	  whose result slightly depends on the compiler.

2013-11-10 19:12  xavier

	* [r11504] src/xc/vxc_inc.F90: The allocations of arrays passed to
	  libxc is now done in an
	  independent routine.

2013-11-11 16:15  xavier

	* [r11505] src/grid/batch_ops_inc.F90, src/math/fft.F90,
	  src/math/fft_inc.F90: Added some operation counts.

2013-11-11 19:18  askhl

	* [r11506] src/ions/geometry.F90, src/species/species.F90: atomic
	  distance check now only prints a warning instead of giving a
	  fatal error, when the involved species are user-defined
	  potentials and their ilk

2013-11-11 22:01  dstrubbe

	* [r11507] src/math/fft.F90: Unused variable, PUSH/POP's.

2013-11-12 10:56  micael

	* [r11508] src/xc/vxc_inc.F90: * Bub fix: the calculation of GGA
	  and MGGA xc potentials was completely wrong due to a misplaced
	  "end if". This bug was introduced in [9729].

2013-11-13 02:39  dstrubbe

	* [r11509] src/basic/multicomm.F90: Removing limitation to 16
	  OpenMP threads, introduced in r3841, which was just for static
	  allocation of arrays.

2013-11-13 04:27  dstrubbe

	* [r11510] src/scf/scf.F90: Don't recalculate the KS potential if
	  MaximumIter = 0.

2013-11-13 04:39  dstrubbe

	* [r11511] src/basic/messages.F90: More space for info in error
	  message from SAFE_ALLOCATE and SAFE_DEALLOCATE_A,
	  SAFE_DEALLOCATE_P.

2013-11-13 17:20  joseba

	* [r11512] src/basic/utils.F90: Added the optional library of
	  LibISF

2013-11-14 04:30  dstrubbe

	* [r11513] testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.exx.inp,
	  testsuite/functionals/03-xc.gga_c_am05.inp,
	  testsuite/functionals/03-xc.gga_c_lm.inp,
	  testsuite/functionals/03-xc.gga_c_lyp.inp,
	  testsuite/functionals/03-xc.gga_c_p86.inp,
	  testsuite/functionals/03-xc.gga_c_pbe.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_jrgx.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_c_pw91.inp,
	  testsuite/functionals/03-xc.gga_c_xpbe.inp,
	  testsuite/functionals/03-xc.gga_x_am05.inp,
	  testsuite/functionals/03-xc.gga_x_b86.inp,
	  testsuite/functionals/03-xc.gga_x_b86_mgc.inp,
	  testsuite/functionals/03-xc.gga_x_b88.inp,
	  testsuite/functionals/03-xc.gga_x_bayesian.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r1.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r2.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_a.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_b.inp,
	  testsuite/functionals/03-xc.gga_x_g96.inp,
	  testsuite/functionals/03-xc.gga_x_lb.inp,
	  testsuite/functionals/03-xc.gga_x_lg93.inp,
	  testsuite/functionals/03-xc.gga_x_mpbe.inp,
	  testsuite/functionals/03-xc.gga_x_mpw91.inp,
	  testsuite/functionals/03-xc.gga_x_optb88_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optpbe_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optx.inp,
	  testsuite/functionals/03-xc.gga_x_pbe.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_jsjr.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_r.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_x_pbea.inp,
	  testsuite/functionals/03-xc.gga_x_pbek1_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_pw86.inp,
	  testsuite/functionals/03-xc.gga_x_pw91.inp,
	  testsuite/functionals/03-xc.gga_x_rpbe.inp,
	  testsuite/functionals/03-xc.gga_x_wc.inp,
	  testsuite/functionals/03-xc.gga_x_xpbe.inp,
	  testsuite/functionals/03-xc.gga_xc_b97.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_1.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_2.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_3.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_d.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_k.inp,
	  testsuite/functionals/03-xc.gga_xc_edf1.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_120.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_147.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_407.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_93.inp,
	  testsuite/functionals/03-xc.gga_xc_mpwlyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbe1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbelyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1c.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2c.inp,
	  testsuite/functionals/03-xc.gga_xc_xlyp.inp,
	  testsuite/functionals/03-xc.kli.inp,
	  testsuite/functionals/03-xc.lda_c_gl.inp,
	  testsuite/functionals/03-xc.lda_c_hl.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pw.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pw.inp,
	  testsuite/functionals/03-xc.lda_c_pw_mod.inp,
	  testsuite/functionals/03-xc.lda_c_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pz_mod.inp,
	  testsuite/functionals/03-xc.lda_c_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_vbh.inp,
	  testsuite/functionals/03-xc.lda_c_vwn.inp,
	  testsuite/functionals/03-xc.lda_c_vwn_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_wigner.inp,
	  testsuite/functionals/03-xc.lda_c_xalpha.inp,
	  testsuite/functionals/03-xc.lda_x.inp,
	  testsuite/functionals/03-xc.lda_xc_teter93.inp,
	  testsuite/functionals/03-xc.sic_pz.inp,
	  testsuite/functionals/03-xc.test: Replacing test runs with
	  CalculationMode = one_shot by CalculationMode = gs with
	  MaximumIter = 0. Matches are now from static/info. Such a
	  calculation should not be from FromScratch, in order to restart
	  from the preceding SCF run.

2013-11-14 04:38  dstrubbe

	* [r11514] testsuite/functionals/03-xc.test: Enabling test for
	  gga_x_lb. I wonder if the real problem was looking at Correlation
	  instead of Exchange?

2013-11-14 05:44  dstrubbe

	* [r11515] testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.test: Testing Int[n*v_xc] for each
	  functional. Committed with this perl script, and some manual
	  intervention.
	  
	  {{{
	  while (<>) {
	  if($_ =~ /match ; (.*?)\s*; GREP\(static\/info, '([^']*)
	  =',(.*)/) {
	  $name = $2;
	  printf("match ; %-39s; GREP\(static\/info, '%s =',$3\n", $1 . " "
	  . $name, $name);
	  $name1 = "Int[n*v_xc]";
	  $name2 = "Int\\[n\\*v_xc\\]";
	  printf("match ; %-39s; GREP\(static\/info, '%s =',$3\n", $1 . " "
	  . $name1, $name2);
	  } else {
	  print;
	  }
	  }
	  }}}

2013-11-14 17:50  dstrubbe

	* [r11516] testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.test: OEP EXX Int[n*v_xc] match
	  for testsuite/functionals/01-xc_1d.oep_exx.inp was failing. Most
	  slaves seem to agree on a value of roughly -769000, though my
	  MacBook had given -676005. However all the results are wrong
	  because the OEP was nowhere near convergence (residual = 1e6 >
	  1e-5 = tol) and the eigenvalues were being written as *******.
	  Setting OEPMixing = 0.001 still does not meet the tolerance but
	  gives a residual around 0.08 which is at least more like
	  convergence than divergence, and may give a more reproducible
	  value for the test match.

2013-11-14 17:58  dstrubbe

	* [r11517] src/system/xc_oep_inc.F90: Correcting misleading output
	  from full OEP: it always said "converged" even when it was not.

2013-11-14 18:43  dstrubbe

	* [r11518] src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_oep.F90: Passing the whole states object to
	  v_ks_init and down to xc_oep_init.

2013-11-14 18:50  dstrubbe

	* [r11519] src/sternheimer/sternheimer.F90,
	  src/system/linear_solver.F90, src/system/xc_oep.F90: The logic
	  for choosing a linear solver for Sternheimer should apply in
	  general for linear solvers, i.e. also for full OEP.

2013-11-14 19:10  dstrubbe

	* [r11520] scripts/backport.sh: Improvement to backport.sh for svn
	  1.8.

2013-11-14 19:29  dstrubbe

	* [r11521] testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/02-xc_2d.test: The 2D PRM test was
	  spin-unpolarized but restarting from spin-polarized Hartree-Fock
	  like the others, i.e. deliberately misunderstanding the restart
	  wavefunctions. We could run spin-polarized (neither Octopus and
	  libxc flag a problem when running spin-polarized), but the reason
	  it was unpolarized was that the PRM 2008 paper says "a
	  spin-polarized extension of the present functional is still
	  missing". Therefore to do a more reasonable calculation, we will
	  do SCF from scratch spin-unpolarized.

2013-11-14 20:28  dstrubbe

	* [r11522] src/main/Makefile.am, src/main/main.F90,
	  src/main/one_shot.F90, src/main/run.F90, src/scf/scf.F90:
	  Decommissioning CalculationMode = one_shot. Using gs with
	  MaximumIter = 0 instead has all the functionality of one_shot
	  plus a lot more, without duplicating any of the SCF code.

2013-11-15 01:02  dstrubbe

	* [r11526] src/states/states.F90: Although current DFT was removed
	  in r8079, the variable CurrentDFT remained around to confuse
	  users.

2013-11-15 21:32  dstrubbe

	* [r11528] src/xc/vxc_inc.F90: Bugfix: gga_x_lb with max-dim > 3
	  caused a segmentation fault. Correcting allocation.

2013-11-15 21:49  dstrubbe

	* [r11529] src/xc/vxc_inc.F90: Removing explicit use of dimension 3
	  in vxc calculation, which could cause problems when that is not
	  the actual dimension or maximum dimension. Probably not worth
	  backporting since I am not sure whether any calculation you can
	  actually do now would have a problem.

2013-11-15 23:33  dstrubbe

	* [r11530] src/basic/messages.F90: Comments about variables that
	  cannot use datasets.

2013-11-18 08:59  micael

	* [r11532] src/xc/vxc_inc.F90: * Fixed bug pointed out by Xavier:
	  vtau should be divided by 2 outside the space loop.

2013-11-18 09:46  micael

	* [r11534] PACKAGING: * Updated 4.1.x ChangeLog.
	  * Updated packaging info.
	  * Tagged version 4.1.2.

2013-11-18 14:36  umberto

	* [r11535] src/td/pes_mask.F90: Extend PESmask to parallelepiped
	  box shapes.

2013-11-18 17:37  micael

	* [r11536] src/xc/vxc_inc.F90: * Some cleaning in the xc_get_vxc
	  routine.

2013-11-19 13:26  joseba

	* [r11537] src/poisson/poisson.F90: Updated the reference of the
	  Poisson survey
	  Added a more verbose information about the chosen Poisson solver
	  
	  By Pablo and me

2013-11-19 13:32  joseba

	* [r11538] src/poisson/poisson.F90: typo

2013-11-20 16:54  umberto

	* [r11539] src/td/pes_mask.F90: * use states_get_state and
	  states_set_states when applying the mask.
	  * we can lift the experimental phase status of the module now.

2013-11-21 11:34  joseba

	* [r11540] src/poisson/poisson.F90: Changed from Hartree to Poisson
	  Updated the reference
	  Deleted duplicated information

2013-11-22 09:48  joseba

	* [r11541] src/td/td_write.F90: Added the possibility to write the
	  output of the td in a different folder. This is aimed to be able
	  to write in the local hard-drives instead of the shared NFS (or
	  similars)

2013-11-22 12:06  marques

	* [r11542] libxc/src/hyb_gga_xc_pbeh.c: Added variant of PBE0 with
	  mixing=1/3

2013-11-25 14:08  askhl

	* [r11543] src/states/states.F90: complex scaling - remove some
	  text output

2013-11-25 15:30  askhl

	* [r11544] src/system/energy_calc.F90: complex scaling: add
	  function to calculate kinetic matrix elements with the purpose of
	  distinguishing continuum states from bound ones or resonances.
	  Function added to energy_calc in order to not have cyclic
	  dependences but maybe it should be elsewhere

2013-11-25 15:32  askhl

	* [r11545] src/states/cmplxscl.F90: complex scaling: new parameter
	  ComplexScalingLocalizationRadius to help distinguish resonances
	  or bound states from continuum ones

2013-11-25 15:32  askhl

	* [r11546] src/states/smear.F90: avoid error when there is less
	  than one electron in complex scaling

2013-11-25 15:44  askhl

	* [r11547] src/hamiltonian/species_pot.F90,
	  src/states/states_calc.F90, src/system/eigensolver.F90,
	  src/xc/vxc_inc.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/complex_scaling/03-stark.test: complex scaling:
	  multiple improvements and fixes in PBE. Should now generally
	  work. For now, use a criterion to distinguish bound
	  states/resonances from continuum states which involves the part
	  of the norm outside/inside a certain radius for each state using
	  the new (not very general) parameter
	  ComplexScalingLocalizationRadius. Improve and update tests to
	  work with these changes. (Some new functions in eigensolver.F90
	  should probably be renamed and moved to other modules but it's
	  difficult because of dependency problems. Suggestions are
	  welcome)

2013-11-26 09:28  joseba

	* [r11548] src/td/td_write.F90: Corrected the error I made in
	  r11541

2013-11-27 22:35  xavier

	* [r11549] src/system/eigensolver.F90: Removed some debugging
	  output that shouldn't be there.

2013-11-28 09:03  joseba

	* [r11550] src/basic/io_binary.c: Return the error code found in
	  the reading of the header

2013-11-28 16:53  askhl

	* [r11551] src/xc/functionals.F90, src/xc/functionals_list.F90,
	  src/xc/vxc_inc.F90: add complex-scaled LB94. Get rid of
	  'optional' declarations of a few arguments that are really
	  mandatory.

2013-12-03 21:19  dstrubbe

	* [r11552] src/basic/global.F90, src/basic/mpi.F90,
	  src/utils/casida_spectrum.F90, src/utils/centergeom.F90,
	  src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/help.F90,
	  src/utils/infrared.F90, src/utils/liquid.F90,
	  src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90: If you compile in parallel, and then try
	  to run a serial utility on the command line, this will fail for
	  many machines such as a Cray. However we can enable it easily by
	  simply refraining from calling MPI_Init or MPI_Finalize. Then you
	  can run on the command line, which is much more convenient for
	  users than submitting a job just to do oct-center-geom.

2013-12-04 13:44  joseba

	* [r11553] src/grid/par_vec.F90: Computed before the allocate the
	  number of points (inner and boundary). Requires to compute twice
	  the same information.
	  partition_get_partition_number has to be called always, even when
	  the number of points is 0; all the processes have to take part in
	  the MPI_Alltoall
	  Deleted unnecessary barrier

2013-12-04 21:44  dstrubbe

	* [r11554] src/states/restart.F90: * Identify which restart file
	  could not be opened if there is a problem.
	  * Read restart 'states' file to check that number of spinor
	  dimensions and k-points is consistent with current calculation.

2013-12-04 22:26  dstrubbe

	* [r11555] testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/10-berkeleygw.test: * Since the
	  berkeleygw test is no longer restarting from the wrong k-point, a
	  more accurate eigenvalue is obtained.
	  * Turning off the preconditioner makes unocc converge much more
	  quickly in this case.

2013-12-04 23:31  dstrubbe

	* [r11556] src/basic/messages.F90, src/grid/derivatives_inc.F90,
	  src/grid/par_vec.F90: * Avoiding warning about truncation of
	  string in messages.
	  * Doxygen comments.
	  * Adding () to subroutines without arguments.

2013-12-05 04:03  dstrubbe

	* [r11557] src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90,
	  testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/10-berkeleygw.test: * Setting ifmax
	  for BerkeleyGW output was incorrect for semiconductors.
	  * Off-diagonal exchange matrix elements can now be calculated.
	  * x.dat is tested.

2013-12-05 08:21  joseba

	* [r11558] src/grid/partition.F90: Trying to make more clear the
	  printed information

2013-12-06 00:56  dstrubbe

	* [r11559] src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90: BerkeleyGW output:
	  * The previous treatment was appropriate for VXC but not for RHO.
	  Now a factor is applied outside the routine to VXC so both will
	  be correct.
	  * Commenting out debugging info.

2013-12-09 10:18  umberto

	* [r11560] src/system/v_ks.F90: Averaged density self-interaction
	  correction as described in C. Legrand et al. J. Phys. B 35, 1115
	  (2002).

2013-12-09 14:16  askhl

	* [r11561] src/xc/vxc_inc.F90: appease precompiler

2013-12-09 19:38  askhl

	* [r11562] src/xc/vxc_inc.F90: fix minor error in complex-scaled
	  lb94 due to differences btw. spin-polarized and unpolarized
	  expressions

2013-12-09 19:40  askhl

	* [r11563] src/states/cmplxscl.F90, src/states/states_calc.F90,
	  src/system/eigensolver.F90,
	  testsuite/complex_scaling/03-stark.01-1d.inp: one more parameter,
	  ComplexScalingLocalizedStates, to control occupation of states
	  with complex scaling. Update test to use these parameters

2013-12-09 21:08  dstrubbe

	* [r11564] testsuite/finite_systems_1d/09-morse.test,
	  testsuite/oct-run_regression_test.pl,
	  testsuite/periodic_systems/06-h2o_pol_lr.test: * Enforcing that
	  test files set 'Enabled' before trying to run anything.
	  * Fixing two small anomalies in the test files: one set an unused
	  tag 'Arch', and another had a mistaken leading '\'.

2013-12-09 21:26  askhl

	* [r11565] testsuite/complex_scaling/03-stark.01-1d.inp: adjust
	  complex scaling test parameters

2013-12-09 22:53  dstrubbe

	* [r11566] testsuite/oct-run_regression_test.pl: Simplifying logic
	  about whether enabled in testsuite script.

2013-12-09 23:46  dstrubbe

	* [r11567] src/main/main.F90, src/main/unocc.F90: * Further comment
	  on how unocc can be used.
	  * More intelligent display of eigenvalues in unocc when only
	  occupied states are present.

2013-12-10 08:35  marques

	* [r11568] libxc/src/gga_x_b86.c, libxc/src/mgga_x_br89.c: Bug
	  found by SÃ¸ren Smidstrup corrected (abs -> ABS)

2013-12-10 14:16  askhl

	* [r11569] src/system/eigensolver.F90: treat special case correctly
	  (complex scaling)

2013-12-10 23:05  dstrubbe

	* [r11570] src/main/unocc.F90: More info about unocc LCAO.

2013-12-11 00:09  dstrubbe

	* [r11571] testsuite/oct-run_regression_test.pl: The testsuite perl
	  script now rejects unknown commands in the '.test' file, rather
	  than just ignoring them. This can help avoid incorrectly
	  specified commands, which the author might not realize were just
	  ignored.

2013-12-11 00:19  dstrubbe

	* [r11572] src/main/unocc.F90, src/states/restart.F90: * For the
	  purposes of unocc, it is not sufficient to return the number of
	  states read from restart. We need to know which ones. Instead we
	  will return the lowest one which is missing, and do LCAO (or
	  random) for everything above that in unocc.
	  * Restart sets missing wavefunctions' occupations to zero. I am
	  not sure why this behavior makes sense, but anyway it would be
	  good to call states_fermi to be sure we have reasonable
	  occupations in unocc. Fortunately they do not matter for the
	  eigenvalues, but one might wish to know the occupations (when
	  calculating nscf on different k-points) or writing BerkeleyGW
	  output.

2013-12-11 00:43  dstrubbe

	* [r11573] src/states/restart.F90: * Clarifying meaning of 'ierr =
	  -1' in restart read routines.
	  * If files cannot be read at all, 'lowest_missing' needs to be 1
	  not the number of states.
	  * More full filename output.
	  * Bugfix: restart_read_rho returned ierr = 0 (success) if nothing
	  could be read.

2013-12-11 05:39  dstrubbe

	* [r11574] src/states/restart.F90: Occupations should be set on
	  restart based on whether they are listed in the 'occs' file, not
	  on whether the *.obf file is found.

2013-12-11 13:53  nitsche

	* [r11575] src/system/output.F90, src/system/output_h_inc.F90: *
	  Fixed a bug in output_hamiltonian. When parallel in states or
	  k-points was active, all nodes wrote the files. This occasionally
	  resulted in corrupted obf files.

2013-12-11 17:51  askhl

	* [r11576]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp:
	  Make sure states are sorted by energy in complex scaling test

2013-12-11 19:33  dstrubbe

	* [r11577] src/states/restart.F90: Bugfix to r11574: restart for
	  Sternheimer linear-response was zeroing all the occupations.

2013-12-11 20:29  dstrubbe

	* [r11578] testsuite/periodic_systems/07-tb09.test: Updating
	  testsuite values slightly given bugfix in libxc, r11568.

2013-12-11 20:30  dstrubbe

	* [r11579] testsuite/fix_testsuite.py: fix_testsuite.py:
	  * Correction of terminology.
	  * Only diff files that exist.

2013-12-12 19:29  askhl

	* [r11580] src/system/v_ks.F90: Implement AD-SIC with complex
	  scaling. Move AD-SIC stuff into separate function.

2013-12-12 20:13  dstrubbe

	* [r11581] src/grid/nl_operator_inc.F90: Suppressing warnings from
	  gfortran by making complex operator only available in complex
	  version of routines, and adding checks to be sure we do not try
	  to use it with the real version.

2013-12-12 23:23  dstrubbe

	* [r11582] src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90: Can now write dipole matrix
	  elements for Bethe-Salpeter of finite system in BerkeleyGW.

2013-12-13 22:01  dstrubbe

	* [r11583] src/basic/messages.F90: We should catch obsolete
	  variables with a dataset prefix too.

2013-12-14 01:22  dstrubbe

	* [r11584] src/main/invert_ks.F90, src/main/unocc.F90,
	  src/opt_control/propagation.F90, src/scf/scf.F90,
	  src/system/Makefile.am, src/system/output.F90, src/td/td.F90,
	  src/td/td_write.F90: * Setting error conditions for BerkeleyGW.
	  * This makes it necessary to pass ks, not just xc, to output
	  routines.

2013-12-14 01:26  dstrubbe

	* [r11585] src/math/symm_op.F90, src/math/symm_op_inc.F90:
	  Correcting types and indentation.

2013-12-14 03:50  dstrubbe

	* [r11586] src/main/casida_inc.F90: More compact, and presumably
	  more efficient, way of computing oscillator strengths for Casida.

2013-12-14 04:01  dstrubbe

	* [r11587] src/system/output.F90: * Adding default for
	  BerkeleyGW_VmtxelPolarization.
	  * Check that vector norm is nonzero.
	  * Needed to be divided by square root anyway.
	  * Avoid warning about truncation of string in message.

2013-12-14 20:14  dstrubbe

	* [r11588] src/scf/rdmft.F90, src/system/output.F90: * Moving RDMFT
	  message to a more appropriate place.
	  * Improving variable documentation.

2013-12-14 22:39  dstrubbe

	* [r11589] src/scf/lcao.F90, src/scf/lcao_inc.F90: What LCAO
	  alternative calls this%nbasis is the same as what the standard
	  LCAO calls this%norbs.

2013-12-16 17:48  acastro

	* [r11590] src/td/propagator.F90: No reason why one cannot move the
	  ions when using the Crank-Nicolson
	  propagation scheme.

2013-12-17 09:10  joseba

	* [r11591] src/basic/Makefile.am, src/basic/blacs.F90,
	  src/basic/c_pointer.F90, src/basic/comm.F90,
	  src/basic/comm_inc.F90, src/basic/command_line.F90,
	  src/basic/distributed.F90, src/basic/getopt_f.c,
	  src/basic/hardware.F90, src/basic/ialist.F90,
	  src/basic/iihash.F90, src/basic/io_csv.c, src/basic/io_csv_f.F90,
	  src/basic/loct_pointer_inc.F90, src/basic/lookup.F90,
	  src/basic/mpi_lib.F90, src/basic/mpi_lib_inc.F90,
	  src/basic/oct_gdlib_f.c, src/basic/octcl_kernel.F90,
	  src/basic/opencl.F90, src/basic/opencl_inc.F90, src/basic/papi.c,
	  src/basic/papi_f.F90, src/basic/polyhedron.F90,
	  src/basic/signals.c, src/basic/utils.F90, src/grid/Makefile.am,
	  src/grid/basins.F90, src/grid/batch.F90, src/grid/batch_inc.F90,
	  src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/grid/double_grid.F90, src/grid/double_grid_apply_inc.F90,
	  src/grid/hilbert.c, src/grid/hypercube.F90,
	  src/grid/mesh_cube_map.F90, src/grid/ob_grid.F90,
	  src/grid/ob_interface.F90, src/grid/operate.c,
	  src/grid/operate_f.F90, src/grid/operate_inc.c,
	  src/grid/stencil.F90, src/grid/subarray.F90,
	  src/grid/subarray_inc.F90, src/grid/submesh.F90,
	  src/grid/submesh_inc.F90, src/grid/symmetrizer.F90,
	  src/grid/symmetrizer_inc.F90, src/hamiltonian/Makefile.am,
	  src/hamiltonian/born_charges.F90,
	  src/hamiltonian/gauge_field.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hgh_projector.F90,
	  src/hamiltonian/hgh_projector_inc.F90,
	  src/hamiltonian/kb_projector.F90,
	  src/hamiltonian/kb_projector_inc.F90,
	  src/hamiltonian/ob_lead.F90,
	  src/hamiltonian/projector_matrix.F90,
	  src/hamiltonian/rkb_projector.F90, src/hamiltonian/scf_tol.F90,
	  src/hamiltonian/species_pot.F90, src/include/Makefile.am,
	  src/include/vectors.h, src/ions/Makefile.am,
	  src/ions/ion_dynamics.F90, src/ions/kpoints.F90,
	  src/ions/solids.F90, src/ions/spglib_f.c,
	  src/ions/symmetries.F90, src/main/gcm.F90,
	  src/main/invert_ks.F90, src/main/memory.F90, src/main/test.F90,
	  src/math/Makefile.am, src/math/checksum.c,
	  src/math/checksum_interface.F90, src/math/dablas.c,
	  src/math/gauss_legendre.F90, src/math/lapack.F90,
	  src/math/matrix_inc.F90, src/math/minimizer_low.c,
	  src/math/nfft.F90, src/math/nfft_f.c, src/math/nfft_inc.F90,
	  src/math/pblas.F90, src/math/permutations.F90,
	  src/math/scalapack.F90, src/math/symm_op.F90,
	  src/math/symm_op_inc.F90, src/math/tdfunction.F90,
	  src/opt_control/Makefile.am, src/opt_control/check_input_inc.F90,
	  src/opt_control/controlfunction.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/finalcheck_inc.F90, src/opt_control/initst.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_spin_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/opt_control/target_velocity_inc.F90, src/poisson/Makefile.am,
	  src/poisson/poisson_cutoff.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_isf.F90, src/poisson/poisson_sete.F90,
	  src/poisson/scaling_function.F90, src/scf/Makefile.am,
	  src/scf/ob_lippmann_schwinger.F90, src/species/Makefile.am,
	  src/species/periodic_table.F90, src/species/ps_cpi.F90,
	  src/species/ps_cpi_file.F90, src/species/ps_fhi.F90,
	  src/species/ps_fhi_file.F90, src/species/ps_in_grid.F90,
	  src/species/ps_psf_file.F90, src/sternheimer/Makefile.am,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/td/Makefile.am, src/td/ob_mem.F90, src/td/ob_propagator.F90,
	  src/td/ob_src.F90, src/td/ob_terms.F90,
	  src/td/propagator_qoct_inc.F90, src/td/tdpsf.F90,
	  src/utils/Makefile.am, src/utils/dielectric_function.F90,
	  src/utils/help.F90, src/utils/liquid.F90,
	  src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90, src/xc/Makefile.am: Added
	  SVN Id to (almost) all the missing files, with svn propset
	  svn:keywords "Id" FILE

2013-12-17 14:42  marques

	* [r11592] libxc/src/gga_x_pbe.c: Added the functional
	  GGA_X_PBE_MOL. Patch by Susi Lehtola.

2013-12-17 16:27  joseba

	* [r11593] src/grid/io_function.F90, src/utils/Makefile.am,
	  src/utils/convert.F90: Implemented a utility which reads a binary
	  file and writes the equivalent ---OutputHow defined--- files

2013-12-17 16:44  joseba

	* [r11594] src/utils/Makefile.am: Corrected a name of a file

2013-12-22 10:06  acastro

	* [r11595] src/hamiltonian/hamiltonian.F90, src/system/forces.F90:
	  Changed the procedure to compute the forces acting on the costate
	  variables
	  when doing optimal control with Ehnrefest dynamics. The previous
	  procedure was
	  faster but led to too high numerical error.

2013-12-22 21:22  acastro

	* [r11596] src/td/propagator.F90: Moved the sparkit data object
	  inside the propagator data type.

2014-01-05 09:48  dstrubbe

	* [r11597] src/grid/io_function.F90, src/utils/convert.F90: Typos,
	  PUSH/POP's, formatting.
	  
	  Joseba, don't you want units_output%length**(-1/3) rather than
	  "my_unit"? Also this would still only be correct for the density,
	  not for other quantities (e.g. wavefunction, potential, etc.).

2014-01-06 12:05  dstrubbe

	* [r11598] src/main/unocc.F90: In unocc mode, we should write the
	  file 'eigenvalues' after every iteration, not just after
	  successful completion, so that if the run is interrupted, we can
	  still see the results so far.

2014-01-08 17:24  joseba

	* [r11600] src/grid/io_function.F90, src/utils/convert.F90: Added
	  the possibility to subtract a reference value to the files that
	  are being converting
	  This commit belongs mainly to Quim Jornet

2014-01-08 22:42  dstrubbe

	* [r11601] src/system/output_berkeleygw_inc.F90: Position matrix
	  elements for BerkeleyGW output.
	  * Fixing bug in matmul usage.
	  * Write ASCII as well as binary file.

2014-01-09 13:57  joseba

	* [r11602] m4/octopus_compilation_info.m4: Finally, the SVN number
	  is printed properly, independently in which folder is compiled

2014-01-13 10:47  micael

	* [r11603] src/ions/Makefile.am, src/ions/box.F90,
	  src/utils/Makefile.am, src/utils/local_multipoles.F90: * Added
	  the skeleton of a new utility that will compute multipoles in
	  subdomains of the simulation box.
	  * Added a simple module to deal with simple boxes. Some of this
	  is duplicated from the simul_box module. The idea will be to use
	  this to rewrite the simulation box in a more general way later
	  on. For now it will be used by the new utility.

2014-01-13 11:13  micael

	* [r11604] src/ions/box.F90: * Renaming the box type parameters in
	  box_m to avoid name clashes with the ones from the simulation
	  box.

2014-01-13 12:05  micael

	* [r11605] src/ions/Makefile.am, src/ions/box_union.F90: * Added
	  new module to deal with a union of boxes.

2014-01-13 16:09  micael

	* [r11606] src/ions/Makefile.am: * Missing dependency.

2014-01-13 17:50  micael

	* [r11607] src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90: * It is now possible to compute
	  the integral of a mesh function using a mask.
	  * Added routine to compute local multipoles in a set of domains.

2014-01-14 12:30  joseba

	* [r11608] src/grid/par_vec.F90: Deleted the last NxN matrix and
	  done changes accordinly

2014-01-15 16:08  joseba

	* [r11609] src/grid/partition.F90: Added a MPI_Barrier between two
	  MPI_Alltoallv, as it might produce a deadlock

2014-01-15 16:26  joseba

	* [r11610] src/grid/partition.F90: Correction to the previous
	  commit; MPI_Barrier is only called in parallel compilation

2014-01-15 17:17  joseba

	* [r11611] src/grid/par_vec.F90: vp%ghost computed in a more robust
	  way. Instead of iterating over all the processes, global MPI
	  functions are used instead. It also avoids to get stuck with high
	  number of processes

2014-01-19 12:18  dstrubbe

	* [r11612] src/utils: Setting svn:ignore for new utilities.

2014-01-19 15:57  dstrubbe

	* [r11613] src/scf/lcao.F90: Removing call to 'init_states' for
	  when LCAO is not done, which set the states to the atomic
	  orbitals. It was added in r7716 by Xavier, and the commit message
	  says it is to make sure the states are initialized before trying
	  to construct the KS potential in case it depends on them. I don't
	  think it accomplishes that task, because it comes right after a
	  call to v_ks_calc and won't influence that, and before the next
	  call to v_ks_calc, the states will all have been initialized
	  either from LCAO or from random wavefunctions. So if it is
	  necessary to initialize the states before calling v_ks_calc, the
	  code needs to be fixed. The call I am removing seems to have no
	  effect other than to take time, which can be enormous when
	  Hermite polynomials are being used as orbitals for jellium, and
	  it is particularly problematic that this happens even when LCAO
	  is turned off by the user. Incidentally, I think the only cases
	  in which the states are necessary for the KS potential is for
	  orbital-dependent functionals, namely hybrids, OEP, Hartree, and
	  Hartree-Fock, so an initialization of the states to the orbitals
	  would only be useful in those cases.

2014-01-19 16:02  dstrubbe

	* [r11614] share/PP/CPI, share/PP/CPI/C.cpi,
	  share/PP/CPI/Makefile.am, share/PP/FHI, share/PP/FHI/C.fhi,
	  share/PP/FHI/Makefile.am, share/PP/Makefile.am: Adding
	  directories and example files for the CPI and FHI pseudopotential
	  formats. The pseudos I am adding here were generated from the
	  following input file with APE 2.2.0, trying to use analogous
	  parameters to our C.psf.
	  
	  Title = "carbon"
	  CalculationMode = ae + pp
	  Verbose = 40
	  
	  XCFunctional = lda_x + lda_c_pz
	  
	  NuclearCharge = 6
	  
	  %Orbitals
	  1 | 0 | 2
	  2 | 0 | 2
	  2 | 1 | 2
	  3 | 2 | 0
	  %
	  
	  %PPComponents
	  2 | 0 | 1.47 | tm
	  2 | 1 | 1.47 | tm
	  3 | 2 | 1.47 | tm
	  %
	  
	  PPOutputFileFormat = abinit6 + fhi
	  
	  LLocal = 1

2014-01-19 16:07  dstrubbe

	* [r11615]
	  testsuite/finite_systems_3d/01-carbon_atom.01-ground_state.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.01-psf_l0.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-ground_state.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.test,
	  testsuite/finite_systems_3d/Makefile.am: * Adding test runs with
	  the C atom for the CPI and FHI pseudopotential formats. There is
	  a warning that only 2 orbitals are available (instead of at least
	  4) which seems to indicate a problem with Octopus or APE.
	  * Renaming the input file for C atom to something more
	  descriptive.
	  * Removing unnecessary commented line in input file.

2014-01-19 16:12  dstrubbe

	* [r11616] configure.ac: Forgot to commit this change as part of
	  r11614.

2014-01-19 16:44  dstrubbe

	* [r11617] src/species/species.F90,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/11-sic.01-gs.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp: *
	  Documentation for Species block claimed HGH PP's used only 4
	  columns but in fact 6 were required, though the last two were not
	  used. Now, only 4 columns are required, in accordance with the
	  documentation.
	  * Reorganized reading Species block rows a bit to allow 4-column
	  PP's like HGH and UPF to be handled more cleanly, and for the
	  extra columns for defaults to be usable for them.
	  * Removed spurious extra columns for Species row for UPF and HGH
	  pseudos from testsuite.
	  * Other little improvements to documentation on Species block.

2014-01-20 17:56  dstrubbe

	* [r11618] src/system/output_states_inc.F90: Reforming indentation.

2014-01-20 19:21  dstrubbe

	* [r11619] src/grid/submesh_inc.F90,
	  testsuite/finite_systems_3d/14-fullerene_packed.01-gs.inp,
	  testsuite/finite_systems_3d/14-fullerene_packed.test: * Bugfix:
	  LCAOAlternative tried to access an array out of bounds in
	  constructing the wavefunctions in real space, if the number of
	  states was greater than the number of orbitals being used
	  (despite the fact the handling of this situation was explicitly
	  considered via randomization of the remaining orbitals).
	  * One of the tests now falls into this category to ensure correct
	  behavior in future. I limited the number of iterations to
	  compensate for the extra time in using a large number of
	  ExtraStates.

2014-01-21 21:53  dstrubbe

	* [r11620] src/poisson/poisson_fft.F90: Critical bugfix for
	  2D-periodic systems: a typo in r9867 (by me) resulted in the
	  cutoff radius being set based on the x-direction instead of the
	  z-direction, which is the finite one.

2014-01-22 15:57  joseba

	* [r11621] src/grid/mesh_partition.F90, src/grid/partition.F90,
	  src/td/pes_mask_out_inc.F90: Added "1:" at the beginning of the
	  SAFE_ALLOCATE. Thus, the profiler is able to compute those
	  matrices

2014-01-23 11:02  joseba

	* [r11622] src/grid/partition.F90: Bugfix to
	  partition_get_partition_number.
	  Ceiling function could be not precise enough when the mesh points
	  are very large, so double precision is mandatory.
	  For example in a mesh with 25,811,455 and 8 domains, the point
	  19,358,593 (19,358,593/3,226,432 = 6.00000031) have to go to the
	  rank 7 and previously was assiging to 6.
	  np_global = 25,811,455
	  npart = 8
	  remainder = 7
	  nppp = 3,226,431

2014-01-23 11:40  joseba

	* [r11623] src/grid/partition.F90: Correction to the previous
	  commit: using REAL_PRECISION flags instead of 16

2014-01-23 15:22  micael

	* [r11624] src/species/ps.F90: * Fixed bug in pseudopotential
	  initialization: no angular momentum quantum number was assigned
	  for the pseudo-wavefunction when using the cpi and fhi formats.
	  Note that the fix is not ideal, but that part of the code is just
	  a big mess...

2014-01-24 20:20  dstrubbe

	* [r11625] src/hamiltonian/hamiltonian_inc.F90: Making explicit an
	  incompatibility with spinors.

2014-01-24 21:16  dstrubbe

	* [r11626] src/system/output_modelmb_inc.F90: Fixing indentation.

2014-01-24 21:39  dstrubbe

	* [r11627] src/states/modelmb_density_matrix.F90,
	  src/system/output.F90, src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90: * Improvements to documentation
	  on ModelMB output.
	  * I see no evidence that the option Output = mmb_den can produce
	  a density, as stated, just density matrices, so I removed
	  references to densities.
	  * Useless lines removed.

2014-01-24 21:58  dstrubbe

	* [r11628] src/states/states_io.F90, src/system/output.F90: *
	  Improvements to documentation for Output.
	  * Fixing incorrect listing of default for OutputBandsGnuplotMode.
	  * Reclassifying MomentumTransfer as Output not States.
	  * Improving comments.

2014-01-24 22:03  dstrubbe

	* [r11629] src/system/output.F90: * More info on Output = dos.
	  * More comprehensive list of Output options that do not require
	  OutputHow.
	  * More compact way of setting bits for frozen.

2014-01-24 22:10  dstrubbe

	* [r11630] src/species/species.F90: Clarifications to FHI pseudo
	  documentation.

2014-01-24 22:52  dstrubbe

	* [r11631] src/species/ps.F90: Unifying some code for CPI and FHI
	  pseudopotentials.

2014-01-24 23:09  dstrubbe

	* [r11632] src/ions/solids.F90, src/ions/xyz_adjust.F90: Little
	  improvements to comment and variable documentation formatting.

2014-01-24 23:26  dstrubbe

	* [r11633]
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp:
	  Removing AbsorbingBoundaries input flags from non-td runs, which
	  don't use them anyway.

2014-01-25 21:47  dstrubbe

	* [r11634] src/main/run.F90: Forgot to commit this change too as
	  part of r11588: this message was moved elsewhere.

2014-01-25 23:13  dstrubbe

	* [r11635] src/scf/lcao.F90, src/scf/lcao_inc.F90: Enabling use of
	  LCAO in the standard scheme when there are not enough orbitals
	  for all the states needed, by randomizing the remainder. This was
	  already being done for LCAOAlternative, and can be extremely
	  helpful for unocc mode, rather than just randomizing everything.
	  The randomization is now done jointly for both modes with
	  states_generate_random, rather than with LCAOAlternative's own
	  implementation, thus taking advantage of improvements in
	  reproducible parallelization of the former. Also,
	  orthogonalization is disabled for LCAOAlternative for the time
	  being, as before, pending investigation of whether this is a good
	  idea or not.

2014-01-26 18:25  dstrubbe

	* [r11636] testsuite/functionals/06-rdmft.test: Updating test
	  values for RDMFT in accordance with r11635: since LCAO is now
	  possible for the ground-state Hartree-Fock run rather than just
	  using random orbitals, and the calculation was stopped far from
	  convergence, the results changed significantly.

2014-01-27 04:45  dstrubbe

	* [r11637] src/grid/symmetrizer.F90, src/grid/symmetrizer_inc.F90,
	  src/hamiltonian/gauge_field.F90, src/states/density.F90,
	  src/system/forces_inc.F90, src/xc/vxc_inc.F90: Combining
	  X(symmetrizer_apply) and X(symmetrizer_apply_vector), which were
	  mostly the same, to avoid duplication and in preparation for
	  fixing bugs here.

2014-01-27 19:09  dstrubbe

	* [r11638] src/scf/lcao.F90: Bugfix to r11635: when LCAOStart =
	  lcao_none, lcao%alternative was uninitialized but nonetheless was
	  controlling whether the random wavefunctions were orthogonalized,
	  which gave some discrepancies in test results. Now
	  lcao%alternative is initialized regardless, so that
	  orthogonalization will always be done when we have only random
	  wavefunctions. Also, the message about orthogonalizing will only
	  be written when that actually happens.

2014-01-27 21:55  dstrubbe

	* [r11639] src/grid/symmetrizer_inc.F90: Symmetrizer:
	  * Periodic boundary conditions should not be applied in finite
	  directions.
	  * Adding an assertion.
	  * The discrepancy from symmetry is now printed, demonstrating
	  when problems occur with this routine.
	  * Adding comments.

2014-01-27 21:55  dstrubbe

	* [r11640] testsuite/optimal_control/12-spintarget.test: All tests
	  should be run on octopus_mpi as well as octopus.

2014-01-27 22:49  dstrubbe

	* [r11641] src/grid/symmetrizer_inc.F90,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp: *
	  Critical bugfix to symmetrizer routine: the symmetry operations
	  were applied with respect to an incorrect origin, which was
	  located at the corner of the cell rather than the center. As a
	  result, use of SymmetrizeDensity was incorrect except for certain
	  highly symmetric structures in which the symmetry operations also
	  happened to be correct when adding this translation. This is the
	  case for our silicon and lithium tests. It is emphatically not
	  the case for the sodium chain or any other partially periodic
	  system.
	  * The sodium chain now uses SymmetrizeDensity (without reducing
	  the k-points by symmetry), to check the correct behavior of the
	  symmetrization.

2014-01-27 23:06  dstrubbe

	* [r11642] src/grid/symmetrizer_inc.F90, src/system/forces_inc.F90:
	  A large discrepancy in "symmetrizing" the forces is not really
	  significant, because the use of the symmetrizer routine there is
	  quite different than for symmetrizing the density or gradients.
	  The forces are summed over k-points using this routine, which was
	  not the case for the other quantities. As a result, no warning
	  should be written even if the discrepancy is large for forces.

2014-01-28 12:31  jjornet

	* [r11643] src/grid/io_function.F90, src/grid/mesh_function.F90,
	  src/ions/box.F90, src/ions/box_union.F90,
	  src/utils/local_multipoles.F90: Implemented a utility which reads
	  a density file and return the local multipoles for a selected
	  domains.
	  !> Reads a global grid and density and make local domains
	  !%Description
	  !% This variable stores the information about the local boxes
	  !% for each new local domain. Information is read in a block
	  format.
	  !% %LocalDomains
	  !% 'Label' | Shape | rsize %< | Shape dependencies >%
	  !% Label = string with the name of the new local domain.
	  !% Shape = SPHERE, CYLINDER, PARALLELEPIPED, MINIMUM
	  !% Shape dependencies:
	  !% case(SPHERE): | rsize | %<dim origin coordinates>
	  !% case(CYLINDER): | rsize | xsize | %<origin coordinates>
	  !% case(PARALLELEPIPED): | %<lsize> | %<origin coordinates>
	  !% case(MINIMUM): | 'center_list'
	  !% rsize < Radius in input length units
	  !% xsize < the length of the cylinder in the x-direction
	  !% origine coordinates < in input length units separated by | .
	  where is the box centered.
	  !% lsize < half of the length of the parallelepiped in each
	  direction.
	  !% center_list < string containing the list of atoms in xyz file
	  for each domain in the form "2,16-23"
	  !%End

2014-01-28 12:55  joseba

	* [r11644] src/ions/box_union.F90, src/utils/local_multipoles.F90:
	  Added SVN Id to the new files

2014-01-28 14:06  jjornet

	* [r11645] src/ions/box_union.F90, src/utils/local_multipoles.F90:
	  Compilation error fixed: print statement has been removed from
	  local_multipoles.F90 file.

2014-01-28 16:37  dstrubbe

	* [r11646] src/utils/local_multipoles.F90: * Fixing variable name
	  in documentation block: watch your spelling in these places!
	  * Formatting: the variable reference is treated as a paragraph of
	  text, so <tt> tags are needed for the info on variable 'domain'
	  to be at all comprehensible in the web page.
	  * There is a function to produce lines of '#'.

2014-01-28 18:05  dstrubbe

	* [r11647] src/scf/scf.F90: As pointed out by the valgrind
	  buildslave, when we use MaximumIter = 0 for the functionals
	  tests, we should not write out the convergence info to
	  static/info, because with no SCF iterations we have no idea to
	  what extent (if any) the calculation is converged, and so the
	  numbers written are uninitialized.

2014-01-28 18:14  dstrubbe

	* [r11648] testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.test,
	  testsuite/periodic_systems/Makefile.am: * Octopus is finally
	  ready for a boron nitride test, to make sure things are working
	  for 2D-periodic systems.
	  * 11-silicon_force files were not listed in the Makefile.am.

2014-01-28 19:45  xavier

	* [r11649] src/states/density.F90: Bugfix: the calculation of the
	  density with the fine mesh was not correct.

2014-01-28 20:15  xavier

	* [r11650] src/states/density.F90: Proper fix for UseFineMesh and
	  OpenCL.

2014-01-28 20:58  dstrubbe

	* [r11651] src/ions/symmetries.F90,
	  testsuite/periodic_systems/01-free_electrons.test,
	  testsuite/periodic_systems/02-cosine_potential.test,
	  testsuite/periodic_systems/03-sodium_chain.test,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/07-tb09.test,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/12-boron_nitride.test: * The list of
	  symmetries is now written in the output.
	  * Added tests for total and reduced number of k-points, space
	  group, and number of symmetries, for periodic systems.
	  * Added tests for total energy components in periodic systems,
	  where they were missing.

2014-01-28 23:06  dstrubbe

	* [r11652]
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-ground_state_disp.inp:
	  Removing useless tags from input files: there are not 9 orbitals
	  available, so it does nothing to set LCAODimension = 9.

2014-01-29 02:15  dstrubbe

	* [r11653] src/system/energy_calc.F90,
	  src/system/energy_calc_inc.F90: The eigenvalues are supposed to
	  be global, but they are only available locally (in state-kpoint
	  groups) when calculated from expectation values, so they should
	  be all-reduced. This caused a problem in initialization from
	  random wavefunctions, in which case the eigenvalues used to
	  determine occupations and build the density were zero for states
	  not on the root processor. I am surprised it didn't give trouble
	  elsewhere where this routine is used, e.g. from v_ks_calc in
	  td.F90.

2014-01-29 03:38  xavier

	* [r11654] src/sternheimer/sternheimer_inc.F90: Started converting
	  the sternheimer equation to operations by blocks.

2014-01-29 04:12  xavier

	* [r11655] src/sternheimer/sternheimer_inc.F90: * The rhs array now
	  contains a block of states.
	  * The convergence indicators are stored in an array and printed
	  after
	  the block is completed.

2014-01-29 04:26  xavier

	* [r11656] src/sternheimer/sternheimer_inc.F90: Changed the order
	  of the loops, the loop over sigma is now outside of
	  the states loop.

2014-01-29 04:46  xavier

	* [r11657] src/sternheimer/sternheimer_inc.F90: Split the loop over
	  the states block into several loops, so now
	  operations can be performed by blocks.

2014-01-29 04:52  xavier

	* [r11658] src/sternheimer/sternheimer_inc.F90,
	  src/system/linear_solver.F90, src/system/linear_solver_inc.F90,
	  src/system/xc_oep_inc.F90: Renamed solve_HXeY to
	  linear_solver_solve_HXeY.

2014-01-29 05:12  xavier

	* [r11659] src/sternheimer/sternheimer_inc.F90,
	  src/system/linear_solver.F90, src/system/linear_solver_inc.F90,
	  src/system/xc_oep_inc.F90: The convergence indicators of the
	  linear solver are now returned in
	  arguments instead of through the object.

2014-01-29 14:25  adelgado

	* [r11660] configure.ac, src/Makefile.am, src/common-rules.make,
	  src/main/Makefile.am, src/system/system.F90,
	  src/utils/Makefile.am: New PCM module 'src/pcm.F90' has been
	  added to build the solvent excluded surface and generates the PCM
	  response matrix to be used in solvation calculations (not
	  implemented yet). The 'subroutine pcm_init' is called from module
	  'src/system.F90' to initialize PCM. The new variable
	  'SolventDielectricConstant' in 'subroutine pcm_init' contains the
	  static dielectric constant of the solvent.

2014-01-29 15:09  adelgado

	* [r11661] src/pcm, src/pcm/Makefile, src/pcm/Makefile.am,
	  src/pcm/Makefile.in, src/pcm/pcm.F90: I forgot to add previously
	  the new module 'src/pcm.F90

2014-01-29 15:31  xavier

	* [r11662] src/states/density.F90: Bugfix: My last commit broke the
	  calculation with a fine mesh in parallel.

2014-01-29 15:32  xavier

	* [r11663] src/pcm/Makefile.in: A small correction, Makefile.in
	  files are not kept in the repository.

2014-01-29 16:05  xavier

	* [r11664] src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90,
	  src/system/linear_solver.F90, src/system/linear_solver_inc.F90:
	  Added a batch interface to the linear solver. This interface is
	  now
	  used by the Sternheimer equation.

2014-01-29 16:34  xavier

	* [r11665] src/sternheimer/sternheimer_inc.F90,
	  src/system/linear_solver_inc.F90: * Removed some commented code
	  left in my last commit.
	  * Renamed functions starting with ls_ to linear_solver_.

2014-01-29 16:43  adelgado

	* [r11666] src/pcm/pcm.F90: type 'tess_pcm_t' has been assigned the
	  'public' attribute

2014-01-29 17:05  adelgado

	* [r11667] src/utils/Makefile.am: linking to 'libpcm.a' was enabled
	  to build the 'photoelectron_spectrum' utility

2014-01-29 17:07  xavier

	* [r11668] src/math/solvers.F90, src/scf/ob_lippmann_schwinger.F90,
	  src/system/linear_solver_inc.F90, src/td/ob_propagator.F90,
	  src/td/propagator.F90: Since the qmr function receive a lot of
	  arguments, having an interface
	  for different calls makes the code more difficult to understand.
	  So I
	  removed the interfaces.

2014-01-29 21:00  dstrubbe

	* [r11669] src/pcm/Makefile: 'Makefile' should not be in the
	  repository. Only Makefile.am.

2014-01-29 21:38  dstrubbe

	* [r11670] testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.test: Tightening
	  convergence on BN test to try to get all slaves to pass.

2014-01-29 22:48  dstrubbe

	* [r11671] testsuite/oct-run_regression_test.pl: Making testsuite
	  errors written more prominently.

2014-01-29 22:49  dstrubbe

	* [r11672] testsuite/periodic_systems/Makefile.am: A file was
	  missing for installation.

2014-01-29 23:15  dstrubbe

	* [r11673] testsuite/oct-run_regression_test.pl,
	  testsuite/periodic_systems/05-lithium.test: * Text was accepted
	  as the number zero by the testsuite matches. Now, non-numeric
	  content will be rejected as a failure.
	  * Fixing the situation that prompted this: a wrong line number
	  resulted in the header rather than the first line of a file being
	  read.

2014-01-29 23:23  dstrubbe

	* [r11674] src/pcm/pcm.F90: Some changes to PCM to align with our
	  coding style, including Doxygen-style comments. And some FIXME's.
	  Especially regarding the source of the code included here.

2014-01-30 03:51  dstrubbe

	* [r11675] external_libs/spglib-1.5.2,
	  external_libs/spglib-1.5.2/COPYING,
	  external_libs/spglib-1.5.2/ChangeLog,
	  external_libs/spglib-1.5.2/src,
	  external_libs/spglib-1.5.2/src/Makefile.am,
	  external_libs/spglib-1.5.2/src/Makefile.in,
	  external_libs/spglib-1.5.2/src/cell.c,
	  external_libs/spglib-1.5.2/src/cell.h,
	  external_libs/spglib-1.5.2/src/debug.c,
	  external_libs/spglib-1.5.2/src/debug.h,
	  external_libs/spglib-1.5.2/src/hall_symbol.c,
	  external_libs/spglib-1.5.2/src/hall_symbol.h,
	  external_libs/spglib-1.5.2/src/kpoint.c,
	  external_libs/spglib-1.5.2/src/kpoint.h,
	  external_libs/spglib-1.5.2/src/lattice.c,
	  external_libs/spglib-1.5.2/src/lattice.h,
	  external_libs/spglib-1.5.2/src/mathfunc.c,
	  external_libs/spglib-1.5.2/src/mathfunc.h,
	  external_libs/spglib-1.5.2/src/pointgroup.c,
	  external_libs/spglib-1.5.2/src/pointgroup.h,
	  external_libs/spglib-1.5.2/src/primitive.c,
	  external_libs/spglib-1.5.2/src/primitive.h,
	  external_libs/spglib-1.5.2/src/refinement.c,
	  external_libs/spglib-1.5.2/src/refinement.h,
	  external_libs/spglib-1.5.2/src/site_symmetry.c,
	  external_libs/spglib-1.5.2/src/site_symmetry.h,
	  external_libs/spglib-1.5.2/src/sitesym_database.c,
	  external_libs/spglib-1.5.2/src/sitesym_database.h,
	  external_libs/spglib-1.5.2/src/spacegroup.c,
	  external_libs/spglib-1.5.2/src/spacegroup.h,
	  external_libs/spglib-1.5.2/src/spg_database.c,
	  external_libs/spglib-1.5.2/src/spg_database.h,
	  external_libs/spglib-1.5.2/src/spglib.c,
	  external_libs/spglib-1.5.2/src/spglib.h,
	  external_libs/spglib-1.5.2/src/spglib_f.c,
	  external_libs/spglib-1.5.2/src/spglib_f08.f90,
	  external_libs/spglib-1.5.2/src/spin.c,
	  external_libs/spglib-1.5.2/src/spin.h,
	  external_libs/spglib-1.5.2/src/symmetry.c,
	  external_libs/spglib-1.5.2/src/symmetry.h: Importing spglib-1.5.2
	  in preparation for updating. The current version is 0.5.1 I
	  think, from 5 years ago. I proceeded as follows:
	  
	  wget
	  http://sourceforge.net/projects/spglib/files/spglib/spglib-1.5/spglib-1.5.2.tar.gz
	  tar xvzf spglib-1.5.2.tar.gz
	  cd external_libs
	  mkdir spglib-1.5.2
	  cp -r ../spglib-1.5.2/src spglib-1.5.2
	  cp ../spglib-1.5.2/COPYING spglib-1.5.2
	  cp ../spglib-1.5.2/ChangeLog spglib-1.5.2
	  cp ../spglib-1.5.2/example/spglib_f08.f90 spglib-1.5.2/src/
	  svn add spglib-1.5.2

2014-01-30 04:02  xavier

	* [r11676] src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90: Made a copy of the qmr dopt
	  linear solver for blocks of states. Still
	  needs a lot of works, but it appears to be working properly.

2014-01-30 05:15  dstrubbe

	* [r11677] configure.ac, external_libs/Makefile.am,
	  external_libs/spglib, external_libs/spglib-1.5.2/Makefile.am,
	  external_libs/spglib-1.5.2/src/Makefile.am,
	  external_libs/spglib-1.5.2/src/Makefile.in,
	  external_libs/spglib-1.5.2/src/symmetry.c, src/common-rules.make,
	  src/ions/Makefile.am, src/ions/symmetries.F90: Upgrading spglib
	  to 1.5.2.
	  * Removing old directory.
	  * Updating paths.
	  * common-rules.make has to have spglib-1.5.2 in the path for
	  include since we have a Fortran module there now.
	  * Enclosing #include <omp.h> with preprocessor directives, so we
	  can compile without OpenMP too.
	  * Makefile.in not needed.
	  * Adding Makefile.am.
	  * src/Makefile.am need not refer to libtool stuff, and doesn't
	  need to install the headers for spglib.
	  * Using Fortran interface provided with spglib instead of one
	  made in Octopus.
	  * The routine to show symmetry no longer exists, so I write the
	  info by hand.
	  * Some routine names are slightly different.
	  * spglib_get_max_multiplicity no longer exists, so I use
	  spg_get_multiplicity.

2014-01-30 05:32  dstrubbe

	* [r11678] external_libs/spglib-1.5.2,
	  external_libs/spglib-1.5.2/src, src/ions/spglib_f.c: * Setting
	  svn:ignore properties for spglib-1.5.2.
	  * Removing old Fortran interface file.

2014-01-30 09:46  adelgado

	* [r11679] src/pcm/pcm.F90: intent attribute added to 'eps'
	  variable in procedure 'pcm_matrix'

2014-01-30 11:01  xavier

	* [r11680] src/system/linear_solver_inc.F90: Started cleaning the
	  qmr batch version.

2014-01-30 11:15  xavier

	* [r11681] src/system/linear_solver_inc.F90: More cleaning and
	  replacing function argument calls with direct calls.
	  As a side effect, I am implementing Sternheimer for spinors.

2014-01-30 11:39  xavier

	* [r11682] src/system/linear_solver_inc.F90: Finished removing the
	  use of argument functions from the batch qmr
	  implementation.

2014-01-30 11:57  xavier

	* [r11683] src/system/linear_solver_inc.F90: Some cleaning and
	  using named constants for error handling in the batch qmr.

2014-01-30 14:32  xavier

	* [r11684] src/system/linear_solver_inc.F90: Bugfix: Restoring a
	  line of code that I inadvertently removed in
	  [11676].

2014-01-30 14:49  joseba

	* [r11685] src/grid/mesh_cube_parallel_map.F90,
	  src/grid/par_vec.F90, src/scf/lcao_inc.F90: Deleted unused
	  variable
	  Format compliant with the profiler sintax (huge matrices migh be
	  ignored)
	  More formating

2014-01-30 19:10  xavier

	* [r11686] external_libs/spglib-1.5.2/src/spglib_f08.f90: Removed
	  the uses of F08 'import' to try to make PGI happy.

2014-01-30 19:53  xavier

	* [r11687] external_libs/spglib-1.5.2/src/spglib_f08.f90: Using (/
	  /) instead of [ ] for array literals. This should fix
	  compilation with PGI.

2014-01-30 20:11  xavier

	* [r11688] src/system/linear_solver_inc.F90: Replaced some loops
	  for blas level 1 calls.

2014-01-30 20:17  xavier

	* [r11689] src/math/solvers_inc.F90,
	  src/system/linear_solver_inc.F90: For some reason 100.0 was
	  written as 10.0 squared.

2014-01-30 20:32  xavier

	* [r11690] external_libs/spglib-1.5.2/src/spglib_f08.f90: Still
	  trying to get the PGI "compiler" to build the spglib interface.
	  I have no idea why it is giving an error.

2014-01-30 21:44  dstrubbe

	* [r11691] external_libs/spglib-1.5.2/src/spglib_f08.f90: The
	  troublesome parts of the spglib Fortran interface for the PGI 7
	  compiler are not being used by Octopus anyway, so I am just
	  commenting them out rather than trying to figure out how to make
	  them work.

2014-01-30 22:33  dstrubbe

	* [r11692] external_libs/spglib-1.5.2/src/spglib_f08.f90,
	  src/ions/symmetries.F90: Two changes for things to compile with
	  spglib-1.5.2 on some compilers: pathf90 makes a distinction
	  between character arrays and strings; commenting unneeded
	  'contains'.

2014-01-30 22:40  dstrubbe

	* [r11693] src/pcm/pcm.F90: PCM should be marked experimental.

2014-01-31 08:18  marques

	* [r11694] libxc/src/gga_x_lg93.c: Bug fix: variable was not given
	  a value. It sj=hould be zero, so I guess that most compilers were
	  actually giving the right number... Thanks David ;)

2014-01-31 10:48  micael

	* [r11695]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/complex_scaling/03-stark.test,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/03-derivatives_3d.01.inp,
	  testsuite/components/04-hartree_3d_cg.01-cg_corrected.inp,
	  testsuite/components/05-hartree_3d_fft.01-fft.inp,
	  testsuite/components/05-hartree_3d_fft.02-fft_corrected.inp,
	  testsuite/components/06-hartree_3d_isf.01-isf.inp,
	  testsuite/components/07-cholesky_serial.01-real.inp,
	  testsuite/components/07-cholesky_serial.02-complex.inp,
	  testsuite/components/08-mgs.01-real.inp,
	  testsuite/components/08-mgs.02-complex.inp,
	  testsuite/components/09-qr.01-real.inp,
	  testsuite/components/09-qr.02-complex.inp,
	  testsuite/components/10-hartree_pfft.01-fft.inp,
	  testsuite/components/10-hartree_pfft.02-fft_corrected.inp,
	  testsuite/components/11-hartree_cl.01-fft.inp,
	  testsuite/components/12-hartree_direct_3d.01.inp,
	  testsuite/components/13-hartree_3d_mg.01-multigrid.inp,
	  testsuite/components/14-center-geom.01-run.inp,
	  testsuite/components/15-cholesky_parallel.01-real.inp,
	  testsuite/components/15-cholesky_parallel.02-complex.inp,
	  testsuite/components/16-hartree_3d_libisf.01-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.02-libisf.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_1d/09-morse.test,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/04-biot_savart.test,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/05-spin_precession.test,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_2d/08-gdlib.test,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.test,
	  testsuite/finite_systems_3d/05-output.01-gs.inp,
	  testsuite/finite_systems_3d/05-output.test,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/09-spinors.02-rmmdiis.inp,
	  testsuite/finite_systems_3d/09-spinors.03-rmmdiis_extra_states.inp,
	  testsuite/finite_systems_3d/10-fullerene.01-gs.inp,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/12-forces.02-N2_gs.inp,
	  testsuite/finite_systems_3d/12-forces.03-N2_gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/14-fullerene_packed.01-gs.inp,
	  testsuite/finite_systems_3d/14-fullerene_packed.test,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.01-gs.inp,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.test,
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.02-cg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.03-cg_new.inp,
	  testsuite/finite_systems_3d/20-eigensolver.04-plan.inp,
	  testsuite/finite_systems_3d/20-eigensolver.05-evolution.inp,
	  testsuite/finite_systems_3d/20-eigensolver.06-rmmdiis.inp,
	  testsuite/finite_systems_3d/20-eigensolver.test,
	  testsuite/finite_systems_3d/21-lobpcg.01-spin_polarized.inp,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp,
	  testsuite/finite_systems_3d/21-lobpcg.test,
	  testsuite/finite_systems_3d/23-go-na2.01-steep.inp,
	  testsuite/finite_systems_3d/23-go-na2.02-simplex.inp,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/finite_systems_3d/24-o2-spin.01-gs.inp,
	  testsuite/finite_systems_3d/24-o2-spin.test,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/25-multiresolution.test,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.test,
	  testsuite/finite_systems_3d/27-fine_mesh.01-gs.inp,
	  testsuite/finite_systems_3d/27-fine_mesh.test,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.01-gs.inp,
	  testsuite/functionals/03-xc.exx.inp,
	  testsuite/functionals/03-xc.gga_c_am05.inp,
	  testsuite/functionals/03-xc.gga_c_lm.inp,
	  testsuite/functionals/03-xc.gga_c_lyp.inp,
	  testsuite/functionals/03-xc.gga_c_p86.inp,
	  testsuite/functionals/03-xc.gga_c_pbe.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_jrgx.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_c_pw91.inp,
	  testsuite/functionals/03-xc.gga_c_xpbe.inp,
	  testsuite/functionals/03-xc.gga_x_am05.inp,
	  testsuite/functionals/03-xc.gga_x_b86.inp,
	  testsuite/functionals/03-xc.gga_x_b86_mgc.inp,
	  testsuite/functionals/03-xc.gga_x_b88.inp,
	  testsuite/functionals/03-xc.gga_x_bayesian.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r1.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r2.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_a.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_b.inp,
	  testsuite/functionals/03-xc.gga_x_g96.inp,
	  testsuite/functionals/03-xc.gga_x_lb.inp,
	  testsuite/functionals/03-xc.gga_x_lg93.inp,
	  testsuite/functionals/03-xc.gga_x_mpbe.inp,
	  testsuite/functionals/03-xc.gga_x_mpw91.inp,
	  testsuite/functionals/03-xc.gga_x_optb88_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optpbe_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optx.inp,
	  testsuite/functionals/03-xc.gga_x_pbe.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_jsjr.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_r.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_x_pbea.inp,
	  testsuite/functionals/03-xc.gga_x_pbek1_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_pw86.inp,
	  testsuite/functionals/03-xc.gga_x_pw91.inp,
	  testsuite/functionals/03-xc.gga_x_rpbe.inp,
	  testsuite/functionals/03-xc.gga_x_wc.inp,
	  testsuite/functionals/03-xc.gga_x_xpbe.inp,
	  testsuite/functionals/03-xc.gga_xc_b97.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_1.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_2.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_3.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_d.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_k.inp,
	  testsuite/functionals/03-xc.gga_xc_edf1.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_120.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_147.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_407.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_93.inp,
	  testsuite/functionals/03-xc.gga_xc_mpwlyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbe1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbelyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1c.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2c.inp,
	  testsuite/functionals/03-xc.gga_xc_xlyp.inp,
	  testsuite/functionals/03-xc.kli.inp,
	  testsuite/functionals/03-xc.lda_c_gl.inp,
	  testsuite/functionals/03-xc.lda_c_hl.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pw.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pw.inp,
	  testsuite/functionals/03-xc.lda_c_pw_mod.inp,
	  testsuite/functionals/03-xc.lda_c_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pz_mod.inp,
	  testsuite/functionals/03-xc.lda_c_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_vbh.inp,
	  testsuite/functionals/03-xc.lda_c_vwn.inp,
	  testsuite/functionals/03-xc.lda_c_vwn_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_wigner.inp,
	  testsuite/functionals/03-xc.lda_c_xalpha.inp,
	  testsuite/functionals/03-xc.lda_x.inp,
	  testsuite/functionals/03-xc.lda_xc_teter93.inp,
	  testsuite/functionals/03-xc.sic_pz.inp,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-inversion.inp,
	  testsuite/functionals/05-ks_inversion.test,
	  testsuite/functionals/06-rdmft.01-hf_smear.inp,
	  testsuite/functionals/06-rdmft.02-gs.inp,
	  testsuite/functionals/06-rdmft.test,
	  testsuite/linear_response/02-h2o_pol_lr.04_h2o_susc.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp,
	  testsuite/linear_response/03-vdw_sternheimer.test,
	  testsuite/linear_response/05-polarizability.01-gs.inp,
	  testsuite/linear_response/05-polarizability.02-sternheimer.inp,
	  testsuite/linear_response/05-polarizability.03-finite-diff.inp,
	  testsuite/linear_response/05-polarizability.test,
	  testsuite/open_systems/01-wavepacket.01-deriv_order_1.inp,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp,
	  testsuite/open_systems/01-wavepacket.test,
	  testsuite/open_systems/02-wavepacket_2d.01-full_q.inp,
	  testsuite/open_systems/02-wavepacket_2d.test,
	  testsuite/open_systems/03-extended_eigenstate.01-square_well_1d.inp,
	  testsuite/open_systems/03-extended_eigenstate.02-ring_leads_2d.inp,
	  testsuite/open_systems/03-extended_eigenstate.test,
	  testsuite/open_systems/04-propagate_eigenstate.01-square_well_1d.inp,
	  testsuite/open_systems/04-propagate_eigenstate.02-ring_leads_2d.inp,
	  testsuite/open_systems/04-propagate_eigenstate.test,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.test,
	  testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.01_gs.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.02_kdotp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.03_emresp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/07-tb09.01-gs_symm.inp,
	  testsuite/periodic_systems/07-tb09.02-gs_nosymm.inp,
	  testsuite/periodic_systems/07-tb09.test,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/09-etsf_io.01-gs.inp,
	  testsuite/periodic_systems/09-etsf_io.test,
	  testsuite/periodic_systems/10-berkeleygw.01-gs.inp,
	  testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/10-berkeleygw.test,
	  testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.test,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.test,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/01-h1d_lin.test,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/02-restart.test,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/03-h1d_ati.test,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/photo_electron/04-nfft.test,
	  testsuite/photo_electron/05-pfft.01-gs.inp,
	  testsuite/photo_electron/05-pfft.02-mask.inp,
	  testsuite/photo_electron/05-pfft.03-ba.inp,
	  testsuite/photo_electron/05-pfft.test,
	  testsuite/real_time/01-etrs.01-gs.inp,
	  testsuite/real_time/01-etrs.02-td.inp,
	  testsuite/real_time/01-etrs.03-td_lanczos.inp,
	  testsuite/real_time/01-etrs.test,
	  testsuite/real_time/02-aetrs.01-gs.inp,
	  testsuite/real_time/02-aetrs.02-td.inp,
	  testsuite/real_time/02-aetrs.03-td_lanczos.inp,
	  testsuite/real_time/02-aetrs.04-kick.inp,
	  testsuite/real_time/02-aetrs.05-spectrum.inp,
	  testsuite/real_time/02-aetrs.test,
	  testsuite/real_time/03-exp_mid.01-gs.inp,
	  testsuite/real_time/03-exp_mid.02-td.inp,
	  testsuite/real_time/03-exp_mid.test,
	  testsuite/real_time/04-etrs_single.test,
	  testsuite/real_time/05-time_propagation.01-gs.inp,
	  testsuite/real_time/05-time_propagation.02-td_domains.inp,
	  testsuite/real_time/05-time_propagation.03-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp,
	  testsuite/real_time/05-time_propagation.test,
	  testsuite/real_time/06-caetrs.01-gs.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/06-caetrs.test,
	  testsuite/real_time/08-laser.01-ground_state.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/08-laser.test,
	  testsuite/real_time/09-angular_momentum.01-gs.inp,
	  testsuite/real_time/09-angular_momentum.02-td_gipaw.inp,
	  testsuite/real_time/09-angular_momentum.03-td_icl.inp,
	  testsuite/real_time/09-angular_momentum.04-rotatory_strength.inp,
	  testsuite/real_time/09-angular_momentum.test,
	  testsuite/real_time/10-bomd.01-gs.inp,
	  testsuite/real_time/10-bomd.02-td.inp,
	  testsuite/real_time/10-bomd.03-td_restart.inp,
	  testsuite/real_time/10-bomd.04-xyz-anim.inp,
	  testsuite/real_time/10-bomd.test,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/11-tdmagnetic.test,
	  testsuite/real_time/12-absorption.01-gs.inp,
	  testsuite/real_time/12-absorption.02-td.inp,
	  testsuite/real_time/12-absorption.03-td-restart.inp,
	  testsuite/real_time/12-absorption.04-spectrum.inp,
	  testsuite/real_time/12-absorption.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.01-gs.inp,
	  testsuite/real_time/13-absorption-spin.02-td.inp,
	  testsuite/real_time/13-absorption-spin.03-td-restart.inp,
	  testsuite/real_time/13-absorption-spin.04-spectrum.inp,
	  testsuite/real_time/13-absorption-spin.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/13-absorption-spin.06-td_spinkick.inp,
	  testsuite/real_time/13-absorption-spin.07-spectrum_triplet.inp,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.01-gs.inp,
	  testsuite/real_time/14-absorption-spinors.02-td.inp,
	  testsuite/real_time/14-absorption-spinors.03-td-restart.inp,
	  testsuite/real_time/14-absorption-spinors.04-spectrum.inp,
	  testsuite/real_time/14-absorption-spinors.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/14-absorption-spinors.test,
	  testsuite/real_time/15-crank_nicolson.01-gs.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/15-crank_nicolson.test,
	  testsuite/real_time/16-sparskit.01-gs.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp,
	  testsuite/real_time/16-sparskit.test: * Setting the svn:keywords
	  'Id' property to all the files of the testsuite.

2014-01-31 13:13  micael

	* [r11696] src/hamiltonian/kick.F90,
	  testsuite/real_time/17-absorption-spin_symmetry.01-gs.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.02-td_spin_and_density_kick.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.03-spectrum_singlet_triplet.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.test,
	  testsuite/real_time/Makefile.am: * Bug fix: the
	  kick_spin_and_density perturbation was not applied correctly.
	  * Added a test for the kick_spin_and_density perturbation.

2014-01-31 16:20  joseba

	* [r11698] src/scf/lcao_inc.F90: LCAO alternative is only
	  calculated by the root process and then broadcasted. The size of
	  the input matrices (NxN) is saved in the rest of the processes,
	  being N the number of orbitals.
	  Now it broadcasted the proper eigenvector and eigenvalues.
	  Before, it was broadcasted the hamiltonian matrix, which wasn't
	  used anymore.

2014-01-31 16:21  joseba

	* [r11699] src/scf/lcao_inc.F90, src/system/subspace_inc.F90:
	  Corrected the indentation

2014-01-31 16:37  dstrubbe

	* [r11700] external_libs/spglib-1.5.2/src/Makefile.am,
	  external_libs/spglib-1.5.2/src/spglib_f.c,
	  external_libs/spglib-1.5.2/src/spglib_f08.f90,
	  src/ions/Makefile.am, src/ions/spglib_f.c,
	  src/ions/symmetries.F90: * Final fix to the compilation trouble
	  with spglib's Fortran interface: we are going back to style of
	  interface we had for the older spglib, without the Fortran 2003
	  features that were not usable by some of the older compilers.
	  Only the functions we use currently are included in the
	  interface, the array arguments are declared as scalars, the
	  c_int/c_char/c_double types are not used, the strings are
	  character(len=*) again, and the convention that the function
	  names start with 'spglib' is restored.
	  * String conversion between C and Fortran is handled through our
	  macros as in src/basic/oct_f.c.
	  * A check for space group being returned as zero (which is an
	  error code) is added.
	  * Refactored out a subsubroutine to disable symmetries and
	  initialize to the identity only.

2014-01-31 17:17  joseba

	* [r11701] src/scf/lcao_inc.F90: Deallocated matrices as soon as
	  possible. Thus, considerable amount of memory is saved in not
	  root processes
	  Indentation

2014-01-31 18:00  dstrubbe

	* [r11702] external_libs/spglib-1.5.2/src/spglib_f08.f90,
	  src/ions/symmetries.F90: * Removing ^M characters at the end of
	  lines in spglib_f08.f90.
	  * Fixing POP_SUB.

2014-01-31 18:50  adelgado

	* [r11703] src/pcm/pcm.F90: unconfortable procedure for generating
	  the solute cavity has been removed from 'pcm.F90'

2014-01-31 20:50  dstrubbe

	* [r11704] src/math/scalapack.F90: Adding a missing interface for
	  scalapack routine 'infog2l' (used for LCAO), and adding intent's
	  to two other interfaces.

2014-02-01 00:11  dstrubbe

	* [r11705] src/basic/Makefile.am, src/basic/blacs_proc_grid.F90,
	  src/basic/datasets.F90, src/basic/global.F90, src/basic/mpi.F90,
	  src/basic/mpi_lib_inc.F90: * Removed local mpi_err variables.
	  * Moved mpi_err from global_m to mpi_m, since it is useful in
	  some places (such as datasets) where global_m is not used,
	  whereas any place with MPI calls should have access to mpi_m.

2014-02-01 03:38  xavier

	* [r11706] src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90: Added a batch version of
	  linear_solver_operator.

2014-02-01 04:13  xavier

	* [r11707] src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/system/linear_solver_inc.F90: * Added a constant factor
	  version of batch_xpay.
	  * Converted some operations to batch mode in the linear solver.

2014-02-01 04:35  xavier

	* [r11708] src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90: More operations converted to
	  batch mode.

2014-02-01 05:20  xavier

	* [r11709] src/system/linear_solver_inc.F90: I forgot to remove an
	  ALLOCATE line that I had commented. This can
	  cause problems with some compilers.

2014-02-01 16:51  dstrubbe

	* [r11710] testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp: After the
	  upgrade to spglib-1.5.2, using gcc 4.4.5 as on lascar gives
	  peculiar results for the symmetries of the 04-silicon test: many
	  of
	  the operations have a fractional translation equal to a lattice
	  vector, or one of the supercell translations, even though those
	  are
	  equivalent to no translation. Since those are removed by our
	  symmetry
	  routine, the number of symmetries is too small. However, I found
	  that
	  slightly changing the lattice constant fixes this, so that is
	  what I
	  am doing for the time being. I am reporting the issue to the
	  developer
	  of spglib.

2014-02-01 20:00  adelgado

	* [r11711] src/pcm/pcm.F90: The module 'pcm.F90' has been modified
	  to read the cavity surface used in PCM calculations from an
	  external file previously generated. Useless lines have been
	  removed for consistency. Obviously, we should incorporate our own
	  algorithm to generate this cavity, however, at the present stage
	  is enough to read it from a file. The string variable
	  'CavityGeometry' has been added.

2014-02-01 20:25  dstrubbe

	* [r11712] testsuite/periodic_systems/11-silicon_force.test:
	  Another symmetry test.

2014-02-01 20:31  dstrubbe

	* [r11713] src/system/linear_solver_inc.F90: I don't see any reason
	  to give a fatal error for QMR breakdown. The result is simply
	  that it isn't converged. For example, it may still pass the test
	  matches for periodic_system/04-silicon when breakdown occurs.
	  
	  Nonetheless, I think the recent batch-ification of the linear
	  solver may have a problem because we never got QMR breakdown
	  errors before in the tests.

2014-02-01 20:34  dstrubbe

	* [r11714] src/pcm: Setting svn:ignore properties for pcm
	  directory.

2014-02-01 20:59  dstrubbe

	* [r11715] src/ions/symmetries.F90,
	  testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp: * spglib
	  seems to give better results if the lattice vectors are supplied
	  relative to the longest periodic component. The coordinates are
	  fractional anyway, so the overall scale doesn't matter in
	  principle. With this change, my earlier hack to the lattice
	  constant of the silicon test can be reversed.
	  * Remove integer part of 'fractional' translations that spglib
	  might provide. This would happen for the boron nitride test
	  currently, at least with gcc.
	  * Tests about fractional translations should use the existing
	  function with given precision.

2014-02-02 13:42  xavier

	* [r11716] src/system/linear_solver_inc.F90: Bugfix: reverted
	  changes that were causing the breakdown of the qmr
	  solver.

2014-02-02 14:38  xavier

	* [r11717] src/system/linear_solver_inc.F90: Fixed the problem with
	  the calculation of the norm by batches.

2014-02-02 17:10  dstrubbe

	* [r11718] src/states/states.F90: * The loops for
	  states_generate_random should run over all states, not just the
	  local ones, which ensures that the same random numbers will be
	  used regardless of states-parallelization.
	  * Removing the 'seed' variable which has no effect if set to 0.
	  There was no seed set for spinors anyway.
	  * Harmonizing the spinor case with the others by initializing
	  eigenvalues to M_ZERO instead of M_HUGE for consistency.

2014-02-02 17:41  dstrubbe

	* [r11719] testsuite/linear_response/Makefile.am: A testsuite input
	  file was missing from the Makefile.

2014-02-02 17:52  dstrubbe

	* [r11720] src/basic/datasets.F90, src/basic/parser.F90: Errors
	  should be followed by MPI_Abort, not MPI_Finalize.

2014-02-02 17:53  xavier

	* [r11721] src/system/linear_solver_inc.F90: Improved the handling
	  of termination conditions in the linear solver.

2014-02-02 20:19  dstrubbe

	* [r11722] src/states/restart.F90: An array was allocated larger
	  than necessary.

2014-02-02 21:10  xavier

	* [r11723] src/system/linear_solver_inc.F90: More changes in error
	  handling, to allow simultaneous iteration for
	  different states.

2014-02-02 22:02  xavier

	* [r11724] src/system/linear_solver_inc.F90,
	  src/system/preconditioners_inc.F90: * More operations done by
	  batchs.
	  * Removed some optional functionality.

2014-02-02 23:09  xavier

	* [r11725] src/system/linear_solver_inc.F90: Converted scalar
	  values to arrays, required for operations in batchs.

2014-02-02 23:23  dstrubbe

	* [r11726] src/sternheimer/phonons_lr.F90: Avoiding an array
	  temporary.

2014-02-03 00:42  xavier

	* [r11727] src/system/linear_solver_inc.F90: Converted arrays to
	  batch objects.

2014-02-03 02:23  dstrubbe

	* [r11728] testsuite/linear_response/05-polarizability.01-gs.inp:
	  The LCAO for this test had been disabled since there were not
	  enough orbitals, but now we can do LCAO with those that are
	  available and randomize the rest, so I am enabling LCAO. This
	  greatly speeds up the Sternheimer run, due presumably to better
	  convergence in the gs run.

2014-02-03 02:42  xavier

	* [r11729] src/system/linear_solver_inc.F90: Iterations for several
	  states are now done together in the linear
	  solver.

2014-02-03 03:32  dstrubbe

	* [r11730] src/states/linear_response_inc.F90,
	  src/sternheimer/sternheimer_inc.F90: * The 'minimal projector'
	  for Sternheimer was projecting out just the state itself from the
	  response. This is not sufficient to avoid divergence: the whole
	  degenerate subspace must be projected out (those components are
	  undefined anyway). This issue is at least partly responsible for
	  the large numbers of warnings about lack of convergence in
	  testsuite/periodic_systems/04-silicon.test, and now the warnings
	  are somewhat reduced, as well as the norm of the response for
	  some degenerate states. Unfortunately, this treatment does not
	  work currently for the unoccupied state since we do not have the
	  whole degenerate subspace there.
	  * The minimal projector is handled by X(lr_orth_vector) too now.

2014-02-03 03:59  dstrubbe

	* [r11731] testsuite/buildbot_query.pl: Making a script executable.

2014-02-03 04:19  dstrubbe

	* [r11732] src/ions/symmetries.F90: Bugfix to r11715: the check for
	  the identity translation was using an
	  uninitialized variable.

2014-02-03 04:31  xavier

	* [r11733] src/system/linear_solver_inc.F90: Converted some
	  operations in the linear solver into batch mode.

2014-02-03 04:54  dstrubbe

	* [r11734] testsuite/periodic_systems/04-silicon.02-kdotp.inp:
	  Turning off the preconditioner in the silicon kdotp test helps
	  hugely with convergence. Not sure why I didn't do this a long
	  time ago...

2014-02-03 18:42  dstrubbe

	* [r11735]
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp: Removing
	  commented OCTTargetTransformStates blocks which don't seem usable
	  and confused a user.

2014-02-03 22:37  dstrubbe

	* [r11736] configure.ac: Removing some useless lines in
	  configure.ac.

2014-02-03 23:39  dstrubbe

	* [r11737] testsuite/real_time/Makefile.am: Missing files in
	  testsuite Makefile.am.

2014-02-04 00:04  dstrubbe

	* [r11738] src/states/restart.F90, src/states/states.F90:
	  states_generate_random will no longer set eigenvalues to zero. It
	  is simpler to do this as needed outside, i.e. in the restart
	  routine when wavefunctions are not found. When we are starting
	  from random wavefunctions instead of (or with) LCAO, the
	  eigenvalues do not need to be set to zero because they are
	  initialized later to expectation values of the Hamiltonian.

2014-02-04 03:56  dstrubbe

	* [r11739] src/states/restart.F90: Bugfix to r11572: lowest_missing
	  must only be set if present.

2014-02-04 14:57  joseba

	* [r11740] src/scf/lcao_inc.F90: Corrected a bug created in the
	  commit r11701 ; non root processes have to skip the creation of
	  the hamiltonian. This is only the input matrix for the LAPACK
	  call and they have enough with the result

2014-02-04 17:26  dstrubbe

	* [r11741] testsuite/periodic_systems/12-boron_nitride.test:
	  Recentering the value of a match for the BN test so all can pass.

2014-02-04 18:22  dstrubbe

	* [r11742] testsuite/buildbot_query.pl: buildbot_query script now
	  reports summary statistics for convenience in updating test
	  files.

2014-02-04 20:58  dstrubbe

	* [r11743] testsuite/periodic_systems/12-boron_nitride.test: In
	  r11741, I accidentally set the reference value to the average
	  rather than center value which would not necessarily make the
	  match pass.

2014-02-04 21:09  dstrubbe

	* [r11744] testsuite/buildbot_query.pl: * buildbot_query.pl can now
	  take an optional list of local output files on the command line
	  to include in the analysis, to make sure tests are passed on some
	  other machine(s) as well as the buildslaves.
	  * The source of the minimum and maximum values are reported too.
	  * Defence against divide by zero when no matches found.

2014-02-05 00:45  dstrubbe

	* [r11745] libxc/src/libxc_master.F90: The libxc fortran interface
	  did not provide the constant XC_FAMILY_HYB_MGGA.

2014-02-05 00:52  dstrubbe

	* [r11746] src/xc/functionals.F90, src/xc/vxc_inc.F90,
	  src/xc/xc.F90: Adding XC_FAMILY_HYB_MGGA in some conditions as is
	  necessary for hybrid meta-GGAs to be usable. Not sure if this is
	  sufficient though!

2014-02-05 03:22  dstrubbe

	* [r11747] src/system/v_ks.F90, src/xc/functionals.F90,
	  src/xc/xc.F90: Caveat for exchange in fully periodic systems:
	  currently, we set the G=0 terms in the exchange potential to
	  zero, but this is only appropriate when there is a zero boundary
	  condition in some direction. The eigenvalues have an overall
	  offset from the correct result, affecting the total energy. The
	  proper solution is Monte Carlo integration of 1/G^2 around G=0.

2014-02-05 04:31  dstrubbe

	* [r11748] src/states/restart.F90: Bugfix to r11572: lowest_missing
	  in restart was set only if there was error reading a file, not if
	  it was simply not present.

2014-02-05 04:50  dstrubbe

	* [r11749] src/math/math.F90, src/states/states.F90: Catching
	  problems if you accidentally set the number of states to zero.

2014-02-05 16:39  micael

	* [r11750] src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90, src/hamiltonian/species_pot.F90:
	  * Fixed problem with NLCC and large boxes: the core density is
	  set to zero when evaluating the spline outside the interpolation
	  range.
	  * Removed the mf_put_radial_spline routine as it was not used
	  anymore and because it could be dangerous. Indeed, one should
	  always check if the spline evaluation is done inside or outside
	  the interpolation range, and take some appropriate action if it
	  is outside.

2014-02-06 13:59  jjornet

	* [r11751] src/grid/io_function.F90, src/ions/box.F90,
	  src/ions/box_union.F90, src/ions/simul_box.F90,
	  src/utils/local_multipoles.F90: Added new features in
	  local_multipoles utility: plot dipole moment in BILD format,
	  compute expected charge of the ions inside box.
	  Added BILD format to plot dipoles for chimera software:
	  <tt>http://plato.cgl.ucsf.edu/chimera/docs/UsersGuide/bild.html
	  </tt>
	  Added the skeleton of a new routine that will check if a point is
	  inside a Bader Volume.

2014-02-06 16:35  joseba

	* [r11752] src/grid/mesh_cube_parallel_map.F90, src/ions/box.F90,
	  src/poisson/poisson.F90, src/system/output_me.F90,
	  src/system/output_me_inc.F90: Corrected the size of the partition
	  matrix. When combined (states+domains) parallelization is used
	  the size of the cube has to be equal to the number of MPI
	  processes of the entire cube, not of the size of the domains
	  Updated a reference
	  Move comments to Doxygen and small styling

2014-02-06 17:51  dstrubbe

	* [r11753] m4/libxc.m4, src/xc/functionals.F90: Restoring
	  compatibility with libxc 2.0.2, broken in r11746 by adding use of
	  XC_FAMILY_HYB_MGGA. Now, we check in configure for whether this
	  symbol is available, and if it is not, we define it ourselves. Of
	  course, such a family will never be returned from libxc 2.0.2,
	  but this way is simpler than hiding all possible uses of the
	  constant in preprocessor directives.
	  
	  Fun fact: previously if you asked for a hybrid meta-GGA, you
	  would instead get KS inversion! The family for KS inversion was
	  using the value 64 which is supposed to be for hybrid meta-GGAs.
	  Now I assigned much larger numbers to the families we define
	  ourselves to avoid such a collision.

2014-02-06 22:19  dstrubbe

	* [r11754] src/main/unocc.F90, src/scf/lcao.F90: LCAO now handles
	  the message about states to be replaced, and writes it for random
	  wavefunctions too.

2014-02-06 22:30  dstrubbe

	* [r11755] src/scf/lcao.F90, src/system/subspace_inc.F90: Better
	  error-handling for descinit.

2014-02-06 22:37  dstrubbe

	* [r11756] src/main/main.F90: Removing cause of warning about
	  unterminated apostrophe.

2014-02-06 23:03  dstrubbe

	* [r11757] src/main/unocc.F90, src/scf/lcao.F90: * Bugfix to
	  r11572: if an unocc calculation was done with FromScratch = yes,
	  ExtraStates unset (or 0), and all the occupied states were
	  present, the highest state would be replaced by LCAO or a random
	  wavefunction, rather than being used as is.
	  * Removing unnecessary assertion in LCAO which required st_start
	  to be set as above. Right below the assertion is the code to do
	  the right thing in this case: just return as no LCAO needs to be
	  done. (This was added in r8269; I am not quite sure why it was
	  considered necessary then, but the code has changed a lot since
	  then anyway.)

2014-02-10 03:30  dstrubbe

	* [r11758] src/scf/lcao.F90,
	  testsuite/finite_systems_3d/14-fullerene_packed.test:
	  Orthogonalizing the random wavefunctions on top of LCAO is
	  definitely helpful for convergence, whether for alternative or
	  standard LCAO, so I am enabling this always. The results for the
	  unconverged test that uses this functionality are now slightly
	  altered.

2014-02-10 19:19  dstrubbe

	* [r11759] src/states/states_io.F90: Bugfix: for a spin-polarized
	  system, the output of states_write_eigenvalues always showed the
	  error from the first spin for both spins. (The change to the
	  spinor case is purely to look consistent, but actually behaves
	  the same since is == 0.) This bug goes back pretty close to the
	  beginning of time: it was introduced in r393 as part of a bigger
	  bug, and only partially corrected in r434.

2014-02-10 19:35  dstrubbe

	* [r11760] src/states/states_io.F90: Fix to
	  states_write_eigenvalues: an unnecessary distinction between the
	  periodic and non-periodic case was being made. This was a relic
	  of a time when a periodic calculation (only in the spinor case!)
	  had eigenvalues written relative to the Fermi energy, added r456
	  and removed r5737. The distinction is now removed, simplifying
	  the code, fixing the very bad formatting in the periodic spinor
	  case, and making the complex-scaling case applies to periodic
	  systems too (since it was unwisely inserted in only one branch).

2014-02-10 22:21  dstrubbe

	* [r11761] src/states/states_io.F90: * Simplifying
	  states_write_eigenvalues writing of header by adding 'Error' at
	  the end if needed rather than having all the cases duplicated.
	  There is now one fewer space in the non-spinor case before
	  'Error'; I think this is a price worth paying for simplicity!
	  * Shortened the formats for k-points and errors to reduce leading
	  spaces in their surrounding parentheses, since we know k-points
	  are in (-1, 1) and the error is positive and in scientific
	  notation has only one digit before the decimal place.

2014-02-10 23:34  dstrubbe

	* [r11762] testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/09-etsf_io.test,
	  testsuite/periodic_systems/10-berkeleygw.test,
	  testsuite/periodic_systems/11-silicon_force.test: Updating test
	  matches about k-point coordinates in light of format change in
	  r11761, using a command that is less sensitive to the number of
	  spaces.

2014-02-10 23:42  dstrubbe

	* [r11763] testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp: Removing
	  unnecessary 'LCAOStart = lcao_none' or 'no' in testsuite runs
	  that could not do LCAO anyway since they do not have
	  pseudopotentials.

2014-02-11 00:04  dstrubbe

	* [r11764] src/states/states_io.F90: No one has any business
	  calling states_write_eigenvalues with nst > st%nst. There was
	  code to set the occupations to zero in this case. I have replaced
	  it with an assertion to block that case, since st%eigenval will
	  be accessed out of bounds if nst > st%nst.

2014-02-11 00:14  dstrubbe

	* [r11765] src/states/smear.F90: Changing name of mysterious
	  variable 'xx' to something more meaningful when it is for a
	  k-weight, especially since 'xx' is used systematically for
	  something entirely different elsewhere in this routine and file.

2014-02-11 02:05  dstrubbe

	* [r11766] src/scf/lcao.F90,
	  testsuite/linear_response/01-casida.test: Important
	  fix/improvement to unocc mode with LCAO: the wavefunctions should
	  be orthogonalized, which seems to solve the problem of the very
	  first state becoming unconvergeable in unocc. In general, the
	  occupied orbitals calculated in gs, and the LCAO orbitals being
	  added to them, will not be orthogonal, and our eigensolvers and
	  subspace diagonalization seem unable to handle this situation. We
	  were only orthogonalizing when random wavefunctions were
	  involved, but now we will also orthogonalize when adding LCAO to
	  gs states, i.e. whenever we are combining different sets of
	  states. This changes results very slightly from one test.

2014-02-11 02:26  dstrubbe

	* [r11767] src/system/magnetic.F90: A small bugfix: for
	  dimensionality less than 3, the full vector of local magnetic
	  moment was not written out.

2014-02-11 04:25  dstrubbe

	* [r11768] src/states/smear.F90: * Moving initializations to more
	  appropriate place, and removing intermediate value.
	  * Removing sum(kweights(:)) which is required to be 1, and
	  removing intermediate assignment to sumq (especially since this
	  is a different meaning than sumq has later).
	  * Removing unused optional argument to smear_fill_occupations.

2014-02-11 05:38  dstrubbe

	* [r11769] src/states/smear.F90: Oops, fix to previous commit:
	  sum(kweights) is needed, it can be equal to 1 or 2.

2014-02-11 15:55  joseba

	* [r11770] src/basic/multicomm.F90, src/math/lalg_adv.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/math/math.F90,
	  src/math/tdfunction.F90, src/states/states_calc.F90,
	  src/system/eigen_arpack_inc.F90, src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90,
	  src/utils/local_multipoles.F90, src/xc/vxc_inc.F90: index is an
	  intrinsic word of Fortran
	  Allocation starting from 1

2014-02-11 16:44  dstrubbe

	* [r11771]
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp: Removing
	  extra columns for HGH species definitions in testsuite. The ones
	  in 03-magnetic serve only to produce a pointless warning about
	  the spacing being inconsistent with the recommendation (i.e. the
	  5th column set here).

2014-02-11 17:03  joseba

	* [r11772] doc/doxygen/Doxyfile: Excluded *_inc.F90 file from the
	  parser of Doxygen because are included from the preprocessor and
	  because, otherwise, the execution of Doxygen crashes

2014-02-11 21:12  dstrubbe

	* [r11773] src/scf/rdmft.F90: RDMFT does not need its own version
	  of el_per_state.

2014-02-11 22:15  dstrubbe

	* [r11774] src/main/casida.F90, src/states/smear.F90: el_per_state
	  should be an integer, since it only takes on the values 1 or 2.
	  Otherwise, we are passing up opportunities to use more accurate
	  integer arithmetic.

2014-02-11 22:25  dstrubbe

	* [r11775] src/scf/lcao.F90: If st_start is present but equal to 1,
	  i.e. we are replacing all states with LCAO in unocc, then there
	  is no need to orthogonalize, as the diagonalization will already
	  be producing orthogonal states.

2014-02-12 00:07  dstrubbe

	* [r11776] src/states/states_dim.F90: Removing unused and
	  uninitialized component st%d%nik_axis.

2014-02-12 01:00  dstrubbe

	* [r11777] src/states/restart.F90, src/states/smear.F90,
	  src/states/states_dim.F90: The smear and st%d objects now know
	  the number of k-points in the full zone, which can be used to
	  treat k-weights as integers.

2014-02-12 01:01  dstrubbe

	* [r11778] src/states/states.F90: Forgot this file in last commit.

2014-02-12 04:16  dstrubbe

	* [r11779] src/sternheimer/sternheimer.F90: Caveat about
	  'semiconducting' smearing and Sternheimer: we have such a general
	  view of semiconducting smearing that it can include a metallic
	  system, in which case it will give the wrong answer.

2014-02-12 14:21  joseba

	* [r11780] doc/doxygen, doc/doxygen/Doxyfile, src/pcm/pcm.F90:
	  Added the header to pcm.F90 and also added the SVN Id
	  Ignored the temporal file of Doxygen

2014-02-12 15:15  joseba

	* [r11781] doc/doxygen, doc/doxygen/Doxyfile, src/pcm/pcm.F90:
	  Properly commited the previous one

2014-02-12 15:41  dstrubbe

	* [r11782] doc/doxygen/Doxyfile: Updating paths that no longer
	  existed, in Doxyfile.

2014-02-12 16:27  joseba

	* [r11783] src/basic/profiling.F90: Deleted useless "../" from the
	  memory profiling output

2014-02-12 16:31  dstrubbe

	* [r11784] src/states/smear.F90: * smear now knows the number of
	  spins, and uses this to compute the maximum capacity for
	  electrons in the states, rather than summing the k-weights. This
	  allows that maximum capacity to be an integer.
	  * Using 'tol' variable in place of its numeric value in a couple
	  of places.

2014-02-12 20:40  dstrubbe

	* [r11785] src/scf/scf.F90,
	  testsuite/finite_systems_3d/16-scfinlcao.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.test,
	  testsuite/finite_systems_3d/Makefile.am: * Bugfix to r9383,
	  restoring ability to run with SCFinLCAO. In that commit,
	  lcao_init_orbitals was refactored out of lcao_wf, requiring an
	  extra call to that routine as added in r9787. However, since the
	  states are used to store the orbitals, and are then overwritten
	  by the states from diagonalization, we must repeat
	  lcao_init_orbitals for every iteration. Moreover, since some
	  arrays are allocated in lcao_init_orbitals, and only deallocated
	  in lcao_end (which also deallocates other things), we must
	  completely initialize and destroy the LCAO object for each
	  iteration. Obviously this is quite inefficient and can be
	  improved, but at least it works again.
	  * Adding a test to ensure SCFinLCAO continues to work.

2014-02-12 20:47  micael

	* [r11786] src/scf/lcao_inc.F90: The matrix containing the LCAO
	  eigenvectors is not gathered in all nodes anymore when running in
	  parallel. Instead, a loop over batches of states is done, and
	  only the eigenvectors needed by the current batch are gathered.
	  This allows to save a considerable amount of memory when running
	  calculations with a very large number of states.
	  
	  Note that the case where ScaLAPACK is used is still treated the
	  old way.

2014-02-12 20:50  dstrubbe

	* [r11787] src/scf/scf.F90: For SCFinLCAO, the errors for each
	  state are unknown (or zero, depending on your perspective). As a
	  result, ConvEigenError is not meaningful, and warnings about
	  state convergence should not be written.

2014-02-13 01:54  dstrubbe

	* [r11788] src/ions/kpoints.F90, src/states/smear.F90,
	  src/states/states_dim.F90: * Semiconducting smearing now uses
	  integer arithmetic for occupations, which avoids problems of
	  precision when adding occupations of many states and many
	  k-points, and sometimes resulted in ef_occ exceeding 1.
	  * The weights, for this purpose, are handled as fractions.
	  Therefore, the weights are now required to be rational numbers so
	  that a denominator can be found. It is hard to imagine when you
	  would want irrational numbers as weights, so I don't think this
	  should pose a problem.
	  * Added some assertions for semiconducting smearing.

2014-02-13 04:28  dstrubbe

	* [r11789] testsuite/finite_systems_3d/16-scfinlcao.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.01-std.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.02-alt.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.test,
	  testsuite/finite_systems_3d/Makefile.am: Adding test for
	  SCFinLCAO with LCAOAlternative.

2014-02-13 04:30  dstrubbe

	* [r11790] src/scf/lcao.F90, src/scf/lcao_inc.F90, src/scf/scf.F90:
	  Moving allocations and deallocations so LCAO does not have to be
	  completed initialized and ended for each iteration with
	  SCFinLCAO.

2014-02-13 11:37  micael

	* [r11791] src/grid/par_vec.F90: * Added some MPI_Debug calls in
	  vec_init.
	  * A call to MPI_Alltoall was made using the same array as
	  receiving and sending buffer, so that sometimes mpich would
	  complain about it.

2014-02-13 14:21  micael

	* [r11792] src/basic/polyhedron.F90,
	  src/grid/mesh_cube_parallel_map.F90, src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/ions/box_union.F90,
	  src/ions/geometry.F90, src/ions/kpoints.F90,
	  src/ions/simul_box.F90, src/main/casida.F90,
	  src/main/casida_inc.F90, src/math/matrix.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/propagation.F90,
	  src/opt_control/target_hhg_inc.F90, src/pcm/pcm.F90,
	  src/poisson/poisson_fmm.F90, src/species/ps_pspio_inc.F90,
	  src/states/modelmb_exchange_syms_inc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90, src/system/eigen_lobpcg_inc.F90,
	  src/system/output_berkeleygw_inc.F90,
	  src/system/output_etsf_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/xc_kli_pauli_inc.F90, src/system/xc_oep_inc.F90,
	  src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90: * Improved
	  memory profiling by adding the starting index when allocating
	  several arrays.

2014-02-13 16:16  micael

	* [r11793] src/scf/lcao_inc.F90: * Bug fix: there is no point in
	  having a scheme to save memory if you don't deallocate the arrays
	  you want to get rid of...

2014-02-13 16:33  micael

	* [r11794] src/scf/lcao_inc.F90: * Making sure that we only attempt
	  to deallocate allocated arrays.

2014-02-13 16:35  micael

	* [r11795] src/grid/partition.F90: * Changing the way the
	  distributed partition checks the process in which the information
	  about a point is stored, such that only integer arithmetic is
	  used. This should make the routine more robust.

2014-02-13 17:37  dstrubbe

	* [r11796] src/basic/json.F90, src/grid/partition.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/poisson/poisson_fmm.F90,
	  src/species/ps.F90, src/system/xc_oep_x_inc.F90: Following on
	  r11792, adding start indices to SAFE_ALLOCATE statements. There
	  must be some way we can make the code not compile if this isn't
	  done. I fixed everything (outside of the frozen directory) that I
	  could find via the query
	  
	  grep -R 'SAFE_ALLOCATE(' src/* | grep -v '(1:' | grep -v '(0:' |
	  grep '))'
	  
	  which does turn up many statements that are ok too of course.
	  Most of the ones I changed are size 1, in which case the
	  profiling would still be ok I think, but it helps for checking
	  automatically to make these statements conform too.

2014-02-13 17:54  dstrubbe

	* [r11797] src/ions/kpoints.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_dim.F90: Renaming 'full_nik' to 'nik_factor',
	  and not basing it on 'nik_axis'. In the case of BerkeleyGW
	  output, we need to set nik_axis in a way that is different from
	  nik_factor, so we need different variables. Also, the concept of
	  a 'full zone' is not necessarily meaningful for an arbitrary set
	  of k-points as for a bandstructure.

2014-02-13 20:38  dstrubbe

	* [r11798] src/ions/kpoints.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_dim.F90: Neither st%d nor the kpoints type now
	  keeps track of the nik_factor for semiconducting smearing
	  k-weights. Rather it is calculated by a routine called from
	  smearing only in the semiconducting case, so its condition of
	  rational weights only applies in that case.

2014-02-13 21:20  dstrubbe

	* [r11799] src/scf/lcao_inc.F90: Forgot to remove these allocations
	  in r11790 when moving them elsewhere.

2014-02-13 21:34  dstrubbe

	* [r11800] src/scf/lcao_inc.F90: Fixes for test
	  finite_systems_3d/14-fullerene_packed.test: parallel in states
	  with ScaLAPACK, the array 'levec' was being accessed out of
	  bounds. Also, in two other places, we can allocate an array
	  smaller or do fewer iterations in a loop. And, fixed a typo.

2014-02-13 21:37  dstrubbe

	* [r11801] src/states/states_calc_inc.F90,
	  src/system/subspace_inc.F90: Adding assertions to block
	  calculations with some subspace diagonalization and
	  orthogonalization algorithms that do not work with StatesPack. I
	  noticed this because if you run 14-fullerene_packed parallel in
	  states, it crashes in orthogonalization, and if you run
	  10-fullerene with StatesPack it crashes in subspace
	  diagonalization.

2014-02-13 22:00  dstrubbe

	* [r11802] src/system/eigensolver.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90: Removing unneeded arguments and
	  routine.

2014-02-14 11:15  joseba

	* [r11803] src/grid/mesh_init.F90: Finished the execution in a more
	  ordered way, when a arbitrary partition size is used. This
	  allows, for instance, to have the profiling output of the
	  execution

2014-02-14 16:32  dstrubbe

	* [r11804] src/scf/scf.F90, src/states/Makefile.am,
	  src/states/states_io.F90: The Fermi energy is now written from
	  states_write_eigenvalues, which makes it show up in a few more
	  places where it is useful, and now has a unit appended.

2014-02-17 10:19  marques

	* [r11805] libxc/src/Makefile.am, libxc/src/hyb_mgga_xc_tpssh.c:
	  Patch from Susi Lehtola that implements XC_HYB_MGGA_XC_REVTPSSH
	  and XC_HYB_MGGA_XC_TPSSH.

2014-02-17 10:52  marques

	* [r11806] libxc/src/hyb_mgga_xc_tpssh.c, libxc/src/mgga_c_pkzb.c:
	  Small correction of reference
	  Now mgga_xc_revtpssh_init used revtpss correlation

2014-02-17 13:17  marques

	* [r11807] libxc/src/work_mgga_c.c: Solves the bug that Susi
	  Lehtola reported for the c_tpss.

2014-02-17 17:47  dstrubbe

	* [r11809] src/system/output.F90: * Fix to r11557: ifmax was the
	  same for all k-points and spins for semiconducting smearing, but
	  in fact the occupations are not necessarily the same over
	  k-points and spins. The problem in ifmax for semiconductors
	  before was the the Fermi energy is set to the top of the valence
	  band, so comparing directly against that may or may not include
	  those bands. But if we use a tolerance it works.
	  * Commenting out non-implemented option about real BerkeleyGW
	  output.

2014-02-18 00:05  dstrubbe

	* [r11810] src/system/output_states_inc.F90: Bugfix: the units for
	  Output = current were wrong. This is the second (and hopefully
	  last) bugfix to those units, after r10168...

2014-02-18 12:15  marques

	* [r11811] libxc/src/Makefile.am, libxc/src/gga_x_q2d.c: Added
	  functional gga_x_q2d

2014-02-18 13:13  micael

	* [r11812] libxc/NEWS, libxc/PACKAGING, libxc/configure.ac: *
	  Tagging Libxc version 2.0.3.

2014-02-19 10:13  marques

	* [r11813] libxc/src/gga_x_hjs.c, libxc/src/gga_x_wpbeh.c,
	  libxc/src/mgga_c_pkzb.c, libxc/src/util.h: Fixed a couple of
	  unitialized variables found by Jussi Lehtola

2014-02-19 16:14  marques

	* [r11814] libxc/src/Makefile.am, libxc/src/gga_c_ft97.c,
	  libxc/src/gga_c_q2d.c, libxc/src/lda_c_2d_amgb.c,
	  libxc/src/mgga_xc_otpss_d.c, libxc/src/test.c, libxc/src/util.h,
	  libxc/src/work_gga_c.c, libxc/src/work_lda.c,
	  libxc/src/work_mgga_x.c: Added the correlation part of the gga
	  q2d. I have some doubts about this as there is at least one clear
	  mistake in the paper
	  started adding terms for kxc in the ggas. Still most of the terms
	  are missing.

2014-02-24 15:13  micael

	* [r11816] libxc/src/gga_c_lm.c, libxc/src/gga_c_lyp.c,
	  libxc/src/gga_c_p86.c, libxc/src/gga_c_pbe.c,
	  libxc/src/gga_c_pw91.c, libxc/src/gga_c_sogga11.c,
	  libxc/src/gga_c_tca.c, libxc/src/gga_c_wi.c,
	  libxc/src/gga_x_2d_b88.c, libxc/src/gga_x_b88.c,
	  libxc/src/gga_x_bpccac.c, libxc/src/gga_x_c09x.c,
	  libxc/src/gga_x_ft97.c, libxc/src/gga_x_lb.c,
	  libxc/src/gga_x_pw91.c, libxc/src/gga_x_rpbe.c,
	  libxc/src/gga_x_sogga11.c, libxc/src/gga_x_wc.c,
	  libxc/src/gga_x_wpbeh.c, libxc/src/lda_c_2d_amgb.c,
	  libxc/src/lda_c_gombas.c, libxc/src/lda_c_hl.c,
	  libxc/src/lda_c_ml1.c, libxc/src/lda_c_pw.c,
	  libxc/src/lda_c_pz.c, libxc/src/lda_c_rc04.c,
	  libxc/src/lda_c_rpa.c, libxc/src/lda_c_vwn.c, libxc/src/lda_x.c,
	  libxc/src/lda_x_1d.c, libxc/src/mgga_c_cs.c,
	  libxc/src/mgga_x_br89.c, libxc/src/xc_config.h,
	  libxc/src/xc_unconfig.h: Patch from Susi Lehtola to use correct
	  version of several functions when SINGLE_PRECISION is in use.

2014-02-24 15:15  micael

	* [r11817] libxc/src/mgga_x_2d_prhg07.c: Another patch from Susi
	  Lehtola: mgga_x_2d_prhg07.c uses long double arithmetic, so one
	  should use long double functions.

2014-02-25 20:18  dstrubbe

	* [r11818] src/basic/io_binary.c: * Fixing small memory leaks in
	  io_binary.c, flagged in part by cppcheck.
	  * Typo.
	  * Useless initialization of 'fd'.

2014-02-25 20:24  dstrubbe

	* [r11819] src/math/nfft_f.c: Useless declarations and
	  initializations.

2014-02-25 20:42  dstrubbe

	* [r11820] src/basic/oct_gdlib_f.c: Minor memory leaks.

2014-02-25 21:03  dstrubbe

	* [r11821] src/basic/io_csv.c: Fixing more small memory leaks.

2014-02-25 21:18  dstrubbe

	* [r11822] src/math/minimizer_low.c: Error code from GSL function
	  was being ignored.

2014-02-26 15:18  joseba

	* [r11823] src/utils/convert.F90: Corrected the variable
	  documentation

2014-02-26 16:15  lehtola

	* [r11824] libxc/src/Makefile.am: Fix SMP build.

2014-02-26 16:19  lehtola

	* [r11825] libxc/src/Makefile.am, libxc/src/xc-info.c: Added
	  xc-info tool.

2014-02-26 16:21  lehtola

	* [r11826] libxc/testsuite/xc-get_data.c: Add support for hybrid
	  mgga functionals in xc-get_data.

2014-02-26 17:28  lehtola

	* [r11827] libxc/src/Makefile.am: Rewrite xc-info and libxcf90
	  dependencies.

2014-02-26 19:13  lehtola

	* [r11828] libxc/src/gga_x_am05.c, libxc/src/special_functions.c,
	  libxc/src/util.h: Multiple precisions of Lambert W function.

2014-02-26 19:47  lehtola

	* [r11829] libxc/src/gga_c_ft97.c, libxc/src/hyb_mgga_xc_tpssh.c:
	  Reduce scope of some internal functions to fix --enable-single.

2014-02-26 20:19  lehtola

	* [r11830] libxc/src/bessel.c, libxc/src/expint_e1.c,
	  libxc/src/gga_x_ityh.c, libxc/src/gga_x_sfat.c,
	  libxc/src/lda_x_1d.c, libxc/src/mgga_x_2d_prhg07.c,
	  libxc/src/test.c, libxc/src/util.c, libxc/src/util.h: More fixes
	  to --enable-single.

2014-02-26 20:26  lehtola

	* [r11831] libxc/src/integrate.c, libxc/src/lda_x_1d.c,
	  libxc/src/test.c, libxc/src/util.h: Last fixes to
	  --enable-single.

2014-02-26 20:36  lehtola

	* [r11832] libxc/src/Makefile.am: If single precision enabled,
	  double precision modules still need to be installed.

2014-02-26 20:48  dstrubbe

	* [r11833] src/td/td.F90, src/td/td_init_inc.F90: * Mention the
	  number of iterations to be done in initial info from td.
	  * Short-circuit further initializations when all requested
	  iterations have been done, to avoid unnecessary and
	  time-consuming steps.

2014-02-26 20:50  lehtola

	* [r11834] libxc/src/Makefile.am: Simplify Makefile by pulling out
	  common declaration per David Strubbe's proposal.

2014-02-27 07:27  lehtola

	* [r11835] libxc/testsuite/xc-get_data.c: Added missing argument to
	  fprintf.

2014-02-27 08:25  lehtola

	* [r11836] libxc/src/bessel.c, libxc/src/mgga_x_br89.c: Changed
	  some fabs() to ABS().

2014-02-27 08:47  lehtola

	* [r11837] libxc/src/util.h: Forgot to modify function declarations
	  for Bessel functions.

2014-02-27 13:35  lehtola

	* [r11838] libxc/src/gga_x_b86_mgc.c, libxc/src/gga_x_pbe.c: Remove
	  one unused variable and fix initialization of PBEmol exchange.

2014-02-27 19:51  adelgado

	* [r11839] src/Makefile.am, src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian.F90, src/pcm/pcm.F90,
	  src/system/system.F90, src/system/v_ks.F90: PCM changes are being
	  propagated to do ground state calculations.

2014-02-28 21:51  dstrubbe

	* [r11840] src/ions/kpoints.F90: Monkhorst-Pack grid: Clearer (and
	  corrected) citations in variable reference instead of just a
	  comment.

2014-02-28 22:17  dstrubbe

	* [r11841] src/math/root_solver.F90, src/math/root_solver_inc.F90:
	  Removing long-unused code about root solvers, especially since
	  the variable RootSolver suggests there are many options to choose
	  from, but in fact there are only two (and one only applies for
	  real and the other only for complex, apparently).

2014-02-28 22:23  dstrubbe

	* [r11842] src/math/ode_solver.F90, src/math/ode_solver_inc.F90:
	  Doxygen comments.

2014-02-28 22:30  dstrubbe

	* [r11843] src/math/ode_solver.F90, src/math/ode_solver_inc.F90,
	  src/math/root_solver.F90: Removing unnecessary real/complex
	  versions of ODE solver routines.

2014-02-28 23:20  lehtola

	* [r11844] libxc/src/xc_config.h: Fix bug in xc_config.h

2014-02-28 23:32  lehtola

	* [r11845] libxc/src/expint_e1.c: Use double precision if necessary
	  in expint_e1.

2014-03-01 10:44  lehtola

	* [r11846] libxc/TODO: Add MCY functionals to TODO.

2014-03-01 10:46  lehtola

	* [r11847] libxc/testsuite/Makefile.am, libxc/testsuite/input,
	  libxc/testsuite/input/BrOH, libxc/testsuite/input/BrOH+,
	  libxc/testsuite/input/H, libxc/testsuite/input/Li,
	  libxc/testsuite/input/README, libxc/testsuite/xc-error.c,
	  libxc/testsuite/xc-regression.c,
	  libxc/testsuite/xc-reset-regression,
	  libxc/testsuite/xc-run_testsuite: Rewritten test routines. Still
	  need updated reference data. Reasonable tolerances should be also
	  determined.

2014-03-01 11:47  lehtola

	* [r11848] libxc/testsuite/regression/lda_x.pol.bz2,
	  libxc/testsuite/regression/lda_x.unpol.bz2: Add lda reference
	  files to avoid compile errors.

2014-03-01 13:22  lehtola

	* [r11849] libxc/testsuite/xc-regression.c: Use similar output
	  precision to numerical precision in xc-regression.

2014-03-01 18:32  dstrubbe

	* [r11850] src/basic/json.F90: Unused routines.

2014-03-01 18:38  dstrubbe

	* [r11851] src/math/ode_solver.F90, src/math/root_solver.F90:
	  Removing unused routine which results in two unused variables in
	  the reference.

2014-03-01 18:48  dstrubbe

	* [r11852] src/math/root_solver.F90, src/math/sparskit_inc.F90:
	  Classifying Math variables.

2014-03-01 18:59  dstrubbe

	* [r11853] src/math/sparskit.F90, src/math/sparskit_inc.F90,
	  src/td/propagator.F90: Unnecessarily templated routine.

2014-03-01 19:20  dstrubbe

	* [r11854] src/math/sparskit.F90, src/math/sparskit_inc.F90,
	  src/td/propagator.F90: Sparskit type keeps track of whether it is
	  real or complex.

2014-03-01 19:29  dstrubbe

	* [r11855] src/math/sparskit.F90, src/math/sparskit_inc.F90,
	  src/td/propagator.F90: Unnecessarily templated routine.

2014-03-01 21:56  dstrubbe

	* [r11856] src/sternheimer/em_resp_calc_inc.F90: Bugfix: the
	  linear-response ELF with complex wavefunctions was wrong because
	  one intermediate variable was declared real instead of complex.

2014-03-01 22:09  dstrubbe

	* [r11857] src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/kdotp_calc_inc.F90: * Fixing warning about type
	  conversion by writing part that is only for complex without X( )
	  template.
	  * Removing routine X(lr_calc_2np1) which was never used as far as
	  I can tell, and was not completed. It was added in r5356.
	  * Making type conversion explicit in kdotp calculation to avoid
	  warning.

2014-03-01 22:38  dstrubbe

	* [r11858] src/system/output_berkeleygw_inc.F90: Cleaning up and
	  commenting-out some debugging stuff.

2014-03-04 08:52  lehtola

	* [r11859] libxc/src/gga_x_wpbeh.c, libxc/src/xc_config.h,
	  libxc/src/xc_unconfig.h: Macroize call to erfc in gga_x_wpbeh.

2014-03-11 17:07  dstrubbe

	* [r11860] external_libs/spglib-1.5.2/src, src/pcm: svn:ignore for
	  .a files, not ignored by default for some older svn versions.

2014-03-11 17:19  dstrubbe

	* [r11861] src/frozen/functional.F90, src/frozen/gga.F90,
	  src/frozen/interface_xc.F90: frozen would not compile with ifort
	  11.1, giving an error that names such as XC_POLARIZED were not
	  defined in the module whose use-list mentioned them. I removed
	  the use-lists involving such things, to just use the module
	  publicly.

2014-03-11 17:40  adelgado

	* [r11862] src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian.F90, src/main/run.F90,
	  src/pcm/pcm.F90, src/system/system.F90, src/system/v_ks.F90: Most
	  of the suggestions made by David to commit 11839 were
	  implemented. More details as follows,
	  
	  1- pcm/pcm.F90: A new type 'pcm_t' that handles all PCM variables
	  has been designed. The subroutines
	  'v_electrons_cav', 'v_nuclei_cav' and 'pcm_pot_rs' were moved to
	  'pcm/pcm.F90'. All PCM variables
	  are initialized by subroutine 'pcm_init'.
	  
	  2- system/system.F90: Call to subroutine "pcm_init' from there
	  was removed. Now it is called from subroutine
	  'hamiltonian_init'. Parsing solvation variables was moved back to
	  subroutine 'pcm_init'.
	  
	  3- hamiltonian/epot.F90: The fields 'ep%v_pcm_n(:)' and
	  'ep%v_pcm_e(:)' were removed from the 'epot_t' type.
	  Subroutines related to PCM calculations are now encapsulated in
	  'pcm/pcm.F90'.
	  
	  4- hamiltonian/hamiltonian.F90: The new field 'pcm' of type
	  'pcm_t' is now accesible through variables of
	  type 'hamiltonian_t'. PCM contributions to the KS hamiltonian
	  were added consistently
	  in subroutine 'hamiltonian_update' in terms of 'hm%pcm%v_e_rs(:)'
	  and "hm%pcm%v_n_rs(:)'.
	  SAFE_DEALLOCATE's of PCM variables was incorporated in subroutine
	  'hamiltonian_end'.
	  
	  5- system/v_ks.F90: The procedure to calculate the Hartree
	  potential at the tesserae representative points
	  was encapsulated in the subroutine 'v_electrons_cav', implemented
	  in 'pcm/pcm.F90'.

2014-03-11 18:17  adelgado

	* [r11863] src/pcm/pcm.F90:

2014-03-11 18:29  adelgado

	* [r11864] src/pcm/pcm.F90: Defining 'sphere_t' and 'tess_t' to
	  avoid compilation errors with pgi

2014-03-11 19:32  dstrubbe

	* [r11865] libxc/src, libxc/testsuite: svn:ignore properties for
	  new libxc executables.

2014-03-11 19:56  lehtola

	* [r11866] libxc/testsuite/xc-regression.c: Fix icc warning caused
	  by freeing uninitialized variable.

2014-03-11 21:38  dstrubbe

	* [r11867] src/main/main.F90, src/system/eigen_arpack_inc.F90: *
	  More info about doing nscf with unocc.
	  * Removing warning about unterminated '.

2014-03-12 00:12  dstrubbe

	* [r11868] src/states/states.F90: More regular format for
	  outputting info on states blocks.

2014-03-12 16:43  adelgado

	* [r11869] src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian.F90, src/main/run.F90,
	  src/pcm/pcm.F90, src/system/v_ks.F90: call to subroutine
	  'pcm_init' was moved to 'hamiltonian_init'. PCM real-space
	  potential due to nuclei is generated inside
	  'hamiltonian_epot_generate'. This ensures that both, PCM
	  potential due to nuclei and electrons enter properly in
	  'hamiltonian_update'. subroutine 'pcm_end' in pcm/pcm.F90
	  deallocates PCM variables. Comments were changed properly
	  followwing
	  http://www.tddft.org/programs/octopus/wiki/index.php/Developers:Doxygen_documentation.

2014-03-12 18:15  adelgado

	* [r11870] src/hamiltonian/hamiltonian.F90: Fix: The total
	  polarization charges are only printed if PCM is enable.

2014-03-12 19:35  dstrubbe

	* [r11871] src/pcm/pcm.F90: Commented out incorrect parsing of
	  CalculationMode which is breaking all the tests. Alain, please
	  run the testsuite to be sure this sort of thing doesn't happen.
	  (Also, this variable shouldn't be parsed by pcm_init anyway.)

2014-03-12 19:43  dstrubbe

	* [r11872] src/states/restart.F90, src/td/td.F90,
	  src/td/td_write.F90: * Call to restart_read can now specify a
	  label to be used in identifying what sort of restart info is
	  being read. This is helpful particularly for td runs which load
	  various kinds of info which is not clearly identified. Added
	  label in a few places.
	  * Removing unused variable 'dir'.

2014-03-13 03:16  dstrubbe

	* [r11873] src/states/restart.F90: Fix to r11872 which was making a
	  test fail.

2014-03-13 17:11  dstrubbe

	* [r11874] src/scf/scf.F90: More sensitive test for validity of
	  periodic dipole calculation, which also avoids compiler crash for
	  latest ifort.

2014-03-13 18:27  dstrubbe

	* [r11875] src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90: *
	  Making type cast explicit.
	  * Typo.
	  * Unused variable.

2014-03-13 18:43  dstrubbe

	* [r11876] liboct_parser/parse_exp.c: Fix to problem flagged by
	  cppcheck: Common realloc mistake: 'symbuf' nulled but not freed
	  upon failure. Explanation: "If realloc fails, then the original
	  memory allocation exists, but is leaked as it is no longer
	  referred to by [symbuf]. So you need to keep a handle on the
	  original allocation until you have verified that the new
	  allocation is valid."
	  (http://www.mantidproject.org/How_to_fix_CppCheck_Errors)

2014-03-14 02:26  dstrubbe

	* [r11877] src/basic/loct.F90, src/basic/oct_f.c,
	  src/states/restart.F90: When loading restart info, the time it
	  was written is now output. This may help catch cases where the
	  restart info is in fact older than expected (i.e. a recent run
	  wrote no restart info).

2014-03-14 18:49  dstrubbe

	* [r11878] src/basic/getopt_f.c: Corrections to 'Usage' messages
	  from utilities: misspellings, lacking end-line characters.

2014-03-14 20:25  dstrubbe

	* [r11879] src/utils/oscillator_strength.F90: Removing meaningless
	  code.

2014-03-14 20:41  dstrubbe

	* [r11880] src/grid/double_grid.F90, src/math/fft.F90,
	  src/system/exponential.F90, src/utils/casida_spectrum.F90,
	  src/utils/centergeom.F90, src/utils/dielectric_function.F90,
	  src/utils/liquid.F90, src/utils/local_multipoles.F90,
	  src/utils/rotatory_strength.F90, src/utils/xyzanim.F90: * Adding
	  parentheses to subroutine calls that lack them.
	  * Removing duplicative calls to parse ExperimentalFeatures in
	  some utilities, since this is covered in messages_init already.

2014-03-14 20:43  dstrubbe

	* [r11881] src/hamiltonian/hamiltonian.F90: One more call without
	  parentheses.

2014-03-14 21:52  dstrubbe

	* [r11882] src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90: * Removed peculiar handling
	  of datasets in oct-photoelectron_spectrum. It makes no sense to
	  me and seems wrong. It was added in r8585 by Umberto.
	  * Doxygen comment.

2014-03-14 21:58  dstrubbe

	* [r11883] src/utils/infrared.F90, src/utils/liquid.F90,
	  src/utils/vibrational.F90: PUSH/POP's.

2014-03-15 22:13  dstrubbe

	* [r11884] src/basic/messages.F90, src/grid/mesh_init.F90,
	  src/main/main.F90, src/main/test.F90,
	  src/utils/casida_spectrum.F90, src/utils/centergeom.F90,
	  src/utils/convert.F90, src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/infrared.F90,
	  src/utils/liquid.F90, src/utils/local_multipoles.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90: parser_init is now included in
	  messages_init, since it is required for that routine to work, and
	  is always called right before it; for consistency, parser_end is
	  now included also in messages_end.

2014-03-15 22:30  dstrubbe

	* [r11885] src/utils/convert.F90: Removing usage of datasets and
	  calculation mode from oct-convert which seems inappropriate.

2014-03-16 18:10  dstrubbe

	* [r11886] testsuite/periodic_systems/06-h2o_pol_lr.01_gs.inp:
	  Avoiding warning about some states not being converged in a test.

2014-03-17 00:55  dstrubbe

	* [r11887] src/system/pert_inc.F90: Adjusting types to reduce
	  warnings from gfortran 4.8, and slightly reduce number of
	  operations in complex version.

2014-03-17 14:22  joseba

	* [r11888] src/poisson/poisson_libisf.F90: Do not output the
	  malloc.prc ISF profiling file with the new ISF, which can be
	  quite large file. But if you want still have it you just have to
	  define output_level to 1 (light) or 2 (full).

2014-03-18 15:58  dstrubbe

	* [r11889] src/states/restart.F90: Missing space.

2014-03-18 21:18  dstrubbe

	* [r11894] src/utils/oscillator_strength.F90: * not_implemented
	  message for oscillator strength case.
	  * Doxygen comments.

2014-03-20 09:52  lehtola

	* [r11896] libxc/src/Makefile.am, libxc/src/integrate.c,
	  libxc/src/libxc_master.F90, libxc/src/mgga_x_2d_prhg07.c,
	  libxc/src/mgga_x_br89.c, libxc/src/xc_s.h: Fix single precision
	  preprocessor directives. #if clauses shouldn't be used as the
	  macro is not defined in double precision mode.

2014-03-20 10:10  lehtola

	* [r11898] libxc/src/Makefile.am: This should fix the SMP build
	  error.

2014-03-20 10:20  lehtola

	* [r11899] libxc/src/Makefile.am: xc-info should first be linked to
	  -lxc and then to -lm.

2014-03-20 16:35  dstrubbe

	* [r11903] testsuite/real_time/12-absorption.test: Caveat about a
	  test.

2014-03-20 16:44  dstrubbe

	* [r11904] testsuite/periodic_systems/04-silicon.01-gs.inp: Turning
	  off preconditioner for silicon test. Sometimes not all states
	  could be converged by the eigensolver, but this helps get full
	  convergence.

2014-03-20 20:09  dstrubbe

	* [r11905] src/hamiltonian/species_pot.F90: Bugfix: if running with
	  NLCC and dimensionality less than max-dim (e.g. the NLCC test in
	  the testsuite, with max-dim=4), a call to periodic_copy_position
	  could make the assignment to center go outside the array bounds.

2014-03-20 20:11  dstrubbe

	* [r11906] testsuite/real_time/05-time_propagation.test: TestGroups
	  was not updated when this test file was moved to a different
	  directory.

2014-03-20 20:40  dstrubbe

	* [r11907] src/states/restart.F90: Bugfix: if we have the wrong
	  k-points in the restart directory, and 'exact' is set, we should
	  not only write a warning, but also stop.

2014-03-21 09:12  micael

	* [r11908] libxc/AUTHORS: * Updated Libxc AUTHORS file.

2014-03-21 09:40  micael

	* [r11909] libxc/testsuite/Makefile.am: * The contents of the
	  testsuite/inputs directory was missing from the distribution.

2014-03-21 10:31  micael

	* [r11910] libxc/Makefile.am: * Removed the automatic Libxc
	  Changelog update when creating the tarball.

2014-03-21 11:12  micael

	* [r11911] libxc/NEWS, libxc/PACKAGING: * Tagging Libxc version
	  2.1.0.

2014-03-21 11:30  micael

	* [r11913] libxc/src/Makefile.am: * Bug fix: libxc soname was not
	  set in trunk nor in the 2.2.x branch.

2014-03-21 11:45  micael

	* [r11914] libxc/ChangeLog, libxc/NEWS, libxc/PACKAGING,
	  libxc/configure.ac: * Tagging Libxc version 2.2.0.

2014-03-21 13:32  micael

	* [r11915]
	  testsuite/real_time/17-absorption-spin_symmetry.02-td.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.02-td_spin_and_density_kick.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.03-spectrum.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.03-spectrum_singlet_triplet.inp,
	  testsuite/real_time/Makefile.am: * Some filenames in the
	  testsuite were too long, such that they were not included in the
	  tarball. I just renamed the files, but another possible solution
	  would be to change the default tar format used by automake.

2014-03-21 13:56  micael

	* [r11916] testsuite/real_time/17-absorption-spin_symmetry.test: *
	  Forgot to change the filenames in the test file.

2014-03-21 15:36  micael

	* [r11917] external_libs/spglib-1.5.2/src/Makefile.am: Some files
	  were not deleted when doing make clean in spglib.

2014-03-23 09:26  lehtola

	* [r11918] libxc/src/Makefile.am: Need module dependency for single
	  precision as well.

2014-03-23 09:29  lehtola

	* [r11919] libxc/src/work_gga_c.c, libxc/src/work_gga_x.c,
	  libxc/src/work_lda.c: Initialize variables to zero in worker
	  routines, removing 183 compiler warnings.

2014-03-23 18:55  acastro

	* [r11920] src/opt_control/propagation.F90: Remved one unnecessary
	  line that was there only for debugging purposes.

2014-03-24 08:42  lehtola

	* [r11921] libxc/src/work_gga_c.c, libxc/src/work_gga_x.c: Revert
	  initialization in gga work routines.

2014-03-24 08:44  lehtola

	* [r11922] libxc/src/work_lda.c: LDA initialization was in the
	  wrong place.

2014-03-25 15:31  lehtola

	* [r11923] libxc/src/functionals.c: XC(functional_get_number) now
	  allows also for xc_ prefix.

2014-03-27 11:12  lehtola

	* [r11924] libxc/src/functionals.c: Don't need malloc in
	  get_functional_number.

2014-03-27 13:31  joseba

	* [r11925] src/poisson/poisson.F90, src/utils/convert.F90:
	  Regarding to commit r11885 the calculation mode is not needed,
	  but datasets is mandatory to properly run. Reverted it.
	  Doxygen comments for the poisson input and output

2014-03-27 19:39  dstrubbe

	* [r11926] src/grid/symmetrizer.F90, src/grid/symmetrizer_inc.F90,
	  src/math/symm_op_inc.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp,
	  testsuite/periodic_systems/04-silicon.test: * Implemented
	  calculation of dielectric tensor when k-points are reduced by
	  symmetry.
	  * Added test run using this for silicon.
	  * Added check that symmetrizer was initialized properly.
	  * Added comments on array bounds.

2014-03-27 20:04  dstrubbe

	* [r11927] libxc/src/functionals.c: Fixing this warning:
	  
	  libtool: compile: cc -DHAVE_CONFIG_H -I. -I.. -fast -c
	  functionals.c -o functionals.o
	  PGC-W-0095-Type cast required for this conversion (functionals.c:
	  44)
	  PGC-W-0095-Type cast required for this conversion (functionals.c:
	  46)
	  PGC/x86-64 Linux 13.6-0: compilation completed with warnings

2014-03-27 20:10  lehtola

	* [r11928] libxc/src/functionals.c: Don't need a typecast, just use
	  correct pointer type.

2014-03-27 20:18  dstrubbe

	* [r11929] src/grid/io_function.F90: Formatting, removing line with
	  no effect (writing to message(1) without later call to
	  messages_info etc.), removing debugging line with "print*".

2014-03-27 20:59  dstrubbe

	* [r11930] testsuite/oct-run_regression_test.pl: Fixing some issues
	  pointed out by 'use warnings' in Perl regression script.
	  
	  Unquoted string "stderr" may clash with future reserved word at
	  ../oct-run_regression_test.pl line 250.
	  Unquoted string "stderr" may clash with future reserved word at
	  ../oct-run_regression_test.pl line 466.
	  Unquoted string "stderr" may clash with future reserved word at
	  ../oct-run_regression_test.pl line 467.
	  Unquoted string "stderr" may clash with future reserved word at
	  ../oct-run_regression_test.pl line 468.
	  Parentheses missing around "my" list at
	  ../oct-run_regression_test.pl line 477.
	  Scalar value @_[0] better written as $_[0] at
	  ../oct-run_regression_test.pl line 478.
	  Unquoted string "stderr" may clash with future reserved word at
	  ../oct-run_regression_test.pl line 537.

2014-03-27 21:33  dstrubbe

	* [r11931] src/grid/symmetrizer_inc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: symmetrize_tensor now
	  operates in-place, which should also solve the compilation
	  failure for max-dim=4.

2014-03-27 21:53  dstrubbe

	* [r11932] testsuite/oct-run_regression_test.pl: Follow-up fix to
	  r11930: it looked like a set of 5 variables were being declared
	  "my" but in fact only the first was; adding the parentheses made
	  them all "my", however that was wrong in the case of $name which
	  was used outside that function. Now the name of each match
	  appears in the testsuite output again.

2014-03-27 22:33  dstrubbe

	* [r11933] testsuite/oct-run_regression_test.pl: * 'use warnings'
	  said various variables obtained from the environment were used
	  uninitialized if they were not set there. Via a little function,
	  we now check if they are set, and if not explicitly make them "".
	  * Grammar fix.

2014-03-28 00:02  acastro

	* [r11934] src/opt_control/propagation.F90, src/states/restart.F90:
	  Added one progress bar.

2014-03-28 01:48  dstrubbe

	* [r11935] src/grid/symmetrizer_inc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Fixing array out of bounds
	  for max-dim=4.

2014-03-28 11:06  joseba

	* [r11936] src/grid/io_function.F90, src/utils/convert.F90: Moved
	  io_function_convert (io_function.F90) to convert_low
	  (convert.F90) to be able to compute the potential from the
	  density (through the Poisson solver)
	  Added also a progress bar

2014-03-28 15:41  dstrubbe

	* [r11937] src/utils/convert.F90: Fixing PUSH/POP's.

2014-03-28 15:56  dstrubbe

	* [r11938] src/utils/convert.F90, src/utils/local_multipoles.F90: *
	  Marking utilities experimental.
	  * Removing large number of unused variables.
	  * Other minor corrections.

2014-03-28 15:59  dstrubbe

	* [r11939] testsuite/oct-run_regression_test.pl: The testsuite Perl
	  script now checks that the correct number of arguments have been
	  supplied to its matching functions.

2014-03-28 16:13  dstrubbe

	* [r11940] testsuite/oct-run_regression_test.pl: Fixing these
	  warnings in the Perl testsuite script:
	  
	  main::find_executables() called too early to check prototype at
	  ../oct-run_regression_test.pl line 187.
	  main::run_match_new() called too early to check prototype at
	  ../oct-run_regression_test.pl line 395.
	  main::print_hline() called too early to check prototype at
	  ../oct-run_regression_test.pl line 397.
	  main::print_hline() called too early to check prototype at
	  ../oct-run_regression_test.pl line 400.
	  Use of uninitialized value $options in split at
	  ../oct-run_regression_test.pl line 446, <TESTSUITE> line 5.

2014-03-28 17:08  dstrubbe

	* [r11941] testsuite/oct-run_regression_test.pl: * Fixing warnings
	  like this:
	  Use of uninitialized value $par[3] in multiplication (*) at
	  ../oct-run_regression_test.pl line 521, <TESTSUITE> line 20.
	  * Removing lines about option -d, which has been "ignored for the
	  moment" since r2423 (8 years ago). Basically this option's
	  functionality is obtained via the environment variables
	  TEMPDIRPATH.

2014-03-28 17:41  dstrubbe

	* [r11942] testsuite/oct-run_regression_test.pl: * Decommissioning
	  option -i to testsuite script, which has not made sense (or
	  actually done what it says) since r1890, when separate input
	  files came into use for the testsuite.
	  * Removing forgotten comment about -d.

2014-03-28 18:24  dstrubbe

	* [r11943] testsuite/oct-run_regression_test.pl: * Fixing warnings
	  like this:
	  Use of uninitialized value $color_start{"blue"} in concatenation
	  (.) or string at ./oct-run_regression_test.pl line 226,
	  <TESTSUITE> line 4.
	  Name "main::opt_l" used only once: possible typo at
	  ../oct-run_regression_test.pl line 412.
	  Name "main::opt_h" used only once: possible typo at
	  ../oct-run_regression_test.pl line 134.
	  * Enabling warnings, since I have gotten rid of all the once I
	  see on my machine.

2014-03-28 20:46  dstrubbe

	* [r11944] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  testsuite/periodic_systems/04-silicon.test: Bugfixes to kdotp
	  effective masses:
	  * Attempt to use symmetry failed because an uninitialized value
	  was just assigned to itself. As a result, the tensors were always
	  zero below the diagonal, and the inverses were quite wrong.
	  * An off-diagonal element is now tested.
	  * The temp array for reductions in parallel was allocated to the
	  wrong size.
	  
	  * More explicit call with keyword.
	  * Comment on proper size of argument.
	  * No need to accumulate into eff_mass_inv when it is definitely
	  zero to start with.

2014-03-28 21:45  dstrubbe

	* [r11945] testsuite/TestGroups: The TestGroups file does not seem
	  to serve much purpose, and is not up-to-date anyway.

2014-03-28 23:16  dstrubbe

	* [r11946] src/sternheimer/em_resp.F90, src/system/forces_inc.F90,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp,
	  testsuite/periodic_systems/04-silicon.test: * Born charges can
	  now be computed properly when k-points are reduced by symmetry.
	  * X(forces_born_charges) now calculates the whole tensor at once,
	  which is simpler for the symmetrization.

2014-03-29 19:03  dstrubbe

	* [r11947] testsuite/oct-run_regression_test.pl: Removing writing
	  of 'clean.sh' script in testsuite run. It was added in r1899, but
	  has not been maintained since then and thus its list of things to
	  delete has only a mild resemblance to those created by the code
	  (which indeed one cannot be sure of without parsing the input
	  file). Also it does not seem to accomplish anything that
	  FromScratch = yes wouldn't suffice for.

2014-03-30 00:12  dstrubbe

	* [r11948] src/main/test.F90, src/utils/convert.F90: * Removing
	  useless things about calc_mode and datasets from test.F90.
	  * Calling datasets_init with 1 rather than some unrelated integer
	  in test and convert.

2014-03-30 03:19  dstrubbe

	* [r11949] src/main/test.F90, src/utils/convert.F90,
	  src/utils/local_multipoles.F90: Removing unnecessary module
	  usages.

2014-03-30 03:22  dstrubbe

	* [r11950] src/main/test.F90: Restoring calc_mode_init and
	  calc_mode_end to oct-test, mistakenly removed in r11948 which
	  broke the parallel tests.

2014-03-30 17:20  dstrubbe

	* [r11951] src/system/system.F90: Alphabetizing modules.

2014-03-30 17:51  dstrubbe

	* [r11952] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: Removing the build-stamp file
	  from the testsuite runs, which does not seem particularly useful.
	  It was added in r1140 (without comment).

2014-03-30 20:00  dstrubbe

	* [r11956] testsuite/linear_response/02-h2o_pol_lr.test: Check Born
	  charges discrepancy in another test too.

2014-03-30 21:04  dstrubbe

	* [r11958] src/hamiltonian/born_charges.F90,
	  testsuite/periodic_systems/04-silicon.test: * The Born charge
	  discrepancy is now written per atom, for better comparability
	  between systems.
	  * Updating this for the Si test. The finite H2O test already had
	  these values, accidentally committed before the change in the
	  code.

2014-03-30 23:23  dstrubbe

	* [r11959] testsuite/oct-run_testsuite.sh.in: Decommissioning the
	  "mail report" functionality of oct-run_testsuite.sh. It seems to
	  have been a pre-buildbot approach to running the testsuite (c.f.
	  r1142, r1180, r1254), and isn't particularly useful any longer.

2014-03-31 02:40  dstrubbe

	* [r11960] libxc/src/util.h: This change allows xc-info to link
	  with the clang compiler.

2014-03-31 02:58  dstrubbe

	* [r11961] testsuite/periodic_systems/06-h2o_pol_lr.test: More
	  checks on Born charge discrepancies.

2014-03-31 02:59  dstrubbe

	* [r11962] testsuite/linear_response/02-h2o_pol_lr.test,
	  testsuite/linear_response/05-polarizability.test: Testing Born
	  charge discrepancies, and finite-difference
	  hyperpolarizabilities.

2014-03-31 16:26  dstrubbe

	* [r11965]
	  testsuite/linear_response/05-polarizability.03-finite-diff.inp,
	  testsuite/linear_response/05-polarizability.test: * Fixing label
	  for a test match.
	  * Asking for better convergence and updating test values, in the
	  hope that more build slaves will pass on this.

2014-03-31 17:32  lehtola

	* [r11966] libxc/src/xc.h: Forgot to put in declarations for
	  {,rev}TPSSh set_params.

2014-03-31 21:16  dstrubbe

	* [r11967] testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.02_kdotp.inp: The
	  testsuite now does runs for 2nd-order k.p wfns.

2014-03-31 22:02  dstrubbe

	* [r11968] testsuite/oct-run_regression_test.pl: * Updating
	  copyright info.
	  * More sophisticated error-handling when match commands fail.

2014-03-31 22:33  dstrubbe

	* [r11969] testsuite/periodic_systems/Makefile.am: Missing file in
	  Makefile.am for testsuite file installation.

2014-03-31 23:00  dstrubbe

	* [r11970] testsuite/oct-run_testsuite.sh.in: oct-run_testsuite.sh
	  -q ("query") option did nothing due to failure to get the
	  following string.

2014-04-01 09:41  jjornet

	* [r11971] src/grid/mesh_function_inc.F90, src/ions/box.F90,
	  src/ions/box_union.F90, src/ions/simul_box.F90,
	  src/utils/local_multipoles.F90: - src/utils/local_multipoles.F90:
	  optional Bader Domains has been included. Subroutine
	  bader_union_inside has been added.
	  "print*" statements has been removed.
	  - src/grid/mesh_function_inc.F90: X(mf_local_multipoles): new
	  optional variable inside2
	  changes done to deal with Bader domains.
	  - src/ions/box.F90 : all parts related with Bader domains have
	  been removed and placed to local_multipoles.F90
	  - src/ions/box_union.F90: new functions box_union_get_nboxes and
	  box_union_get_center have been added.
	  - src/ions/simul_box.F90: BADER parameter has been removed.
	  

2014-04-01 14:08  jjornet

	* [r11972] src/utils/local_multipoles.F90: Minor esthetic changes (
	  some comments and not used doxygen marks have been removed )

2014-04-01 14:52  joseba

	* [r11973] src/ions/box.F90, src/ions/box_union.F90,
	  src/utils/local_multipoles.F90: Made some functions PURE
	  Changed real*8 to FLOAT
	  Small indentations

2014-04-01 16:12  dstrubbe

	* [r11974] testsuite/oct-run_regression_test.pl: Removing use of
	  'pipefail' in script, which is only available in Bash version 3,
	  and not in Dash which is the default shell on the Ubuntu
	  machines. Better solution pending...

2014-04-01 16:18  dstrubbe

	* [r11975] testsuite/photo_electron/Makefile.am: Missing files in
	  Makefile.

2014-04-01 16:33  dstrubbe

	* [r11976] src/utils/local_multipoles.F90: * Fixing mistaken
	  variable sections and *names*. Getting the latter correct is of
	  huge importance for the variable reference to be usable!
	  * Removing unused variable.
	  * Some FIXME's.
	  * Commenting out fragment of variable definition lest it be
	  incorportated into variable reference.
	  * Typo in warning message.

2014-04-01 18:43  dstrubbe

	* [r11977] src/utils/local_multipoles.F90: * Unused variables.
	  * Proper call for experimental feature.

2014-04-01 20:39  dstrubbe

	* [r11978] testsuite/linear_response/05-polarizability.test: More
	  realistic precisions for finite-difference hyperpolarizabilities.

2014-04-01 20:42  dstrubbe

	* [r11979] testsuite/buildbot_query.pl: * Updating shell number for
	  testsuite run, in buildbot_query.pl, in light of using static
	  installation of libxc now.
	  * If a match command failed (i.e. no number was returned), it was
	  treated as a zero, resulting in an incorrect summary. Now, it
	  will be treated as match not found instead.

2014-04-02 13:23  joseba

	* [r11980] src/utils/convert.F90, src/utils/local_multipoles.F90:
	  Small changes:
	  * Tabs
	  * Deleted unused lines
	  * Change a variable name
	  * Made more robus the iteration of the convert utility over
	  folders

2014-04-02 16:23  jjornet

	* [r11981] src/utils/local_multipoles.F90: * FIXME's have been
	  fixed.
	  * Fragment of variable definition has been uncommented to be able
	  to use Bader variable on the input file.

2014-04-02 19:43  dstrubbe

	* [r11982] testsuite/linear_response/05-polarizability.test:
	  Adjusting reference values and tolerance for finite-difference
	  hyperpolarizability values so tests can pass.

2014-04-02 21:07  dstrubbe

	* [r11983] src/basic/mpi_debug_inc.F90, src/main/casida_inc.F90,
	  src/states/density.F90, src/sternheimer/phonons_lr.F90,
	  src/xc/vxc_inc.F90: Bugfix: some MPI calls gave incorrect
	  arguments, as detected by the MPI module of OpenMPI 1.7 which
	  apparently includes some more interfaces than earlier versions.

2014-04-02 21:16  dstrubbe

	* [r11984] testsuite/oct-run_testsuite.sh.in: Removing build-stamp
	  stuff (again) after accidentally restoring it in conflict
	  resolution in r11959.

2014-04-02 21:25  dstrubbe

	* [r11985] src/states/density.F90: Fixing compilation in serial.

2014-04-02 21:50  dstrubbe

	* [r11986] testsuite/oct-run_testsuite.sh.in: Removing mysterious
	  line 'echo="echo"'. I don't see what effect it would have, and
	  things seem same after I take it away. It was present at the
	  creation of this file in r1142, without comment on this
	  particular line.

2014-04-02 21:55  dstrubbe

	* [r11987] testsuite/oct-run_testsuite.sh.in: In dry-run mode, do
	  not write the summary of tests passed, failed, and skipped, since
	  of course no tests were run.

2014-04-02 22:10  dstrubbe

	* [r11988] m4/libxc.m4: Updating comments after libxc releases.

2014-04-02 22:41  dstrubbe

	* [r11989] testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp: Neater way
	  of specifying spacing for periodic test.

2014-04-02 22:53  dstrubbe

	* [r11990] testsuite/oct-run_regression_test.pl: Better
	  error-handling with -f for testsuite Perl script.

2014-04-03 14:23  jjornet

	* [r11991] src/utils/local_multipoles.F90: * Variable references
	  have been removed.
	  * BADER parameter has been set to 512 to avoid conflict.

2014-04-03 18:23  dstrubbe

	* [r11992] src/basic/Makefile.am, src/basic/io_binary_f.F90: *
	  Bugfix: zread_parallel did not deallocate an array.
	  * io_binary_f now uses SAFE_ALLOCATE and SAFE_DEALLOCATE_A,
	  adding 'use profiling_m.'
	  * The strategy used in zread_parallel is now employed in
	  zread_binary also, to enable reading of real files as complex.
	  This enables
	  testsuite/linear_response/02-h2o_pol_lr.03_h2o_dyn_pol_cmplx.inp
	  to use the restart densities from the previous run
	  02-h2o_pol_lr.02_h2o_dyn_pol.inp, which helps convergence and
	  avoids the warning on some machines 'Linear solver failed to
	  converge all states.'

2014-04-03 18:34  dstrubbe

	* [r11993] src/states/restart.F90, src/states/restart_inc.F90: *
	  Doxygen comment.
	  * Code simplification.

2014-04-03 19:02  dstrubbe

	* [r11994] src/hamiltonian/epot.F90, src/hamiltonian/kick.F90,
	  src/td/td_init_inc.F90: Simplification of kick_init by using
	  ispin intead of nspin.

2014-04-03 21:29  dstrubbe

	* [r11995] src/hamiltonian/epot.F90, src/hamiltonian/kick.F90,
	  src/td/td_init_inc.F90: * kick_init now receives periodic
	  dimensions as an argument, for detection of incompatibilities.
	  * TDPolarization* variables should only be read when kick is not
	  user-defined or multipoles, since they are not used with those
	  types.
	  * Added comment and checks that kicks cannot be applied in
	  periodic directions (since they depend explicitly on "r").

2014-04-03 21:45  dstrubbe

	* [r11996] src/utils/casida_spectrum.F90, src/utils/convert.F90,
	  src/utils/dielectric_function.F90: Suppressing compilation
	  warnings from utilities:
	  * Explicit conversion to integer.
	  * Unused variable.
	  * Bugfix: complex*4 was used instead of complex*8.
	  * Using our standard constant for 4.

2014-04-04 21:02  dstrubbe

	* [r11997] testsuite/oct-run_testsuite.sh.in: * Fixing r11987,
	  which accidentally deactivated the summary for all testsuite
	  runs: I accidentally did not put $ in front of $dry_run, and
	  mistakenly thought it was supposed to be "yes" or "no" like other
	  variables here, but in fact it was supposed to be "yes" or unset.
	  Now, it is "yes" or "no", for consistency.
	  * Dependence on "$verbose" removed, which is not set elsewhere.
	  Not sure if this was a mistake (in original version, r1142), or
	  originally supposed to come from the environment. Doesn't seem
	  particularly useful to me anyway.

2014-04-04 21:08  dstrubbe

	* [r11998] src/hamiltonian/epot.F90: Suppressing compiler warnings
	  by making type conversions explicit.
	  
	  What is the reason to make local_potential a real*4 though? Seems
	  odd. This was introduced by Xavier in r4915.

2014-04-04 21:27  dstrubbe

	* [r11999] src/grid/symmetrizer_inc.F90, src/td/spectrum.F90: *
	  Caveat: The way sum rule is calculated is appropriate only for
	  kick_density, not for kick_spin and kick_spin_and_density. (e.g.
	  it gives zero typically for kick_spin)
	  * Unused variable.

2014-04-04 22:48  dstrubbe

	* [r12000] src/hamiltonian/epot.F90: Obviously I should not have
	  left 'stop' in r11998.

2014-04-05 20:59  dstrubbe

	* [r12001] testsuite/linear_response/05-polarizability.test:
	  Recentering and increasing tolerance for beta zxy match so nvidia
	  slave can pass.

2014-04-07 06:54  micael

	* [r12002] libxc: Removed all Libxc sources.
	  
	  Note that the new Libxc repository can be found at the following
	  address: http://www.tddft.org/svn/libxc

2014-04-07 10:20  joseba

	* [r12003] src/utils/local_multipoles.F90: * Added the possibility
	  to iterate over different folders
	  * Closed and deallocated arrays, which weren't
	  * Formatting

2014-04-07 16:46  dstrubbe

	* [r12004] src/opt_control/opt_control_c_inc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/system/xc_oep_x_inc.F90: * Unused variable in serial.
	  * Comments.

2014-04-07 19:16  dstrubbe

	* [r12005] src/sternheimer/em_resp.F90: Consolidating repetitious
	  code for the case omega=0 and otherwise.

2014-04-07 20:31  dstrubbe

	* [r12006] src/sternheimer/em_resp.F90: * Simplifying calls to
	  calculate Born charges, between branches for nsigma = 1 and 2.
	  * Removing comment to use 'nsigma' for 2nd order, since this is
	  done now.

2014-04-07 21:50  dstrubbe

	* [r12007] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Very minor bugfix: for
	  hyperpolarizability in periodic system, the post_orthogonalize
	  was using ifactor * eta as the imaginary part of the frequencies
	  for the orthogonalization, when in fact it should be eta. But it
	  would only apply with smearing which isn't allowed with kdotp
	  anyway since it implies there is no gap.

2014-04-07 22:13  dstrubbe

	* [r12008] testsuite/oct-run_regression_test.pl: Fixing -m option
	  for testsuite Perl script (do matches in already run working
	  directory): $workdir is set to current directory, some header
	  info and copying and moving files is suppressed, as is writing
	  matches.sh and the log files. $return_value must be set to zero
	  or the matches would be skipped.

2014-04-07 22:56  dstrubbe

	* [r12009] src/sternheimer/em_resp.F90: Simplifying em_resp by
	  introducing variables 'frequency' and 'frequency_eta'.

2014-04-08 15:17  joseba

	* [r12010] src/grid/basins.F90, src/grid/mesh_function_inc.F90,
	  src/utils/local_multipoles.F90: Corrected r12003 and now properly
	  does iterations.
	  * Checks if the input folder is finished by an '/' and adds it if
	  needed.
	  * Deleted various information output
	  * Made optional a writing of extra files
	  * Deleted unused inp variable
	  * Created at the very beggining the results "local.multipoles"
	  folder
	  * Indentation
	  * Added a progress bar

2014-04-08 15:44  dstrubbe

	* [r12011] src/grid/io_function_inc.F90,
	  src/utils/local_multipoles.F90: * Unused variables (including
	  hiding MPI-only ones).
	  * Explicit type conversions (integer*8 -> integer*4).
	  * Unused argument 'mesh'.

2014-04-08 16:43  dstrubbe

	* [r12012] testsuite/oct-run_regression_test.pl: Decommissioning
	  matches.sh from testsuite Perl script: it is duplicative of the
	  main testsuite functionality, less flexible because it requires
	  use of a bash command for matches that can be used in that script
	  too, and the same can be done via the (recommissioned) -m option
	  to the Perl script.

2014-04-08 18:26  dstrubbe

	* [r12013] src/system/subspace_inc.F90: Unused variable.

2014-04-08 19:51  dstrubbe

	* [r12014] src/hamiltonian/kick.F90, src/td/spectrum.F90,
	  src/utils/propagation_spectrum.F90: * Fixing non-standard read
	  statements, which are ok in some compilers but with gfortran give
	  "Fortran runtime error: Constant string in input format".
	  * Correction to documentation for TDKickFunction: weights were
	  not mentioned.
	  * Error-checking for reading and using kick (to avoid segfault
	  for kick%pol_dir == 0).
	  * Fix to output from oct-propagation_spectrum.

2014-04-09 15:35  dstrubbe

	* [r12015] src/hamiltonian/gauge_field.F90, src/ions/kpoints.F90: *
	  Caveats about GaugeVectorField for non-periodic systems (I am not
	  sure to what extent this is supposed to work, and at any rate I
	  doubt it has been tested), and when using symmetry (in my test, I
	  am not convinced oct-dielectric_function gave the right answer
	  even when using SymmetryBreakDir).
	  * Doxygen comments.

2014-04-09 22:01  dstrubbe

	* [r12016] src/hamiltonian/gauge_field.F90: Fix to r12015: the
	  warning and symmetry check should only occur if a
	  GaugeVectorField was actually set.

2014-04-09 22:34  dstrubbe

	* [r12017] src/states/restart.F90: Reverting part of r11554:
	  "Identify which restart file could not be opened if there is a
	  problem." The output is too verbose, given how unusual it is that
	  the files 'states', 'wfns', or 'occs' would be missing for a
	  reason other than that there is no restart info at all.

2014-04-09 23:03  dstrubbe

	* [r12018] src/sternheimer/Makefile.am,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_inc.F90:
	  Refactoring em_resp to avoid so many calls with real/complex
	  versions: now three templated internal procedures handle these
	  switches.

2014-04-09 23:07  dstrubbe

	* [r12019] testsuite/oct-run_regression_test.pl: * More fixes to -m
	  mode of Perl testsuite script, following up on r12008:
	  ** The relevant input file needs to be written for the output to
	  make sense.
	  ** The matches need to be run in the archived directories, or
	  else they just operate on the results of the final run.
	  * A matches.sh script is written again (it was removed in
	  r12012), but now it does not attempt to duplicate the match
	  commands, but rather just gives the necessary command to this
	  script to run with -m.

2014-04-09 23:27  dstrubbe

	* [r12020] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: Re-assigning return codes from
	  the testsuite: 255 will now be for internal error, and 254 will
	  be for tests skipped. The reason is that "die" in Perl uses 255
	  as a fallback error code
	  (http://perldoc.perl.org/functions/die.html) and thus can cause
	  internal errors to be classifed as a skip by the shell script. To
	  control the error code when there is an internal error, we will
	  now use a little function and exit instead of die. Perl doc
	  (above) recommends: "the value of the exit code used by die can
	  be non-predictable, so should not be relied upon, other than to
	  be non-zero."

2014-04-10 14:18  joseba

	* [r12021] src/basic/multicomm.F90: A more robust approach for the
	  MPI_Cart_create as it expects to have a "periodic" array of size
	  "ndims" (or mc%n_index in our case).
	  I am not sure that this fixes the error that David reported, but
	  at least corrects one appearing in my computer.

2014-04-10 15:17  dstrubbe

	* [r12022] src/basic/multicomm.F90: Restoring compilation in
	  serial.

2014-04-10 15:21  dstrubbe

	* [r12023] src/system/output.F90: Improvement to documentation.

2014-04-10 15:27  dstrubbe

	* [r12024] src/sternheimer/em_resp_inc.F90: Fixing some PUSH/POP's.

2014-04-10 19:05  dstrubbe

	* [r12025] src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90:
	  * Bugfix: in kdotp, restart_look_and_read needs to be before
	  allocations involving st%nst, or else there can be an
	  inconsistency and arrays out of bounds if ExtraStates is not the
	  same between the input file and the one used for the gs run.
	  * Improvements to documentation.
	  * Check on validity of em_resp with kdotp with smearing.

2014-04-10 20:53  dstrubbe

	* [r12026] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90: Wiser order for array indices
	  of kdotp_vars%lr, which avoids out-of-order array sections being
	  passed which can cause copying into temporary arrays.

2014-04-10 22:59  dstrubbe

	* [r12027] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90: The kdotp calculation can be
	  much faster if the occupied subspace is projected out, but we
	  need the whole kdotp response wavefunction for 2nd-order
	  calculations. Therefore, the occupied subspace will be explicitly
	  constructed when this option is chosen.

2014-04-11 16:06  adelgado

	* [r12028] src/hamiltonian/energy.F90, src/pcm/pcm.F90,
	  src/system/energy_calc.F90, src/system/v_ks.F90: Solute-solvent
	  electrostatic interaction term is added to the total energy of
	  the system by using PCM.
	  
	  - pcm/pcm.F90: subroutine 'v_electrons_cav_li' was coded to
	  calculate the Hartree potential at the tesserae representative
	  points by means of a trilinear interpolation. function
	  'pcm_classic_energy' is added to calculate nuclei-solvent
	  interaction energy.
	  
	  - hamiltonian/energy.F90: variables 'int_e_pcm' and 'int_n_pcm'
	  were added to 'energy_t' to strore the electrons-solvent and
	  nuclei-solvent interaction energies, respectively.
	  
	  - system/v_ks.F90: Now the subroutine 'v_electrons_cav_li' is
	  used to evaluate the Hartree pot at the tesserae. The energy term
	  'int_e_pcm' is calculated just after calculated the PCM field in
	  real-space.
	  
	  - system/energy_calc.F90: The term 'int_n_pcm' is computed by
	  using the function 'pcm_classic_energy'. For the case
	  'hm%theory_level=KOHN_SHAM_DFT' the PCM contributions to the
	  total energy have been added. The quantities 'int_e_pcm',
	  'int_n_pcm' are reported in the 'static/info' file.

2014-04-11 19:41  dstrubbe

	* [r12029] src/utils/photoelectron_spectrum.F90: * Unused variable.
	  * character variable was too small for output of io_workpath.
	  * Misspelled function name.

2014-04-11 20:25  dstrubbe

	* [r12030] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc_inc.F90: * Fixing problem in having
	  the sum-over-state loops of r12027: I was not taking into account
	  the anti-Hermiticity of the kdotp perturbation.
	  * Removing now-unused argument.

2014-04-12 16:32  dstrubbe

	* [r12031] src/math/fft.F90: Fixing error message which referred to
	  long-ago renamed file.

2014-04-13 18:06  dstrubbe

	* [r12032] testsuite/oct-run_regression_test.pl: It is perverse for
	  Perl to call the shell to in turn call Perl on the testsuite
	  matches. The only justification for this seems to have been to
	  enable its use with matches.sh. Now, we will just do it directly
	  in Perl, filtering out the number from the text returned by the
	  match.

2014-04-13 19:23  dstrubbe

	* [r12033] src/frozen/frozen_config.F90: * Marking 'frozen' as
	  experimental.
	  * Commenting out variable blocks in frozen, since the code they
	  are is unreachable as far as I can tell, so having these show up
	  in the variable reference is not helpful.

2014-04-13 19:56  dstrubbe

	* [r12034] src/ions/Makefile.am, src/ions/geometry.F90,
	  src/ions/ion_dynamics.F90, src/ions/read_coords.F90,
	  src/ions/xyz_file.F90, src/poisson/poisson.F90: * Renaming
	  module, file, contained routines, and enumerated parameters:
	  'xyz_file' -> 'read_coords'. Because it is not just about XYZ
	  files, but also about PDB files, and the Coordinates block (not a
	  file).
	  * Renaming component 'file_type' to 'source', since it can
	  indicate that the coordinates came from a block and not a file.
	  * Removing unnecessary module usage of xyz_file_m from
	  poisson.F90.

2014-04-13 20:03  dstrubbe

	* [r12035] src/ions/geometry.F90, src/ions/read_coords.F90: *
	  Moving the variable reference blocks for Coordinates-related
	  things to where they are actually parsed.
	  * Breaking up long comment line.

2014-04-13 21:02  dstrubbe

	* [r12036] src/ions/read_coords.F90: * Coordinates may now be read
	  in XSF format. Currently, the periodicity and lattice vectors are
	  ignored.
	  * Check on validity of number of atoms in XYZ file.

2014-04-13 21:23  adelgado

	* [r12037] src/hamiltonian/hamiltonian.F90, src/pcm/pcm.F90,
	  src/system/energy_calc.F90: * pcm/pcm.F90: 'pcm_classic_energy'
	  renamed as 'pcm_classical_energy'.
	  * system/energy_calc.F90: Solute-solvent interaction energy only
	  printed if 'hm%pcm%run_pcm=true'
	  * hamiltonian/hamiltonian.F90: 'Solvation' is parsed now in
	  'hamiltonian_init' and not inside subroutine 'pcm_init'.

2014-04-14 07:41  adelgado

	* [r12038] src/pcm/pcm.F90:

2014-04-14 08:55  adelgado

	* [r12039] src/pcm/pcm.F90: * fixing compilation errors of 12037.
	  with ifort I did not have any problem since the preprocessor
	  seems to respect fortran commented lines.

2014-04-14 19:20  dstrubbe

	* [r12040] src/system/output.F90: Clarification to variable
	  reference: OutputInterval controls Output not TDOutput.

2014-04-14 23:29  dstrubbe

	* [r12041] src/ions/geometry.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90: The periodicity and lattice vectors read
	  from XSF can now be used, instead of the ones from the input
	  file.

2014-04-15 00:32  askhl

	* [r12042] src/grid/partition.F90: grammar

2014-04-15 00:52  dstrubbe

	* [r12043] src/ions/read_coords.F90: * Bugfix: the
	  ReducedCoordinates block would be incorrectly rescaled if
	  Units(Input) = eV_Angstrom was set.
	  * The lattice vectors from an XSF file are now rescaled according
	  to the input units.
	  * Updating documentation about XSFCoordinates.

2014-04-15 12:04  adelgado

	* [r12044] src/pcm/pcm.F90: * changing to 'inout' the intent
	  attribute of pcm in subroutine 'pcm_init'.

2014-04-15 17:03  adelgado

	* [r12045] src/pcm/pcm.F90: * pcm/pcm.F90: radii for Na and Cl have
	  been added in 'pcm_init'

2014-04-15 18:03  dstrubbe

	* [r12046] src/ions/read_coords.F90: An animated XSF file can now
	  be used for coordinates input, specifying which step should be
	  used.

2014-04-15 19:56  dstrubbe

	* [r12047] src/states/states.F90,
	  testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp,
	  testsuite/periodic_systems/07-tb09.01-gs_symm.inp,
	  testsuite/periodic_systems/10-berkeleygw.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.01-gs.inp: I am
	  setting the default for SymmetrizeDensity to false always (rather
	  than true when k-points are reduced by symmetry), and marking it
	  experimental. I found critical problems with it earlier, in that
	  it was using an incorrect origin, and still resulting
	  discrepancies can be suspiciously large even at SCF convergence,
	  and the case of partially periodic systems has not been fully
	  considered. I am turning on SymmetrizeDensity explicitly for the
	  tests where it was being used, so the results remain the same.

2014-04-16 08:16  joseba

	* [r12048] src/utils/convert.F90, src/utils/local_multipoles.F90,
	  testsuite/components/17-convert.01-run.inp,
	  testsuite/components/17-convert.02-convert.inp,
	  testsuite/components/17-convert.test,
	  testsuite/components/Makefile.am: Added a test for the
	  oct-convert utility. In principle it works fine, but I had to
	  disable the progress bar (makes it fail only when running in the
	  testsuite).
	  Added checks for the folder and filename

2014-04-16 08:55  adelgado

	* [r12049] src/hamiltonian/hamiltonian.F90, src/pcm/pcm.F90: *
	  Moving back the parse of 'Solvation' from subroutine
	  'hamiltonian_init' to 'pcm_init'.

2014-04-16 14:15  joseba

	* [r12050] src/utils/local_multipoles.F90: Added possibility to
	  profile the oct-local_multipoles utility

2014-04-16 19:46  dstrubbe

	* [r12051] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc_inc.F90: * Making
	  KdotPOccupiedSolutionMethod work correctly in the presence of
	  ExtraStates.
	  * Caveat about this option with smearing.

2014-04-16 21:24  dstrubbe

	* [r12052] testsuite/components/17-convert.test: * Disabling
	  oct-convert test since matches are not uniquely defined.
	  * Fixing $Id$.
	  * Removing comment mistakenly copied.
	  * Added request to add gs matches.

2014-04-16 23:32  dstrubbe

	* [r12053] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Adding routine to calculate
	  eigenvalues of electric perturbation in periodic system,
	  according to single-point Berry phase.

2014-04-16 23:41  dstrubbe

	* [r12054] testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.test: Fixing test
	  failures after r12047 which turned off SymmetrizeDensity: the BN
	  test had eigenvalue 10 at k-point 4 sometimes be degenerate with
	  #9 and sometimes not. With density symmetrization, the SCF from
	  LCAO seems to have reproducibly failed to find the lowest states
	  at that k-point, whereas without density symmetrization,
	  sometimes it resulted in the correct states and sometimes not. I
	  noticed also another respect in which the result (before and
	  after r12047) was qualitatively incorrect: the gap at Gamma was
	  very small, only 0.3 eV or so (i.e. perhaps the system was
	  metallic), whereas it should be at least several eV. To fix these
	  things, I reduced the spacing slightly, which seems to fix both
	  of them; hopefully all the buildslaves agree.

2014-04-16 23:42  dstrubbe

	* [r12055] src/sternheimer/sternheimer.F90: Comment in variable
	  reference was backward.

2014-04-17 01:26  dstrubbe

	* [r12056] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/sternheimer_inc.F90: Using the derivative of the
	  eigenvalues for solving the second-order Sternheimer equation.

2014-04-17 03:15  dstrubbe

	* [r12057] src/sternheimer/sternheimer_inc.F90: * Fixing bound
	  mismatch in assignment between np and np_part array sizes.
	  * kdotp perturbation has only one sigma.

2014-04-17 16:56  dstrubbe

	* [r12058] src/include/fortran_types.h,
	  src/sternheimer/em_resp_inc.F90: Setting svn:keywords on two
	  files that lacked it, and so just had $Id$ without substitution
	  in the header.

2014-04-17 17:13  dstrubbe

	* [r12059] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90: *
	  Using approximate em_resp eigenvalue derivatives in beta
	  calculation too.
	  * Clarifications to documentation for em_resp with kdotp.

2014-04-18 01:40  xavier

	* [r12060] src/hamiltonian/epot.F90, src/system/forces.F90: Added
	  an option to enforce the sum of the internal forces to be zero.

2014-04-19 18:15  dstrubbe

	* [r12061] src/sternheimer/em_resp.F90,
	  src/system/output_linear_response_inc.F90: * Necessary (but not
	  sufficient) change to allow use of linear-response ELF: the
	  optional argument of sigma 2 needs to be supplied only when the
	  arrays were allocated to that size.
	  * Formatting.
	  * Doxygen comments.

2014-04-19 21:23  dstrubbe

	* [r12062] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90: Using
	  equality of mixed partial derivatives to reduce computation and
	  memory usage for kdotp and em_resp.

2014-04-20 02:53  dstrubbe

	* [r12063] build/true_compiler.sh: true_compiler.sh:
	  * Adding understanding of CC (C++) compiler wrapper.
	  * Organizing a bit more.
	  * Returns "unknown" if it cannot figure it out. This is relevant
	  for the compiler wrappers on the newest Crays which do not
	  support "-show" unfortunately.

2014-04-20 04:19  dstrubbe

	* [r12064] build/true_compiler.sh: * Fix to previous commit:
	  resulted in "(unknown)" rather than blank if not an MPI or Cray
	  compiler wrapper.
	  * Use "printf" rather than "echo -n", since "echo -n" does not
	  work for default shell on BSD (including Mac OS) and man page
	  advises using more portable "printf".

2014-04-21 18:33  dstrubbe

	* [r12065] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Reducing memory usage for
	  periodic hyperpolarizability calculation: we don't need all the
	  second-order kdotp wavefunctions in memory, just one at a time.

2014-04-21 21:12  dstrubbe

	* [r12066] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: * There is no need to solve the
	  2nd-order Sternheimer equation (for d/dk, d/dE) in the occupied
	  subspace, and then we do not need to post-orthogonalize either.
	  * Clarification to variable reference for EMOccupiedResponse.

2014-04-22 08:16  joseba

	* [r12067] testsuite/components/17-convert.02-convert.inp,
	  testsuite/components/17-convert.test: Changes to the test of the
	  convert utility. Following the David suggestions, density is
	  checked

2014-04-22 08:33  joseba

	* [r12068] testsuite/components/17-convert.01-run.inp,
	  testsuite/components/17-convert.02-convert.inp,
	  testsuite/components/17-convert.test: Added simple check to the
	  GS run of the oct-convert utility.
	  Few comments
	  Added "Id" to test files

2014-04-22 15:33  joseba

	* [r12069] src/basic/oct_f.c, src/utils/convert.F90,
	  src/utils/local_multipoles.F90: Skip the progress bar if the
	  given length is 0
	  Then, activated the progress bar in the convert utility.
	  Properly managed the filenames if the files are iterating. Still,
	  only 10 character long filenames are valid.
	  A little bit of more documentation
	  Disabled a filename extension check if it is shorter than 4
	  character, as it is impossible to have it.

2014-04-22 22:42  dstrubbe

	* [r12070] src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/kdotp.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90: * For the <1|1|1> term,
	  post-orthogonalize is not necessary, but for <1|1> it is (i.e.
	  em_vars%lr), so I put it back. The operation on kdotp_em_lr2
	  could be removed though.
	  * The sternheimer solver routine now can add in the occupied
	  response by sum over states, and this is now used for kdotp
	  (instead of the stand-alone routine I added recently) and em_resp
	  when being provided for the second-order Sternheimer equation.
	  (An option to do it by Sternheimer itself still remains.)
	  NOTE: This commit changes results for periodic beta slightly
	  (e.g. for water test): previously, there could be contamination
	  of degenerate states in the response, but now they are completely
	  removed.
	  * Removed FIXME which was fixed already.

2014-04-23 06:20  dstrubbe

	* [r12071] src/sternheimer/kdotp.F90: Undoing r12070 as it pertains
	  to kdotp: it is wrong for KdotPOccupiedSolutionMethod =
	  sum_over_states, for reasons I cannot yet determine.

2014-04-23 15:02  joseba

	* [r12072] doc/doxygen/create_documentation.sh,
	  src/utils/convert.F90: Moved down the printing of the
	  "Experimental Feature". Otherwise, g95 complains about "Fortran
	  runtime error: Unattached unit"

2014-04-23 15:05  joseba

	* [r12073] doc/doxygen/create_documentation.sh: Reverted
	  accidentally changed file

2014-04-23 20:50  alejandro

	* [r12074] src/main/geom_opt.F90, src/math/minimizer.F90: FIRE
	  minimizer for geometry optimization. This implementation works
	  without GSL.
	  It is marked as "Experimental", but works fine with all the
	  examples of the tutorial.

2014-04-23 22:11  alejandro

	* [r12075] src/math/minimizer.F90: Fix to previous commit. Use of
	  "lalg_nrm2" rather than "norm2".

2014-04-24 02:58  xavier

	* [r12076] src/main/geom_opt.F90: Added default values to the
	  documentation of the GO variables.

2014-04-24 03:01  xavier

	* [r12077] src/math/Makefile.am: Missing build dependency.

2014-04-24 12:01  xavier

	* [r12078] src/main/geom_opt.F90: Small change to make GOCenter =
	  yes to work with the FIRE minimizer.

2014-04-25 13:28  xavier

	* [r12079] src/main/geom_opt.F90: Now the geometry optimization
	  creates a log file with the parameters
	  for each iteration. Useful to evaluate and improve the
	  optimizers.

2014-04-28 20:40  dstrubbe

	* [r12080] testsuite/periodic_systems/12-boron_nitride.test:
	  Recentering Total energy match for BN (after change to
	  SymmetrizeDensity) so that the match passes. It recently failed
	  with a very small discrepancy on hbar.

2014-04-30 14:39  adelgado

	* [r12081] src/hamiltonian/hamiltonian.F90, src/pcm/pcm.F90,
	  src/system/energy_calc.F90, src/system/v_ks.F90: * In
	  'pcm/pcm.F90' the signs of potential used to calculate the PCM
	  polarization charges have been properly defined. I have also
	  introduced a new variable 'SmearingFactor', which is stored in
	  'pcm%gaussian_width', to change the width of the Gaussian
	  functions smearing the density of polarization charges in the
	  tesserae representative points. This new variable is passed to
	  the subroutine 'pcm_pot_rs' that generates the PCM fields in real
	  space. The set of actual arguments of the latter subroutine in
	  the calling subprograms in 'hamiltonian/hamiltonian.F90' and
	  'system/v_ks.F90' has been updated.
	  
	  * In 'system/energy_calc.F90' the calculation of
	  'hm%energy%int_n_pcm' was moved, so that this quantity is also
	  computed during time propagation if 'hm%pcm%run_pcm=.true.'.

2014-05-01 11:00  micael

	* [r12082] src/scf/scf.F90, src/system/output.F90, src/td/td.F90: *
	  It is now possible to set OuputInterval = 0. In that case no
	  output will be written.
	  * Removed the OutputDuringSCF variable, as one can now use
	  OuputInterval to switch the output on/off.

2014-05-01 12:58  acastro

	* [r12083] src/opt_control/check_input_inc.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/target_classical_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_velocity_inc.F90,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp: The optimal
	  control code was calling "conjugate gradients" something that was
	  not cg: the BFGS algorithm implemented in the GSL library. Now
	  one can use
	  both.

2014-05-02 01:38  dstrubbe

	* [r12084] src/pcm/pcm.F90, src/system/energy_calc.F90,
	  src/system/output.F90: * Typos.
	  * Moving explanations to body rather than default.
	  * Fixing indentation (it should always be two spaces).
	  * Fixing call to messages_obsolete_variable added recently: it
	  was duplicating a call for OutputEvery already present, whereas
	  OutputDuringSCF did not have such a call.

2014-05-02 14:36  askhl

	* [r12085] configure.ac, m4/feast.m4, src/basic/utils.F90,
	  src/hamiltonian/hamiltonian.F90, src/states/cmplxscl.F90,
	  src/system/Makefile.am, src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90, src/system/eigen_feast.F90,
	  src/system/eigensolver.F90, src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90, src/system/xc_ks_inversion.F90:
	  Add FEAST eigensolver library to optional external dependencies.
	  Add interface to non-Hermitian FEAST eigensolver, which depends
	  on the development version of the FEAST library. Work very much
	  in progress. So far this will only work in serial. Change grid_t
	  parameter to intent(in) in the linear solvers so as to avoid
	  propagating a lot of inout permissions in the eigensolvers. Add
	  input parameters to specify eigenvalue search contours for use
	  with FEAST. Add input parameter to help sorting states with
	  complex scaling. Minor changes to output with complex scaling
	  regarding ordering of states.

2014-05-05 12:20  micael

	* [r12086] src/system/xc_ks_inversion.F90: As far as I can see,
	  there is no need for the xc_ks_inversion module to use the mix
	  module.

2014-05-06 12:47  micael

	* [r12087] src/math/Makefile.am, src/math/mix.F90,
	  src/math/mix_inc.F90, src/scf/Makefile.am, src/scf/mix.F90,
	  src/scf/mix_inc.F90, src/sternheimer/sternheimer_inc.F90: Started
	  to implement the restart of the mixing: added routines to read
	  and write the mixing data.
	  This required some tweaks to the mix_t structure and moving the
	  mix module to the scf directory.

2014-05-06 13:48  micael

	* [r12088] m4/feast.m4: * Bug fixed in FEAST m4.

2014-05-06 15:24  dstrubbe

	* [r12089] m4/feast.m4: Removing irrelevant comments, and usage of
	  $1 and $2, in feast.m4: $1 and $2 mean execute things that were
	  passed as arguments to this routine. Since there are no arguments
	  when it is called from configure.ac, they shouldn't be here.

2014-05-06 18:02  dstrubbe

	* [r12090] src/system/eigen_feast.F90: * Removing unneeded module
	  usages (if it compiles without it, it isn't necessary).
	  * Fixing unterminated apostrophe cpp warnings.
	  * Note about use of 'print'.

2014-05-07 11:57  jjornet

	* [r12091] src/utils/local_multipoles.F90: * New variable type
	  local_domain_t.
	  * Reodering subroutines to prepare new module for writing local
	  properties.

2014-05-07 15:17  joseba

	* [r12092] src/poisson/poisson.F90, src/poisson/poisson_libisf.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  testsuite/finite_systems_3d/24-o2-spin.01-gs.inp: Forbid LIBISF
	  Poisson solver with task parallelization and k-points
	  parallelization, which don't work and, also, made changes
	  accordingly.
	  Add documentation.

2014-05-07 17:49  alejandro

	* [r12093] src/main/geom_opt.F90,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/finite_systems_3d/Makefile.am: Changed de default value
	  of GOStep variable in the FIRE minimizer.
	  Corrected the values of masses used in the FIRE minimizer.
	  Added a test for the FIRE minimizer.

2014-05-07 18:18  alejandro

	* [r12094] testsuite/finite_systems_3d/23-go-na2.03-fire.inp: Added
	  the 23-go-na2.03-fire.inp file.

2014-05-08 14:48  micael

	* [r12095] src/frozen/fio_mesh.F90, src/frozen/interpolation.F90,
	  src/grid/basins.F90, src/grid/index.F90,
	  src/grid/io_function_inc.F90, src/grid/mesh.F90,
	  src/grid/mesh_cube_map.F90, src/grid/mesh_cube_parallel_map.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/multigrid.F90, src/grid/nl_operator.F90,
	  src/grid/par_vec.F90, src/hamiltonian/epot.F90, src/pcm/pcm.F90,
	  src/poisson/poisson.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/modelmb_exchange_syms_inc.F90: Improving
	  encapsulation:
	  * There is no need to keep a pointer to the whole simul_box
	  structure in index_t if we only need to know if the box shape is
	  an hyprecube.
	  * Similarly, no need to sistematically pass the dimension to the
	  index routines when we can just store it in index_t.

2014-05-08 16:47  jjornet

	* [r12096] src/grid/mesh_function_inc.F90, src/utils/Makefile.am,
	  src/utils/local_multipoles.F90, src/utils/local_write.F90: *
	  Added new local_write_m. It makes easier and compatible to write
	  local properties.
	  * Now local%inside variable is set on the main program.

2014-05-08 18:42  alejandro

	* [r12097] src/main/geom_opt.F90: Added a reference to the FIRE
	  algorithm.

2014-05-08 18:57  dstrubbe

	* [r12098] src/grid/index.F90, src/main/geom_opt.F90,
	  src/utils/local_multipoles.F90: * PUSH/POP's.
	  * Formatting.
	  * Typo.

2014-05-08 21:20  dstrubbe

	* [r12099] src/grid/index.F90: Fixing POP_SUB from previous commit.

2014-05-08 22:07  dstrubbe

	* [r12100] src/utils/local_write.F90: Fixing distcheck failures:
	  r12096 created two new sections (presumably accidentally) in the
	  variable reference, and one new subsection. Please try to be
	  systematic, and not proliferate sections too much. In particular,
	  the top-level sections need to be mentioned in
	  doc/html/vars/Makefile.am to work. I moved these variables to
	  Utilities::oct-local_multipoles since that is the only thing that
	  seems to use them for now.

2014-05-08 22:14  dstrubbe

	* [r12101] src/utils/local_multipoles.F90: * Typo.
	  * More specific message for 'experimental' since calculating
	  Bader volumes elsewhere is not experimental.

2014-05-09 08:45  joseba

	* [r12102] src/poisson/poisson.F90: Added more documentation about
	  Poisson solvers and forbid also more not working combinations

2014-05-09 09:18  micael

	* [r12103] src/grid/index.F90: Removed PUSH/POP from a routine that
	  is called too often.

2014-05-09 13:15  micael

	* [r12104] src/frozen/fio_mesh.F90, src/frozen/fio_simul_box.F90,
	  src/grid/index.F90, src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/grid/ob_interface.F90, src/ions/simul_box.F90,
	  src/states/restart.F90: * Renamed several routines that
	  write/read information to the restart folder so that all follow
	  the same convention: this_dump/load.
	  * Moved mesh_subset_indices and index_valid from mesh_m to
	  index_m.
	  * Renamed restart_read_lxyz to mesh_check_dump_compatibility, as
	  the previous name was very misleading, and moved it to mesh_m.
	  

2014-05-09 14:26  joseba

	* [r12105] src/system/eigen_cg_inc.F90, src/system/exponential.F90:
	  Changed a variable name
	  Doxygen comments
	  Added () to a subroutine call

2014-05-09 14:52  micael

	* [r12106] src/grid/mesh_init.F90: Bug fixed: the index in ob grid
	  needs to know if the box is an hypercube.

2014-05-09 14:56  micael

	* [r12107] src/grid/grid.F90, src/states/restart.F90: Added new
	  grid_dump routine.

2014-05-10 10:21  micael

	* [r12108] src/grid/grid.F90, src/grid/index.F90,
	  src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/ions/simul_box.F90: Systematizing further the grid dump/load.
	  This should also fix the current teststuite failures with the
	  open boundaries tests. As a side effect it breaks the backward
	  compatibility of the "mesh" restart file. Nevertheless, as far as
	  I could determine, this file is only read with open boundaries
	  and frozen density, which are not widely used features.

2014-05-10 10:57  micael

	* [r12109] src/frozen/fio_simul_box.F90: Forgot to commit this file
	  in r12108.

2014-05-10 12:10  micael

	* [r12110] src/grid/index.F90: Bug fix: one PUSH_SUB should be a
	  POP_SUB instead.

2014-05-12 10:45  jjornet

	* [r12111] src/utils/local_multipoles.F90: * call
	  io_mkdir('local.multipoles') has been removed. Now results are
	  written on local.general folder.

2014-05-12 16:32  dstrubbe

	* [r12112] src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/static_pol.F90: * Bugfix: appropriate unit was not being
	  used for some output from
	  static_pol.
	  * Removing unnecessary target attributes.
	  * Formatting.

2014-05-12 16:34  dstrubbe

	* [r12113] src/grid/index.F90, src/grid/subarray_inc.F90,
	  src/scf/rdmft.F90: * Some compilers insist that the 'l' format
	  specifier be followed by a
	  number, so I changed it to 'l1'.
	  * Explanation of why 'aa' appears to be used unset in
	  subarray_inc.F90.
	  * Removing unused global save variable for RDMFT.

2014-05-12 16:39  dstrubbe

	* [r12114] src/hamiltonian/epot.F90, src/ions/box_union.F90,
	  src/ions/kpoints.F90: Unused or useless variables.

2014-05-12 16:43  dstrubbe

	* [r12115] src/utils/local_write.F90: * Unnecessary target
	  attributes.
	  * Unused variables.
	  * Note about local_write.F90.

2014-05-12 16:57  dstrubbe

	* [r12116] src/main/main.F90, src/sternheimer/vdw.F90: * Adding
	  Sternheimer prefixes to documentation.
	  * Changing prefix for Van der Waals mode to something more
	  logical, and making a variable name explicit.

2014-05-12 17:11  dstrubbe

	* [r12117] src/ions/symmetries.F90, src/ions/symmetries_finite.c: *
	  Adding interfaces for finite symmetry routines.
	  * Renaming an argument to something more meaningful.

2014-05-12 18:05  dstrubbe

	* [r12118] src/math/loct_math.F90,
	  src/opt_control/opt_control_c_inc.F90, src/system/forces.F90: *
	  More reasonable intent's for function subroutine argument of
	  loct_numerical_derivative.
	  * Using the interface (which was otherwise unused) for calls to
	  oct_numerical_derivative.

2014-05-13 09:35  jjornet

	* [r12119] src/utils/local_multipoles.F90: * Filename changed to
	  write on the correct folder.

2014-05-13 10:50  askhl

	* [r12120] src/scf/scf.F90: for complex-scaled DFT, set initial
	  Hartree and XC potentials to zero since the initial
	  density/orbitals are not correctly complex-scaled and thus would
	  yield a weird initial spectrum

2014-05-13 12:01  joseba

	* [r12121] src/basic/multicomm.F90: Initialize all the parallel
	  communicators, even if they are not used, i.e. have only one
	  process. This is important for the MPI IO, as all the processes
	  of one communicator must call the IO functions.

2014-05-14 08:03  jjornet

	* [r12122] src/utils/local_multipoles.F90: * Removing unused and
	  repeated variable lmax.

2014-05-15 15:30  dstrubbe

	* [r12123] src/pcm/pcm.F90, src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: Unused variables and arguments.

2014-05-18 14:27  xavier

	* [r12124] src/hamiltonian/hamiltonian.F90: The pseudopotential
	  phases are only required for periodic systems.

2014-05-18 14:44  xavier

	* [r12125] src/ions/ion_dynamics.F90: Added the variable
	  IonsConstantVelocity, this makes ions not to feel
	  the forces and keep their initial velocities.

2014-05-18 14:57  xavier

	* [r12126] src/system/xc_oep_inc.F90, src/xc/vxc_inc.F90,
	  src/xc/xc.F90: Renamed xcs%functl to xcs%functional.

2014-05-18 18:47  micael

	* [r12127] src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/gcm.F90, src/main/geom_opt.F90, src/main/invert_ks.F90,
	  src/main/phonons_fd.F90, src/main/static_pol.F90,
	  src/main/unocc.F90, src/opt_control/initst.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/scf/ground_state.F90, src/scf/mix.F90, src/scf/scf.F90,
	  src/states/Makefile.am, src/states/linear_response.F90,
	  src/states/linear_response_inc.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/states/states_io.F90,
	  src/states/states_restart.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/td/td.F90, src/td/td_write.F90: * Implemented the restart of
	  the density and mixing during the SCF cycle. For the moment it is
	  disabled, as there are still some more testing needed before
	  starting to update the results from the testsuite.
	  * Divided the restart module in two. One will keep the general
	  information and routines, the second one keeps the states
	  specific routines. There is still some work to be done regarding
	  this in order to make the restart more flexible.
	  * Now the writing of the density is not done automatically at the
	  same time as the writing of the states.
	  * Moved and changed the name of several routines for greater
	  consistency.

2014-05-18 19:20  xavier

	* [r12128] testsuite/components/03-derivatives_3d.01.inp,
	  testsuite/components/03-derivatives_3d.test: Reduced the maximum
	  blocksize of the 3D derivatives test, to reduce
	  memory consumption of the testsuite.

2014-05-19 09:33  micael

	* [r12129] src/states/states_restart.F90: * Corrected wrong
	  PUSH_SUB.

2014-05-19 20:32  dstrubbe

	* [r12130] testsuite/oct-run_regression_test.pl: Bugfix to r12032:
	  we should only use the value $1 from the regular expression if
	  the search was successful; otherwise $1 will confusingly provide
	  the value of an argument passed to this function.

2014-05-20 15:28  dstrubbe

	* [r12131] src/grid/io_function_inc.F90,
	  src/states/states_calc.F90, src/system/forces.F90: * Unused
	  variables.
	  * PUSH/POP's.
	  * Formatting.

2014-05-20 16:37  dstrubbe

	* [r12132] src/utils/local_write.F90: * Structure components should
	  be pointers not allocatable.
	  * Flagging another problem with local_write.F90.

2014-05-20 16:46  dstrubbe

	* [r12133] src/utils/Makefile.am, src/utils/local_multipoles.F90:
	  Deactivating local_write_m for the time being since it makes g95
	  crash on compilation; does not seem
	  usable for its intended purposes in its current location in
	  src/util;
	  and seems unnecessarily duplicative of src/td/td_write.F90.

2014-05-21 09:33  joseba

	* [r12134] src/grid/ob_grid.F90: The meshes of ob_grid have to be
	  initialized, mainly because of MPI IO, which will use those
	  values. Probably is not the best place to do so

2014-05-21 14:01  jjornet

	* [r12135] src/grid/io_function_inc.F90: * corrected integer cast
	  to the actual machine precission

2014-05-21 16:06  dstrubbe

	* [r12136] testsuite/components/16-hartree_3d_libisf.01-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.02-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.test: Newlines at the
	  end of files.

2014-05-22 10:35  joseba

	* [r12137] src/grid/grid.F90, src/grid/mesh_init.F90,
	  src/states/restart_inc.F90: Reading of the files is done with MPI
	  2 IO if available.
	  The purpose of this change is to check if in other machine works
	  (through buildbot).
	  And also, to be able to measure the performance, compared with
	  the old approach (work to be done by myself).

2014-05-22 15:27  jjornet

	* [r12138] src/utils/Makefile.am, src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: * Activating local_write_m . Error
	  compilation on lascar (g95) has been fixed changing variable
	  declaration.
	  * New condition to update local domains.

2014-05-26 15:42  joseba

	* [r12139] m4/isf.m4, src/common-rules.make: Added rt library to
	  the check of the new ISF, as it needs.
	  Handled in a better way the libraries of the new ISF; i.e. in
	  common-rules.make, instead of in the m4

2014-05-26 16:12  joseba

	* [r12140] m4/isf.m4: I think those lines are mandatory, when is
	  not found

2014-05-27 08:14  joseba

	* [r12141] src/common-rules.make: Changed the order of other_LIBS,
	  as ISF depends on LAPACK. I'd say that the core libs should go
	  last anyway

2014-05-27 09:38  micael

	* [r12142] src/Makefile.am, src/basic/datasets.F90,
	  src/basic/io.F90, src/common-rules.make, src/frozen/fio_mesh.F90,
	  src/frozen/fio_simul_box.F90, src/grid/grid.F90,
	  src/grid/index.F90, src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/include/global.h,
	  src/ions/simul_box.F90, src/main/casida.F90,
	  src/main/casida_inc.F90, src/main/gcm.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/phonons_fd.F90,
	  src/main/run.F90, src/main/static_pol.F90, src/main/unocc.F90,
	  src/opt_control/initst.F90, src/opt_control/opt_control.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/scf/ground_state.F90, src/scf/mix.F90, src/scf/scf.F90,
	  src/states/Makefile.am, src/states/linear_response_inc.F90,
	  src/states/restart.F90, src/states/restart_inc.F90,
	  src/states/states.F90, src/states/states_calc.F90,
	  src/states/states_restart.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/system/output.F90, src/system/output_fio.F90,
	  src/td/ob_mem.F90, src/td/pes.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90, src/td/td.F90, src/td/td_write.F90,
	  src/utils/local_multipoles.F90,
	  src/utils/photoelectron_spectrum.F90: Implemented new restart
	  framework. This is intended to correct several problems that
	  occurred in the code and to prevent similar problems to occur in
	  the future. These include, among others:
	  * Mesh functions being read without taking into account that the
	  mesh might have changed (this happened in the loading of the KS
	  potential of previous TD iterations)
	  * Having restart information obtained with two different meshes
	  stored in the same folder.
	  * Having concurrent incompatible access from two different parts
	  of the code to the same restart directory.
	  * Incorrectly using tmpdir instead of restart_dir and vice versa
	  (in fact, these two variables have been deleted in this commit)
	  * Reading or writing restart information outside the restart
	  directories.
	  
	  This new scheme implies that a restart object must always be used
	  to access the content of a restart directory. This object takes
	  care of making several checks, in particular the ones concerning
	  the mesh compatibility. Unfortunately there are still a couple of
	  places that partially bypasses this framework, namely in the PES
	  and open boundaries modules.
	  
	  Some of the code is still crude and improvements are needed, like
	  the parallel writing/reading of files which is still not
	  completely transparent and consistent, but the basic features are
	  there.
	  
	  Note that all the routines for loading and dumping the grid
	  information, including the partition, have been kept outside this
	  new framework, although they are used by it. The reason behind
	  this is that I will soon make some more changes to the restart
	  module that are going to make it quite Octopus specific, while I
	  would like to keep the grid stuff as generic as possible.
	  
	  
	  Other changes:
	  * io_mkdir now has an option to create parent directories if
	  needed.
	  * Some formatting in the PES modules (please note that variables
	  and routines names must all be lower-case, as per Octopus coding
	  style)
	  * Changed the names of some routines to improve consistency.
	  * There are three new input options (MeshPartitionRead,
	  MeshPartitionWrite, and MeshPartitionDir) that replace
	  MeshPartitionFromScratch. This makes it possible to read/write
	  the partition from/to a directory whose name is not "restart" and
	  to suppress the writing of the partition.
	  * The mesh fingerprint is now required when reading the content
	  of a restart directory. Furthermore, the content of the mesh
	  fingerprint file has changed slighly to make it easier to deal
	  with the case that the box shape is an hypercube. At the moment
	  these two changes break the backward compatibility of the
	  restart, but I will try to have the code working properly with
	  previous restart files in a subsequent commit.

2014-05-27 09:44  micael

	* [r12143] src/utils/local_multipoles.F90: * Reverted unintended
	  changes from previous commit.

2014-05-27 11:02  micael

	* [r12144] src/utils/local_multipoles.F90: * Updating the local
	  multipoles so that they work with the new restart.

2014-05-27 15:03  micael

	* [r12145] src/basic/loct.F90, src/basic/oct_f.c,
	  src/states/restart.F90: It seems the use of the inquire intrinsic
	  with directories is not standard Fortran, so we will use a C
	  function instead.

2014-05-27 15:09  micael

	* [r12146] src/basic/loct.F90: Reverting unintended change.

2014-05-27 17:16  dstrubbe

	* [r12147] src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/main/static_pol.F90, src/scf/mix.F90, src/states/restart.F90:
	  * Some typos and formatting.
	  * Fixing a doxygen tag.
	  * Making error message in 'static_pol' match the others.
	  * Warning shouldn't start with 'Info:'.
	  * Missing 'messages_fatal' after putting message in message(1)

2014-05-27 18:09  dstrubbe

	* [r12148] src/common-rules.make: A digit of the GPL zipcode was
	  accidentally deleted in r12142.

2014-05-27 21:13  dstrubbe

	* [r12149] src/math/loct_math.F90: Fixing indentation.

2014-05-28 08:45  micael

	* [r12150] src/states/restart.F90: Making sure that we do not try
	  to close files that were not opened.

2014-05-28 10:54  micael

	* [r12151] src/td/ob_mem.F90: Removed spurious attempt to close a
	  file.

2014-05-28 12:15  joseba

	* [r12152] src/scf/mix.F90, src/scf/scf.F90: A variable was not
	  initialized. So added a err parameter to the mix_dump subroutine
	  Changed an error message

2014-05-28 12:29  micael

	* [r12153] src/basic/oct_f.c, src/states/restart_inc.F90: *
	  restart_write_function should call io_function_output specifying
	  the mpi group.
	  * Removed debug print.

2014-05-29 07:50  joseba

	* [r12154] src/grid/mesh.F90: Added deallocations of the partitions
	  at the end of execution

2014-05-29 09:20  joseba

	* [r12155] src/grid/mesh.F90: Only finalize the partition when
	  domain parallelization is used

2014-05-29 10:29  joseba

	* [r12156] src/basic/write_iter.F90, src/basic/write_iter_low.c,
	  src/td/td_write.F90: Added a subroutine to set arbitrarily the
	  iteration number
	  Some doxygen comments

2014-05-29 14:26  micael

	* [r12157] src/states/restart_inc.F90: Reverting part of r12153.

2014-05-30 12:25  micael

	* [r12158] src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/gcm.F90, src/main/geom_opt.F90, src/main/invert_ks.F90,
	  src/main/phonons_fd.F90, src/main/run.F90,
	  src/main/static_pol.F90, src/main/unocc.F90,
	  src/opt_control/initst.F90, src/opt_control/propagation.F90,
	  src/opt_control/target.F90, src/scf/ground_state.F90,
	  src/states/restart.F90, src/states/states.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/kdotp.F90, src/sternheimer/phonons_lr.F90,
	  src/sternheimer/vdw.F90, src/td/ob_mem.F90, src/td/td.F90,
	  src/td/td_write.F90, src/utils/local_multipoles.F90,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-oct_long.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.03-filter_indirect.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-ground_state_disp.inp:
	  Introduced new input variable RestartOptions, which replaces
	  TmpDir and RestartDir.
	  
	  The idea is that, instead of selecting a global directory to be
	  used for writing and another one for reading, one can now select
	  a different restart directory that is going to be used both for
	  writing and reading for each restart data type. Using the same
	  directory for reading and writing seems more appropriate, as
	  there are several parts of the code that already required that. I
	  have defined all the restart data types that I could think of,
	  but it is likely that some new ones would be useful in some parts
	  of the code, so feel free to introduce new ones. In this context,
	  a restart data type is a set of restart information that is to be
	  used in a specific part of the code. For example, the simplest
	  and most obvious case is the ground-state restart required by
	  many run modes. Other examples are less obvious, like the
	  ground-state used to compute the populations and td_occup options
	  of the TDOutput variable, as one could want to project the TD
	  states over a ground-state that is different from the
	  ground-state used to start the TD calculation.
	  
	  All the run modes should nevertheless behave exactly as before,
	  with the only exception of CalculationMode=unocc. In that case,
	  if FromScratch = yes, the restart information is read from the
	  restart directory defined by the restart_gs option, while if
	  FromScratch = no, it is read from the restart directory defined
	  by the restart_unocc option. This allows to leave unchanged the
	  behaviour of this run mode when it is the second of two datasets,
	  being the first one a ground-state calculation.

2014-05-30 15:20  micael

	* [r12159] src/scf/mix.F90, src/scf/scf.F90,
	  src/states/restart.F90: * It is now possible to set some flags in
	  the RestartOptions block in order to select which parts of the
	  restart information should be used. At the moment, only the
	  density and mixing flags are implemented for an SCF calculation.
	  * Name of mixing functions to be read was incorrect.
	  * Mixing now takes into account if the writting/reading of the
	  restart should be skipped.

2014-05-30 19:30  dstrubbe

	* [r12160] src/scf/scf.F90, src/states/restart.F90,
	  src/td/td_write.F90: * Typos.
	  * Clarifying default of LocalMagneticMomentsSphereRadius, and
	  making it be used in td_write.F90 too.

2014-05-31 15:42  acastro

	* [r12161] src/math/sparskit.F90,
	  testsuite/real_time/16-sparskit.test: The sparskit linear solver
	  used a stopping criterion that was in my opinion
	  not a good choice: it depended on the initial residual produced
	  by the initial
	  guess. So for example calling the solver with a solution provided
	  by a
	  previous call did not exit immediately, but rather attempted to
	  get solution
	  several orders of magnitude better.
	  
	  I change it here to a stopping scheme that does not depend on the
	  initial
	  guess.

2014-06-01 19:01  acastro

	* [r12162] src/grid/mesh_function.F90, src/math/sparskit_inc.F90,
	  src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_rk_inc.F90: New propagator: 4th order implicit
	  Gauss-Legendre Runge-Kutta. For a given
	  time step, it is perhaps the most precise of the methods that we
	  have right
	  now, but is also slower (part of the reason for the slowness may
	  be due to
	  clumsy programming and lack of pre-conditioning for the linear
	  solvers). However, for long time propagations where accuracy is
	  important, it
	  may be useful (and specially for QOCT runs, for which the
	  propagations can be
	  specially challenging). And it will be good to have it for
	  comparison
	  purposes, since it is a "classical" propagator that appears in
	  textbooks.
	  
	  It needs the sparskit library. Also, seems to work well only for
	  some of the
	  linear solvers (gmres in particular), and not others.

2014-06-01 19:36  acastro

	* [r12163] src/td/propagator_rk_inc.F90: Eliminated the previously
	  committed code when sparskit is not present.

2014-06-02 14:50  joseba

	* [r12164] src/math/fft_inc.F90, src/scf/mix.F90, src/scf/scf.F90:
	  Changed the tests of the reading of the mixing to be able to work
	  in parallel.
	  Forced the failure if the mixing information is not properly
	  read, otherwise it gets stuck in parallel without any
	  information.
	  
	  Added SVN Id to fft_inc.F90 file

2014-06-02 16:26  jjornet

	* [r12165] src/species/species.F90, src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: * read_from_default_file becomes
	  public to enable new read of atomic radii in local_multipoles.
	  * Variable names used by oct-local_multipoles changed to
	  homogenize section. All variable names start by LD.
	  * Some bugs on writting multipoles files have been fixed.

2014-06-02 16:37  acastro

	* [r12166] src/td/propagator_rk_inc.F90: I had not included in the
	  RK4 propagator the possibility of using an
	  inhomogeneous term. Now it is included, which permits to use this
	  propagator
	  for QOCT runs with moving nuclei (although now only with
	  independent
	  electrons).

2014-06-03 08:12  jjornet

	* [r12167] src/utils/xyzanim.F90: * Fixed the units error.
	  * New option to write the trajectories into multiple xyz files.

2014-06-03 13:38  joseba

	* [r12168] src/basic/io_binary_f.F90: Deleted too verbose output
	  and shown only in debug_mode

2014-06-03 14:25  micael

	* [r12169] src/scf/mix.F90, src/scf/mix_inc.F90, src/scf/scf.F90: *
	  Reverted some of the changes from r12087.
	  * When restarting the mixing, we actually need to know how many
	  SCF iterations have been done in total, not just during the
	  current calculation.

2014-06-03 14:59  micael

	* [r12170] src/sternheimer/sternheimer_inc.F90: This file was
	  missing from the previous commit.

2014-06-03 15:32  dstrubbe

	* [r12171] src/utils/xyzanim.F90: Clarifying documentation.

2014-06-03 15:34  dstrubbe

	* [r12172] src/ions/Makefile.am, src/ions/geometry.F90,
	  src/ions/simul_box.F90: The check for atoms being too close only
	  worked for finite systems. Now it is done after the simulation
	  box is defined, and takes into account periodic boundary
	  conditions.

2014-06-03 20:55  acastro

	* [r12173] src/grid/mesh_function.F90, src/math/Makefile.am,
	  src/td/propagator.F90, src/td/propagator_rk_inc.F90: And now I
	  add the 2nd order implicit Runge-Kutta, a.k.a. trapezoidal rule,
	  which in fact reduces to Crank-Nicolson for linear problems.
	  Since we do not
	  really have a linear problem when doing TDDFT, it is slightly
	  different to CN.

2014-06-03 21:21  dstrubbe

	* [r12174] src/states/states_restart.F90, src/td/td.F90: Restart
	  now checks that the k-points being read are indeed the needed
	  ones, and if not doesn't use the restart info for that k-point.
	  An exception is made for the open-boundaries code in which the
	  k-points are always set to zero internally and thus will never
	  match.

2014-06-05 16:08  dstrubbe

	* [r12175] src/ions/simul_box.F90: Fixing PUSH/POP.

2014-06-05 19:08  dstrubbe

	* [r12176]
	  testsuite/linear_response/05-polarizability.02-sternheimer.inp:
	  Testing another output.

2014-06-05 19:30  dstrubbe

	* [r12177] src/main/phonons_fd.F90: Just as for finite-difference
	  electric response, it is good to clear the mixing between SCF
	  runs on different physical systems. This makes the result more
	  reproducible by avoiding accumulation of numerical noise, and
	  probably will make the finite-difference vib_modes test pass
	  again (after r12169).

2014-06-06 09:07  micael

	* [r12178] src/main/casida_inc.F90, src/sternheimer/phonons_lr.F90:
	  Making sure we only try to close a file it was successfully
	  opened.

2014-06-06 14:04  micael

	* [r12179] src/hamiltonian/hamiltonian.F90, src/scf/scf.F90,
	  src/states/restart.F90: * Added routines to dump/load the
	  Hartre+XC potential.
	  * It is now possible to use a saved Hartre+XC potential to
	  restart the SCF cycle.

2014-06-06 14:50  micael

	* [r12180]
	  testsuite/finite_systems_3d/06-restart.01-ground_state.inp,
	  testsuite/finite_systems_3d/06-restart.01-gs_mixrho.inp,
	  testsuite/finite_systems_3d/06-restart.02-restart_ground_state.inp,
	  testsuite/finite_systems_3d/06-restart.02-restart_gs_mixrho.inp,
	  testsuite/finite_systems_3d/06-restart.03-gs_mixvhxc.inp,
	  testsuite/finite_systems_3d/06-restart.03-td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.04-restart_gs_mixvhxc.inp,
	  testsuite/finite_systems_3d/06-restart.04-restart_td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.05-restart_gs.inp,
	  testsuite/finite_systems_3d/06-restart.06-td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.07-restart_td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.test,
	  testsuite/finite_systems_3d/Makefile.am: Expanded
	  finite_systems_3d/06-restart so that the new SCF restart features
	  are tested.

2014-06-06 14:52  micael

	* [r12181] testsuite/finite_systems_3d/06-restart.test: Forgot an
	  important note in my previous commit.

2014-06-06 15:42  dstrubbe

	* [r12182] src/scf/scf.F90: Let's not bother the user with listing
	  all possible error conditions, let's just say what went wrong in
	  this particular case.

2014-06-07 14:58  acastro

	* [r12183] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/opt_control/propagation.F90, src/system/exponential.F90,
	  src/td/propagator.F90, src/td/propagator_qoct_inc.F90: Chenged
	  the way in which the application of the QOCT-exchange operator is
	  done.

2014-06-07 16:24  acastro

	* [r12184] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/check_input_inc.F90, src/td/propagator.F90,
	  src/td/propagator_rk_inc.F90: Added the QOCT-exchange operator to
	  the RK2 propagator, so that it can be used
	  for QOCT-TDDFT runs.

2014-06-08 11:32  acastro

	* [r12185] src/td/propagator.F90, src/td/propagator_rk_inc.F90: The
	  RK2 did not allow for the presence of an inhomogeneous term in
	  the
	  equation of motion. Now it does.

2014-06-09 18:07  dstrubbe

	* [r12186] src/main/static_pol.F90: Repairing restart for
	  finite-differences em_resp: the directory name was accidentally
	  changed to em_resp instead of em_resp_fd in r12158, and the
	  dumping of the states for the different fields were accidentally
	  all overwriting one another except for the yz+ one.

2014-06-11 12:54  micael

	* [r12187] src/sternheimer/kdotp.F90: Bug fix: a variable
	  (kdotp_vars%eta) was being used uninitialized.

2014-06-11 14:12  micael

	* [r12188] src/states/states.F90: In states_look, the number of
	  states, the states dimension, and the number of kpoints are now
	  read from the "states" restart file.

2014-06-11 15:08  joseba

	* [r12189] src/poisson/poisson.F90: Forbid to select the LibISF
	  Poisson solver if not compiled. Sorry for not doing it before.

2014-06-11 16:03  dstrubbe

	* [r12190] src/poisson/poisson.F90: Fixing typo and clarifying
	  error message.

2014-06-11 16:07  micael

	* [r12191] src/basic/io.F90, src/basic/json_parser.F90,
	  src/frozen/fio_simul_box.F90, src/ions/simul_box.F90,
	  src/scf/mix.F90, src/states/restart.F90, src/states/states.F90,
	  src/states/states_restart.F90, src/td/pes_mask_out_inc.F90: *
	  iopar_read is now able to read more than one line at a time.
	  * Added iopar_find_line function.

2014-06-11 16:10  dstrubbe

	* [r12192] src/hamiltonian/species_pot.F90: Fixing text of error
	  message.

2014-06-12 13:57  micael

	* [r12193] src/frozen/fio_mesh.F90, src/grid/index.F90,
	  src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/partition.F90,
	  src/ions/simul_box.F90, src/states/restart.F90: * All the grid
	  related dump/load routines are now fully MPI aware.
	  * Most of the possible errors in the grid related dump/load
	  routines are now taken into account.
	  * Errors in the grid related dump/load routines are no longer
	  fatal: an error code is always returned to the parent routine.
	  * Removed some unused variables.
	  * Changed some routine names to improve consistency.

2014-06-12 16:21  dstrubbe

	* [r12194] testsuite/linear_response/04-vib_modes.test: Recentering
	  and tightening up tolerances for vib modes.

2014-06-13 14:23  joseba

	* [r12195] src/states/states_restart.F90: Added time stamp to the
	  starting and ending points of reading and writing. This is useful
	  for large systems

2014-06-13 16:26  micael

	* [r12196] src/grid/index.F90, src/grid/mesh.F90,
	  src/hamiltonian/hamiltonian.F90, src/ions/simul_box.F90,
	  src/main/casida.F90, src/main/casida_inc.F90, src/main/unocc.F90,
	  src/opt_control/initst.F90, src/opt_control/propagation.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/scf/ground_state.F90, src/scf/mix.F90, src/scf/scf.F90,
	  src/states/linear_response_inc.F90, src/states/states.F90,
	  src/states/states_restart.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/td/pes.F90, src/td/pes_mask_out_inc.F90, src/td/td.F90: *
	  Improved error handling in all the dump/load routines:
	  - it is always up to the parent routines to decide if the errors
	  are fatal or not.
	  - all possible errors are checked.
	  - the code tries to read/write as much as possible, even if an
	  error occured.
	  * Failure to dump is not a fatal error any more (I might have
	  missed a couple of places that call messages_fatal instead of
	  messages_warning though).
	  * The dump/load routines now only print that they
	  started/finished in debug mode. The states_load and states_dump
	  are an exception, as they can be very time-consuming and
	  therefore one wants to know what the code is doing.
	  * dump/load routines now systematically check the result of
	  restart_skip.
	  * Moved a couple of routines and changed some names to improve
	  consistency.

2014-06-14 09:20  micael

	* [r12197] src/states/states_restart.F90: Corrected a couple of
	  PUSH/POP statements.

2014-06-14 09:45  micael

	* [r12198] src/main/invert_ks.F90, src/main/static_pol.F90,
	  src/main/unocc.F90, src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer_inc.F90: * Added some warning
	  messages when the code fails to dump the states.
	  * Changed some fatal errors to simple warnings when the code
	  fails to dump the states.

2014-06-14 10:16  micael

	* [r12199] src/states/states_restart.F90: The states were declared
	  as intent(inout) in states_dump, but as far as I can see (and
	  gfortran agrees) intent(in) is enough.

2014-06-14 13:16  micael

	* [r12200] src/states/states_restart.F90, src/td/td.F90: Moved the
	  TD restart stuff to its own routines.

2014-06-16 21:48  dstrubbe

	* [r12201] src/states/states.F90: Check and advice on dealing with
	  Occupations block, preventing an array access out of bounds.

2014-06-17 20:31  dstrubbe

	* [r12202] src/scf/scf.F90, src/td/propagator.F90: Unused
	  variables.

2014-06-18 15:40  dstrubbe

	* [r12203] src/utils/local_multipoles.F90: Cleaning up mess in
	  documentation. Be sure to look at the result on the website
	  (http://www.tddft.org/programs/octopus/doc/generated/html/vars.php?page=sections)
	  to check that things look OK after writing these blocks.

2014-06-20 15:25  micael

	* [r12204] src/basic/io.F90, src/grid/index.F90, src/grid/mesh.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/ob_grid.F90, src/grid/partition.F90,
	  src/hamiltonian/hamiltonian.F90, src/ions/simul_box.F90,
	  src/main/casida_inc.F90, src/main/gcm.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/phonons_fd.F90,
	  src/main/static_pol.F90, src/main/unocc.F90,
	  src/opt_control/initst.F90, src/opt_control/propagation.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/scf/ground_state.F90, src/scf/mix.F90, src/scf/scf.F90,
	  src/states/linear_response_inc.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/states/states.F90,
	  src/states/states_restart.F90, src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/kdotp.F90, src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90, src/td/td.F90,
	  src/td/td_write.F90: More restart:
	  * New restart_write and restart_read routines to write and read
	  to restart files.
	  * Different combinations of errors in the dump/load routines will
	  now produce different and unique error codes. This feature is not
	  actually used, but structuring the routines this way might become
	  handy when implementing a decent error handling system.
	  * Improved error messages related to the restart, making them
	  more consistent throughout the code and removing some duplicated
	  information. In particular, dump/load routines will usually give
	  a warning when some error occur, but will not say if the
	  read/write failed, as that is a job for the parent routine, as
	  those are the ones that know if the error is fatal or not, or if
	  it should be silent or not.

2014-06-21 17:11  micael

	* [r12205] src/hamiltonian/hamiltonian.F90, src/scf/mix.F90,
	  src/states/linear_response_inc.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/states/states_restart.F90,
	  src/td/pes_mask_out_inc.F90, src/td/td.F90,
	  src/utils/local_multipoles.F90: * Added routines to write in
	  binary format arrays of restart data that are not a mesh
	  function.
	  * Renamed the restart_write_function and restart_read_function
	  routines to restart_write_mesh_function and
	  restart_read_mesh_function to make it clear that these apply only
	  to functions discretized on the mesh.
	  * Fixed serious bug in PES mask restart that seems to be present
	  for a long time: when the mask cube was not parallel in domains,
	  all the nodes would write the mask functions to the same file,
	  which could result in a file with wrong data. Now the writing and
	  reading of these functions is done using the new
	  restart_write_binary and restart_read_binary routines, which
	  properly take care of deciding which node is going to write to
	  the disk.

2014-06-23 14:13  umberto

	* [r12206] src/utils/photoelectron_spectrum.F90: * apparently now
	  messages_init() has to precede io_init() in order to avoid
	  spectacular crashes.
	  * missing "/" in "td.general". This is part of a change I have
	  overlooked since the new restart module has been introduced that
	  makes the PES restart incompatible with previous versions. I will
	  try to fix it in another commit.
	  
	  

2014-06-23 16:19  dstrubbe

	* [r12207] src/hamiltonian/hamiltonian.F90,
	  src/main/static_pol.F90, src/states/states_restart.F90: Typos.

2014-06-24 02:54  dstrubbe

	* [r12208] src/hamiltonian/hamiltonian.F90: The pointers added to
	  hamiltonian_t in r12183 needed to be nullified, or
	  hamiltonian_remove_oct_exchange could cause a segmentation fault
	  with SAFE_DEALLOCATE_P, as was happening on the tigger
	  buildslave.

2014-06-25 15:29  dstrubbe

	* [r12209] src/pcm/pcm.F90: Adding emacs syntax-highlighting block.

2014-06-25 16:01  dstrubbe

	* [r12210] src/main/unocc.F90: Undoing fatal error added for unocc
	  in r12204 which was causing the BerkeleyGW test to fail: we do
	  not need the occupied states in general, just the density.

2014-06-25 19:25  dstrubbe

	* [r12211] src/states/states_restart.F90: Bugfix to r12204:
	  states_load returned ierr = 0 in a case where nothing could be
	  read, but that error code was taken to mean everything was read
	  successfully by the calling routines. Instead we will return ierr
	  = -1. Also, restored explanation of what variable the numbers in
	  the comments are referring to.

2014-06-25 19:37  dstrubbe

	* [r12212] src/states/states_restart.F90: * We do not need to
	  signal an error if there are the wrong number of k-points, since
	  from r12174 we are checking that k-points match. We will still
	  give a warning if there are too few k-points, which means
	  inevitably some k-points will not match.
	  * The k-weights should NOT be read on restart because that makes
	  them silently overwrite the ones already generated, and they may
	  will be different since they are not unique in any sense.

2014-06-25 19:57  dstrubbe

	* [r12213] m4/parpack.m4, src/common-rules.make: * PARPACK should
	  be listed first on link line, since it depends on ARPACK.
	  * Missing space.

2014-06-25 20:50  dstrubbe

	* [r12214] src/common-rules.make: Moving ScaLAPACK and BLACS
	  libraries to precede PARPACK and ARPACK on the link line.
	  Somehow, when the order was swapped in r12141, this started
	  problems on the tigger buildslave. For example,
	  10-fullerene.01-gs.inp resulted in
	  {{{
	  ** Warning:
	  ** LCAO alternative implementation is under development.
	  ** It might not work or produce wrong results.
	  
	  [tigger:865] *** An error occurred in MPI_Allreduce
	  [tigger:865] *** on communicator MPI_COMM_WORLD
	  [tigger:865] *** MPI_ERR_OP: invalid reduce operation
	  [tigger:865] *** MPI_ERRORS_ARE_FATAL (your MPI job will now
	  abort)
	  }}}
	  I think the reason is related to the fact that PARPACK can use
	  BLACS for communication, and perhaps to this bug report
	  discussion:
	  http://mailinglists.scilab.org/Compiling-linking-with-PARPACK-td4024371.html.
	  I actually saw problems with PARPACK occurring on Hopper (a Cray)
	  which may be related to this issue as well.

2014-06-25 22:11  dstrubbe

	* [r12215] src/main/unocc.F90, src/states/restart.F90: *
	  restart_end should not be called in unocc before trying to load
	  density, unless another restart will be initialized.
	  * unocc now refrains from trying again to reload wavefunctions
	  from the same directory, if restart_gs and restart_unocc are the
	  same.
	  * This is enabled by a new function in restart_m that tells
	  whether the directories are the same.
	  * Removing unnecessary message about not being able to load all
	  wavefunctions, since the restart routines already say so.
	  * Typo in variable reference info.

2014-06-26 18:14  dstrubbe

	* [r12216]
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.test,
	  testsuite/finite_systems_3d/Makefile.am: Adding a test for unocc
	  with spinors, which seems to be working now.

2014-06-26 19:23  dstrubbe

	* [r12217] src/pcm/pcm.F90, src/states/states.F90,
	  src/system/xc_ks_inversion.F90: Unused and useless variables, and
	  a FIXME about use of LAPACK
	  interface/wrapper.

2014-06-26 19:37  dstrubbe

	* [r12218] src/td/propagator_rk_inc.F90: svn $Id$ and emacs syntax
	  highlighting block.

2014-06-26 20:05  dstrubbe

	* [r12219] src/main/invert_ks.F90, src/utils/local_write.F90:
	  Unused variables.

2014-06-26 20:26  dstrubbe

	* [r12220] src/math/lalg_basic_blas_inc.F90: Adding PUSH/POP's, and
	  making assertions come after 'if n < 1 return' conditions.a

2014-06-26 21:40  dstrubbe

	* [r12221] src/main/unocc.F90: The idea of being orbital-dependent
	  only applies to DFT, not to independent particles. This should
	  solve valgrind warnings about an uninitialized value being access
	  by this call for runs such as
	  finite_systems_1d/01-hydrogen.01-ground_state.inp.

2014-06-26 22:06  dstrubbe

	* [r12222] src/hamiltonian/kick.F90: Making sure kick%function_mode
	  gets initialized always in kick_init to
	  avoid valgrind warnings from runs without a kick, e.g.
	  finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp, when
	  calling kick_write. Also, moving nullifications to common earlier
	  place.

2014-06-27 07:56  joseba

	* [r12223] src/math/lalg_basic_blas_inc.F90: Corrected POP_SUB

2014-06-27 08:24  jjornet

	* [r12224] src/main/geom_opt.F90: * GOStep default value for Fire
	  methos is read in time units (default 50. a.u of time).
	  * Write optimization.log file in output units.

2014-06-27 10:31  joseba

	* [r12225] src/grid/partition.F90: Debug out was missing

2014-06-27 15:23  dstrubbe

	* [r12226] src/main/unocc.F90: unocc with spinors seems to be
	  working now, and is being checked in the testsuite, so I am
	  removing its being experimental and the warning.

2014-06-27 15:44  dstrubbe

	* [r12227] m4/isf.m4, m4/sparskit.m4: Clarifying 'help' strings for
	  configure about the distinction between a prefix and the actual
	  library.

2014-06-27 16:17  dstrubbe

	* [r12228] src/main/unocc.F90: * Clarifying message about unocc
	  with orbital-dependent functional.
	  * Clarifying error message about failing to read occupied states
	  to note why they were required.

2014-06-27 16:35  dstrubbe

	* [r12229] src/main/unocc.F90: * Removed message from unocc about
	  starting 'from scratch' if cannot read orbitals from
	  RESTART_UNOCC: reading orbitals from gs is not the same as
	  starting from scratch if the gs restart contains unoccupied
	  orbitals, e.g. from ExtraStates.
	  * Moving message about building density from wavefunctions to
	  where it actually happens, since there were still possible
	  intervening error conditions.

2014-06-27 18:11  dstrubbe

	* [r12230] src/main/unocc.F90: I forgot to check the error
	  condition before writing an error in r12228.

2014-06-27 18:30  dstrubbe

	* [r12231] src/main/unocc.F90: Bugfix to r12229: I accidentally
	  changed the conditions about when there would be an attempt to
	  read from RESTART_GS, which could lead to an erroneous call to
	  restart_end and a segmentation fault on the mistaken
	  deallocation. I restored the logic.

2014-06-27 20:22  dstrubbe

	* [r12232] src/main/casida_inc.F90, src/states/restart.F90:
	  restart_open now can take an option to silence its warning. This
	  is now used in Casida to avoid getting numerous warnings about
	  missing files even when fromScratch was set. This is related to
	  the unusual way restart works in Casida, in which the different
	  parts of the calculation work off the restart from previous
	  parts, and thus fromScratch only is supposed to mean that the
	  first one won't read saved data.

2014-06-27 21:53  dstrubbe

	* [r12233] src/xc/functionals.F90, src/xc/vxc_inc.F90: * valgrind
	  was complaining about usage of uninitialized functl(ixc)%flags
	  when the functional was none, e.g. for correlation when running
	  with just an exchange functional, as in testsuite/functionals.
	  Therefore, we will cycle when family is none in the loop.
	  * Just in case, set flags to zero when family is none.
	  * Removing meaningless lines about 'ii' which is not used, and
	  then reset by the loop following.

2014-06-28 19:04  acastro

	* [r12234] testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp,
	  testsuite/real_time/18-hhg.test, testsuite/real_time/Makefile.am:
	  Added a test for the oct-harmonic-spectrum utility.

2014-06-28 19:55  acastro

	* [r12235] testsuite/real_time/18-hhg.test: Reduced the precision
	  threshold for this test.

2014-06-29 16:31  micael

	* [r12236] src/grid/index.F90: Bug fix: the checksum was not read
	  in index_load.

2014-06-30 17:17  micael

	* [r12237] src/basic/io_binary_f.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/td/ob_mem.F90: Restart of
	  open-boundaries memory coefficients is now completely handled by
	  the restart module.

2014-06-30 19:01  acastro

	* [r12238] src/td/spectrum.F90: Some troubles when using max_dim
	  larger than 3, triggered by my previous
	  commit.

2014-06-30 21:03  micael

	* [r12239] src/td/ob_mem.F90: Fixed format descriptor.

2014-06-30 21:16  micael

	* [r12240] src/td/ob_mem.F90: Correct some more format descriptors.

2014-07-02 04:39  dstrubbe

	* [r12241] src/main/unocc.F90: For unocc, the density should always
	  be read from gs restart, whereas unocc restart is just for
	  states. This should fix the periodic_systems/03-sodium_chain test
	  that was failing.

2014-07-07 16:39  dstrubbe

	* [r12242] src/scf/lcao.F90: Clarifying info messages for LCAO or
	  random wavefunctions in unocc: these are not necessarily
	  "replacing" states, but might be just providing an initial guess
	  where there was nothing before.

2014-07-07 19:13  dstrubbe

	* [r12243] src/states/states_restart.F90: Bugfix: variables were
	  not being initialized in states_load if skip was set, leading to
	  compiler-dependent behavior and failure with PGI on the unocc run
	  of periodic_systems/03-sodium_chain.01-gs.inp.

2014-07-07 20:00  dstrubbe

	* [r12244] src/states/states_calc_inc.F90: Show error code when
	  Cholesky fails, and mention other possible reasons.

2014-07-07 20:15  dstrubbe

	* [r12245] src/states/states_calc_inc.F90: Made a subsubroutine for
	  cholesky_serial, in accordance with the treatment of the other
	  options.

2014-07-08 18:54  dstrubbe

	* [r12246] src/main/unocc.F90: Improving still-faulty logic for
	  restart in unocc: we try to read from gs unless reading unocc
	  succeeded, or the directories are the same. Previously with
	  FromScratch=false, it would not try to read gs, even if unocc
	  reading failed.

2014-07-08 19:01  dstrubbe

	* [r12247] src/main/unocc.F90: Fixing more flawed logic in unocc:
	  if lowest_missing is set appropriately, there is no need to check
	  ierr > 0. For clarity, I swapped the if-condition, and added
	  comments.

2014-07-09 02:06  dstrubbe

	* [r12248] src/sternheimer/sternheimer.F90: Typo.

2014-07-09 02:30  dstrubbe

	* [r12249] src/sternheimer/em_resp.F90: hm should be initialized
	  before passing it to sternheimer_init, or else a strange error
	  about a bad (uninitialized) occupation at the Fermi level could
	  result.

2014-07-09 02:34  dstrubbe

	* [r12250] src/main/unocc.F90, src/states/states_restart.F90: If
	  running unocc parallel in k-points, there could be a problem from
	  the values of lowest_missing only being correct for local
	  k-points. Now it is reduced over all, and the judgment about
	  whether any occupied are missing is made consistently over all
	  k-points.

2014-07-09 15:24  dstrubbe

	* [r12251] src/states/linear_response_inc.F90: More appropriate
	  types to avoid warnings of type conversion.

2014-07-09 20:42  dstrubbe

	* [r12252] src/main/invert_ks.F90, src/system/xc_ks_inversion.F90:
	  Fixing valgrind warnings from KS inversion:
	  * states_exec_init needs to be called before states_allocate_wfns
	  to
	  ensure that st%d%packed is initialized.
	  * The whole mpi_grp, not just mpi_grp%comm, needs to be
	  initialized.

2014-07-09 20:51  dstrubbe

	* [r12253] src/opt_control/opt_control_state.F90: Intent's,
	  PUSH/POP's, and formatting.

2014-07-09 21:19  dstrubbe

	* [r12254] src/system/v_ks.F90, src/system/xc_ks_inversion.F90:
	  Unnecessary uses of states_null, which is included in states_init
	  and states_copy.

2014-07-09 22:16  acastro

	* [r12255] src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90, src/td/propagator.F90,
	  src/td/propagator_rk_inc.F90: The inhomogeneous term was not
	  handled properly in the RK2 propagation
	  scheme. Also, there was a bug in the update of the xc term for
	  backwards
	  propagations.

2014-07-09 22:39  acastro

	* [r12256] src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90: I modified those two files
	  by mistake in the previous commit. Reverting to
	  previous version.

2014-07-10 16:04  dstrubbe

	* [r12257] src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: * Increasing the
	  precision with which infrared intensities are written. The value
	  in the vib_modes test was exactly reproducible to all 5 digits,
	  so it seems worth writing a few more.
	  * Re-centering and widening tolerances a little in vib_modes test
	  so that lascar_x86_64_gfortran_cl_nvidia_test can pass.

2014-07-10 20:04  dstrubbe

	* [r12258] testsuite/linear_response/01-casida.test: * Using
	  GREPFIELD instead of LINE for more robust matches.
	  * The match labelled 'LUMO+6' was actually LUMO+5.

2014-07-11 15:48  dstrubbe

	* [r12259] testsuite/components/16-hartree_3d_libisf.test: A more
	  distinguishing title for a test.

2014-07-14 14:02  joseba

	* [r12260] src/poisson/poisson.F90, src/poisson/poisson_libisf.F90:
	  Corrected some deallocations, still missing some.
	  Deleted unused variable

2014-07-14 14:13  jjornet

	* [r12261] src/utils/convert.F90: *Use restart routines to read
	  files.
	  *Fix error with output units.

2014-07-14 14:38  joseba

	* [r12262] src/poisson/poisson.F90, src/poisson/poisson_libisf.F90:
	  Correcting my previous commit, LibISF functions have to be only
	  called when compiled
	  Changing a optional argument to an always assigned variable

2014-07-14 20:18  dstrubbe

	* [r12263] src/utils/convert.F90: Fixing formatting.

2014-07-14 20:35  dstrubbe

	* [r12264] src/xc/functionals.F90,
	  testsuite/linear_response/05-polarizability.test: Widening
	  tolerance a bit to allow test to pass on Stampede.

2014-07-14 20:45  dstrubbe

	* [r12265] src/td/propagator.F90, src/td/propagator_rk_inc.F90:
	  Unused variables.

2014-07-14 21:08  dstrubbe

	* [r12266] src/xc/functionals.F90: Reverting accidentally committed
	  change in r12264.

2014-07-14 22:51  dstrubbe

	* [r12267] src/sternheimer/phonons_lr.F90: * For restart in a
	  vib_modes calculation, node 0 should read and distribute to the
	  others.
	  * Only close the unit if it was opened.
	  * Removing unused argument fromScratch (since r12142).

2014-07-14 23:40  dstrubbe

	* [r12268] src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.022-vib_modes_restart.inp,
	  testsuite/linear_response/04-vib_modes.test: * Bugfix: calling
	  restart_read with lines in r12224 broke restart for vib_modes,
	  because the lines could be arbitrarily long. Instead, we will use
	  a separate line for each entry in the dynamical matrix, and
	  another line for infrared.
	  * Adding a test for vib_modes restart.

2014-07-15 16:12  dstrubbe

	* [r12269] src/sternheimer/phonons_lr.F90: * Fixing vib_modes
	  restart in parallel: it was hanging because I made routines
	  containing MPI calls be called only from proc 0.
	  * Since restart_read broadcasts the data, the MPI_Bcast lines
	  were unnecessary.

2014-07-15 16:14  dstrubbe

	* [r12270] m4/sparskit.m4: SPARSKIT's m4 should not have the
	  hardcoded path /usr/lib which is only appropriate for some
	  systems, and could perversely remain in the link line even if it
	  doesn't exist on the machine, if -lskit worked by itself. We will
	  test just -lskit.

2014-07-15 16:16  dstrubbe

	* [r12271] m4/blacs.m4: * If the BLACS linking test failed in
	  configure, the tested value of LIBS_BLACS remained, and could
	  cause an error when eventually linking the executable. It needs
	  to be cleared.
	  * More orthodox capitalization for BLACS and ScaLAPACK.

2014-07-15 16:21  dstrubbe

	* [r12272] src/sternheimer/phonons_lr.F90: * Delete vib_modes
	  restart file if it could not be opened.
	  * More precisely, if unit /= 0 means the file couldn't be opened,
	  but it might exist nonetheless.

2014-07-15 19:37  acastro

	* [r12273] src/math/tdfunction.F90,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test: Improved the
	  accuracy of two operations in the tdfunctions module: the
	  interpolation, and the integration to get dot products. This
	  slightly changes
	  the values of a few optimal control tests.

2014-07-15 19:53  dstrubbe

	* [r12274] src/states/restart.F90: MPI_Barrier needs comm not just
	  mpi_grp.

2014-07-15 19:55  dstrubbe

	* [r12275] src/math/Makefile.am: Missing dependency.

2014-07-15 20:19  dstrubbe

	* [r12276] src/grid/hypercube.F90, src/grid/modelmb_1part.F90,
	  src/states/density.F90: * Missing deallocation.
	  * Formatting.
	  * Argument ordering.
	  * Restored assertion that appeared to have been accidentally
	  disabled
	  in r7182.

2014-07-15 21:05  dstrubbe

	* [r12277] src/grid/hypercube.F90, src/grid/index.F90: * Fixing
	  rank mismatch for call to hypercube_x_to_i, which somehow
	  does not affect results in the test for ModelMB.
	  * PUSH/POP's.
	  * Formatting.
	  * Removing explicit array bounds for one argument. For argument
	  'nr'
	  it causes an error I do not understand though, so I am leaving it
	  alone.

2014-07-16 14:45  dstrubbe

	* [r12278] src/td/propagator.F90: g95 says: Error: PRIVATE
	  attribute at (1) is not allowed in a TYPE definition.

2014-07-16 19:25  dstrubbe

	* [r12279] src/math/tdfunction.F90,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test: Reverting r12273
	  which broke the optimal control tests with gfortran, due to an
	  array out of bounds. Alberto, please check.

2014-07-16 19:41  dstrubbe

	* [r12280] testsuite/oct-run_regression_test.pl: Template
	  functionality is removed from the testsuite script. I don't think
	  it adds much value and I suspect no one is using it, since you
	  can just copy from another test.

2014-07-16 19:57  dstrubbe

	* [r12281] src/species/ps_cpi_file.F90, src/species/ps_fhi.F90: *
	  Memory leaks with FHI pseudopotentials: pointers to types were
	  being deallocated, without ending the type first.
	  * Doxygen comments.
	  * Adding and correcting PUSH/POP's.

2014-07-16 20:58  dstrubbe

	* [r12282] src/main/unocc.F90: Memory leak in unocc with spinors:
	  st%spin was allocated and zeroed when it was in fact already
	  allocated.

2014-07-16 20:58  dstrubbe

	* [r12283] src/states/states.F90: Removing routine
	  states_resize_unocc which is no longer used.

2014-07-16 22:17  dstrubbe

	* [r12284] src/main/casida.F90, src/main/casida_inc.F90: Two memory
	  leaks in casida.

2014-07-16 22:18  acastro

	* [r12285] src/math/tdfunction.F90,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test: I put back 12273,
	  now without the out-of-bounds bug.

2014-07-16 23:02  dstrubbe

	* [r12286] src/td/propagator.F90: Memory leak for SPARSKIT
	  propagators: the tdsk object was not deallocated. Also, it was
	  not nullified in the beginning. Made calls to sparskit_solver_end
	  more consolidated too.

2014-07-17 16:20  dstrubbe

	* [r12287] src/grid/hypercube.F90: Fixing PUSH/POP.

2014-07-18 15:21  joseba

	* [r12288] src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/grid/mesh_batch.F90, src/grid/mesh_batch_inc.F90,
	  src/scf/lcao_inc.F90: Added debug calls to MPI_Alltoalls

2014-07-18 16:36  acastro

	* [r12289] src/opt_control/target_density_inc.F90: Eliminated some
	  memory leaks.

2014-07-18 17:13  dstrubbe

	* [r12290] src/grid/derivatives_inc.F90, src/scf/lcao.F90: * Adding
	  module usage, that hopefully will restore compilation on mauchly
	  with intel.
	  * Fixing mismatch MPI debug calls.

2014-07-19 11:42  acastro

	* [r12291] src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_qoct_inc.F90, src/td/propagator_rk_inc.F90,
	  src/td/propagator_vksold_inc.F90, src/td/td.F90: Some
	  re-structuring of the propagators module, to make it a bit more
	  clear.

2014-07-20 15:55  acastro

	* [r12292] src/td/propagator_vksold_inc.F90: Several typos in the
	  push_sb/pop_sub calls.

2014-07-20 18:47  micael

	* [r12293] src/main/static_pol.F90,
	  src/opt_control/propagation.F90, src/states/restart.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/kdotp.F90, src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90:
	  Split restart_cd into two routines: restart_open_dir and
	  restart_close_dir. restart_open_dir returns an error code instead
	  of dying when the subdirectory does not exist.

2014-07-20 19:06  micael

	* [r12294] src/hamiltonian/gauge_field.F90, src/td/td.F90,
	  testsuite/periodic_systems/05-lithium.test: The restart of the
	  gauge field is now handled by the restart module and it is
	  written in binary format, as some numerical differences could be
	  found when restarting from the ascii file. Incidentally I had to
	  slighly change the order of the initialization of the gauge field
	  which seems to have fixed a bug in the calculation of the energy
	  of the first td iteration.

2014-07-21 16:10  dstrubbe

	* [r12295] src/hamiltonian/gauge_field.F90: Correcting POP_SUB.

2014-07-21 16:14  dstrubbe

	* [r12296] src/states/restart.F90, src/sternheimer/phonons_lr.F90:
	  * Bugfix: it should not be an error to fail to read restart
	  response wavefunctions for vib_modes.
	  * restart_open_dir does not need to write a warning if it cannot
	  open the directory, because the calling routines write their own
	  messages.

2014-07-21 17:26  dstrubbe

	* [r12297] src/opt_control/propagation.F90: Unused argument.

2014-07-23 15:58  dstrubbe

	* [r12298] src/main/unocc.F90: unocc now supports OutputInterval.

2014-07-23 16:15  acastro

	* [r12299] src/td/propagator.F90, src/td/propagator_qoct_inc.F90,
	  src/td/propagator_rk_inc.F90, src/td/propagator_vksold_inc.F90:
	  Some subroutines were receiving unallocated pointer arrays
	  (related to
	  the use or not of complex xc potentials), which is probably legal
	  but
	  valgrind complained.

2014-07-23 16:21  dstrubbe

	* [r12300] src/states/restart.F90, src/system/xc_ks_inversion.F90:
	  * More canonical handling of message for functionality not
	  implemented.
	  * Better wording of variable description.
	  * Clarification to subroutine comment.

2014-07-23 16:49  dstrubbe

	* [r12301] src/states/states_calc_inc.F90: * Some explicit type
	  conversions.
	  * One variable 'dd' was real when it ought to be complex.
	  * Formatting.
	  * Doxygen comment.

2014-07-23 16:54  dstrubbe

	* [r12302] src/states/states_calc.F90,
	  src/states/states_calc_inc.F90: * integer was being assigned 1.0
	  instead of 1.
	  * Doxygen comment.
	  * Unused variable.

2014-07-23 17:01  dstrubbe

	* [r12303] src/states/states_calc.F90: The routine
	  'states_degeneracy_matrix' is not used currently. But it was
	  uselessly writing its output to restart, even though it is just
	  output that is not used for restarting.

2014-07-23 17:06  dstrubbe

	* [r12304] src/states/states_calc.F90: Removing useless routine,
	  probably left behind when X(states_rotate) was created.

2014-07-23 19:25  dstrubbe

	* [r12305] external_libs/bpdn/bpdn.f90: Added an interface for
	  expmm.

2014-07-23 19:32  dstrubbe

	* [r12306] src/system/v_ks.F90, src/td/ob_mem.F90,
	  src/td/pes_rc.F90, src/utils/convert.F90: * Unused variables.
	  * Useless variable in pes_rc, presumably added by mistake
	  (r7095).

2014-07-23 20:08  dstrubbe

	* [r12307] src/grid/par_vec.F90: Minor bugfix: with DebugLevel > 1,
	  hypercube would crash on attempt to
	  write mesh_partition via unallocated array.

2014-07-23 20:32  dstrubbe

	* [r12308] src/system/eigen_cg_inc.F90,
	  src/system/eigen_lobpcg_inc.F90,
	  src/system/eigen_rmmdiis_inc.F90, src/system/eigensolver.F90: *
	  Do not write progress bar for eigensolvers in debug mode, because
	  it
	  will be disrupted by debug info being written.
	  * Useless variable.

2014-07-23 20:48  dstrubbe

	* [r12309] src/grid/mesh_init.F90,
	  src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_exchange_syms_inc.F90: * Useless variables.
	  * Typos.
	  * Formatting.

2014-07-23 20:51  dstrubbe

	* [r12310] src/td/propagator_rk_inc.F90: Setting svn:keywords so
	  that $Id$ gets replaced automatically. For
	  future reference the command is:
	  
	  svn propset svn:keywords 'Id' src/td/propagator_rk_inc.F90

2014-07-23 21:19  dstrubbe

	* [r12311] src/states/modelmb_density_matrix_inc.F90: Memory leak
	  for Model MB output in parallel: there was a cycle if not
	  proc 0, which circumvented the deallocations at the bottom of the
	  loop.

2014-07-24 17:20  dstrubbe

	* [r12312] src/states/modelmb_density_matrix.F90,
	  src/system/output_etsf_inc.F90: * Making some variables used for
	  ETSF_IO output only be defined when that is linked, to suppress
	  warnings.
	  * Fixing Doxygen comment.
	  * Formatting.

2014-07-24 17:21  dstrubbe

	* [r12313] src/main/geom_opt.F90, src/math/minimizer.F90: Unused
	  arguments and variables.

2014-07-24 17:45  dstrubbe

	* [r12314] src/math/minimizer.F90, src/system/eigen_lobpcg_inc.F90,
	  src/system/linear_solver_inc.F90: * Useless variable.
	  * Unused arguments.

2014-07-24 17:49  dstrubbe

	* [r12315] src/system/eigen_arpack.F90,
	  src/system/eigen_arpack_inc.F90: * Unused argument.
	  * Unused variables.
	  * Some comments for ARPACK.

2014-07-25 00:59  dstrubbe

	* [r12316] src/system/output_etsf_inc.F90: Bugfix: ETSF_IO output
	  in parallel was prone to occasional failures to open files from
	  NetCDF. This was due to all processes attempting to open and
	  write at the same time, and resulting interference with one
	  another. Now, only processor 0 opens and writes, though some of
	  the routines have to be called from all processors in order for
	  the information to be properly gathered over domains.
	  
	  Sample error:
	  {{{
	  ***
	  *** ETSF I/O ERROR
	  ***
	  *** Backtrace : etsf_io_low_open_modify()
	  *** Action performed : input/output open file for writing
	  *** Target (name) : static//density-etsf.nc
	  *** Target (id) : -1
	  *** Error message : NetCDF: Unknown file format
	  *** Error id : -51
	  ***
	  }}}

2014-07-25 01:13  dstrubbe

	* [r12317] src/system/output.F90, src/system/output_etsf_inc.F90: *
	  Caveats about ETSF_IO output.
	  * Removing duplicated lines from BerkeleyGW routines.

2014-07-25 20:14  dstrubbe

	* [r12318] testsuite/linear_response/01-casida.test: Recentering
	  and tightening tolerances for vib_modes in casida test. I don't
	  think there is a problem anymore.

2014-07-28 18:04  dstrubbe

	* [r12319] testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.test: Adding a test run for
	  Casida restart.

2014-07-28 20:02  dstrubbe

	* [r12320] src/main/casida_inc.F90: Restart from Casida kernel,
	  like from lr_hmat1 files, will state how much was read.

2014-07-28 21:02  dstrubbe

	* [r12321] src/grid/index.F90, src/states/smear.F90: Removing
	  PUSH_SUB's from two functions called too frequently.

2014-07-29 15:47  dstrubbe

	* [r12322] testsuite/fix_testsuite.py: Enhancement to
	  fix_testsuite.py: it now uses the name of a match in finding the
	  appropriate one to replace, making it more robust against (for
	  example) incompleteness in the output file.

2014-07-30 04:20  dstrubbe

	* [r12323] src/states/smear.F90, src/sternheimer/sternheimer.F90:
	  smear%integral_occs was not necessarily initialized, and then was
	  used by Sternheimer to decide whether to perform
	  pre-orthogonalization. With mpich and gcc on my Mac, I found that
	  the test linear_response/05-polarizability.02-sternheimer.inp had
	  a deadlock because one processor was trying to pre-orthogonalize
	  and communicate with the other which didn't call that routine.
	  The solution: add condition for fixed occupations in
	  sternheimer_init, and for good measure, make sure integral_occs
	  is always initialized.

2014-07-30 16:15  dstrubbe

	* [r12324] testsuite/linear_response/Makefile.am: Forgot to add
	  some new files to the Makefile for installation.

2014-07-30 18:53  dstrubbe

	* [r12325] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: * We can do a more useful 'dry
	  run' in the testsuite by not merely showing what the shell script
	  would execute, but actually calling the Perl script too and
	  asking it to do a dry run.
	  * The command line should still be constructed even if mpiexec
	  cannot be found for a parallel test, since it shouldn't be
	  necessary to set that for a dry run.
	  * In case mpiexec is blank, we will just set it to "mpiexec" for
	  reasonable dry-run output.
	  * The log should not be copied in dry-run mode, even if -l option
	  is passed, since there is no log.

2014-07-30 20:43  dstrubbe

	* [r12326] src/td/ob_mem.F90: Bugfix to r12337: reading the
	  open-boundaries memory coefficients for restart did not take into
	  account the possibility that the file would not exist. This led
	  to the code hanging in iopar_read with g95 on my Mac (though not
	  the buildslaves for some reason).

2014-07-31 16:02  dstrubbe

	* [r12327] src/utils/photoelectron_spectrum.F90: Unused module.

2014-07-31 16:14  dstrubbe

	* [r12328] src/utils/convert.F90, src/utils/local_multipoles.F90: *
	  Bugfix to oct-convert: the restart objects were not ended. This
	  would surely cause trouble when using the "subtract file"
	  functionality in which case there would be an attempt to
	  initialize an already active object.
	  * Some FIXME comments on oct-convert and oct-local_multipoles.

2014-07-31 16:29  dstrubbe

	* [r12329] src/main/casida.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/utils/convert.F90: * If mesh and
	  sb optional arguments are not supplied to restart_init, this lack
	  is stored in a variable, and handling mesh functions with that
	  restart object will be blocked, to be sure incompatible meshes
	  will be detected.
	  * oct-convert must supply the mesh and sb arguments since it
	  handles mesh functions.
	  * Casida should not supply the mesh and sb arguments since its
	  restart data is not mesh functions.
	  * Ensuring that sb is only present if mesh is, because it won't
	  be used otherwise.

2014-07-31 16:37  dstrubbe

	* [r12330] src/opt_control/opt_control_global.F90: Avoiding a
	  preprocessor warning about unterminated "

2014-07-31 16:40  dstrubbe

	* [r12331] src/opt_control/target.F90: Typo.

2014-07-31 17:54  dstrubbe

	* [r12332] src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/gcm.F90, src/main/geom_opt.F90, src/main/invert_ks.F90,
	  src/main/phonons_fd.F90, src/main/static_pol.F90,
	  src/main/unocc.F90, src/opt_control/initst.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/scf/ground_state.F90, src/states/restart.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_inc.F90,
	  src/sternheimer/kdotp.F90, src/sternheimer/phonons_lr.F90,
	  src/sternheimer/vdw.F90, src/td/td.F90, src/td/td_write.F90,
	  src/utils/convert.F90, src/utils/local_multipoles.F90: Since a
	  mesh object contains a pointer to sb, and sb should never passed
	  to restart_init without mesh being passed, we can just remove the
	  sb optional argument and use mesh%sb.

2014-07-31 18:43  dstrubbe

	* [r12333] src/system/eigensolver.F90: Useless variable.

2014-08-01 16:20  dstrubbe

	* [r12334] liboct_parser/grammar.y, liboct_parser/symbols.c: Typos.

2014-08-01 17:16  dstrubbe

	* [r12335]
	  testsuite/open_systems/01-wavepacket.01-deriv_order_1.inp,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp,
	  testsuite/open_systems/02-wavepacket_2d.01-full_q.inp: Using the
	  built-in "i" symbol of the parser rather than a self-defined one,
	  for open-boundaries tests.

2014-08-01 19:22  dstrubbe

	* [r12336] testsuite/Makefile.am,
	  testsuite/finite_systems_1d/Makefile.am: * Missing test file
	  (disabled anyway) from Makefile.
	  * Formatting.

2014-08-01 19:26  dstrubbe

	* [r12337] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: * For dry run, testsuite Perl
	  script will just use dummy value "octopus" rather than worry
	  about whether executable are present, serial/parallel, or
	  compiled with needed options.
	  * For dry run, testsuite shell script should write a summary
	  after all. There can indeed be failures if test files contained
	  erroneous constructs, or input files were missing. And the
	  cleanup part should definitely be done.

2014-08-01 19:28  dstrubbe

	* [r12338] testsuite/Makefile.am: * New target 'make check-dryrun'
	  which does the full testsuite with the -n option.
	  * If SKIP_CHECK is set, the tests are not ignored but rather done
	  as a dry-run. The distcheck buildslave will be doing this now,
	  and will detect test input files missing from Makefile.am, which
	  has been a common mistake.
	  * Refactored common lines from 'make check' and 'make
	  check-full'.

2014-08-01 21:12  dstrubbe

	* [r12339] testsuite/oct-run_regression_test.pl: Make the testsuite
	  matches script be executable, like the decommissioned one.

2014-08-04 17:54  dstrubbe

	* [r12340] testsuite/oct-run_regression_test.pl: A message when
	  using the -p option for the testsuite Perl script.

2014-08-04 20:39  dstrubbe

	* [r12341] testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp: Unnecessary settings
	  of RestartWriteInterval to the default, in input files for
	  photoelectron tests.

2014-08-04 21:14  dstrubbe

	* [r12342] src/basic/calc_mode.F90, src/scf/ground_state.F90:
	  Removing extra_states from calc_mode object, which was added in
	  r9046 and never used for anything.

2014-08-05 00:24  dstrubbe

	* [r12343] src/basic/io_binary_f.F90: * Refactoring the mostly
	  common code from the Xread_parallel and Xwrite_parallel routines.
	  * These read routines would crash on checking 'read_count' if
	  they could not open the requested file, rather than simply
	  signaling this to the calling routine via ierr. Now, the status
	  after the attempt to open is checked and the routine does not try
	  to operate on the file if it could not be opened, avoiding the
	  errors.
	  * Added errors if these routines are called without MPI2.
	  * Added interface for get_info_binary, a C function.
	  * Removed numerous unused variables.
	  * Removed useless initialization of 'type' in io_binary_get_info,
	  which is immediately overwritten by the call afterward anyway.

2014-08-05 00:28  dstrubbe

	* [r12344] src/basic/io_binary_f.F90: MPI_Barrier was not hidden in
	  ifdef's in the last commit. But, actually I think it is probably
	  not necessary anyway. It was present previously for most but not
	  all the write_parallel routines (the integer*8 one lacked it) and
	  none of the read ones.

2014-08-05 02:04  dstrubbe

	* [r12345] src/basic/io_binary_f.F90: Fixing compilation failure
	  with pgi and g95: the sizeof must be converted to integer*8
	  explicitly. I am still not sure how portable this code is though:
	  I believe sizeof is supposed to be either integer*4 or integer*8
	  depending on whether the compilation is 32-bit or 64-bit, in
	  which case this should work regardless, but in principle Octopus
	  supports compilers which don't even have sizeof at all, in which
	  case I am not sure what should be done.

2014-08-05 02:08  dstrubbe

	* [r12346] src/basic/io_binary_f.F90: Unneeded variables and
	  arguments.

2014-08-05 15:07  dstrubbe

	* [r12347] src/basic/io.F90, src/basic/utils.F90,
	  src/main/pulpo.F90: * Bugfix to recipe mode: each node printed
	  the recipe independently. Now only root does, making it safe to
	  run the recipe in a massively parallel manner. I changed
	  io_dump_file to only write from root.
	  * Periods.
	  * Bringing pulpo.F90 into line with our coding standards:
	  global.h, implicit none, PUSH/POP, and lower-case identifiers.

2014-08-05 15:13  dstrubbe

	* [r12348] share/recipes/en/cheese_spaetzle.txt,
	  share/recipes/en/octopus_gallega.txt,
	  share/recipes/en/pork_honey.txt,
	  share/recipes/en/sugo_zucchini.txt,
	  share/recipes/es/pulpo_asado.txt: Recipe improvements.

2014-08-05 15:24  dstrubbe

	* [r12349] src/grid/mesh_partition.F90,
	  src/sternheimer/em_resp.F90: Unneeded module usages.

2014-08-05 15:58  dstrubbe

	* [r12350] src/basic/recipes.c: Doubling up single-letter
	  variables.

2014-08-05 21:57  dstrubbe

	* [r12351] src/basic/recipes.c: The random number generation for
	  choosing a recipe was highly flawed. I got the same recipe always
	  on my MacBook. Instead we will use the GSL routines, with seed
	  chosen from /dev/random or the time. Also I added a caveat in
	  case some required C routines are not available.

2014-08-06 09:07  acastro

	* [r12352] testsuite/real_time/19-propagators.01-gs.inp,
	  testsuite/real_time/19-propagators.02-expmid.inp,
	  testsuite/real_time/19-propagators.03-etrs.inp,
	  testsuite/real_time/19-propagators.04-aetrs.inp,
	  testsuite/real_time/19-propagators.05-caetrs.inp,
	  testsuite/real_time/19-propagators.06-cn.inp,
	  testsuite/real_time/19-propagators.07-cnsparskit.inp,
	  testsuite/real_time/19-propagators.08-magnus.inp,
	  testsuite/real_time/19-propagators.09-rungekutta2.inp,
	  testsuite/real_time/19-propagators.10-rungekutta4.inp,
	  testsuite/real_time/19-propagators.test,
	  testsuite/real_time/Makefile.am: Added a test for most
	  propagators (some of them were untested).

2014-08-06 09:17  acastro

	* [r12353] testsuite/real_time/Makefile.am: Wrong file names.

2014-08-06 09:45  joseba

	* [r12354] testsuite/components/17-convert.01-run.inp,
	  testsuite/components/17-convert.02-convert.inp,
	  testsuite/components/17-convert.test,
	  testsuite/components/Makefile.am,
	  testsuite/finite_systems_3d/05-output.02-convert.inp,
	  testsuite/finite_systems_3d/05-output.test,
	  testsuite/finite_systems_3d/Makefile.am: Integrated convert test
	  with the other outputs tests. Updated the values accordingly and
	  deleted the independent tests consequently

2014-08-06 10:11  acastro

	* [r12355] src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_cn_inc.F90, src/td/propagator_etrs_inc.F90,
	  src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus_inc.F90, src/td/propagator_qoct_inc.F90,
	  src/td/propagator_rk_inc.F90, src/td/propagator_vksold_inc.F90:
	  Some cleaning of the propagators module.

2014-08-06 15:57  dstrubbe

	* [r12356] testsuite/finite_systems_3d/05-output.02-convert.inp:
	  Making the coordinates in the convert test the same as the
	  preceding gs run. They are not actually used anyway.

2014-08-06 18:34  dstrubbe

	* [r12357] testsuite/finite_systems_2d/05-spin_precession.test,
	  testsuite/real_time/11-tdmagnetic.test: Malformed $Id$ strings.

2014-08-06 18:39  dstrubbe

	* [r12358] testsuite/components/17-recipe.inp,
	  testsuite/components/17-recipe.test,
	  testsuite/components/Makefile.am: A test for the recipe mode :)

2014-08-06 18:49  dstrubbe

	* [r12359] external_libs/bpdn/expmm.c,
	  external_libs/fortrancl/cl.f90,
	  external_libs/fortrancl/cl_buffer.f90,
	  external_libs/fortrancl/cl_buffer_low.c,
	  external_libs/fortrancl/cl_command_queue.f90,
	  external_libs/fortrancl/cl_command_queue_low.c,
	  external_libs/fortrancl/cl_constants.f90,
	  external_libs/fortrancl/cl_context.f90,
	  external_libs/fortrancl/cl_context_low.c,
	  external_libs/fortrancl/cl_device.f90,
	  external_libs/fortrancl/cl_device_low.c,
	  external_libs/fortrancl/cl_event.f90,
	  external_libs/fortrancl/cl_event_low.c,
	  external_libs/fortrancl/cl_kernel.f90,
	  external_libs/fortrancl/cl_kernel_low.c,
	  external_libs/fortrancl/cl_platform.f90,
	  external_libs/fortrancl/cl_platform_low.c,
	  external_libs/fortrancl/cl_program.f90,
	  external_libs/fortrancl/cl_program_low.c,
	  external_libs/fortrancl/cl_types.f90,
	  external_libs/fortrancl/clamdblas.f90,
	  external_libs/fortrancl/clamdblas_low.c,
	  external_libs/fortrancl/clamdfft.f90,
	  external_libs/fortrancl/clamdfft_low.c,
	  external_libs/fortrancl/utils.c, m4/dune.m4,
	  m4/fc_f2003_c_ptr.m4, m4/fc_sizeof.m4,
	  testsuite/finite_systems_3d/16-scfinlcao.01-std.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.02-alt.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.test: Grepping for
	  '\$Id\$' I found these files lacking the svn:keywords property. I
	  fixed them with "svn propset svn:keywords 'Id'" on each file.

2014-08-06 18:56  dstrubbe

	* [r12360] external_libs/fortrancl/localcl.h,
	  external_libs/fortrancl/string_f.h: More missing keywords
	  settings.

2014-08-06 19:40  dstrubbe

	* [r12361] src/frozen/fio_simul_box.F90, src/hamiltonian/epot.F90,
	  src/ions/simul_box.F90, src/poisson/Makefile.am,
	  src/poisson/poisson.F90, src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_sete.F90, src/system/v_ks.F90: Removing the
	  Poisson SETE solver, which is complicating our maintenance of the
	  rest of the code. The SETE code appears unfinished and is a mess,
	  and is not being tested. The removal includes
	  'complex_boundaries' in simul_box which appears to have been
	  introduced in r7433 purely for SETE.

2014-08-06 20:39  dstrubbe

	* [r12362] src/hamiltonian/epot.F90: Bugfix to r12361: more of a
	  logical condition should have been removed, causing test failure
	  for finite_systems_3d/01-carbon_atom.test.

2014-08-06 20:57  dstrubbe

	* [r12363] src/poisson/poisson.F90: poisson_energy was only used by
	  SETE.

2014-08-06 21:00  dstrubbe

	* [r12364] src/poisson/poisson.F90,
	  src/poisson/poisson_init_direct_inc.F90: Arguments and variables
	  unused without SETE.

2014-08-06 21:01  dstrubbe

	* [r12365] src/opt_control/target_spin_inc.F90, src/scf/rdmft.F90:
	  * Removed explicit array arguments bounds.
	  * Changing INTEGER to integer.
	  * Formatting.
	  * emacs syntax-highlighting block.

2014-08-06 21:04  dstrubbe

	* [r12366] src/opt_control/propagation.F90,
	  src/opt_control/target.F90, src/opt_control/target_spin_inc.F90:
	  Unused arguments.

2014-08-06 21:09  dstrubbe

	* [r12367] COPYING, configure.ac, external_libs/Makefile.am,
	  external_libs/slatec, src/common-rules.make: Removing the SLATEC
	  library, which was only needed for Poisson SETE solver.

2014-08-06 21:18  dstrubbe

	* [r12368] src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian.F90, src/opt_control/propagation.F90:
	  Unused variables and arguments.

2014-08-06 21:25  dstrubbe

	* [r12369] COPYING: Updating license info for spglib, which is BSD
	  not GPL in the newer releases.

2014-08-07 02:36  dstrubbe

	* [r12370] src/grid/partition.F90: * Assertion for a troublesome
	  routine that is causing occasional runtime errors in the
	  testsuite. Possibly this will be triggered.
	  * Passing arrays instead of just first indices to MPI_Allreduce
	  in that routine, which is how we are mostly doing it. Shouldn't
	  make a difference.
	  * Separators.

2014-08-07 10:45  acastro

	* [r12371] src/math/tdfunction.F90,
	  testsuite/real_time/19-propagators.test: o Removed several
	  complex to real conversions in the tdfunction_m module,
	  which is designed to have only-real functions.
	  
	  o Changed a "$Id $" string to "$Id$".

2014-08-07 15:22  dstrubbe

	* [r12372]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp: Removed some
	  unnecessary tags from input files for complex scaling.

2014-08-07 15:23  dstrubbe

	* [r12373] src/math/tdfunction.F90, src/system/output_etsf_inc.F90:
	  * Unterminated apostrophe warning.
	  * Explicit conversion to int.

2014-08-07 15:53  dstrubbe

	* [r12374] src/grid/mesh_function_inc.F90: Unnecessary code
	  duplication for complex-scaling in mf_multipoles.

2014-08-07 18:21  dstrubbe

	* [r12375] src/opt_control/target_density_inc.F90: Bugfix: an
	  assignment was being made to uninitialized indices ip and ist.

2014-08-07 18:28  dstrubbe

	* [r12376] src/poisson/poisson.F90, src/system/system.F90,
	  src/system/v_ks.F90: Removing geometry from poisson_init, which
	  was only needed for SETE.

2014-08-07 18:35  dstrubbe

	* [r12377] src/grid/mesh_function_inc.F90,
	  src/utils/local_write.F90: * Unnecessary code duplication for
	  mf_local_multipoles. Please do not copy code; there is almost
	  always a better way.
	  * Unused argument 'domains'.

2014-08-07 18:52  acastro

	* [r12378] testsuite/real_time/01-etrs.01-gs.inp,
	  testsuite/real_time/01-etrs.02-td.inp,
	  testsuite/real_time/01-etrs.03-td_lanczos.inp,
	  testsuite/real_time/01-etrs.test,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-cnsparskit.inp,
	  testsuite/real_time/01-propagators.08-magnus.inp,
	  testsuite/real_time/01-propagators.09-rungekutta2.inp,
	  testsuite/real_time/01-propagators.10-rungekutta4.inp,
	  testsuite/real_time/01-propagators.test,
	  testsuite/real_time/02-aetrs.01-gs.inp,
	  testsuite/real_time/02-aetrs.02-td.inp,
	  testsuite/real_time/02-aetrs.03-td_lanczos.inp,
	  testsuite/real_time/02-aetrs.04-kick.inp,
	  testsuite/real_time/02-aetrs.05-spectrum.inp,
	  testsuite/real_time/02-aetrs.test,
	  testsuite/real_time/19-propagators.01-gs.inp,
	  testsuite/real_time/19-propagators.02-expmid.inp,
	  testsuite/real_time/19-propagators.03-etrs.inp,
	  testsuite/real_time/19-propagators.04-aetrs.inp,
	  testsuite/real_time/19-propagators.05-caetrs.inp,
	  testsuite/real_time/19-propagators.06-cn.inp,
	  testsuite/real_time/19-propagators.07-cnsparskit.inp,
	  testsuite/real_time/19-propagators.08-magnus.inp,
	  testsuite/real_time/19-propagators.09-rungekutta2.inp,
	  testsuite/real_time/19-propagators.10-rungekutta4.inp,
	  testsuite/real_time/19-propagators.test,
	  testsuite/real_time/Makefile.am: Removed 01-etrs.test and
	  02-aetrs.test, and renamed 19-propagators.test to
	  01-propagators.test.

2014-08-07 19:05  dstrubbe

	* [r12379] src/hamiltonian/species_pot.F90: Bugfix: orbitals for
	  non-atomic species in 3D were computed using an uninitialized
	  variable r2. Fortunately the affected routine was only used for
	  LCAO alternative.

2014-08-07 19:43  dstrubbe

	* [r12380] src/basic/io_binary_f.F90: Fortran interface for C
	  routine write_header.

2014-08-07 21:13  dstrubbe

	* [r12381] src/hamiltonian/species_pot.F90: More consolidated
	  approach for initialization of non-atomic species orbitals,
	  rather than all these select case statements which led to the bug
	  in r12379.

2014-08-07 21:24  dstrubbe

	* [r12382] src/hamiltonian/species_pot.F90: Bugfix to r12379: wrong
	  loop was being cycled. This caused a GSL interpolation runtime
	  error in 28-carbon_big_box.test.

2014-08-07 22:19  acastro

	* [r12383] testsuite/real_time/01-propagators.07-cnsparskit.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-magnus.inp,
	  testsuite/real_time/01-propagators.09-rungekutta2.inp,
	  testsuite/real_time/01-propagators.10-rungekutta4.inp,
	  testsuite/real_time/01-propagators.test,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/02-propagators.test,
	  testsuite/real_time/Makefile.am: Separated, in
	  01-propagators.test, the propagators that need sparskit from the
	  ones that don't.

2014-08-08 07:48  acastro

	* [r12384] testsuite/real_time/03-exp_mid.01-gs.inp,
	  testsuite/real_time/03-exp_mid.02-td.inp,
	  testsuite/real_time/03-exp_mid.test,
	  testsuite/real_time/04-etrs_single.01-gs.inp,
	  testsuite/real_time/04-etrs_single.02-td.inp,
	  testsuite/real_time/Makefile.am: Added a couple of files that
	  where missing, and removed one redundant test.

2014-08-08 16:40  acastro

	* [r12385] src/td/propagator_rk_inc.F90,
	  testsuite/real_time/04-etrs_single.test: o The 04-etrs_single
	  test was trying to use deleted files.
	  
	  o Bug fix in the RK2 method. It was only caught by two of the
	  slaves.

2014-08-09 07:47  acastro

	* [r12386] src/td/propagator.F90, src/td/propagator_etrs_inc.F90:
	  The caetrs propagator required some specific exception that
	  complicated the
	  code a little bit.

2014-08-11 18:58  dstrubbe

	* [r12387] src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/gcm.F90, src/main/geom_opt.F90, src/main/invert_ks.F90,
	  src/main/phonons_fd.F90, src/main/static_pol.F90,
	  src/main/unocc.F90, src/opt_control/initst.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/scf/ground_state.F90, src/states/restart.F90,
	  src/states/states.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/vdw.F90,
	  src/td/ob_mem.F90, src/td/td.F90, src/td/td_write.F90,
	  src/utils/convert.F90, src/utils/local_multipoles.F90: In some
	  cases, if a restart directory was missing, this would not be
	  caught and would result in an assertion failure (.not.
	  restart%skip) in restart_open via states_look_and_load. Now,
	  restart_init returns an error code, so the code can refrain from
	  trying to load data, and a reasonable error message can be
	  provided if the restart data is required. An error code is
	  returned for mesh mismatch too. Currently there are no error
	  conditions for RESTART_DUMP, only for RESTART_LOAD.

2014-08-12 13:37  joseba

	* [r12388] src/grid/mesh_init.F90: Corrected a typo in a inp
	  variable

2014-08-12 14:17  joseba

	* [r12389] src/grid/mesh_init.F90, src/grid/mesh_partition.F90: For
	  mesh_partition_dump, the error treatment is done in the highest
	  level, so:
	  - I created a more informative output in mesh_init
	  - I deleted intermediate unused warnings from mesh_partition

2014-08-12 14:34  joseba

	* [r12390] src/grid/mesh_init.F90, src/grid/mesh_partition.F90:
	  Continuation of the previous commit. Now, with mesh_load.

2014-08-12 15:53  dstrubbe

	* [r12391] src/basic/io_binary_f.F90: Removing unnecessary
	  variables from io_binary routines.

2014-08-12 16:11  dstrubbe

	* [r12392] src/basic/Makefile.am, src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90, src/include/complex.F90,
	  src/include/integer.F90, src/include/real.F90,
	  src/include/undef.F90: Templating some of the io_binary_f
	  routines, with the aid of new defined macros for
	  real/complex/integer.

2014-08-12 18:28  dstrubbe

	* [r12393] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Templating write_parallel
	  routines, and trying to comment out PUSH/POP's better so they do
	  not break compilation when long lines are not accepted.

2014-08-12 18:36  dstrubbe

	* [r12394] src/basic/io_binary_f_inc.F90, src/include/complex.F90,
	  src/include/integer.F90, src/include/real.F90,
	  src/include/undef.F90: io_binary does not need its own MPI type
	  macro. Using our usual R_MPITYPE works fine. MPI_REAL8 and
	  MPI_DOUBLE_PRECISION appear equivalent for our purposes.

2014-08-12 18:59  dstrubbe

	* [r12395] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Removing unnecessary
	  initializations of 'ierr' in io_binary routines. It is being
	  passed to routines that set it always and do not use any value
	  input.

2014-08-12 19:18  dstrubbe

	* [r12396] src/basic/io_binary.c, src/basic/io_binary_f_inc.F90:
	  Assertions in io_binary that do not depend on the type can be
	  moved to the underlying C routines to reduce duplication.

2014-08-12 20:27  dstrubbe

	* [r12397] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: * Templating Xread_binary and
	  Xread_parallel routines, with helper subroutines to handle the
	  case of reading real into complex.
	  * zread_binary will give the debug message when real is found,
	  like zread_parallel.
	  * Removing assertions from non-templated io_binary routines that
	  are now in C.

2014-08-12 20:51  dstrubbe

	* [r12398] src/basic/io_binary_f.F90: * Removing unused io_binary
	  interfaces and routines (for s, c, l types that are never used in
	  the code).
	  * Adding io_binary interfaces for some new routines that we have
	  from templating now, but did not before.

2014-08-13 04:11  dstrubbe

	* [r12399] src/basic/Makefile.am: Adding io_binary_f_inc.F90 to
	  Makefile properly.

2014-08-14 13:03  dstrubbe

	* [r12400] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Using macro with known size
	  instead of sizeof, since sizeof is not required to be available
	  from Fortran.

2014-08-14 13:08  dstrubbe

	* [r12401] src/basic/io_binary_f_inc.F90: The same check used in
	  X(write_parallel) for MPI I/O can be used for X(read_parallel)
	  too, to further ensure the integrity of the restart files.

2014-08-14 13:24  dstrubbe

	* [r12402] src/basic/io_binary_f.F90: Removing comments no longer
	  needed.

2014-08-19 18:17  dstrubbe

	* [r12403] src/grid/io_function_inc.F90: Using more conventional
	  line continuations and indentation.

2014-08-19 18:50  dstrubbe

	* [r12404] src/basic/io_csv_f.F90, src/grid/io_function_inc.F90:
	  Removing confusing and unhelpful variants of the read_csv
	  routine. Only dread_csv is actually implemented, so it is a bad
	  idea to have non-functional other variants ("some ugly stub
	  functions just to satisfy the linker"), and wrapped into an
	  interface. This was added in r6862, presumably by false analogy
	  to the io_binary routines. The only place such a routine is used
	  now gives an error if it is attempted for other than real
	  numbers.

2014-08-19 18:54  dstrubbe

	* [r12405] src/basic/io_csv.c, src/basic/io_csv_f.F90,
	  src/species/species.F90, src/states/states_restart.F90: * io_csv
	  routines should always set ierr.
	  * io_csv Fortran wrappers should not set ierr.
	  * Unnecessary temporary variable in dcsv_read.
	  * Some documentation on species_from_file and UserDefinedStates.

2014-08-20 11:03  umberto

	* [r12406] src/hamiltonian/hamiltonian.F90: Pseudopotential phases
	  are required also when a uniform vector potential is applied.
	  This should fix a bug (introduced in r12124) when using
	  "TDExternalFields" with "vector_potential".

2014-08-20 11:10  umberto

	* [r12407] testsuite/oct-run_regression_test.pl: Added support for
	  IBM parallel environment in the testsuite.

2014-08-20 14:27  joseba

	* [r12408] src/basic/io_binary_f_inc.F90: Renamed a variable

2014-08-20 19:05  acastro

	* [r12409] src/opt_control/check_input_inc.F90,
	  src/td/propagator.F90, src/td/propagator_rk_inc.F90,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/01-propagators.test,
	  testsuite/real_time/Makefile.am: Added the "usual" explicit RK4
	  propagator.

2014-08-20 19:54  acastro

	* [r12410] testsuite/real_time/01-propagators.test: Removed some
	  number 2 that I added accidentally in the last commit.

2014-08-22 19:12  acastro

	* [r12411] src/td/propagator.F90, src/td/propagator_rk_inc.F90:
	  Added the ionic movement to the explicit RK4 propagator. The
	  movement of the
	  ions is also handled with the RK4 scheme, instead of with the
	  velocity-verlet,
	  in order to preserve fourth order accuracy.

2014-08-23 15:03  xavier

	* [r12412] src/grid/batch_ops_inc.F90,
	  src/system/linear_solver_inc.F90: Medium change: Replaced use of
	  individual scal operations for
	  batch_scal.

2014-08-23 15:55  xavier

	* [r12413] src/system/linear_solver_inc.F90: Medium change: batch
	  calls for nrm2.

2014-08-23 23:54  xavier

	* [r12414] src/grid/batch_ops_inc.F90,
	  src/system/linear_solver_inc.F90: Medium change: More operations
	  converted to batch versions in the
	  linear solver.

2014-08-24 16:01  xavier

	* [r12415] src/system/linear_solver_inc.F90: Medium change:
	  Batch_get_state/set_state is used to store the states
	  in case of exceptions.

2014-08-24 18:19  xavier

	* [r12416] src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/system/linear_solver_inc.F90: Medium change: Fixes a problem
	  with batch indexes that was making a
	  test fail after my previous commit.

2014-08-24 18:44  xavier

	* [r12417] src/system/linear_solver_inc.F90: Medium change: More
	  operations in the linear solver converted to batch
	  format.

2014-08-24 21:58  xavier

	* [r12418] src/grid/batch_ops_inc.F90,
	  src/system/linear_solver_inc.F90: Medium change: More operations
	  in the linear solver converted to batch
	  format.

2014-08-24 22:34  xavier

	* [r12419] src/sternheimer/sternheimer_inc.F90: Nedium change: Now
	  the linear solver receives packed batches from Sterheimer.

2014-08-25 13:27  umberto

	* [r12420] src/basic/io_binary.c, src/basic/io_binary_f_inc.F90,
	  src/grid/io_function.F90, src/grid/io_function_inc.F90: Simple
	  output in VTK legacy format. This is mainly intended for
	  visualization with Paraview.
	  For the moment only for real quantities. For some reason the
	  center of the coordinates is offset.

2014-08-25 16:23  umberto

	* [r12421] src/td/pes_mask_out_inc.F90: Reverted changes introduced
	  in r12205 where an alleged writing race-condition was fixed.
	  It introduced instead a bug preventing the correct writing of
	  restart files with parallelization over states was employed.

2014-08-25 17:47  xavier

	* [r12422] src/sternheimer/sternheimer_inc.F90: Small change:
	  Solving the linear equation in packed form apparently
	  causes problems for OpenCL and MPI runs. So I am reverting this
	  change
	  until I solve the problem.

2014-08-26 07:38  xavier

	* [r12423] src/grid/batch_ops_inc.F90: Small change: Bugfix in the
	  OpenCL implementation of batch_axpy_const.

2014-08-26 08:20  xavier

	* [r12424] share/opencl/mesh_batch.cl: Small change: The restrict
	  qualifier was missing from some pointer arguments.

2014-08-26 09:54  joseba

	* [r12425] src/utils/convert.F90: Enabled to be run convert with
	  MPI parallelisation

2014-08-26 12:03  joseba

	* [r12426] src/utils/convert.F90: Added a tool to create the
	  Fourier transform of various densities

2014-08-26 14:25  xavier

	* [r12427] share/opencl/axpy.cl, src/grid/batch_ops_inc.F90: Small
	  change: Bugfix in OpenCL axpy for real values.

2014-08-26 14:34  joseba

	* [r12428] src/basic/io_binary_f_inc.F90,
	  src/grid/io_function_inc.F90: Corrected Doxygen comments

2014-08-26 17:01  umberto

	* [r12429] src/grid/io_function_inc.F90: Fixed VTK origin.

2014-08-26 17:07  umberto

	* [r12430] src/basic/unit_system.F90: Fix units of mass in atomic
	  units.

2014-08-26 17:10  umberto

	* [r12431] src/basic/getopt_f.c, src/grid/io_function.F90,
	  src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: oct-photoelectron spectrum
	  utility now can save data in vtk format.

2014-08-27 02:33  xavier

	* [r12432] share/opencl/mesh_batch.cl, src/grid/mesh_batch_inc.F90:
	  Medium change: Improved OpenCL parallelization of nrm2.

2014-08-27 02:51  xavier

	* [r12433] src/system/linear_solver.F90,
	  src/system/linear_solver_inc.F90: Small change: Profiling region
	  for the batch linear solver.

2014-08-27 13:55  joseba

	* [r12434] src/math/metis.F90: Added the Fortran mode for emacs

2014-08-27 14:01  umberto

	* [r12435] src/basic/unit_system.F90: Reverted back mass form
	  atomic units to atomic mass units + comment.

2014-08-27 14:24  umberto

	* [r12436] src/basic/unit_system.F90: Removed double comment
	  (already present at the beginning of the file). No reason to
	  comment twice.

2014-08-27 14:40  xavier

	* [r12437] src/grid/mesh_batch_inc.F90: Small change: Fixed
	  non-OpenCL compilation.

2014-08-27 16:11  alejandro

	* [r12438] src/main/geom_opt.F90, src/math/minimizer.F90: A small
	  bug fix on the FIRE algorithm, and on the writing of the
	  optimization.log file.

2014-08-27 16:43  umberto

	* [r12439] src/basic/unit_system.F90, src/species/species.F90: Set
	  atomic mass units as particular unit to read atoms masses. This
	  way the in/out mass factors are consistent with atomic units.

2014-08-27 16:48  umberto

	* [r12440] src/td/pes_mask_out_inc.F90: Reverted to
	  sqrt(units_out%energy) for momentum units.

2014-08-27 23:41  xavier

	* [r12441] src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90: Medium change: The
	  application of the perturbation is done using the
	  batch version of pert_apply.

2014-08-28 00:47  xavier

	* [r12442] src/sternheimer/sternheimer_inc.F90: Medium change:
	  Another operation done in batch mode.

2014-08-28 10:36  umberto

	* [r12443] src/grid/io_function.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Better
	  oct-photoelectron-spectrum spectrum output and messages.

2014-08-28 11:08  umberto

	* [r12444] src/basic/io_binary_f_inc.F90: Use optional_default.

2014-08-28 12:31  umberto

	* [r12445] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Machine independent logical to
	  integer conversion.

2014-08-29 18:01  acastro

	* [r12446] src/opt_control/propagation.F90, src/td/propagator.F90,
	  src/td/propagator_rk_inc.F90: Added the propagation of the OCT
	  co-state to the explicit RK4 propagator.

2014-08-29 18:59  acastro

	* [r12447] src/opt_control/Makefile.am,
	  src/opt_control/opt_control_state.F90, src/states/Makefile.am,
	  src/states/opt_control_state.F90: Moved the location of a file to
	  avoid the problem with the compilation
	  triggered by my previous commit.

2014-08-29 22:16  dstrubbe

	* [r12448] src/grid/io_function_inc.F90: * Fixing PUSH_SUB with
	  wrong name from r12420.
	  * ASSERT(present(geo)) in io_function_output_global is to be sure
	  that geo is not used when it isn't present. Since VTK does not
	  use geo, it doesn't need the assertion; since OpenSCAD does use
	  geo, it should have the assertion.

2014-09-01 06:53  umberto

	* [r12449] src/grid/io_function_inc.F90: See if this fixes obscure
	  compilation error on chum_pgi.

2014-09-01 10:38  umberto

	* [r12450] src/grid/io_function_inc.F90,
	  src/td/pes_mask_out_inc.F90: Second attempt at fixing pgi
	  compilation on chum.

2014-09-01 11:41  umberto

	* [r12451] src/grid/io_function_inc.F90: Third (and hopefully last)
	  attempt.

2014-09-02 08:32  joseba

	* [r12452] src/basic/parser.F90: Doxygen comments

2014-09-02 08:47  joseba

	* [r12453] src/states/restart_inc.F90, src/utils/convert.F90:
	  Deleting an assert that is no longer needed.
	  Renaming of various input parameters of convert utility.
	  Restarts are not initiliazed with the mesh, there is no need for
	  that.
	  The subtract utility is working back again.

2014-09-02 09:57  joseba

	* [r12454] src/utils/convert.F90: Delete the 'obf' extension if
	  present in the subtract file.

2014-09-02 13:03  jjornet

	* [r12455] src/grid/mesh_function_inc.F90: Added missing mask
	  argument.

2014-09-02 13:15  jjornet

	* [r12456] src/utils/local_multipoles.F90: - Use more standard
	  routines instead of write statements.
	  - Some format changes
	  - Use species_get_density routine in add_dens subroutine.
	  - Deleted useless parts.

2014-09-02 13:18  jjornet

	* [r12457] src/utils/local_multipoles.F90: - Fixed typo in TODO
	  comment.

2014-09-02 14:09  jjornet

	* [r12458] src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: - Added functionalities to get the
	  densities and potentials from local domains.

2014-09-02 15:04  jjornet

	* [r12459] src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: - Write restart information using
	  drestart_write_mesh_function.
	  - Local write enables to output local energies.

2014-09-02 20:09  xavier

	* [r12460] src/system/pert_inc.F90: Medium change: Batch
	  implementation of pert_apply for electric fields.

2014-09-02 20:35  xavier

	* [r12461] src/sternheimer/sternheimer_inc.F90: Small change: There
	  is no need to set the orbitals to zero before
	  applying the perturbation.

2014-09-02 21:33  xavier

	* [r12462] src/grid/mesh_batch.F90, src/grid/mesh_batch_inc.F90:
	  Small change: Renamed a function and added a comment to make the
	  code
	  clearer.

2014-09-03 08:59  umberto

	* [r12463] src/basic/unit_system.F90: Changed the mass factor for
	  eV/A units according to David suggestion from eV/C^2 (ok for
	  high-energy physics) to the more appropriate hbar^2/(eV*A^2)
	  (consistent with eV/A).

2014-09-03 09:23  umberto

	* [r12464] src/basic/unit_system.F90: Consistent formula
	  abbreviations.

2014-09-03 15:41  dstrubbe

	* [r12465] src/basic/unit_system.F90: Correction to unit name.

2014-09-03 18:50  dstrubbe

	* [r12466] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Suppressing some warnings from
	  io_binary routines: only MPI2 routines themselves need be in the
	  ifdef's. Fixing an intent. Making intent(out) variables be always
	  set.

2014-09-03 19:13  dstrubbe

	* [r12467] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90, src/grid/partition.F90: Removing
	  interface that was used only for a single call, and resolved the
	  different routines through an unused argument, which is ugly.

2014-09-03 20:18  dstrubbe

	* [r12468] src/basic/multicomm.F90: Clarifying message.

2014-09-03 20:47  xavier

	* [r12469] src/basic/comm_inc.F90: Small change: Fix the bug that
	  was causing a deadlock in some MPI
	  buildbots. The issue seems to be some weird interaction between
	  MPI
	  and the compiler that we don't understand very well. It is fixed
	  by
	  passing the full array to MPI instead of the first element.

2014-09-03 20:53  dstrubbe

	* [r12470] src/main/run.F90: Avoid possible error about use of
	  non-associated pointer in recipe mode.

2014-09-04 00:25  xavier

	* [r12471] m4/arch.m4: Small change: Added detection of FMA3
	  instructions to the configure
	  script.

2014-09-04 01:01  xavier

	* [r12472] m4/arch.m4, src/include/vectors.h: Medium change:
	  Support for fma3 instructions.

2014-09-04 13:06  jjornet

	* [r12473] src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: - Print header and date in
	  local_multipoles utility.
	  - Forall statements changed to a conventional do loop.

2014-09-04 15:28  dstrubbe

	* [r12474] src/basic/unit.F90, src/basic/unit_system.F90: *
	  Lengthening string for units abbreviation, given recent
	  lengthening of some.
	  * Doxygen comment.

2014-09-04 15:46  dstrubbe

	* [r12475] src/hamiltonian/species_pot.F90,
	  src/system/linear_solver_inc.F90: Unused variables.

2014-09-04 16:10  dstrubbe

	* [r12476] external_libs/spglib-1.5.2/src/hall_symbol.c,
	  external_libs/spglib-1.5.2/src/kpoint.c,
	  external_libs/spglib-1.5.2/src/mathfunc.h,
	  external_libs/spglib-1.5.2/src/primitive.c,
	  external_libs/spglib-1.5.2/src/spglib.h: I think this fixes the
	  warnings about incompatibilities between const and non-const
	  pointers from spglib. If the buildslaves all like it, I'll submit
	  it to the author of spglib.

2014-09-04 16:52  xavier

	* [r12477] m4/arch.m4: Small change: Changed the check for FMA3 to
	  the AVX instruction
	  version, to see if this fixes the problem with a buildbot.

2014-09-04 17:03  dstrubbe

	* [r12478] external_libs/spglib-1.5.2/src/hall_symbol.c,
	  external_libs/spglib-1.5.2/src/kpoint.c,
	  external_libs/spglib-1.5.2/src/mathfunc.h,
	  external_libs/spglib-1.5.2/src/primitive.c,
	  external_libs/spglib-1.5.2/src/spglib.h: Reverting r12476: it
	  does not fix the warnings about const and non-const pointers in
	  spglib. It does not seem possible to use const pointers where
	  SPGCONST appears: http://c-faq.com/ansi/constmismatch.html.

2014-09-04 17:21  dstrubbe

	* [r12479] src/ions/spglib_f.c: We should not use const double [][]
	  for passing to spglib routines, since they do not use that type
	  due to its problematic nature in C.

2014-09-04 21:48  dstrubbe

	* [r12480] testsuite/periodic_systems/04-silicon.test: Changing a
	  test to the long run, since the valgrind builder cannot finish it
	  and always times out.

2014-09-04 22:16  dstrubbe

	* [r12481] testsuite/real_time/11-tdmagnetic.03-td.inp: Making a td
	  test use an unoccupied state, since it has it ready from a
	  previous unocc run, and I am not sure we have a test like that
	  yet. We need to set par_domains since TDOutput = td_occup +
	  populations is not compatible with par_states.

2014-09-04 22:25  dstrubbe

	* [r12482] src/states/states_calc_inc.F90,
	  src/states/states_restart.F90: * Caveat about incompatibility of
	  states_look_and_load with states parallelization.
	  * Doxygen comment.

2014-09-06 09:12  jjornet

	* [r12483] src/utils/local_multipoles.F90: Â· Changed forall
	  statement.

2014-09-08 14:08  joseba

	* [r12484] src/basic/string.F90, src/utils/convert.F90: Added an
	  auxiliary string function

2014-09-08 14:28  joseba

	* [r12485] src/scf/scf.F90, src/system/output.F90,
	  src/td/td_write.F90: Moved the variable "OutputDir" to output.F90
	  file. Thus, this variable is evaluated only once, decreasing also
	  the attempts to create the directory to one.
	  Changed the default value to "output".
	  Both TD and GS output is done in this folder.

2014-09-08 16:20  dstrubbe

	* [r12486] src/basic/io.F90: Error messages about opening files can
	  write with messages_fatal rather than to stderr and then
	  separately writing 'io_open' with messages_fatal. Also, let's
	  give the error code.

2014-09-09 09:32  joseba

	* [r12487] src/system/output.F90,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/open_systems/01-wavepacket.test,
	  testsuite/open_systems/02-wavepacket_2d.test,
	  testsuite/open_systems/04-propagate_eigenstate.test: Corrected
	  test error. Output directory is not a tmp directory. Changed the
	  test accordingly.
	  Improved the variable documentation of "OutputDir"

2014-09-09 12:27  joseba

	* [r12488] src/utils/convert.F90: Small correction of a variable

2014-09-10 15:07  joseba

	* [r12489] src/utils/convert.F90: Corrected the convert transform
	  functionality
	  Added the possibility to output to any format the result of the
	  convert transform
	  Deleted unused variables

2014-09-10 15:16  dstrubbe

	* [r12490] src/states/states_io.F90: Write the actual k-point index
	  (not the one including spin) for periodic spin-polarized systems.

2014-09-10 16:50  dstrubbe

	* [r12491] src/states/smear.F90,
	  testsuite/finite_systems_3d/03-magnetic.test,
	  testsuite/linear_response/05-polarizability.test,
	  testsuite/periodic_systems/12-boron_nitride.test: * Bugfix: the
	  reported entropy and -TS were minus the appropriate values (for
	  smearing, though fixed occupations were correct), and hence the
	  free energy was wrong. Thanks for Chen Huang for this bug report.
	  This bug is a collaboration between me and Miguel: in r4231 he
	  implemented entropy, but was labeled 'entropy' was in fact -S,
	  and used in place of -TS. I added the factor of T and did not
	  notice that the 'entropy' was -S not S. Now, smear_calc_entropy
	  indeed returns S as one would expect.
	  * Added more testsuite matches for free energy and entropy.
	  * There were no tests for the Fermi energy!

2014-09-10 19:35  dstrubbe

	* [r12492] src/species/Makefile.am, src/species/atomic.F90,
	  src/species/periodic_table.F90: Removing unused periodic table.
	  It was added in r2526, and include with 'use' in r2550, but still
	  never actually used in the code.

2014-09-11 15:02  dstrubbe

	* [r12493] src/states/density.F90, src/states/smear.F90,
	  src/states/states.F90, src/utils/convert.F90,
	  src/utils/local_multipoles.F90: Unused arguments and variables.

2014-09-11 20:26  dstrubbe

	* [r12494] testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.test: The silicon
	  force test is quite lengthy, and is making the valgrind
	  builder time out. I think 1 SCF iteration should be enough to
	  test the
	  force calculation properly, and greatly shorten the test time.

2014-09-15 07:34  joseba

	* [r12495] src/basic/datasets.F90, src/scf/scf.F90,
	  src/system/output.F90, src/td/td_write.F90,
	  src/utils/convert.F90,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/open_systems/01-wavepacket.test,
	  testsuite/open_systems/02-wavepacket_2d.test,
	  testsuite/open_systems/04-propagate_eigenstate.test: Encapsulated
	  output directory into the output object. Removed public
	  "outputdir" variable.
	  Changed the default value of the variable to "OutputIterDir" and
	  the default value to "output_iter".
	  Changed the tests, because of this new folder.
	  Small improvements in the documentations.

2014-09-15 12:04  adelgado

	* [r12496] src/td/td_write.F90: * 'td/td_write': 'subroutine
	  td_write_energy' now prints the electrostatic molecule-solvent
	  interaction energy at each time step in the td energy file.

2014-09-16 13:23  joseba

	* [r12497] src/states/restart_inc.F90, src/utils/convert.F90:
	  Reverted the assert I deleted in r12453
	  Therefore, in convert utility the restart is initialized with the
	  mesh and, now, only once.

2014-09-18 01:31  dstrubbe

	* [r12498] testsuite/real_time/13-absorption-spin.test: Moving a
	  test with many steps to long-run, because it is timing out the
	  valgrind builder.

2014-09-26 17:29  dstrubbe

	* [r12499] src/hamiltonian/kick.F90, src/math/math.F90,
	  src/poisson/poisson_corrections.F90, src/species/species.F90,
	  src/td/td_write.F90: The routine grylmr now computes the gradient
	  of the Ylm only if grylm is provided as an optional argument.
	  Only one of the several places the routines is called is actually
	  trying to use that output.

2014-09-26 18:22  dstrubbe

	* [r12500] src/math/math.F90, src/math/math_inc.F90: Some
	  formatting, and removing explict array bounds for module
	  procedure.

2014-09-26 18:25  dstrubbe

	* [r12501] src/math/math.F90: * Correction to previous commit: the
	  lower bound of the array arguments must still be specified.
	  * Proper punctuation.

2014-09-26 19:00  dstrubbe

	* [r12502] testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test: More
	  testing of dipole moment in periodic systems.

2014-09-26 19:03  dstrubbe

	* [r12503] src/hamiltonian/berry.F90: Refactored the construction
	  of the matrix from the evaluation of the determinant for the
	  Berry phase dipole moment, for later use in another context.

2014-09-26 19:49  dstrubbe

	* [r12504] m4/arch.m4: Disabling check for FMA3 since it is not
	  working correctly.

2014-09-26 19:55  dstrubbe

	* [r12505] src/math/math.F90: Clarifying documentation on ylm
	  routines.

2014-09-26 20:38  dstrubbe

	* [r12506] src/hamiltonian/epot.F90: Caveats about magnetic fields
	  and periodic systems.

2014-09-26 20:53  dstrubbe

	* [r12507] src/hamiltonian/epot.F90: Correction to previous commit:
	  logic and documentation for 3D, 1D-periodic case was backwards.

2014-09-26 21:00  dstrubbe

	* [r12508] src/hamiltonian/species_pot.F90: * Bugfix:
	  Hermite-polynomial orbitals in a periodic system were not
	  correct, because they ignored the loop over periodic copies. For
	  example, for full-potential H, the LCAO eigenvalue was very
	  different if the atom was placed in the center or edge of the
	  box; now it is the same.
	  * Moved repeated identical pointing, allocation, nullification,
	  and deallocation outside a loop, to improve performance.

2014-09-26 21:11  dstrubbe

	* [r12509] src/hamiltonian/species_pot.F90: * Bugfix:
	  Hermite-polynomial orbitals for LCAOAlternative in a periodic
	  system were not correct, because they ignored the loop over
	  periodic copies.
	  * Comment on derivative for Hermite polynomials.

2014-09-26 21:45  dstrubbe

	* [r12510] src/grid/grid.F90, src/species/species.F90:
	  Clarifications about default Spacing.

2014-09-27 17:47  dstrubbe

	* [r12511] src/ions/solids.F90: Fix to enable use of periodic copy
	  routines in fewer than 3D, at least in some cases (now happening
	  after r12508).

2014-09-27 17:50  dstrubbe

	* [r12512] src/system/output.F90: Reclassifying variable
	  CurrentThroughPlane as Output not States.

2014-09-27 22:51  dstrubbe

	* [r12513] testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.test: Tests for xyz and xsf
	  output in periodic systems.

2014-09-28 14:43  dstrubbe

	* [r12514] src/hamiltonian/berry.F90: Fixing PUSH_SUB.

2014-10-01 22:39  dstrubbe

	* [r12515] src/system/xc_ks_inversion.F90: Commenting out lines
	  which appear to be debugging output which was temporary but
	  forgotten.

2014-10-01 22:48  dstrubbe

	* [r12516] src/system/output.F90: Bugfix: error messages for
	  CurrentThroughPlane are sent to unit 1, whatever that may be,
	  rather than written to message(1) as appropriate for the
	  following call to messages_fatal(1).

2014-10-01 22:51  dstrubbe

	* [r12517] src/system/output.F90: Making variable OutputInterval
	  refer to OutputIterDir.

2014-10-01 23:14  dstrubbe

	* [r12518] src/system/output.F90, src/system/output_states_inc.F90:
	  * Bugfix: the directory to contain the file 'current-flow' from
	  CurrentThroughPlane was not created beforehand, so the code would
	  crash at that point if it did not already exist.
	  * Clarifications to documentation on CurrentThroughPlane.
	  * Adding CurrentThroughPlane as one of the kinds of output that
	  does not require OutputHow to be set.

2014-10-02 17:14  dstrubbe

	* [r12519] share/util/oct-atomic_occupations,
	  share/util/oct-run_periodic_table: Correcting 'specie' to
	  'species' in utilities.

2014-10-02 20:11  dstrubbe

	* [r12520] src/system/output.F90,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp: *
	  Clarifications to documentation on CurrentThroughPlane.
	  * Block use for other than 1D, 2D, and 3D.
	  * Removing some lines of a testsuite input file, which would have
	  made it fail with the bug corrected in r12518.

2014-10-02 21:17  dstrubbe

	* [r12521] src/grid/mesh_init.F90: Avoiding divide-by-zero or
	  assertion failure resulting from an empty grid.

2014-10-02 22:21  dstrubbe

	* [r12522] src/ions/solids.F90: Beginning generalization of
	  periodic_copy routines to arbitrary dimensions: changing some
	  array sizes to MAX_DIM, documenting size of icell. Also moving
	  nullification into only the condition when it won't get
	  allocated.

2014-10-03 01:52  dstrubbe

	* [r12523] src/ions/solids.F90: Previous commit caused trouble for
	  dim=4, in use of 'product'. Now that is performed only over the
	  relevant dimensions, and stored as a member of the data type.

2014-10-03 02:32  dstrubbe

	* [r12524] src/ions/solids.F90: Fix to the fix: a finite system has
	  1 periodic copy, not 0.

2014-10-03 03:17  dstrubbe

	* [r12525] src/ions/solids.F90: Generalization of periodic_copy
	  routines to arbitrary number of dimensions. New algorithm gives
	  identical icell array in 1D, 2D, and 3D, but works in higher ones
	  too.

2014-10-03 16:54  dstrubbe

	* [r12526] src/grid/submesh.F90, src/hamiltonian/epot.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/species_pot.F90,
	  src/ions/Makefile.am, src/ions/periodic_copy.F90,
	  src/ions/solids.F90, src/scf/lcao.F90, src/scf/scf.F90,
	  src/system/output.F90: Renamed solids -> periodic_copy, to better
	  describe its contents and fit the name of the routines in it.

2014-10-03 18:44  dstrubbe

	* [r12527] liboct_parser/liboct_parser.h,
	  liboct_parser/parse_exp.c, liboct_parser/symbols.h: Fixing C
	  prototypes to avoid this warning from icc: "old-style parameter
	  list (anachronism)"

2014-10-03 19:07  dstrubbe

	* [r12528] liboct_parser/grammar.c, liboct_parser/parse.c,
	  liboct_parser/parse_exp.c, liboct_parser/symbols.c: * Explicit
	  casts in liboct_parser to avoid icc warnings like: conversion
	  from "int" to "char" may lose significant bits.
	  * Using unique variable names in liboct_parser to avoid icc
	  warnings: declaration hides variable "c".

2014-10-03 19:35  dstrubbe

	* [r12529] src/common-rules.make: We are unnecessary complicating
	  our link lines by passing the -I flags for Fortran modules, which
	  are not used by the linker. They are only needed for compiling
	  the Fortran source files. AM_FCFLAGS is part of the link line
	  automatically with autotools, but included by hand in the compile
	  line, so I renamed it to FCFLAGS_MODS to put in the compile line,
	  and these things no longer appear in the link line.

2014-10-07 18:47  dstrubbe

	* [r12530] src/states/states_block_inc.F90: Error message referred
	  specifically to gs but might be called from
	  other CalculationModes.

2014-10-08 16:51  dstrubbe

	* [r12531] src/scf/lcao_inc.F90: For LCAODebug, the Hamiltonian,
	  overlap, and orbital basis files should be closed before the
	  diagonalization, to make sure they get written fully in case
	  there is a crash in the diagonalization part.

2014-10-08 16:53  dstrubbe

	* [r12532] src/math/loct_math.F90, src/math/oct_gsl_f.c: Interfaces
	  for Laguerre polynomials from GSL.

2014-10-08 17:06  dstrubbe

	* [r12533] src/main/geom_opt.F90, src/opt_control/target.F90,
	  src/scf/ground_state.F90: Removed unnecessary usages of
	  species_pot_m.

2014-10-08 18:22  dstrubbe

	* [r12534] src/scf/lcao.F90: Removing unused routine.

2014-10-08 20:55  dstrubbe

	* [r12535] src/scf/lcao.F90: Bugfix: wrong type for complex
	  single-precision LCAO buffer. This meant that the imaginary part
	  was being discarded. I think the only case in which this would
	  cause problems would be LCAO for spinors. (Due to r9383.)

2014-10-08 21:32  dstrubbe

	* [r12536] src/hamiltonian/epot.F90: Formatting mistake in variable
	  reference.

2014-10-09 20:19  dstrubbe

	* [r12537] src/poisson/poisson.F90: Make the option NoPoisson to
	  PoissonSolver match the constant POISSON_NULL and lead to proper
	  output label.

2014-10-09 20:38  dstrubbe

	* [r12538] src/hamiltonian/Makefile.am,
	  src/hamiltonian/species_pot.F90,
	  src/hamiltonian/species_pot_inc.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90,
	  testsuite/finite_systems_3d/01-carbon_atom.01-psf_l0.inp: Added
	  option to use complex spherical harmonics in LCAO (standard
	  approach, not alternative, for now) instead of the real ones we
	  always have been using, in the case that complex wavefunctions
	  are being used.
	  This option, with ForceComplex, is now used in a test.

2014-10-10 19:04  dstrubbe

	* [r12539] src/td/propagator.F90, src/td/propagator_cn_inc.F90,
	  src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus_inc.F90, src/td/propagator_qoct_inc.F90,
	  src/td/propagator_rk_inc.F90, src/td/propagator_vksold_inc.F90: A
	  cull of unused arguments and variables.

2014-10-10 20:31  dstrubbe

	* [r12540] src/scf/lcao.F90, src/scf/lcao_inc.F90: * LCAODebug is
	  now implemented for LCAOAlternative, when not parallel in states.
	  * lcao_orbitals is written, for both implementations, at the very
	  beginning.
	  * The loops that assign values to hamiltonian and overlap
	  matrices for LCAOAlternative, not parallel in states, now only
	  handle the upper triangle.

2014-10-10 20:49  dstrubbe

	* [r12541] src/scf/lcao.F90, src/scf/lcao_inc.F90: * Hiding
	  variables used only for LCAODebug.
	  * Optimizing lcao_get_orbital a bit: a temporary array is needed
	  only when we are using complex states but real Ylms.

2014-10-13 14:45  dstrubbe

	* [r12542] src/hamiltonian/hamiltonian_inc.F90,
	  src/states/cmplxscl.F90: Marking complex-scaling with OpenCL as
	  not implemented, since it fails
	  the tests with array out of bounds or segmentation fault.

2014-10-13 19:53  dstrubbe

	* [r12543] src/math/oct_gsl_f.c, src/math/splines.F90: Wrappers for
	  evaluating splines into complex arrays.

2014-10-13 21:04  dstrubbe

	* [r12544] src/grid/submesh.F90: Unused module-scope variable.

2014-10-13 21:16  dstrubbe

	* [r12545] src/scf/lcao.F90, src/scf/lcao_inc.F90: * LCAODebug now
	  writes out the orbital functions as well.
	  * Removed unnecessary module usage of output_m.

2014-10-14 00:02  dstrubbe

	* [r12546] src/grid/submesh_inc.F90: * Bugfix: submesh_dotp_matrix
	  in the complex version did not take the complex conjugate. This
	  is at least one reason why LCAO alternative did not work for
	  spinors.
	  * Correcting PUSH/POP's that had a space instead of an
	  underscore.

2014-10-14 00:40  dstrubbe

	* [r12547] src/hamiltonian/species_pot.F90,
	  src/hamiltonian/species_pot_inc.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90,
	  testsuite/finite_systems_3d/16-scfinlcao.02-alt.inp: *
	  Implemented complex Ylms in alternative LCAO.
	  * Made a test use this feature.
	  * Set lcao%complex_ylms = .false. when states are real, just in
	  case.

2014-10-14 02:24  dstrubbe

	* [r12548] testsuite/oct-run_regression_test.pl: In case a test
	  file does not contain 'Test' (e.g. because it isn't even a real
	  test file), the testsuite Perl script would write a header with
	  its uninitialized $name and say it couldn't find an appropriate
	  executable. Now, it gives an error earlier saying there was no
	  'Test' tag.

2014-10-14 17:30  dstrubbe

	* [r12549] src/main/unocc.F90, src/states/restart.F90: Bugfix: If
	  unocc used a different mesh from gs (e.g. due to a
	  different states block size), then the wavefunctions and mesh
	  file in
	  the restart directory would be for the unocc mesh, but the old
	  density
	  from gs would remain with the old mesh, and attempt to restart
	  from
	  this would give an inoccrect result due to misinterpretation of
	  the
	  density file. This was causing a test failure for
	  linear_response/01-casida.test
	  on lascar_x86_64_gfortran_cl_nvidia_test, because with OpenCL
	  different states block sizes were indeed used, but not without
	  OpenCL.
	  The solution is to rewrite the density if the mesh changed (or if
	  the
	  density was not present).

2014-10-14 17:43  dstrubbe

	* [r12550] src/states/restart_inc.F90: Using new function
	  restart_has_map in a few more places.

2014-10-14 18:37  dstrubbe

	* [r12551] src/hamiltonian/species_pot_inc.F90, src/scf/lcao.F90,
	  src/species/species.F90,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp: * LCAO
	  (standard) for spec_full_gaussian, spec_full_delta, spec_jelli,
	  and spec_point now uses hydrogenic orbitals rather than
	  rectangular harmonic oscillator wavefunctions. This is much
	  better for the H atom tests (though not necessarily for jellium)
	  and is more consistent with the approach for pseudopotentials:
	  use the known analytic form for the isolated species.
	  * Number of orbitals available for such species is the previous
	  value, plus enough to make a full angular-momentum shell. (Of
	  course, there is really no maximum!)
	  * Small tweaks to tests that will use this new feature.
	  * Removed commented line no longer needed.

2014-10-14 19:49  dstrubbe

	* [r12552] src/hamiltonian/species_pot.F90,
	  src/species/species.F90: * Removing separate treatment of
	  spec_point, which is just a special case of spec_jelli with
	  radius = 0.5 a.u. (not clearly stated in variable reference
	  anyway). 'spec_point' is now a synonym for 'spec_jelli', and the
	  column with the radius is optional and has default value 0.5.
	  * spec_point now has spec%Z_val = spec%Z rather than 0 as before,
	  which doesn't make any sense to me, and would make that the
	  number of available orbitals was always zero, which is unhelpful.
	  * Renamed 'nn' to more meaningful 'ncols'.

2014-10-14 23:53  dstrubbe

	* [r12553] src/grid/io_function_inc.F90,
	  src/td/pes_mask_out_inc.F90, src/td/spectrum.F90: * Unused
	  argument.
	  * Comment on routine which is not called, but looks like it
	  probably should be (spectrum_hsfunction_ar_end).

2014-10-15 00:05  xavier

	* [r12554] src/hamiltonian/Makefile.am,
	  src/hamiltonian/gauge_field.F90,
	  src/hamiltonian/gauge_field_force.F90, src/td/propagator.F90,
	  src/td/td.F90: Medium change: Added a new module,
	  gauge_field_force, that contains the function
	  gauge_field_get_force. This change will allow this function use
	  hamiltonian_m.

2014-10-15 00:54  dstrubbe

	* [r12555] src/grid/submesh_inc.F90: Blocking inappropriate calls
	  to submesh_batch routines.

2014-10-15 01:50  dstrubbe

	* [r12556] src/hamiltonian/species_pot_inc.F90, src/species/ps.F90:
	  Implemented hydrogenic orbitals for alternative LCAO, and
	  documented splines in pseudopotentials a little.

2014-10-15 15:49  dstrubbe

	* [r12557] src/grid/mesh_init.F90, src/scf/lcao_inc.F90,
	  src/species/species.F90, src/sternheimer/kdotp.F90: * Adding
	  missing space to message about fingerprint.
	  * Comment about problem with cutoff for LCAO with nonlocal
	  functional.
	  * Consolidated cases for PSPIO and other pseudos.
	  * Number of orbitals is now written for non-pseudo species too.
	  * Fixed default listing for KdotPOccupiedSolutionMethod.

2014-10-15 16:07  dstrubbe

	* [r12558] src/grid/submesh.F90, src/hamiltonian/epot.F90,
	  src/hamiltonian/projector.F90, src/hamiltonian/species_pot.F90,
	  src/scf/lcao_inc.F90: Renamed submesh_init_sphere ->
	  submesh_init, to make clear that this is the routine that
	  initializes the submesh object, not some part or flavor of it.

2014-10-15 16:13  dstrubbe

	* [r12559] src/ions/geometry.F90, src/species/species.F90: Passing
	  around just space%dim for species_init rather than the whole
	  object, since in some place we may have access only to that value
	  (equal to sb%dim) rather than to a space_t object.

2014-10-15 16:22  dstrubbe

	* [r12560] testsuite/functionals/04-oep.01-jellium-lsda.inp: Some
	  slaves are failing this test after introduction of hydrogenic
	  orbitals for LCAO: allowing more eigensolver iterations should
	  fix it.

2014-10-17 19:07  dstrubbe

	* [r12561] src/scf/lcao.F90: Caveat about LCAOAlternative in
	  periodic system.

2014-10-17 19:41  dstrubbe

	* [r12562] configure.ac, src/Makefile.am, src/common-rules.make,
	  src/hamiltonian/Makefile.am, src/hamiltonian/pcm.F90,
	  src/main/Makefile.am, src/pcm, src/utils/Makefile.am: Moving
	  pcm.F90 to src/hamiltonian and removing src/pcm. Since there is
	  only one file there isn't much justification for a whole
	  directory. If there become many PCM files in the future, it can
	  be recreated.

2014-10-17 20:44  xavier

	* [r12563] src/hamiltonian/hamiltonian_inc.F90: Small change: There
	  is no need to call every combination of optional arguments. A
	  non-present optional argument can be safely passed as an optional
	  argument in a call.

2014-10-17 21:06  xavier

	* [r12564] src/hamiltonian/hamiltonian_inc.F90: Small change: Added
	  the option of applying the Hamiltonian without setting the
	  boundary conditions.

2014-10-18 23:40  dstrubbe

	* [r12565] src/sternheimer/sternheimer.F90: Sternheimer for
	  periodic systems is no longer experimental. Any concerns have
	  been fixed years ago as far as I know.

2014-10-20 17:42  dstrubbe

	* [r12566] src/hamiltonian/rkb_projector.F90,
	  src/species/species.F90: Since pseudopotentials are only
	  meaningful in 3D, removed useless use of MAX_DIM in a few places
	  for projectors.

2014-10-20 18:45  xavier

	* [r12567] src/hamiltonian/gauge_field_force.F90: Medium change:
	  Implemented an alternative calculation of the current
	  for the time-dependent propagation that requires the application
	  of
	  the Hamiltonian instead of the gradient.

2014-10-20 23:56  dstrubbe

	* [r12568] src/hamiltonian/rkb_projector.F90,
	  src/species/species.F90: Vectorizing rkb_projector_init, and
	  removing some unnecessary intermediate variables.

2014-10-21 01:35  dstrubbe

	* [r12569] src/hamiltonian/rkb_projector.F90,
	  src/species/species.F90: * species_nl_projector now uses sm%x(:,
	  0) instead of calculating r.
	  * spline_eval_vec is used.

2014-10-21 18:05  xavier

	* [r12570] src/poisson/poisson.F90: Small change: changed the order
	  of a member in the poisson_t object to avoid an internal compiler
	  error (ICE) in the IBM compiler.

2014-10-21 18:26  xavier

	* [r12571] src/opt_control/target.F90: Small change: another member
	  reorder, to make the IBM compiler happy.

2014-10-21 18:28  xavier

	* [r12572] src/basic/io_binary.c: Small change: Another fix for the
	  IBM compiker, this one is our fault. Fortran and C functions
	  should not have the same name, otherwise they can conflict in
	  case the Fortran compiler does not add any decorations.

2014-10-21 22:59  xavier

	* [r12573] src/basic/io_binary.c: Small change: Fixed compilation
	  of io_binary.c broken in a previous commit.

2014-10-23 00:59  xavier

	* [r12574] m4/arch.m4, src/basic/utils.F90, src/include/vectors.h:
	  Medium change: Support for Blue Gene/Q vectorial instructions.

2014-10-23 01:39  dstrubbe

	* [r12575] src/species/species.F90: * The spin-orbit tests were
	  failing on tigger due to confusion between np and np_part of
	  submesh in a vector assignment. With bounds it works.
	  * Removed unused variables.

2014-10-23 16:37  dstrubbe

	* [r12576] src/hamiltonian/berry.F90,
	  src/hamiltonian/gauge_field_force.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/rkb_projector.F90: Unused variables.

2014-10-23 17:53  xavier

	* [r12577] src/basic/recipes.c: Bugfix: The random_seed() function
	  used to select the recipe uses /dev/random, which may block the
	  read if there is not enough entropy. This happens in the Blue
	  Gene/Q. I am switching the code to use /dev/urandom that does not
	  block.

2014-10-23 22:57  dstrubbe

	* [r12578] src/scf/lcao.F90: Renaming variables in accordance with
	  usage elsewhere in the code: iorb counts a total number of
	  orbitals; ii is the principal quantum number in a particular
	  species.

2014-10-24 18:03  dstrubbe

	* [r12579] src/hamiltonian/species_pot_inc.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90, src/species/ps.F90,
	  src/species/species.F90: * species_get_orbital routines now take
	  i, l, m quantum numbers instead of the orbital index. This allows
	  asking for orbitals other than the ones set up for LCAO.
	  * species_get_iwf_radius takes i quantum number instead of the
	  orbital index, since that is the only one it depends on (and not
	  even that for harmonic-oscillator orbitals).
	  * Assertions check that the principal quantum number is in the
	  available range for pseudopotentials.
	  * A little more documentation.

2014-10-24 23:45  xavier

	* [r12580] src/hamiltonian/hamiltonian_inc.F90: Small change:
	  OpenMP parallelization and operation count for the
	  application of the phase in periodic systems.

2014-10-24 23:46  xavier

	* [r12581] src/grid/operate_inc.c, src/include/vectors.h: Small
	  change: Improvement of the vectorization for the Blue Gene/Q.

2014-10-25 00:41  xavier

	* [r12582] src/utils/dielectric_function.F90: Bugfix: The header of
	  the files generated by the dielectric function utility should be
	  a comment.

2014-10-25 02:21  xavier

	* [r12583] src/hamiltonian/gauge_field_force.F90: Small change:
	  More openmp parallelization.

2014-10-26 16:07  xavier

	* [r12584] src/hamiltonian/hamiltonian_base_inc.F90: Small change:
	  OpenMP parallelization of the projector code.

2014-10-27 03:07  xavier

	* [r12585] src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90:
	  Medium changes:
	  - OpenMP parallelization of batch_get_state.
	  - New function batch_mul that multiplies a batch by the contents
	  of an array.

2014-10-27 03:12  xavier

	* [r12586] src/hamiltonian/gauge_field_force.F90: Medium change:
	  the calculation of the current using the Hamiltonian is done in
	  batch mode.

2014-10-27 17:36  dstrubbe

	* [r12587] testsuite/oct-run_regression_test.pl: Create the
	  temporary directory path for testsuite if it does not exist.

2014-10-27 18:20  xavier

	* [r12588] src/hamiltonian/hamiltonian_inc.F90: Small change:
	  Trying to make the intel compiler happy to avoid a segmentation
	  fault with OpenMP.

2014-10-27 21:14  dstrubbe

	* [r12589] src/species/species.F90: * Round up when choosing number
	  of orbitals to initialize for non-pseudo species, and always give
	  at least 5.
	  * Message about number of orbitals in species_init should obey
	  'print_info' variable.
	  * New routine to initialize a delta species by hand.
	  * Documentation and formatting.

2014-10-28 01:03  xavier

	* [r12590] src/grid/nl_operator_inc.F90: Small change: Apparently
	  the Intel compiler has problems with foralls inside OpenMP
	  regions. Modified some code to avoid the problem.

2014-10-28 01:28  xavier

	* [r12591] testsuite/oct-run_regression_test.pl: Medium change:
	  When a test execution fails, print the last 20 lines of output to
	  the terminal.

2014-10-28 18:26  xavier

	* [r12592] src/states/states.F90, src/system/Makefile.am,
	  src/system/current.F90, src/system/v_ks.F90, src/td/td.F90:
	  Medium change: The calculation of the current, when required, is
	  now
	  done in the calculation of the Kohn-Sham potential (as it is done
	  for
	  the density).

2014-10-28 18:32  xavier

	* [r12593] src/system/current.F90, src/system/v_ks.F90: Small
	  change: Minor improvements to my last commit:
	  - PUSH_SUB/POP_SUB.
	  - Removed unused variable.

2014-10-28 18:38  xavier

	* [r12594] src/system/current.F90: Small change: Removed the wrong
	  factors from the calculation of the current.

2014-10-28 23:10  xavier

	* [r12595] src/hamiltonian/gauge_field_force.F90, src/td/td.F90:
	  Medium change: The "force" of the vector potential is calculated
	  from the current stored in st.

2014-10-28 23:23  xavier

	* [r12596] src/hamiltonian/Makefile.am,
	  src/hamiltonian/gauge_field.F90,
	  src/hamiltonian/gauge_field_force.F90, src/td/propagator.F90,
	  src/td/td.F90: Medimum changes:
	  - gauge_field_get_force now can take less arguments.
	  - The gauge_field_force_m module is no longer needed.

2014-10-28 23:36  xavier

	* [r12597] src/system/v_ks.F90: Medium change: Removed the
	  XCTailCorrection feature, I think this has never been used and it
	  is not tested.

2014-10-29 01:01  xavier

	* [r12598] src/td/propagator.F90: Small change: Removed unnecessary
	  variable.

2014-10-29 17:56  xavier

	* [r12599] src/system/current.F90: Bugfix: Check that the phase is
	  allocated before using it in the calculation of the current.

2014-10-29 22:27  xavier

	* [r12600] src/hamiltonian/hamiltonian_base_inc.F90: Small change:
	  Simplified an openmp region to make the Intel compiler happy.
	  This might solve the problem with the mauchly ifort openmp
	  buildbot.

2014-10-29 22:31  xavier

	* [r12601] testsuite/functionals/06-rdmft.test: Small change: The
	  RDMFT test is to long for make check. Now is part of the long-run
	  tests.

2014-10-30 14:21  joseba

	* [r12602] src/grid/mesh_partition.F90: Trying to solve the error
	  with the partitions, following David's recommendations:
	  - Changed the reduce to include the result in all the processes
	  - Deallocated matrices that they weren't

2014-10-30 14:59  micael

	* [r12603] src/td/spectrum.F90, src/utils/propagation_spectrum.F90,
	  testsuite/real_time/12-absorption.06-power_spectrum.inp,
	  testsuite/real_time/12-absorption.test: Added the possibility to
	  calculate the power spectrum of the dipole moment to the
	  oct-propagation_spectrum utility.

2014-10-30 15:01  joseba

	* [r12604] src/basic/string.F90: Added a temporary variable to
	  suppress valgrind error: "Source and destination overlap in
	  memcpy"
	  

2014-10-30 15:25  micael

	* [r12605] testsuite/real_time/Makefile.am: One file was missing
	  from the tarball.

2014-10-30 16:20  xavier

	* [r12606] src/grid/batch_ops_inc.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90: Small change: More OpenMP
	  changes for the Intel compiler.

2014-10-30 23:49  xavier

	* [r12607] src/system/current.F90: Bugfixes:
	  - The indexes for the phase array were wrong when k-point
	  parallelization is used.
	  - The gradient should be calculated even when there are no phases
	  to apply.

2014-10-31 17:52  dstrubbe

	* [r12608] src/math/lalg_basic_blas_inc.F90: Removing some
	  PUSH/POP's from routines called too frequently (at least by open
	  boundaries runs).

2014-10-31 17:58  dstrubbe

	* [r12609] src/states/restart.F90, src/states/restart_inc.F90:
	  Restart routines should not call MPI_Bcast or MPI_Barrier when we
	  have MPI but are running with only one process, or there may be
	  'invalid communicator' errors.

2014-11-04 09:25  adelgado

	* [r12610] src/hamiltonian/energy.F90,
	  src/hamiltonian/hamiltonian.F90, src/hamiltonian/pcm.F90,
	  src/system/energy_calc.F90, src/system/v_ks.F90,
	  src/td/td_write.F90: - 'hamiltonian/pcm.F90': New subroutine
	  ('pcm_elect_energy') to calculate the solute-solvent
	  electrostatic interaction energy was added, obsolete subroutines
	  were deleted. The subroutine 'pcm_pot_rs' was modified to
	  generate also the standard PCM field in terms of point charges
	  when the variable 'SmearingFactor=0'. The default is
	  'SmearingFactor=1' to regularize possible Coulomb singularities
	  at grid points infinitesimally close to the tesserae
	  representative points.
	  
	  - 'system/energy_calc.F90': the subroutine 'pcm_elect_energy' is
	  called to calculate the interaction energy. Independent
	  contribution to the interaction energy are printed to 'pcm_info'
	  file. The total energy was defined accordingly to
	  'pcm_elect_energy'.
	  
	  - 'system/v_ks.F90': The term 'hm%energy%pcm_corr' entering the
	  final expression for the total energy is evaluated. The
	  estimation of the total electronic molecule's charge in terms of
	  the apparent charges is defined with the proper sign.
	  
	  - 'hamiltonian/energy.F90': new variables are defined inside
	  'energy_t' to store the independent contributions to the
	  electrostatic interaction energy.
	  
	  - 'hamiltonian/hamiltonian.F90': The estimation of the total
	  nuclear molecule's charge in terms of the apparent charges is
	  defined with the proper sign.
	  
	  - 'td/td_write.F90': The time-dependent electrostatic interaction
	  energy is computed in terms of the individual contributions as
	  defined in 'energy_t'.

2014-11-04 09:42  adelgado

	* [r12611] src/hamiltonian/pcm.F90: - 'hamiltonian/pcm.F90': using
	  'io_open' to assign a file unit for 'pcm_matrix_gamess.out'.

2014-11-05 16:49  dstrubbe

	* [r12612] src/hamiltonian/kick.F90: Clarifications about
	  TDDeltaStrengthMode.

2014-11-05 17:56  adelgado

	* [r12613] src/hamiltonian/pcm.F90: - 'hamiltonian/pcm.F90': The
	  distances between the tesserae and the grid points used to
	  generate the PCM potential in real-space are calculated only once
	  and stored in the array 'sr_dist'. The latter allows to avoid
	  calling subroutine 'mesh_r' each time 'v_pcm' is generated saving
	  a significant amount of time.

2014-11-07 19:23  xavier

	* [r12614] src/system/current.F90, src/system/v_ks.F90: Medium
	  change: Added a variable to control how the current is
	  calculated. This is mostly for development.

2014-11-10 16:30  dstrubbe

	* [r12615] src/basic/io_binary_f.F90, src/scf/lcao_inc.F90,
	  src/td/ob_mem.F90: Unused variables and arguments.

2014-11-11 08:37  joseba

	* [r12616] src/grid/cube.F90, src/grid/cube_function_inc.F90: If
	  the LibISF solver is used, the cube%fft object is not defined, so
	  an auxiliary function is needed to check the FFT library.

2014-11-11 13:30  joseba

	* [r12617] src/grid/cube_function_inc.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_libisf.F90: First step to correct states
	  parallelization with LibISF:
	  all the functions of LibISF must be defined above cube and its
	  functions

2014-11-11 22:47  dstrubbe

	* [r12618] testsuite/linear_response/01-casida.test: Recentering
	  and slightly loosening tolerance on a test, since it recently
	  failed on hbar (with discrepancy 0.0202).

2014-11-12 01:34  xavier

	* [r12619] src/td/td.F90, src/td/td_write.F90: Implemented the
	  TDOutput of the total current.

2014-11-12 01:43  xavier

	* [r12620] src/opt_control/propagation.F90: Fixed compilation
	  problem in my last commit.

2014-11-14 22:31  xavier

	* [r12621] src/system/current.F90: Added some experimental ways of
	  calculating the current density.

2014-11-14 22:44  xavier

	* [r12622] external_libs/qshep/Makefile.am,
	  external_libs/qshep/qshepmod.f90, src/math/Makefile.am,
	  src/math/qshep.F90: Moved the qshep module to the src/math
	  directory, since, if I am not
	  mistaken, this interface is not part of qshep but was written by
	  Alberto.

2014-11-14 22:52  xavier

	* [r12623] src/frozen/interpolation.F90,
	  src/grid/mesh_function.F90, src/grid/mesh_function_inc.F90,
	  src/math/qshep.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90: Adapted the qshep interface to
	  Octopus name conventions.

2014-11-14 22:57  xavier

	* [r12624] src/system/current.F90: Fixed a name colision between
	  variables and functions in a previous commit.

2014-11-16 00:32  dstrubbe

	* [r12625] src/system/current.F90: * Clarifying documentation.
	  * Adding PUSH/POP's.
	  * Enforcing experimental nature of options.

2014-11-16 00:38  dstrubbe

	* [r12626] src/math/qshep.F90: Enforcing some more Octopus
	  conventions in src/math/qshep.F90.

2014-11-16 01:21  dstrubbe

	* [r12627] src/math/qshep.F90: PUSH/POP and svn:keywords for qshep
	  module.

2014-11-16 02:28  dstrubbe

	* [r12628] src/math/qshep.F90: Mistaken PUSH/POP.

2014-11-16 18:34  dstrubbe

	* [r12629] src/math/qshep.F90: SAFE_ALLOCATE and SAFE_DEALLOCATE
	  for qshep module.

2014-11-17 18:55  xavier

	* [r12630] src/hamiltonian/hgh_projector_inc.F90,
	  src/hamiltonian/kb_projector_inc.F90,
	  src/hamiltonian/rkb_projector.F90: Replaced use of mesh%vol_pp(1)
	  by mesh%volume_element.

2014-11-20 23:05  dstrubbe

	* [r12631] src/grid/partition.F90: More assertions to track down
	  the bug causing occasional crashes in partition_get_np_local.

2014-11-22 16:12  adelgado

	* [r12632] src/hamiltonian/pcm.F90, src/system/energy_calc.F90: -
	  The independent contributions to the solute-solvent electrostatic
	  ineraction are printed in the file 'pcm/pcm_info.out'. This can
	  be pretty useful to check PCM results and its stability during
	  ground state and TD calculations. I have changed the format to
	  make the file compatible with gnuplot.

2014-11-23 21:51  adelgado

	* [r12633] src/hamiltonian/hamiltonian.F90, src/system/v_ks.F90: -
	  Now the electronic and nuclear charges of the molecule,
	  calculated from the total polarization charges, are printed in
	  pcm_info file when the total energy is calculated.

2014-11-24 16:40  joseba

	* [r12634] src/poisson/poisson_libisf.F90: Added an allocation of a
	  dummy argument. Otherwise, it might crash.

2014-11-24 17:36  dstrubbe

	* [r12635] src/hamiltonian/scf_tol.F90: More info on Sternheimer
	  convergence criteria.

2014-11-25 09:14  joseba

	* [r12636] src/grid/cube_function_inc.F90,
	  src/grid/mesh_cube_parallel_map.F90,
	  src/poisson/poisson_init_direct_inc.F90: With this change,
	  combined parallelization of domains and states, and also
	  independent parallelization work with LibISF Poisson solver.
	  
	  Note: still failing PFFT solver with only states parallelization.

2014-11-26 10:57  joseba

	* [r12637] src/poisson/poisson_init_direct_inc.F90: Ensure that it
	  is a parallel execution to run the parallel version of LibISF

2014-11-27 13:23  joseba

	* [r12638] src/grid/mesh_cube_parallel_map.F90: Indentation

2014-12-04 09:02  joseba

	* [r12639] src/grid/mesh_cube_parallel_map.F90: Added the error
	  call, forgotten or mistakenly deleted

2014-12-04 10:08  joseba

	* [r12640] src/poisson/poisson.F90,
	  src/poisson/poisson_init_direct_inc.F90: mesh_cube_parallel_map
	  is initialized only once with LibISF and always if the cube is
	  parallel.
	  Assigned the MPI group to LibISF before it is initialized

2014-12-04 10:14  joseba

	* [r12641] src/grid/mesh_cube_parallel_map.F90: With this change
	  parallelization in states should work with PFFT and LibISF
	  Poisson solvers

2014-12-05 11:07  joseba

	* [r12642] src/utils/convert.F90: Ensured that the domain
	  parallelization is initialized to access the vp structure in
	  Convert Transform utility
	  Deleted unused variables

2014-12-05 14:32  joseba

	* [r12643] src/utils/convert.F90: Added profiling regions to the in
	  principle most time consuming parts in Convert Transform

2014-12-06 10:58  joseba

	* [r12644] src/utils/convert.F90: Implemented a much more efficient
	  approach for the Convert FFT transform utility. With this change
	  'ConvertReadSize' can be choosen, to select how many points will
	  be read at once

2014-12-08 17:12  dstrubbe

	* [r12645] src/grid/mesh_cube_parallel_map.F90,
	  src/grid/mesh_partition.F90, src/grid/partition.F90,
	  src/grid/partition_transfer.F90,
	  src/grid/stencil_variational.F90: Adding a forgotten call to
	  messages_fatal, and typos.

2014-12-09 00:35  xavier

	* [r12646] src/math/Makefile.am, src/math/interpolator.F90,
	  src/math/interpolator_inc.F90: Added an object to perform
	  interpolations.

2014-12-09 19:47  xavier

	* [r12647] src/frozen/Makefile.am, src/frozen/fio_config.F90,
	  src/frozen/interpolation.F90,
	  src/frozen/interpolation_frozen.F90, src/frozen/storage.F90:
	  Renamed the frozen specific interpolation routines to
	  interpolation_frozen.

2014-12-09 19:59  xavier

	* [r12648] src/math/Makefile.am, src/math/interpolation.F90,
	  src/math/interpolation_inc.F90, src/math/interpolator.F90,
	  src/math/interpolator_inc.F90: Improvements in the interface of
	  the interpolation object.

2014-12-09 20:18  dstrubbe

	* [r12649] src/system/output.F90, src/system/system.F90: * It makes
	  more sense to write "mesh_r" output into a file called "mesh_r"
	  instead of just "r", and in the static directory not the exec
	  directory.
	  * Two other small improvements to documentation.

2014-12-09 21:11  dstrubbe

	* [r12650] src/system/output.F90, src/system/system.F90: Output =
	  mesh_r is now handled in the output module, not in system_init
	  where it surprisingly was located.

2014-12-10 19:06  dstrubbe

	* [r12651] src/grid/partition.F90,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp: More
	  assertions, and DebugLevel = 1, for trying to find the bug in the
	  partitioning.

2014-12-11 00:01  xavier

	* [r12652] src/math/Makefile.am, src/math/interpolation.F90,
	  src/math/interpolation_inc.F90: I will not need this
	  interpolation routines. Since
	  they have not being tested enough I prefer to remove them.

2014-12-11 00:02  xavier

	* [r12653] src/grid/Makefile.am, src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90: Implemented an efficient
	  scheme for interpolation on the grid. For the
	  moment it only supports 3D using trilinear interpolation, but
	  "extension" to 2D and 1D should be fairly simple.

2014-12-11 08:04  joseba

	* [r12654] src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90: Added Id svn property with
	  "svn propset svn:keywords 'Id' [file]" to the newly created files

2014-12-12 22:47  xavier

	* [r12655] src/grid/mesh_interpolation_inc.F90: Small change: FLOAT
	  literals instead of integer ones.

2014-12-16 01:27  xavier

	* [r12656] src/states/restart.F90: There is no need to stop the
	  calculation if the restart cannot be
	  read, just start from scratch.

2014-12-16 02:54  xavier

	* [r12657] src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90, src/main/test.F90: -
	  Implemented interpolation for 1d and 2d, and fix a bug in 3d
	  interpolation.
	  - Implemented a TestMode in oct-test for the interpolation
	  routines.

2014-12-16 07:02  xavier

	* [r12658] src/grid/mesh_interpolation_inc.F90,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/components/18-interpolation.03-3d.inp,
	  testsuite/components/18-interpolation.test,
	  testsuite/components/Makefile.am: Implemented a regression test
	  for the mesh interpolation.

2014-12-16 18:54  xavier

	* [r12659] src/grid/mesh_interpolation_inc.F90: - Modified the
	  operation order for 2d interpolation.
	  - Added a check for domain parallelization that is not supported
	  for the moment.

2014-12-19 14:30  theophilou

	* [r12660] src/scf/ground_state.F90, src/scf/rdmft.F90,
	  testsuite/functionals/06-rdmft.01-hf_smear.inp,
	  testsuite/functionals/06-rdmft.01-oep.inp,
	  testsuite/functionals/06-rdmft.02-gs.inp,
	  testsuite/functionals/06-rdmft.test: Change rdmft tests, change
	  rdmft initial orbitals, cleaning up

2014-12-19 15:20  theophilou

	* [r12661] src/scf/rdmft.F90, testsuite/functionals/Makefile.am:
	  Change Makefile.am to include new rdmft test, setting loop
	  variable to integer

2014-12-19 19:04  dstrubbe

	* [r12662] src/grid/mesh_interpolation_inc.F90, src/scf/rdmft.F90:
	  Typos and PUSH/POPs.

2014-12-23 11:36  theophilou

	* [r12663] src/scf/rdmft.F90: getting rid of psi2 type states in
	  scf_rdmft not needed, change the maximum number of
	  multid_minimize in rdmft_occ, change print statement

2014-12-24 09:00  theophilou

	* [r12664] src/scf/rdmft.F90, testsuite/functionals/06-rdmft.test:
	  correcting order of indices of array st%dpsi in scf_rdmft, change
	  default energy convergence for rdmft, change print statements

2014-12-29 19:28  xavier

	* [r12665] src/poisson/poisson_fmm.F90: Removed single quotes from
	  a comment (variable documentation).

2015-01-06 20:15  dstrubbe

	* [r12666] src/scf/rdmft.F90: r12664 changed a variable default for
	  RDMFT without updating the documentation. Removed redundant
	  default specifications from variable descriptions.

2015-01-06 20:25  dstrubbe

	* [r12667] src/scf/rdmft.F90: Simplifying code for exponential in
	  RDMFT.

2015-01-06 21:50  dstrubbe

	* [r12668] src/grid/mesh_partition.F90: Comment typos.

2015-01-06 22:02  dstrubbe

	* [r12669] src/basic/io_binary_f.F90: A change of intent is needed
	  for MPI_File_close to be accepted by the MPI module of OpenMPI
	  1.7.5.

2015-01-06 22:29  dstrubbe

	* [r12670] src/ions/vibrations.F90, src/sternheimer/phonons_lr.F90:
	  * Minor bugfix: for other than 3D, the infrared intensity last
	  column should divide by the number of dimensions, not just 3.
	  * Removing unnecessary temporary variable 'factor'.
	  * Consolidating applications of sqrt for vibrations_norm_factor.

2015-01-07 10:11  micael

	* [r12671] src/math/tdfunction.F90: Fixed missing exponent in the
	  documentation of gaussian TD functions.

2015-01-07 10:15  micael

	* [r12672] src/system/v_ks.F90: * ADSIC with spin was not correct:
	  the correction should be calculated from a fully polarized
	  density.
	  * Marked ADSIC not implemented with non-collinear spin.

2015-01-07 10:31  micael

	* [r12673] src/main/casida.F90, src/main/casida_inc.F90: *
	  Implemented ADSIC fxc correction. At the moment it only works for
	  the spin-unpolarized case.

2015-01-07 16:55  dstrubbe

	* [r12674] src/states/cmplxscl.F90: Organizing ComplexScaling
	  variables into a subsection in the variable reference.

2015-01-07 18:40  dstrubbe

	* [r12675] src/system/forces_inc.F90: A more informative error
	  message.

2015-01-07 19:15  dstrubbe

	* [r12676] src/main/phonons_fd.F90: Caveat on symmetries and
	  finite-difference vibrational modes.

2015-01-07 19:18  dstrubbe

	* [r12677] src/ions/kpoints.F90: When we are not reducing k-points
	  by symmetries, we should still initialize the arrays for symmetry
	  operations per k-point.

2015-01-07 21:30  dstrubbe

	* [r12678] src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc_inc.F90, src/system/pert_inc.F90: *
	  Inserting a minus sign in the second-order k.p perturbation for
	  consistency, so that it is now the second derivative with respect
	  to (ik) not just k, like we do in first order.
	  * Some comments.

2015-01-08 15:10  jjornet

	* [r12679] src/main/casida_inc.F90: Â· Bug fixed when writing the
	  transition densities using MPI environment.

2015-01-08 17:46  dstrubbe

	* [r12680] src/main/casida.F90,
	  testsuite/linear_response/01-casida.03-casida.inp: * Adding
	  output of transition densities to Casida test, to check for
	  problem just corrected by Quim.
	  * Correcting and amplifying documentation on
	  CasidaTransitionDensities.

2015-01-08 21:04  dstrubbe

	* [r12681] src/sternheimer/phonons_lr.F90: More compact formulation
	  of finite-system ion-ion contribution to dynamical matrix.

2015-01-13 19:09  dstrubbe

	* [r12682] src/sternheimer/em_resp.F90,
	  src/sternheimer/phonons_lr.F90: Calls to restart_init to load
	  data from a previous calculation in a different directory should
	  be following by checking the error status, or else if the
	  directory doesn't exist, the call to restart_open_dir will cause
	  an assertion failure (.not. restart%skip).

2015-01-13 19:58  dstrubbe

	* [r12683] src/system/current.F90: Removed useless variables.

2015-01-14 17:47  dstrubbe

	* [r12684] src/grid/nl_operator.F90, src/grid/subarray_inc.F90:
	  Suppressing warnings about possible use of uninitialized
	  variables.

2015-01-14 18:42  dstrubbe

	* [r12685] src/grid/cube.F90: Fix to potential bug: variable
	  'found' was not initialized, and so error message might not be
	  triggered even when the search failed.

2015-01-14 18:54  dstrubbe

	* [r12686] src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90: * _end subroutines should
	  have the argument be intent(inout).
	  * Error message for not-implemented interpolation case, and
	  suppressing warning about result not being initialized.
	  * Unused variable.

2015-01-15 16:01  dstrubbe

	* [r12687] src/grid/batch.F90: More detailed checking of batch
	  allocation status.

2015-01-15 21:52  dstrubbe

	* [r12688] src/td/propagator.F90,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp: Adding calls to
	  messages_experimental for propagators which the variable
	  documentation says are experimental.

2015-01-15 22:03  dstrubbe

	* [r12689] src/td/propagator_cn_inc.F90,
	  src/td/propagator_etrs_inc.F90, src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus_inc.F90, src/td/propagator_qoct_inc.F90,
	  src/td/propagator_rk_inc.F90: Indentation, and emacs syntax
	  highlighting blocks.

2015-01-19 16:20  joseba

	* [r12690] src/basic/io_binary_f_inc.F90: Made a read or write of a
	  file not to crash the execution. Two useful
	  examples:
	  
	  1.- Reading can happen that a restart/td has been created, but
	  nothing
	  written. When trying to restart there, without this change fails.
	  
	  2.- Writing can fail due to a I/O error, which can be solved the
	  next
	  time a restart is going to be saved.

2015-01-19 22:41  dstrubbe

	* [r12691] src/grid/mesh_batch_inc.F90: Making sure a variable is
	  initialized, and that if none of the cases in a select matches an
	  error occurs.

2015-01-20 18:02  dstrubbe

	* [r12692] src/basic/calc_mode.F90, src/basic/multicomm.F90: *
	  Documentation.
	  * Removing unnecessary variable.

2015-01-20 18:14  dstrubbe

	* [r12693] src/main/casida_inc.F90: * Bugfix:
	  CasidaHermitianConjugate could give incorrect results (normal
	  mode) or a segmentation fault (for triplet or forces), due to
	  writing the wrong variable in a line. Now it is corrected.
	  * Removed meaningless 'else' line.

2015-01-20 18:34  dstrubbe

	* [r12694] src/basic/multicomm.F90: Let's write a warning if
	  unusable parallelization strategies are specified.

2015-01-20 19:23  dstrubbe

	* [r12695] src/basic/calc_mode.F90, src/main/casida.F90: *
	  Disabling k-point parallelization for Casida. This could be
	  implemented, but hasn't been, and will cause a segmentation
	  fault.
	  * Creating new routine to unset a parallelization strategy.

2015-01-20 19:52  dstrubbe

	* [r12696] src/main/casida_inc.F90: Refactoring Casida a bit to
	  pave the way for implementation of fractional occupations.

2015-01-20 22:44  xavier

	* [r12697] src/hamiltonian/projector_inc.F90,
	  src/system/current.F90, src/system/pert_inc.F90: Two functions
	  that do not really need to receive a grid_t object.

2015-01-20 22:44  xavier

	* [r12698] src/system/v_ks.F90: Missing change in my last commit.

2015-01-20 22:47  xavier

	* [r12699] src/system/Makefile.am, src/system/output.F90,
	  src/system/output_h_inc.F90, src/system/output_me_inc.F90,
	  src/system/output_states_inc.F90, src/system/system.F90: * Added
	  an output_end function.
	  
	  * The current output now uses the new current calculator. This
	  means now
	  it will include corrections due to pseudopotentials.

2015-01-20 22:52  dstrubbe

	* [r12700] src/main/casida_inc.F90: Implementation of Casida with
	  occupations. Works for integer occupations, not yet tested with
	  partial occupations.

2015-01-21 16:56  dstrubbe

	* [r12701] src/system/current.F90, src/system/output.F90: *
	  Capitalization.
	  * PUSH/POP.
	  * _end routine should have intent(inout).

2015-01-21 20:48  dstrubbe

	* [r12702] src/hamiltonian/epot.F90: * Species representing
	  all-electron atoms should definitely be included in the Ewald
	  sums too.
	  * Testing for equality of FLOAT's is not recommended.

2015-01-22 14:57  theophilou

	* [r12703] src/scf/rdmft.F90: Change default convergence energy,
	  default number of iterations for multidimensional minimization,
	  print statements

2015-01-22 15:19  joseba

	* [r12704] src/td/propagator_etrs_inc.F90: Enabled the emacs mode
	  (a line was missing)

2015-01-22 15:24  joseba

	* [r12705] src/td/propagator_cn_inc.F90,
	  src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus_inc.F90: More files: Enabled the emacs
	  mode (a line was missing)

2015-01-22 18:07  dstrubbe

	* [r12706] src/sternheimer/em_resp_calc_inc.F90: Correcting sign
	  for expectation value of electric field on states.

2015-01-22 18:26  dstrubbe

	* [r12707] src/system/current.F90: Removing assertion to allow
	  Biot-Savart test to pass, after use of new current routine in
	  r12699. Xavier, please confirm whether spin is actually
	  implemented (correctly) or not.

2015-01-23 12:17  dstrubbe

	* [r12708] src/td/propagator.F90: Unused variables.

2015-01-23 12:35  dstrubbe

	* [r12709] src/opt_control/propagation.F90: * Removed 'target'
	  attribute from an argument which is not pointed at.
	  * Standard formatting of argument declarations.

2015-01-23 17:21  dstrubbe

	* [r12710] src/main/casida_inc.F90: Bugfix: wrong spin-index in
	  Casida. Could have affected spin-polarized calculations in which
	  the two spins were not equivalent. Introduced in r11387.

2015-01-23 17:40  dstrubbe

	* [r12711] src/main/casida.F90, src/main/casida_inc.F90: Clearer
	  variable names in Casida.

2015-01-25 11:01  joseba

	* [r12712] src/states/restart_inc.F90,
	  src/td/propagator_vksold_inc.F90: Make sure that the vprev files
	  are only written once

2015-01-25 14:48  jrfsousa

	* [r12713] src/basic/json.F90: json.F90:
	  
	  Adding new public procedures foremost json_copy and json_hash

2015-01-25 15:19  jrfsousa

	* [r12714] src/basic/Makefile.am, src/basic/loct.F90,
	  src/basic/oct_f.c, src/basic/path.F90: oct_f.c:
	  
	  Adds support for dirname, basename and realpath.
	  
	  loct.F90:
	  
	  Adds the procedures loct_dirname, loct_basename and
	  loct_realpath.
	  
	  path.F90:
	  
	  New module for improved path handling.
	  
	  Makefile.am:
	  
	  Reflects the changes to the building step.

2015-01-25 21:04  acastro

	* [r12715] src/math/math.F90, src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90: Added a new routine to
	  compute derivatives numerically,
	  the "Ridders" algorithm. It is more precise that the one
	  that is implemented in the GSL library.

2015-01-25 21:09  dstrubbe

	* [r12716] src/basic/path.F90: Setting svn:keywords on new file.

2015-01-25 21:17  acastro

	* [r12717] src/math/math.F90,
	  src/opt_control/target_gstransformation_inc.F90: Corrected a bug
	  that affected the "gstransformation" target
	  for many-electron sysmtes.
	  
	  Removed a single ' character in a comment, that may be a
	  problem for some compilers.

2015-01-25 21:31  acastro

	* [r12718] src/td/propagator_rk_inc.F90: Bug fix: the
	  expl_runge_kutta4 propagator was not working
	  properly when going backwards and using an imaginary absorbing
	  potential.

2015-01-25 22:03  jrfsousa

	* [r12719] src/ions/symmetries.F90: symmetries.F90:
	  
	  Added SPEC_FROZEN species to the non-spherically symmetric
	  species list.
	  
	  Added a short circuit logic step to the loop.

2015-01-25 22:05  jrfsousa

	* [r12720] src/species/species.F90: species.F90:
	  
	  Added species type to json input/output

2015-01-26 17:11  dstrubbe

	* [r12721] testsuite/functionals/06-rdmft.test: Updating reference
	  values, and reducing precision, for RDMFT in light of r12703.

2015-01-26 17:16  dstrubbe

	* [r12722] testsuite/README: Documentation file for testsuite.

2015-01-26 17:16  dstrubbe

	* [r12723]
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.test: Typos.

2015-01-26 22:33  dstrubbe

	* [r12724] testsuite/oct-run_testsuite.sh.in: Removing command-line
	  option from testsuite script, to run in parallel. It did nothing.
	  (It was added in r2338, and superseded some time later when the
	  Programs tag was added to the test files, which now controls
	  whether octopus or octopus_mpi is run.)

2015-01-26 22:35  dstrubbe

	* [r12725] testsuite/oct-run_testsuite.sh.in: Set svn:keywords on
	  file.

2015-01-27 11:31  joseba

	* [r12726] m4/isf.m4, src/poisson/poisson_libisf.F90: Adaption of
	  the API to the new bigDFT 1.7.6

2015-01-27 14:54  mjv500

	* [r12728] src/ions/simul_box.F90, src/ions/symmetries.F90,
	  src/poisson/poisson_fft.F90: intermediate update for periodic
	  systems. Accepts non orthogonal unit cells, but still not working
	  fully.

2015-01-27 14:58  mjv500

	* [r12729] src/ions/simul_box.F90: added sterner warning for non
	  orthogonal unit cells

2015-01-27 14:59  mjv500

	* [r12730] src/ions/simul_box.F90: added sterner warning for non
	  orthogonal unit cells v2 compiles

2015-01-27 16:54  joseba

	* [r12731] m4/isf.m4: Updated the documentation to the change of
	  the ISF version from BigDFT

2015-01-27 16:58  mjv500

	* [r12732] src/frozen/fio_simul_box.F90, src/ions/simul_box.F90,
	  src/ions/symmetries.F90: correct call to spglib for positions in
	  reduced coordinates

2015-01-27 17:25  xavier

	* [r12733] src/system/current.F90: Fixed calculation of the current
	  for spin polarized calculations.

2015-01-27 21:14  jrfsousa

	* [r12734] src/frozen/Makefile.am, src/frozen/basis.F90,
	  src/frozen/functional.F90, src/frozen/gga.F90,
	  src/frozen/igrid.F90, src/frozen/imesh.F90,
	  src/frozen/interface_xc.F90, src/frozen/lda.F90,
	  src/frozen/strng.F90: Frozen:
	  
	  A large series of long due updates.

2015-01-27 21:35  jrfsousa

	* [r12735] src/system/output_fio.F90: output_fio.F90:
	  
	  Solves compilation problem and partly resolves problems with
	  restart mechanism.

2015-01-27 21:55  mjv500

	* [r12736] src/grid/mesh_init.F90, src/ions/simul_box.F90: should
	  fix most failing tests - erroneous reinitialization of lsize

2015-01-27 22:25  mjv500

	* [r12737] src/ions/simul_box.F90: corrected volume element to
	  reduced coordinate purely geometric term

2015-01-27 22:45  jrfsousa

	* [r12738] src/frozen/tdict.F90, src/frozen/template.h,
	  src/frozen/thash.F90, src/frozen/tlist.F90, src/frozen/tpair.F90,
	  src/frozen/tsingle.F90, src/frozen/util.h: Frozen:
	  
	  Adds some missing template files.

2015-01-27 22:50  mjv500

	* [r12739] src/ions/simul_box.F90: follow David suggestion of
	  experimental flag for non orthogonal unit cells

2015-01-28 10:35  mjv500

	* [r12740] src/ions/symmetries.F90: fixed calculation of reduced
	  coordinates for spglib - periodic system tests corrected for
	  space group recognition

2015-01-28 11:27  jrfsousa

	* [r12741] src/frozen/Makefile.am, src/frozen/domain.F90: Frozen:
	  
	  Some more files a small commit to check compilers.

2015-01-28 11:49  jrfsousa

	* [r12742] src/frozen/Makefile.am, src/frozen/tdarr.F90: Frozen:
	  
	  Adds forgotten template file.

2015-01-28 13:35  joseba

	* [r12743] configure.ac, share/recipes/Makefile.am,
	  share/recipes/eu, share/recipes/eu/Makefile.am,
	  share/recipes/eu/txipiroiak_bere_tintan.txt: Txipiroien errezeta
	  gehituta*
	  
	  squid recipe in Basque

2015-01-28 13:43  dstrubbe

	* [r12744] src/states/restart_inc.F90: PUSH_SUB should be the first
	  statement in a subroutine.

2015-01-28 14:46  jrfsousa

	* [r12745] src/frozen/Makefile.am,
	  src/frozen/interpolation_frozen.F90, src/frozen/intrpl.F90,
	  src/frozen/simulation.F90, src/frozen/storage.F90: Frozen:
	  
	  interpolation_frozen.F90 -> intrpl.F90:
	  Renamed the file to be shorter while still avoiding clashes.
	  
	  Updated some more files.

2015-01-28 15:08  joseba

	* [r12746] external_libs/fortrancl/Makefile.am: Added the SVN Id
	  for a missing file with the command:
	  svn propset svn:keywords 'Id' Makefile.am

2015-01-28 15:33  theophilou

	* [r12747] src/scf/rdmft.F90: Change requirements for extra states,
	  add messages for not implemented things, take rdm%exchange
	  diagonal from rdm%hartree and not recalculate

2015-01-28 16:06  jrfsousa

	* [r12748] src/frozen/Makefile.am: Frozen:
	  
	  Adds missing line.

2015-01-28 16:21  xavier

	* [r12749] configure.ac: Removed the single precision option.

2015-01-28 16:42  xavier

	* [r12750] src/td/spectrum.F90, src/utils/oscillator_strength.F90:
	  Removed single precision checks.

2015-01-28 16:46  xavier

	* [r12751] src/poisson/poisson.F90: Removed single precision check.

2015-01-28 16:59  xavier

	* [r12752] src/include/global.h: Removed the single precision
	  global definitions.

2015-01-28 17:11  xavier

	* [r12753] src/states/states_block.F90,
	  src/sternheimer/em_resp_calc.F90: * Removed unused module
	  include.
	  * Added a comment about states_block being deprecated.

2015-01-28 19:05  jrfsousa

	* [r12754] src/frozen/bcnfg.F90, src/frozen/bdnst.F90,
	  src/frozen/bepot.F90, src/frozen/bgeom.F90, src/frozen/bhmlt.F90,
	  src/frozen/bhndl.F90, src/frozen/bmodl.F90, src/frozen/bpotn.F90,
	  src/frozen/bstts.F90, src/frozen/bsyst.F90, src/frozen/bterm.F90,
	  src/frozen/domain.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90, src/frozen/tdarr.F90,
	  src/frozen/tlist.F90: Frozen:
	  
	  Adding another group of files.

2015-01-28 19:07  jrfsousa

	* [r12755] src/frozen/Makefile.am: Frozen:
	  
	  The necessary Makefile alterations where forgotten.

2015-01-28 19:14  xavier

	* [r12756] src/sternheimer/em_resp_calc.F90: This module was not
	  really unused.

2015-01-28 19:37  xavier

	* [r12757] src/grid/cube_function_inc.F90: OpenMP parallelization
	  of an operation.

2015-01-28 20:05  jrfsousa

	* [r12758] src/frozen/strng.F90: Frozen:
	  
	  Tries to solve a compilation error with pathf95

2015-01-28 21:34  jrfsousa

	* [r12759] src/Makefile.am, src/common-rules.make: Alter
	  compilation order for Frozen.

2015-01-28 23:26  xavier

	* [r12760] configure.ac, external_libs/Makefile.am,
	  src/common-rules.make: Integrated the GPL "bader" program, for
	  the calculation of partial
	  charges, as an external library.

2015-01-28 23:27  xavier

	* [r12761] src/grid/io_function_inc.F90: The 'cube' object should
	  be detroyed after it is used.

2015-01-28 23:34  xavier

	* [r12762] src/scf/scf.F90, src/system/Makefile.am,
	  src/system/partial_charges.F90: Calculation of bader partial
	  charges. For the moment this can be
	  enabled with the experimental input variable
	  "SCFCalculatePartialCharges".

2015-01-28 23:50  xavier

	* [r12763] src/scf/scf.F90, src/system/partial_charges.F90: Both
	  Bader and Voronoi charges are now calculated.

2015-01-28 23:51  xavier

	* [r12764] src/scf/scf.F90: Removed accidental input

2015-01-28 23:58  xavier

	* [r12765] external_libs/bader, external_libs/bader/Makefile.am,
	  external_libs/bader/bader_mod.f90,
	  external_libs/bader/charge_mod.f90,
	  external_libs/bader/chgcar_mod.f90,
	  external_libs/bader/command_arg.f90,
	  external_libs/bader/cube_mod.f90, external_libs/bader/io_mod.f90,
	  external_libs/bader/ions_mod.f90,
	  external_libs/bader/kind_mod.f90, external_libs/bader/main.f90,
	  external_libs/bader/matrix_mod.f90,
	  external_libs/bader/multipole_mod.f90,
	  external_libs/bader/options_mod.f90,
	  external_libs/bader/results_mod.f90,
	  external_libs/bader/voronoi_mod.f90: For some reason the bader
	  source code did not get into the repository
	  in my previous commit.

2015-01-29 00:03  xavier

	* [r12766] external_libs/bader/Makefile.am,
	  external_libs/bader/main.f90, src/system/partial_charges.F90: *
	  We do not need the main from bader.
	  * Moved the bader info to our module.

2015-01-29 00:10  xavier

	* [r12767] external_libs/bader/bader_mod.f90,
	  external_libs/bader/voronoi_mod.f90: Commented output lines of
	  the bader program.

2015-01-29 00:59  xavier

	* [r12768] src/system/partial_charges.F90: Partial charges now work
	  with spin polarization (they are calculated
	  for the total charge).

2015-01-29 00:59  xavier

	* [r12769] src/td/td_write.F90: TDOutput = partial_charges.

2015-01-29 01:37  xavier

	* [r12770] src/scf/scf.F90, src/system/partial_charges.F90,
	  src/td/td_write.F90: * Fixed the calculation of partial charges
	  in parallel.
	  * Missing deallocations.

2015-01-29 14:57  jrfsousa

	* [r12771] src/frozen/Makefile.am, src/frozen/bdnst.F90,
	  src/frozen/bhndl.F90, src/frozen/bmodl.F90, src/frozen/bpotn.F90,
	  src/frozen/bstts.F90, src/frozen/bsyst.F90,
	  src/frozen/fio_config.F90, src/frozen/fio_curvilinear.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_grid.F90, src/frozen/fio_hamiltonian.F90,
	  src/frozen/fio_handle.F90, src/frozen/fio_mesh.F90,
	  src/frozen/fio_model.F90, src/frozen/fio_simul_box.F90,
	  src/frozen/fio_simulation.F90, src/frozen/fio_states.F90,
	  src/frozen/fio_system.F90, src/frozen/intrpl.F90,
	  src/frozen/storage.F90: Frozen:
	  
	  A new batch of files and a few modifications.

2015-01-29 16:53  xavier

	* [r12772] src/poisson/poisson.F90: Bugfix: I accidentally changed
	  the default poisson solver. This caused
	  the tests to fail.

2015-01-29 17:02  joseba

	* [r12773] external_libs/bader: Ignored the Makefile.in file
	  Command: svn propedit svn:ignore .

2015-01-29 17:23  xavier

	* [r12774] testsuite/real_time/04-etrs_single.01-gs.inp,
	  testsuite/real_time/04-etrs_single.02-td.inp,
	  testsuite/real_time/04-etrs_single.test,
	  testsuite/real_time/Makefile.am: Removed the single precision
	  test.

2015-01-29 18:30  xavier

	* [r12775] external_libs/bader/Makefile.am: Full build dependencies
	  for the bader files.

2015-01-29 21:23  xavier

	* [r12776]
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/Makefile.am,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.test: Rewrote some
	  tests to stop using datasets.

2015-01-29 21:41  xavier

	* [r12777] testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-oct_long.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/Makefile.am,
	  testsuite/periodic_systems/Makefile.am: More tests without
	  datasets.

2015-01-29 22:01  xavier

	* [r12778]
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.03-filter_indirect.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/Makefile.am: Converted last tests that
	  used datasets (except for the open systems
	  ones).

2015-01-30 08:54  joseba

	* [r12779] configure.ac, external_libs/Makefile.am,
	  external_libs/yaml-0.1.4, external_libs/yaml-0.1.4/LICENSE,
	  external_libs/yaml-0.1.4/Makefile.am,
	  external_libs/yaml-0.1.4/README,
	  external_libs/yaml-0.1.4/aclocal.m4,
	  external_libs/yaml-0.1.4/autom4te.cache,
	  external_libs/yaml-0.1.4/autom4te.cache/output.0,
	  external_libs/yaml-0.1.4/autom4te.cache/output.1,
	  external_libs/yaml-0.1.4/autom4te.cache/requests,
	  external_libs/yaml-0.1.4/autom4te.cache/traces.0,
	  external_libs/yaml-0.1.4/autom4te.cache/traces.1,
	  external_libs/yaml-0.1.4/config,
	  external_libs/yaml-0.1.4/config.h.in,
	  external_libs/yaml-0.1.4/config/compile,
	  external_libs/yaml-0.1.4/config/config.guess,
	  external_libs/yaml-0.1.4/config/config.sub,
	  external_libs/yaml-0.1.4/config/depcomp,
	  external_libs/yaml-0.1.4/config/install-sh,
	  external_libs/yaml-0.1.4/config/ltmain.sh,
	  external_libs/yaml-0.1.4/config/missing,
	  external_libs/yaml-0.1.4/config/test-driver,
	  external_libs/yaml-0.1.4/configure,
	  external_libs/yaml-0.1.4/configure.ac,
	  external_libs/yaml-0.1.4/doc,
	  external_libs/yaml-0.1.4/doc/doxygen.cfg,
	  external_libs/yaml-0.1.4/include,
	  external_libs/yaml-0.1.4/include/Makefile.am,
	  external_libs/yaml-0.1.4/include/Makefile.in,
	  external_libs/yaml-0.1.4/include/yaml.h,
	  external_libs/yaml-0.1.4/m4,
	  external_libs/yaml-0.1.4/m4/libtool.m4,
	  external_libs/yaml-0.1.4/m4/ltoptions.m4,
	  external_libs/yaml-0.1.4/m4/ltsugar.m4,
	  external_libs/yaml-0.1.4/m4/ltversion.m4,
	  external_libs/yaml-0.1.4/m4/lt~obsolete.m4,
	  external_libs/yaml-0.1.4/src,
	  external_libs/yaml-0.1.4/src/Makefile.am,
	  external_libs/yaml-0.1.4/src/api.c,
	  external_libs/yaml-0.1.4/src/dumper.c,
	  external_libs/yaml-0.1.4/src/emitter.c,
	  external_libs/yaml-0.1.4/src/loader.c,
	  external_libs/yaml-0.1.4/src/parser.c,
	  external_libs/yaml-0.1.4/src/reader.c,
	  external_libs/yaml-0.1.4/src/scanner.c,
	  external_libs/yaml-0.1.4/src/writer.c,
	  external_libs/yaml-0.1.4/src/yaml_private.h,
	  external_libs/yaml-0.1.4/tests,
	  external_libs/yaml-0.1.4/tests/Makefile.am,
	  external_libs/yaml-0.1.4/tests/Makefile.in,
	  external_libs/yaml-0.1.4/tests/test-reader.c,
	  external_libs/yaml-0.1.4/tests/test-version.c,
	  external_libs/yaml-0.1.4/win32,
	  external_libs/yaml-0.1.4/win32/Makefile.am,
	  external_libs/yaml-0.1.4/win32/Makefile.in,
	  external_libs/yaml-0.1.4/win32/config.h,
	  external_libs/yaml-0.1.4/win32/vc6,
	  external_libs/yaml-0.1.4/win32/vc6/example_deconstructor.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/example_deconstructor_alt.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/example_reformatter.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/example_reformatter_alt.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/libyaml.dsw,
	  external_libs/yaml-0.1.4/win32/vc6/run_dumper.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/run_emitter.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/run_loader.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/run_parser.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/run_scanner.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/test_reader.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/test_version.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/yaml.dsp,
	  external_libs/yaml-0.1.4/win32/vc6/yamldll.dsp,
	  external_libs/yaml-0.1.4/win32/vs2003,
	  external_libs/yaml-0.1.4/win32/vs2003/example_deconstructor.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/example_deconstructor_alt.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/example_reformatter.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/example_reformatter_alt.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/libyaml.sln,
	  external_libs/yaml-0.1.4/win32/vs2003/run_dumper.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/run_emitter.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/run_loader.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/run_parser.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/run_scanner.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/test_reader.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/test_version.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/yaml.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2003/yamldll.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008,
	  external_libs/yaml-0.1.4/win32/vs2008/example_deconstructor.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/example_deconstructor_alt.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/example_reformatter.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/example_reformatter_alt.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/libyaml.sln,
	  external_libs/yaml-0.1.4/win32/vs2008/run_dumper.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/run_emitter.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/run_loader.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/run_parser.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/run_scanner.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/test_reader.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/test_version.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/yaml.vcproj,
	  external_libs/yaml-0.1.4/win32/vs2008/yamldll.vcproj,
	  external_libs/yaml-0.1.4/yaml-0.1.pc.in, m4/yaml.m4,
	  src/common-rules.make: Included YAML as external library. It will
	  be needed by soon to be add ISF solver

2015-01-30 09:01  joseba

	* [r12780] external_libs/yaml-0.1.4, external_libs/yaml-0.1.4/src:
	  Ignored Makefile.in files with:
	  svn propedit svn:ignore .

2015-01-30 09:34  marques

	* [r12781] liboct_parser/parse.c, liboct_parser/symbols.c,
	  liboct_parser/symbols.h: Bug fix in liboct_parser: pusym did not
	  'define' the symbol. This only showed up in APE
	  First steps into implementing detection of unused symbols

2015-01-30 10:30  joseba

	* [r12782] m4/yaml.m4: Actually, I don't know the license of YAML
	  and I took the yaml.m4 from the former configure.ac file of them
	  Added the svn Id with:
	  svn propset svn:keywords 'Id' yaml.m4

2015-01-30 10:32  joseba

	* [r12783] configure.ac, external_libs/Makefile.am,
	  external_libs/isf, external_libs/isf/Makefile.am,
	  external_libs/isf/flib, external_libs/isf/flib/MPIfake.f90,
	  external_libs/isf/flib/Makefile.am,
	  external_libs/isf/flib/allocate-c-inc.f90,
	  external_libs/isf/flib/allocate-inc.f90,
	  external_libs/isf/flib/allocate-profile-inc.f90,
	  external_libs/isf/flib/callbacks.f90,
	  external_libs/isf/flib/deallocate-c-inc.f90,
	  external_libs/isf/flib/deallocate-inc.f90,
	  external_libs/isf/flib/deallocate-multiple-inc-ptr.f90,
	  external_libs/isf/flib/deallocate-multiple-inc.f90,
	  external_libs/isf/flib/deallocate-profile-inc.f90,
	  external_libs/isf/flib/dict_add-inc.f90,
	  external_libs/isf/flib/dict_cont-inc.f90,
	  external_libs/isf/flib/dict_cont_arr-inc.f90,
	  external_libs/isf/flib/dict_getvec-inc.f90,
	  external_libs/isf/flib/dictionaries.f90,
	  external_libs/isf/flib/dictionaries_base.f90,
	  external_libs/isf/flib/dynamic_memory.f90,
	  external_libs/isf/flib/error_handling.f90,
	  external_libs/isf/flib/f_lib_highlev.f90,
	  external_libs/isf/flib/f_malloc-base-inc.f90,
	  external_libs/isf/flib/f_malloc-bound-inc.f90,
	  external_libs/isf/flib/f_malloc-bounds-inc.f90,
	  external_libs/isf/flib/f_malloc-check-inc.f90,
	  external_libs/isf/flib/f_malloc-extra-inc.f90,
	  external_libs/isf/flib/f_malloc-inc.f90,
	  external_libs/isf/flib/f_malloc-null-inc.f90,
	  external_libs/isf/flib/f_malloc-ptr-inc.f90,
	  external_libs/isf/flib/f_malloc-simple-inc.f90,
	  external_libs/isf/flib/f_malloc-total-inc.f90,
	  external_libs/isf/flib/f_malloc.f90,
	  external_libs/isf/flib/f_memcpy-base-inc.f90,
	  external_libs/isf/flib/f_memcpy-inc.f90,
	  external_libs/isf/flib/f_utils.f90,
	  external_libs/isf/flib/f_utils.inc,
	  external_libs/isf/flib/f_utils.inc.in,
	  external_libs/isf/flib/flush.f90,
	  external_libs/isf/flib/flush_fake.f90,
	  external_libs/isf/flib/get_command_argument_fake.f90,
	  external_libs/isf/flib/get_err-inc.f90,
	  external_libs/isf/flib/getadd-c-inc.f90,
	  external_libs/isf/flib/getadd.f90,
	  external_libs/isf/flib/halt_omp-inc.f90,
	  external_libs/isf/flib/malloc_templates-inc.f90,
	  external_libs/isf/flib/mem_profiling.f90,
	  external_libs/isf/flib/razero.f90,
	  external_libs/isf/flib/remove_omp-inc.f90,
	  external_libs/isf/flib/set_arr-inc.f90,
	  external_libs/isf/flib/time.f90, external_libs/isf/flib/utils.c,
	  external_libs/isf/flib/utilsadd.c,
	  external_libs/isf/flib/yaml_map-arr-inc.f90,
	  external_libs/isf/flib/yaml_map-inc.f90,
	  external_libs/isf/flib/yaml_map-mat-inc.f90,
	  external_libs/isf/flib/yaml_open-inc.f90,
	  external_libs/isf/flib/yaml_output.f90,
	  external_libs/isf/flib/yaml_parse.f90,
	  external_libs/isf/flib/yaml_parser.c,
	  external_libs/isf/flib/yaml_strings.f90,
	  external_libs/isf/flib/yaml_toa-arr-inc.f90,
	  external_libs/isf/flib/yaml_toa-inc.f90, external_libs/isf/src,
	  external_libs/isf/src/Build_Kernel.f90,
	  external_libs/isf/src/Makefile.am,
	  external_libs/isf/src/Makefile.in,
	  external_libs/isf/src/PSolver_Base_new.f90,
	  external_libs/isf/src/PSolver_Main.f90,
	  external_libs/isf/src/Poisson_Solver.f90,
	  external_libs/isf/src/configure.inc,
	  external_libs/isf/src/configure.inc.in,
	  external_libs/isf/src/conv_check_fft.f90,
	  external_libs/isf/src/conv_check_fftw.f90,
	  external_libs/isf/src/createKernel.f90,
	  external_libs/isf/src/cufft.cu, external_libs/isf/src/fftw.cpp,
	  external_libs/isf/src/gaussfit_Yukawa.inc,
	  external_libs/isf/src/gaussfit_wires.inc,
	  external_libs/isf/src/lazy_100.inc,
	  external_libs/isf/src/lazy_14.inc,
	  external_libs/isf/src/lazy_16.inc,
	  external_libs/isf/src/lazy_20.inc,
	  external_libs/isf/src/lazy_24.inc,
	  external_libs/isf/src/lazy_30.inc,
	  external_libs/isf/src/lazy_40.inc,
	  external_libs/isf/src/lazy_50.inc,
	  external_libs/isf/src/lazy_60.inc,
	  external_libs/isf/src/lazy_8.inc,
	  external_libs/isf/src/lazy_ISF_100_2048.inc,
	  external_libs/isf/src/lazy_ISF_14_2048.inc,
	  external_libs/isf/src/lazy_ISF_16_2048.inc,
	  external_libs/isf/src/lazy_ISF_16_2048.preinc,
	  external_libs/isf/src/lazy_ISF_20_2048.inc,
	  external_libs/isf/src/lazy_ISF_24_2048.inc,
	  external_libs/isf/src/lazy_ISF_30_2048.inc,
	  external_libs/isf/src/lazy_ISF_40_2048.inc,
	  external_libs/isf/src/lazy_ISF_50_2048.inc,
	  external_libs/isf/src/lazy_ISF_60_2048.inc,
	  external_libs/isf/src/lazy_ISF_8_2048.inc,
	  external_libs/isf/src/perfdata.inc,
	  external_libs/isf/src/scaling_function.f90,
	  external_libs/isf/src/wofz.f90, external_libs/isf/tests,
	  external_libs/isf/tests/Exercise,
	  external_libs/isf/tests/Exercise/PS_Exercise.tex,
	  external_libs/isf/tests/Exercise/PvsF.pdf,
	  external_libs/isf/tests/Exercise/accF.pdf,
	  external_libs/isf/tests/Exercise/accP.pdf,
	  external_libs/isf/tests/Exercise/accS.pdf,
	  external_libs/isf/tests/Exercise/emepot.pdf,
	  external_libs/isf/tests/Exercise/fandg.pdf,
	  external_libs/isf/tests/Exercise/plot.gnuplot,
	  external_libs/isf/tests/Exercise/rhoFpotF.pdf,
	  external_libs/isf/tests/Exercise/rhoSpotS.pdf,
	  external_libs/isf/tests/INSTALL,
	  external_libs/isf/tests/Makefile.am,
	  external_libs/isf/tests/Makefile.in,
	  external_libs/isf/tests/PS_Check.f90,
	  external_libs/isf/tests/PS_Check.ref.yaml,
	  external_libs/isf/tests/PS_Exercise.f90,
	  external_libs/isf/tests/PS_Program.f90,
	  external_libs/isf/tests/README,
	  external_libs/isf/tests/acc_F.20-100.ref,
	  external_libs/isf/tests/acc_P.20-100.ref,
	  external_libs/isf/tests/acc_S-128.20-100.ref,
	  external_libs/isf/tests/bench.csh,
	  external_libs/isf/tests/tols.yaml, external_libs/isf/wrappers,
	  external_libs/isf/wrappers/Makefile.am,
	  external_libs/isf/wrappers/README,
	  external_libs/isf/wrappers/allreduce-arr-inc.f90,
	  external_libs/isf/wrappers/allreduce-inc.f90,
	  external_libs/isf/wrappers/bcast-decl-arr-inc.f90,
	  external_libs/isf/wrappers/bcast-decl-inc.f90,
	  external_libs/isf/wrappers/bcast-inc.f90,
	  external_libs/isf/wrappers/cublas_fake.f90,
	  external_libs/isf/wrappers/dgemmsy,
	  external_libs/isf/wrappers/dgemmsy/dgemmsy.c,
	  external_libs/isf/wrappers/dgemmsy/dgemmsy.h,
	  external_libs/isf/wrappers/dgemmsy/dgemmsy_utils.c,
	  external_libs/isf/wrappers/dgemmsy/gemm_block_c.c,
	  external_libs/isf/wrappers/dgemmsy/gemm_block_c.h,
	  external_libs/isf/wrappers/dgemmsy/patterns.c,
	  external_libs/isf/wrappers/dgemmsy/patterns.h,
	  external_libs/isf/wrappers/dgemmsy/utils.h,
	  external_libs/isf/wrappers/dgemmsy/visitors.c,
	  external_libs/isf/wrappers/dgemmsy/visitors.h,
	  external_libs/isf/wrappers/fft2d.f90,
	  external_libs/isf/wrappers/fft3d.f90,
	  external_libs/isf/wrappers/fortran.c,
	  external_libs/isf/wrappers/gather-inc.f90,
	  external_libs/isf/wrappers/gather-inner-inc.f90,
	  external_libs/isf/wrappers/interface_cuda_fake.f90,
	  external_libs/isf/wrappers/interface_dgemmsy.f90,
	  external_libs/isf/wrappers/interface_dgemmsy_fake.f90,
	  external_libs/isf/wrappers/interface_ocl_fake.f90,
	  external_libs/isf/wrappers/linalg.f90,
	  external_libs/isf/wrappers/maxdiff-arr-inc.f90,
	  external_libs/isf/wrappers/maxdiff-decl-inc.f90,
	  external_libs/isf/wrappers/maxdiff-end-inc.f90,
	  external_libs/isf/wrappers/maxdiff-inc.f90,
	  external_libs/isf/wrappers/mpi.F90, m4/isf.m4,
	  src/common-rules.make, src/poisson/poisson.F90,
	  src/poisson/poisson_libisf.F90,
	  testsuite/components/16-hartree_3d_libisf.test: Added the new ISF
	  library as an external library, still can be used a linked
	  version. Therefore, HAVE_LIBISF pragma has been deleted from the
	  code and the corresponding test is done always.

2015-01-30 10:53  joseba

	* [r12784] external_libs/isf/Makefile.am: Hoping to solve the
	  problem with the make distcheck
	  Deleted also commented lines

2015-01-30 11:21  jrfsousa

	* [r12785] src/frozen/base_config.F90, src/frozen/base_density.F90,
	  src/frozen/base_external.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/bcnfg.F90,
	  src/frozen/bdnst.F90, src/frozen/bepot.F90, src/frozen/bgeom.F90,
	  src/frozen/bhmlt.F90, src/frozen/bhndl.F90, src/frozen/bmodl.F90,
	  src/frozen/bpotn.F90, src/frozen/bstts.F90, src/frozen/bsyst.F90,
	  src/frozen/bterm.F90, src/frozen/domain.F90,
	  src/frozen/fio_config.F90, src/frozen/fio_curvilinear.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_grid.F90, src/frozen/fio_hamiltonian.F90,
	  src/frozen/fio_handle.F90, src/frozen/fio_model.F90,
	  src/frozen/fio_simul_box.F90, src/frozen/fio_simulation.F90,
	  src/frozen/fio_states.F90, src/frozen/fio_system.F90,
	  src/frozen/storage.F90: Frozen:
	  
	  Changes naming conventions to be more clear.
	  
	  The name convention used is:
	  
	  {Calculation model name}_{Part of the calculation}.F90
	  
	  Calculation model mane:
	  
	  base:
	  
	  Implements basic features to be used by other calculations
	  
	  fio:
	  
	  Basic I/O "calculation" model
	  
	  Part of the calculation:
	  
	  handle:
	  
	  Implements the externally available interface to "handle" the
	  calculation.
	  
	  model:
	  
	  Implements a calculation "model".
	  
	  config:
	  
	  Prepares imput.
	  
	  The other calculation parts have intuitive names.

2015-01-30 11:57  jrfsousa

	* [r12786] src/frozen/Makefile.am: Frozen:
	  
	  Forgot the Makefile

2015-01-30 12:02  jrfsousa

	* [r12787] src/frozen/base_potential.F90: Frozen:
	  
	  Corrected procedure name.

2015-01-30 12:32  mjv500

	* [r12788] external_libs/isf/src/Makefile.in,
	  external_libs/yaml-0.1.4/include/Makefile.in,
	  src/grid/derivatives.F90, src/ions/simul_box.F90,
	  src/ions/symmetries.F90, src/states/states_io.F90: fix metric in
	  derivatives construction. Homogeneous electron gas appears ok,
	  perhaps except k-points off the high symmetry directions.

2015-01-30 18:13  jrfsousa

	* [r12789] src/frozen/Makefile.am, src/frozen/base_config.F90,
	  src/frozen/base_density.F90, src/frozen/base_external.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/fio_config.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_hamiltonian.F90, src/frozen/fio_handle.F90,
	  src/frozen/fio_model.F90, src/frozen/fio_simulation.F90,
	  src/frozen/fio_states.F90, src/frozen/fio_system.F90,
	  src/frozen/frozen_config.F90, src/frozen/frozen_density.F90,
	  src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90, src/frozen/simulation.F90: Frozen:
	  
	  Commits the "Frozen" calculation model layer.
	  
	  General code clean-up.

2015-01-30 21:02  dstrubbe

	* [r12790] external_libs/Makefile.am, src/common-rules.make,
	  src/poisson/poisson.F90, src/poisson/poisson_libisf.F90,
	  testsuite/components/16-hartree_3d_libisf.test: Reverting parts
	  of r12783: do not try to compile LibISF, since it has lines
	  considered illegal Fortran by all of the buildslaves that are not
	  using gfortran. This needs to be fixed (ideally, giving a patch
	  to BigDFT) and then compilation can be reinstated.

2015-01-30 21:35  dstrubbe

	* [r12792] external_libs/bader, share/recipes/eu: Setting some more
	  svn:ignore for new stuff.

2015-01-30 21:59  dstrubbe

	* [r12793] src/basic/oct_f.c: Fixing these warnings from clang C
	  compiler, due to r12714:
	  {{{
	  oct_f.c:179:6: warning: implicit declaration of function
	  'dirname' is invalid in C99 [-Wimplicit-function-declaration]
	  dn=dirname(fn);
	  ^
	  oct_f.c:179:5: warning: incompatible integer to pointer
	  conversion assigning to 'char *' from 'int';
	  dn=dirname(fn);
	  ^~~~~~~~~~~~
	  oct_f.c:194:6: warning: implicit declaration of function
	  'basename' is invalid in C99 [-Wimplicit-function-declaration]
	  bn=basename(fn);
	  ^
	  oct_f.c:194:5: warning: incompatible integer to pointer
	  conversion assigning to 'char *' from 'int';
	  bn=basename(fn);
	  ^~~~~~~~~~~~~
	  }}}

2015-01-30 22:20  dstrubbe

	* [r12794] src/scf/rdmft.F90, testsuite/functionals/06-rdmft.test:
	  RDMFT: Some small corrections, and caveats. Also, enabling test
	  to run in parallel, since it is fine for parallel in domains
	  (although not in states).

2015-01-30 22:34  dstrubbe

	* [r12795] src/main/Makefile.am,
	  testsuite/oct-run_regression_test.pl: * Remove _single
	  executables from list for 'make clean'.
	  * Remove default Precision setting for _single executables in
	  testsuite. The passing of the executable name to the
	  set_precision function is no longer useful.

2015-01-30 22:47  dstrubbe

	* [r12796] src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/frozen_external.F90: Commenting out offending lines in
	  frozen code preventing compilation with pathf90. Jose Rui, please
	  fix. Probably, simplifying all the interfaces and 'only
	  statements reassigning names would allow this to compile.

2015-01-30 22:48  dstrubbe

	* [r12797] src/basic/types.F90, src/basic/write_iter_low.c,
	  src/grid/io_function_inc.F90, src/grid/mesh_function_inc.F90:
	  Removing some more SINGLE_PRECISION code, including a level of
	  pointers in mf_interpolate_points that is no longer necessary.

2015-01-30 23:09  dstrubbe

	* [r12798] src/grid/nl_operator.F90, src/math/fftw.F90,
	  src/math/lalg_adv_lapack_inc.F90, src/math/pfft.F90,
	  src/poisson/poisson_isf.F90: Removing last uses of
	  SINGLE_PRECISION in the code, including removing a pointer which
	  is no longer necessary, and updating variable reference.

2015-01-30 23:17  dstrubbe

	* [r12799] src/system/eigensolver.F90: * Earlier and clearer
	  error-handling when trying to use ARPACK or FEAST eigensolver
	  when these libraries were not linked. Otherwise, you would just
	  get the listing of the variable reference, which is pretty
	  confusing since Eigensolver = arpack and feast are listed there.
	  * Removing commented includes.

2015-01-31 09:54  joseba

	* [r12800] external_libs/yaml-0.1.4,
	  external_libs/yaml-0.1.4/aclocal.m4,
	  external_libs/yaml-0.1.4/autom4te.cache,
	  external_libs/yaml-0.1.4/configure,
	  external_libs/yaml-0.1.4/configure.ac,
	  external_libs/yaml-0.1.4/include, external_libs/yaml-0.1.4/m4,
	  external_libs/yaml-0.1.4/src, external_libs/yaml-0.1.4/win32,
	  external_libs/yaml-0.1.4/yaml-0.1.pc.in: Deleted code of YAML
	  that we are not going to use.
	  Ignored from svn the files that are created while compiling

2015-01-31 10:03  joseba

	* [r12801] external_libs/isf/flib,
	  external_libs/isf/flib/Makefile.am: Simplified a bit the
	  Makefile; no dynamic library will be needed
	  Ignored from svn the files that are created while compiling

2015-01-31 10:11  joseba

	* [r12802] external_libs/isf/wrappers,
	  external_libs/isf/wrappers/Makefile.am: Simplified a bit the
	  Makefile
	  Ignored from svn the files that are created while compiling

2015-01-31 10:19  joseba

	* [r12803] external_libs/isf, external_libs/isf/src,
	  external_libs/isf/src/Makefile.am,
	  external_libs/isf/src/Makefile.in,
	  external_libs/isf/src/configure.inc.in,
	  external_libs/isf/src/conv_check_fft.f90,
	  external_libs/isf/src/conv_check_fftw.f90,
	  external_libs/isf/tests: Simplified a bit the Makefile; no
	  dynamic library will be needed
	  Ignored from svn the files that are created while compiling
	  Deleted unused files

2015-01-31 16:07  joseba

	* [r12804] external_libs/yaml-0.1.4/include/Makefile.in: Deleted
	  machine dependent Makefile.in from the repository

2015-01-31 16:10  joseba

	* [r12805] external_libs/isf/src/wofz.f90,
	  external_libs/isf/wrappers/fft3d.f90: Added variables types to
	  undefined ones.
	  With this change compiles and runs correctly with g95

2015-01-31 16:30  jrfsousa

	* [r12806] src/frozen/base_density.F90, src/frozen/fio_density.F90:
	  Frozen:
	  
	  Tries to fix compilation problems with pathf95.

2015-01-31 16:43  joseba

	* [r12807] configure.ac: A help to distcheck to properly compile

2015-02-02 04:07  xavier

	* [r12808] src/utils/Makefile.am, src/utils/liquid.F90: Removed the
	  unused oct-liquid utility.

2015-02-02 04:31  xavier

	* [r12809] src/td/tdpsf.F90: A module was not declared private.

2015-02-02 09:57  joseba

	* [r12810] external_libs/Makefile.am, src/common-rules.make,
	  src/poisson/poisson.F90, src/poisson/poisson_libisf.F90,
	  testsuite/components/16-hartree_3d_libisf.test: Another try to
	  the new libisf since it compiles with g95 and ifort
	  13.1.3.20130607

2015-02-02 11:26  joseba

	* [r12811] configure.ac, src/common-rules.make: Added files for the
	  previous commit. They correct:
	  * the missing folder isf error
	  * not poisson_solver module found

2015-02-02 11:56  joseba

	* [r12812] external_libs/isf/flib/Makefile.am,
	  external_libs/isf/src/Makefile.am,
	  external_libs/isf/wrappers/Makefile.am: Getting rid of includes
	  directory that we don't need
	  Removing an -I without value to satisfy the complain of PGI
	  compiler

2015-02-02 12:11  joseba

	* [r12813] external_libs/isf/flib/Makefile.am,
	  external_libs/isf/src/Makefile.am: More deletions of empty -I

2015-02-04 01:08  xavier

	* [r12814] src/states/states_block.F90: Added a clarification why
	  states_block routines should not be used.

2015-02-04 08:12  joseba

	* [r12815] src/common-rules.make: Included also the wrappers
	  folder, that so compiler find the proper module.
	  Change made for the PGI compiler, but might be helpful for others
	  also.

2015-02-04 08:19  joseba

	* [r12816] external_libs/isf/flib/Makefile.am: flush is not
	  implemented in all the compilers and we don't use any I/O in the
	  ISF library. So, deactivating the flush

2015-02-04 08:47  joseba

	* [r12817] external_libs/isf/flib/f_utils.f90: Temporary fix for
	  the Path64 compiler. As we are not using I/O from ISF, should not
	  alter any behaviour.

2015-02-04 09:28  joseba

	* [r12818] external_libs/isf/flib/f_utils.f90: Restored the inquire
	  call. Now compiles with Path64, with common integer as a
	  parameter

2015-02-04 19:19  dstrubbe

	* [r12820] external_libs/isf/flib, external_libs/isf/flib/utils.c,
	  external_libs/isf/flib/utilsadd.c, external_libs/yaml-0.1.4/src:
	  * Octopus requires time.h to be available, so there is no purpose
	  in letting ISF support its not being available.
	  * Including sys/time.h to suppress this warning from clang, on
	  utils.c:
	  {{{
	  utils.c:40:8: warning: implicit declaration of function
	  'gettimeofday' is invalid in C99
	  [-Wimplicit-function-declaration]
	  rv = gettimeofday(&now, NULL);
	  ^
	  }}}
	  * Declaring prototype for a function to suppress this warning
	  from clang:
	  {{{
	  utilsadd.c:57:12: warning: implicit declaration of function
	  'call_external_f_' is invalid in C99
	  [-Wimplicit-function-declaration]
	  FC_FUNC_(call_external_f,CALL_EXTERNAL_F)(ext);//,ext_data);
	  ^
	  ../../../config.h:63:29: note: expanded from macro 'FC_FUNC_'
	  #define FC_FUNC_(name,NAME) name ## _
	  ^
	  <scratch space>:135:1: note: expanded from macro
	  'call_external_f'
	  call_external_f_
	  ^
	  }}}
	  * svn:ignore .deps files.

2015-02-04 20:45  dstrubbe

	* [r12821] external_libs/isf/flib/Makefile.am,
	  external_libs/isf/flib/f_utils.inc.in: * Including a missing file
	  from LibISF (f_utils.inc) to make the distcheck test pass.
	  * Adding a missing dependency on it.
	  * Since we are not creating f_utils.inc from f_utils.inc.in, the
	  latter file is removed.

2015-02-04 20:49  dstrubbe

	* [r12822] external_libs/isf/wrappers/Makefile.am: The file
	  external_libs/isf/wrappers/mpi.F90 needs to be pre-processed
	  which was not happening. We were implicitly using the Fortran
	  compiler's own (inadequate) pre-processing, which failed in the
	  case of gcc 4.9 for example. I adapted the rule from
	  src/common-rules.mk to accomplish this.

2015-02-04 21:57  dstrubbe

	* [r12823] external_libs/isf/flib/utils.c: Apparently it causes
	  trouble for some compilers to have both time.h and sys/time.h
	  included, so we will try just the latter.

2015-02-04 22:00  dstrubbe

	* [r12824] src/math/math.F90: Suppressing warning about
	  unterminated apostrophe.

2015-02-04 22:20  dstrubbe

	* [r12825] external_libs/isf/wrappers/Makefile.am,
	  external_libs/isf/wrappers/mpi.F90: * Fixing include path for
	  compiling ISF's mpi.F90, which was causing this message for some
	  compilers: Error: Can't open included file 'gather-inc.f90'.
	  * Fixing unterminated apostrophe warning.

2015-02-04 22:55  dstrubbe

	* [r12826] external_libs/isf/wrappers/Makefile.am: This may fix the
	  problem of the path builder not finding the mpif.h include file
	  properly in LibISF, with the VPATH build.

2015-02-04 23:28  dstrubbe

	* [r12827] external_libs/isf/wrappers/Makefile.am,
	  external_libs/isf/wrappers/mpi.F90: Reverting r12826 which did
	  not help. The problem is the dirty hack used by LibISF for mpif.h
	  when compiling in serial. A real one from an MPI installation
	  seems to be found in preference to the fake one being made. If we
	  include via the preprocessor rather than the Fortran compiler, it
	  seems to work.

2015-02-05 00:30  dstrubbe

	* [r12828] src/grid/nl_operator.F90: Bugfix to r12798, in which I
	  accidentally swapped the default for
	  non-local operators, and made the OpenCL slaves fail.

2015-02-05 00:47  dstrubbe

	* [r12829] external_libs/Makefile.am,
	  external_libs/isf/src/Makefile.am, src/common-rules.make,
	  src/poisson/poisson.F90, src/poisson/poisson_libisf.F90,
	  testsuite/components/16-hartree_3d_libisf.test: Reverting r12810.
	  There is still quite a bit to do for making LibISF compile
	  prolerly, and we should make the BuildBot still useful for other
	  development in the meantime. Moreover, the compilation errors on
	  chum intel (pointers cannot have intent) and chum pgi (illegal
	  use of // on derived type) seem to be cases in which Fortran 2003
	  features are being used, so we cannot make compilation succeed
	  until after the test farm reorganization in favor of newer
	  compliant compilers.

2015-02-05 03:00  dstrubbe

	* [r12830] src/sternheimer/kdotp.F90: Bugfix: wrong indices in
	  2nd-order kdotp wavefunction calculation, as pointed out by
	  Irina.

2015-02-05 08:59  joseba

	* [r12831] external_libs/README, external_libs/isf/COPYING,
	  external_libs/isf/README: License information about ISF and YAML
	  libraries

2015-02-05 10:47  joseba

	* [r12832] src/grid/partition.F90: Added a initialization of the
	  part_global matrix for the processes that don't read the
	  partition without MPI2. Still working to guess what happens with
	  the partition error.

2015-02-05 11:02  joseba

	* [r12833] src/grid/partition.F90: Only one process writes a
	  partition file. Otherwise, at least two processes might be
	  writing to the same file, the same data.
	  This is a try to solve the partition randoom error

2015-02-05 18:56  dstrubbe

	* [r12834] configure.ac, external_libs/README,
	  external_libs/isf/flib: * Commenting out isf Makefiles for now,
	  to help distcheck pass.
	  * Line at end of README.
	  * svn:ignore fake mpif.h file from isf.

2015-02-05 18:59  dstrubbe

	* [r12835] configure.ac: Oops, commenting out files as I did in the
	  previous commit causes an error from autotools.

2015-02-05 22:01  dstrubbe

	* [r12836] testsuite/components/18-interpolation.test,
	  testsuite/finite_systems_3d/11-sic.test,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/05-ks_inversion.test: Correcting $Id$ line
	  in a few files, and setting svn:keywords where not present.

2015-02-05 22:05  dstrubbe

	* [r12837] testsuite/oct-run_testsuite.sh.in: * The testsuite
	  script now states what test groups it is running.
	  * You can provide a directory name ending on '/' as a test group.

2015-02-05 22:17  dstrubbe

	* [r12838] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: Removing the options to
	  provide a suffix to the executables in the testsuite (beyond the
	  previous _single and current _mpi suffixes) which doesn't seem
	  very useful to me.

2015-02-05 22:20  dstrubbe

	* [r12839] testsuite/oct-run_testsuite.sh.in: * The option -m was
	  still being parsed despite being removed in r11959.
	  * Ordering the option cases according to the getopts listing.

2015-02-05 22:27  dstrubbe

	* [r12840] testsuite/README: Improvements to documentation on
	  testsuite.

2015-02-05 22:35  dstrubbe

	* [r12841] testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/09-morse.test,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/periodic_systems/01-free_electrons.test: * Removing
	  references to octopus_single from the testsuite.
	  * Removing commented obsolete tag "Arch" from a testsuite file.

2015-02-06 00:24  dstrubbe

	* [r12842] src/states/states_calc_inc.F90: Some fatal errors that
	  should come only from the root process.

2015-02-06 05:22  xavier

	* [r12843] testsuite/Makefile.am, testsuite/open_systems: Removed
	  the open systems tests.

2015-02-06 06:22  xavier

	* [r12844] configure.ac: Removed the open quantum systems tests
	  Makefile from the configure.

2015-02-06 06:54  xavier

	* [r12845] configure.ac: Since we branched 5.0.x, renamed the
	  development version to "octopus tetricus".

2015-02-06 12:44  joseba

	* [r12846] src/grid/partition.F90: Only one rank per partition
	  group should write the partition restart information. Otherwise,
	  more than once is trying to be written data. This should avoid
	  the random partition reading errors

2015-02-06 13:46  helbig

	* [r12847] src/scf/rdmft.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_x_inc.F90: using doep_x now in rdmft
	  calculation to calculate Hartree and exchange integrals

2015-02-06 15:15  xavier

	* [r12848] src/td/Makefile.am, src/td/ob_mem.F90,
	  src/td/ob_propagator.F90, src/td/ob_src.F90, src/td/ob_terms.F90,
	  src/td/propagator.F90, src/td/propagator_cn_inc.F90,
	  src/td/td.F90: Removed the td part of the open quantum systems.

2015-02-06 15:16  xavier

	* [r12849] src/scf/Makefile.am, src/scf/ground_state.F90,
	  src/scf/lcao.F90, src/scf/ob_lippmann_schwinger.F90,
	  src/scf/scf.F90: Removed the ground state part of open quantum
	  systems.

2015-02-06 15:18  xavier

	* [r12850] src/system/system.F90, src/system/v_ks.F90: Removed the
	  open quantum systems part from system.

2015-02-06 15:18  xavier

	* [r12851] src/hamiltonian/Makefile.am, src/hamiltonian/epot.F90,
	  src/hamiltonian/hamiltonian.F90, src/hamiltonian/ob_lead.F90:
	  Removed the open quantum systems part from hamiltonian.

2015-02-06 15:19  xavier

	* [r12852] src/states/Makefile.am, src/states/ob_green.F90,
	  src/states/restart.F90, src/states/states.F90,
	  src/states/states_io.F90, src/states/states_restart.F90: Removed
	  the open quantum systems part from states.

2015-02-06 15:20  xavier

	* [r12853] src/grid/Makefile.am, src/grid/grid.F90,
	  src/grid/mesh_init.F90, src/grid/ob_grid.F90,
	  src/grid/ob_interface.F90, src/ions/simul_box.F90: Removed the
	  open quantum systems parts from the grid and simulation box.

2015-02-06 16:45  joseba

	* [r12854] src/scf/lcao_inc.F90: Corrected my name in the copyright

2015-02-06 17:42  xavier

	* [r12855] src/hamiltonian/born_charges.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/gauge_field.F90,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/lasers.F90, src/hamiltonian/pcm.F90,
	  src/hamiltonian/scf_tol.F90, src/hamiltonian/species_pot.F90:
	  Removed calls to datasets_check in variable parsing.

2015-02-06 17:43  xavier

	* [r12856] src/td/pes.F90, src/td/pes_mask.F90, src/td/pes_rc.F90,
	  src/td/propagator.F90, src/td/spectrum.F90, src/td/td.F90,
	  src/td/td_init_inc.F90, src/td/td_write.F90, src/td/tdpsf.F90:
	  Removed calls to datasets_check in variable parsing.

2015-02-06 17:44  xavier

	* [r12857] src/poisson/poisson.F90,
	  src/poisson/poisson_corrections.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_fmm.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_isf.F90, src/poisson/poisson_multigrid.F90:
	  Removed calls to datasets_check in variable parsing.

2015-02-06 17:44  xavier

	* [r12858] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/vdw.F90: Removed calls to datasets_check in
	  variable parsing.

2015-02-06 17:46  xavier

	* [r12859] src/opt_control/controlfunction.F90,
	  src/opt_control/filter.F90, src/opt_control/initst.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_spin_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/opt_control/target_velocity_inc.F90: Removed calls to
	  datasets_check in variable parsing.

2015-02-06 17:46  xavier

	* [r12860] src/scf/ground_state.F90, src/scf/lcao.F90,
	  src/scf/mix.F90, src/scf/rdmft.F90, src/scf/scf.F90,
	  src/xc/functionals.F90, src/xc/xc.F90: Removed calls to
	  datasets_check in variable parsing.

2015-02-06 17:47  xavier

	* [r12861] src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/kpoints.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90, src/ions/symmetries.F90,
	  src/ions/xyz_adjust.F90: Removed calls to datasets_check in
	  variable parsing.

2015-02-06 17:48  xavier

	* [r12862] src/basic/Makefile.am, src/basic/datasets.F90,
	  src/basic/distributed.F90, src/basic/io.F90, src/basic/loct.F90,
	  src/basic/messages.F90, src/basic/multicomm.F90,
	  src/basic/octcl_kernel.F90, src/basic/opencl.F90,
	  src/basic/profiling.F90, src/basic/space.F90,
	  src/basic/topology.F90, src/basic/unit_system.F90,
	  src/grid/batch.F90, src/grid/batch_ops.F90, src/grid/cube.F90,
	  src/grid/cube_function.F90, src/grid/curv_briggs.F90,
	  src/grid/curv_gygi.F90, src/grid/curv_modine.F90,
	  src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/grid/double_grid.F90,
	  src/grid/grid.F90, src/grid/io_function.F90, src/grid/mesh.F90,
	  src/grid/mesh_cube_map.F90, src/grid/mesh_cube_parallel_map.F90,
	  src/grid/mesh_init.F90, src/grid/mesh_partition.F90,
	  src/grid/multigrid.F90, src/grid/nl_operator.F90,
	  src/grid/symmetrizer.F90, src/main/casida.F90, src/main/gcm.F90,
	  src/main/geom_opt.F90, src/main/invert_ks.F90, src/main/main.F90,
	  src/main/phonons_fd.F90, src/main/run.F90,
	  src/main/static_pol.F90, src/main/test.F90, src/main/unocc.F90,
	  src/math/fft.F90, src/math/nfft.F90, src/math/ode_solver.F90,
	  src/math/pnfft.F90, src/math/root_solver.F90,
	  src/math/sparskit.F90, src/math/tdfunction.F90,
	  src/species/ps.F90, src/species/ps_pspio_inc.F90,
	  src/species/species.F90, src/states/cmplxscl.F90,
	  src/states/density.F90, src/states/linear_response.F90,
	  src/states/modelmb_density_matrix.F90,
	  src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_particles.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_calc.F90, src/states/states_dim.F90,
	  src/states/states_io.F90, src/states/states_restart.F90,
	  src/system/current.F90, src/system/eigen_arpack.F90,
	  src/system/eigen_feast.F90, src/system/eigensolver.F90,
	  src/system/elf.F90, src/system/energy_calc.F90,
	  src/system/exponential.F90, src/system/linear_solver.F90,
	  src/system/output.F90, src/system/output_me.F90,
	  src/system/partial_charges.F90, src/system/pert.F90,
	  src/system/preconditioners.F90, src/system/subspace.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep.F90,
	  src/utils/casida_spectrum.F90, src/utils/centergeom.F90,
	  src/utils/convert.F90, src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/infrared.F90,
	  src/utils/local_multipoles.F90, src/utils/local_write.F90,
	  src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90: Removed the datasets functionality.

2015-02-06 18:00  acastro

	* [r12863] doc/html/vars/Makefile.am: Removed the Open Boundaries
	  html file in the vars Makefile.am
	  (otherwise make install fails)

2015-02-06 18:01  xavier

	* [r12864] src/basic/messages.F90, src/main/geom_opt.F90,
	  src/main/test.F90, src/poisson/poisson.F90,
	  src/utils/convert.F90: Updated old style string declarations.

2015-02-06 18:48  xavier

	* [r12865] doc/html/vars/Makefile.am: Removed the dependency as
	  well.

2015-02-06 20:07  xavier

	* [r12866] src/system/current.F90: Added the option of calculating
	  the current density without the gradient term.

2015-02-06 20:36  dstrubbe

	* [r12867] m4/yaml.m4: Removing unnecessary message in configure.

2015-02-06 21:28  dstrubbe

	* [r12868] src/system/current.F90: Fixing call to
	  messages_experimental in light of r12866, which made nearly all
	  tests fail.

2015-02-06 21:33  dstrubbe

	* [r12869] src/basic/io.F90, src/basic/messages.F90: Removing
	  comments about datasets.

2015-02-06 21:53  dstrubbe

	* [r12870] src/main/main.F90: Removing non-existent CalculationMode
	  = td_transport from documentation. This was merged into the open
	  systems code in 2008!

2015-02-06 22:07  dstrubbe

	* [r12872]
	  testsuite/finite_systems_3d/21-lobpcg.01-spin_polarized.inp,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp,
	  testsuite/finite_systems_3d/21-lobpcg.test: Using
	  ParallelizationGroupRanks with fill, we can make a test runnable
	  with MPI without ScaLAPACK, and thus enable it unconditionally.

2015-02-06 22:16  dstrubbe

	* [r12873] src/hamiltonian/hamiltonian.F90, src/ions/kpoints.F90,
	  src/ions/simul_box.F90, src/states/states_restart.F90: Removing
	  some documentation, parameters, and code used only by open
	  quantum systems.

2015-02-06 22:50  xavier

	* [r12874] src/basic/messages.F90, src/basic/parser.F90,
	  src/basic/unit_system.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/kick.F90, src/hamiltonian/scf_tol.F90,
	  src/ions/ion_dynamics.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90, src/opt_control/initst.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_spin_inc.F90,
	  src/sternheimer/sternheimer.F90, src/system/linear_solver.F90,
	  src/system/preconditioners.F90, src/td/td.F90: Replaced
	  parse_isdef, that returns an integer, by the new function
	  parse_is_defined that returns a logical.

2015-02-06 22:59  dstrubbe

	* [r12875] src/grid/grid.F90, src/grid/mesh.F90,
	  src/ions/simul_box.F90, src/states/states.F90,
	  src/system/energy_calc_inc.F90: Removing more open quantum
	  systems stuff. I have left the transport_dim field in the
	  simul_box dump file for now, but set to zero and ignored on
	  reading, so as not possibly to break compatibility with older
	  files.

2015-02-06 23:25  dstrubbe

	* [r12876] src/scf/scf.F90: Clarifying confused sentence in
	  documentation.

2015-02-06 23:56  dstrubbe

	* [r12877] external_libs/isf/wrappers: Ignore silly fake mpif.h
	  here too.

2015-02-07 00:17  dstrubbe

	* [r12878] src/ions/symmetries.F90: PGI 13.10 does not handle the
	  matmul in forall properly for calculating reduced coordinates to
	  pass to spglib (introduced r12732), which was making many of the
	  periodic tests fail on hbar, due to the symmetry finding with
	  spglib failing. For lithium at least, the reduced coordinates of
	  the two atoms were both (0.5, 0.5, 0.5). Hence, I have made an
	  ordinary loop instead of forall. This is hardly a computationally
	  intensive procedure anyway.

2015-02-07 00:24  dstrubbe

	* [r12879] src/ions/symmetries.F90: If symmetry-finding with spglib
	  fails, write the coordinates, to help diagnose the problem.

2015-02-07 00:50  xavier

	* [r12880] src/td/pes_mask.F90: The parsing of photoemission
	  variables now is done with units. This
	  actually fixes a bug, since unit conversion was not done after
	  parsing.

2015-02-07 03:54  xavier

	* [r12882] src/include/complex.F90, src/include/complex_single.F90,
	  src/include/integer.F90, src/include/real.F90,
	  src/include/real_single.F90, src/include/undef.F90: Defined
	  template includes for single precision types.

2015-02-07 05:33  xavier

	* [r12883] src/basic/comm.F90: The comm_m module is now compiled in
	  both double and single precision.

2015-02-07 15:40  xavier

	* [r12884] src/include/Makefile.am: I forgot to add the new include
	  files to the Makefile.

2015-02-07 16:07  xavier

	* [r12885] src/basic/types.F90: The type_m module now defined
	  single precision types.

2015-02-07 16:08  xavier

	* [r12886] src/basic/Makefile.am, src/basic/profiling.F90: The
	  function profiling_count_transfers can now receive a type object.

2015-02-07 16:17  xavier

	* [r12887] src/grid/batch.F90, src/grid/batch_inc.F90: Batches can
	  now work with single precision values.

2015-02-07 16:20  xavier

	* [r12888] src/grid/boundaries.F90, src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90, src/grid/nl_operator.F90,
	  src/grid/nl_operator_inc.F90, src/grid/subarray.F90: Several grid
	  routines now support single precision.

2015-02-07 16:21  xavier

	* [r12889] src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/main/test.F90: The derivatives test can now run in single
	  precision.

2015-02-07 17:08  xavier

	* [r12890] src/grid/nl_operator_inc.F90: Simplified the handling of
	  the weight arrays.

2015-02-07 17:36  dstrubbe

	* [r12891] src/grid/batch.F90: Bugfix: single-precision batch array
	  were not deallocated, causing memory leak in derivatives tests.
	  Introduced in r12887.

2015-02-07 18:12  xavier

	* [r12892] src/grid/cube_function_inc.F90,
	  src/grid/io_function_inc.F90, src/grid/mesh_function_inc.F90,
	  src/grid/nl_operator.F90, src/grid/par_vec.F90,
	  src/grid/symmetrizer_inc.F90: * Disabled single-precision
	  compilation for some subroutines in
	  mesh_function that use interpolation.
	  
	  * par_vec_m is now compiled in single precision too.
	  
	  * Declared an interface for the par_vec functions.

2015-02-07 19:16  xavier

	* [r12893] src/frozen/frozen_density.F90,
	  src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_simulation.F90, src/frozen/frozen_tnadd.F90: *
	  Removed some pointless object renaming to try to make ifort
	  happy.
	  * In Octopus we do not use the 'only' statement.

2015-02-07 20:18  xavier

	* [r12894] src/frozen/frozen_density.F90: Fixed compilation problem
	  in my previous commit.

2015-02-07 20:32  dstrubbe

	* [r12895] src/basic/io.F90, src/frozen/fio_config.F90,
	  src/grid/index.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh.F90, src/grid/mesh_init.F90,
	  src/ions/read_coords.F90, src/ions/simul_box.F90,
	  src/scf/lcao_inc.F90, src/species/ps_cpi.F90,
	  src/species/ps_fhi.F90, src/species/ps_hgh.F90,
	  src/species/ps_psf.F90, src/species/ps_upf.F90,
	  src/species/species.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/states/states_restart.F90,
	  src/system/output.F90, src/system/output_h_inc.F90,
	  src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/local_multipoles.F90: All the 'is_tmp' arguments and
	  variables relate ultimately to the io_workpath function, which
	  used such an argument to decide whether to add the label of the
	  current dataset. Since datasets were removed in r12862, this
	  concept no longer has any meaning, so I have removed it
	  everywhere.

2015-02-07 20:55  acastro

	* [r12897] src/opt_control/propagation.F90, src/system/forces.F90:
	  Simplified (slightly) the computation of the forces on the
	  costate classical
	  coordinates in optimal control runs. Added some info about
	  propagation times.

2015-02-07 20:57  dstrubbe

	* [r12898] src/hamiltonian/hamiltonian.F90,
	  src/ions/symmetries.F90, src/poisson/poisson_fmm.F90,
	  src/states/states.F90, src/td/td_write.F90: Unused variables, and
	  a typo in a comment.

2015-02-07 21:16  dstrubbe

	* [r12899] src/hamiltonian/hamiltonian_inc.F90: * Useless variables
	  and pointer.
	  * Fixing an intent.
	  * Formatting.

2015-02-07 21:34  dstrubbe

	* [r12900] src/system/forces.F90: Unused variables.

2015-02-07 23:25  dstrubbe

	* [r12901] src/math/math.F90: PUSH/POP, SAFE_(DE)ALLOCATE, and
	  correct routine name.

2015-02-08 04:08  xavier

	* [r12902] src/basic/opencl.F90: Compilation of opencl functions is
	  single precision.

2015-02-08 06:01  xavier

	* [r12903] src/main/test.F90: The single precision derivatives test
	  is not executed by default.

2015-02-08 16:53  dstrubbe

	* [r12904] src/system/forces.F90: * Bugfix to r12897, which assumed
	  3D, and thus made the optimal control classical test fail since
	  it was 2D.
	  * Comment on how a routine seems to duplicate what is done for
	  the ordinary forces already.

2015-02-08 19:32  dstrubbe

	* [r12905] src/grid/partition.F90: Bugfix: An overzealous assertion
	  in r12651 breaks parallelism in domains with MPI1. (Do we not
	  have any MPI1 builders...?)

2015-02-08 22:24  xavier

	* [r12906] src/td/td_write.F90: Projections are now calculated
	  using states_get_state rather than
	  accessing st%X(psi) directly.

2015-02-08 22:25  xavier

	* [r12907] src/td/td_write.F90: After my previous commit, these
	  assertions are now longer needed.

2015-02-08 22:47  xavier

	* [r12908] src/td/td_calc.F90: Replaced an access to st%X(psi) with
	  states_get_state.

2015-02-09 03:59  dstrubbe

	* [r12909] configure.ac, src/system/output_etsf_inc.F90,
	  testsuite/periodic_systems/09-etsf_io.test: The ETSF_IO test was
	  failing with a small size discrepancy because of the change in
	  the code name for this version in r12845, which is written into
	  the file via PACKAGE_STRING. I have updated the values and added
	  comments about this surprising fact.

2015-02-09 04:05  xavier

	* [r12910] src/td/pes_rc.F90: Removed a direct access to st%zpsi in
	  photoemission code. Note: this
	  function does not appear to be used by any test, so I couldn't
	  test my
	  changes.

2015-02-09 04:42  xavier

	* [r12911] src/states/states.F90, src/states/states_inc.F90,
	  src/td/propagator_rk_inc.F90: * Defined a version of
	  states_get_state that works with a full array of
	  states.
	  * Started converting the Runge-Kutta propagator.

2015-02-09 14:58  helbig

	* [r12912] src/system/xc_ks_inversion.F90,
	  testsuite/functionals/05-ks_inversion.test: changed method to
	  update potential in ks inversion and added correct asymptotic
	  behavior, adjusted test accordingly

2015-02-09 16:03  xavier

	* [r12913] src/td/propagator_rk_inc.F90: * Removed the access to
	  st%X(psi) from the inhomogeneous term in
	  Runge-Kutta. This part of the code does not seem to be tested
	  anywhere.
	  
	  * Removed an unnecessary allocation.

2015-02-09 16:12  xavier

	* [r12914] src/td/propagator_magnus_inc.F90: Removed access to
	  st%X(psi) in the magnus propagator.

2015-02-09 16:27  xavier

	* [r12915] src/td/pes_mask.F90: Removed access to st%X(psi) in the
	  photoemission code.

2015-02-09 17:17  dstrubbe

	* [r12916] src/grid/mesh_partition.F90: Bugfix: Printing the
	  partition (as from DebugLevel >=1) failed if compiled with
	  --max-dim=4 or larger due to nadequate format statements.

2015-02-09 19:05  dstrubbe

	* [r12922] testsuite/oct-run_testsuite.sh.in: Bugfix: the -g and -q
	  options for giving a comma-separated list of test groups worked
	  only for one or two groups, but not more. Making a sed command
	  act globally solves the problem.

2015-02-09 20:02  dstrubbe

	* [r12925] src/basic/profiling.F90: Bugfix: a race condition in
	  creating a directory could make ProfilingMode = prof_memory_full
	  in parallel crash with failure to open a file. The debugging
	  tools themselves need debugging...

2015-02-09 21:50  xavier

	* [r12926] testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/10-bomd.02-td.inp,
	  testsuite/real_time/10-bomd.03-td_restart.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp: * If
	  velocities are somehow set or controlled, then the ions are moved
	  by default.
	  
	  * The CAETRS and Crank-Nicolson tests set the velocities, but do
	  not
	  move the ions. In this case, now one has to set MoveIons = no.
	  
	  * Removed the MoveIons declaration from places where it is not
	  necessary.

2015-02-09 22:02  xavier

	* [r12927] src/ions/ion_dynamics.F90: This changes were accidentaly
	  left out of my last commit: If
	  velocities are somehow set or controlled, then the ions are moved
	  by
	  default.

2015-02-09 22:02  xavier

	* [r12928] src/basic/profiling.F90: Fixed compilation in serial.

2015-02-10 00:02  xavier

	* [r12929] testsuite/real_time/16-sparskit.02-kick.inp: The atoms
	  should not move for this test, even when velocities are
	  given in the input file.

2015-02-10 00:48  xavier

	* [r12930] src/td/pes_mask_out_inc.F90: Replaced st%zpsi by
	  states_get_state/states_set_state.

2015-02-10 03:35  dstrubbe

	* [r12931] jube/analyse-pattern-octopus.xml,
	  src/basic/profiling.F90: Renaming profiling unit COMPLETE_DATASET
	  to COMPLETE_RUN, given decommissioning of datasets.

2015-02-10 04:17  dstrubbe

	* [r12932] scripts/oct-check_deallocs: Bugfixes to old script
	  oct-check_deallocs from Miguel (r5332):
	  * The filename needs to be removed from the variable name, or
	  deallocations in a different file from the allocation are not
	  counted.
	  * The $alloc and $dealloc should be initialized to zero for each
	  key, or else the final summary just says blank instead of zero if
	  a variable was never allocated or never deallocated.
	  * List a variable only under allocs not deallocated or the
	  reverse, but not both.
	  * Added a bit of documentation.

2015-02-10 14:05  helbig

	* [r12934] src/system/xc_ks_inversion.F90: removed unused
	  subroutine precond_kiks, added correct asymptotics to 2 particle
	  inversion

2015-02-10 14:40  joseba

	* [r12935] m4/isf.m4: libwrappers libflib and libyaml are necessary
	  to compile the external new ISF

2015-02-10 15:23  dstrubbe

	* [r12938] testsuite/components/11-hartree_cl.test,
	  testsuite/components/18-interpolation.test: All tests should be
	  runnable with the MPI executables, at least with just one
	  processor. The interpolation test dies with an assertion that we
	  are not parallel in domains if using more than one processor.
	  Xavier, should the Hartree CL test be runnable in parallel?

2015-02-10 15:28  dstrubbe

	* [r12940] src/include/global.h: * Use the TOSTRING macro for the
	  variable names reported to memory profiling, so that X( ) and
	  other macros are properly expanded. This gives more information
	  on what is going on, and allows oct-check_deallocs to work more
	  accurately.
	  * Use the TOSTRING macro for the ASSERT macro, rather than a
	  similar __STRING macro it had. Conceivably in some case macros
	  were not being fully expanded for assertions; at any rate, it is
	  cleaner to have just one macro of this sort.

2015-02-10 15:56  dstrubbe

	* [r12942] src/grid/mesh_partition.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/system/eigen_cg_inc.F90: Fixing some memory leaks, identified
	  via ProfilingMode = prof_memory_full and oct-check_deallocs.

2015-02-10 17:20  xavier

	* [r12943] src/system/xc_kli_pauli_inc.F90: Calls to
	  states_get_state. This code does not appear to be tested.

2015-02-10 17:30  xavier

	* [r12944] src/td/td.F90: Set the parallel partition to be
	  scalapack compatible for td, in case
	  BO is used. This is now always enabled because it is slightly
	  suboptimal, for example if 13 are distributed among 4 processors,
	  the
	  default Octopus strategy would be to arrange them as 4 3 3 3,
	  while
	  to be compatible with scalapack we have to do 4 4 4 1 .
	  
	  To make this work better we would need to initialize the
	  parallelization later, after we know what kind of calculation we
	  are
	  running.

2015-02-10 20:45  xavier

	* [r12945] src/td/td_init_inc.F90,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/06-restart.06-td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.07-restart_td_calc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/photo_electron/05-pfft.02-mask.inp,
	  testsuite/photo_electron/05-pfft.03-ba.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/05-time_propagation.02-td_domains.inp,
	  testsuite/real_time/05-time_propagation.03-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/09-angular_momentum.02-td_gipaw.inp,
	  testsuite/real_time/09-angular_momentum.03-td_icl.inp,
	  testsuite/real_time/09-angular_momentum.04-rotatory_strength.inp,
	  testsuite/real_time/10-bomd.02-td.inp,
	  testsuite/real_time/10-bomd.03-td_restart.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/12-absorption.02-td.inp,
	  testsuite/real_time/12-absorption.03-td-restart.inp,
	  testsuite/real_time/12-absorption.04-spectrum.inp,
	  testsuite/real_time/12-absorption.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/12-absorption.06-power_spectrum.inp,
	  testsuite/real_time/13-absorption-spin.02-td.inp,
	  testsuite/real_time/13-absorption-spin.03-td-restart.inp,
	  testsuite/real_time/13-absorption-spin.04-spectrum.inp,
	  testsuite/real_time/13-absorption-spin.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/13-absorption-spin.06-td_spinkick.inp,
	  testsuite/real_time/13-absorption-spin.07-spectrum_triplet.inp,
	  testsuite/real_time/14-absorption-spinors.02-td.inp,
	  testsuite/real_time/14-absorption-spinors.03-td-restart.inp,
	  testsuite/real_time/14-absorption-spinors.04-spectrum.inp,
	  testsuite/real_time/14-absorption-spinors.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.02-td.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.03-spectrum.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: Changed the input interface
	  to set number of propagation steps:
	  
	  * Defined a new variable TDPropagationTime that directly sets the
	  propagation time.
	  
	  * The variable TDMaximumIter is now called TDMaxSteps.

2015-02-10 23:57  dstrubbe

	* [r12946] src/td/td_init_inc.F90: Formatting and typo.

2015-02-11 00:37  dstrubbe

	* [r12947] src/basic/loct_pointer_inc.F90: Changing single-letter
	  variables in loct_pointer_copy routines.

2015-02-11 03:00  dstrubbe

	* [r12948] testsuite/finite_systems_3d/16-scfinlcao.test: Adding a
	  check in the testsuite for forces with GGA.

2015-02-11 03:02  dstrubbe

	* [r12949] src/poisson/poisson_isf.F90, src/scf/lcao_inc.F90,
	  src/system/forces_inc.F90: * Memory leaks in LCAO alternative and
	  GGA forces.
	  * Somehow one allocation in ISF was not using SAFE_ALLOCATE.

2015-02-11 04:06  dstrubbe

	* [r12950] src/states/states.F90: Assertion to guard against the
	  problem Carlo reported, in which we try to use ScaLAPACK with an
	  incompatible parallelization layout.

2015-02-11 04:52  xavier

	* [r12951] src/basic/Makefile.am, src/basic/xml_file.F90,
	  src/basic/xml_file_low.c: Starting to write some basic routines
	  to parse xml. The objective is
	  to parse xml pseudopotential formats.

2015-02-11 08:10  theophilou

	* [r12952] src/scf/ground_state.F90, src/scf/rdmft.F90,
	  testsuite/functionals/06-rdmft.test: Minimization of occupation
	  numbers done with GSL library multidimensional minimization
	  routine, erase a call to calculate energy that was not needed,
	  erase rdm%max_iter variable use scf%max_iter

2015-02-11 09:28  theophilou

	* [r12953] src/scf/ground_state.F90, src/scf/rdmft.F90: restore
	  rdm%max_iter, scf%max_iter cannot be used for rdmft because
	  rdmft_m compiled before scf_m

2015-02-11 10:06  theophilou

	* [r12955] src/scf/rdmft.F90: Fix the number of arguments in
	  write_iter_info routine, add assert to check size of input
	  matrices in write_iter_info and objective_rdmft

2015-02-11 14:44  jrfsousa

	* [r12956] src/basic/json.F90: * Improved type safety.
	  
	  * Implements json_update procedures.
	  
	  * Implements json_del procedures.

2015-02-11 16:14  theophilou

	* [r12957] src/scf/Makefile.am, src/scf/ground_state.F90,
	  src/scf/rdmft.F90: Making objective_rdmft and write_iter_info
	  rdmft external subroutines include rdmft_init and rdmft_end in
	  scf_rdmft, this should fix the bug from rev 12955 that appeared
	  in chum_x86_64_pgi, erased rdmft%max_iter using scf%max_iter
	  changing the order that scf and rdmft are compiled in Makefile to
	  do so

2015-02-11 16:49  xavier

	* [r12958] src/basic/xml_file.F90, src/basic/xml_file_low.c:
	  Function to read tag attributes.

2015-02-11 17:40  xavier

	* [r12959] src/basic/xml_file.F90, src/basic/xml_file_low.c: Added
	  an index parameter to select different instances of a tag.

2015-02-11 19:54  xavier

	* [r12960] src/basic/xml_file.F90, src/basic/xml_file_low.c: Added
	  a function to read array values.

2015-02-11 19:55  xavier

	* [r12961] src/species/Makefile.am, src/species/ps_qso.F90:
	  Starting the implementation for QSO (qbox) pseudopotentials.

2015-02-11 21:06  dstrubbe

	* [r12962] src/grid/io_function_inc.F90,
	  src/td/propagator_vksold_inc.F90: Bugfix:
	  * If you try to read a non-existent .obf file in
	  io_function_input_global, it will crash with an assertion failure
	  np > 0 at a lower level, rather than returning a sensible error
	  code.
	  * When trying to read vprev files, a warning should be written if
	  they do not exist.

2015-02-11 21:10  dstrubbe

	* [r12963] src/td/td.F90: Reverting r12944. While it corrects a
	  possible problem with running BO with ScaLAPACK calls when not
	  using a ScaLAPACK-compatible layout, it also causes
	  06-caetrs.03-kick-tp1.inp to crash with an assertion failure
	  since the BLACS routine is not compatible with task
	  parallelization. A more general solution is required.

2015-02-11 22:06  dstrubbe

	* [r12964] src/basic/multicomm.F90,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp: Temporary
	  debugging commit: find out how MPI tasks are assigned to groups.
	  To try to understand how to fix the bug caused by r12846 for the
	  CAETRS task parallelization tests.

2015-02-12 00:17  xavier

	* [r12967] src/basic/xml_file.F90: Apparently the 'import'
	  statement requires double colons. Let's see if
	  this makes PGI happy.

2015-02-12 01:43  xavier

	* [r12968] src/species/ps.F90, src/species/ps_qso.F90,
	  src/species/species.F90: Initial implementation of the QSO (qbox)
	  pseudopotential format. Now I only
	  have to make it work ;-)

2015-02-12 03:18  xavier

	* [r12969] src/hamiltonian/species_pot.F90: QSO support in
	  species_pot.

2015-02-12 03:23  dstrubbe

	* [r12970] src/species/ps_qso.F90: Fixing PUSH/POP.

2015-02-12 03:39  dstrubbe

	* [r12971] src/scf/lcao_inc.F90: Removing a pointless deallocation
	  and reallocation in LCAO, which I think I accidentally left in
	  from debugging in r7759.

2015-02-12 06:40  xavier

	* [r12973] src/species/ps.F90: Extended the radial grid for QSO
	  pseudopotentials. With this change,
	  QSO support seems to be working.

2015-02-12 06:50  xavier

	* [r12974] src/basic/xml_file_low.c, src/species/ps_qso.F90:
	  Disabled debug output.

2015-02-12 09:31  theophilou

	* [r12975] src/scf/ground_state.F90: Removed unused type rdm from
	  groun_state_run

2015-02-12 10:32  jrfsousa

	* [r12976] src/frozen/fio_geometry.F90,
	  src/frozen/frozen_geometry.F90, src/frozen/frozen_grid.F90,
	  src/frozen/frozen_simulation.F90, src/frozen/frozen_tnadd.F90,
	  src/frozen/tbase_density.F90, src/frozen/tcalc.F90,
	  src/frozen/texternal_potential.F90, src/frozen/tgeo.F90,
	  src/frozen/thamiltonian.F90, src/frozen/tpotential.F90,
	  src/frozen/tstates.F90, src/frozen/tsystem.F90,
	  src/frozen/tterm.F90, src/frozen/twrap.F90: Frozen:
	  
	  Cleanup commit, remove old unused files.

2015-02-12 16:52  dstrubbe

	* [r12977] src/scf/rdmft.F90: Fixing mistaken PUSH/POP.

2015-02-12 16:58  dstrubbe

	* [r12978] src/main/main.F90: Clarification: the variable
	  ReportMemory is used only for SCF, not for other kinds of runs.

2015-02-12 17:01  dstrubbe

	* [r12979]
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_3d/10-fullerene.01-gs.inp,
	  testsuite/finite_systems_3d/27-fine_mesh.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp: *
	  Fixing two tests that used ProfilingMode with an option that is
	  not one of the declared ones. "yes" happened to be numerically
	  equivalent to "prof_time" I think. Now one does prof_time and the
	  other prof_memory.
	  * One test now uses ProfilingMode = prof_memory_full which was
	  not tested previously.
	  * One test uses ReportMemory which was not tested previously.

2015-02-12 17:15  dstrubbe

	* [r12980] testsuite/finite_systems_3d/16-scfinlcao.01-std.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.02-alt.inp,
	  testsuite/finite_systems_3d/16-scfinlcao.test,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.test,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.test,
	  testsuite/finite_systems_3d/Makefile.am: Splitting up the SCF in
	  LCAO test in two, since it has timed out occasionally on
	  builders, and they do not depend on one another anyway.

2015-02-12 17:19  xavier

	* [r12981] src/species/ps.F90, src/species/species.F90: Converted
	  the variable to signal non-linear core corrections in the
	  pseudo from a string to a logical.

2015-02-12 17:29  dstrubbe

	* [r12982] src/basic/xml_file.F90: Commenting out part of interface
	  for XML to allow compilation with PGI/13.10. I think there might
	  be something wrong with the interface regardless, even for
	  compilers that do not give an error here. g95 says:
	  {{{
	  In file ps_qso_oct.f90:206
	  
	  call xml_tag_get_tag_value_array(tag, 'radial_potential', size,
	  this%pote
	  1
	  Warning (165): Implicit interface 'xml_tag_get_tag_value_array'
	  called at (1)
	  In file ps_qso_oct.f90:207
	  
	  call xml_tag_get_tag_value_array(tag, 'radial_function', size,
	  this%wavef
	  1
	  Warning (165): Implicit interface 'xml_tag_get_tag_value_array'
	  called at (1)
	  }}}

2015-02-12 17:32  dstrubbe

	* [r12983] src/species/ps.F90, src/species/ps_qso.F90: Unused
	  variables.

2015-02-12 17:34  dstrubbe

	* [r12984] testsuite/Makefile.am: Let's clean up .log files too
	  with 'make clean' in the testsuite directory.

2015-02-12 17:57  xavier

	* [r12985] src/basic/xml_file.F90, src/basic/xml_file_low.c,
	  src/species/ps_qso.F90: Improved the xml interface. This solves
	  the issue that David mentioned
	  and should fix the compilation with PGI.

2015-02-12 18:01  xavier

	* [r12986] src/basic/Makefile.am, src/basic/xml.F90,
	  src/basic/xml_file.F90, src/basic/xml_file_low.c,
	  src/basic/xml_low.c, src/species/ps_qso.F90: * Renamed the
	  xml_file_m module to xml_m.
	  * Fixed a compilation problem in my last commit.

2015-02-12 19:04  dstrubbe

	* [r12988] testsuite/buildbot_query.pl: Updating buildbot_query.pl
	  for BuildBot 0.8.8 which has './' in front of builder URLs now.

2015-02-12 19:13  dstrubbe

	* [r12989] testsuite/Makefile.am: Adding two missing Make targets
	  to the .PHONY list.

2015-02-12 19:48  dstrubbe

	* [r12990] testsuite/oct-run_testsuite.sh.in: Dry run for testsuite
	  bash script will write the call to oct-run_regression_test.pl
	  also.

2015-02-12 20:47  xavier

	* [r12991] src/species/species.F90: Modified the format of the
	  species block. Now the second column will
	  be the type of species and the third one the mass. Using a trick
	  (masses are not negative) it is possible to detect the old format
	  and
	  read it anyways (with a warning).
	  
	  The idea of this change is that in the future we can make the
	  Species
	  block more flexible by not having to always give the mass, that
	  in
	  most cases is not important (model potentials) or we know it
	  already
	  (pseudo-potentials).

2015-02-12 21:14  xavier

	* [r12992]
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-inversion.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: Converted input files to
	  the new species format.

2015-02-13 00:40  dstrubbe

	* [r12993] configure.ac, src/main/Makefile.am, testsuite/README,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.test,
	  testsuite/components/01-derivatives_1d.test,
	  testsuite/components/02-derivatives_2d.test,
	  testsuite/components/03-derivatives_3d.test,
	  testsuite/components/04-hartree_3d_cg.test,
	  testsuite/components/05-hartree_3d_fft.test,
	  testsuite/components/06-hartree_3d_isf.test,
	  testsuite/components/07-cholesky_serial.test,
	  testsuite/components/08-mgs.test,
	  testsuite/components/09-qr.test,
	  testsuite/components/10-hartree_pfft.test,
	  testsuite/components/11-hartree_cl.test,
	  testsuite/components/12-hartree_direct_3d.test,
	  testsuite/components/13-hartree_3d_mg.test,
	  testsuite/components/14-center-geom.test,
	  testsuite/components/15-cholesky_parallel.test,
	  testsuite/components/16-hartree_3d_libisf.test,
	  testsuite/components/17-recipe.test,
	  testsuite/components/18-interpolation.test,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/02-neon_mpi.test,
	  testsuite/finite_systems_1d/03-neon.test,
	  testsuite/finite_systems_1d/09-morse.test,
	  testsuite/finite_systems_2d/01-quadratic_box.test,
	  testsuite/finite_systems_2d/02-fock-darwin.test,
	  testsuite/finite_systems_2d/03-helium_atom.test,
	  testsuite/finite_systems_2d/04-biot_savart.test,
	  testsuite/finite_systems_2d/05-spin_precession.test,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/finite_systems_2d/08-gdlib.test,
	  testsuite/finite_systems_3d/01-carbon_atom.test,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.test,
	  testsuite/finite_systems_3d/03-magnetic.test,
	  testsuite/finite_systems_3d/04-jellium.test,
	  testsuite/finite_systems_3d/05-output.test,
	  testsuite/finite_systems_3d/06-restart.test,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.test,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.test,
	  testsuite/finite_systems_3d/09-spinors.test,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/11-sic.test,
	  testsuite/finite_systems_3d/12-forces.test,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test,
	  testsuite/finite_systems_3d/14-fullerene_packed.test,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.test,
	  testsuite/finite_systems_3d/16-scfinlcao_std.test,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.test,
	  testsuite/finite_systems_3d/20-eigensolver.test,
	  testsuite/finite_systems_3d/21-lobpcg.test,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/finite_systems_3d/24-o2-spin.test,
	  testsuite/finite_systems_3d/25-multiresolution.test,
	  testsuite/finite_systems_3d/26-nlcc.test,
	  testsuite/finite_systems_3d/27-fine_mesh.01-gs.inp,
	  testsuite/finite_systems_3d/27-fine_mesh.test,
	  testsuite/finite_systems_3d/28-carbon_big_box.test,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/04-oep.test,
	  testsuite/functionals/05-ks_inversion.test,
	  testsuite/functionals/06-rdmft.test,
	  testsuite/linear_response/01-casida.test,
	  testsuite/linear_response/02-h2o_pol_lr.test,
	  testsuite/linear_response/03-vdw_sternheimer.test,
	  testsuite/linear_response/04-vib_modes.test,
	  testsuite/linear_response/05-polarizability.test,
	  testsuite/oct-run_regression_test.pl,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test,
	  testsuite/periodic_systems/01-free_electrons.test,
	  testsuite/periodic_systems/02-cosine_potential.test,
	  testsuite/periodic_systems/03-sodium_chain.test,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/07-tb09.test,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/09-etsf_io.test,
	  testsuite/periodic_systems/10-berkeleygw.test,
	  testsuite/periodic_systems/11-silicon_force.test,
	  testsuite/periodic_systems/12-boron_nitride.test,
	  testsuite/photo_electron/01-h1d_lin.test,
	  testsuite/photo_electron/02-restart.test,
	  testsuite/photo_electron/03-h1d_ati.test,
	  testsuite/photo_electron/04-nfft.test,
	  testsuite/photo_electron/05-pfft.test,
	  testsuite/real_time/01-propagators.test,
	  testsuite/real_time/02-propagators.test,
	  testsuite/real_time/05-time_propagation.test,
	  testsuite/real_time/06-caetrs.test,
	  testsuite/real_time/08-laser.test,
	  testsuite/real_time/09-angular_momentum.test,
	  testsuite/real_time/10-bomd.test,
	  testsuite/real_time/11-tdmagnetic.test,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test,
	  testsuite/real_time/15-crank_nicolson.test,
	  testsuite/real_time/16-sparskit.test,
	  testsuite/real_time/17-absorption-spin_symmetry.test,
	  testsuite/real_time/18-hhg.test: * The executables are now always
	  called 'octopus' and 'oct-test', even when compiling with MPI.
	  There are no suffixes applied anymore.
	  * The Programs tag in the testsuite .test files is now replaced
	  with Program. It no longer specifies whether serial or parallel
	  is permitted, but only whether to use 'octopus' or 'oct-test'.
	  The testsuite Perl script no longer has a loop over executables.
	  * The Programs tag was used in conjunction with Options in a few
	  tests (e.g. components/09-qr.test) to specify that some option
	  was required with running in parallel (e.g. scalapack) but not
	  when running serial. This functionality is now obtained by
	  setting Options_MPI to specify options that are only required
	  when running parallel.
	  * A few tests listed only an MPI executable, because they can
	  only be run in parallel, but this is naturally enforced also by
	  the fact they require optional libraries which in turn require
	  MPI, e.g. PFFT for components/10-hartree_pfft.test.
	  * The suffix of the executable was previously used to decide
	  whether to run in serial or parallel. Now, we run in parallel if
	  a useable mpiexec can be found, and the code returns mpi as one
	  of the options. Serial execution can be forced too from
	  oct-run_regression_test.pl by passing a -s argument.
	  * The output when skipping a test because of Options is more
	  verbose: it lists the required and available options.
	  * Some FIXME comments for further improvement to the testsuite
	  script.
	  
	  Yes, unfortunately all these elements had to be committed
	  together...

2015-02-13 03:05  xavier

	* [r12994] src/grid/mesh_init.F90,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/09-etsf_io.01-gs.inp,
	  testsuite/periodic_systems/10-berkeleygw.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp: * Octopus
	  was very inefficient when choosing the spacing for periodic
	  systems. It only used a spacing larger than the requested one,
	  and
	  used an even number of grid points in each direction. Now both
	  even
	  and odd sizes are possible and the selected size is the one that
	  produces the smaller change in the spacing.
	  
	  * Modified the tests so that they keep using the same spacing as
	  before, so results do not change.
	  
	  * Added a warning when the spacing is changed due to periodicity.

2015-02-13 05:06  dstrubbe

	* [r12995] testsuite/README, testsuite/oct-run_regression_test.pl:
	  * Bugfix to r12993: a last-minute change made Options_MPI
	  ineffective if Options was not also set. Now it should work and
	  properly exclude tests relying on ScaLAPACK for example when it
	  is not available.
	  * Clarification to documentation on testsuite.
	  * FIXME comment about an issue of the -m option to testsuite
	  script.

2015-02-13 05:28  xavier

	* [r12996] src/grid/mesh_init.F90: Text correction suggested by
	  David.

2015-02-13 05:31  dstrubbe

	* [r12997] src/species/species.F90: Formatting.

2015-02-13 05:34  dstrubbe

	* [r12998] testsuite/components/14-center-geom.test: A utility-only
	  test no longer needs to declare the 'Program' (or former
	  'Programs' tag).

2015-02-13 06:16  xavier

	* [r12999] src/basic/xml_low.c: Implementation of exception
	  detection.

2015-02-13 07:37  xavier

	* [r13000] src/basic/xml.F90, src/basic/xml_low.c: Implemented some
	  more xml parsing functions.

2015-02-13 14:32  jrfsousa

	* [r13001] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_external.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/config_dict.F90,
	  src/frozen/domain.F90, src/frozen/fio_config.F90,
	  src/frozen/fio_curvilinear.F90, src/frozen/fio_density.F90,
	  src/frozen/fio_external.F90, src/frozen/fio_grid.F90,
	  src/frozen/fio_hamiltonian.F90, src/frozen/fio_handle.F90,
	  src/frozen/fio_mesh.F90, src/frozen/fio_model.F90,
	  src/frozen/fio_simul_box.F90, src/frozen/fio_simulation.F90,
	  src/frozen/fio_states.F90, src/frozen/fio_system.F90,
	  src/frozen/frozen_config.F90, src/frozen/frozen_density.F90,
	  src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90, src/frozen/functional.F90,
	  src/frozen/igrid.F90, src/frozen/live_config.F90,
	  src/frozen/live_density.F90, src/frozen/live_external.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/live_handle.F90,
	  src/frozen/live_model.F90, src/frozen/live_states.F90,
	  src/frozen/live_system.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90, src/frozen/thash.F90: Frozen:
	  
	  Adds "live" wrapper level for handling the live part of the
	  subsystems.
	  
	  Split recursive and non-recursive interfaces.
	  
	  Added subsystem access by name.
	  
	  General code clean-up avoiding internal renamings.

2015-02-13 14:45  jrfsousa

	* [r13002] src/frozen/storage.F90: Frozen:
	  
	  Fix wrong index name.

2015-02-13 15:03  jrfsousa

	* [r13003] src/frozen/base_handle.F90: Frozen:
	  
	  Fix missing subroutine declaration. (Will add a propper interface
	  on moving to Fortran 200x)

2015-02-13 15:44  jrfsousa

	* [r13004] src/frozen/Makefile.am: Frozen:
	  
	  Corrects makefile to compile all the files.

2015-02-13 17:17  xavier

	* [r13008] src/basic/xml_low.c: More robust parsing of xml tag
	  attributes.

2015-02-13 17:26  xavier

	* [r13009] src/species/ps_upf.F90: Initial (non-working)
	  implementation of UPF2 parsing.

2015-02-13 17:34  dstrubbe

	* [r13010] src/scf/rdmft.F90: Fixing assignment of a float to an
	  integer.

2015-02-13 17:57  dstrubbe

	* [r13011] src/main/unocc.F90: Minor bugfixes for unocc: the
	  restart must be from an identical mesh, which was not enforced;
	  the variable lowest_missing could be uninitialized and thus avoid
	  triggering the proper error about there being no restart info.

2015-02-13 17:59  dstrubbe

	* [r13012] src/main/unocc.F90: Mistaken use of float instead of
	  integer in last commit.

2015-02-13 18:01  dstrubbe

	* [r13013] src/main/unocc.F90: The error message about missing
	  restart info in unocc can come just from root.

2015-02-13 18:02  dstrubbe

	* [r13014] src/scf/rdmft.F90: Indentation.

2015-02-13 18:03  dstrubbe

	* [r13015] testsuite/periodic_systems/10-berkeleygw.02-unocc.inp:
	  One more input file needed to be updated in light of r12994.

2015-02-13 18:05  dstrubbe

	* [r13016] testsuite/oct-run_regression_test.pl: Updating
	  indentation a bit.

2015-02-13 19:15  xavier

	* [r13018] src/basic/xml_low.c, src/species/ps_upf.F90: Several
	  fixes to xml parsing and UPF2. With this, reading UPF2 files
	  seems to work.

2015-02-13 19:29  dstrubbe

	* [r13019] src/basic/oct_f.c, src/basic/varia.c: * Write a warning
	  if progress bar is called improperly.
	  * Typo.

2015-02-13 19:37  dstrubbe

	* [r13020] src/scf/lcao_inc.F90: Bugfix: progress bars for
	  generating wavefunctions in alternative LCAO were quite wrong. In
	  particular, the use of 'st%group%block_end-st%group%block_end'
	  was presumably a typo. I converted the serial one to count states
	  not blocks. The bug is from r11786.

2015-02-13 19:52  xavier

	* [r13021] src/basic/xml_low.c, src/species/ps_upf.F90: Improved
	  exception handling in xml and UPF2.

2015-02-16 10:12  philipp

	* [r13023] src/td/pes_mask.F90: User defined mask function
	  (PESMaskSize)

2015-02-16 12:11  micael

	* [r13025] Makefile.am, testsuite/Makefile.am: New Makefile targets
	  check-long and check-short, that run the long and short tests
	  respectively. make check now runs all the tests, not just the
	  short ones.

2015-02-16 18:04  xavier

	* [r13030]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/11-sic.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp: Updated all tests to
	  the new format of the species block.

2015-02-16 18:12  xavier

	* [r13031]
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp: * Renamed
	  spec_jelli to spec_jellium.
	  * The same for spec_jelli_slab. (Note: these species is not used
	  in
	  any test.)

2015-02-16 18:43  xavier

	* [r13032] src/species/species.F90: Forgot to commit the actual
	  renaming of spec_jelli and spec_jelli_slab.

2015-02-16 19:14  xavier

	* [r13033]
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp:
	  Removed an accidental characted introduced in a previous commit.

2015-02-17 03:23  xavier

	* [r13034] src/frozen/Makefile.am: Missing compilation dependency.

2015-02-17 03:53  xavier

	* [r13035] src/hamiltonian/epot.F90,
	  src/hamiltonian/species_pot.F90, src/ions/geometry.F90,
	  src/ions/symmetries.F90, src/species/species.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/11-sic.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-inversion.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: * I think "spec" is a bad
	  abbreviation for "species", so I renamed
	  all the spec_ variables to species_.
	  
	  * Also renamed the internal variables of the species module.

2015-02-17 04:11  xavier

	* [r13036] src/hamiltonian/kick.F90, src/ions/geometry.F90,
	  src/ions/ion_dynamics.F90, src/ions/vibrations.F90,
	  src/ions/xyz_adjust.F90, src/main/geom_opt.F90,
	  src/opt_control/target_velocity_inc.F90, src/species/species.F90,
	  src/states/opt_control_state.F90, src/td/propagator_rk_inc.F90,
	  src/utils/local_multipoles.F90: Renamed species_t%weight and
	  species_weight to species_t%mass and
	  species_mass, respectively.

2015-02-17 05:45  xavier

	* [r13037] Makefile.am, configure.ac, share/Makefile.am,
	  share/PP/CPI/Makefile.am, share/PP/FHI/Makefile.am,
	  share/PP/HGH/Makefile.am, share/PP/Makefile.am,
	  share/PP/PSF/Makefile.am, share/PP/UPF/Makefile.am,
	  share/opencl/Makefile.am: - Added check-short and check-long the
	  recursive automake targets.
	  - The pseudos and other datafiles are now copied to the build dir
	  when
	  making check-short or check-long.

2015-02-17 05:47  xavier

	* [r13038] src/frozen/base_external.F90,
	  src/frozen/tionic_term.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh.F90, src/hamiltonian/born_charges.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/hgh_projector.F90,
	  src/hamiltonian/kb_projector.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/pcm.F90, src/hamiltonian/projector.F90,
	  src/hamiltonian/rkb_projector.F90,
	  src/hamiltonian/species_pot.F90,
	  src/hamiltonian/species_pot_inc.F90, src/ions/atom.F90,
	  src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/simul_box.F90, src/ions/symmetries.F90,
	  src/ions/vibrations.F90, src/ions/xyz_adjust.F90,
	  src/main/geom_opt.F90, src/main/static_pol.F90,
	  src/opt_control/propagation.F90,
	  src/opt_control/target_velocity_inc.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90, src/scf/scf.F90,
	  src/states/opt_control_state.F90, src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90, src/system/current.F90,
	  src/system/forces.F90, src/system/forces_inc.F90,
	  src/system/magnetic.F90, src/system/output.F90,
	  src/system/output_etsf_inc.F90, src/system/partial_charges.F90,
	  src/system/pert_inc.F90, src/td/propagator_rk_inc.F90,
	  src/utils/local_multipoles.F90, src/utils/local_write.F90: -
	  Renamed atom_t%spec to atom_t%species.
	  - Renamed some arguments to species.

2015-02-17 06:21  xavier

	* [r13039] Makefile.am, configure.ac, share/Makefile.am,
	  share/PP/CPI/Makefile.am, share/PP/FHI/Makefile.am,
	  share/PP/HGH/Makefile.am, share/PP/Makefile.am,
	  share/PP/PSF/Makefile.am, share/PP/UPF/Makefile.am,
	  share/opencl/Makefile.am: Reverted 13037, apparently it uses
	  automake features not available in
	  the buildbots. The problem with check-short persists.

2015-02-17 13:58  helbig

	* [r13041] src/main/invert_ks.F90, src/system/xc_ks_inversion.F90,
	  testsuite/functionals/05-ks_inversion.02-inversion.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/functionals/05-ks_inversion.test,
	  testsuite/functionals/Makefile.am: - added test for exact
	  two-particle inversion procedure
	  - made fixing of asymptotic behavior to two-particle inversion
	  optional

2015-02-17 15:06  micael

	* [r13042] share/Makefile.am, testsuite/Makefile.am: Corrected
	  references to check-full and added check-short/check-long targets
	  in a couple of Makefiles.

2015-02-17 15:38  micael

	* [r13044] share/PP/CPI/Makefile.am, share/PP/FHI/Makefile.am,
	  share/PP/HGH/Makefile.am, share/PP/Makefile.am,
	  share/PP/PSF/Makefile.am, share/PP/UPF/Makefile.am,
	  share/opencl/Makefile.am: Changing remaining check-full to
	  check-short/check-long.

2015-02-17 15:49  umberto

	* [r13046] src/td/pes_mask_out_inc.F90: Fixed a race condition when
	  writing PES restart files with domain parallelization. This
	  should remove the long standing builbot error on chum (sorry
	  about that) with 02-restart.test in the photoelectron
	  testuisuite.

2015-02-17 17:09  xavier

	* [r13047] Makefile.am: This fixes the missing datafiles issue with
	  make check-short when
	  called from the scratch. The trick is that we `make check` in all
	  the other subdirs before running `make check-short` in
	  testsuite/.

2015-02-17 18:28  xavier

	* [r13050] testsuite/finite_systems_3d/11-sic.01-gs.inp,
	  testsuite/finite_systems_3d/11-sic.test,
	  testsuite/finite_systems_3d/Makefile.am,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/functionals/07-sic.test,
	  testsuite/functionals/Makefile.am: Moved the SIC test to
	  functionals/.

2015-02-17 21:51  dstrubbe

	* [r13051] src/grid/io_function_inc.F90: Bugfix: do not call
	  MPI_Bcast and MPI_Barrier in io_function_output unless the
	  communicator is valid. This was causing a runtime error for the
	  KS inversion test when attempting to output the potential, using
	  comm = 0. Of course, the ultimate cause is the fact that comm =
	  0, which should not be the case.

2015-02-17 22:46  dstrubbe

	* [r13052] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/scf/scf.F90,
	  src/states/states.F90, src/states/states_dim.F90,
	  src/system/v_ks.F90: Removing some relics of CDFT, which was
	  removed long ago (r8079).

2015-02-17 22:56  dstrubbe

	* [r13053] src/scf/scf.F90: Removed scf%mixdim2 which existed only
	  to support CDFT, long ago removed.

2015-02-17 23:05  dstrubbe

	* [r13054] src/grid/hypercube.F90: * Removing PUSH/POP from a
	  routine called too frequently.
	  * Removing explicit argument array bounds.

2015-02-17 23:15  dstrubbe

	* [r13055] src/states/states_calc_inc.F90,
	  src/states/states_dim.F90: * One part of states_dim_t
	  (st%d%orth_method) was not being copied by states_dim_copy.
	  * A broader and more informative error message about
	  orthogonalization method.

2015-02-17 23:36  dstrubbe

	* [r13056] src/scf/scf.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp: * Unused
	  variables.
	  * It is not necessary to pass the family to xc_ks_inversion_init,
	  we are only calling it when KS inversion is being used anyway.
	  * Updating input files for new Species block format.

2015-02-17 23:51  dstrubbe

	* [r13057] src/states/states.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90, src/td/td_write.F90: *
	  states_copy now more flexibly allows exclusion of eigenvalues,
	  occ, and spin in copying, instead of just wavefunctions.
	  * The imaginary parts of rho_core and frozen_rho were unwisely
	  being treated differently from the real parts according to the
	  parameter exclude in states_copy; now they are made consistent.
	  * The auxiliary states object in KS inversion should not
	  initialized from nothing (which was missing some calls anyway),
	  but by copying from the ordinary states object. This, for
	  example, means it now contains valid MPI communicators, and gets
	  a little closer to making this part of the code work in parallel.

2015-02-17 23:55  dstrubbe

	* [r13058] src/system/v_ks.F90, src/system/xc_ks_inversion.F90: *
	  Unused argument.
	  * Doxygen comments.

2015-02-17 23:56  dstrubbe

	* [r13059] testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: Typos.

2015-02-17 23:56  dstrubbe

	* [r13060] m4/yaml.m4: The YAML m4 script should respect the user's
	  setting of LDFLAGS (like our other m4 scripts) and not just
	  overwrite it.

2015-02-18 01:17  dstrubbe

	* [r13065] src/states/states_restart.F90: Bugfix: the progress bar
	  for reading states started one too high.

2015-02-18 01:30  dstrubbe

	* [r13066] testsuite/Makefile.am: Refactoring test targets to
	  reduce duplication of the if-condition related to SKIP_CHECK.

2015-02-18 01:38  dstrubbe

	* [r13067] src/species/ps.F90: Bugfix: ps_debug tried to write ps%k
	  whether it was initialized or not. It seems to be only used for
	  HGH pseudos. This caused real_time/06-caetrs.03-kick-tp1.inp to
	  fail with valgrind.

2015-02-18 01:44  dstrubbe

	* [r13068] src/states/states_restart.F90, src/td/td_write.F90: *
	  Bugfix: states_load did not set enough of the internal variables
	  of the states_t object appropriately. In particular, st%lnst
	  remained what it was and became inconsistent with the rest. This
	  was noticeable in finite_systems_1d/09-morse.03-td.inp having my
	  new warning about the progress bar, which used st%lnst to decide
	  the upper limit:
	  {{{
	  Internal warning: progress_bar called with actual 7 > max 1
	  }}}
	  * Removed superfluous initialization in td_write: states_look
	  already does this.

2015-02-18 03:45  dstrubbe

	* [r13069] src/grid/par_vec.F90, src/grid/partition.F90: Bugfix:
	  there was a small memory leak in setting up the partition. The
	  array local_tmp was allocated within partition_get_local, but not
	  deallocated anywhere. I have fixed this by getting rid of the
	  array entirely, since it was an unnecessary intermediate.

2015-02-18 04:08  dstrubbe

	* [r13070] src/scf/lcao_inc.F90: Improving memory management for
	  alternative LCAO: some arrays were allocated even though they
	  would not be used; other arrays were (safe)deallocated even
	  though they were never allocated.

2015-02-18 04:19  dstrubbe

	* [r13071] src/scf/lcao_inc.F90: Improved memory management for
	  alternative LCAO: deallocate arrays more promptly when they are
	  not needed anymore.

2015-02-18 04:51  dstrubbe

	* [r13072] src/scf/lcao_inc.F90: Bugfix: the alternative LCAO
	  without scalapack, in parallel, would access arrays out of bounds
	  when generating wavefunctions if the number of states was greater
	  than the number of orbitals, because it assumed these numbers
	  were equal. From r11786.

2015-02-18 07:09  xavier

	* [r13073] src/species/ps_upf.F90: UPF2: The maximum l is read from
	  the header, in case there aren't any
	  orbitals in the pseudopotential file.

2015-02-18 07:10  xavier

	* [r13074] src/species/ps.F90: The debug routine for the
	  pseudopotential now prints the long-range
	  local part of the pseudo.

2015-02-18 15:32  dstrubbe

	* [r13077] src/td/pes_mask.F90: * We should, in general, not give
	  initializations to variable components of a type, or they are
	  considered "save" by the compiler.
	  * Formatting.

2015-02-18 15:45  dstrubbe

	* [r13078] src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90:
	  Removing useless variables from PES.

2015-02-18 16:06  dstrubbe

	* [r13079] liboct_parser/parse.c, liboct_parser/parse_exp.c,
	  liboct_parser/parser_f.c, liboct_parser/symbols.c: Making errors
	  and warnings from parser more consistent and clearly identified
	  as coming from parser.

2015-02-18 16:15  dstrubbe

	* [r13080] src/system/xc_ks_inversion.F90: Let's keep all the KS
	  inversion variables in the same section.

2015-02-18 16:16  xavier

	* [r13081] src/hamiltonian/species_pot.F90: Fixed the
	  initialization of the density when the pseudo has no orbitals.

2015-02-18 17:05  xavier

	* [r13082] src/hamiltonian/species_pot.F90: The density for pseudos
	  without orbitals is now normalized.

2015-02-18 17:06  xavier

	* [r13083] src/scf/lcao.F90: The LCAO is not done when there are no
	  orbitals.

2015-02-18 19:03  dstrubbe

	* [r13084] src/basic/multicomm.F90, src/basic/unit_system.F90,
	  src/grid/double_grid.F90, src/grid/grid.F90,
	  src/grid/mesh_partition.F90, src/hamiltonian/epot.F90,
	  src/ions/ion_dynamics.F90, src/ions/kpoints.F90,
	  src/ions/simul_box.F90, src/main/geom_opt.F90, src/scf/lcao.F90,
	  src/states/restart.F90, src/states/states.F90,
	  src/system/eigensolver.F90, src/system/xc_oep.F90,
	  src/td/td_init_inc.F90: Corrections and clarifications to
	  variable reference. Made sure the Default field was set where it
	  could be simply stated, and removed redundant comments about the
	  default in the Description field. The default was listed
	  incorrectly for a few of these variables, and for a few a numeric
	  value rather than the appropriate option was listed, which is
	  meaningless to the user. Tried to describe the algorithm used to
	  assign nodes by default for ParallelizationGroupRanks.

2015-02-18 19:21  dstrubbe

	* [r13085] testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/Makefile.am: Adding a test run for
	  CalculationMode = dummy.

2015-02-18 19:41  xavier

	* [r13086] testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp:
	  Calculations are now done from scratch, so that the
	  initialization is tested.

2015-02-18 19:49  xavier

	* [r13087] src/hamiltonian/species_pot.F90, src/scf/lcao.F90: * The
	  initialization with the square root of the local potential is
	  now done for CPI and FHI pseudopotentials too.
	  
	  * Updated the documentation for LCAOStart.

2015-02-18 19:52  xavier

	* [r13088] src/hamiltonian/species_pot.F90, src/ions/geometry.F90:
	  Updated the option names for species referenced in the code.

2015-02-18 20:03  dstrubbe

	* [r13089] src/basic/varinfo.F90, src/basic/varinfo_low.c: The
	  variable info-writing routines now print the Default field too.
	  This information is thus now available from oct-help and from the
	  input_error routine.

2015-02-18 20:08  dstrubbe

	* [r13090] testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/17-absorption-spin_symmetry.test,
	  testsuite/real_time/18-hhg.test: Removing unnecessary Not_Util
	  tags from two tests (17 and 18, which had no utilities runs), and
	  replacing Not_Util with Program in another (13).

2015-02-18 20:12  dstrubbe

	* [r13091] src/scf/lcao.F90: Changing jelli to jellium in two more
	  places.

2015-02-18 20:21  dstrubbe

	* [r13092] testsuite/oct-run_regression_test.pl: Fixing problem
	  with trailing spaces in Program or Util tag in testsuite.

2015-02-18 20:25  dstrubbe

	* [r13093] testsuite/README, testsuite/oct-run_regression_test.pl:
	  The Not_Util tag is abolished from the testsuite.

2015-02-19 01:35  dstrubbe

	* [r13099] share/util/Makefile.am, share/util/inp: Removing an
	  ancient input file in the share directory. It certainly will not
	  work anymore, and I cannot figure out why it was ever present. It
	  was added in r659, but with a comment that suggested it was moved
	  from somewhere else (though it is not clear from where).

2015-02-19 05:21  xavier

	* [r13100] src/hamiltonian/projector.F90, src/species/ps.F90,
	  src/species/ps_upf.F90: * The two channels in a UPF2 file are
	  used.
	  
	  * Octopus assumed that all lmax == 0 pseudos are local, this is
	  not the
	  case with Hamann pseudos. Now the ps_t%local variable is used.

2015-02-19 16:42  dstrubbe

	* [r13108] src/main/unocc.F90, src/scf/scf.F90,
	  src/states/states_io.F90: * Bugfix: The file
	  'total-dos-efermi.dat' was being written only if the bands file
	  was being written (i.e. when nk > 1), even though it is supposed
	  to be used with the DOS files. Now it is written if and only if
	  the DOS is written, from the same routine.
	  * A header is written for 'total-dos.dat' like for the other DOS
	  files.
	  * The energy units are written in the bands and DOS file headers.
	  * Bugfix: 'maxdos' was computed summing the k-weights and
	  multiplying by the number of states. The sum of the k-weights is
	  enforced to be 1 regardless, so that sum is useless. And it did
	  not take into account the spin degeneracy. Now it does.
	  * When writing the Fermi energy files, 'states_fermi' was
	  uselessly called again, even though the Fermi energy must already
	  have been computed. This call is now removed.

2015-02-19 16:49  dstrubbe

	* [r13109] src/frozen/Makefile.am: Missing dependency for frozen.

2015-02-19 17:12  dstrubbe

	* [r13111] src/basic/multicomm.F90: Making my temporary debugging
	  info on MPI group assignment be printed only in serial, and a
	  comment.

2015-02-19 17:14  xavier

	* [r13112] src/species/ps_upf.F90: Removed a no-longer-relevant
	  comment.

2015-02-19 17:15  xavier

	* [r13113] src/basic/xml.F90: Avoid an out of bounds access when
	  trying to read zero values.

2015-02-19 18:47  xavier

	* [r13116] src/hamiltonian/energy.F90, src/system/energy_calc.F90:
	  * Now the external energy is calculated in two parts: local and
	  non-local.
	  
	  * The non-local part is printed to static/info.

2015-02-19 20:51  dstrubbe

	* [r13117] testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.test: Test the DOS and band
	  output in Grace mode.

2015-02-19 21:02  dstrubbe

	* [r13118]
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/05-spin_precession.test: Test density
	  output during TD, and 2D XSF output.

2015-02-19 21:04  dstrubbe

	* [r13119] src/scf/lcao_inc.F90: Bugfix: alternative LCAO with
	  spin-polarization or k-points would attempt to use deallocated
	  arrays. 4 arrays were allocated before the spin and k-point
	  loops, but deallocated within them.

2015-02-19 21:24  dstrubbe

	* [r13120] src/system/output.F90: * Bugfix: the needed directory
	  was not written before outputting DOS. Now it is done generally
	  in the output_all routine, and I removed two places it was done
	  only for particular types of output.
	  * The logic for creating outp%iter_dir considered an impossible
	  condition: it first made sure it ended on a slash, then checked
	  whether it was an empty string. But in fact, it appears to be
	  impossible to enter an empty string with our parser! If you pass
	  "", you get """. So, if you want the current directory, you must
	  enter "."
	  * Clarifying variable documentation.
	  * Changing the default for OutputInterval to be 0, not 50. In
	  light of r12082, this is the way to keep output per iteration
	  turned off by default, since we usually do not want it.
	  * Do not create the OutputIterDir unless we are doing output per
	  iteration.

2015-02-19 22:17  dstrubbe

	* [r13121] src/scf/scf.F90: Minor bugfix: If SCFinLCAO was stopped
	  before convergence, lcao_end was not called.

2015-02-20 00:06  dstrubbe

	* [r13122] src/system/output.F90: * Fix to r13120: putting default
	  for OutputInterval back to 50. Changing it broke some td tests.
	  This needs to be done more carefully.
	  * More clarification to documentation.

2015-02-20 00:39  xavier

	* [r13123] src/hamiltonian/kb_projector.F90, src/species/ps.F90,
	  src/species/ps_upf.F90: The generation of the projectors made
	  some assumptions that are not
	  valid for Hamann/Optimized Vanderbilt pseudopotentials: only one
	  channel for l=0 and scaling of the projectors.
	  
	  Now I added some checks to avoid this. With this the pseudos of
	  the
	  SG15 set seem to give reasonable results.

2015-02-20 01:01  xavier

	* [r13124] configure.ac, share/Makefile.am, src/grid/grid.F90,
	  src/ions/simul_box.F90, src/species/ps_cpi.F90,
	  src/species/ps_fhi.F90, src/species/ps_hgh.F90,
	  src/species/ps_psf.F90, src/species/ps_pspio_inc.F90,
	  src/species/ps_qso.F90, src/species/ps_upf.F90,
	  src/species/species.F90: The ugly-named share/PP/ directory is
	  now called share/pseudopotentials/.

2015-02-20 01:02  xavier

	* [r13125] share/PP, share/pseudopotentials: Actual renaming of the
	  PP directory (sorry about that).

2015-02-20 03:12  xavier

	* [r13126] share/pseudopotentials/CPI/Makefile.am,
	  share/pseudopotentials/FHI/Makefile.am,
	  share/pseudopotentials/HGH/Makefile.am,
	  share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/PSF/Makefile.am,
	  share/pseudopotentials/UPF/Makefile.am: Installation of
	  pseudopotentials to share/octopus/pseudopotentials/.

2015-02-20 06:15  xavier

	* [r13127] src/species/ps_psf.F90: The routine to open the psf
	  pseudopotential file was quite
	  complicated, now the code is simpler.

2015-02-20 06:54  xavier

	* [r13128] share/pseudopotentials/defaults, src/ions/geometry.F90,
	  src/species/ps.F90, src/species/ps_psf.F90,
	  src/species/species.F90, src/system/system.F90: * The new
	  variable PseudopotentialSet will control which pseudos are
	  used by default.
	  
	  * The defaults file now contains the path to the pseudopotential.
	  This
	  is passed to the initialization.

2015-02-20 07:27  xavier

	* [r13129] configure.ac, share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/sg15,
	  share/pseudopotentials/sg15/Ag_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Al_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ar_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/As_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Au_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/B_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ba_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Be_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Bi_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Br_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/COPYING,
	  share/pseudopotentials/sg15/C_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ca_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cd_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cl_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Co_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cr_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cs_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cu_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/F_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Fe_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ga_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ge_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/H_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/He_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Hf_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Hg_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/I_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/In_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ir_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/K_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Kr_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/La_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Li_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Makefile.am,
	  share/pseudopotentials/sg15/Mg_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Mn_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Mo_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/N_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Na_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Nb_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ne_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ni_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/O_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Os_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/P_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Pb_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Pd_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Pt_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Rb_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Re_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Rh_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ru_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/S_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sb_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sc_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Se_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Si_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sn_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sr_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ta_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Tc_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Te_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ti_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Tl_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/V_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/W_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Xe_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Y_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Zn_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Zr_ONCV_PBE-1.0.upf: Added the sg15
	  set to our pseudopotentials directory.

2015-02-20 16:28  xavier

	* [r13130] share/pseudopotentials/sg15/Makefile.am,
	  share/pseudopotentials/sg15/README.Octopus: Added a
	  README.Octopus files to sg15 that describes the origin of the
	  files.

2015-02-20 16:32  dstrubbe

	* [r13131] share/pseudopotentials/sg15: svn:ignore

2015-02-20 16:36  dstrubbe

	* [r13132] external_libs/metis-5.1/BUILD.txt,
	  external_libs/metis-5.1/Changelog,
	  external_libs/metis-5.1/GKlib/BUILD.txt,
	  external_libs/metis-5.1/GKlib/conf,
	  external_libs/metis-5.1/GKlib/test,
	  external_libs/metis-5.1/Install.txt,
	  external_libs/metis-5.1/manual: Removing unnecessary files from
	  the Metis 5.1 directory. In particular, the Install.txt and
	  BUILD.txt files are misleading because they refer to how to use
	  Metis' own Cmake build system, and not the one we have
	  substituted for Octopus.

2015-02-20 16:36  xavier

	* [r13133] share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/defaults, share/pseudopotentials/sg15.set,
	  share/pseudopotentials/standard.set, src/species/ps.F90,
	  src/species/ps_psf.F90, src/species/ps_upf.F90,
	  src/species/species.F90, src/system/system.F90: * Implemented the
	  sg15 pseudopotential set. Now with
	  'PseudopotentialSet = sg15' Octopus will use those pseudos
	  (defined
	  for most elements) by default. To be safe, for the moment I used
	  a
	  very conservative default spacing (0.3) and radius (8.0).
	  
	  * The routine species_init_global is called automatically.
	  
	  * Added some sanity checks.

2015-02-20 16:44  dstrubbe

	* [r13134] share/pseudopotentials/sg15.set: Fixing tabs.

2015-02-20 16:49  dstrubbe

	* [r13135] testsuite/functionals/04-oep.test: Removing comment
	  about archaic version in a testsuite file.

2015-02-20 17:13  xavier

	* [r13136] src/frozen/base_geom.F90, src/ions/geometry.F90,
	  src/species/species.F90: * Simplified the initalization of the
	  species_t object. The old
	  species_init is now called species_build, and species_init is now
	  a
	  merge of species_nullify, species_set_label, and
	  species_set_index.
	  
	  * Removed the unused subroutine species_set_type.

2015-02-20 17:37  xavier

	* [r13137] src/grid/grid.F90, src/ions/simul_box.F90,
	  src/species/species.F90: * Updated the documentation to reflect
	  the changes in the default
	  pseudopotentials.
	  
	  * Removed any mention to the "defaults" file. It does not exist
	  anymore, and in my opinion, we do not want users messing with
	  Octopus
	  internal files.

2015-02-20 17:45  dstrubbe

	* [r13138] src/species/species.F90: Added and corrected PUSH/POPs.

2015-02-20 18:34  dstrubbe

	* [r13139] testsuite/real_time/16-sparskit.02-kick.inp: Removing
	  obsolete comment in testsuite file which is flatly contradicted
	  by the lines above and below...

2015-02-20 18:35  dstrubbe

	* [r13140] src/grid/grid.F90: Small improvement to variable
	  reference.

2015-02-20 18:37  xavier

	* [r13141] configure.ac, testsuite/Makefile.am,
	  testsuite/pseudopotentials,
	  testsuite/pseudopotentials/01-sg15-h.01-gs.inp,
	  testsuite/pseudopotentials/01-sg15-h.test,
	  testsuite/pseudopotentials/Makefile.am: * Added a
	  pseudopotentials/ test directory.
	  * Added a test for hydrogen using the sg15 set.

2015-02-20 18:47  dstrubbe

	* [r13142] src/grid/mesh_partition.F90: Some messages that can be
	  written only by the root MPI task.

2015-02-20 18:51  dstrubbe

	* [r13143] configure.ac: Typo.

2015-02-20 23:30  xavier

	* [r13144] src/scf/scf.F90: A string was too short.

2015-02-22 11:56  theophilou

	* [r13145] src/scf/rdmft.F90, testsuite/functionals/06-rdmft.test:
	  Change RDMFT test so as to search for the final energy and not
	  for the
	  energy after the first orbital minimization. This is because the
	  first time
	  orbitals are minimized there are parts of the codes that were not
	  used and thus
	  were not tested.

2015-02-22 18:13  dstrubbe

	* [r13146] m4/metis.m4: There is no point in checking for METIS or
	  compiling the internal one when we are not using MPI, since it is
	  only used for domain parallelization.

2015-02-22 18:29  xavier

	* [r13147] src/system/output.F90: Bugfix: a string variable was not
	  always initialized.

2015-02-22 18:31  xavier

	* [r13148] src/scf/scf.F90: No need to try to output something if
	  there is nothing to output.

2015-02-22 18:52  dstrubbe

	* [r13151] src/utils/convert.F90,
	  testsuite/finite_systems_3d/05-output.01-gs.inp: * Typo and
	  comment on oct-convert utility.
	  * Making a test do output during SCF, which was not being called
	  for in any test.

2015-02-22 19:16  xavier

	* [r13152] src/basic/io.F90, src/basic/messages.F90,
	  src/basic/path.F90, src/main/casida_inc.F90, src/main/pulpo.F90,
	  src/main/static_pol.F90, src/scf/scf.F90, src/species/ps_cpi.F90,
	  src/species/ps_fhi.F90, src/species/ps_hgh.F90,
	  src/species/ps_psf.F90, src/species/ps_pspio_inc.F90,
	  src/species/ps_upf.F90, src/species/species.F90,
	  src/states/restart.F90, src/system/output.F90: Used the
	  MAX_PATH_LEN variable as size in several strings that hold
	  paths or filenames.

2015-02-23 14:04  micael

	* [r13155] testsuite/pseudopotentials: Setting svn:ignore.

2015-02-23 14:55  irina

	* [r13156] src/sternheimer/kdotp.F90: Added perturbation with
	  direction 2 for second-order kdotp

2015-02-23 15:27  joseba

	* [r13157] src/grid/partition.F90: As David mentioned, when the
	  partition size is equal to the MPI world size, the previous
	  module operation should also returns 0

2015-02-23 17:51  dstrubbe

	* [r13159] src/ions/xyz_adjust.F90: Bugfix: use of uninitialized
	  data when max-dim=4 could cause floating point exception in
	  oct-center-geom. This was happening on the babbage gnu serial
	  slave -- but only if the share path was set in a particular way,
	  strangely.

2015-02-23 18:25  acastro

	* [r13160] src/system/output_me.F90, src/system/output_me_inc.F90:
	  The routine that printed out the KS multipoles matrix
	  elements was assuming 3D, printing out spherical multipole
	  moments. Now it considers separately the 1D and 2D cases.
	  
	  For the 2D case, it only prints the dipole matrices;
	  eventually we could consider the cylindrical multipoles,
	  although I find it unlikely that someone will ever need it.

2015-02-23 18:35  dstrubbe

	* [r13161] src/system/output_me.F90: Typo and formatting.

2015-02-23 18:36  dstrubbe

	* [r13162] src/ions/xyz_adjust.F90: Follow up to r13159: apparently
	  there was an arithmetic exception here too. This might fix it.

2015-02-23 18:40  dstrubbe

	* [r13163] src/system/xc_ks_inversion.F90: Fixing argument bounds
	  and order, and adding a check for negative density before taking
	  a square root in KS inversion. I believe that is the origin of
	  the floating point exception in the KS inversion test on babbage
	  gnu serial.

2015-02-23 18:42  dstrubbe

	* [r13164] src/hamiltonian/hamiltonian.F90, src/main/run.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90: Removing unnecessary arguments.

2015-02-23 20:57  dstrubbe

	* [r13165] src/utils/casida_spectrum.F90: Fully initializing
	  matrix, hopefully solves arithmetic exception for max-dim=4 on
	  babbage gnu serial.

2015-02-23 22:03  dstrubbe

	* [r13166] src/math/metis.F90, src/math/metis_f.c: * We cannot use
	  external METIS unless it was compiled in single precision, given
	  the Fortran types we pass to it. This was checked nowhere, which
	  is worrying.
	  * Correcting funny characters in comments.

2015-02-23 22:45  dstrubbe

	* [r13167] src/scf/scf.F90: A warning if the density becomes
	  negative in SCF.

2015-02-24 09:19  micael

	* [r13172] src/td/spectrum.F90, src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/real_time/09-angular_momentum.test,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/17-absorption-spin_symmetry.test: * Fixed bug
	  in polynomial damping: the total time was off by one time-step.
	  This introduced some very small changes in the values of the
	  spectra.
	  * Fixed bug in fourier transform: the start time for the
	  calculation of the integral was not properly taken into account.
	  * Simplified the signal_damp routine, renamed the kick_time
	  argument to t0 in order to make it consistent with the other
	  routines, and removed the unused window option.
	  * Renamed spec_t to spectrum_t.

2015-02-24 09:55  micael

	* [r13173] testsuite/real_time/14-absorption-spinors.test: Missing
	  file from previous commit.

2015-02-24 16:25  dstrubbe

	* [r13176] src/basic/space.F90, src/utils/casida_spectrum.F90: *
	  Missing PUSH/POP's.
	  * Application of some coding standards.

2015-02-24 16:28  dstrubbe

	* [r13177] src/utils/casida_spectrum.F90: Bugfix: operate only on
	  relevant spatial dimensions, not up to MAX_DIM, in
	  oct-casida_spectrum. This should solve the arithmetic exception
	  on babbage gnu serial.

2015-02-24 16:39  dstrubbe

	* [r13179] m4/metis.m4, m4/parmetis.m4: * The METIS m4 script was
	  defective in most respects. I rewrote it.
	  * --with-metis and --with-parmetis are replaced with
	  --with-metis-prefix and --with-parmetis-prefix in accordance with
	  the configure argument for our other m4 scripts.

2015-02-24 17:56  dstrubbe

	* [r13180] m4/dune.m4, m4/dune_check_lib.m4, m4/metis.m4,
	  m4/parmetis.m4, src/common-rules.make: * Bugfix: the ParMETIS m4
	  script was completely wrong (rather than mostly wrong like the
	  METIS one). I doubt anyone has ever checked it since it does not
	  define any variable used in our build system. Please, don't
	  commit an m4 script without trying it.
	  * Removed useless m4 stuff included from other code. parmetis.m4
	  was unnecessarily using some macros it defined.

2015-02-24 18:14  dstrubbe

	* [r13181] m4/libxc.m4, m4/netcdf.m4: Bugfix: use appropriate
	  module inclusion flag for Fortran, in case it is not -I.

2015-02-24 18:30  dstrubbe

	* [r13182] m4/metis.m4, m4/parmetis.m4, src/common-rules.make: *
	  More canonical names for Make variables in metis and parmetis m4.
	  * Just one disable message for ParMETIS at a time.

2015-02-24 19:49  dstrubbe

	* [r13183] testsuite/finite_systems_3d/10-fullerene.01-gs.inp: We
	  had no test for TypeOfMixing = gr_pulay, only for linear and
	  broyden.

2015-02-24 20:34  dstrubbe

	* [r13184] src/scf/mix_inc.F90: Strangely, Broyden mixing used an
	  allocatable array for a constant.

2015-02-24 21:07  dstrubbe

	* [r13185] src/basic/calc_mode.F90, src/main/run.F90,
	  src/main/test.F90, src/system/output.F90, src/system/system.F90,
	  src/utils/convert.F90, src/utils/local_multipoles.F90: The
	  default for OutputInterval is now 0 for gs and unocc, but 50 for
	  td and opt_control. Setting this up required a bit of
	  reorganization to make the CalculationMode available there.

2015-02-24 21:36  dstrubbe

	* [r13186] src/basic/types.F90: Setting svn:keywords.

2015-02-24 21:56  dstrubbe

	* [r13187] src/grid/io_function_inc.F90: Typo and Doxygen comment.

2015-02-24 22:41  dstrubbe

	* [r13188] m4/metis.m4, m4/parmetis.m4: * metis and parmetis m4 now
	  respond to environment variables.
	  * The prefix was mistakenly set by default to /usr/include
	  instead of /usr.
	  * Make sure variables are set to blank and still substituted if
	  the library is not going to be used.

2015-02-25 15:52  dstrubbe

	* [r13199] testsuite/finite_systems_3d/10-fullerene.test: Updating
	  reference value in light of r13183.

2015-02-25 15:55  dstrubbe

	* [r13200] testsuite/buildbot_query.pl: Updating buildbot_query.pl
	  for our current BuildBot set up, since the former custom shell_2
	  was replaced by a built-in configure.

2015-02-25 15:56  jrfsousa

	* [r13201] src/basic/json.F90: Code cleanup.

2015-02-25 17:02  jrfsousa

	* [r13202] src/main/Makefile.am: Correct compilation order.

2015-02-25 21:14  dstrubbe

	* [r13203] src/system/output.F90: A cube was not being ended for
	  BerkeleyGW output.

2015-02-25 21:46  dstrubbe

	* [r13204] m4/metis.m4: metis m4: the lib and include parts of the
	  paths should always be set, even if the header cannot be found,
	  so that the script reports correctly where it looked.

2015-02-25 23:43  dstrubbe

	* [r13205] src/scf/lcao_inc.F90: Bugfix: the alternative LCAO in
	  parallel without scalapack with complex states could cause a
	  segmentation fault, invalid memory reference, malloc error, etc.
	  due to an incorrect type in an MPI_Bcast for the eigenvalues.
	  This was the case for
	  finite_systems_3d/17-scfinlcao_alt.01-gs.inp. Bug dates to
	  r11698.

2015-02-25 23:58  dstrubbe

	* [r13206] src/math/splines.F90: Removing obsolete comment about
	  single precision compilation.

2015-02-26 00:03  dstrubbe

	* [r13207] testsuite/functionals/07-sic.test: Updating TestGroups
	  since this test was moved.

2015-02-26 00:08  dstrubbe

	* [r13208] src/math/sgfft.F90: For some reason, the SGFFTs mostly
	  did not use SAFE_ALLOCATE and SAFE_DEALLOCATE_A. Now they do, for
	  better profiling and error-handling.

2015-02-26 11:01  jrfsousa

	* [r13209] src/species/species.F90: Species:
	  
	  species.F90
	  
	  * Started adding a species_copy procedure.
	  
	  * Now *_data_object procedures also handle mass.

2015-02-26 11:16  jrfsousa

	* [r13210] src/system/output.F90, src/system/output_fio.F90:
	  System:
	  
	  output_fio.F90
	  
	  * Large rewrite of output_fio.F90.
	  
	  output.F90
	  
	  * Rename output option frozen to frozen_system.
	  
	  * Reflect changes in output_fio.

2015-02-26 14:43  jrfsousa

	* [r13212] src/frozen/basis.F90, src/frozen/domain.F90,
	  src/frozen/igrid.F90, src/frozen/imesh.F90,
	  src/frozen/interface_xc.F90, src/frozen/intrpl.F90,
	  src/frozen/simulation.F90, src/frozen/storage.F90: Frozen:
	  
	  * Code cleanup.

2015-02-26 15:50  jrfsousa

	* [r13213] src/frozen/base_density.F90,
	  src/frozen/base_external.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90: Frozen:
	  
	  * Code cleanup.
	  
	  * Reflect changes on species_m.

2015-02-26 16:29  jrfsousa

	* [r13214] src/grid/double_grid.F90: Grid:
	  
	  double_grid.F90
	  
	  * Add double_grid_nullify procedure.

2015-02-26 16:51  dstrubbe

	* [r13215] src/grid/submesh_inc.F90: Fix indentation.

2015-02-26 17:09  xavier

	* [r13219] src/grid/double_grid.F90, src/species/species.F90: *
	  Removed some spurious return statements and comment markers.

2015-02-26 17:16  jrfsousa

	* [r13220] src/frozen/fio_config.F90,
	  src/frozen/fio_curvilinear.F90, src/frozen/fio_density.F90,
	  src/frozen/fio_grid.F90, src/frozen/fio_mesh.F90,
	  src/frozen/fio_model.F90, src/frozen/fio_simul_box.F90,
	  src/frozen/fio_simulation.F90: Frozen:
	  
	  * Code cleanup.
	  
	  * Improved initializations.

2015-02-26 17:40  dstrubbe

	* [r13223] src/scf/scf.F90: Revising negative-density warning:
	  weaker tolerance, and don't worry about the off-diagonal parts of
	  the density for spinors.

2015-02-26 19:38  dstrubbe

	* [r13224] src/species/species.F90: Bugfix: when using RKB
	  projectors (as for spin-orbit pseudopotentials), there could be
	  an access of an array out of bounds, in parallel, when calling
	  spline_eval_vec, if the submesh had no points in a particular
	  domain in the partition. This happened in
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp and
	  07-spin_orbit_coupling_full.02-rkb.inp, in the partition due to
	  ParMETIS (but not the one due to METIS, curiously). The solution
	  is to refrain from calling spline_eval_vec in this situation.

2015-02-26 23:00  dstrubbe

	* [r13228] m4/zdotc.m4: Replacing complex*16 with more modern
	  complex(8) in m4 script.

2015-02-26 23:13  dstrubbe

	* [r13229] m4/fft.m4: Remove SINGLE_PRECISION support from fftw m4
	  script.

2015-02-26 23:23  dstrubbe

	* [r13230] src/math/scalapack.F90: Replacing deprecated complex*16
	  with complex(8).

2015-02-26 23:36  dstrubbe

	* [r13231] src/ions/geometry.F90: Removing unused deprecated
	  routine.

2015-02-26 23:40  dstrubbe

	* [r13232] src/opt_control/propagation.F90, src/td/propagator.F90,
	  src/td/propagator_rk_inc.F90, src/td/td.F90,
	  src/td/td_init_inc.F90: Unused arguments, and one unused
	  variable.

2015-02-27 02:09  dstrubbe

	* [r13233] configure.ac, m4/fortran.m4, src/basic/utils.F90: An
	  interesting little patch from Tobias Burnus in 2012, which I
	  found looking through old emails. A Fortran 2008 feature allows
	  the code to obtain the compiler version, so we can print it in
	  the header. This can be more robust than
	  "build/true_compiler.sh". He had originally proposed the
	  corresponding feature to add the compiler flags, but I found that
	  in our case it showed only the "-I" flags from the other octopus
	  directories, which does not add any useful information.

2015-02-27 03:05  xavier

	* [r13234] src/frozen/base_config.F90, src/frozen/base_density.F90:
	  Coding style fixes.

2015-02-27 03:15  dstrubbe

	* [r13235]
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.test: Use linear mixing for
	  preparing density for KS inversion, to ensure it does not have
	  negative regions that may cause trouble when taking the square
	  root. This slightly changes the result.

2015-02-27 11:07  jrfsousa

	* [r13236] src/frozen/Makefile.am, src/frozen/frozen_density.F90,
	  src/frozen/frozen_handle.F90, src/frozen/frozen_model.F90,
	  src/frozen/live_config.F90: Frozen:
	  
	  * Bug fixes.
	  
	  * Wrong procedure call.
	  
	  * Missing dependencies in makefile.
	  
	  * Minor code cleanup.

2015-02-27 15:21  micael

	* [r13237] configure.ac, doc/Makefile.am, doc/pdf: Removed old
	  doc/pdf directory that was never updated and seemed to contain
	  only garbage.

2015-02-27 16:54  dstrubbe

	* [r13238] src/poisson/poisson_isf.F90: PUSH/POP's missing for
	  poisson_isf.

2015-02-27 17:28  dstrubbe

	* [r13239] doc/Makefile.am, doc/img: Removing doc/img directory.
	  These images were used in creating the PDF documentation from
	  .texi files, which were removed in r2664. I uploaded to the wiki
	  the only one of these img files of interest, the "octosex" one,
	  in a better version that I found in a cached version of the
	  manual for version 1.4 on our website.
	  http://www.tddft.org/programs/octopus/wiki/index.php/File:Octosex.jpg

2015-02-27 19:01  dstrubbe

	* [r13240] testsuite/oct-run_regression_test.pl: The testsuite Perl
	  script was unwisely using the variable $pre_command for two
	  different things, since r4006.

2015-02-27 21:35  dstrubbe

	* [r13241] src/system/output_modelmb_inc.F90,
	  testsuite/finite_systems_2d/07-modelmb.test: ModelMB output
	  should be to a subdirectory, not to a concatenated directory
	  name.

2015-02-27 22:06  dstrubbe

	* [r13242] src/basic/oct_f.c, src/sternheimer/em_resp_inc.F90: *
	  Avoid using 'min' uninitialized in oct_search_lr. I don't think
	  this could cause any problem though.
	  * Some assignments are only meaningful when oct_search_lr found
	  something.

2015-02-28 17:05  dstrubbe

	* [r13243] testsuite/optimal_control/12-spintarget.test: A test was
	  missing its TestGroup.

2015-02-28 23:19  dstrubbe

	* [r13244] testsuite/components/01-derivatives_1d.test,
	  testsuite/components/02-derivatives_2d.test,
	  testsuite/components/03-derivatives_3d.test,
	  testsuite/components/04-hartree_3d_cg.test,
	  testsuite/components/05-hartree_3d_fft.test,
	  testsuite/components/06-hartree_3d_isf.test,
	  testsuite/components/07-cholesky_serial.test,
	  testsuite/components/08-mgs.test,
	  testsuite/components/09-qr.test,
	  testsuite/components/10-hartree_pfft.test,
	  testsuite/components/11-hartree_cl.test,
	  testsuite/components/12-hartree_direct_3d.test,
	  testsuite/components/13-hartree_3d_mg.test,
	  testsuite/components/14-center-geom.test,
	  testsuite/components/15-cholesky_parallel.test,
	  testsuite/components/16-hartree_3d_libisf.test,
	  testsuite/components/18-interpolation.test,
	  testsuite/finite_systems_1d/01-hydrogen.test,
	  testsuite/finite_systems_1d/02-neon_mpi.test,
	  testsuite/finite_systems_1d/03-neon.test,
	  testsuite/finite_systems_1d/09-morse.test,
	  testsuite/finite_systems_2d/01-quadratic_box.test,
	  testsuite/finite_systems_2d/02-fock-darwin.test,
	  testsuite/finite_systems_2d/03-helium_atom.test,
	  testsuite/finite_systems_2d/04-biot_savart.test,
	  testsuite/finite_systems_2d/05-spin_precession.test,
	  testsuite/finite_systems_2d/07-modelmb.test,
	  testsuite/finite_systems_2d/08-gdlib.test,
	  testsuite/finite_systems_3d/01-carbon_atom.test,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.test,
	  testsuite/finite_systems_3d/03-magnetic.test,
	  testsuite/finite_systems_3d/04-jellium.test,
	  testsuite/finite_systems_3d/05-output.test,
	  testsuite/finite_systems_3d/06-restart.test,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.test,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.test,
	  testsuite/finite_systems_3d/09-spinors.test,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/12-forces.test,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test,
	  testsuite/finite_systems_3d/14-fullerene_packed.test,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.test,
	  testsuite/finite_systems_3d/16-scfinlcao_std.test,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.test,
	  testsuite/finite_systems_3d/20-eigensolver.test,
	  testsuite/finite_systems_3d/21-lobpcg.test,
	  testsuite/finite_systems_3d/23-go-na2.test,
	  testsuite/finite_systems_3d/24-o2-spin.test,
	  testsuite/finite_systems_3d/25-multiresolution.test,
	  testsuite/finite_systems_3d/26-nlcc.test,
	  testsuite/finite_systems_3d/27-fine_mesh.test,
	  testsuite/finite_systems_3d/28-carbon_big_box.test,
	  testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/04-oep.test,
	  testsuite/functionals/06-rdmft.test,
	  testsuite/functionals/07-sic.test,
	  testsuite/linear_response/01-casida.test,
	  testsuite/linear_response/02-h2o_pol_lr.test,
	  testsuite/linear_response/03-vdw_sternheimer.test,
	  testsuite/linear_response/04-vib_modes.test,
	  testsuite/linear_response/05-polarizability.test,
	  testsuite/optimal_control/01-asym_doublewell.test,
	  testsuite/optimal_control/02-sym_doublewell.test,
	  testsuite/optimal_control/03-localtarget.test,
	  testsuite/optimal_control/04-box.test,
	  testsuite/optimal_control/05-adw.test,
	  testsuite/optimal_control/06-zbr98.test,
	  testsuite/optimal_control/07-qoct+tddft.test,
	  testsuite/optimal_control/08-velocities.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/optimal_control/11-classical.test,
	  testsuite/optimal_control/12-spintarget.test,
	  testsuite/periodic_systems/01-free_electrons.test,
	  testsuite/periodic_systems/02-cosine_potential.test,
	  testsuite/periodic_systems/03-sodium_chain.test,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/05-lithium.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.test,
	  testsuite/periodic_systems/07-tb09.test,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/09-etsf_io.test,
	  testsuite/periodic_systems/10-berkeleygw.test,
	  testsuite/periodic_systems/11-silicon_force.test,
	  testsuite/periodic_systems/12-boron_nitride.test,
	  testsuite/photo_electron/01-h1d_lin.test,
	  testsuite/photo_electron/02-restart.test,
	  testsuite/photo_electron/03-h1d_ati.test,
	  testsuite/photo_electron/04-nfft.test,
	  testsuite/photo_electron/05-pfft.test,
	  testsuite/pseudopotentials/01-sg15-h.test,
	  testsuite/real_time/01-propagators.test,
	  testsuite/real_time/02-propagators.test,
	  testsuite/real_time/05-time_propagation.test,
	  testsuite/real_time/06-caetrs.test,
	  testsuite/real_time/08-laser.test,
	  testsuite/real_time/09-angular_momentum.test,
	  testsuite/real_time/10-bomd.test,
	  testsuite/real_time/11-tdmagnetic.test,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test,
	  testsuite/real_time/15-crank_nicolson.test,
	  testsuite/real_time/16-sparskit.test,
	  testsuite/real_time/17-absorption-spin_symmetry.test,
	  testsuite/real_time/18-hhg.test: Mass scripted conversion of
	  column-based match commands LINE and GREP to more robust and
	  easier-to-use field-based match commands LINEFIELD and GREPFIELD.
	  The old ones may be considered deprecated now, unless somehow it
	  is not possible to extract the needed number by field.

2015-02-28 23:20  dstrubbe

	* [r13245] testsuite/real_time/09-angular_momentum.test: Removing
	  obsolete commented stuff from a test.

2015-03-01 00:17  dstrubbe

	* [r13246] testsuite/finite_systems_2d/07-modelmb.test: Fix to
	  r13244: somehow the fields were off by one in a test.

2015-03-01 06:15  xavier

	* [r13253] share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/elements, src/species/Makefile.am,
	  src/species/element.F90: A table of properties of chemical
	  elements and an object to access it.

2015-03-01 06:20  xavier

	* [r13254] src/species/species.F90: Now the default_mass value can
	  be used in the species block. When
	  used, Octopus will try to guess the element from the name of the
	  species.

2015-03-01 06:50  xavier

	* [r13255]
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp: Converted some
	  input files to use default_mass.

2015-03-01 07:52  xavier

	* [r13256] src/species/species.F90: (sort of) Bugfix: After reading
	  a species from the %Species block,
	  information from the defaults file was still read to complete
	  possible
	  missing values. This was causing problems with my recent
	  improvements
	  to the system of default pseudos, that did not consider this
	  behavior.
	  
	  I am now disabling this "feature" since it is confusing and it
	  does
	  not make much sense: the default values for our set of
	  pseudopotentials are not necessarily applicable to other pseudos.

2015-03-01 08:31  xavier

	* [r13257] share/pseudopotentials/sg15.set,
	  share/pseudopotentials/standard.set, src/species/species.F90: Now
	  the sets of default pseudopotentials no longer have a mass
	  specified in the file, they use the default masses instead. This
	  might
	  produce some small changes in the results of calculations that
	  use the
	  mass, since the values are slightly different.

2015-03-01 18:45  xavier

	* [r13258] testsuite/linear_response/04-vib_modes.test: Updated the
	  results for the vibrational modes tests to match the
	  slightly different values for the mass.
	  
	  I had to increase a bit the tolerance to get the test to pass in
	  my
	  machine (the reference values were taken from
	  babbage_gnu_serial_long).

2015-03-01 19:00  xavier

	* [r13259]
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/linear_response/01-casida.test,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp: * Converted all
	  pseudopotential tests to use the default_mass value
	  (except the ones that use a modified mass).
	  
	  * Updated the results for the vibrational matches in the casida
	  test.

2015-03-01 21:47  xavier

	* [r13260] testsuite/linear_response/01-casida.test: One updated
	  result for casida in my last commit was wrong.

2015-03-01 21:48  xavier

	* [r13261]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: Converted more test files
	  to default_mass.

2015-03-01 22:51  xavier

	* [r13262] src/species/species.F90: Some parts of the code (optimal
	  control, for example) calculate the
	  momentum for species that are not physical. This causes problems
	  when
	  the default mass is 0, so I now made 1.0 the default for these
	  species.
	  
	  I am not sure what is the right thing to do, I think a very
	  large value would be reasonable since in most cases you do not
	  expect
	  these things to move, but this may cause numerical issues.
	  Probably we
	  should avoid referencing the mass for these species.

2015-03-02 00:20  dstrubbe

	* [r13263] src/species/element.F90: Fixing PUSH/POPs.

2015-03-02 09:27  joseba

	* [r13264] src/math/fft_inc.F90: Added back accidentally removed
	  variable assignment reported by David

2015-03-02 12:04  umberto

	* [r13265] src/states/density.F90: * BugFix: The total charge was
	  not correctly set when running with TDFreezeOrbitals causing
	  octopus to exit with an error about insufficient number of states
	  when calculating the fermi energy.
	  * BugFix: Memory leak. A local wavefunction was not deallocated
	  after use.

2015-03-03 05:05  xavier

	* [r13268] src/system/eigen_plan_inc.F90,
	  testsuite/finite_systems_3d/09-spinors.test: The "window size" of
	  the plan eigensolver is now StatesBlockSize.

2015-03-03 15:39  acastro

	* [r13269] src/opt_control/propagation.F90,
	  src/states/states_restart.F90: Added a verbose option to the
	  states_dump routine.

2015-03-03 16:32  xavier

	* [r13270] testsuite/buildbot_query.pl: Now buildbot_query.pl
	  receives the arguments from the command line,
	  rather than hardcoded values.

2015-03-03 16:33  xavier

	* [r13271] testsuite/linear_response/04-vib_modes.test: Updated the
	  results using buildbot_query.

2015-03-03 16:33  joseba

	* [r13272] src/grid/io_function_inc.F90: Fix to correct the
	  compilation with preprocessed forall

2015-03-03 18:29  xavier

	* [r13273]
	  testsuite/linear_response/04-vib_modes.03-vib_modes_fd.inp,
	  testsuite/linear_response/04-vib_modes.test,
	  testsuite/linear_response/06-vib_modes_fd.01-ground_state.inp,
	  testsuite/linear_response/06-vib_modes_fd.01-vib_modes_fd.inp,
	  testsuite/linear_response/06-vib_modes_fd.test,
	  testsuite/linear_response/Makefile.am: Split the vibrational
	  modes test in two parts. The Sternheimer part is
	  now a short test (it takes < 10 seconds in my machine). The
	  finite
	  differences part (that takes 40 seconds) remains as a long test.

2015-03-03 18:55  dstrubbe

	* [r13274] testsuite/buildbot_query.pl: Copyright/author info and
	  svn ID.

2015-03-04 01:21  xavier

	* [r13275] src/system/eigen_lobpcg_inc.F90: Converted a
	  subsubroutine into a subroutine to avoid a bug in the IBM
	  compiler.

2015-03-04 03:22  xavier

	* [r13276] src/system/eigen_lobpcg_inc.F90: * A macro was causing
	  too long lines, I replaced the macro by the
	  explicit code and split the long lines.
	  * Added some spaces around the equal sign in optional arguments.

2015-03-04 10:23  joseba

	* [r13277] src/hamiltonian/hamiltonian.F90,
	  src/main/casida_inc.F90, src/sternheimer/em_resp_calc_inc.F90,
	  src/system/output_berkeleygw_inc.F90: More fixes to correct the
	  compilation with preprocessed forall.
	  Split line with & don't work with the preprocessor.

2015-03-04 14:28  xavier

	* [r13278] src/ions/vibrations.F90: Print more decimals in the
	  normal frequencies, to make the test
	  matches more accurate.

2015-03-04 16:04  joseba

	* [r13279] src/basic/io_binary.c, src/basic/io_binary_f.F90,
	  src/grid/io_function_inc.F90, src/grid/partition.F90,
	  src/states/restart_inc.F90: Workaround to a bug: if the size of
	  the partition is not adequate, it is not read and it is
	  recalculated. Even if the problem with the writing still exists,
	  it is not creating a crash in future runs.
	  
	  To make this possible, change in get_info_binary to be able to
	  get the real size of the file.
	  

2015-03-04 16:48  xavier

	* [r13280] testsuite/linear_response/04-vib_modes.test: Updated the
	  results for the vibrational modes test to include the
	  new results obtained as a short test.

2015-03-04 22:41  xavier

	* [r13281] testsuite/linear_response/06-vib_modes_fd.test: Updated
	  the results for the fd vibrational modes test based on the
	  buildbot query results.

2015-03-05 11:00  joseba

	* [r13282] external_libs/isf/wrappers/mpi.F90: Ensured that no MPI2
	  feature is called when is not available, for the auxiliary
	  function of the libISF

2015-03-05 12:10  jrfsousa

	* [r13283] src/frozen/Makefile.am, src/frozen/domain.F90,
	  src/frozen/igrid.F90, src/frozen/imesh.F90,
	  src/frozen/simulation.F90, src/frozen/storage.F90,
	  src/frozen/strng.F90, src/frozen/tdarr.F90, src/frozen/thash.F90,
	  src/frozen/tlist.F90, src/frozen/tsingle.F90,
	  src/system/output_fio.F90: Frozen:
	  
	  * Code cleanup, simplification and reorganization.
	  
	  * Add forgotten access by name interface.
	  
	  * Better separation of recursive and non-recursive interfaces.
	  
	  * Starts to implement *_new and *_del interfaces.
	  
	  * Add support for fine meshs.
	  
	  System:
	  
	  output_fio.F90:
	  
	  * Temporary comments in order not to break builds.

2015-03-05 13:56  jrfsousa

	* [r13284] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_external.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90: Frozen:
	  
	  * Code cleanup, simplification and reorganization.
	  
	  * Better separation of recursive and non-recursive interfaces.
	  
	  * Continues to implement *_new and *_del interfaces.

2015-03-05 15:15  jrfsousa

	* [r13285] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_geom.F90, src/frozen/base_potential.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_hamiltonian.F90, src/frozen/fio_handle.F90,
	  src/frozen/fio_model.F90, src/frozen/fio_simulation.F90,
	  src/frozen/fio_states.F90, src/frozen/fio_system.F90,
	  src/system/output_fio.F90: Frozen:
	  
	  base:
	  
	  * Add forgotten interfaces.
	  
	  fio:
	  
	  * Propagate changes.
	  
	  System:
	  
	  output_fio.F90:
	  
	  * Revert changes.

2015-03-05 15:22  jrfsousa

	* [r13286] src/frozen/base_density.F90: Forzen:
	  
	  * Uniformize coding style.

2015-03-05 15:45  jrfsousa

	* [r13287] src/frozen/Makefile.am, src/frozen/frozen_density.F90,
	  src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90: Frozen:
	  
	  * Propagate interface changes.

2015-03-05 15:57  jrfsousa

	* [r13288] src/frozen/Makefile.am, src/frozen/live_density.F90,
	  src/frozen/live_external.F90, src/frozen/live_hamiltonian.F90,
	  src/frozen/live_model.F90, src/frozen/live_states.F90,
	  src/frozen/live_system.F90: Frozen:
	  
	  * Propagate interface changes.

2015-03-06 14:53  jrfsousa

	* [r13289] src/frozen/base_density.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/domain.F90,
	  src/frozen/simulation.F90: Frozen:
	  
	  * Improvements to *_init and *_start interfaces.

2015-03-06 18:45  xavier

	* [r13290] src/math/math.F90: Removed unused data array.

2015-03-07 10:01  jrfsousa

	* [r13291] src/frozen/base_geom.F90, src/frozen/thash.F90,
	  src/frozen/tlist.F90: Frozen:
	  
	  * Bug fixes.

2015-03-07 14:06  jrfsousa

	* [r13292] src/ions/geometry.F90: Ions:
	  
	  geometry.F90:
	  
	  * Add geometry_nullify procedure.

2015-03-07 14:15  jrfsousa

	* [r13293] src/ions/geometry.F90: Ions:
	  
	  geometry.F90:
	  
	  * Fix intent.
	  
	  * Forgot a few lines.

2015-03-07 14:26  jrfsousa

	* [r13294] src/frozen/base_geom.F90: Frozen:
	  
	  * Reflect changes in geometry.F90

2015-03-07 14:39  jrfsousa

	* [r13295] src/frozen/Makefile.am, src/frozen/base_geom.F90,
	  src/frozen/ssys_density.F90, src/frozen/ssys_states.F90,
	  src/frozen/ssys_system.F90: Frozen:
	  
	  * Start to commint Subsystem topmost level.

2015-03-08 07:04  xavier

	* [r13296] share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/hgh.set, src/species/element.F90,
	  src/species/species.F90: * The hgh pseudopotentials are now a
	  PseudopotentialSet. No default
	  spacing or radius is defined for these pseudos.
	  
	  * The element class now strips the name of the species.

2015-03-08 07:13  xavier

	* [r13297]
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp: Some
	  tests now use PseudopotentialSet = hgh.

2015-03-08 07:53  xavier

	* [r13298] src/species/element.F90, src/species/species.F90:
	  Converted the element_t object to a Fortran 2003 style class with
	  member functions. Let's see if our buildbot compilers can manage.

2015-03-08 16:51  xavier

	* [r13299] src/species/element.F90, src/species/species.F90:
	  Reverted the Fortran 2003 code, as it is not well supported by
	  compilers.

2015-03-08 19:41  xavier

	* [r13300] src/species/species.F90: The old species block is no
	  longer supported.

2015-03-08 22:23  xavier

	* [r13301] src/species/species.F90,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp: The
	  optional values for the pseudopotential species are now specified
	  using pairs of flag/value. Current flags are lmax, lloc,
	  min_radius, and
	  max_spacing.
	  
	  (I haven't updated the documentation for %Species yet, I will do
	  it after finishing
	  with the changes to the species block.)

2015-03-09 00:55  xavier

	* [r13302] src/species/species.F90,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp: Added a
	  mass option to the species block.

2015-03-09 01:35  xavier

	* [r13303]
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp: All tests now use
	  default_mass or the mass option.

2015-03-09 02:07  xavier

	* [r13304] src/species/species.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: The mass field of the
	  Species block is no longer mandatory.
	  

2015-03-09 05:49  xavier

	* [r13305] src/species/element.F90, src/species/species.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: The atomic number/valence
	  field is no longer mandatory. The new
	  valence field can be used to give the number of electron of the
	  species.

2015-03-09 06:11  xavier

	* [r13306] testsuite/optimal_control/03-localtarget.05-oct-mp.inp:
	  Fixed an error in an updated test file in my previous commit.

2015-03-09 06:55  xavier

	* [r13307] src/species/species.F90,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp: New format
	  variable to declare the radius of the jellium sphere in the
	  Species block.

2015-03-09 11:29  joseba

	* [r13308] src/grid/boundaries_inc.F90, src/grid/mesh_init.F90,
	  src/grid/par_vec.F90: Removed a temporary array, it is not
	  anymore needed.
	  Renamed a variable, to follow the new unwritten convention

2015-03-09 12:12  jrfsousa

	* [r13309] src/states/states.F90: States:
	  
	  states.F90:
	  
	  * Add pointer to subsystem states.
	  
	  * Add procedure to set the pointer.
	  
	  * Add code to manage pointer lifecycle (init, copy, end).

2015-03-09 12:13  jrfsousa

	* [r13310] src/states/states.F90: States:
	  
	  states.F90:
	  
	  * Correct variable name.

2015-03-09 16:20  xavier

	* [r13311] src/species/species.F90: The optional width for the
	  gaussian is species_full_width is now
	  handled by the flag gaussian_width.

2015-03-09 16:42  jrfsousa

	* [r13312] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_geom.F90, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_handle.F90, src/frozen/base_model.F90,
	  src/frozen/base_potential.F90, src/frozen/base_states.F90,
	  src/frozen/base_system.F90, src/frozen/base_term.F90,
	  src/frozen/domain.F90, src/frozen/iterator_code.F90,
	  src/frozen/simulation.F90, src/frozen/template.h,
	  src/frozen/tpair.F90: Frozen:
	  
	  * Factor out iterator code.

2015-03-09 17:31  xavier

	* [r13313] src/species/species.F90,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp: * The value of
	  'a' for the soft coulomb potential is now given by the
	  'softening' parameter. Note that the definition of a has changed,
	  now
	  it is the square root of the previous value and it has units of
	  length
	  (and units are properly converted).
	  
	  * Started updating the documentation for %Species.

2015-03-09 21:43  jrfsousa

	* [r13314] src/states/states.F90: States:
	  
	  * Changes subroutine name.

2015-03-10 05:25  xavier

	* [r13315] src/basic/messages.F90, src/basic/multicomm.F90,
	  src/basic/profiling.F90, src/basic/space.F90,
	  src/basic/unit_system.F90, src/grid/curv_gygi.F90,
	  src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/grid/grid.F90, src/grid/io_function.F90,
	  src/grid/mesh_partition.F90, src/grid/nl_operator.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/kick.F90, src/hamiltonian/scf_tol.F90,
	  src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/simul_box.F90, src/main/geom_opt.F90, src/main/main.F90,
	  src/main/run.F90, src/math/fft.F90, src/math/nfft.F90,
	  src/math/root_solver.F90, src/math/sparskit.F90,
	  src/opt_control/controlfunction.F90, src/opt_control/initst.F90,
	  src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_spin_inc.F90, src/poisson/poisson.F90,
	  src/poisson/poisson_multigrid.F90, src/scf/lcao.F90,
	  src/scf/mix.F90, src/scf/scf.F90, src/species/ps.F90,
	  src/species/ps_pspio_inc.F90, src/species/species.F90,
	  src/states/cmplxscl.F90, src/states/modelmb_density_matrix.F90,
	  src/states/modelmb_particles.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/system/current.F90, src/system/eigen_arpack.F90,
	  src/system/eigensolver.F90, src/system/exponential.F90,
	  src/system/output.F90, src/system/output_me.F90,
	  src/system/pert.F90, src/system/preconditioners.F90,
	  src/system/subspace.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep.F90,
	  src/td/pes.F90, src/td/pes_mask.F90, src/td/propagator.F90,
	  src/td/spectrum.F90, src/td/td.F90, src/td/td_init_inc.F90,
	  src/td/td_write.F90, src/utils/casida_spectrum.F90,
	  src/utils/local_multipoles.F90, src/utils/local_write.F90,
	  src/utils/vibrational.F90, src/xc/functionals.F90, src/xc/xc.F90:
	  Improvement of the input_error subroutine;
	  
	  * Renamed to messages_input_error.
	  
	  * Added an optional argument to include additional details of the
	  error.
	  
	  * The documentation for the variable is no longer printed,
	  instead the
	  use of the oct-help command is suggested.

2015-03-10 10:03  jrfsousa

	* [r13316] src/states/density.F90: States:
	  
	  density.F90
	  
	  * Add pointers to the subsystem density and the total density.
	  
	  * Add code to set the pointers.
	  
	  * Add code to calculate the total density.

2015-03-10 10:11  jrfsousa

	* [r13317] src/scf/lcao.F90: SCF:
	  
	  lcao.F90:
	  
	  * Add code to add the frozen density to the guess density.

2015-03-10 10:19  jrfsousa

	* [r13318] src/system/output.F90, src/system/output_states_inc.F90:
	  System:
	  
	  output.F90
	  
	  * Add use clauses.
	  
	  output_states_inc.F90
	  
	  * Add code to output the subsystems densities.

2015-03-10 14:37  jjornet

	* [r13319] src/utils/convert.F90: * Implemented a much more
	  efficient approach for the Convert FFT transform utility.
	  * Removed useless variables.
	  * Binary file is written in steps of 'ConvertReadSize' value.
	  That enable to make FFT of the time dependent densities of big
	  systems (large mesh size).
	  (Parallelization not implemented yet.)

2015-03-11 09:45  joseba

	* [r13320] src/grid/boundaries_inc.F90, src/grid/mesh_init.F90,
	  src/grid/par_vec.F90: Changed variable names of the par_vec
	  module to make clear that they correspond to the ghost points and
	  their communication

2015-03-11 13:05  jrfsousa

	* [r13321] src/frozen/base_external.F90, src/frozen/base_geom.F90,
	  src/frozen/base_term.F90, src/frozen/ssys_system.F90,
	  src/frozen/tdarr.F90, src/frozen/tdict.F90, src/frozen/thash.F90,
	  src/frozen/tlist.F90: Frozen:
	  
	  * Code clenup and some minor changes.

2015-03-11 13:14  jrfsousa

	* [r13322] src/frozen/Makefile.am, src/frozen/ssys_external.F90,
	  src/frozen/ssys_hamiltonian.F90: Frozen:
	  
	  * Continues to comit Subsystem topmost level.

2015-03-11 13:50  jrfsousa

	* [r13323] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  * Add pointer to subsystems external potential.
	  
	  * Add optional argument to epot_init to pass the subsytem
	  hamiltonian.
	  
	  * Add code to handle the pointer lifecycle (init, end).
	  
	  * Add code to set the pointers to the total and the "live" part
	  of the potential.

2015-03-11 14:02  jrfsousa

	* [r13324] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  * Add pointer to Subsystems Hamiltonian.
	  
	  * Add optional argument to hamiltonian_init to pass the Subsytem
	  Hamiltonian.
	  
	  * Add code to handle the pointer lifecycle (init, end).

2015-03-11 14:13  jrfsousa

	* [r13325] src/system/output.F90, src/system/output_h_inc.F90:
	  System:
	  
	  output.F90
	  
	  * Add use clauses.
	  
	  output_h_inc.F90
	  
	  * Add code to output the subsystems external potentials.

2015-03-11 14:24  jrfsousa

	* [r13326] src/system/output_fio.F90: System:
	  
	  output_fio.F90
	  
	  * Add charge to output.

2015-03-11 16:26  philipp

	* [r13327] src/td/Makefile.am, src/td/pes.F90, src/td/pes_flux.F90,
	  src/td/td.F90: Initial commit for t-surff (PhotoElectronSpectrum
	  = pes_flux).

2015-03-11 16:35  jrfsousa

	* [r13328] src/frozen/base_hamiltonian.F90: Frozen:
	  
	  * Remove spurious print.

2015-03-11 16:36  jrfsousa

	* [r13329] src/frozen/fio_config.F90: Frozen:
	  
	  * Read charge.

2015-03-11 16:50  jrfsousa

	* [r13330] src/frozen/Makefile.am, src/frozen/base_ionic.F90,
	  src/frozen/frozen_config.F90, src/frozen/frozen_hamiltonian.F90,
	  src/frozen/frozen_ionic.F90, src/frozen/ssys_hamiltonian.F90,
	  src/frozen/ssys_ionic.F90: Frozen:
	  
	  * Add ionic term.

2015-03-11 22:43  philipp

	* [r13331] src/td/Makefile.am: pes.o depends on pes_flux.o in
	  td/Makefile.am

2015-03-11 23:06  huebener

	* [r13332] src/grid/cube.F90, src/hamiltonian/Makefile.am,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90, src/math/nfft.F90,
	  src/math/nfft_inc.F90, src/poisson/poisson_fft.F90,
	  src/scf/ground_state.F90, src/scf/scf.F90, src/system/v_ks.F90,
	  src/td/td.F90: Exact exchange using localized valence states from
	  the selected-coloumns-of-density-matrix (SCDM) method. It
	  activated by the flag EXX in the input file. Only works for
	  Hartree-Fock and PBE0 (hard coded). Tested on methane for
	  groundstate and propagation. Also: poisson solver with NFFT for
	  isolated systems.

2015-03-12 10:45  huebener

	* [r13333] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90,
	  src/math/nfft.F90: small fixes and coding style: added PUSH POP,
	  end do, lower bounds etc.

2015-03-12 11:03  huebener

	* [r13334] src/hamiltonian/scdm.F90: small fix for pre-processor

2015-03-12 12:20  philipp

	* [r13335] src/td/pes.F90, src/td/pes_flux.F90: Adds subroutine
	  pes_flux_output.

2015-03-12 15:22  huebener

	* [r13336] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90: small fix to make the buildbot happy

2015-03-12 23:17  xavier

	* [r13337] src/basic/xml_low.c, src/species/ps_upf.F90: Disabled
	  debug output in the UPF/QSO pseudopotentials.

2015-03-12 23:38  xavier

	* [r13338] src/hamiltonian/scdm.F90: Removed single quote from
	  comment.

2015-03-13 13:59  jrfsousa

	* [r13339] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  epot.F90
	  
	  * Add pointer to subsystems ionic term.
	  
	  * Add code to handle the pointer lifecycle (init, end).
	  
	  * Add code to calculated the ionic interaction forces and
	  energies.

2015-03-13 16:48  joseba

	* [r13340] src/grid/io_function_inc.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/states/states_restart.F90:
	  Implemented a new strategy to write restart files in parallel
	  (when
	  only domain parallelization is available). With this new
	  strategy;
	  now, all the processes in the domain write down to different
	  files. First, a gather of different data to each process is done,
	  and
	  then, all together write the files (a file per process).
	  
	  It is at least 5 times faster with a system with 157 atoms
	  (578645
	  domain points and 209 states) running with 16 processes (in a
	  unique
	  node) in Hydra machine (Garching). The improvement is higher with
	  bigger systems. Needed to measure with states+domains (might be
	  slower). Might be good to have this strategy selectable in the
	  input
	  file.

2015-03-13 17:17  joseba

	* [r13341] src/states/states_restart.F90: Fixed serial compilation

2015-03-14 04:22  xavier

	* [r13342] src/species/species.F90: Check that parameters are
	  passed for the correct species.

2015-03-14 05:11  xavier

	* [r13343] src/states/states_restart.F90: * Converted constant
	  values to uppercase.
	  * Changed the value of a constant to match a future change in the
	  species block.

2015-03-14 05:55  xavier

	* [r13344] build/mk_varinfo.pl, src/include/Makefile.am,
	  src/include/global.h, src/species/species.F90: * Now the values
	  of the options, defined in the documentation variables,
	  can be read from the code. For an option abc the macro OPTION_ABC
	  is defined
	  through global.h.
	  
	  * The new scheme is used in species.F90.

2015-03-14 06:28  xavier

	* [r13345] build/mk_varinfo.pl: Bugfix: After my last commit the
	  variables file was not generated.

2015-03-14 09:20  joseba

	* [r13346] src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90:
	  Warning: those files don't compile with IBM compiler (version
	  V12.1)
	  Many style fixes to the new scdm_m module, still many missing
	  like using messages_* to output, M_ZERO to assign float values,
	  SAFE_ALLOCATES...
	  Fixes:
	  - Correct indentation, 2 spaces
	  - Added header with copyright info
	  - Added svn id with svn propset svn:keywords 'Id' scdm.F90
	  - Deleted useless empty ! comments
	  - Changed one letter variable names, there should not be used at
	  all
	  - Lower case variables, uppercase is for constants
	  - New Fortran comparison style (<,>,==,/=, and not .ge. .le....)
	  - Various FIXMEs for the above mentioned tasks
	  - One dummy parameter per line

2015-03-14 15:27  xavier

	* [r13347] build/mk_varinfo.pl, src/basic/varinfo_low.c,
	  src/system/output.F90: A new feature for the variable
	  documentation: the 'bit' operator can
	  now be used to define options, so instead of defining "Option mmb
	  134217728" it is possible to use "Option mmb bit(27)".

2015-03-14 16:19  xavier

	* [r13348] src/system/output.F90, src/system/output_etsf_inc.F90,
	  src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90: The output_m module uses the
	  values declared from options.

2015-03-14 18:14  xavier

	* [r13349] src/species/ps.F90, src/species/ps_cpi.F90,
	  src/species/ps_fhi.F90, src/species/ps_hgh.F90,
	  src/species/ps_psf.F90, src/species/ps_qso.F90,
	  src/species/ps_upf.F90, src/species/species.F90,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp: Octopus no
	  longer tries to guess the pseudopotential file.
	  
	  Pseudopotentials defined in the Species block must be given the
	  path
	  to the pseudopotential through the file or db_file parameters
	  (this
	  last one is for pseudos in the octopus directory).

2015-03-14 18:41  xavier

	* [r13350] src/species/ps.F90: Added a function to detect the type
	  of pseudopotential from the
	  filename.

2015-03-14 18:54  xavier

	* [r13351] src/species/ps.F90, src/species/species.F90: Now ps_init
	  does not receive the pseudopotential type.

2015-03-14 20:35  xavier

	* [r13352] src/main/static_pol.F90, src/sternheimer/em_resp.F90,
	  src/td/pes_mask_out_inc.F90, src/utils/convert.F90: I forgot to
	  convert some constants in my previous commit.

2015-03-14 21:08  xavier

	* [r13353] share/pseudopotentials/hgh.set,
	  share/pseudopotentials/sg15.set,
	  share/pseudopotentials/standard.set,
	  src/hamiltonian/species_pot.F90, src/species/ps.F90,
	  src/species/species.F90,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp: Now all
	  the pseudopotentials are defined by the same type
	  species_pseudo. The type is determined from the file.

2015-03-14 21:32  xavier

	* [r13354] src/species/species.F90: Species_from_file now uses the
	  file and db_file parameters.

2015-03-14 23:22  jrfsousa

	* [r13355] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  epot.F90
	  
	  * Reverting comit 13339 in order reinstate compilation until a
	  workaround to pathscale bugs is found.

2015-03-14 23:36  xavier

	* [r13356] src/species/species.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: The formulas for
	  species_user_defined and species_charge_density are
	  passed by parameters: potential_formula and density_formula.

2015-03-15 07:26  xavier

	* [r13357] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: Bugfix: Since [10909] the
	  parallel testsuite was no longer parallel.
	  To fix this, instead of capturing the return code, the
	  information
	  about the number of failures or other conditions is printed to
	  the
	  standard output, where it is parsed by oct-run_testsuite.sh.

2015-03-15 08:10  xavier

	* [r13358] testsuite/oct-run_testsuite.sh.in: Now the testuite runs
	  in parallel by default, with a number of jobs
	  equal to the processors in the machine.

2015-03-15 09:46  jrfsousa

	* [r13359] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  epot.F90
	  
	  * Remove unused module.
	  
	  * Add missing target attribute.

2015-03-16 01:06  xavier

	* [r13360] src/species/species.F90: Check for duplicated parameters
	  in the species block.

2015-03-16 17:09  jjornet

	* [r13361] src/grid/basins.F90: * Bugfix: corrected the point index
	  for parallel environment.

2015-03-16 18:52  jjornet

	* [r13362] src/grid/basins.F90: * Fixed typo.

2015-03-16 19:24  xavier

	* [r13363] src/main/Makefile.am, src/main/octopus_mpi.F90: Added a
	  replacement for the octopus_mpi command that prints a warning
	  and returns an error code. The objective is to avoid users from
	  running an old version of octopus.

2015-03-16 19:28  dstrubbe

	* [r13364] src/hamiltonian/epot.F90: Reverting r13359 which is
	  causing the pathscale openmpi compilation to crash.

2015-03-16 21:43  jjornet

	* [r13365] src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: * clist variable now inside
	  local_domain_t variable type
	  * added some restart information written in "restart/ld".
	  * added restart option to start from local domains previously
	  computed. TODO: use standart FromScratch option.
	  * removed unused variable.
	  * passing l_end variable to local_write_iter

2015-03-17 02:30  dstrubbe

	* [r13366] src/hamiltonian/hamiltonian.F90: Reverting r13324, which
	  caused the lithium test to give NaN for the energy in the time
	  propagation, on babbage_gnu_serial_short.

2015-03-17 03:03  dstrubbe

	* [r13367] testsuite/README,
	  testsuite/functionals/05-ks_inversion.test: * Updating testsuite
	  documentation.
	  * Changing final LINE instances in test file.

2015-03-17 03:06  dstrubbe

	* [r13368] src/include: svn:ignore for new options.h.

2015-03-17 06:23  xavier

	* [r13369] build/mk_functionals_list.pl, configure.ac,
	  src/Makefile.am, src/common-rules.make,
	  src/hamiltonian/Makefile.am, src/hamiltonian/functionals.F90,
	  src/hamiltonian/functionals_list.F90,
	  src/hamiltonian/fxc_inc.F90, src/hamiltonian/kxc_inc.F90,
	  src/hamiltonian/vxc_inc.F90, src/hamiltonian/xc.F90,
	  src/main/Makefile.am, src/utils/Makefile.am, src/xc/Makefile.am,
	  src/xc/functionals.F90, src/xc/functionals_list.F90,
	  src/xc/fxc_inc.F90, src/xc/kxc_inc.F90, src/xc/vxc_inc.F90,
	  src/xc/xc.F90: Removed the src/xc/ subdirectory and moved all the
	  files to
	  src/hamiltonian/.

2015-03-17 07:08  xavier

	* [r13370] src/xc: I forgot to remove the xc/ directory.

2015-03-17 11:09  huebener

	* [r13371] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90,
	  src/system/v_ks.F90: In case of exact exchange, exchange
	  parameter from libxc is copied to hamiltonian, so any hybrid
	  could be used in principle, not tested. Changed (fixed)
	  indentation in hamiltonian_inc. Spelling in comments. Added
	  reference for the method. Some clean up of comments and style
	  adjustments (empty comments, safe_ macros, messages).

2015-03-17 13:46  huebener

	* [r13372] src/hamiltonian/scdm.F90: small fix in comments for
	  doxygen

2015-03-17 15:43  philipp

	* [r13373] src/td/pes.F90: reference to t-surff technique.

2015-03-17 17:33  jjornet

	* [r13376] src/utils/local_multipoles.F90: * Removed unused
	  variable.
	  * Simplified an if statement.

2015-03-17 23:12  dstrubbe

	* [r13377] src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90:
	  Minor bugfix: use of ForceComplex with em_resp or kdotp could
	  cause a crash, since mixing would be chosen real anyway.

2015-03-17 23:24  dstrubbe

	* [r13378] src/system/linear_solver_inc.F90: Bugfix: for smearing
	  with Sternheimer, with complex wavefunctions. The imaginary part
	  of the projections on the left-hand side of the equation were
	  mistakenly being discarded. Fortunately, I don't think many, or
	  any, calculations in this category were being done.

2015-03-17 23:39  xavier

	* [r13379] testsuite/oct-run_testsuite.sh.in: When the testsuite is
	  executed in parallel by default, the EXEC
	  variable is used to run the tests with `nice`, so that they have
	  lower
	  priority than the rest of things runing in the system.

2015-03-18 03:36  dstrubbe

	* [r13380] testsuite/oct-run_testsuite.sh.in: Insofar as we are
	  going to have default job parallelism in the testsuite, we
	  should:
	  * Have the appropriate space at the end of [ -z $OCT_TEST_NJOBS].
	  This caused an error on hbar.
	  * Send output to /dev/null from `which` commands so the user
	  doesn't see errors from that.
	  * Try an option that works on Mac too. chum actually doesn't know
	  nproc either. I don't know if there's a command it does have that
	  is equivalent.
	  * Check whether the result of `which` is blank. It was for nproc
	  on Mac, and that was considered executable with -x, leading to
	  trying to run the blank command.
	  * Keep the other lines assigning a default for OCT_TEST_NJOBS
	  together with these.

2015-03-18 06:12  xavier

	* [r13381] testsuite/components/03-derivatives_3d.01.inp: Reduced
	  the size of the grid for the derivatives tests, this should
	  reduce the memory required considerably.
	  
	  (This tests needs more precise reference value, I will fix that
	  once
	  the slaves have run the test with the new parameters.)

2015-03-18 14:49  joseba

	* [r13382] doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh, m4/metis.m4: Backport of
	  13272 to trunk:
	  ------------------------------------------------------------------------
	  r13272 | joseba | 2015-03-03 17:33:38 +0100 (ar., 03 mar 2015) |
	  3 lines
	  
	  Fix to correct the compilation with preprocessed forall
	  
	  
	  ------------------------------------------------------------------------

2015-03-18 14:55  joseba

	* [r13383] doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh, m4/metis.m4: Reverting
	  accidentally commit

2015-03-18 15:21  xavier

	* [r13390] share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/hgh.set,
	  share/pseudopotentials/hgh_lda.set, src/species/species.F90,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp: Changes
	  in pseudo sets:
	  * OPTION_ constants are now used.
	  * Renamed hgh to hgh_lda.
	  * hgh_lda is no longer experimental.
	  * Updated the tests to reflect this changes.

2015-03-18 16:00  dstrubbe

	* [r13391] src/species/species.F90: Improvements to species
	  documentation:
	  * Fixed type for PseudopotentialSet, formatting.
	  * Fixed major omission in Species block: the list of supported
	  pseudo formats had been removed, and the way the format was
	  identified was not listed.
	  * Fixed max_radius that was supposed to be min_radius.
	  * Formatting.
	  * Fixing leftover references to old style.
	  * Typos.
	  * Info on default values.

2015-03-18 16:30  joseba

	* [r13392] src/grid/fourier_space_inc.F90, src/poisson/poisson.F90,
	  src/poisson/poisson_cg.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_fmm.F90, src/poisson/poisson_isf.F90,
	  src/poisson/poisson_libisf.F90: intent(in) for the Poisson object
	  (and related).
	  
	  This change is necessary to properly implement scdm

2015-03-18 18:42  dstrubbe

	* [r13393] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/math/nfft.F90,
	  src/scf/ground_state.F90, src/system/v_ks.F90, src/td/td.F90: *
	  Undoing mistaken commits from r13332 (Hannes, please be careful
	  about this. You added PCM code in hamiltonian.F90 and removed the
	  emacs footer from nfft.F90. Probably the first at least is due to
	  improper resolution of svn conflicts.)
	  * Clarifying situation about SCDM method: this is a subset of
	  TheoryLevel = hartree_fock, so many references to 'hm%EXX' (to be
	  renamed to 'hm%scdm') are unnecessary.

2015-03-18 18:50  xavier

	* [r13394] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/scdm.F90:
	  Moved the scdm instace of scdm_t from a global variable in the
	  scdm_m
	  module to a component of hamiltonian_t. This solves the
	  compilation
	  problem with IBM XLF.

2015-03-18 18:53  xavier

	* [r13395] src/main/main.F90, src/main/run.F90: More fixes for the
	  IBM compiler:
	  
	  The definition of sys, hm, and calc_mode_prof was causing another
	  ICE. I merged run_init, run, and run_end into a single function
	  and
	  declared those variables inside.

2015-03-18 19:10  dstrubbe

	* [r13396] src/grid/cube_function.F90,
	  src/hamiltonian/hamiltonian.F90, src/ions/geometry.F90,
	  src/poisson/poisson_isf.F90, src/states/states.F90: Improvements
	  to comments and documentation. Mainly "associated with" not
	  "associated to".

2015-03-18 21:12  dstrubbe

	* [r13397] build/var2html.pl: Using MathJax to render <math>
	  </math> tags with LaTeX in variable descriptions
	  (http://docs.mathjax.org/en/latest/start.html). I also added
	  UTF-8 encoding so special characters such as accented letters
	  come out properly. Using the inline mode for now, since many uses
	  of <math> are just for single symbols not whole equations, though
	  we could use both depending on context.

2015-03-18 21:30  dstrubbe

	* [r13398] src/scf/lcao.F90, src/scf/scf.F90,
	  src/system/eigen_arpack.F90, src/system/eigen_feast.F90: Some
	  minor improvements to documentation, mostly regarding <math>.

2015-03-18 21:38  dstrubbe

	* [r13399] testsuite/functionals/03-xc.b3lyp_fock.inp,
	  testsuite/functionals/03-xc.b3lyp_oep.inp,
	  testsuite/functionals/03-xc.fock.inp,
	  testsuite/functionals/03-xc.pbe0_fock.inp,
	  testsuite/functionals/03-xc.pbe0_oep.inp,
	  testsuite/functionals/03-xc.test: We need to have some tests for
	  hybrid functionals! I added ones for PBE0 and B3LYP, with Fock
	  operator and OEP approaches which give satisfactory agreement
	  with one another.

2015-03-18 21:42  dstrubbe

	* [r13400] src/scf/scf.F90: Removing code that zeroes out the
	  potential after LCAO for complex scaling. This is unnecessary, as
	  it is just a worse version of doing LCAOStart = lcao_states,
	  which would at least keep the atomic guess densities.

2015-03-18 21:50  dstrubbe

	* [r13401] testsuite/functionals/03-xc.fock.inp: Removing a file
	  added by mistake.

2015-03-18 21:52  dstrubbe

	* [r13402] testsuite/functionals/Makefile.am: Adding new test files
	  to Makefile.am.

2015-03-18 22:22  dstrubbe

	* [r13403] src/scf/scf.F90: * A comment on why have warnings about
	  convergence from MaximumIter = 0.
	  * Removing unnecessary commented code.
	  * The warning from MaximumIter = 0 that SCF is not converged is
	  sufficient, let's not bother with saying also that the states are
	  not converged.

2015-03-18 22:37  dstrubbe

	* [r13404] src/hamiltonian/hamiltonian_inc.F90,
	  testsuite/functionals/03-xc.test: * Hartree-Fock theory level now
	  calculates the exchange energy. It was quite peculiar previously
	  that this was zero. Unfortunately, it is only working for
	  MaximumIter = 0 currently; otherwise the value gets zeroed out by
	  v_ks_calc.
	  * Enabling test matches for hybrid Fock exchange. Unfortunately
	  there is a small problem with this too: I am not sure where the
	  local part of the exchange is ending up, and I believe that is
	  the reason for the small discrepancy from the OEP results.

2015-03-19 01:17  dstrubbe

	* [r13405] src/hamiltonian/hamiltonian_inc.F90: Fixing intents in
	  light of r13404.

2015-03-19 01:26  dstrubbe

	* [r13406] testsuite/oct-run_regression_test.pl: Bugfix to
	  testsuite Options support: a test would be run if the
	  executable's options string contained the string of the required
	  Option, even if that was just a substring of a real option. This
	  made a test fail on a slave that had PNFFT but not NFFT; the test
	  was not skipped so the run stopped with an error message about
	  the lack of NFFT.

2015-03-19 01:30  dstrubbe

	* [r13407] src/poisson/poisson.F90, src/td/pes_mask.F90: Cleaning
	  up some error messages.

2015-03-19 02:47  dstrubbe

	* [r13408] src/hamiltonian/hamiltonian_inc.F90,
	  testsuite/functionals/03-xc.test: Reverting r13404 and r13405.
	  Changing the intent for hm in hamiltonian_exchange_operator
	  causes too much trouble for intents up the calling chain. Another
	  approach will be needed.

2015-03-19 15:52  xavier

	* [r13412] src/hamiltonian/functionals.F90, src/hamiltonian/xc.F90,
	  src/system/v_ks.F90, testsuite/functionals/03-xc.b3lyp_fock.inp,
	  testsuite/functionals/03-xc.b3lyp_oep.inp,
	  testsuite/functionals/03-xc.pbe0_fock.inp,
	  testsuite/functionals/03-xc.pbe0_oep.inp: Now the default
	  TheoryLevel is selected based on the XCFunctional (and
	  the default XCFunctional still depends on the default theory
	  level).
	  For hybrid functionals the default TheoryLevel is now
	  hartree_fock.
	  
	  This is to be consistent with the rest of the world and avoid
	  confusion for users who would expect that hybrids calculate
	  exchange
	  using Hartree-Fock and not OEP, that was the default before.

2015-03-19 15:55  dstrubbe

	* [r13413] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: A little cleaning in testsuite
	  scripts:
	  * die255 takes care of "ERROR: " and newline for the string.
	  * Restoring error message about empty name with 'Test: ' that got
	  lost at some point recently.
	  * Updating output command line for dry-run.
	  * Removing obsolete comment.

2015-03-19 16:22  dstrubbe

	* [r13414] src/basic/unit_system.F90, src/hamiltonian/kick.F90,
	  src/system/eigen_arpack.F90, src/td/td_init_inc.F90: Better math
	  and HTML in variable reference.

2015-03-19 17:15  dstrubbe

	* [r13415] src/basic/calc_mode.F90, src/main/run.F90,
	  src/main/test.F90, src/system/output.F90, src/system/system.F90,
	  src/utils/convert.F90, src/utils/local_multipoles.F90: Reverting
	  my controversial commit r13185 in which the CalculationMode was
	  used to determine the default for OutputInterval. I will find a
	  different solution.

2015-03-19 17:22  huebener

	* [r13416] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/scdm.F90,
	  src/system/v_ks.F90, src/td/td.F90: removed flag EXX. Fock
	  operator with SCDM method is now triggerd by input flag scdm_EXX
	  and requires TheoryLevel=hartree_fock, stops otherwise.

2015-03-19 18:15  dstrubbe

	* [r13417] src/system/output.F90: Do not create the output_iter
	  directory unless it is going to be used.

2015-03-19 18:28  huebener

	* [r13418] src/system/v_ks.F90: replace erroneously deleted line

2015-03-19 19:47  dstrubbe

	* [r13419] testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.sh.in: * Removing some extra blank
	  lines and redundant output from the testsuite scripts. 'Starting
	  test run...' is implied from 'Executing: ...', and 'Finished test
	  run.' is implied from 'Elapsed time...' and 'Execution : ...'.
	  * Only leave the new 'Status:' line at the end of the log output
	  if it indicated failures or an error. It seems natural to be able
	  to search for 'fail' and only find problems in the runs.

2015-03-19 21:26  dstrubbe

	* [r13420] src/td/td_init_inc.F90: * Correction to documentation:
	  Car-Parrinello was removed 18 months ago, but not from the
	  variable reference.
	  * More grammatical error message.

2015-03-19 21:45  dstrubbe

	* [r13421] src/td/td.F90, src/td/td_init_inc.F90: Bugfix: Moving
	  scf_init for Born-Oppenheimer after states_allocate_wfns, since
	  that is the order in which they occur for ground-state
	  calculations and it is therefore assumed to be the case in some
	  calls from scf_init. Specifically, the check for whether there is
	  more than one block per node for lobpcg in eigensolver_init needs
	  to be after blocks were set up in states_allocate_wfns, or else
	  it may erroneously block the calculation (or mistakenly allow
	  it).

2015-03-19 22:14  dstrubbe

	* [r13422] src/grid/mesh_init.F90, src/grid/nl_operator.F90,
	  src/scf/scf.F90, src/td/spectrum.F90, src/utils/vibrational.F90:
	  Variable reference:
	  * Fixing some unnecesssary mentions of simple defaults in the
	  description, adding missing Default fields, and removing Default
	  fields that stated unconditionally a value that is in fact on
	  sometimes the default.
	  * Using <math> in one place.

2015-03-19 23:09  dstrubbe

	* [r13423] src/states/states.F90,
	  testsuite/real_time/10-bomd.02-td.inp: * Allow Born-Oppenheimer
	  calculation with ScaLAPACK by adding a variable to request
	  ScaLAPACK layout by hand.
	  * Tell the user to set this when trying to use ScaLAPACK and the
	  layout was not used.
	  * Guard against crashes when trying to use ScaLAPACK with task
	  parallelization.
	  * Use par_states in first part of BO test to check this behavior
	  (as originally reported by Carlo and Stefano). -- Note that the
	  restart fails in this case: this needs to be fixed too.

2015-03-19 23:48  dstrubbe

	* [r13424] src/scf/scf.F90, src/system/output.F90,
	  testsuite/finite_systems_3d/05-output.01-gs.inp: Resurrecting
	  OutputDuringSCF (removed r12082): this allows us to have output
	  occurring during the iterations by default for TD but not for
	  SCF, without introducing explicitly calc-mode-dependent code. You
	  can still turn off output with OutputInterval = 0.

2015-03-20 01:13  dstrubbe

	* [r13425] testsuite/real_time/10-bomd.02-td.inp: This test needs
	  ExperimentalFeatures now. Also, it doesn't work when scalapack
	  isn't available, I need to deal with this too.

2015-03-20 02:16  dstrubbe

	* [r13426] src/grid/basins.F90,
	  testsuite/finite_systems_3d/05-output.test: * Marking Bader
	  basins parallel in domains as experimental, since quite different
	  results are obtained in parallel.
	  * Adding commented match lines to output test, showing serial
	  Bader results.

2015-03-20 02:28  dstrubbe

	* [r13427] build/mk_varinfo.pl: Adding a check that the value
	  assigned to an Option via the bit functionality is not larger
	  than the largest signed 32-bit integer. Indeed, there is no room
	  to add any more flags to the Output variable...

2015-03-20 02:37  dstrubbe

	* [r13428] testsuite/real_time/10-bomd.test: Making BO test run
	  only with scalapack if using MPI.

2015-03-20 13:34  joseba

	* [r13431] src/hamiltonian/pcm.F90: Deleted single letter variables
	  end do and end if
	  Lower case
	  Indentation
	  Deleted useless return statements

2015-03-20 15:17  dstrubbe

	* [r13433] testsuite/finite_systems_3d/05-output.01-gs.inp: I
	  forgot set ExperimentalFeatures = yes in this test after
	  declaring Bader parallel in domains to be experimental.

2015-03-20 15:54  dstrubbe

	* [r13440] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/scdm.F90, src/td/pes.F90, src/td/pes_flux.F90: *
	  Calls to messages_experimental for SCDM and t-surff.
	  * Fixing flag type of variable PhotoElectronSpectrum.
	  * Doxygen comments.
	  * Removing commented modules.
	  * Removing traces of datasets.
	  * Adding emacs modelines.
	  * Commenting out SuffShape variable reference, and assigning its
	  Section more appropriately.

2015-03-20 16:47  dstrubbe

	* [r13448] src/main/test.F90: * Clarifying documentation for
	  TestType.
	  * The interpolation test now respects the value of TestType.

2015-03-20 18:01  dstrubbe

	* [r13456] testsuite/oct-run_regression_test.pl: The testsuite
	  script should be a little more discerning, and only skip a line
	  with TestGroups if it conforms to the proper syntax for this line
	  (i.e. including the colon). Otherwise it should be rejected as
	  containing an unknown tag.

2015-03-20 21:00  dstrubbe

	* [r13458] testsuite/README, testsuite/real_time/10-bomd.test: *
	  Putting Options and Options_MPI before Program in testsuite
	  documentation, since they apply to following declarations of
	  Program.
	  * Fixing order of Options_MPI in testsuite file, which was
	  causing failures on MPI slaves without scalapack.

2015-03-20 21:19  dstrubbe

	* [r13459] src/system/subspace.F90: Some use of only_root_writes,
	  to help ensure that messages actually get written to the console.

2015-03-21 02:49  xavier

	* [r13460] src/system/current.F90,
	  testsuite/periodic_systems/05-lithium.test: Bugfix: The current
	  is now calculated using the Hamiltonian method.
	  This avoids a sign problem in the non-local correction term used
	  in
	  the gradient_corrected method, that is now experimental. The
	  Hamiltonian method is also faster, despite the 4 Hamiltonian
	  applications required per calculation. A test was updated.

2015-03-21 21:31  dstrubbe

	* [r13462] src/basic/Makefile.am, src/basic/calc_mode.F90,
	  src/basic/calc_mode_par.F90, src/basic/multicomm.F90,
	  src/main/casida.F90, src/main/main.F90, src/main/test.F90,
	  src/scf/ground_state.F90, src/states/states.F90,
	  src/states/states_calc.F90, src/states/states_dim.F90,
	  src/system/system.F90, src/td/td.F90, src/utils/convert.F90:
	  Renaming calc_mode_m (and its routines and types) to
	  calc_mode_par_m, and explaining in the header that this is for
	  specifying calculation-mode-dependent parallelization schemes,
	  not for the calculation modes themselves. This avoids confusion
	  as in r13185, ends the anomaly of the calc_modes being declared
	  in a different file (run.F90), and also avoids the dangerous
	  situation that run.F90 and calc_mode.F90 both declared a
	  calc_mode_init, that did different things and were in different
	  scopes. Also, removed usage of calc_mode_m from a couple of files
	  that did not need it.

2015-03-21 22:01  dstrubbe

	* [r13464] src/poisson/poisson.F90: * Improvements to Poisson
	  solver documentation and output.
	  * We no longer write a reference in the output for Poisson, in
	  conformity with the style in the rest of the code.
	  * Bugfix: the wrong variable was being used in checking whether
	  we had a valid option to PoissonFFTKernel.

2015-03-21 22:18  dstrubbe

	* [r13465] src/main/unocc.F90, src/scf/scf.F90,
	  src/system/eigensolver.F90,
	  testsuite/finite_systems_3d/20-eigensolver.05-evolution.inp: *
	  Note and warning regarding RMMDIIS for unocc.
	  * Reference for single-point Berry's phase.
	  * Marking imaginary-time evolution eigensolver experimental, in
	  accordance with the documentation.
	  * Making arpack eigensolver experimental.

2015-03-21 22:23  dstrubbe

	* [r13466] src/hamiltonian/berry.F90: Documentation improvements.

2015-03-22 04:58  xavier

	* [r13467] src/ions/symmetries.F90: Bugfix: Octopus check for
	  integer translations was using M_EPSILON
	  precision. With gcc 4.9, in my machine at least, spglib produces
	  slightly different results, that caused the detection of integer
	  transitions to fail for silicon.
	  
	  Now the precision for the detection is 'symprec', the value
	  passed to
	  spglib.

2015-03-22 06:22  xavier

	* [r13468] src/basic/json.F90, src/basic/json_parser.F90,
	  src/basic/path.F90, src/math/fft.F90, src/math/fftw.F90,
	  src/math/gauss_legendre.F90, src/math/lalg_basic.F90,
	  src/math/math.F90, src/math/ode_solver.F90, src/math/sgfft.F90,
	  src/math/solvers.F90, src/math/spline_filter.F90,
	  src/math/symm_op.F90: * Removed unused modules.
	  * Removed uses of "only" and ordered module.

2015-03-22 06:59  xavier

	* [r13469] src/main/casida.F90, src/main/gcm.F90,
	  src/main/geom_opt.F90, src/main/invert_ks.F90, src/main/main.F90,
	  src/main/memory.F90, src/main/phonons_fd.F90, src/main/run.F90,
	  src/main/static_pol.F90, src/main/test.F90, src/main/unocc.F90,
	  src/system/output_fio.F90: More module cleaning.

2015-03-22 20:43  xavier

	* [r13470] testsuite/oct-run_testsuite.sh.in: * The number of jobs
	  for the testsuite is reduced when the executable
	  has been compiled with MPI or OpenMP.
	  
	  * Improved the output of the testsuite script. A warning is
	  printed
	  about the possible duration of the test.

2015-03-22 22:06  dstrubbe

	* [r13478] build/var2html.pl: Bugfix: the HTML variable
	  documentation did not contain the Default if it was 0, due to
	  faulty Perl logic that considered 0 equivalently to "".

2015-03-22 22:23  dstrubbe

	* [r13479] build/var2html.pl, src/scf/rdmft.F90: * Some validity
	  checking of variable reference.
	  * Fixing a problem found.

2015-03-23 03:58  xavier

	* [r13480] src/grid/batch_ops_inc.F90: Bugfix: The calculation of
	  the current using the Hamiltonian required
	  a routine not implemented in OpenCL, this caused the test to
	  fail. I
	  have implemented the routine (reusing the code from the
	  application of
	  the local potential).

2015-03-23 06:36  xavier

	* [r13481] configure.ac: The configure script can now detect
	  clblas, the open sourced version
	  of clamdblas (that is now deprecated).

2015-03-23 08:34  joseba

	* [r13482] src/poisson/poisson.F90: Corrected the ISF version we
	  are using in documentation.

2015-03-23 14:55  dstrubbe

	* [r13485] src/grid/batch_ops_inc.F90: Restoring non-OpenCL
	  compilation after r13480.

2015-03-23 16:25  dstrubbe

	* [r13486] m4/libxc.m4: Bugfix: libxc m4 should not use prefix
	  variable if it is not set, or else it tries linking with
	  meaningless paths like -L/lib.

2015-03-23 16:49  xavier

	* [r13487] configure.ac: * clFFT, the open sourced version of
	  clAmdFft, can now be detected by
	  the configure script.
	  
	  * Changed the description in the configure to match the new
	  libraries.

2015-03-23 17:42  dstrubbe

	* [r13488] src/species/species.F90: Better math and formatting in
	  Species block.

2015-03-23 17:47  dstrubbe

	* [r13489] src/hamiltonian/kick.F90, src/hamiltonian/lasers.F90,
	  src/ions/geometry.F90, src/ions/read_coords.F90: Better math and
	  formatting in variable reference.

2015-03-23 17:50  dstrubbe

	* [r13490] src/math/tdfunction.F90,
	  src/opt_control/controlfunction.F90, src/system/exponential.F90:
	  Better math and formatting in variable reference.

2015-03-23 18:11  dstrubbe

	* [r13491] src/td/pes_mask.F90, src/td/propagator.F90,
	  src/td/td.F90, src/td/td_write.F90, src/td/tdpsf.F90: * Better
	  math and formatting in variable reference.
	  * Removed some debugging output for PES.

2015-03-23 19:33  dstrubbe

	* [r13492] external_libs/yaml-0.1.4/Makefile.am,
	  external_libs/yaml-0.1.4/doc,
	  external_libs/yaml-0.1.4/include/Makefile.am: * Fixing distcheck.
	  YAML had the following peculiar line in its build system that
	  moved things around in Octopus directories: cp -a
	  $(top_srcdir)/doc/html $(top_distdir)/doc.
	  * Removing some things from YAML that are useless for our
	  purposes.

2015-03-23 20:06  dstrubbe

	* [r13493] doc/Makefile.am, doc/update.el: Removed obsolete
	  references to texi documentation files (removed r2664).

2015-03-23 22:39  dstrubbe

	* [r13496] src/basic/opencl.F90, src/main/geom_opt.F90,
	  src/main/main.F90, src/system/xc_ks_inversion.F90: * Fixing
	  default for OpenCLDevice documentation.
	  * Better math and formatting in variable reference.

2015-03-23 22:53  dstrubbe

	* [r13497] src/poisson/poisson.F90, src/poisson/poisson_fmm.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_libisf.F90: Improvements to documentation and
	  output about Poisson solvers. In particular:
	  * The documentation in one place falsely stated that
	  PoissonSolverISFParallelData = no was required for k-points. In
	  fact, this is only required for k-point parallelization.
	  * Corrected formulae a little for FMM.
	  * Do not permit users to try the non-implemented cases of
	  periodic systems with ISF or LibISF.

2015-03-23 23:22  xavier

	* [r13499] src/basic/multicomm.F90: Bugfix: A message was printing
	  a line it did not generate.

2015-03-23 23:22  dstrubbe

	* [r13500] src/hamiltonian/born_charges.F90,
	  src/hamiltonian/scf_tol.F90, src/main/casida.F90,
	  src/sternheimer/em_resp.F90, src/system/linear_solver.F90,
	  src/system/pert.F90: Variable reference math.

2015-03-24 00:35  xavier

	* [r13501] src/ions/kpoints.F90: The variable
	  KPointsUseTimeReversal does not have a single default
	  value.

2015-03-24 00:46  xavier

	* [r13502] src/system/current.F90: * Bugfix: The current should be
	  always symmetrized when the k-point grid is reduced by
	  symmetries.
	  * No warning should be printed in the symmetrization of the
	  current.

2015-03-24 00:52  dstrubbe

	* [r13503] m4/pfft.m4: Simplifying redundant check in pfft m4. This
	  also works around the bizarre situation that with certain
	  compiler flags (e.g. -O2 but not -O0) zuse is willing to link the
	  pfft test program without actually having the library -lpfft
	  present on the link line.

2015-03-24 01:45  dstrubbe

	* [r13504] doc, doc/Makefile.am: * Reverting part of r13493. While
	  the texi documentation that is like our current wiki was removed
	  in r2664, the variable reference is still produced in texi
	  format.
	  * Removed obsolete files from svn:ignore for doc directory.

2015-03-24 14:34  umberto

	* [r13506] src/states/density.F90, src/states/states_restart.F90:
	  Bugfix: properly deallocate st%eigenval in states_freeze_orbitals
	  by first deallocating the target pointer. This was causing
	  SAFE_DEALLOCATE_P to fail.
	  
	  * Added the same allocation/deallocation structure in
	  states_look_and_load.
	  
	  This code including the allocation/deallocation of wavefunctions
	  and occupations could probably be gathered into a subroutine
	  taking care of the proper resizing of state structures.

2015-03-24 15:01  dstrubbe

	* [r13510] testsuite/components/01-derivatives_1d.test: Temporarily
	  loosening tolerance on 1D derivatives test to shut up erlo
	  builders. This should still be looked into further.

2015-03-24 15:20  dstrubbe

	* [r13512] src/basic/types.F90, src/species/element.F90,
	  testsuite/buildbot_query.pl,
	  testsuite/pseudopotentials/01-sg15-h.test: Added and corrected
	  svn:keywords property. I had set it to '.' instead of 'Id' on a
	  few files.

2015-03-24 16:16  dstrubbe

	* [r13517] doc/doxygen/Doxyfile: * Updating Doxyfile for Doxygen
	  version 1.8.6 via 'doxygen -u'.
	  * Clearing field DOT_FONTNAME according to advice produced by
	  running doxygen.

2015-03-24 16:39  xavier

	* [r13519] build/mk_varinfo.pl: Added parenthesis around the values
	  in the options macros for safety.
	  This should avoid problems with a double minus sign when doing
	  -OPTION_SOMETHING and probably with other expressions.

2015-03-24 16:50  dstrubbe

	* [r13521] src/poisson/poisson_init_direct_inc.F90: Fix to
	  incorrect HTML tag in variable reference, from r13497.

2015-03-24 17:12  xavier

	* [r13527] src/species/species.F90: Improvements in species:
	  
	  * Converted the thickness of the jellium slab to a parameter.
	  * Updated the documentation for the species variable.
	  
	  With this change the updated interface for the Species block
	  is complete.

2015-03-24 17:14  dstrubbe

	* [r13528] doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh: Necessary but not sufficient
	  changes for doxygen to work:
	  * Added include path
	  * Simpler and more portable way of setting directory
	  * Some notes
	  * Show standard output and especially standard error from running
	  Doxygen

2015-03-24 18:17  dstrubbe

	* [r13530] testsuite/components/16-hartree_3d_libisf.test: Fix to
	  r13244: matching wrong field for a test.

2015-03-24 19:05  dstrubbe

	* [r13531] src/grid/io_function.F90, src/main/static_pol.F90,
	  src/states/cmplxscl.F90, src/states/states_io.F90,
	  src/sternheimer/phonons_lr.F90: Variable reference: URL links,
	  math, other little improvements.

2015-03-24 19:26  dstrubbe

	* [r13533] src/system/exponential.F90, src/system/output.F90,
	  src/system/output_me.F90, src/td/td_init_inc.F90: Variable
	  reference: math, URL links, formatting, typo.

2015-03-24 19:36  dstrubbe

	* [r13534] src/system/current.F90: Documentation bugfix to r13460.
	  Make sure to keep it in sync with the code!

2015-03-24 19:48  dstrubbe

	* [r13536] src/hamiltonian/epot.F90,
	  src/hamiltonian/functionals.F90, src/hamiltonian/lasers.F90,
	  src/hamiltonian/pcm.F90: Variable reference: math, formatting,
	  typo, redundant mention of default.

2015-03-24 22:35  xavier

	* [r13537] src/species/species.F90: Clarification of the atomic
	  number for the spec_full species documentation.

2015-03-24 22:41  xavier

	* [r13538] src/hamiltonian/species_pot.F90: Bugfix: The printed
	  displacement of the atom for species_full_delta was not
	  correct when parallel in domains.

2015-03-24 22:50  dstrubbe

	* [r13539] src/hamiltonian/kb_projector_inc.F90,
	  src/hamiltonian/projector_inc.F90: Bugfix: insidious, and
	  remarkable that it has not been noticed giving trouble before,
	  since it could give wrong answers and even memory corruption.
	  There was a mismatch of sizes passed to X(project_bra) and
	  X(project_ket) in X(kb_project) and X(project_psi_batch), and MPI
	  reductions done on only a subset of the vector. The problem seems
	  more acute for spinors. The MPI issue probably only matters when
	  the domain edge passes very near an atom. This bug appears to
	  have been introduced in r3971. It causes errors from the MPI
	  Reduction on the zuse buildslave for these tests: linear_response
	  01-casida, 02-h2o_pol_lr, 04-vibrational; periodic_systems
	  04-silicon, 06-h2o_pol_lr, 11-silicon_force. These all seem to
	  relate to calculation of forces.

2015-03-24 22:58  dstrubbe

	* [r13540] src/opt_control/initst.F90,
	  src/opt_control/opt_control_iter.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_spin_inc.F90,
	  src/opt_control/target_velocity_inc.F90: Variable reference:
	  math, fixed defaults, standardized 'experimental' notes,
	  formatting, documented OCTTargetSpin, corrected statements.
	  * Improved error messages.

2015-03-24 23:00  dstrubbe

	* [r13541] src/poisson/poisson_libisf.F90: Removing useless
	  argument and variable.

2015-03-24 23:05  dstrubbe

	* [r13542] src/basic/messages.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/xc.F90: Variable reference: URL links,
	  formatting, math, making subsection for XCDensityCorrection
	  variables, removed redundant comments about default.

2015-03-24 23:45  dstrubbe

	* [r13543] src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/ions/kpoints.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90, src/math/fft.F90,
	  src/poisson/poisson.F90: * Variable reference: formatting, math,
	  correction to formula for stencil_star_plus in DerivativesOrder,
	  removed redundant comments on defaults, URL links.
	  * Improving output with hyphens.

2015-03-25 00:07  dstrubbe

	* [r13544] build/Makefile.am, build/mk_functionals_list.pl,
	  build/true_compiler.sh: svn:keywords

2015-03-25 00:09  dstrubbe

	* [r13545] build/octopus.spec.in: Removing references to obsolete
	  documentation files from Octopus Debian packaging file. Does
	  anyone know if this works anymore? It would be nice if we did
	  have a package available.

2015-03-25 01:00  dstrubbe

	* [r13546] src/system/v_ks.F90: Correcting default for XCKernel.

2015-03-25 01:08  dstrubbe

	* [r13547] src/hamiltonian/functionals.F90: Proper calls of
	  messages_experimental for complex-scaling functionals.

2015-03-25 01:17  dstrubbe

	* [r13548] build/mk_functionals_list.pl,
	  src/hamiltonian/functionals_list.F90: mk_functionals_list.pl:
	  * Making it usable in the modern era when libxc is a separate
	  library.
	  * Improved snippet of variable reference.
	  * Adding the extra functionals that have been added
	  functionals_list.F90 and forgotten to be added here.
	  * Updating functionals_list.F90 according: as in r9942, using
	  libxc 2.0.1 and removing the screened-exchange hybrids.

2015-03-25 01:29  dstrubbe

	* [r13549] src/hamiltonian/functionals.F90,
	  src/hamiltonian/pcm.F90, src/hamiltonian/scf_tol.F90,
	  src/ions/geometry.F90, src/poisson/poisson_fmm.F90,
	  src/scf/scf.F90, src/species/species.F90,
	  src/states/cmplxscl.F90, src/system/eigen_arpack.F90,
	  src/system/v_ks.F90: Variable reference: math fixes, formatting,
	  standard placement of 'experimental', nicer-looking \varepsilon
	  instead of \epsilon, URL link, formatting, nicer math.

2015-03-25 01:37  dstrubbe

	* [r13550] src/system/v_ks.F90: Variable reference: More standard
	  declaration of experimental.

2015-03-25 03:47  dstrubbe

	* [r13551] src/basic/profiling.F90: Inlining profile_end into the
	  single place it is called. For some reason, with openmp on my
	  Mac, a run with prof_memory_full got stuck with apparently
	  endless calls to profile_end at the conclusion of the run. With
	  this version, it behaves normally.

2015-03-25 03:50  dstrubbe

	* [r13552] src/grid/mesh_init.F90: Clarifying message about
	  MeshPartitionVirtualSize.

2015-03-25 06:48  xavier

	* [r13553] configure.ac, external_libs/fortrancl/Makefile.am,
	  m4/clmath.m4, src/common-rules.make: * Added a macro for the
	  detection of the clmath libraries (clBLAS and
	  clFFT) with the usual --with-clblas-prefix and
	  --with-clfft-prefix
	  options.
	  * The original amd versions of the libraries are no longer
	  supported.
	  * These libraries are now mandatory when Octopus is compiled with
	  OpenCL
	  support.

2015-03-25 15:47  umberto

	* [r13555] src/td/pes_flux.F90: Gain a factor two speedup by
	  performing the surface integral only at write time for
	  photoemission calculations with the surface flux method.

2015-03-25 18:15  umberto

	* [r13558] src/hamiltonian/Makefile.am,
	  src/hamiltonian/boundaries.F90,
	  src/hamiltonian/boundaries_abs.F90,
	  src/hamiltonian/boundaries_ecs.F90: Beginning the implementation
	  of a general boundary module. This should work for both the
	  static and time-dependent cases and will include, for the moment,
	  absorbing boundaries (mask and CAP - already implemented but a
	  bit scattered around) and exterior complex scaling (ECS).

2015-03-25 19:53  dstrubbe

	* [r13559] src/td/pes_flux.F90: Fixes to r13555:
	  * Gain a factor infinity speedup in compilation time by not
	  exceeding the maximum permissible line length for photoemission
	  calculations with the surface flux method.
	  * Don't do dynamic allocation to MAX_DIM. Use static allocation
	  to MAX_DIM or dynamic allocation to the actual size. Especially
	  if you are going to assume it is 3 anyway in the subsequent code.

2015-03-25 19:56  dstrubbe

	* [r13560] src/hamiltonian/Makefile.am: Fixing mistaken
	  dependencies. Formatting.

2015-03-25 20:28  dstrubbe

	* [r13563] share/util/oct-display_partitions,
	  src/basic/unit_system.F90, src/hamiltonian/scdm.F90,
	  src/system/eigen_arpack_inc.F90, src/td/pes_flux.F90: Fixing
	  trigraphs (???) which cause warnings from cpp, and comment with
	  XML-like tags that cause warning from Doxygen.

2015-03-25 20:37  dstrubbe

	* [r13564] doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh: Doxygen: script creates
	  necessary files, need cpp -E in Doxyfile, some FIXME's.

2015-03-25 21:14  dstrubbe

	* [r13565]
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.test,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/25-multiresolution.test: * More
	  matches for species_full_delta.
	  * svn:keywords and $Id$.

2015-03-25 21:26  dstrubbe

	* [r13566] doc/doxygen/create_documentation.sh: Fixing directories
	  for configuring for Doxygen, and removing use of uninitialized
	  variable '$folder'.

2015-03-25 21:47  dstrubbe

	* [r13567] src/hamiltonian/Makefile.am,
	  src/hamiltonian/boundaries.F90: * We already have a module called
	  boundaries_m, we cannot have a second one. Umberto, please choose
	  a different name. (compilation failure on hbar)
	  * Fixing issue of private scope that blocked compilation on chum.

2015-03-26 00:15  dstrubbe

	* [r13580] src/hamiltonian/xc.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90: * Variable reference: math
	  corrections, clarification for XCKernel.
	  * Typo in comment.

2015-03-26 15:43  xavier

	* [r13582] external_libs/fortrancl/clamdblas_low.c: Renamed
	  clamdblas functions to the new clblas versions.

2015-03-26 15:49  dstrubbe

	* [r13583] testsuite/finite_systems_3d/25-multiresolution.test: I
	  seem to have put the wrong reference value in r13565. Tightened
	  tolerances.

2015-03-26 15:51  jrfsousa

	* [r13584] configure.ac, src/frozen/Makefile.am,
	  src/frozen/base_config.dummy.F90,
	  src/frozen/base_density.dummy.F90,
	  src/frozen/base_external.dummy.F90,
	  src/frozen/base_hamiltonian.dummy.F90,
	  src/frozen/fio_config.dummy.F90,
	  src/frozen/frozen_density.dummy.F90,
	  src/frozen/frozen_external.dummy.F90,
	  src/frozen/live_density.dummy.F90,
	  src/frozen/live_external.dummy.F90,
	  src/frozen/ssys_density.dummy.F90,
	  src/frozen/ssys_external.dummy.F90,
	  src/frozen/ssys_hamiltonian.dummy.F90,
	  src/frozen/ssys_states.dummy.F90: Adds conditional compilation to
	  frozen.
	  
	  If enabled will compile octopus with full frozen support.
	  
	  If disabled (the default) will just compile octopus against a
	  dummy library.
	  
	  Should greatly speedup compilation and ease debugging in some
	  platforms.

2015-03-26 15:53  dstrubbe

	* [r13585] testsuite/buildbot_query.pl: Improvements to
	  buildbot_query.pl:
	  * Check on appropriateness of filename passed.
	  * Better error-handling.
	  * Use plain-text version of stdio, since <span> tags could occur
	  somewhat randomly in the HTML version and frustrate attempts to
	  find strings.
	  * More robust search for input filename.

2015-03-26 16:28  xavier

	* [r13586] external_libs/fortrancl/clamdfft_low.c: Replaced
	  clAmdFft calls with clFFT calls (I am glad the name changed,
	  'Fft' is ugly ;-).

2015-03-26 16:56  jrfsousa

	* [r13587] configure.ac, src/frozen/Makefile.am,
	  src/frozen/base_config.dummy.F90,
	  src/frozen/base_density.dummy.F90,
	  src/frozen/base_external.dummy.F90,
	  src/frozen/base_hamiltonian.dummy.F90,
	  src/frozen/fio_config.dummy.F90,
	  src/frozen/frozen_density.dummy.F90,
	  src/frozen/frozen_external.dummy.F90,
	  src/frozen/live_density.dummy.F90,
	  src/frozen/live_external.dummy.F90,
	  src/frozen/ssys_density.dummy.F90,
	  src/frozen/ssys_external.dummy.F90,
	  src/frozen/ssys_hamiltonian.dummy.F90,
	  src/frozen/ssys_states.dummy.F90: Reverting commit 13584.

2015-03-26 18:57  dstrubbe

	* [r13594] src/frozen/functional.F90, src/frozen/interface_xc.F90,
	  src/hamiltonian/functionals.F90, src/hamiltonian/xc.F90: *
	  Removing references to LCA current functionals, whose support was
	  removedin r8079 from Octopus, and r8077 from libxc (although xc.h
	  still defines XC_FAMILY_LCA). The only remnant is an error
	  message saying they are not implemented, if you somehow manage to
	  pass it in with XCFunctional even though it isn't defined by
	  libxc.
	  * Removed variable MGGAimplementation/xcs%mgga_implementation.
	  This was added in r3550 but any use of it was gone as of r4685.
	  * Bugfix: XCUseGaugeIndependentKED should apply to hybrid
	  meta-GGA's as much as to meta-GGA's.
	  * src/frozen/interface_xc.F90 has no business attempting to list
	  the contents of the libxc Fortran module, and should certainly
	  not refer to XC_FAMILY_LCA.

2015-03-26 19:05  philipp

	* [r13595] src/td/pes.F90, src/td/pes_rc.F90, src/td/td.F90:
	  Bugfix: pes_rc for par_domains & par_states and with correct
	  output.

2015-03-26 20:33  philipp

	* [r13596] src/td/pes.F90, src/td/td.F90, src/td/td_init_inc.F90:
	  Changes output of pes_rc from 'output_interval' to
	  'restart_write_interval'.

2015-03-27 00:27  dstrubbe

	* [r13597] src/hamiltonian/xc.F90: Removing unused variable.

2015-03-27 00:50  dstrubbe

	* [r13598] src/basic/openscad.F90, src/grid/io_function.F90,
	  src/grid/io_function_inc.F90: OpenSCAD output:
	  * Updated from 'triangles' to 'faces', as advised by OpenSCAD
	  when rendering.
	  * Corrected comment in OutputHow: not just geometry, also fields,
	  are now supported.
	  * Removed debugging output.

2015-03-27 00:57  dstrubbe

	* [r13599] src/hamiltonian/vxc_inc.F90,
	  testsuite/functionals/03-xc.test: * Bugfix: some operations for
	  GGA and meta-GGA were not being performed for their hybrids
	  equivalents. This makes some changes in Int[n*v_xc] in the hybrid
	  one-shot tests, perhaps also to other quantities in
	  self-consistent calculations.
	  * A FIXME comment about functionals lacking XC_FLAGS_EXC: apart
	  from LB94, there is also LB94 modified, BJ06, TB09, and RPP09. We
	  are even using TB09 in the testsuite...

2015-03-27 01:21  dstrubbe

	* [r13600] src/td/pes_rc.F90: Correcting MPI_DOUBLE to
	  MPI_DOUBLE_PRECISION. Apparently MPI_DOUBLE is for C.

2015-03-27 04:41  dstrubbe

	* [r13601] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/scf/scf.F90,
	  src/system/v_ks.F90: Bugfix: some operations for meta-GGAs were
	  not being carried out for hybrid meta-GGAs. I think they are
	  working now.

2015-03-27 04:48  dstrubbe

	* [r13602] testsuite/functionals/03-xc.am05_fock.inp,
	  testsuite/functionals/03-xc.am05_oep.inp,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/Makefile.am: * Adding test runs for hybrid
	  meta-GGA with Fock and OEP approaches.
	  * Warning of problem with restart if functionals 3D test is done
	  on 4 processors.

2015-03-27 05:02  dstrubbe

	* [r13603] src/basic/io_binary_f_inc.F90: Bugfix: X(read_parallel)
	  for MPI2 restart called MPI read routines even if the attempt to
	  open the file had failed, giving as error message confusing
	  comments about having read a negative number of elements.

2015-03-27 14:34  dstrubbe

	* [r13604] src/basic/io_binary_f_inc.F90: Fixed version of r13603,
	  which made all attempts to read complex wavefunctions fail.

2015-03-27 15:32  dstrubbe

	* [r13605] src/common-rules.make: Moving FCFLAGS_LIBXC to be first
	  on the compilation line, which can help avoid interference from
	  another incompatible libxc installation in another include path
	  occurring earlier on the compilation line. This has been a common
	  problem with libxc.

2015-03-27 16:15  dstrubbe

	* [r13606] src/common-rules.make, src/math/qshep.F90: qshep:
	  * Since the interface module was moved into src/math, there is no
	  need to have -I external_libs/qshep.
	  * Declaring proper interfaces rather than 'external' declarations
	  of functions or nothing at all for routines.
	  * Simplifying use of optional arguments when passing to routines
	  that also have the same optional arguments.
	  * Separator lines.

2015-03-27 17:15  dstrubbe

	* [r13611] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/pcm.F90, src/system/energy_calc.F90: PCM total
	  energy is only implemented for DFT.

2015-03-27 18:05  dstrubbe

	* [r13612] testsuite/functionals/03-xc.am05_fock.inp,
	  testsuite/functionals/03-xc.am05_oep.inp,
	  testsuite/functionals/03-xc.m05_fock.inp,
	  testsuite/functionals/03-xc.m05_oep.inp,
	  testsuite/functionals/03-xc.test,
	  testsuite/functionals/Makefile.am: I mistakenly named the tests
	  with the M05 functional as AM05, which is a different functional.

2015-03-27 18:14  dstrubbe

	* [r13613] src/hamiltonian/kxc_inc.F90, src/system/v_ks.F90:
	  Correcting comments.

2015-03-27 19:41  dstrubbe

	* [r13614] src/hamiltonian/hamiltonian.F90: Oops, r13611 blocked
	  all non-DFT calculations, not just use of PCM in such
	  calculations.

2015-03-27 20:26  dstrubbe

	* [r13615] build/mk_functionals_list.pl,
	  src/hamiltonian/functionals.F90,
	  src/hamiltonian/functionals_list.F90: * Identify which
	  XCFunctionals options are not from libxc.
	  * Documenting undocumented variables that are parameters for
	  functionals.
	  * Inserted various FIXME's about defining the functionals
	  properly.

2015-03-27 22:49  dstrubbe

	* [r13616] src/ions/xyz_adjust.F90, src/utils/convert.F90,
	  src/utils/local_multipoles.F90, src/utils/local_write.F90:
	  Improvements to variable reference for utilities. Commented out
	  unused variable ConvertStart.

2015-03-27 23:15  dstrubbe

	* [r13617] testsuite/functionals/03-xc.test: Forgot to update test
	  input filename here.

2015-03-28 00:09  dstrubbe

	* [r13618] src/utils/convert.F90: * Fix to r13616: the variable I
	  commented was not unused.
	  * Explained defaults.
	  * Changed outp%how /= 1 to 0. I don't see any reason that
	  C_OUTPUT_AXIS_X would be a special value, so it seems more likely
	  that the code was trying to test whether OutputHow was set.

2015-03-28 00:23  dstrubbe

	* [r13619] m4/zdotc.m4: Proper precision in zdotc macro to avoid
	  compiler warnings.

2015-03-28 00:24  dstrubbe

	* [r13620] m4/yaml.m4: Removing useless hard-coded version info
	  from YAML's m4 macro.

2015-03-28 00:29  dstrubbe

	* [r13621] m4/yaml.m4: Undoing r13620: never mind, YAML needs this
	  info itself somehow.

2015-03-28 01:31  dstrubbe

	* [r13622] m4/libxc.m4: Copyright header and svn Id.

2015-03-28 01:45  dstrubbe

	* [r13623] src/species/atomic.F90: Using XC_F90 macro in this file,
	  for consistency with the rest of the code.

2015-03-28 03:34  dstrubbe

	* [r13624] src/hamiltonian/xc.F90: * Added call to
	  messages_obsolete_variable for MGGAimplementation, that should
	  have been added in r13594 (in case any unfortunate users were
	  trying to use this meaningless variable anyway...)
	  * Restored call to messages_obsolete_variable that I accidentally
	  deleted in that same commit.

2015-03-28 10:20  acastro

	* [r13625] src/opt_control/target_classical_inc.F90: Documentation
	  of three variables.

2015-03-28 16:43  dstrubbe

	* [r13633] scripts/backport.sh: backport.sh can now apply multiple
	  revisions at a time, to concurrently apply bugfixes to a revision
	  and maintain stability in branch. (e.g. r13626)

2015-03-28 19:15  philipp

	* [r13634] src/td/pes_rc.F90: Removes a dynamic allocation with
	  MAX_DIM.

2015-03-28 20:59  dstrubbe

	* [r13635] src/td/pes_rc.F90: Don't communicate uninitialized
	  values.

2015-03-28 22:02  xavier

	* [r13636] src/basic/Makefile.am, src/basic/parser.F90,
	  src/basic/varinfo.F90: Now Octopus checks each variable upon
	  parsing, and prints a warning each time an
	  undocumented variable is found.
	  
	  (For the moment this only works with parse_logical, other parse
	  functions coming soon.)

2015-03-28 22:20  xavier

	* [r13637] src/basic/parser.F90: Now parse_float checks whether the
	  variable being parsed is documented.

2015-03-28 22:44  xavier

	* [r13638] src/basic/parser.F90: Documentation check for integer
	  and string parsing.

2015-03-28 23:33  xavier

	* [r13639] src/basic/parser.F90: Documentation check for complex
	  values and blocks.

2015-03-28 23:49  xavier

	* [r13640] src/basic/io.F90, src/basic/json_parser.F90,
	  src/basic/messages.F90, src/basic/multicomm.F90,
	  src/basic/opencl.F90, src/basic/parser.F90,
	  src/basic/profiling.F90, src/basic/space.F90,
	  src/basic/unit_system.F90, src/grid/cube.F90,
	  src/grid/curv_briggs.F90, src/grid/curv_gygi.F90,
	  src/grid/curv_modine.F90, src/grid/curvilinear.F90,
	  src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/grid/double_grid.F90, src/grid/grid.F90,
	  src/grid/io_function.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/multigrid.F90,
	  src/grid/nl_operator.F90, src/hamiltonian/born_charges.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/functionals.F90,
	  src/hamiltonian/hamiltonian.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/pcm.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scf_tol.F90, src/hamiltonian/xc.F90,
	  src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/kpoints.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90, src/ions/symmetries.F90,
	  src/ions/xyz_adjust.F90, src/main/casida.F90,
	  src/main/geom_opt.F90, src/main/invert_ks.F90, src/main/main.F90,
	  src/main/phonons_fd.F90, src/main/run.F90,
	  src/main/static_pol.F90, src/main/test.F90, src/main/unocc.F90,
	  src/math/fft.F90, src/math/nfft.F90, src/math/pnfft.F90,
	  src/math/root_solver.F90, src/math/sparskit.F90,
	  src/opt_control/controlfunction.F90, src/opt_control/initst.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90, src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90, src/poisson/poisson.F90,
	  src/poisson/poisson_corrections.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_fmm.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_isf.F90, src/poisson/poisson_libisf.F90,
	  src/poisson/poisson_multigrid.F90, src/scf/lcao.F90,
	  src/scf/mix.F90, src/scf/rdmft.F90, src/scf/scf.F90,
	  src/species/ps.F90, src/species/ps_pspio_inc.F90,
	  src/species/species.F90, src/states/cmplxscl.F90,
	  src/states/modelmb_particles.F90, src/states/restart.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_calc.F90, src/states/states_io.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/vdw.F90, src/system/current.F90,
	  src/system/eigen_arpack.F90, src/system/eigen_feast.F90,
	  src/system/eigensolver.F90, src/system/elf.F90,
	  src/system/exponential.F90, src/system/linear_solver.F90,
	  src/system/output.F90, src/system/output_me.F90,
	  src/system/pert.F90, src/system/preconditioners.F90,
	  src/system/subspace.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep.F90,
	  src/td/pes.F90, src/td/pes_flux.F90, src/td/pes_mask.F90,
	  src/td/propagator.F90, src/td/spectrum.F90, src/td/td.F90,
	  src/td/td_init_inc.F90, src/td/td_write.F90, src/td/tdpsf.F90,
	  src/utils/casida_spectrum.F90, src/utils/convert.F90,
	  src/utils/infrared.F90, src/utils/local_multipoles.F90,
	  src/utils/local_write.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90: Replaced parse_integer et al by the
	  polymorphic parse_variable.

2015-03-29 00:26  xavier

	* [r13641] src/basic/Makefile.am, src/basic/test_parameters.F90,
	  src/grid/derivatives.F90, src/grid/derivatives_inc.F90,
	  src/main/test.F90, src/poisson/poisson.F90: * Documented
	  variables TestRepetitions, TestMaxBlocksize and
	  TestMinBlocksize.
	  * Defined a module that contains the values of those variables
	  and
	  that can be passed to the test subroutines.
	  * Variables parsed by test.F90 are printed to the output.

2015-03-29 00:37  xavier

	* [r13642] src/main/test.F90: * Renamed the option hartree_test to
	  hartree.
	  * test.F90 now uses the OPTION_ values.

2015-03-29 02:00  xavier

	* [r13643] src/grid/batch.F90, src/grid/batch_inc.F90,
	  src/grid/boundaries_inc.F90, src/grid/derivatives_inc.F90,
	  src/scf/lcao.F90, src/scf/lcao_inc.F90, src/states/states.F90,
	  src/system/eigen_plan_inc.F90: Renamed batch_new to
	  batch_allocate, and batch_delete to
	  batch_deallocate.

2015-03-29 03:05  xavier

	* [r13644] src/hamiltonian/projector_inc.F90: Bugfix: change
	  [13539] broke the application of pseudopotentials with
	  multiple threads, I am not sure why. For the moment I am
	  disabling OpenMP in the
	  offending section.

2015-03-29 04:43  xavier

	* [r13645] src/main/test.F90: Changed the default of
	  TestRepetitions to 1.

2015-03-29 06:47  xavier

	* [r13646] src/poisson/poisson_init_direct_inc.F90: A bit of
	  optimization of the Hartree direct integration to save time
	  on the tests.

2015-03-29 10:10  micael

	* [r13647] src/hamiltonian/hamiltonian.F90, src/scf/scf.F90: Fixing
	  compilation with libxc 2.0. In that case, XC_FAMILY_HYB_MGGA is
	  defined in the xc_functl_m module.

2015-03-29 11:12  micael

	* [r13649] configure.ac, m4/fc_f2003_c_ptr.m4,
	  m4/fc_iso_c_binding.m4, src/basic/Makefile.am,
	  src/basic/c_pointer.F90, src/basic/loct.F90, src/basic/oct_f.c,
	  src/basic/octcl_kernel.F90, src/basic/string.F90,
	  src/basic/varinfo.F90, src/basic/write_iter.F90,
	  src/grid/batch.F90, src/grid/batch_ops.F90,
	  src/grid/mesh_batch.F90, src/grid/mesh_interpolation.F90,
	  src/grid/nl_operator.F90, src/hamiltonian/kick.F90,
	  src/ions/geometry.F90, src/ions/ion_dynamics.F90,
	  src/ions/simul_box.F90, src/math/fft.F90, src/math/fftw.F90,
	  src/math/loct_math.F90, src/math/nfft.F90, src/math/splines.F90,
	  src/math/tdfunction.F90, src/poisson/poisson_fmm.F90,
	  src/states/density.F90, src/states/states_calc.F90,
	  src/td/spectrum.F90, src/td/td_calc.F90, src/td/td_write.F90,
	  src/utils/local_write.F90: Removing c_pointer module and making
	  iso_c_binding mandatory.

2015-03-29 14:23  micael

	* [r13650] src/poisson/poisson_init_direct_inc.F90: Restoring
	  compilation with MPI.

2015-03-29 18:41  dstrubbe

	* [r13654] src/poisson/poisson_init_direct_inc.F90: Fixing typo,
	  caught by Xavier's new warning for undocumented variables.

2015-03-29 20:29  dstrubbe

	* [r13655] testsuite/Makefile.am, testsuite/README: testsuite make
	  clean now respects TEMPDIRPATH. Added some explanations.

2015-03-29 20:47  dstrubbe

	* [r13656] src/basic/Makefile.am, src/basic/loct.F90,
	  src/basic/messages.F90, src/basic/oct_f.c,
	  src/basic/profiling.F90, src/basic/string.F90, src/scf/scf.F90: *
	  Making names consistent with conventions in oct and loct for
	  number_of_lines, break_C_string, oct_exit_failure, and
	  get_memory_usage.
	  * Interface for loct_break_C_string is now in loct.F90.

2015-03-29 20:51  dstrubbe

	* [r13657] src/basic/profiling.F90, src/grid/cube.F90: Fixing
	  incorrect types listed for two input variables.

2015-03-29 22:21  dstrubbe

	* [r13658] src/hamiltonian/hamiltonian.F90: Documenting variable
	  SCDM_EXX. Hannes, please expand on this.

2015-03-29 22:24  dstrubbe

	* [r13659] src/scf/scf.F90: Bugfix to r13601: I accidentally
	  changed the default for MixField for mGGA's and not for hybrid
	  mGGA's by adding XC_FAMILY_GGA twice.

2015-03-29 22:37  dstrubbe

	* [r13660] src/states/states.F90: * Avoiding passing unattainable
	  states block size to mesh_init, when it is larger than the number
	  of states. This otherwise leads to sub-optimal mesh block size.
	  * Removing useless ASSERT which comes after a section that would
	  call messages_fatal in the same case.

2015-03-29 23:33  dstrubbe

	* [r13661] src/hamiltonian/functionals.F90: Making variable
	  LB94_modified a logical is more logical, even if we need to pass
	  an integer to libxc in C.

2015-03-29 23:34  dstrubbe

	* [r13662] src/ions/simul_box.F90: De-activating variable
	  BoxOffset, which does not work at all: if you use it, your
	  molecule is definitely considered outside of the box.

2015-03-30 00:04  dstrubbe

	* [r13663]
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp:
	  Removing BoxOffset from a few test files.

2015-03-30 00:31  dstrubbe

	* [r13664] src/species/ps_hgh.F90: Useless commented declaration.

2015-03-30 00:32  dstrubbe

	* [r13665] src/grid/mesh_init.F90,
	  src/grid/mesh_interpolation_inc.F90, src/grid/modelmb_1part.F90,
	  src/grid/submesh.F90, src/hamiltonian/species_pot.F90,
	  src/ions/simul_box.F90,
	  src/states/modelmb_density_matrix_inc.F90: Removing box_offset
	  completely.

2015-03-30 02:41  dstrubbe

	* [r13666] testsuite/Makefile.am: Fix to r13655: use proper syntax
	  for variables that are supposed to be handled by Bash, not Make.

2015-03-30 03:31  dstrubbe

	* [r13667] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  Bugfixes for OutputHow = boundary_points:
	  * array for global gather was not enlarged.
	  * would crash with assertion failure when trying to output
	  quantity defined without the boundary points
	  * binary and openscad did not respect this option, but can easily
	  be made to do so, unlike the cube-based types.
	  * Documentation now mentions caveats.

2015-03-30 03:32  dstrubbe

	* [r13668] testsuite/finite_systems_2d/07-modelmb.01-gs.inp: A test
	  now uses OutputHow = boundary_points, with some quantities
	  defined up to mesh%np (mmb_wfs) and others up to mesh%np_part
	  (density).

2015-03-30 08:14  jjornet

	* [r13669] src/utils/convert.F90: * Changed outp%how /= 0 to
	  C_OUTPUT_HOW_BINARY.

2015-03-30 15:12  xavier

	* [r13679] src/hamiltonian/scf_tol.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/vdw.F90, src/system/eigen_feast.F90,
	  src/system/linear_solver.F90, src/system/preconditioners.F90,
	  src/system/xc_kli_pauli_inc.F90, src/system/xc_oep.F90,
	  testsuite/periodic_systems/06-h2o_pol_lr.02_kdotp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.03_emresp.inp: Removed
	  the 'prefix' feature for some sternheimer related variables. I
	  don't think this was useful.

2015-03-30 16:42  dstrubbe

	* [r13682] src/hamiltonian/scf_tol.F90, src/main/main.F90,
	  src/system/preconditioners.F90: * Updating variable documentation
	  after r13679.
	  * Unused variables.

2015-03-30 17:29  dstrubbe

	* [r13683] src/frozen/functional.F90: Removing some module 'only'
	  clauses in frozen.

2015-03-30 18:09  dstrubbe

	* [r13684] build/mk_functionals_list.pl,
	  src/hamiltonian/functionals.F90,
	  src/hamiltonian/functionals_list.F90: * Detecting and blocking
	  use of kinetic-energy functionals from libxc.
	  * Commenting on kinetic-energy functionals, half-Hartree
	  exchange, and libxc version in documentation.
	  * Updating functionals_list.F90 from libxc 2.0.3 which spells
	  Claudio's name correctly.

2015-03-30 21:12  dstrubbe

	* [r13685] src/ions/geometry.F90: Removed routine loadPDB, obsolete
	  since r744 and r746 in which it was replaced with a new routine
	  to read PDB files.

2015-03-30 21:23  dstrubbe

	* [r13686] src/ions/ion_dynamics.F90: * Improving documentation on
	  Velocities variables.
	  * Documenting the undocumented XSFVelocities and PDBVelocities
	  possible formats.

2015-03-30 21:26  dstrubbe

	* [r13687] src/hamiltonian/epot.F90, src/ions/read_coords.F90: *
	  Correcting documenting for PDBCoordinates, and documenting
	  PDBClassical.
	  * There are no longer attempts to read classical atoms from other
	  formats than PDB, since the others would be rejected anyway.
	  * Some cross-referencing of variables.
	  * Noting that classical atoms are not implemented in periodic
	  systems (this was enforced only by an assertion previously).

2015-03-30 22:23  dstrubbe

	* [r13688] src/ions/simul_box.F90: Make the default for BoxShape be
	  parallepiped for periodic systems, since minimum will be
	  rejected.

2015-03-30 22:59  dstrubbe

	* [r13689] src/hamiltonian/vxc_inc.F90: Removing unused variables.

2015-03-31 15:21  dstrubbe

	* [r13690] src/hamiltonian/Makefile.am: Adding missing dependency.

2015-03-31 15:29  dstrubbe

	* [r13691] build/octopus.spec.in, debian/info: Removing obsolete
	  references in Debian files to octopus.info file (removed r2664)
	  and to the idea of building separately in parallel and serial for
	  utilities.

2015-03-31 16:00  xavier

	* [r13695] src/species/species.F90: * Improved the error checking
	  for the %Species block. Now checks are
	  based on the set of read parameters rather than negative values.
	  
	  * species_user_defined, species_charge_density, and
	  species_from_file
	  now all have a default valence of 0.
	  
	  * The valence option is now mentioned in the documentation for
	  all
	  non-atomic species.

2015-03-31 16:19  dstrubbe

	* [r13696] Makefile.am: Removed debian/info from Makefile too, so
	  the distcheck can work.

2015-03-31 16:33  xavier

	* [r13697] src/species/species.F90: Sanity checks for the lmax and
	  lloc parameters.

2015-03-31 17:12  xavier

	* [r13698] src/species/species.F90: Improved documentation for the
	  Species block:
	  
	  * Fixed an error in the example block.
	  * Information about the default values for lmax and lloc.
	  * Better documentation for species_pspio.

2015-04-01 06:24  xavier

	* [r13699] src/basic/global.F90, src/basic/messages.F90,
	  src/math/sgfft.F90: For some reason the global variables
	  global_alloc_err and
	  global_sizeof were defined in messages_m. I moved them to
	  global_m.

2015-04-01 07:04  xavier

	* [r13700] src/scf/scf.F90, src/system/Makefile.am,
	  src/system/hirshfeld.F90, src/system/partial_charges.F90,
	  src/td/td_write.F90: Implementation of Hirshfeld partial charges.
	  They replace the voronoi
	  charges in the output.

2015-04-01 11:04  philipp

	* [r13701] src/td/pes.F90, src/td/pes_rc.F90: Replace communication
	  of points_xyz by comm. of global index.

2015-04-01 11:50  philipp

	* [r13702] src/td/pes_rc.F90: Using states_get_points routine
	  again.

2015-04-02 13:45  xavier

	* [r13703] configure.ac, external_libs/Makefile.am,
	  external_libs/bader, src/common-rules.make, src/scf/scf.F90,
	  src/system/partial_charges.F90, src/td/td_write.F90: Removed
	  bader from external_libs. Now the output of partial charges
	  only includes Hirshfeld charges.

2015-04-02 14:10  xavier

	* [r13704] src/grid/fourier_shell.F90, src/hamiltonian/scdm.F90,
	  src/ions/kpoints.F90, src/main/casida.F90, src/main/geom_opt.F90,
	  src/math/Makefile.am, src/math/lalg_adv.F90, src/math/math.F90,
	  src/math/math_inc.F90, src/math/sort.F90, src/math/sort_inc.F90,
	  src/scf/scf.F90, src/states/smear.F90,
	  src/states/states_calc.F90, src/states/states_io.F90,
	  src/sternheimer/em_resp.F90, src/system/eigensolver.F90,
	  src/system/system.F90, src/td/pes_mask.F90: The terminal output
	  of the SCF in Octopus does not scale. When there
	  are thousands of states or, even worse, thousands of k-points
	  Octopus
	  prints huge amounts of information to the terminal that is
	  impossible
	  to follow and can consume a lot of the computer time.
	  
	  I have modified the way we print eigevalues to the screen
	  (static/info
	  and other eigenvalue output is unchanged):
	  
	  * Eigenvalues are not separated by k point and are sorted by
	  value.
	  The k-point index is printed as an extra column (when the system
	  is
	  periodic).
	  
	  * Up to 33 eigenvalues are printed: the 8 lowest eigenvalues, the
	  homo
	  and 16 values around and the 8 highest energy ones.
	  
	  * The values printed for each eigenvalue depend on the
	  calculation.
	  For example the spin column is only included for spin polarized
	  calculations.
	  
	  * Auxiliary change: Moved the sort functions from math_m to a new
	  module sort_m and enabled sort functions for integer arguments.
	  
	  The new output almost certainly will need some tuning, but I
	  think it
	  is the scalable way to keep printing eigenvalue output. (Most
	  codes
	  do not print eigenvalues until the end of the run.) Comments and
	  suggestions are appreciated.

2015-04-02 16:39  xavier

	* [r13705] src/ions/simul_box.F90: Bugfix: For periodic systems the
	  check that atoms in the cell is too
	  strict and can fail. Unfortunately it seems that the generation
	  of the
	  grid requires it to be strict, so I disabled the check for fully
	  periodic systems (an added an assertion instead). The problem is
	  still
	  present for partially periodic systems.

2015-04-02 17:48  xavier

	* [r13706] src/grid/fourier_shell.F90, src/ions/kpoints.F90,
	  src/main/casida.F90, src/main/geom_opt.F90,
	  src/math/lalg_adv.F90, src/states/smear.F90,
	  src/states/states_calc.F90, src/sternheimer/em_resp.F90: Removed
	  some unnecessary 'use math_m' left in [13704].

2015-04-02 18:31  dstrubbe

	* [r13707] testsuite/functionals/01-xc_1d.test,
	  testsuite/functionals/02-xc_2d.test,
	  testsuite/functionals/03-xc.test: Let's test eigenvalues too in
	  the functionals test runs.

2015-04-02 19:13  dstrubbe

	* [r13708] src/hamiltonian/functionals.F90,
	  src/hamiltonian/vxc_inc.F90, testsuite/functionals/03-xc.test: *
	  Removed Levy-Perdew estimation of the energy for LB94 functional
	  which lacks XC_FLAGS_EXC in libxc, according to Miguel's advice,
	  since this is only valid for exchange and is a bad and
	  ill-defined estimate for a Vxc which is not the derivative of an
	  energy functional. The exchange will just be written as zero in
	  this case now. (Notes: Levy-Perdew is still used for the
	  XCDensityCorrection; complex-scaled LB94 seems to use the LDA
	  exchange energy.)
	  * A warning is written for functionals without energy available.
	  * An error message and assertion ensure that the specified
	  functional has Vxc available. I think all of them do in libxc
	  currently, but just to be sure for the future.

2015-04-02 19:23  dstrubbe

	* [r13709] src/hamiltonian/fxc_inc.F90,
	  src/hamiltonian/kxc_inc.F90: Error messages to ensure that fxc
	  and kxc routines are not called for functionals that lack these
	  functional derivatives. Not even all LDA functionals have these
	  in libxc trunk, though most do; older versions may not, and when
	  we add GGA functionals there are many more possible gaps to watch
	  out for.

2015-04-02 19:42  dstrubbe

	* [r13710] src/grid/mesh_partition.F90: Removing spurious line in
	  variable reference.

2015-04-02 19:55  dstrubbe

	* [r13711] src/grid/mesh_partition.F90, src/grid/par_vec.F90: Fixes
	  for debug mesh_partition output:
	  * Use 6 digits not 3. Using more than 1000 domains is definitely
	  something that happens.
	  * Name the partition with the boundary more clearly.

2015-04-02 21:10  dstrubbe

	* [r13712] doc/html/varsRightFrame.html: Typo in main page of
	  variable reference.

2015-04-02 21:48  dstrubbe

	* [r13713] configure.ac, doc/html/varsRightFrame.html,
	  doc/html/varsRightFrame.html.in, m4/octopus_compilation_info.m4:
	  The current version and svn revision are now inserted into the
	  opening page of the variable reference.

2015-04-02 23:46  dstrubbe

	* [r13714] doc/html: Updating svn:ignore: removing junk that should
	  not be there, and adding newly autogenerated file
	  varsRightFrame.html.

2015-04-02 23:48  dstrubbe

	* [r13715] src/grid/nl_operator_inc.F90,
	  src/hamiltonian/functionals.F90, src/utils/local_multipoles.F90:
	  Fixing issues warned about by cpp, and removed a FIXME that is
	  fixed.

2015-04-03 00:16  dstrubbe

	* [r13716] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  Improvements to OpenSCAD output: you can now set the isovalue,
	  there is a reasonable default, and some more info is written.

2015-04-03 03:05  dstrubbe

	* [r13717] doc/doxygen/Doxyfile,
	  doc/doxygen/create_documentation.sh: * Exclude src/frozen from
	  doxygen since it contains #error directives that block
	  preprocessing.
	  * -DHAVE defines are handled by an artificially constructed
	  config_F90.h that defines everything possible, so as much of the
	  code as possible is activated. As a result, use of 'configure' is
	  not needed.
	  * Make dummy headers mpi.h and fcs_config.h to avoid errors from
	  them not being found, in case MPI or FMM are not present on the
	  machine.
	  * Remove 'sed -i' which doesn't work on BSD/OSX.

2015-04-03 06:26  xavier

	* [r13719] src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90,
	  testsuite/components/18-interpolation.test: A vectorial version
	  of mesh_interpolation_evaluate, with test and
	  everything.

2015-04-03 11:15  acastro

	* [r13720] src/opt_control/controlfunction.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  testsuite/optimal_control/08-velocities.02-oct.inp: Documentation
	  of three undocumented variables (OCTEta, OCTDelta,
	  and OCTTdTarget).
	  
	  Also, declared experimental some of the QOCT targets.

2015-04-03 18:21  dstrubbe

	* [r13723] src/opt_control/opt_control_global.F90,
	  src/opt_control/target_tdlocal_inc.F90: Typos.

2015-04-03 18:27  jrfsousa

	* [r13724] src/frozen/Makefile.am, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/fio_grid.F90,
	  src/frozen/fio_mesh.F90, src/frozen/igrid.F90,
	  src/frozen/imesh.F90, src/frozen/simulation.F90: Frozen:
	  
	  * Deleting useless files.
	  
	  * Propagating changes.

2015-04-03 18:46  jrfsousa

	* [r13725] src/frozen/simulation.F90, src/frozen/storage.F90:
	  Frozen:
	  
	  * Improved handling of fine grids.

2015-04-03 19:07  jrfsousa

	* [r13726] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/functional.F90, src/frozen/gga.F90,
	  src/frozen/interface_xc.F90, src/frozen/lda.F90,
	  src/frozen/simulation.F90: Frozen:
	  
	  * Removal of old files.
	  
	  * Major rewrite of interface_xc.F90 and functional.F90
	  
	  * Removal of support for spinors. It was broken anyway.

2015-04-03 20:44  jrfsousa

	* [r13727] src/frozen/Makefile.am, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_potential.F90, src/frozen/base_states.F90,
	  src/frozen/base_system.F90, src/frozen/base_term.F90,
	  src/frozen/fio_hamiltonian.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/intrpl_inc.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/ssys_hamiltonian.F90:
	  Frozen:
	  
	  * Some code cleanup.
	  
	  * Reflecting the changes.

2015-04-03 21:52  jrfsousa

	* [r13728] src/frozen/base_hamiltonian.F90,
	  src/frozen/base_potential.F90, src/frozen/base_term.F90: Frozen:
	  
	  * Some forgotten code and some fixes.

2015-04-03 22:49  jrfsousa

	* [r13729] src/frozen/Makefile.am, src/frozen/base_functional.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/functional.F90,
	  src/frozen/live_functional.F90, src/frozen/ssys_functional.F90:
	  Frozen:
	  
	  * Add support for functional term.

2015-04-03 23:11  jrfsousa

	* [r13730] src/frozen/base_hamiltonian.F90: Frozen:
	  
	  * Add storage to base_hamiltonian.F90

2015-04-03 23:52  jrfsousa

	* [r13731] src/frozen/Makefile.am: Frozen:
	  
	  * Add missing dependency.

2015-04-04 15:58  xavier

	* [r13732] src/grid/nl_operator.F90, src/grid/par_vec.F90: The
	  function vec_global2local is now defined even when compiling in
	  serial.

2015-04-04 18:00  xavier

	* [r13733] src/grid/mesh_interpolation.F90,
	  src/grid/mesh_interpolation_inc.F90, src/main/test.F90:
	  Parallelization of mesh_interpolation, there are some problems so
	  I am
	  not enabling the test yet.

2015-04-04 18:42  xavier

	* [r13734] src/grid/mesh_interpolation_inc.F90,
	  testsuite/components/18-interpolation.test: Fixed the problem
	  with mesh interpolation in parallel, now the test
	  can be enabled.

2015-04-04 19:11  jrfsousa

	* [r13735] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_functional.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/domain.F90,
	  src/frozen/fio_hamiltonian.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/iterator_code.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/root_hamiltonian.F90,
	  src/frozen/simulation.F90, src/frozen/ssys_hamiltonian.F90,
	  src/frozen/template.h: Frozen:
	  
	  * To lower the compilation load in some machines.
	  
	  * Splitting base_hamiltonian.F90 in:
	  root_hamiltonian.F90 and base_hamiltonian.F90
	  
	  * Propagating changes to a lot of files.

2015-04-05 02:24  xavier

	* [r13736] src/grid/fourier_shell.F90, src/ions/kpoints.F90,
	  src/main/casida.F90, src/math/lalg_adv.F90, src/math/sort.F90,
	  src/states/smear.F90, src/states/states_calc.F90,
	  src/states/states_io.F90, src/sternheimer/em_resp.F90,
	  src/system/eigensolver.F90, src/system/system.F90,
	  src/td/pes_mask.F90: Renamed the sort_m module to sort_om to
	  avoid a name clash with
	  BerkeleyGW when compiling with PGI.

2015-04-05 21:58  jrfsousa

	* [r13738] src/frozen/Makefile.am, src/frozen/base_functional.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/intrpl_inc.F90, src/frozen/root_hamiltonian.F90,
	  src/frozen/ssys_hamiltonian.F90, src/frozen/ssys_tnadd.F90:
	  Frozen:
	  
	  * Adds the non additional kinetic term.
	  
	  * Some supporting changes.

2015-04-05 22:00  jrfsousa

	* [r13739] build/Makefile.am, build/mk_kfunctionals_list.pl: * Adds
	  a script to generate the list of kinetic functionals.
	  (shamelessly stolen from mk_functionals_list.pl)

2015-04-05 22:03  jrfsousa

	* [r13740] src/frozen/Makefile.am,
	  src/frozen/kfunctionals_list.F90: Frozen:
	  
	  * Adds the kinetic functionals list.

2015-04-05 22:18  jrfsousa

	* [r13741] src/frozen/Makefile.am, src/frozen/ssys_config.F90,
	  src/frozen/ssys_handle.F90, src/frozen/ssys_model.F90: Frozen:
	  
	  * The final files to complete the frozen framework.

2015-04-06 05:46  xavier

	* [r13742] src/grid/mesh_interpolation_inc.F90: Trying to locate
	  the problem with the interpolation test in parallel:
	  removed the indexes to the first element in the MPI calls.

2015-04-06 07:21  jrfsousa

	* [r13743] src/hamiltonian/epot.F90, src/states/density.F90,
	  src/system/output.F90: * Remove references to live_*_m and
	  replace by base_*_m

2015-04-06 07:36  jrfsousa

	* [r13744] src/frozen/Makefile.am, src/frozen/live_density.F90,
	  src/frozen/live_external.F90, src/frozen/live_functional.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/live_model.F90,
	  src/frozen/live_states.F90, src/frozen/live_system.F90,
	  src/frozen/ssys_tnadd.F90: Frozen:
	  
	  * Code cleanup and propagation of changes.

2015-04-06 16:02  xavier

	* [r13747] src/hamiltonian/epot.F90: Added profiling regions for
	  the ion-ion interaction.

2015-04-06 18:17  dstrubbe

	* [r13748] testsuite/functionals/01-xc_1d.test: Re-centering and
	  slightly increasing tolerance for 1D OEP EXX eigenvalues, so
	  tests can pass on buildslaves.

2015-04-06 19:00  xavier

	* [r13749] src/hamiltonian/Makefile.am, src/hamiltonian/epot.F90,
	  src/hamiltonian/ion_interaction.F90: Moved ion interaction
	  routines to a new module.

2015-04-06 20:55  dstrubbe

	* [r13750] src/frozen/base_hamiltonian.F90: Commenting out
	  offending code from r13735 that tigger will not compile.

2015-04-06 21:02  dstrubbe

	* [r13751] testsuite/components/18-interpolation.test: Run
	  interpolation test in serial again, since it is crashing in
	  parallel.

2015-04-06 21:06  dstrubbe

	* [r13752] build/var2html.pl: var2html.pl:
	  * Removing parsing of long-unused option -s, and the unused
	  variable set by it.
	  * Clearer error-handling.

2015-04-06 21:09  dstrubbe

	* [r13753] src/basic/oct_f.c, src/basic/recipes.c,
	  src/basic/signals.c, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90, src/species/ps.F90,
	  src/species/ps_pspio_inc.F90: For consistency, let's use "#ifdef"
	  or "#if defined" everywhere rather than just "#if" as was being
	  done in a few places: i.e., test whether the symbol is defined,
	  not whether it is defined and set to 1.

2015-04-06 21:20  dstrubbe

	* [r13754] src/hamiltonian/xc.F90: Some more consistency checking
	  on XCFunctional.

2015-04-06 21:33  dstrubbe

	* [r13755] src/hamiltonian/xc.F90: Oops, typo in last commit.

2015-04-06 21:51  dstrubbe

	* [r13756] src/hamiltonian/hgh_projector.F90,
	  src/hamiltonian/hgh_projector_inc.F90,
	  src/hamiltonian/kb_projector_inc.F90,
	  src/hamiltonian/projector_inc.F90,
	  src/hamiltonian/rkb_projector.F90: Bugfix follow-up to r13539:
	  there I fixed array shape mismatches for kb projectors. A similar
	  problem existed for RKB and HGH projectors. Now they all conform
	  properly, by re-ordering uvpsi to have spinor dimension first,
	  and making uvpsi have only two indices not three for HGH. This
	  also makes that the array sections passed from projector_inc are
	  actually contiguous, and probably will allow OpenMP to be
	  re-enabled there (r13644).

2015-04-06 21:52  dstrubbe

	* [r13757] testsuite/oct-run_regression_test.pl: * Identifying
	  errors more clearly in testsuite.
	  * Check on reference values, not just extracted values.

2015-04-06 23:04  dstrubbe

	* [r13758] src/hamiltonian/xc.F90: Reverting r13754 and r13755
	  which does not work for complex-scaled and KS inversion
	  functionals.

2015-04-06 23:52  dstrubbe

	* [r13759] testsuite/functionals/01-xc_1d.test: Follow-up to
	  r13748: need to re-center and increase tolerance for 1D OEP KLI
	  too.

2015-04-07 04:27  xavier

	* [r13760] src/hamiltonian/ion_interaction.F90: * Fixed the
	  calculation of the grid size for the Ewald sum.
	  
	  * Simplified a bit the Ewald code.
	  
	  * Reverted some code-style "vandalism" introduced in [8870].

2015-04-07 04:41  dstrubbe

	* [r13762] testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp:
	  Making a test use OpenSCAD.

2015-04-07 04:47  dstrubbe

	* [r13763] testsuite/finite_systems_3d/16-scfinlcao_std.test:
	  Testing OpenSCAD results.

2015-04-07 04:48  xavier

	* [r13764] testsuite/periodic_systems/01-free_electrons.test,
	  testsuite/periodic_systems/02-cosine_potential.test: Disabled the
	  total energy matches for the 1D periodic tests. The Ewald
	  sum that we have implemented does not converge in this case, so
	  the
	  value we calculate is arbitrary.

2015-04-07 16:36  dstrubbe

	* [r13767] external_libs/metis-5.1/GKlib/GKlib.h,
	  external_libs/metis-5.1/GKlib/b64.c,
	  external_libs/metis-5.1/GKlib/blas.c,
	  external_libs/metis-5.1/GKlib/csr.c,
	  external_libs/metis-5.1/GKlib/error.c,
	  external_libs/metis-5.1/GKlib/evaluate.c,
	  external_libs/metis-5.1/GKlib/fkvkselect.c,
	  external_libs/metis-5.1/GKlib/fs.c,
	  external_libs/metis-5.1/GKlib/gk_arch.h,
	  external_libs/metis-5.1/GKlib/gk_defs.h,
	  external_libs/metis-5.1/GKlib/gk_externs.h,
	  external_libs/metis-5.1/GKlib/gk_getopt.h,
	  external_libs/metis-5.1/GKlib/gk_macros.h,
	  external_libs/metis-5.1/GKlib/gk_mkblas.h,
	  external_libs/metis-5.1/GKlib/gk_mkmemory.h,
	  external_libs/metis-5.1/GKlib/gk_mkpqueue.h,
	  external_libs/metis-5.1/GKlib/gk_mkpqueue2.h,
	  external_libs/metis-5.1/GKlib/gk_mkrandom.h,
	  external_libs/metis-5.1/GKlib/gk_mksort.h,
	  external_libs/metis-5.1/GKlib/gk_mkutils.h,
	  external_libs/metis-5.1/GKlib/gk_proto.h,
	  external_libs/metis-5.1/GKlib/gk_struct.h,
	  external_libs/metis-5.1/GKlib/gk_types.h,
	  external_libs/metis-5.1/GKlib/graph.c,
	  external_libs/metis-5.1/GKlib/io.c,
	  external_libs/metis-5.1/GKlib/itemsets.c,
	  external_libs/metis-5.1/GKlib/mcore.c,
	  external_libs/metis-5.1/GKlib/memory.c,
	  external_libs/metis-5.1/GKlib/pdb.c,
	  external_libs/metis-5.1/GKlib/pqueue.c,
	  external_libs/metis-5.1/GKlib/random.c,
	  external_libs/metis-5.1/GKlib/rw.c,
	  external_libs/metis-5.1/GKlib/sort.c,
	  external_libs/metis-5.1/GKlib/string.c,
	  external_libs/metis-5.1/GKlib/timers.c,
	  external_libs/metis-5.1/GKlib/tokenizer.c,
	  external_libs/metis-5.1/GKlib/util.c,
	  external_libs/metis-5.1/libmetis/auxapi.c,
	  external_libs/metis-5.1/libmetis/balance.c,
	  external_libs/metis-5.1/libmetis/coarsen.c,
	  external_libs/metis-5.1/libmetis/contig.c,
	  external_libs/metis-5.1/libmetis/defs.h,
	  external_libs/metis-5.1/libmetis/fm.c,
	  external_libs/metis-5.1/libmetis/gklib.c,
	  external_libs/metis-5.1/libmetis/gklib_defs.h,
	  external_libs/metis-5.1/libmetis/gklib_rename.h,
	  external_libs/metis-5.1/libmetis/graph.c,
	  external_libs/metis-5.1/libmetis/kmetis.c,
	  external_libs/metis-5.1/libmetis/kwayfm.c,
	  external_libs/metis-5.1/libmetis/kwayrefine.c,
	  external_libs/metis-5.1/libmetis/macros.h,
	  external_libs/metis-5.1/libmetis/mcutil.c,
	  external_libs/metis-5.1/libmetis/mesh.c,
	  external_libs/metis-5.1/libmetis/meshpart.c,
	  external_libs/metis-5.1/libmetis/metislib.h,
	  external_libs/metis-5.1/libmetis/minconn.c,
	  external_libs/metis-5.1/libmetis/mincover.c,
	  external_libs/metis-5.1/libmetis/mmd.c,
	  external_libs/metis-5.1/libmetis/ometis.c,
	  external_libs/metis-5.1/libmetis/options.c,
	  external_libs/metis-5.1/libmetis/parmetis.c,
	  external_libs/metis-5.1/libmetis/pmetis.c,
	  external_libs/metis-5.1/libmetis/proto.h,
	  external_libs/metis-5.1/libmetis/refine.c,
	  external_libs/metis-5.1/libmetis/rename.h,
	  external_libs/metis-5.1/libmetis/separator.c,
	  external_libs/metis-5.1/libmetis/sfm.c,
	  external_libs/metis-5.1/libmetis/srefine.c,
	  external_libs/metis-5.1/libmetis/stat.c,
	  external_libs/metis-5.1/libmetis/stdheaders.h,
	  external_libs/metis-5.1/libmetis/struct.h,
	  external_libs/metis-5.1/libmetis/timing.c,
	  external_libs/metis-5.1/libmetis/util.c,
	  external_libs/metis-5.1/libmetis/wspace.c: Removing svn 'Id:'
	  fields from metis-5.1 files, which are referring to the svn
	  repository of metis-5.1 not this one. As a result, the svn
	  revision for an exported copy of Octopus came out as "13936
	  [timing.c 2013-03-30]" referring to one of these files.

2015-04-07 16:42  dstrubbe

	* [r13768] build/svn_release_number.sh: The svn revision for an
	  exported copy should be reported in the same format as for an svn
	  checkout copy, namely without the filename and date quoted.

2015-04-07 16:54  dstrubbe

	* [r13769] external_libs/metis-5.1/GKlib/gk_mksort.h: The beginning
	  of a comment was mistakenly deleted in r13767.

2015-04-07 21:47  jrfsousa

	* [r13774] src/frozen/Makefile.am, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_model.F90, src/frozen/fio_hamiltonian.F90,
	  src/frozen/frozen_hamiltonian.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/root_hamiltonian.F90,
	  src/frozen/ssys_hamiltonian.F90, src/frozen/ssys_tnadd.F90:
	  Frozen:
	  
	  * Remerging root_hamiltonian into base_hamiltonian to solve
	  compilation problems with gcc 4.4.5
	  
	  * Commenting out recent aditions to speed up compilation with
	  pathscale
	  
	  * Propagating changes

2015-04-07 23:56  jrfsousa

	* [r13775] src/frozen/base_hamiltonian.F90,
	  src/frozen/ssys_tnadd.F90: Frozen:
	  
	  * Commenting some more working code to allow for faster
	  compilation on pathscale.

2015-04-08 02:53  dstrubbe

	* [r13776] testsuite/finite_systems_3d/16-scfinlcao_std.test:
	  Commenting out test for polyhedra of OpenSCAD for now: they are
	  different in parallel, and are wrong -- the isosurface is just a
	  weird spiky blob.

2015-04-08 07:00  dstrubbe

	* [r13777] src/include/Makefile.am: 'make clean' should remove
	  config_F90.h as well, since it is generated automatically (and
	  trivially).

2015-04-08 11:22  jrfsousa

	* [r13778] src/frozen/base_density.F90,
	  src/frozen/frozen_density.F90, src/frozen/intrpl_inc.F90,
	  src/frozen/storage.F90: Frozen:
	  
	  * Code cleanup.

2015-04-08 11:28  huebener

	* [r13779] src/hamiltonian/scdm.F90, src/poisson/poisson_fft.F90:
	  fft-kernel for Hockney poisson solver

2015-04-08 11:57  huebener

	* [r13780] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90: using Hockney algorithm for poisson
	  solver in scdm module

2015-04-08 14:40  jrfsousa

	* [r13781] src/frozen/base_density.F90,
	  src/frozen/base_external.F90, src/frozen/base_functional.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_potential.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_external.F90,
	  src/frozen/intrpl_inc.F90, src/frozen/ssys_density.F90,
	  src/frozen/ssys_external.F90, src/frozen/ssys_functional.F90:
	  Frozen:
	  
	  * Code cleanup.
	  
	  * Propagation of changes.

2015-04-08 14:57  jrfsousa

	* [r13782] src/frozen/fio_density.F90: Frozen:
	  
	  * Fix wrong procedure name.

2015-04-08 15:13  jrfsousa

	* [r13783] src/frozen/fio_density.F90, src/frozen/fio_external.F90:
	  Frozen:
	  
	  * Fix wrong subroutine name.

2015-04-08 15:36  jrfsousa

	* [r13784] src/frozen/Makefile.am, src/frozen/base_external.F90,
	  src/frozen/frozen_external.F90, src/frozen/live_hamiltonian.F90,
	  src/frozen/ssys_external.F90, src/hamiltonian/epot.F90,
	  src/system/output.F90, src/system/output_h_inc.F90: Frozen:
	  
	  * Remove base_external.
	  
	  * Propagate changes.
	  
	  System:
	  
	  output.F90 & output_h_inc.F90:
	  
	  * Changes references to base_external to ssys_external.
	  
	  Hamiltonian:
	  
	  epot.F90:
	  
	  * Changes references to base_external to ssys_external.

2015-04-08 15:42  jrfsousa

	* [r13785] src/frozen/fio_external.F90: Frozen:
	  
	  * Fix wrong procedure name.

2015-04-08 16:01  jrfsousa

	* [r13786] src/frozen/Makefile.am, src/frozen/base_ionic.F90,
	  src/frozen/fio_external.F90, src/frozen/frozen_hamiltonian.F90,
	  src/frozen/frozen_ionic.F90, src/frozen/ssys_ionic.F90,
	  src/frozen/tionic_term.F90: Frozen:
	  
	  * Remove base_ionic and frozen_ionic.
	  
	  * Propagate changes.
	  

2015-04-08 22:52  dstrubbe

	* [r13800] src/basic/io_binary.h, src/basic/io_csv.h: There doesn't
	  seem any particular reason why the comments in these header
	  files, unlike all the rest, need to be excluded with '#if 0'.

2015-04-08 22:56  dstrubbe

	* [r13801] src/basic/profiling.F90, src/grid/mesh_init.F90,
	  src/grid/nl_operator_inc.F90, src/math/fft.F90: Introducing some
	  integer parameters instead of preprocessor symbols.

2015-04-09 00:15  dstrubbe

	* [r13805] testsuite/finite_systems_3d/16-scfinlcao_std.test: Test
	  min, max, and isovalue for OpenSCAD. These seem to be the same
	  for serial and parallel, even though the polyhedra are wrong in
	  parallel.

2015-04-09 00:17  dstrubbe

	* [r13806] src/common-rules.make: We are cleaning various file
	  types that have no business existing at all in our directories.
	  Also, config_F90.h should exist only in src/include, not all the
	  other places common-rules.make is used.

2015-04-09 00:23  dstrubbe

	* [r13807] src/common-rules.make: No need to have added *.o in
	  previous commit.

2015-04-09 00:54  dstrubbe

	* [r13810] src/basic/multicomm.F90: The temporary debugging info
	  being sent to standard error about the MPI task assignment will
	  now be written to standard out, as is more conventional. This
	  didn't turn out to be helpful in diagnosing the restart problem
	  anyway.

2015-04-09 01:12  dstrubbe

	* [r13811] src/basic/io_csv.h, src/basic/test_parameters.F90,
	  src/grid/modelmb_1part.F90, src/ions/symmetries_finite.c: Setting
	  svn:keywords and adding $Id$ to some files. Making intro comment
	  appropriate for Doxygen. Removing $Log$ tag which is from another
	  repo that a file was drawn from.

2015-04-09 01:25  dstrubbe

	* [r13812] src/math/pnfft.F90, src/math/pnfft_inc.F90,
	  src/math/sgfft.F90, src/math/young.F90,
	  src/poisson/lazy_8_inc.F90, src/poisson/poisson_cutoffs.c: svn
	  Id, license headers, copyright info.

2015-04-09 03:12  xavier

	* [r13813] src/hamiltonian/epot.F90,
	  src/hamiltonian/ion_interaction.F90: * Defined an object for the
	  ion-ion interaction.
	  
	  * The alpha parameter of the Ewald sum is now given by the
	  EwaldAlpha
	  variable.

2015-04-09 03:54  xavier

	* [r13814] src/hamiltonian/ion_interaction.F90, src/main/test.F90:
	  A test mode for ion-ion interaction.

2015-04-09 05:35  dstrubbe

	* [r13815] src/system/eigen_feast.F90, src/system/hirshfeld.F90,
	  src/system/xc_kli_pauli_inc.F90, src/td/pes_flux.F90,
	  src/td/pes_mask_out_inc.F90: * svn keywords.
	  * license header.
	  * removing leading &

2015-04-09 05:50  dstrubbe

	* [r13816] src/grid/batch_ops.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/system/energy_calc.F90, src/system/output_etsf_inc.F90,
	  src/utils/infrared.F90, src/utils/vibrational.F90: Remove leading
	  &

2015-04-09 10:25  joseba

	* [r13817] src/states/states_restart.F90,
	  testsuite/functionals/03-xc.test: Bugfix to r13340; the restart
	  also have to be written if the total number of subspaces is
	  reached (and it is lower than actual number of processes)
	  Consequently, functionals/03-xc.test works with four processes

2015-04-09 15:52  huebener

	* [r13818] src/poisson/poisson_fft.F90: small fixes: doxygen
	  markup, proper type conversion, missing intent, coding style.

2015-04-09 23:50  xavier

	* [r13819] src/hamiltonian/ion_interaction.F90: The ion interaction
	  test prints the different components of the energy
	  and force for periodic systems.

2015-04-10 00:26  xavier

	* [r13820] src/hamiltonian/ion_interaction.F90: Bugfix: The real
	  part of the force for periodic system was wrong by a
	  factor of -2. This was not detected before because the value of
	  alpha
	  is too high, so most of the force is calculated in Fourier space.

2015-04-10 09:44  jrfsousa

	* [r13822] src/frozen/Makefile.am, src/frozen/base_functional.F90,
	  src/frozen/base_geom.F90, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_potential.F90, src/frozen/base_term.F90,
	  src/frozen/iterator_code.F90: Frozen:
	  
	  * Code cleanup, add missing dependencies.

2015-04-10 09:58  jjornet

	* [r13823] src/species/species.F90, src/utils/local_multipoles.F90:
	  * Fixed some units error in species.
	  * Use the optional variable unit in parse_block_float to avoid
	  errors in units.

2015-04-10 12:46  philipp

	* [r13824] src/td/pes_flux.F90: Calculate the flux vector J_k(r)
	  only along the direction of the surface normal.

2015-04-10 16:02  xavier

	* [r13825] src/species/species.F90: Bugfix: The parsing of the
	  default spacing and radius in the Species
	  block were interchanged. (Thanks Joaquim for reporting this.)

2015-04-10 16:23  jjornet

	* [r13826] src/utils/local_multipoles.F90: * Added option to use
	  atomic radii to assign lone pairs to domains defined by Bader
	  volumes
	  * Increased size of clist

2015-04-10 16:40  xavier

	* [r13827] testsuite/periodic_systems/07-tb09.test: Updated the
	  values for the TB09 test. It seems the Ewald sum is now
	  better converged.

2015-04-11 21:54  dstrubbe

	* [r13828] src/basic/io_binary.h, src/basic/io_csv.h: Reverting
	  r13800, and adding explanations.

2015-04-11 22:12  dstrubbe

	* [r13829] src/poisson/poisson_fmm.F90: Another parameter instead
	  of preprocessor #define.

2015-04-11 23:24  dstrubbe

	* [r13830] src/utils/local_multipoles.F90: Fix to r13826: an intent
	  needed to be changed.

2015-04-11 23:33  dstrubbe

	* [r13831] src/hamiltonian/hamiltonian_inc.F90: Changing some more
	  #if to #ifdef.

2015-04-12 06:06  dstrubbe

	* [r13832] testsuite/real_time/06-caetrs.test: There should be
	  matches for each part of the CAETRS run.

2015-04-12 07:46  xavier

	* [r13833] src/grid/submesh.F90: There is no need for default
	  initialization in submesh_t.

2015-04-12 13:12  huebener

	* [r13834] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90: ability
	  to deal with periodic scdm states. Some fixes of missing
	  push/pop.

2015-04-12 14:06  huebener

	* [r13835] src/hamiltonian/scdm_inc.F90: fixed logical comparison
	  operator

2015-04-13 06:48  dstrubbe

	* [r13836] doc/doxygen/create_documentation.sh: Fix to r13717,
	  which no longer put the Doxygen results in the expected place.

2015-04-13 15:56  philipp

	* [r13837] src/td/pes_flux.F90: Using states_get_points routine.

2015-04-13 16:15  philipp

	* [r13838] src/td/pes_flux.F90: Replacing loop over k-points by
	  loop over surface points.

2015-04-14 01:27  dstrubbe

	* [r13839] testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.test,
	  testsuite/optimal_control/09-density+current.test,
	  testsuite/optimal_control/10-current.test,
	  testsuite/photo_electron/01-h1d_lin.test,
	  testsuite/photo_electron/02-restart.test,
	  testsuite/photo_electron/03-h1d_ati.test,
	  testsuite/photo_electron/04-nfft.test,
	  testsuite/photo_electron/05-pfft.test: svn Id and encoding
	  headers for test files.

2015-04-14 01:35  dstrubbe

	* [r13840] doc/doxygen/create_documentation.sh: Fixing locations in
	  Doxygen script.

2015-04-15 13:54  huebener

	* [r13841] src/grid/cube.F90, src/hamiltonian/scdm.F90,
	  src/math/fft.F90, src/math/nfft.F90, src/math/nfft_f.c,
	  src/math/nfft_inc.F90, src/td/pes_mask.F90: generalized interface
	  for NFFT to treat non-cubic cubes and adjusted call to cube_init
	  and constructioon of cube point coordinates.

2015-04-15 19:32  dstrubbe

	* [r13843] m4/netcdf.m4: Quoting unquoted strings being tested in
	  netcdf m4. This avoids potential errors when FCFLAGS_NETCDF
	  contains a space, as was occurring on the slave hopper
	  buildslave: "../configure: line 10964: test: too many arguments"

2015-04-15 21:50  huebener

	* [r13844] src/grid/cube.F90: remove local default of tp_enlarge_
	  because not used anymore

2015-04-18 06:34  xavier

	* [r13845] src/hamiltonian/ion_interaction.F90: Corrected the
	  calculation of the convergence parameter for the Ewald
	  sum.

2015-04-20 13:48  jjornet

	* [r13846] src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: * Bugfix: species_def_h changed by
	  species_def_rsize.
	  * Bugfix: close unit after the restart is written.
	  * TODO: check if initialization of hamiltonian is required. First
	  steps done in local_write.F90

2015-04-20 14:14  jrfsousa

	* [r13847] src/frozen/base_model.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_external.F90,
	  src/frozen/intrpl_inc.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90: Frozen:
	  
	  * Add integration to storage.
	  
	  * Some code cleanup and propagation of changes.

2015-04-20 14:53  jrfsousa

	* [r13848] src/frozen/base_density.F90,
	  src/frozen/base_functional.F90, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_handle.F90, src/frozen/base_model.F90,
	  src/frozen/base_potential.F90, src/frozen/base_states.F90,
	  src/frozen/base_system.F90, src/frozen/fio_density.F90: Frozen:
	  
	  * Code cleanup.

2015-04-20 15:25  jrfsousa

	* [r13849] src/frozen/Makefile.am, src/frozen/fio_curvilinear.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_grid.F90, src/frozen/fio_hamiltonian.F90,
	  src/frozen/fio_handle.F90, src/frozen/fio_mesh.F90,
	  src/frozen/fio_model.F90, src/frozen/fio_simul_box.F90,
	  src/frozen/fio_simulation.F90, src/frozen/fio_states.F90,
	  src/frozen/fio_system.F90, src/frozen/frozen_handle.F90: Frozen:
	  
	  * Some heavy code cleanup

2015-04-20 15:53  jrfsousa

	* [r13850] src/frozen/Makefile.am, src/frozen/frozen_density.F90,
	  src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90, src/frozen/ssys_handle.F90: Frozen:
	  
	  * Code cleanup.

2015-04-20 16:16  micael

	* [r13851] src/poisson/poisson.F90: LibISF is not considered
	  experimental anymore.

2015-04-21 06:59  micael

	* [r13852] src/poisson/poisson.F90: Updated the PoissonSolver
	  documentation.

2015-04-21 12:49  micael

	* [r13854] src/utils/propagation_spectrum.F90: * There is no reason
	  why symmetries should not work when there is a reference
	  multipole file, provided that any laser field being applied to
	  the system is taken into account when setting the equivalent
	  axis.

2015-04-21 14:00  jrfsousa

	* [r13855] src/frozen/base_hamiltonian.F90,
	  src/frozen/base_handle.F90: Frozen:
	  
	  * Revert changes to base_hamiltonian.F90 due to compilation
	  timeout on pathscale.

2015-04-21 15:26  jrfsousa

	* [r13856] src/frozen/fio_handle.F90, src/frozen/frozen_handle.F90:
	  Frozen:
	  
	  * Addressing compilation timeouts on pathscale.

2015-04-21 16:08  xavier

	* [r13857] src/system/exponential.F90,
	  src/td/propagator_etrs_inc.F90: A small change in the
	  implementation of the ETRS propagator, now two
	  exponentials are calculated simultaneously. (With future changes
	  this
	  will be more efficient.)

2015-04-21 17:00  xavier

	* [r13858] src/system/exponential.F90,
	  src/td/propagator_etrs_inc.F90: 50% reduction in time for etrs:
	  
	  * The exponential_apply_batch function now can take a second set
	  of
	  states where to apply the exponential of the Hamiltonian with a
	  different dt. Since the change of dt only modifies the taylor
	  coefficients, the second application of the exponential is almost
	  free.
	  
	  * This version is now used in the etrs propagator, that requires
	  a
	  propagation of dt/2 and dt at the same time. The Hamiltonian
	  applications per step are now reduced from 12 to 8.

2015-04-22 09:41  micael

	* [r13859] src/td/spectrum.F90: t0 was not properly taken into
	  account when doing the FT with PropagationSpectrumTransform =
	  exponential.

2015-04-22 09:56  jrfsousa

	* [r13860] src/frozen/Makefile.am, src/frozen/fio_model.F90,
	  src/frozen/live_config.F90, src/frozen/live_hamiltonian.F90,
	  src/frozen/live_handle.F90, src/frozen/ssys_handle.F90: Frozen:
	  
	  * Code cleanup.

2015-04-22 10:18  micael

	* [r13861] src/td/spectrum.F90, src/utils/Makefile.am,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90,
	  testsuite/real_time/09-angular_momentum.04-rotatory_strength.inp,
	  testsuite/real_time/09-angular_momentum.test: * Merged the
	  rotatory_strength utility with the propagation_spectrum one.
	  * propagation_spectrum now has a new PropagationSpectrumType for
	  the rotatory strength.

2015-04-22 12:03  jrfsousa

	* [r13862] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_functional.F90, src/frozen/base_hamiltonian.F90,
	  src/frozen/base_potential.F90, src/frozen/frozen_density.F90,
	  src/frozen/iatom.F90, src/frozen/ssys_config.F90,
	  src/frozen/ssys_density.F90, src/frozen/ssys_external.F90,
	  src/frozen/ssys_functional.F90, src/frozen/ssys_hamiltonian.F90,
	  src/frozen/ssys_handle.F90, src/frozen/ssys_ionic.F90,
	  src/frozen/ssys_model.F90, src/frozen/ssys_states.F90,
	  src/frozen/ssys_system.F90, src/frozen/ssys_tnadd.F90,
	  src/frozen/storage.F90: Frozen:
	  
	  * Code cleanup.

2015-04-22 12:20  micael

	* [r13863] src/td/spectrum.F90, src/utils/dielectric_function.F90,
	  src/utils/vibrational.F90: Changed the name of some public
	  routines from spectrum_m to have a consitent naming scheme.

2015-04-22 12:27  micael

	* [r13864] src/utils/vibrational.F90: * Renamed
	  PropagationSpectrumTimeStepFactor input variable to
	  VibrationalSpectrumTimeStepFactor, as it is only used by the
	  oct-vibrational_spectrum utility.
	  * Corrected documentation.

2015-04-22 15:59  mjv500

	* [r13865] src/grid/io_function_inc.F90, src/main/invert_ks.F90,
	  src/scf/scf.F90, src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_exchange_syms_inc.F90,
	  src/states/modelmb_particles.F90, src/states/states.F90,
	  src/system/output.F90, src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/xc_ks_inversion.F90:
	  probably will break the modelmb test, if not everything else...

2015-04-23 10:11  jrfsousa

	* [r13866] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/base_functional.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/config_dict.F90,
	  src/frozen/domain.F90, src/frozen/iterator_code.F90,
	  src/frozen/iterator_inc.F90, src/frozen/simulation.F90,
	  src/frozen/storage.F90, src/frozen/tdarr.F90,
	  src/frozen/tdarr_inc.F90, src/frozen/tdict.F90,
	  src/frozen/tdict_inc.F90, src/frozen/thash.F90,
	  src/frozen/thash_inc.F90, src/frozen/tlist.F90,
	  src/frozen/tlist_inc.F90, src/frozen/tsingle.F90,
	  src/frozen/tsingle_inc.F90: Frozen:
	  
	  * Code cleanup.

2015-04-23 14:53  mjv500

	* [r13867] testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp: remove mmb flag
	  from mmb test inputs

2015-04-23 20:35  mjv500

	* [r13868] src/system/output_states_inc.F90, src/td/td.F90: this
	  fixes the modelmb test on my machine

2015-04-25 22:11  xavier

	* [r13869] src/hamiltonian/ion_interaction.F90,
	  testsuite/periodic_systems/12-boron_nitride.test: Changed the
	  value of the default for EwaldAlpha, this makes the
	  ion-ion interaction calculation much faster.
	  
	  It changes the results of the ion-ion energy for systems periodic
	  in
	  2D, however those values seem to be wrong in any case since they
	  are
	  not calculated consistently (2D real-space part and 3D fourier
	  part).

2015-04-26 14:51  xavier

	* [r13870] src/td/Makefile.am, src/td/potential_interpolation.F90,
	  src/td/propagator.F90, src/td/propagator_cn_inc.F90,
	  src/td/propagator_etrs_inc.F90, src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus_inc.F90, src/td/propagator_qoct_inc.F90,
	  src/td/propagator_rk_inc.F90, src/td/propagator_vksold_inc.F90,
	  src/td/td.F90: Moved the vksinterp object and related routines to
	  their own module,
	  renaming them to potential_interpolation.
	  
	  Note: I am not sure why this is called interpolation, I think
	  what we
	  are using this for are extrapolations.

2015-04-26 18:00  xavier

	* [r13871] src/td/pes.F90, src/td/pes_flux.F90,
	  src/td/pes_mask.F90, src/td/pes_rc.F90,
	  src/td/potential_interpolation.F90, src/td/propagator.F90,
	  src/td/td.F90, src/td/td_write.F90, src/td/tdpsf.F90: Removed
	  unused modules from the src/td/ files.

2015-04-26 18:21  xavier

	* [r13872] src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_base.F90, src/td/propagator_etrs.F90,
	  src/td/propagator_etrs_inc.F90: Started splitting propagator.F90
	  into several compilation units.

2015-04-26 18:47  xavier

	* [r13873] src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_expmid.F90, src/td/propagator_expmid_inc.F90,
	  src/td/propagator_magnus.F90, src/td/propagator_magnus_inc.F90,
	  src/td/propagator_rk.F90, src/td/propagator_rk_inc.F90: Some
	  propagators moved to its own modules.

2015-04-26 19:14  xavier

	* [r13874] src/td/Makefile.am, src/td/propagator.F90,
	  src/td/propagator_cn.F90, src/td/propagator_cn_inc.F90,
	  src/td/propagator_qoct.F90, src/td/propagator_qoct_inc.F90:
	  Finished the splitting of propagator.F90.

2015-04-26 21:14  xavier

	* [r13875] src/opt_control/opt_control.F90,
	  src/opt_control/propagation.F90, src/td/propagator.F90,
	  src/td/propagator_base.F90, src/td/propagator_cn.F90,
	  src/td/propagator_etrs.F90, src/td/propagator_expmid.F90,
	  src/td/propagator_magnus.F90, src/td/propagator_qoct.F90,
	  src/td/propagator_rk.F90, src/td/td.F90: * Removed unused modules
	  in the new compilation units.
	  * Missing module load. This should fix compilation in the
	  buildbots.

2015-04-26 22:03  xavier

	* [r13876] src/math/sparskit.F90, src/td/propagator_base.F90: *
	  Fixed compilation with sparskit.
	  * The sparskit_t object is defined even when sparskit is not
	  available.

2015-04-26 22:45  xavier

	* [r13877] src/grid/mesh_function.F90, src/td/propagator_rk.F90:
	  More fixes for the sparksit compilation.

2015-04-26 22:48  xavier

	* [r13878] src/td/propagator_etrs.F90: Another compilation fix.

2015-04-27 05:34  xavier

	* [r13879] src/td/propagator_rk.F90: * Only the specific sparskit
	  calls are avoided when sparskit is not
	  present.
	  
	  * Compilation fixes.

2015-04-27 14:18  xavier

	* [r13880] src/td/propagator.F90: * Fix for sparskit compilation.

2015-04-27 14:57  xavier

	* [r13881] src/td/propagator_rk.F90: One last fix to compile with
	  sparskit.

2015-04-27 22:02  xavier

	* [r13882] src/hamiltonian/ion_interaction.F90: Removed an
	  unnecessary pointer.

2015-04-27 23:15  xavier

	* [r13883] src/hamiltonian/ion_interaction.F90: Parallelization in
	  atoms of the short range ion-ion interaction
	  (periodic systems).

2015-04-28 05:19  xavier

	* [r13884] src/hamiltonian/epot.F90, src/hamiltonian/projector.F90:
	  Moved the submesh initialization out of the projector
	  initialization.

2015-04-28 06:42  xavier

	* [r13885] src/grid/submesh.F90, src/hamiltonian/epot.F90:
	  Generation of the pseudopotential submesh is done in parallel.

2015-04-28 13:17  umberto

	* [r13886] src/grid/cube.F90: Fixed support for enlargement along
	  specific directions. Enlarging a cube only along specific
	  directions clearly makes of it a "non-cubic" cube (i.e. a
	  parallelepiped). It seems to me a bit misleading but non-cubic
	  cubes are already used in the code, for instance, when we
	  simulate semi-periodic systems. For readabily purposes, maybe the
	  whole module could be renamed parallelepiped?

2015-04-28 13:19  umberto

	* [r13887] src/basic/messages.F90: messages_print_var_value for
	  vectorial variables

2015-04-28 14:05  umberto

	* [r13888] src/math/fft.F90, testsuite/photo_electron/04-nfft.test:
	  fft_init_stage1 interface update. this shoudl fix compilation
	  problem in the cube module

2015-04-28 14:20  umberto

	* [r13889] src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Extending the PES_MASK
	  module to semi-periodic systems. For the moment it only supports
	  gamma-point with FFT real-to-fourier-space maps.

2015-04-30 14:20  jrfsousa

	* [r13890] src/frozen/Makefile.am, src/frozen/base_density.F90,
	  src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_hamiltonian.F90, src/frozen/fio_mesh.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_hamiltonian.F90,
	  src/frozen/interface_xc.F90, src/frozen/intrpl.F90,
	  src/frozen/intrpl_inc.F90, src/frozen/ssys_external.F90,
	  src/frozen/ssys_hamiltonian.F90, src/frozen/storage.F90: Frozen:
	  
	  * Code cleanup.

2015-04-30 14:50  jrfsousa

	* [r13891] src/states/density.F90: States:
	  
	  density.F90
	  
	  * Simplify frozen dependencies.

2015-04-30 15:18  jrfsousa

	* [r13892] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  Hamiltonian.F90
	  
	  * Add pointer to the Subsystem's Hamiltonian.

2015-04-30 15:39  umberto

	* [r13893] src/td/Makefile.am, src/td/pes.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90, src/td/tdpsf.F90: Removed unused
	  code and clean up.

2015-04-30 15:54  jrfsousa

	* [r13894] src/system/output.F90, src/system/output_states_inc.F90:
	  System:
	  
	  output.F90
	  output_states_inc.F90
	  
	  * Simplify frozen dependencies.

2015-04-30 17:14  jrfsousa

	* [r13895] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  Hamiltonian.F90
	  
	  * Try to reinstate compilation on pathscale.

2015-04-30 21:39  xavier

	* [r13896] src/hamiltonian/hamiltonian.F90,
	  src/system/energy_calc.F90: A constant electric field can be
	  applied to time-dependent periodic
	  systems using a gauge field.

2015-05-01 12:11  xavier

	* [r13897] src/td/Makefile.am, src/td/td.F90,
	  src/td/td_init_inc.F90: Merged td_init_inc.F90 into td.F90.

2015-05-02 05:24  xavier

	* [r13898] src/system/current.F90: Bugfix: the calculation of the
	  current was wrong for multiple blocks.

2015-05-02 06:43  xavier

	* [r13899] src/td/td_write.F90: Bugfix: Only the root node should
	  write the total_current.

2015-05-04 09:51  jrfsousa

	* [r13900] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  hamiltonian.F90
	  
	  * Work around pathscale slow compilation problems.

2015-05-04 15:01  jrfsousa

	* [r13901] src/frozen/ssys_external.F90: Frozen:
	  
	  * Alter the way the subsystem's energy is calculated.
	  
	  * Revert the removal of getter procedures.

2015-05-04 15:05  jrfsousa

	* [r13902] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90: Hamiltonian:
	  
	  hamiltonian.F90
	  
	  * Add reference to subsystem external module.
	  
	  hamiltonian_inc.F90
	  
	  * Restrict the calculation in the X(hamiltonian_external)
	  procedure to the live part of the potential.

2015-05-04 15:13  jrfsousa

	* [r13903] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  epot.F90
	  
	  * Remove unnecessary module reference.
	  
	  * Correct procedure call.

2015-05-05 02:15  xavier

	* [r13906] src/td/td.F90: The default value for TDEnergyUpdateIter
	  is 1 for molecular dynamics.

2015-05-05 03:57  xavier

	* [r13907] src/td/propagator.F90, src/td/propagator_etrs.F90,
	  src/td/propagator_expmid.F90, src/td/td.F90: Changed the way
	  IonicTimeScale is handled, now a factor is applied to
	  the ionic propagation.

2015-05-05 06:02  xavier

	* [r13908] src/td/propagator.F90, src/td/propagator_etrs.F90,
	  src/td/propagator_expmid.F90, src/td/td.F90,
	  testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp: When
	  doing a molecular dynamics simulation, the atom positions are
	  updated
	  every TDEnergyUpdateIter iterations. This is still experimental.

2015-05-05 09:25  jrfsousa

	* [r13909] src/frozen/ssys_ionic.F90: Frozen:
	  
	  * Code cleanup.
	  
	  * Add getter procedures.

2015-05-05 09:46  jrfsousa

	* [r13910] src/hamiltonian/ion_interaction.F90: Hamiltonian:
	  
	  ion_interaction.F90
	  
	  * Add references to subsystem's ionic term.

2015-05-05 10:02  jrfsousa

	* [r13911] src/system/v_ks.F90: System:
	  
	  v_ks.F90
	  
	  * Add references to subsystem.
	  
	  * Add subsystem's kinetic non aditional term calculation.

2015-05-05 10:21  jrfsousa

	* [r13912] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  hamiltonian.F90
	  
	  * Add the subsystem's kinetic non aditional term to the
	  hamiltonian.

2015-05-05 10:56  jrfsousa

	* [r13913] src/system/output.F90, src/system/output_h_inc.F90:
	  System:
	  
	  output_h_inc.F90
	  
	  * Output subsystem's kinetic non aditional term.

2015-05-05 11:16  jrfsousa

	* [r13914] src/system/energy_calc.F90: System:
	  
	  energy_calc.F90
	  
	  * Add subsystem's external and non additive kinetic energy terms.

2015-05-05 12:31  jrfsousa

	* [r13915] src/system/system.F90: System:
	  
	  system.F90
	  
	  * Add pointer to subsystem model.

2015-05-05 12:56  jrfsousa

	* [r13916] src/scf/lcao.F90: Scf:
	  
	  lcao.F90
	  
	  * Alter the way the way the subsystems densities are added.

2015-05-05 13:19  jrfsousa

	* [r13917] src/main/run.F90: Main:
	  
	  run.F90
	  
	  * Add references to configuration and the handle to the
	  subsystems.

2015-05-05 13:40  jrfsousa

	* [r13918] src/hamiltonian/ion_interaction.F90: Hamiltonian:
	  
	  ion_interaction.F90
	  
	  * Add subroutine to set the pointer to the subsystem's ionic
	  term.
	  
	  * Add the energy and forces due to the subsytems ions.

2015-05-05 13:57  jrfsousa

	* [r13919] src/main/run.F90: Main:
	  
	  run.F90
	  
	  * Temporary fix to testsuite problem.

2015-05-05 14:20  jrfsousa

	* [r13920] src/frozen/base_density.F90: Frozen:
	  
	  * Add an extra check.

2015-05-05 14:21  jrfsousa

	* [r13921] src/hamiltonian/epot.F90: Hamiltonian:
	  
	  epot.F90
	  
	  * Add code to handle subsystem's ionic term.

2015-05-05 15:14  jrfsousa

	* [r13922] src/hamiltonian/hamiltonian.F90: Hamiltonian:
	  
	  hamiltonian.F90
	  
	  * Add an optional argument to hamiltonian_init to pass the
	  subsystem's hamiltonian.
	  
	  * Add to code to set the internal pointer to the subsystem's
	  hamiltonian.

2015-05-05 17:38  philipp

	* [r13923] src/td/pes_flux.F90: Clean up, removing obsolete codes
	  lines.

2015-05-05 17:41  philipp

	* [r13924] src/td/pes_flux.F90: Fixing a bug in calculation of
	  number of surface points.

2015-05-05 20:59  philipp

	* [r13925] src/td/pes_flux.F90: Changing default of location of
	  surface & adding offset for surface.

2015-05-06 02:02  xavier

	* [r13926] src/states/states_io.F90: If we print values around the
	  HOMO, we just see the tail of
	  the Fermi-Dirac distribution. Now the HOMO for output purposes is
	  defined as the last state with occupation larger than 0.1.

2015-05-06 06:01  philipp

	* [r13927] src/td/pes.F90, src/td/pes_flux.F90, src/td/td.F90: *
	  instead of storing the flux Jk in memory, save the wavefunctions
	  at the surface points.
	  * add subroutine pes_flux_integrate to integrate over time.
	  * perform the sum over states already before surface & time
	  integral.

2015-05-06 07:17  philipp

	* [r13928] src/td/pes.F90, src/td/pes_flux.F90: Extending t-surff
	  to 3d.

2015-05-06 07:36  philipp

	* [r13929] src/td/pes_flux.F90: Parallelization of the k-mesh
	  (pes_flux).

2015-05-06 09:39  philipp

	* [r13930] src/td/pes.F90, src/td/pes_flux.F90, src/td/td.F90:
	  Writing restart information.

2015-05-06 14:42  philipp

	* [r13932] src/td/pes_flux.F90: Using MPI_Reduce instead of
	  MPI_Allreduce where possible.

2015-05-06 15:53  helbig

	* [r13933] src/scf/rdmft.F90, testsuite/functionals/06-rdmft.test:
	  * Changed initial localization of orbitals so that they decay
	  with the HOMO eigenvalue
	  - should provide good starting orbitals for all finite systems
	  * Added nuclear-nuclear interaction when printing the total
	  energy

2015-05-07 07:46  helbig

	* [r13934] src/scf/rdmft.F90: * bug fix in rdmft

2015-05-07 09:29  micael

	* [r13935] src/basic/getopt_f.c: Removed command line options for
	  the oct-rotatory_strength utility.

2015-05-07 09:36  micael

	* [r13936] src/basic/io_binary.c, src/grid/partition.F90: *
	  Reseting error codes in partition_load.
	  * Bug fix: the filename was not converted from a Fortran string
	  to a C string in get_info_binary before obtaining the file size.
	  In some cases this caused the function to return a wrong file
	  size which made the loading of the partition fail.

2015-05-07 10:20  jrfsousa

	* [r13937] src/states/states.F90: States:
	  
	  states.F90
	  
	  * Adds check to fix subsystems density deallocation.

2015-05-07 14:50  micael

	* [r13938] src/system/v_ks.F90: Missing PUSH/POP.

2015-05-08 02:22  xavier

	* [r13939] src/states/states_io.F90: Octopus now prints the density
	  of states to the terminal each SCF
	  iteration. These are some examples:
	  
	  ---------------------------------------------%------------------------
	  ----%------------------------------------%-%-%----%-------------------
	  ----%------------------------------------%-%-%----%-------------------
	  ---%%-----------------------------%%%%--%%-%%%--%%%-------------------
	  ---%%-----------------------------%%%%%%%%%%%%--%%%----------------%--
	  --%%%------------------------%---%%%%%%%%%%%%%%-%%%----------------%--
	  %-%%%------------------------%%--%%%%%%%%%%%%%%%%%%--------------%%%--
	  %-%%%---------------%----%---%%%-%%%%%%%%%%%%%%%%%%%----------%-%%%%--
	  %%%%%--------------%%%%--%%--%%%-%%%%%%%%%%%%%%%%%%%----------%%%%%%%-
	  %%%%%%-------------%%%%--%%%%%%%-%%%%%%%%%%%%%%%%%%%----------%%%%%%%-
	  ^
	  
	  
	  
	  -----------------------------------------------%----------------------
	  -----------------------------------------------%----------------------
	  ----------------------------------------------%%----------------------
	  ---------------------------------------%-----%%%----------------------
	  -------------------------------%-%%%%%%%%%%%%%%%%---------------------
	  --------------------------%%-%%%%%%%%%%%%%%%%%%%%---------------------
	  -----------------------%%-%%%%%%%%%%%%%%%%%%%%%%%%--------------------
	  --------------------%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%--------------------
	  ---------------%-%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-%-%----------------
	  --------------%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-%%-%-%-----------
	  ^
	  

2015-05-08 09:13  jrfsousa

	* [r13940] src/system/system.F90: System:
	  
	  system.F90
	  
	  * Add references to subsystems and json modules.
	  
	  * Add optional arguments to system_init to pass the subsystem's
	  handle and the subsystem's configuration.
	  
	  * Add pointers to subsystems states and system.

2015-05-08 09:34  jrfsousa

	* [r13941] src/main/run.F90: Main:
	  
	  run.F90
	  
	  * Add references to the necessary subsystems modules.
	  
	  * Add pointers to subsystem's model and hamiltonian.

2015-05-08 09:55  jrfsousa

	* [r13942] src/system/system.F90: System:
	  
	  system.F90
	  
	  * Change intents.
	  
	  * Add code to initialize and configure subsystems.

2015-05-08 10:06  jrfsousa

	* [r13943] src/main/run.F90: Main:
	  
	  run.F90
	  
	  * Add code to handle the subsystems.

2015-05-08 10:15  jrfsousa

	* [r13944] src/states/states.F90: States:
	  
	  states.F90
	  
	  * Add a few ASSERTs.

2015-05-08 12:33  micael

	* [r13945] src/basic/io_binary.c: Moving declaration of variable to
	  begining of function.

2015-05-08 14:16  jrfsousa

	* [r13948] src/frozen/base_geom.F90: Frozen:
	  
	  * Add missing check.

2015-05-08 21:03  dstrubbe

	* [r13949] doc/Makefile.am, doc/oct-rotatory_strength.pod,
	  src/basic/command_line.F90: Get rid of remaining traces of
	  oct-rotatory_strength.

2015-05-09 09:54  jrfsousa

	* [r13950] src/system/system.F90: System:
	  
	  system.F90
	  
	  * Changing intents back to inout, pathscale does not like intent
	  out.

2015-05-10 09:44  jrfsousa

	* [r13951] src/frozen/base_geom.F90: Frozen:
	  
	  * Fixing inconsistencies.

2015-05-10 13:06  xavier

	* [r13952] src/hamiltonian/epot.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/03-derivatives_3d.01.inp,
	  testsuite/components/04-hartree_3d_cg.01-cg_corrected.inp,
	  testsuite/components/05-hartree_3d_fft.01-fft.inp,
	  testsuite/components/05-hartree_3d_fft.02-fft_corrected.inp,
	  testsuite/components/06-hartree_3d_isf.01-isf.inp,
	  testsuite/components/07-cholesky_serial.01-real.inp,
	  testsuite/components/07-cholesky_serial.02-complex.inp,
	  testsuite/components/08-mgs.01-real.inp,
	  testsuite/components/08-mgs.02-complex.inp,
	  testsuite/components/09-qr.01-real.inp,
	  testsuite/components/09-qr.02-complex.inp,
	  testsuite/components/10-hartree_pfft.01-fft.inp,
	  testsuite/components/10-hartree_pfft.02-fft_corrected.inp,
	  testsuite/components/11-hartree_cl.01-fft.inp,
	  testsuite/components/12-hartree_direct_3d.01.inp,
	  testsuite/components/13-hartree_3d_mg.01-multigrid.inp,
	  testsuite/components/14-center-geom.01-run.inp,
	  testsuite/components/15-cholesky_parallel.01-real.inp,
	  testsuite/components/15-cholesky_parallel.02-complex.inp,
	  testsuite/components/16-hartree_3d_libisf.01-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.02-libisf.inp,
	  testsuite/components/17-recipe.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/components/18-interpolation.03-3d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.01-psf_l0.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.02-psf_l1.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.03-ground_state_double_grid.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.04-cpi.inp,
	  testsuite/finite_systems_3d/01-carbon_atom.05-fhi.inp,
	  testsuite/finite_systems_3d/02-curvilinear_coordinates.01-gygi.inp,
	  testsuite/finite_systems_3d/03-magnetic.01-gs-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.02-td-unpolarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.03-gs-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.04-td-polarized.inp,
	  testsuite/finite_systems_3d/03-magnetic.05-gs-spinors.inp,
	  testsuite/finite_systems_3d/03-magnetic.06-td-spinors.inp,
	  testsuite/finite_systems_3d/04-jellium.01-ground_state.inp,
	  testsuite/finite_systems_3d/05-output.01-gs.inp,
	  testsuite/finite_systems_3d/05-output.02-convert.inp,
	  testsuite/finite_systems_3d/06-restart.01-gs_mixrho.inp,
	  testsuite/finite_systems_3d/06-restart.02-restart_gs_mixrho.inp,
	  testsuite/finite_systems_3d/06-restart.03-gs_mixvhxc.inp,
	  testsuite/finite_systems_3d/06-restart.04-restart_gs_mixvhxc.inp,
	  testsuite/finite_systems_3d/06-restart.05-restart_gs.inp,
	  testsuite/finite_systems_3d/06-restart.06-td_calc.inp,
	  testsuite/finite_systems_3d/06-restart.07-restart_td_calc.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.01-hgh.inp,
	  testsuite/finite_systems_3d/07-spin_orbit_coupling.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.01-hgh.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.02-rkb.inp,
	  testsuite/finite_systems_3d/08-spin_orbit_coupling_full.03-unocc.inp,
	  testsuite/finite_systems_3d/09-spinors.01-ground_state.inp,
	  testsuite/finite_systems_3d/09-spinors.02-rmmdiis.inp,
	  testsuite/finite_systems_3d/09-spinors.03-rmmdiis_extra_states.inp,
	  testsuite/finite_systems_3d/10-fullerene.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.01-gs.inp,
	  testsuite/finite_systems_3d/13-full_potential_hydrogen.02-gs-cg.inp,
	  testsuite/finite_systems_3d/14-fullerene_packed.01-gs.inp,
	  testsuite/finite_systems_3d/15-fullerene_stdlcao.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.02-cg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.03-cg_new.inp,
	  testsuite/finite_systems_3d/20-eigensolver.04-plan.inp,
	  testsuite/finite_systems_3d/20-eigensolver.05-evolution.inp,
	  testsuite/finite_systems_3d/20-eigensolver.06-rmmdiis.inp,
	  testsuite/finite_systems_3d/21-lobpcg.01-spin_polarized.inp,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp,
	  testsuite/finite_systems_3d/23-go-na2.01-steep.inp,
	  testsuite/finite_systems_3d/23-go-na2.02-simplex.inp,
	  testsuite/finite_systems_3d/23-go-na2.03-fire.inp,
	  testsuite/finite_systems_3d/24-o2-spin.01-gs.inp,
	  testsuite/finite_systems_3d/25-multiresolution.01-Hatom.inp,
	  testsuite/finite_systems_3d/26-nlcc.01-Fatom.inp,
	  testsuite/finite_systems_3d/27-fine_mesh.01-gs.inp,
	  testsuite/finite_systems_3d/28-carbon_big_box.01-ground_state.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/functionals/03-xc.01-gs.inp,
	  testsuite/functionals/03-xc.b3lyp_fock.inp,
	  testsuite/functionals/03-xc.b3lyp_oep.inp,
	  testsuite/functionals/03-xc.exx.inp,
	  testsuite/functionals/03-xc.gga_c_am05.inp,
	  testsuite/functionals/03-xc.gga_c_lm.inp,
	  testsuite/functionals/03-xc.gga_c_lyp.inp,
	  testsuite/functionals/03-xc.gga_c_p86.inp,
	  testsuite/functionals/03-xc.gga_c_pbe.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_jrgx.inp,
	  testsuite/functionals/03-xc.gga_c_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_c_pw91.inp,
	  testsuite/functionals/03-xc.gga_c_xpbe.inp,
	  testsuite/functionals/03-xc.gga_x_am05.inp,
	  testsuite/functionals/03-xc.gga_x_b86.inp,
	  testsuite/functionals/03-xc.gga_x_b86_mgc.inp,
	  testsuite/functionals/03-xc.gga_x_b88.inp,
	  testsuite/functionals/03-xc.gga_x_bayesian.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r1.inp,
	  testsuite/functionals/03-xc.gga_x_dk87_r2.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_a.inp,
	  testsuite/functionals/03-xc.gga_x_ft97_b.inp,
	  testsuite/functionals/03-xc.gga_x_g96.inp,
	  testsuite/functionals/03-xc.gga_x_lb.inp,
	  testsuite/functionals/03-xc.gga_x_lg93.inp,
	  testsuite/functionals/03-xc.gga_x_mpbe.inp,
	  testsuite/functionals/03-xc.gga_x_mpw91.inp,
	  testsuite/functionals/03-xc.gga_x_optb88_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optpbe_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_optx.inp,
	  testsuite/functionals/03-xc.gga_x_pbe.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_jsjr.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_r.inp,
	  testsuite/functionals/03-xc.gga_x_pbe_sol.inp,
	  testsuite/functionals/03-xc.gga_x_pbea.inp,
	  testsuite/functionals/03-xc.gga_x_pbek1_vdw.inp,
	  testsuite/functionals/03-xc.gga_x_pw86.inp,
	  testsuite/functionals/03-xc.gga_x_pw91.inp,
	  testsuite/functionals/03-xc.gga_x_rpbe.inp,
	  testsuite/functionals/03-xc.gga_x_wc.inp,
	  testsuite/functionals/03-xc.gga_x_xpbe.inp,
	  testsuite/functionals/03-xc.gga_xc_b97.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_1.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_2.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_3.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_d.inp,
	  testsuite/functionals/03-xc.gga_xc_b97_k.inp,
	  testsuite/functionals/03-xc.gga_xc_edf1.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_120.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_147.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_407.inp,
	  testsuite/functionals/03-xc.gga_xc_hcth_93.inp,
	  testsuite/functionals/03-xc.gga_xc_mpwlyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbe1w.inp,
	  testsuite/functionals/03-xc.gga_xc_pbelyp1w.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_1c.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2a.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2b.inp,
	  testsuite/functionals/03-xc.gga_xc_sb98_2c.inp,
	  testsuite/functionals/03-xc.gga_xc_xlyp.inp,
	  testsuite/functionals/03-xc.kli.inp,
	  testsuite/functionals/03-xc.lda_c_gl.inp,
	  testsuite/functionals/03-xc.lda_c_hl.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pw.inp,
	  testsuite/functionals/03-xc.lda_c_ob_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pw.inp,
	  testsuite/functionals/03-xc.lda_c_pw_mod.inp,
	  testsuite/functionals/03-xc.lda_c_pz.inp,
	  testsuite/functionals/03-xc.lda_c_pz_mod.inp,
	  testsuite/functionals/03-xc.lda_c_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_vbh.inp,
	  testsuite/functionals/03-xc.lda_c_vwn.inp,
	  testsuite/functionals/03-xc.lda_c_vwn_rpa.inp,
	  testsuite/functionals/03-xc.lda_c_wigner.inp,
	  testsuite/functionals/03-xc.lda_c_xalpha.inp,
	  testsuite/functionals/03-xc.lda_x.inp,
	  testsuite/functionals/03-xc.lda_xc_teter93.inp,
	  testsuite/functionals/03-xc.m05_fock.inp,
	  testsuite/functionals/03-xc.m05_oep.inp,
	  testsuite/functionals/03-xc.pbe0_fock.inp,
	  testsuite/functionals/03-xc.pbe0_oep.inp,
	  testsuite/functionals/03-xc.sic_pz.inp,
	  testsuite/functionals/04-oep.01-jellium-lsda.inp,
	  testsuite/functionals/04-oep.02-jellium-exx_kli.inp,
	  testsuite/functionals/04-oep.03-jellium-full_exx.inp,
	  testsuite/functionals/05-ks_inversion.01-target_density.inp,
	  testsuite/functionals/05-ks_inversion.02-two_particle.inp,
	  testsuite/functionals/05-ks_inversion.03-inversion.inp,
	  testsuite/functionals/06-rdmft.01-oep.inp,
	  testsuite/functionals/06-rdmft.02-gs.inp,
	  testsuite/functionals/07-sic.01-gs.inp,
	  testsuite/linear_response/02-h2o_pol_lr.01_h2o_gs.inp,
	  testsuite/linear_response/02-h2o_pol_lr.02_h2o_dyn_pol.inp,
	  testsuite/linear_response/02-h2o_pol_lr.03_h2o_dyn_pol_cmplx.inp,
	  testsuite/linear_response/02-h2o_pol_lr.04_h2o_susc.inp,
	  testsuite/linear_response/03-vdw_sternheimer.01-ground_state.inp,
	  testsuite/linear_response/03-vdw_sternheimer.02-vdw.inp,
	  testsuite/linear_response/05-polarizability.01-gs.inp,
	  testsuite/linear_response/05-polarizability.02-sternheimer.inp,
	  testsuite/linear_response/05-polarizability.03-finite-diff.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.01-ground_state.inp,
	  testsuite/periodic_systems/03-sodium_chain.02-unocc.inp,
	  testsuite/periodic_systems/03-sodium_chain.03-ground_state_disp.inp,
	  testsuite/periodic_systems/03-sodium_chain.04-unocc_disp.inp,
	  testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp,
	  testsuite/periodic_systems/05-lithium.01-gs.inp,
	  testsuite/periodic_systems/05-lithium.02-td.inp,
	  testsuite/periodic_systems/05-lithium.03-td-restart.inp,
	  testsuite/periodic_systems/05-lithium.04-dielectric_function.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.01_gs.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.02_kdotp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.03_emresp.inp,
	  testsuite/periodic_systems/07-tb09.01-gs_symm.inp,
	  testsuite/periodic_systems/07-tb09.02-gs_nosymm.inp,
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/09-etsf_io.01-gs.inp,
	  testsuite/periodic_systems/10-berkeleygw.01-gs.inp,
	  testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/12-boron_nitride.01-gs.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/photo_electron/05-pfft.01-gs.inp,
	  testsuite/photo_electron/05-pfft.02-mask.inp,
	  testsuite/photo_electron/05-pfft.03-ba.inp,
	  testsuite/pseudopotentials/01-sg15-h.01-gs.inp,
	  testsuite/real_time/01-propagators.01-gs.inp,
	  testsuite/real_time/01-propagators.02-expmid.inp,
	  testsuite/real_time/01-propagators.03-etrs.inp,
	  testsuite/real_time/01-propagators.04-aetrs.inp,
	  testsuite/real_time/01-propagators.05-caetrs.inp,
	  testsuite/real_time/01-propagators.06-cn.inp,
	  testsuite/real_time/01-propagators.07-magnus.inp,
	  testsuite/real_time/01-propagators.08-exprk4.inp,
	  testsuite/real_time/02-propagators.01-gs.inp,
	  testsuite/real_time/02-propagators.02-cnsparskit.inp,
	  testsuite/real_time/02-propagators.03-rungekutta2.inp,
	  testsuite/real_time/02-propagators.04-rungekutta4.inp,
	  testsuite/real_time/05-time_propagation.01-gs.inp,
	  testsuite/real_time/05-time_propagation.02-td_domains.inp,
	  testsuite/real_time/05-time_propagation.03-td_domains_states.inp,
	  testsuite/real_time/05-time_propagation.04-td_md.inp,
	  testsuite/real_time/05-time_propagation.05-td_fast_md.inp,
	  testsuite/real_time/08-laser.01-ground_state.inp,
	  testsuite/real_time/08-laser.02-length_gauge.inp,
	  testsuite/real_time/08-laser.03-velocity_gauge.inp,
	  testsuite/real_time/09-angular_momentum.01-gs.inp,
	  testsuite/real_time/09-angular_momentum.02-td_gipaw.inp,
	  testsuite/real_time/09-angular_momentum.03-td_icl.inp,
	  testsuite/real_time/09-angular_momentum.04-rotatory_strength.inp,
	  testsuite/real_time/10-bomd.04-xyz-anim.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/12-absorption.01-gs.inp,
	  testsuite/real_time/12-absorption.02-td.inp,
	  testsuite/real_time/12-absorption.03-td-restart.inp,
	  testsuite/real_time/12-absorption.04-spectrum.inp,
	  testsuite/real_time/12-absorption.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/12-absorption.06-power_spectrum.inp,
	  testsuite/real_time/13-absorption-spin.01-gs.inp,
	  testsuite/real_time/13-absorption-spin.02-td.inp,
	  testsuite/real_time/13-absorption-spin.03-td-restart.inp,
	  testsuite/real_time/13-absorption-spin.04-spectrum.inp,
	  testsuite/real_time/13-absorption-spin.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/13-absorption-spin.06-td_spinkick.inp,
	  testsuite/real_time/13-absorption-spin.07-spectrum_triplet.inp,
	  testsuite/real_time/14-absorption-spinors.01-gs.inp,
	  testsuite/real_time/14-absorption-spinors.02-td.inp,
	  testsuite/real_time/14-absorption-spinors.03-td-restart.inp,
	  testsuite/real_time/14-absorption-spinors.04-spectrum.inp,
	  testsuite/real_time/14-absorption-spinors.05-spectrum_compressed_sensing.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.01-gs.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.02-td.inp,
	  testsuite/real_time/17-absorption-spin_symmetry.03-spectrum.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: * The pseudopotential
	  filters is now applied by default.
	  
	  * Disabled the pseudo potential filter in all tests that do not
	  set it
	  explicitly.

2015-05-10 13:43  xavier

	* [r13953] testsuite/finite_systems_3d/12-forces.01-N2_gs.inp,
	  testsuite/finite_systems_3d/12-forces.02-N2_gs.inp,
	  testsuite/finite_systems_3d/12-forces.03-N2_gs.inp,
	  testsuite/linear_response/01-casida.01-gs.inp,
	  testsuite/linear_response/01-casida.012-vib_modes.inp,
	  testsuite/linear_response/01-casida.02-unocc.inp,
	  testsuite/linear_response/01-casida.022-unocc_restart.inp,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.032-casida_restart.inp,
	  testsuite/linear_response/01-casida.04-spectrum.inp,
	  testsuite/linear_response/04-vib_modes.01-ground_state.inp,
	  testsuite/linear_response/04-vib_modes.02-vib_modes.inp,
	  testsuite/linear_response/04-vib_modes.022-vib_modes_restart.inp,
	  testsuite/linear_response/06-vib_modes_fd.01-ground_state.inp,
	  testsuite/linear_response/06-vib_modes_fd.01-vib_modes_fd.inp,
	  testsuite/real_time/06-caetrs.01-gs.inp,
	  testsuite/real_time/06-caetrs.02-kick.inp,
	  testsuite/real_time/06-caetrs.03-kick-tp1.inp,
	  testsuite/real_time/06-caetrs.04-kick-tp2.inp,
	  testsuite/real_time/10-bomd.01-gs.inp,
	  testsuite/real_time/10-bomd.02-td.inp,
	  testsuite/real_time/10-bomd.03-td_restart.inp,
	  testsuite/real_time/15-crank_nicolson.01-gs.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp,
	  testsuite/real_time/16-sparskit.01-gs.inp,
	  testsuite/real_time/16-sparskit.02-kick.inp: Removed all the
	  'FilterPotential = filter_ts' from test files, as this
	  is the default.

2015-05-11 19:48  dstrubbe

	* [r13954] src/grid/mesh_partition.F90, src/grid/partition.F90: *
	  Call MPI_Allreduce with the variable as size that is the same one
	  used to allocate the array. It seems npart == vsize in this
	  routine, but it seems best to ensure consistency.
	  * If reading inner partition fails, do not bother trying to read
	  boundary partition.
	  * A more robust check for partition size consistency, that does
	  not suffer from truncation in integer division.

2015-05-12 20:42  dstrubbe

	* [r13956] testsuite/buildbot_query.pl: buildbot_query now looks at
	  results only for a specific branch, "trunk" by default. This
	  allows reference values and precision to be set properly in
	  branches/5.0.x, and avoids attempts to set them in trunk being
	  confused by recent builds in branches/5.0.x.

2015-05-13 15:30  xavier

	* [r13958] src/grid/submesh.F90: Removed default initialization
	  from submesh_t.

2015-05-13 15:53  xavier

	* [r13959] src/grid/submesh.F90: The submesh map is now ordered for
	  better performance.

2015-05-13 19:30  xavier

	* [r13960] src/math/tdfunction.F90: Improved the documentation for
	  the trapezoidal function.

2015-05-13 21:54  xavier

	* [r13961] src/hamiltonian/epot.F90, src/system/forces.F90: Added
	  the variable TDGlobalForce, that applies a time-dependent force
	  to the ions.

2015-05-13 22:08  dstrubbe

	* [r13962] src/utils/vibrational.F90: Missing word in
	  documentation.

2015-05-13 22:20  dstrubbe

	* [r13963] src/main/run.F90: Bugfix to r13395: all profile_t
	  objects must be declared "save" or else when they go out of
	  scope, they break the linked list prof_vars%profile_list. This
	  was causing uninitialized information to be printed for the
	  CALC_MODE profile in
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp, as
	  flagged by the valgrind builder.

2015-05-13 22:33  dstrubbe

	* [r13964] testsuite/finite_systems_1d/01-hydrogen.test: Adding a
	  match for a number of calls in the profiling file.

2015-05-13 22:37  dstrubbe

	* [r13965] src/basic/profiling.F90: * Comment on why 'save' is
	  needed for profile_t objects.
	  * Clearer Doxygen comments.
	  * Default initialization of 'active' component to help in
	  consistency checking.
	  * Making sure profiles being ended are initialized.
	  * Clearer error message when file cannot be opened.

2015-05-13 22:43  dstrubbe

	* [r13966] testsuite/finite_systems_1d/01-hydrogen.test: Opps,
	  wrong field in match for r13964.

2015-05-13 22:46  dstrubbe

	* [r13967] src/basic/io.F90: * Very minor bugfix: use of 'stderr'
	  option and DebugLevel >= 2 would make the POP_SUB(io_end) write
	  to unit 0 instead of the chosen file for 'stderr'. I think it is
	  best just not to use PUSH/POP here.
	  * Just after deleting any previous status file, we know the
	  status can be 'new' not 'unknown' for opening the new status
	  file.

2015-05-13 23:28  dstrubbe

	* [r13968] src/basic/io_binary.c: Fixing memory leak from r13936.

2015-05-13 23:40  dstrubbe

	* [r13969] src/basic/io_binary.c: Removing useless lines from
	  write_header and read_header.

2015-05-14 00:46  xavier

	* [r13970] src/hamiltonian/epot.F90: Implemented David's
	  suggestions for TDGlobalForce: moved the
	  documentation to Time-Dependent and added missing
	  PUSH_SUB/POP_SUB.

2015-05-14 00:59  xavier

	* [r13971] src/grid/submesh.F90: Removed the warning about
	  "Multiple periodic replicas". I now
	  understand when this can cause a problem. For periodic systems if
	  the
	  pseudopotential sphere is larger than the system, several points
	  from
	  the submesh might be mapped to the same point of the mesh. This
	  is an
	  issue in two situations: when we need the reverse mapping from
	  mesh to
	  submesh, which is used by the double grid code, and when we do
	  things
	  in muliple-threads, as several threads might want to write the
	  same
	  location at the same time. I will try to fix this issues soon.

2015-05-14 04:36  xavier

	* [r13972] src/grid/submesh.F90: The new overlap member of the
	  submesh_t object signals when a submesh
	  has multiple copies of a point.

2015-05-14 14:58  dstrubbe

	* [r13975] testsuite/oct-run_regression_test.pl: Bugfix to r13406
	  for testsuite Options: the last option could fail to be
	  recognized because of a trailing \n in the string of available
	  options. This was making a SPARSKIT test be skipped even though
	  sparskit was an available option, for example.

2015-05-14 15:13  dstrubbe

	* [r13976] src/hamiltonian/epot.F90: Bugfix to r13961 which left a
	  variable uninitialized, as caught by valgrind.

2015-05-14 15:21  dstrubbe

	* [r13977] src/basic/profiling.F90: More checks on profiling, which
	  could have detected clearly the problem fixed in r13963 (which I
	  had noticed only because of valgrind),
	  as well as possible mistmatched profiling_in/profiling_out calls.

2015-05-14 16:03  xavier

	* [r13978]
	  testsuite/complex_scaling/01-harmonic-oscillator.01-independent.inp,
	  testsuite/complex_scaling/01-harmonic-oscillator.02-complex_lda.inp,
	  testsuite/complex_scaling/02-1dwell.01-lda.inp,
	  testsuite/complex_scaling/03-stark.01-1d.inp,
	  testsuite/components/01-derivatives_1d.01.inp,
	  testsuite/components/01-derivatives_1d.02-fortran.inp,
	  testsuite/components/02-derivatives_2d.01.inp,
	  testsuite/components/03-derivatives_3d.01.inp,
	  testsuite/components/04-hartree_3d_cg.01-cg_corrected.inp,
	  testsuite/components/05-hartree_3d_fft.01-fft.inp,
	  testsuite/components/05-hartree_3d_fft.02-fft_corrected.inp,
	  testsuite/components/06-hartree_3d_isf.01-isf.inp,
	  testsuite/components/07-cholesky_serial.01-real.inp,
	  testsuite/components/07-cholesky_serial.02-complex.inp,
	  testsuite/components/08-mgs.01-real.inp,
	  testsuite/components/08-mgs.02-complex.inp,
	  testsuite/components/09-qr.01-real.inp,
	  testsuite/components/09-qr.02-complex.inp,
	  testsuite/components/10-hartree_pfft.01-fft.inp,
	  testsuite/components/10-hartree_pfft.02-fft_corrected.inp,
	  testsuite/components/11-hartree_cl.01-fft.inp,
	  testsuite/components/12-hartree_direct_3d.01.inp,
	  testsuite/components/13-hartree_3d_mg.01-multigrid.inp,
	  testsuite/components/14-center-geom.01-run.inp,
	  testsuite/components/15-cholesky_parallel.01-real.inp,
	  testsuite/components/15-cholesky_parallel.02-complex.inp,
	  testsuite/components/16-hartree_3d_libisf.01-libisf.inp,
	  testsuite/components/16-hartree_3d_libisf.02-libisf.inp,
	  testsuite/components/17-recipe.inp,
	  testsuite/components/18-interpolation.01-1d.inp,
	  testsuite/components/18-interpolation.02-2d.inp,
	  testsuite/components/18-interpolation.03-3d.inp,
	  testsuite/finite_systems_1d/01-hydrogen.01-ground_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.02-excited_state.inp,
	  testsuite/finite_systems_1d/01-hydrogen.03-dummy.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.01-ground_state-IP_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp,
	  testsuite/finite_systems_1d/02-neon_mpi.03-td_calc-kli_par_states.inp,
	  testsuite/finite_systems_1d/03-neon.01-gs.inp,
	  testsuite/finite_systems_1d/03-neon.02-unocc.inp,
	  testsuite/finite_systems_1d/03-neon.03-casida.inp,
	  testsuite/finite_systems_1d/09-morse.01-gs.inp,
	  testsuite/finite_systems_1d/09-morse.02-unocc.inp,
	  testsuite/finite_systems_1d/09-morse.03-td.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.01-ground_state.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.02-hartree.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.03-hartree+xc.inp,
	  testsuite/finite_systems_2d/01-quadratic_box.04-spin_polarized.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.01-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.02-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.03-ground_state.inp,
	  testsuite/finite_systems_2d/02-fock-darwin.04-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.01-ground_state.inp,
	  testsuite/finite_systems_2d/03-helium_atom.02-ground_state.inp,
	  testsuite/finite_systems_2d/04-biot_savart.01-gs.inp,
	  testsuite/finite_systems_2d/05-spin_precession.01-ground_state.inp,
	  testsuite/finite_systems_2d/05-spin_precession.02-time_propagation.inp,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp,
	  testsuite/finite_systems_2d/07-modelmb.02-td.inp,
	  testsuite/finite_systems_2d/08-gdlib.01-gs.inp,
	  testsuite/functionals/01-xc_1d.01-wfs-lda.inp,
	  testsuite/functionals/01-xc_1d.02-wfs-hf.inp,
	  testsuite/functionals/01-xc_1d.lda_csc.inp,
	  testsuite/functionals/01-xc_1d.oep_exx.inp,
	  testsuite/functionals/01-xc_1d.oep_kli.inp,
	  testsuite/functionals/02-xc_2d.00-hartree.inp,
	  testsuite/functionals/02-xc_2d.01-hf.inp,
	  testsuite/functionals/02-xc_2d.gga_b86.inp,
	  testsuite/functionals/02-xc_2d.gga_b86_mgc.inp,
	  testsuite/functionals/02-xc_2d.gga_b88.inp,
	  testsuite/functionals/02-xc_2d.gga_pbe.inp,
	  testsuite/functionals/02-xc_2d.lda_amgb.inp,
	  testsuite/functionals/02-xc_2d.lda_prm.inp,
	  testsuite/optimal_control/01-asym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/01-asym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/01-asym_doublewell.03-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.04-oct_run.inp,
	  testsuite/optimal_control/01-asym_doublewell.05-oct_run.inp,
	  testsuite/optimal_control/02-sym_doublewell.01-ground_state.inp,
	  testsuite/optimal_control/02-sym_doublewell.02-unocc.inp,
	  testsuite/optimal_control/02-sym_doublewell.03-oct.inp,
	  testsuite/optimal_control/03-localtarget.01-gs.inp,
	  testsuite/optimal_control/03-localtarget.02-oct.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/03-localtarget.04-gs-mp.inp,
	  testsuite/optimal_control/03-localtarget.05-oct-mp.inp,
	  testsuite/optimal_control/04-box.01-ground_state.inp,
	  testsuite/optimal_control/04-box.02-unocc.inp,
	  testsuite/optimal_control/04-box.03-oct_long.inp,
	  testsuite/optimal_control/04-box.04-oct_long.inp,
	  testsuite/optimal_control/04-box.05-oct_long.inp,
	  testsuite/optimal_control/04-box.06-oct_long.inp,
	  testsuite/optimal_control/04-box.07-oct_long.inp,
	  testsuite/optimal_control/04-box.08-oct_long.inp,
	  testsuite/optimal_control/05-adw.01-ground_state.inp,
	  testsuite/optimal_control/05-adw.02-unocc.inp,
	  testsuite/optimal_control/05-adw.03-filter_fixed.inp,
	  testsuite/optimal_control/05-adw.04-filter_indirect.inp,
	  testsuite/optimal_control/06-zbr98.01-ground_state.inp,
	  testsuite/optimal_control/06-zbr98.02-oct.inp,
	  testsuite/optimal_control/07-qoct+tddft.01-ground_state.inp,
	  testsuite/optimal_control/07-qoct+tddft.02-oct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.01-ground_state.inp,
	  testsuite/optimal_control/09-density+current.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp,
	  testsuite/optimal_control/10-current.01-ground_state.inp,
	  testsuite/optimal_control/10-current.02-oct.inp,
	  testsuite/optimal_control/11-classical.01-ground_state.inp,
	  testsuite/optimal_control/11-classical.02-oct.inp,
	  testsuite/optimal_control/12-spintarget.01-ground_state.inp,
	  testsuite/optimal_control/12-spintarget.02-oct.inp,
	  testsuite/periodic_systems/01-free_electrons.01-ground_state.inp,
	  testsuite/periodic_systems/01-free_electrons.02-unocc.inp,
	  testsuite/periodic_systems/02-cosine_potential.01-ground_state.inp,
	  testsuite/periodic_systems/02-cosine_potential.02-unocc.inp,
	  testsuite/photo_electron/01-h1d_lin.01-mask.inp,
	  testsuite/photo_electron/01-h1d_lin.02-ba.inp,
	  testsuite/photo_electron/02-restart.01-ba.inp,
	  testsuite/photo_electron/02-restart.02-restart_ba.inp,
	  testsuite/photo_electron/03-h1d_ati.01.inp,
	  testsuite/photo_electron/04-nfft.01-ba.inp,
	  testsuite/photo_electron/04-nfft.02-ati.inp,
	  testsuite/real_time/11-tdmagnetic.01-gs.inp,
	  testsuite/real_time/11-tdmagnetic.02-unocc.inp,
	  testsuite/real_time/11-tdmagnetic.03-td.inp,
	  testsuite/real_time/18-hhg.01-gs.inp,
	  testsuite/real_time/18-hhg.02-td.inp: Removed the
	  FilterPotentials option from input files that do not use
	  pseudopotentials.

2015-05-14 16:04  xavier

	* [r13979] liboct_parser/string_f.h: Added 3 extra bytes to the
	  fortran to c string conversion routine to
	  avoid false positives with valgrind when calling strlen.

2015-05-14 18:06  xavier

	* [r13983] testsuite/linear_response/04-vib_modes.test: Updated the
	  results for the vibrational modes test due to [13959].

2015-05-14 19:19  dstrubbe

	* [r13984] src/td/spectrum.F90: Fix to valgrind errors about use of
	  uninitialized data in oct-propagation_spectrum, by rearranging
	  loops. The error seems like a problem with valgrind or the
	  compiler (perhaps in optimization) to be honest, since it is the
	  loop variable 'it' that is at fault. Anyway, this reordering
	  seems more natural to me anyway.
	  
	  {{{
	  Using input file :
	  ../../testsuite/real_time/12-absorption.04-spectrum.inp
	  ==483== Conditional jump or move depends on uninitialised
	  value(s)
	  ==483== at 0x427230: __spectrum_m_MOD_spectrum_cross_section
	  (spectrum.F90:618)
	  ==483== by 0x40AC2E: MAIN__ (propagation_spectrum.F90:255)
	  ==483== by 0x408C86: main (propagation_spectrum.F90:23)
	  ==483== Uninitialised value was created by a stack allocation
	  ==483== at 0x42440A: __spectrum_m_MOD_spectrum_cross_section
	  (spectrum.F90:537)
	  }}}

2015-05-14 19:34  dstrubbe

	* [r13985] src/basic/messages.F90: Fix to r13887:
	  messages_print_var_valuear should abide by the convention of the
	  other parts of the messages_print_var interface, and write to the
	  specified 'iunit' not to standard out.

2015-05-14 19:38  dstrubbe

	* [r13986] src/basic/loct.F90, src/basic/oct_gdlib_f.c,
	  src/ions/simul_box.F90: As pointed out by valgrind, an image
	  object from gdlib should be destroyed at the end to avoid a
	  memory leak.

2015-05-14 19:49  dstrubbe

	* [r13987] src/td/spectrum.F90: * Removing unnecessary indication
	  of array arguments beginning at 1.
	  * Simpler initialization of cmplxscl.
	  * More compact and analogous code for complex scaling to the
	  normal case. This comes from r10074.

2015-05-14 20:49  dstrubbe

	* [r13988] src/ions/simul_box.F90: Fixing compilation without gdlib
	  from r13986.

2015-05-14 20:55  dstrubbe

	* [r13989] src/td/spectrum.F90: Simplification of unnecessary
	  splitting of cases in spectrum_read_dipole.

2015-05-14 21:04  dstrubbe

	* [r13990] src/math/lalg_adv_lapack_inc.F90: Correcting names of
	  lapack routines in error messages.

2015-05-14 21:53  dstrubbe

	* [r13991] src/math/lalg_adv_lapack_inc.F90: * Using
	  optional_default to simplify things in some places in LAPACK
	  driver routines.
	  * Removing unnecessary space and semicolon.

2015-05-15 02:43  xavier

	* [r13992] src/states/states_io.F90: Bugfix: When all states were
	  occupied, homo_index was not initialized.

2015-05-15 15:49  dstrubbe

	* [r13993] src/math/lalg_adv.F90: * LAPACK is required, so '#ifdef
	  HAVE_LAPACK' is useless.
	  * Putting module in alphabetical order.

2015-05-15 18:02  dstrubbe

	* [r13994] src/states/modelmb_particles.F90: Initializing a
	  variable for modelmb, that was otherwise causing a conditional
	  jump depending on unitialized variable in valgrind from
	  states_end.

2015-05-15 18:49  dstrubbe

	* [r13995] src/math/lalg_adv.F90, src/math/lalg_adv_lapack_inc.F90,
	  src/math/lapack.F90: * Bugfix: the interface and calls for dgeev
	  (and sgeev) were wrong, namely the eigenvalue is split into real
	  and complex parts but only the real part was being used.
	  Fortunately the routine using this (deigensolve_nonh) seems not
	  be used anywhere. To solve this problem, I created a wrapper with
	  a complex eigenvalue array.
	  * Consolidated many of the routines of lalg_adv_lapack_inc.F90
	  into templated real/complex versions.
	  * DLAPACK/ZLAPACK macros are no longer useful, and X( ) can do
	  the job.
	  * Standardized error output formats.
	  * Moved some interfaces to lalg_adv.F90 where they could be used
	  by other routines too.
	  * deigensolve_nonh has the sort_eigenvectors functionality now
	  too.
	  * invert_lower_triangular is removed, since it is unused and only
	  a trivial modification of invert_upper_triangular (a single
	  character).

2015-05-15 20:42  dstrubbe

	* [r13996] src/math/lalg_adv_lapack_inc.F90: * Explanations of
	  error codes in LAPACK driver routines.
	  * Checking of error codes from workspace queries.
	  * Little fixes to output.
	  * Comments on where we should do workspace queries.

2015-05-15 20:43  dstrubbe

	* [r13997] src/main/casida.F90: Better speculation about causes of
	  errors in Casida.

2015-05-15 21:03  dstrubbe

	* [r13998] src/math/sort.F90, src/td/spectrum.F90: * Nicer math in
	  variable reference.
	  * Removing debug info with 'print *'

2015-05-15 21:12  dstrubbe

	* [r13999] src/td/propagator_rk.F90: * Fixing PUSH/POP's.
	  * Restoring assertions to make sure routines requiring SPARSKIT
	  are not called without it.

2015-05-15 21:17  dstrubbe

	* [r14000] src/utils/vibrational.F90: Call to
	  messages_obsolete_variable that should have been added in r13864.

2015-05-15 21:28  dstrubbe

	* [r14002] src/math/fft.F90, src/td/pes_mask_out_inc.F90: * A
	  variable supposedly optional was being used always in an ASSERT.
	  Now it is no longer optional.
	  * Assert presence of optional variable in the case it is used.

2015-05-15 21:49  dstrubbe

	* [r14003] src/main/run.F90: Do not call 'frozen' routines when not
	  using that code.

2015-05-15 21:50  dstrubbe

	* [r14004] src/system/v_ks.F90: Bugfix: xc_end was not called when
	  doing hybrids with the Hartree-Fock TheoryLevel, causing a memory
	  leak.

2015-05-15 23:16  dstrubbe

	* [r14005] src/states/modelmb_exchange_syms_inc.F90,
	  src/td/pes_flux.F90: * Please do not use & or other characters in
	  continuation lines.
	  * Do not break up a string literal with a continuation.
	  * Missing deallocation.

2015-05-15 23:19  dstrubbe

	* [r14006] src/grid/mesh_init.F90, src/td/pes_mask.F90: Spelling in
	  comments and documentation.

2015-05-15 23:26  dstrubbe

	* [r14007] src/hamiltonian/hamiltonian.F90: Mistaken word.

2015-05-15 23:38  dstrubbe

	* [r14008] testsuite/oct-run_regression_test.pl: * Making common
	  skip routine in testsuite Perl script, making sure working
	  directories are deleted when appropriate.
	  * Standardizing output when skipping.
	  * Removing obsolete logic, right before setting command line,
	  regarding validity of mpiexec: this is now checked at the
	  beginning of the script.

2015-05-15 23:39  dstrubbe

	* [r14009] src/hamiltonian/epot.F90: Unused variable.

2015-05-15 23:51  dstrubbe

	* [r14010] testsuite/oct-run_regression_test.pl: Stop testsuite
	  with error message if copy operation fails. This has happened on
	  the buildslaves when the disk is full, for example.

2015-05-15 23:52  dstrubbe

	* [r14011] src/system/eigen_arpack.F90,
	  testsuite/complex_scaling/01-harmonic-oscillator.test,
	  testsuite/complex_scaling/02-1dwell.test,
	  testsuite/complex_scaling/03-stark.test: Comments and warning
	  about PARPACK support, which is not being used on any of the
	  buildslaves (because it does not seem to work).

2015-05-16 01:34  dstrubbe

	* [r14012] src/ions/read_coords.F90: Bugfix: dim to MAX_DIM was not
	  initialized for atomic coordinates from ReducedCoordinates, which
	  was showing up in valgrind.

2015-05-18 11:31  micael

	* [r14015] src/hamiltonian/kick.F90, src/system/output_h_inc.F90,
	  src/td/td.F90, src/td/td_write.F90: Simplified some interfaces:
	  * Changed intents from inout to in.
	  * No need to pass entire data strucutures when only a single
	  component is actually needed.

2015-05-18 11:52  micael

	* [r14016] src/td/td.F90: Kick was initialized twice, once in
	  epot_init and another one in td_init. Now it is only initialized
	  in epot_init.

2015-05-18 15:18  micael

	* [r14017] src/hamiltonian/epot.F90, src/hamiltonian/kick.F90,
	  src/utils/local_multipoles.F90: * Added routines to copy and end
	  the kick.
	  * kick_end is now called in epot_end and in the local_multipoles
	  utility. Note that there are still several other places where the
	  memory associated with the kick is not deallocated properly.
	  * Fixed indentation in a couple of places.
	  * Remove a use statement that was not needed anymore.

2015-05-18 21:36  dstrubbe

	* [r14032] m4/arch.m4, src/grid/nl_operator.F90: Bugfix: the
	  --disable-vectors option did not work. Now it does, and there is
	  only one of them, and it causes the default for OperateDouble to
	  be set sensibly. Also, the unused conditional COMPILE_VEC is
	  removed, which was confusing.

2015-05-18 21:46  dstrubbe

	* [r14033] m4/arch.m4: * Remove unused variable 'assembler'.
	  * Remove unused OCT_ARCH_ variables.
	  * Only set vector_type if that vector operation is actually
	  usable.

2015-05-19 15:31  dstrubbe

	* [r14034] src/basic/Makefile.am, src/basic/io_csv.c,
	  src/basic/io_csv.h, src/basic/io_csv_f.F90: Removing file
	  io_csv.h, which has no meaningful difference from io_binary.h, so
	  we can just use that one.

2015-05-19 15:34  dstrubbe

	* [r14035] src/basic/io_binary.c: Changing single-letter variables.

2015-05-19 15:58  dstrubbe

	* [r14036] src/basic/io_binary.c: Removing unused function.

2015-05-19 16:07  dstrubbe

	* [r14037] src/td/spectrum.F90: More documentation on
	  PropagationSpectrum variables.

2015-05-19 16:10  dstrubbe

	* [r14038] src/system/v_ks.F90: Better word choice in comment.

2015-05-19 16:16  dstrubbe

	* [r14039] src/basic/io_binary.c: Bugfix: a variety of memory leaks
	  or double frees were possible in io_binary routines.
	  Specifically, an occasional problem with
	  real_time/05-time_propagation_fast_md.inp on erlo_gnu_mpich_long
	  was a double free when free(hp) was called in get_info_binary,
	  and presumably io_read_header had already freed it.

2015-05-19 16:57  dstrubbe

	* [r14040] src/td/spectrum.F90: * It is childish to allow input of
	  PropagationSpectrumTransform for complex scaling when there is
	  only one acceptable choice.
	  * Comment on sum rules.
	  * Better header alignment for dipole power.

2015-05-19 17:40  dstrubbe

	* [r14041] src/td/spectrum.F90,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test,
	  testsuite/real_time/17-absorption-spin_symmetry.test: * Do not
	  write the results from two sum rules in oct-propagation_spectrum
	  unless we are using a density kick and sin transform, as the
	  implementation of the sum rules assumes that (though they could
	  be generalized).
	  * Clearer label for the polarizability.

2015-05-19 18:18  dstrubbe

	* [r14042] testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test: Re-enabling sum
	  rule matches for compressed sensing tests: those seem to work
	  unlike the rest of the matches.

2015-05-19 18:24  dstrubbe

	* [r14043]
	  testsuite/real_time/12-absorption.07-spectrum_cosine.inp,
	  testsuite/real_time/12-absorption.08-spectrum_exp.inp,
	  testsuite/real_time/12-absorption.test,
	  testsuite/real_time/Makefile.am: Test cosine and exponential
	  transform modes of oct-propagation_spectrum.

2015-05-19 18:40  xavier

	* [r14044] src/basic/write_iter_low.c: Allocated a string with
	  extra bytes to avoid false positives in valgrind.

2015-05-19 20:54  dstrubbe

	* [r14045] testsuite/real_time/12-absorption.test,
	  testsuite/real_time/14-absorption-spinors.test: Setting center
	  and precision for compressed-sensing matches (in short runs) via
	  buildbot_query.pl.

2015-05-20 01:04  xavier

	* [r14046] src/system/hirshfeld.F90: Implemented the calculation of
	  Hirshfeld volumes.

2015-05-20 06:51  micael

	* [r14047] src/math/compressed_sensing.F90: Simplified logic in
	  compressed_sensing_init, as only one of the options of a case
	  construct would ever be executed.

2015-05-20 08:03  micael

	* [r14048] src/td/spectrum.F90: * Spectrum input options are now
	  printed to the screen.
	  * SpectrumSignalNoise is only parsed if compressed sensing is
	  used.

2015-05-20 12:02  micael

	* [r14049] src/math/compressed_sensing.F90, src/td/spectrum.F90:
	  Renaming the exponential transform to Laplace transform, as this
	  is less ambiguous (a Fourier transform can also be written with
	  an exponential in case one wants both real and imaginary parts).

2015-05-20 15:31  dstrubbe

	* [r14050] testsuite/real_time/13-absorption-spin.test: Setting
	  reference and precision for new compressed-sensing matches in
	  long-run.

2015-05-21 04:26  xavier

	* [r14057] src/grid/Makefile.am, src/grid/hirshfeld.F90,
	  src/system/Makefile.am, src/system/hirshfeld.F90: Moved the
	  hirshfeld_m module to src/grid.

2015-05-21 04:52  xavier

	* [r14058] src/grid/Makefile.am, src/grid/hirshfeld.F90,
	  src/hamiltonian/Makefile.am, src/hamiltonian/hirshfeld.F90: Moved
	  hirshfeld_m to hamiltonian_m. This fixes compilation.

2015-05-21 05:37  xavier

	* [r14059] src/hamiltonian/Makefile.am, src/hamiltonian/energy.F90,
	  src/hamiltonian/vdw_ts.F90, src/system/v_ks.F90: Started the
	  implementation of the Tkatchenko-Scheffler van der Waals
	  functional.

2015-05-21 06:14  xavier

	* [r14060] src/hamiltonian/hirshfeld.F90: Bugfix: fixed the intent
	  for a parameter.

2015-05-21 13:51  philipp

	* [r14061] src/hamiltonian/Makefile.am,
	  src/hamiltonian/boundaries.F90,
	  src/hamiltonian/boundaries_abs.F90,
	  src/hamiltonian/hamiltonian.F90: Copying some routines into
	  boundary module.

2015-05-21 14:08  philipp

	* [r14062] src/hamiltonian/boundaries_abs.F90: renaming options
	  mask and cap.

2015-05-21 18:26  xavier

	* [r14063] src/hamiltonian/hirshfeld.F90: The hirshfeld_t object
	  can be made private.

2015-05-22 04:48  xavier

	* [r14064] src/species/ps.F90: The atomic density is now stored in
	  the ps_t object.

2015-05-23 17:52  xavier

	* [r14065] src/species/ps.F90: Two new functions:
	  * ps_has_density: returns true if the pseudopotential has the
	  atomic
	  density.
	  * ps_density_volume: returns the volume associated to the
	  pseudopotential density.

2015-05-26 15:20  dstrubbe

	* [r14066] src/hamiltonian/vdw_ts.F90: Added missing PUSH/POPs and
	  call to messages_experimental.

2015-05-26 15:34  dstrubbe

	* [r14067] src/hamiltonian/boundaries.F90: * Proper call for
	  messages_not_implemented.
	  * Syntax highlighting footer.

2015-05-26 15:58  dstrubbe

	* [r14068] src/hamiltonian/boundaries_abs.F90: * Doxygen comment.
	  * Removed redundant statement of default.
	  * Better variable reference formatting.
	  * Proper call to messages_not_implemented.
	  * Syntax highlighting footer.

2015-05-26 17:25  dstrubbe

	* [r14069] testsuite/buildbot_query.pl: Clearer warning message.

2015-05-26 17:28  dstrubbe

	* [r14070] testsuite/linear_response/04-vib_modes.test,
	  testsuite/linear_response/06-vib_modes_fd.test: Updating
	  reference values for Vibrational Frequency, after valgrind
	  builder finished and could give its input on slightly different
	  values.

2015-05-26 18:06  dstrubbe

	* [r14071] src/sternheimer/kdotp_calc.F90: Use of string
	  concatenation rather than 'write' helps avoid an error in kdotp
	  runs from valgrind: "Source and destination overlap in memcpy"

2015-05-26 19:10  dstrubbe

	* [r14072] src/species/ps.F90: Do not allocate ps%k unless it will
	  be used (HGH only). Then we will not get a valgrind error about
	  trying to write its uninitialized contents from ps_debug.

2015-05-26 21:07  dstrubbe

	* [r14073] src/scf/rdmft.F90: Using 'sqrt' instead of '**M_HALF'
	  should be more efficient.

2015-05-26 23:26  dstrubbe

	* [r14074] src/scf/mix.F90, src/scf/mix_inc.F90: Enhancement to
	  Broyden mixing for complex Sternheimer calculations. When mixing
	  was generalized to complex functions in r2239, what had been a
	  transpose was left that way. However, based on the Johnson paper,
	  it seems clear that it should be a Hermitian conjugate, for
	  consistency with the standard complex dot product, and also the
	  fact that the place the transpose is used is just a
	  simplification of the full formula. At any rate, empirically I
	  find that this change reduces the number of SCF iterations and
	  Hamiltonian applications required by 10-25% in Sternheimer
	  calculations. It also still works for complex scaling. (The
	  corresponding modification to GR-Pulay seems to prevent
	  convergence though.)
	  
	  {{{
	  testsuite/linear_response/02-h2o_pol_lr.03_h2o_dyn_pol_cmplx.inp
	  (from scratch)
	  #label conj iters trans iters conj H apps trans H apps
	  x 0.0 11 11 532 532
	  y 0.0 12 12 560 560
	  z 0.0 11 11 680 680
	  ==============================================================
	  x 0.1 8 11 784 1004
	  y 0.1 10 11 964 1032
	  z 0.1 11 14 1604 1876
	  ==============================================================
	  x -0.2 9 13 1052 1428
	  y -0.2 11 13 1240 1400
	  z -0.2 13 16 2280 2772
	  ==============================================================
	  SUM for > 0 62 78 7924 9512
	  
	  testsuite/periodic_systems/06-h2o_pol_lr.03_emresp.inp
	  #label conj iters trans iters conj H apps trans H apps
	  x 0.0 12 12 1612 1612
	  y 0.0 12 12 2012 2012
	  z 0.0 15 15 2556 2556
	  ==============================================================
	  x 0.1 9 15 2512 4516
	  y 0.1 11 11 3460 3396
	  z 0.1 13 16 4840 6040
	  ==============================================================
	  x -0.2 10 13 3048 4036
	  y -0.2 12 14 4040 4736
	  z -0.2 11 14 4876 6272
	  ==============================================================
	  
	  testsuite/periodic_systems/04-silicon.03_emresp.inp
	  #label conj iters trans iters conj H apps trans H apps
	  x 0.0 15 15 13772 13772
	  y 0.0 16 16 14300 14300
	  z 0.0 15 15 14344 14344
	  ==============================================================
	  x 0.1 16 19 38700 42424
	  y 0.1 16 20 38036 43604
	  z 0.1 16 19 38244 42896
	  ==============================================================
	  }}}

2015-05-26 23:39  dstrubbe

	* [r14075] src/td/propagator_etrs.F90: Bugfix: misuse of one-line
	  if with SAFE_ALLOCATE macro. This caused an array access out of
	  bounds with real_time/06-caetrs.03-kick-tp1.inp when I set
	  ProfilingMode = prof_memory_full.

2015-05-27 02:21  dstrubbe

	* [r14076] src/states/states_restart.F90: Bugfix: memory leak, two
	  arrays were not deallocated in states_load.

2015-05-27 02:25  dstrubbe

	* [r14077] src/grid/mesh_batch_inc.F90: Bugfix: memory leak,
	  recv_buffer was not deallocated. Made treatment of send_buffer
	  more comparable.

2015-05-27 02:38  dstrubbe

	* [r14078] src/basic/ialist.F90: Renaming 'old_head' to 'ptr' (same
	  as the name when it is allocated) removes the major source of
	  false positives from memory profiling and oct-check_deallocs.

2015-05-27 02:48  dstrubbe

	* [r14079] src/poisson/poisson.F90: Bugfix: memory leak, two arrays
	  were not deallocated from poisson_slave_work.

2015-05-27 02:53  dstrubbe

	* [r14080] src/main/run.F90: Bugfix: memory leaks. Most destructors
	  were not called by the slave processes since they exited the run
	  routine prematurely.

2015-05-27 02:58  dstrubbe

	* [r14081] src/main/run.F90: Fixing indentation after previous
	  commit, and consolidating logic for poisson_async_init and
	  poisson_async_end.

2015-05-27 03:01  dstrubbe

	* [r14082] src/main/run.F90: Removing unnecessary preprocessor
	  directives. The routines being hidden by HAVE_MPI2 either do
	  nothing, or wouldn't be called anyway, when MPI2 is not
	  available.

2015-05-27 06:00  xavier

	* [r14083] src/hamiltonian/hirshfeld.F90,
	  src/hamiltonian/vdw_ts.F90, src/species/ps.F90,
	  src/system/v_ks.F90: Implemented the calculation of the vdW
	  coefficients for the atoms in
	  the system.

2015-05-27 15:16  dstrubbe

	* [r14095] src/main/invert_ks.F90,
	  src/states/modelmb_exchange_syms.F90: * More standard module
	  procedure list.
	  * Missing PUSH/POP's.
	  * Restoring FIXME regarding density input for KS inversion.

2015-05-27 16:38  xavier

	* [r14096] src/hamiltonian/hirshfeld.F90,
	  src/hamiltonian/vdw_ts.F90, src/system/energy_calc.F90,
	  src/system/v_ks.F90: Calculation of the vdW energy. Testing is
	  required.

2015-05-27 18:34  dstrubbe

	* [r14097] src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90: The phase is always complex,
	  and should be declared as such.

2015-05-27 18:39  dstrubbe

	* [r14098] src/hamiltonian/hamiltonian.F90: * Removing unnecessary
	  temporary variable.
	  * Using hm%d instead of st%d for consistency.

2015-05-27 18:44  xavier

	* [r14099] src/species/ps.F90: Fix in the calculation of the
	  pseudopotential atomic densities.

2015-05-27 18:54  dstrubbe

	* [r14100] src/scf/mix_inc.F90: * Clearer variable names.
	  * Vector sum instead of loop.
	  * Including a(i,i) terms in double loop for a(i,j) since formula
	  is the same.
	  * Formatting.

2015-05-27 20:04  xavier

	* [r14101] src/hamiltonian/vdw_ts.F90: * Small fix in TS vdW.
	  * Improved debug output.

2015-05-27 20:44  dstrubbe

	* [r14102] src/states/states_dim.F90: Explicit allocation instead
	  of the uninstrumented loct_pointer_copy removes a false positive
	  of non-deallocated memory from profiling.

2015-05-27 21:03  dstrubbe

	* [r14103] scripts/oct-check_deallocs, src/basic/profiling.F90: *
	  Comment on problematic nature of our profiling with OpenMP.
	  * Header line for memory profiling files.
	  * More detail on lack of matched allocations and deallocations.
	  * Bugfix: the memory log upon allocation showed the total memory
	  according to profiling before the allocation, while all other
	  data was for after the allocation. Now it is all for after the
	  allocation.
	  * oct-check_deallocs shows number of allocations and
	  deallocations.

2015-05-27 21:14  dstrubbe

	* [r14104] testsuite/real_time/06-caetrs.03-kick-tp1.inp: Enabling
	  profiling on another test.

2015-05-27 22:21  dstrubbe

	* [r14105] m4/yaml.m4: Removing unused conditionals.

2015-05-27 22:25  dstrubbe

	* [r14106] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Fixing allocations
	  involving MAX_DIM. We should only allocate and operate on the
	  meaningful dimensions of the calculation at hand. This may be
	  responsible for some floating point exceptions in the hopper
	  buildslave.

2015-05-27 22:29  dstrubbe

	* [r14107] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/pcm.F90, src/system/magnetic.F90,
	  src/system/output_states_inc.F90: More fixing allocations
	  involving MAX_DIM. We should only allocate and operate on the
	  meaningful dimensions of the calculation at hand. This may be
	  responsible for some floating point exceptions in the hopper
	  buildslave.

2015-05-27 22:44  dstrubbe

	* [r14108] src/basic/mpi_debug.F90: Bugfix: there was an inadequate
	  attempt to avoid division by zero in MPI debug info.

2015-05-27 23:11  dstrubbe

	* [r14109] src/utils/photoelectron_spectrum.F90: Unused variable.

2015-05-27 23:13  dstrubbe

	* [r14110] src/grid/par_vec.F90: Only write meaningful dimensions
	  in debug partition output.

2015-05-27 23:14  dstrubbe

	* [r14111] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Fixes to r14106:
	  magnetic fields need the third dimension when the system is 2D.

2015-05-28 02:16  dstrubbe

	* [r14112] src/grid/mesh_function_inc.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/projector.F90, src/td/td_write.F90: Fixes and
	  better job on r14106:
	  * vector potentials need only be to size sb%dim.
	  * get_vec_pot routines take result as argument, for flexibility
	  in giving appropriate size.
	  * explicit bounds for vector expressions.
	  * comments and assert to clarify dimensionalities.

2015-05-28 03:42  dstrubbe

	* [r14113] src/td/propagator_expmid.F90: Fix to r14112: forgot to
	  update one file.

2015-05-28 06:19  xavier

	* [r14114] src/hamiltonian/vdw_ts.F90: A vdW parameter had the
	  wrong value.

2015-05-28 14:26  micael

	* [r14115] src/scf/lcao_inc.F90: Initializing eigenvalues of states
	  above the number of available atomic orbitals to M_ZERO instead
	  of HUGE(M_ONE) to avoid an overflow when calculating the entropy.

2015-05-28 16:07  micael

	* [r14117] src/scf/lcao_inc.F90, src/states/smear.F90: * Reverting
	  14115
	  * Avoiding overflow directly in the smear_calc_entropy routine.

2015-05-28 17:07  dstrubbe

	* [r14118] testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test: Updating reference
	  values and precision for compressed sensing matches, which were
	  changed very slightly due to r14100 somehow.

2015-05-28 17:30  dstrubbe

	* [r14119] testsuite/real_time/13-absorption-spin.test,
	  testsuite/real_time/14-absorption-spinors.test: Further
	  adjustments to compressed-sensing matches after r14100.

2015-05-28 17:42  dstrubbe

	* [r14120] src/sternheimer/em_resp.F90: Missing :: in declarations.

2015-05-28 17:49  dstrubbe

	* [r14121] src/states/smear.F90: The entropy for semiconductors
	  should be handled along the lines of fixed occupations, not real
	  smearing, since there is not really a temperature or Fermi level.
	  The result is exactly zero anyway unless there are fractional
	  occupations. This too will help avoid overflows from M_HUGE
	  initial eigenvalues.

2015-05-28 18:48  dstrubbe

	* [r14122] src/poisson/poisson_corrections.F90,
	  src/poisson/poisson_fmm.F90: Replacing instances of MAX_DIM with
	  the actual dimension in use, for Poisson routines.

2015-05-28 18:57  dstrubbe

	* [r14123] src/states/modelmb_density_matrix_inc.F90,
	  src/states/modelmb_exchange_syms_inc.F90: Use static allocation
	  for simple arrays of size MAX_DIM, and operate only on meaningful
	  dimensions.

2015-05-28 19:12  dstrubbe

	* [r14124] src/hamiltonian/lasers.F90,
	  src/opt_control/propagation.F90,
	  src/opt_control/target_hhg_inc.F90: * Using static allocation for
	  simple array of size MAX_DIM.
	  * Dynamic allocation to actual size not MAX_DIM.
	  * Consolidating duplicated code.
	  * Only assign meaningful dimensions.

2015-05-28 19:38  dstrubbe

	* [r14125] src/hamiltonian/gauge_field.F90: The gauge_field_t
	  object now stores its dimensionality, and uses that instead of
	  MAX_DIM everywhere. This may fix the valgrind errors about use of
	  uninitialized data in the lithium test.

2015-05-28 20:29  dstrubbe

	* [r14126] src/states/modelmb_exchange_syms_inc.F90,
	  src/states/states_restart.F90: Variables: use them or lose them.

2015-05-28 20:33  dstrubbe

	* [r14127] liboct_parser/symbols.c: One element was missing in the
	  initialization of an array for the parser. I think this is a
	  purely formal problem.

2015-05-28 22:36  xavier

	* [r14128] src/basic/global.F90, src/basic/profiling.F90,
	  src/include/global.h: Data collecting routines (debugging and
	  profiling)
	  are disabled when called from an OpenMP region.

2015-05-28 23:06  xavier

	* [r14129] src/system/preconditioners.F90,
	  testsuite/periodic_systems/04-silicon.01-gs.inp,
	  testsuite/periodic_systems/04-silicon.02-kdotp.inp,
	  testsuite/periodic_systems/04-silicon.03-emresp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.01_gs.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.02_kdotp.inp,
	  testsuite/periodic_systems/06-h2o_pol_lr.03_emresp.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/10-berkeleygw.02-unocc.inp,
	  testsuite/periodic_systems/11-silicon_force.test,
	  testsuite/periodic_systems/12-boron_nitride.test: Bugfix: The
	  filter preconditioner continues to cause problems with
	  some periodic systems, so I disabled it for those systems. I
	  updated
	  the tests accordingly.

2015-05-29 01:05  xavier

	* [r14130] src/hamiltonian/vdw_ts.F90: For some reason the IBM
	  compiler requires this argument to be intent(inout) to compile.

2015-05-29 01:09  xavier

	* [r14131] src/system/v_ks.F90: The energy object is accessed
	  directly instead of through a pointer, to keep the IBM compiler
	  happy.

2015-05-29 01:09  xavier

	* [r14132] src/grid/submesh.F90: Added a profiling region for
	  submesh_bcast.

2015-05-29 01:10  xavier

	* [r14133] src/hamiltonian/ion_interaction.F90: OpenMP
	  parallelization in the ion-ion interaction.

2015-05-29 02:11  dstrubbe

	* [r14134] src/system/eigen_rmmdiis_inc.F90,
	  src/system/forces_inc.F90: Bugfix: memory leak in RMMDIIS.

2015-05-29 03:02  dstrubbe

	* [r14135] src/hamiltonian/pcm.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90: Adding lower bounds to
	  SAFE_ALLOCATE, for the benefit of profiling.

2015-05-29 03:05  dstrubbe

	* [r14136] src/td/potential_interpolation.F90,
	  src/td/propagator_rk.F90, src/utils/local_multipoles.F90,
	  src/utils/local_write.F90: More lower bounds for SAFE_ALLOCATE.

2015-05-29 03:12  dstrubbe

	* [r14137] src/ions/simul_box.F90, src/main/casida_inc.F90,
	  src/math/sgfft.F90, src/math/tdfunction.F90: Lower bounds for
	  SAFE_ALLOCATE.

2015-05-29 03:18  dstrubbe

	* [r14138] src/poisson/poisson_isf.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/kdotp_calc_inc.F90:
	  Lower bounds for SAFE_ALLOCATE.

2015-05-29 03:45  dstrubbe

	* [r14139] src/basic/profiling.F90: * More detailed description of
	  ProfilingMode options.
	  * This variable is not a flag.

2015-05-29 04:09  dstrubbe

	* [r14140] src/basic/blacs_proc_grid.F90, src/basic/multicomm.F90:
	  I am suspicious of the use of logical to pass to a C integer
	  type, as called for in MPI routines. I think it is safer to use
	  Fortran integers. And it might solve this problem in
	  branches/5.0.x:
	  {{{
	  Using input file :
	  ../../testsuite/real_time/06-caetrs.03-kick-tp1.inp
	  Executing: cd /tmp/octopus.CgmGFg; /opt/g95/bin/mpiexec -mca btl
	  sm,self -n 6
	  /home/pulpo/buildbot/lascar_x86_64_g95_openmpi/build/_build/testsuite/../src/main/octopus_mpi
	  > out
	  [lascar:27224] *** An error occurred in MPI_Cart_create
	  [lascar:27224] *** on communicator MPI COMMUNICATOR 4 SPLIT FROM
	  3
	  [lascar:27224] *** MPI_ERR_ARG: invalid argument of some other
	  kind
	  [lascar:27224] *** MPI_ERRORS_ARE_FATAL (your MPI job will now
	  abort)
	  }}}
	  Ref:
	  https://www.open-mpi.org/community/lists/users/2009/10/10914.php

2015-05-29 04:13  dstrubbe

	* [r14141] testsuite/periodic_systems/04-silicon.01-gs.inp: Fix to
	  r14129: part of line was not deleted.

2015-05-29 17:27  dstrubbe

	* [r14155] src/basic/multicomm.F90: Fix to r14140: need another
	  conversion between logical and integer.

2015-05-29 22:39  xavier

	* [r14156] src/hamiltonian/vdw_ts.F90: Added Biswajit Santra
	  (coauthor of the original quantum espresso
	  implementation) to the copyright note for Tkatchenko-Scheffler.

2015-05-30 16:12  xavier

	* [r14158] testsuite/functionals/08-vdw_ts.01-gs.inp,
	  testsuite/functionals/08-vdw_ts.test,
	  testsuite/functionals/Makefile.am: Added a test for the
	  Tkatchenko-Scheffler functional.

2015-05-30 17:07  xavier

	* [r14159] testsuite/finite_systems_3d/10-fullerene.01-gs.inp,
	  testsuite/finite_systems_3d/10-fullerene.test,
	  testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.test,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.01-gs.inp,
	  testsuite/finite_systems_3d/17-scfinlcao_alt.test,
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.02-cg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.03-cg_new.inp,
	  testsuite/finite_systems_3d/20-eigensolver.04-plan.inp,
	  testsuite/finite_systems_3d/20-eigensolver.05-evolution.inp,
	  testsuite/finite_systems_3d/20-eigensolver.06-rmmdiis.inp,
	  testsuite/finite_systems_3d/20-eigensolver.test,
	  testsuite/finite_systems_3d/24-o2-spin.01-gs.inp,
	  testsuite/finite_systems_3d/24-o2-spin.test: Added matches for
	  Hirshfeld partial charges in several tests.

2015-05-30 17:37  xavier

	* [r14160] src/hamiltonian/hirshfeld.F90: The free atomic volume is
	  now precalculated.

2015-05-30 17:53  xavier

	* [r14161] src/hamiltonian/hirshfeld.F90,
	  src/hamiltonian/vdw_ts.F90, src/system/partial_charges.F90:
	  Cleaning of the hirshfeld interface, now one function calculates
	  the
	  charge and another one the volume.

2015-05-30 19:26  xavier

	* [r14162] src/hamiltonian/hirshfeld.F90: (untested) Implementation
	  of the derivatives of the Hirshfeld volumes.

2015-06-01 17:05  dstrubbe

	* [r14163] src/hamiltonian/hirshfeld.F90: Fixing PUSH/POP's.

2015-06-01 17:08  dstrubbe

	* [r14164] src/species/ps_in_grid.F90, src/species/ps_upf.F90:
	  Removing redundant messages about angular-momentum channels for
	  UPF (they are printed elsewhere for all pseudopotential types)
	  and clarifying message.

2015-06-01 18:38  dstrubbe

	* [r14165] testsuite/linear_response/05-polarizability.test,
	  testsuite/linear_response/06-vib_modes_fd.test,
	  testsuite/real_time/13-absorption-spin.test: Updating some test
	  reference values.

2015-06-01 19:07  dstrubbe

	* [r14166] src/states/states.F90: Better math in variable
	  reference.

2015-06-01 19:14  dstrubbe

	* [r14167] src/states/states.F90: Removing unnecessary extra
	  condition in documentation and code. As the comments noted, the
	  second condition implies the first.

2015-06-01 19:21  dstrubbe

	* [r14168] src/opt_control/filter.F90: Removing unused/useless
	  variables.

2015-06-01 19:22  dstrubbe

	* [r14169] testsuite/periodic_systems/08-benzene_supercell.test:
	  Adjusting more reference values in light of r14129.

2015-06-01 20:30  dstrubbe

	* [r14172] src/states/states.F90: Bugfix to r13865: Initialize
	  uninitialized data which is being written out in the modelmb
	  test. Matthieu, please look into this a bit more, as this may be
	  hiding the problem more than solving it.

2015-06-01 21:03  xavier

	* [r14173] src/basic/multicomm.F90: Improved the output of the
	  parallelization. Now Octopus prints the
	  total number of processes.

2015-06-01 21:32  dstrubbe

	* [r14174] share/util/oct-display_partitions: Bugfix:
	  oct-display_partitions and does not work in its png plotting
	  functionality with the gnuplot 4.6.
	  {{{
	  set term png color
	  ^
	  "mesh_partitions_index.gp", line 12: unrecognized terminal option
	  }}}
	  The png doesn't seem particularly useful anyway. So, I have
	  updated the "ls" command for the current filenames, and removed
	  the png plotting, and so the script just makes the gnuplot file,
	  which you can use with an interactive terminal. Also the
	  suggested command to load didn't work.

2015-06-01 23:06  dstrubbe

	* [r14175] liboct_parser/parse.c, liboct_parser/symbols.c,
	  liboct_parser/symbols.h: Two functions in liboct_parser
	  confusingly returned their argument as well as modifying it
	  (though this return value was not used). Now they are both void
	  instead. Also, str_tolower has been simplified.

2015-06-01 23:34  dstrubbe

	* [r14176] src/td/td.F90: Bugfix: memory leaks for TransformStates.

2015-06-01 23:59  dstrubbe

	* [r14177] src/hamiltonian/epot.F90,
	  src/hamiltonian/ion_interaction.F90: Removing useless blank
	  space.

2015-06-02 00:09  dstrubbe

	* [r14178] src/hamiltonian/ion_interaction.F90: * Removing unused
	  variables.
	  * More standard Doxygen comment.
	  * Removing broken web link about Ewald summation.

2015-06-02 00:59  dstrubbe

	* [r14179] liboct_parser/liboct_parser.h, liboct_parser/parse.c,
	  liboct_parser/symbols.c, liboct_parser/symbols.h: Use 'const' for
	  un-modified arguments in liboct_parser.

2015-06-02 02:01  dstrubbe

	* [r14180] liboct_parser/liboct_parser.h, liboct_parser/parse.c:
	  The parser now stores the name of the block it is dealing with,
	  and can write that in error messages, when closing the block, and
	  for each entry that is parsed.

2015-06-02 02:24  dstrubbe

	* [r14181] testsuite/real_time/15-crank_nicolson.02-kick.inp: Use
	  TransformStates in a test. Of course, any unitary transformation
	  does not affect the results.

2015-06-02 03:29  dstrubbe

	* [r14182] liboct_parser/parse.c: Fix to r14180: one more character
	  needed.

2015-06-02 03:38  dstrubbe

	* [r14183] liboct_parser/parser_f.c: * It is no longer necessary to
	  have a static global variable (!!) in liboct_parser to keep track
	  of the block's name, since a local variable is now being used.
	  This also means that one can now open two blocks at once without
	  causing trouble.
	  * More const arguments.

2015-06-02 17:10  dstrubbe

	* [r14184] src/grid/mesh_interpolation_inc.F90, src/main/test.F90,
	  src/math/sgfft.F90, src/poisson/poisson_isf.F90,
	  src/td/propagator_rk.F90: * Unused variables and arguments.
	  * Corrected PUSH/POP's.
	  * Syntax highlighting footer.

2015-06-02 17:43  dstrubbe

	* [r14185] src/states/states_calc_inc.F90, src/td/td.F90: Noting
	  that TransformStates is not usable parallel in states.
	  'states_look_and_load' isn't but doesn't have to used.
	  'states_rotate' however has to be implemented with PBLAS for this
	  case.

2015-06-02 18:44  dstrubbe

	* [r14186]
	  testsuite/real_time/05-time_propagation.02-td_domains.inp,
	  testsuite/real_time/15-crank_nicolson.02-kick.inp: Since
	  TransformStates does not work parallel in states, it should be
	  used in the testsuite in a run that is not parallel in states.

2015-06-02 18:50  dstrubbe

	* [r14187] src/grid/derivatives.F90: Bugfix: der%zero_bc was set
	  using 3 rather than the actual dimension. Not sure if this
	  actually affects anything though.

2015-06-02 18:58  dstrubbe

	* [r14188] src/td/td.F90: * Better checking of number of rows and
	  columns in TransformStates.
	  * TransformStates now needs a square matrix, since we are using
	  only states_copy and not states_look_and_load. Being able to use
	  parallelization in states seems worth it for losing the ability
	  to exclude a few unoccupied states.

2015-06-02 19:00  dstrubbe

	* [r14190] liboct_parser/parse.c: Better error handling (rather
	  than assertions) in parser functions.

2015-06-03 01:23  xavier

	* [r14196] src/utils/Makefile.am, src/utils/conductivity.F90: Very
	  experimental utility to calculate conductivity.

2015-06-03 04:40  xavier

	* [r14197] src/hamiltonian/vdw_ts.F90, src/system/v_ks.F90: Started
	  the implementation of the derivatives of the TS vdW energy to
	  get the forces and correlation potential.

2015-06-03 09:53  umberto

	* [r14198] src/math/nfft.F90, src/math/nfft_f.c,
	  src/math/nfft_inc.F90: NFFT library cleanup and updates:
	  * support for non cubic boxes.
	  * simplified nfft forward and backward wrapper subroutines
	  * variable renaming with better agreement with NFFT name
	  conventions

2015-06-03 12:31  umberto

	* [r14199] src/td/pes.F90, src/td/pes_mask.F90: BugFix: the
	  photoemission module was returning results with flipped momenta
	  (k=-k). I have introduced this bug long ago in a goofy attempt to
	  make up with sign conventions on the vector potential (in
	  velocity gauge). It has been unnoticed for long time since in
	  many calculation the velocity maps preserve parity in momentum
	  space. I have now added a test to prevent similar errors in the
	  future.
	  

2015-06-03 12:32  umberto

	* [r14200] testsuite/photo_electron/06-2D.01-Na_gs.inp,
	  testsuite/photo_electron/06-2D.02-Na_few_cy.inp,
	  testsuite/photo_electron/06-2D.test,
	  testsuite/photo_electron/Makefile.am: Forgot to include the test
	  in my previous commit.

2015-06-03 15:24  dstrubbe

	* [r14201] src/system/output.F90: Bugfix: memory leak from
	  CurrentThroughPlane block.

2015-06-03 15:34  dstrubbe

	* [r14202] src/utils: Updating svn:ignore for new and
	  decommissioned utilities.

2015-06-03 18:09  xavier

	* [r14203] src/td/spectrum.F90: Updated an error message: the
	  'exponential' transform is now called 'laplace'.

2015-06-03 20:38  dstrubbe

	* [r14206] src/basic/loct.F90: Missing interface intent.

2015-06-03 20:45  dstrubbe

	* [r14207] src/grid/partition.F90: Use the Fortran interface rather
	  than get_info_binary which is not supposed to be public from
	  io_binary_m.

2015-06-04 16:22  dstrubbe

	* [r14208] testsuite/functionals/07-sic.test: Update reference
	  value that changed slightly with r13959.

2015-06-04 17:42  dstrubbe

	* [r14209] src/species/species.F90, src/td/pes_mask.F90: Bugfix:
	  memory leaks, two blocks were not being ended.

2015-06-04 18:06  dstrubbe

	* [r14210] testsuite/optimal_control/04-box.02-unocc.inp: Only 1
	  extra state is needed for this test, and using 5 means that the
	  specification of OCTTargetTransformStates in the following steps
	  of the calculation is incorrect as there are an insufficient
	  number of columns. (This condition was not being checked though.)

2015-06-04 18:41  dstrubbe

	* [r14211] src/td/td.F90: TransformStates:
	  * Undoing change from states_look_and_load to states_copy in
	  r14185, and corresponding change to documentation in r14188. To
	  make it work parallel in states, states_look_and_load can be
	  fixed.
	  * More informative error message.

2015-06-04 19:01  dstrubbe

	* [r14212] src/opt_control/initst.F90,
	  src/opt_control/target_gstransformation_inc.F90, src/td/td.F90:
	  Consolidating very similar code for TransformStates,
	  OCTInitialTransformStates, and OCTTargetTransformStates. This
	  fixes the memory leaks for the latter two that were fixed for the
	  first recently, improves error-handling, and guards against use
	  with states parallelization.

2015-06-04 21:30  xavier

	* [r14213] src/utils/conductivity.F90: Conductivity is calculated
	  from both the forces and the current.

2015-06-04 21:39  xavier

	* [r14214] src/hamiltonian/hamiltonian.F90, src/td/td.F90: Moved
	  the initialization of the gauge field to hamiltonian_init.

2015-06-04 22:00  xavier

	* [r14215] src/hamiltonian/gauge_field.F90, src/td/propagator.F90,
	  src/td/td.F90: The propagation of the gauge field can be selected
	  with the variable
	  GaugeFieldDynamics.

2015-06-05 00:17  xavier

	* [r14216] src/grid/derivatives_inc.F90,
	  src/grid/multigrid_inc.F90, src/hamiltonian/hamiltonian_inc.F90,
	  src/poisson/poisson_multigrid.F90, src/system/current.F90,
	  src/system/forces_inc.F90, src/system/pert_inc.F90: Changed the
	  interface for derivatives_set_bc. Now it receives a
	  boundaries_t object instead of a derivatives_t.

2015-06-05 00:54  xavier

	* [r14217] src/frozen/fio_grid.F90, src/grid/boundaries.F90,
	  src/grid/boundaries_inc.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/grid/multigrid_inc.F90,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/poisson/poisson_multigrid.F90, src/system/current.F90,
	  src/system/forces.F90, src/system/forces_inc.F90,
	  src/system/pert.F90, src/system/pert_inc.F90: Moved
	  derivatives_set_bc and derivatives_batch_set_bc to boundaries_m,
	  and renamed them to boundaries_set.

2015-06-05 01:30  xavier

	* [r14218] src/hamiltonian/gauge_field.F90: Fix in my previous
	  commit: when the gauge field dynamics is set to
	  none, the gauge field is still used.

2015-06-05 15:31  mjv500

	* [r14219] src/states/modelmb_exchange_syms_inc.F90,
	  src/system/output_modelmb_inc.F90: clean some debugging output
	  from modelmb routines.

2015-06-05 15:51  xavier

	* [r14220] src/basic/multicomm.F90, src/basic/utils.F90,
	  src/grid/grid.F90, src/grid/hypercube.F90,
	  src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh_init.F90, src/grid/symmetrizer_inc.F90,
	  src/hamiltonian/berry.F90, src/hamiltonian/born_charges.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/fxc_inc.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/kxc_inc.F90,
	  src/hamiltonian/lasers.F90, src/hamiltonian/rkb_projector.F90,
	  src/hamiltonian/scdm_inc.F90,
	  src/hamiltonian/species_pot_inc.F90, src/hamiltonian/vxc_inc.F90,
	  src/ions/ion_dynamics.F90, src/ions/kpoints.F90,
	  src/ions/periodic_copy.F90, src/ions/read_coords.F90,
	  src/ions/simul_box.F90, src/ions/symmetries.F90,
	  src/ions/vibrations.F90, src/ions/xyz_adjust.F90,
	  src/main/casida.F90, src/main/casida_inc.F90,
	  src/main/geom_opt.F90, src/main/invert_ks.F90,
	  src/main/static_pol.F90, src/main/unocc.F90, src/math/pnfft.F90,
	  src/math/sgfft.F90, src/math/tdfunction.F90,
	  src/opt_control/initst.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/poisson/lazy_8_inc.F90,
	  src/poisson/poisson_init_direct_inc.F90, src/scf/lcao_inc.F90,
	  src/scf/rdmft.F90, src/scf/scf.F90, src/species/atomic.F90,
	  src/species/species.F90, src/states/linear_response.F90,
	  src/states/linear_response_inc.F90,
	  src/states/modelmb_particles.F90, src/states/smear.F90,
	  src/states/states.F90, src/states/states_calc.F90,
	  src/states/states_calc_inc.F90, src/states/states_io.F90,
	  src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer_inc.F90, src/system/eigen_feast.F90,
	  src/system/eigen_rmmdiis_inc.F90, src/system/eigensolver.F90,
	  src/system/forces_inc.F90, src/system/magnetic.F90,
	  src/system/output.F90, src/system/output_berkeleygw_inc.F90,
	  src/system/output_h_inc.F90, src/system/output_me.F90,
	  src/system/pert_inc.F90, src/system/system.F90,
	  src/system/v_ks.F90, src/system/xc_ks_inversion.F90,
	  src/td/td_write.F90, src/utils/casida_spectrum.F90: Replaced all
	  'enddo' by 'end do'.

2015-06-05 16:37  xavier

	* [r14221] src/basic/distributed.F90, src/basic/io.F90,
	  src/basic/io_binary_f.F90, src/basic/io_binary_f_inc.F90,
	  src/basic/messages.F90, src/basic/mpi.F90,
	  src/basic/multicomm.F90, src/basic/parser.F90,
	  src/basic/profiling.F90, src/grid/basins.F90, src/grid/cube.F90,
	  src/grid/derivatives.F90, src/grid/fourier_shell.F90,
	  src/grid/grid.F90, src/grid/hypercube.F90,
	  src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh_function_inc.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/nl_operator_inc.F90,
	  src/grid/partition.F90, src/grid/submesh_inc.F90,
	  src/grid/symmetrizer_inc.F90, src/hamiltonian/berry.F90,
	  src/hamiltonian/born_charges.F90, src/hamiltonian/epot.F90,
	  src/hamiltonian/functionals.F90, src/hamiltonian/fxc_inc.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/kxc_inc.F90, src/hamiltonian/pcm.F90,
	  src/hamiltonian/projector_inc.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90, src/hamiltonian/scf_tol.F90,
	  src/hamiltonian/species_pot_inc.F90, src/hamiltonian/vxc_inc.F90,
	  src/ions/geometry.F90, src/ions/kpoints.F90,
	  src/ions/read_coords.F90, src/ions/simul_box.F90,
	  src/ions/symmetries.F90, src/ions/vibrations.F90,
	  src/ions/xyz_adjust.F90, src/main/casida.F90,
	  src/main/casida_inc.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/phonons_fd.F90,
	  src/main/run.F90, src/main/static_pol.F90, src/main/test.F90,
	  src/main/unocc.F90, src/math/compressed_sensing.F90,
	  src/math/fft.F90, src/math/lalg_adv_lapack_inc.F90,
	  src/math/math.F90, src/math/math_inc.F90, src/math/qshep.F90,
	  src/math/sgfft.F90, src/math/solvers_inc.F90,
	  src/math/sparskit.F90, src/math/splines.F90,
	  src/opt_control/controlfunction.F90, src/opt_control/initst.F90,
	  src/opt_control/target.F90,
	  src/opt_control/target_density_inc.F90, src/poisson/poisson.F90,
	  src/poisson/poisson_corrections.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_isf.F90, src/poisson/solver_1d_solve_inc.F90,
	  src/scf/ground_state.F90, src/scf/lcao.F90, src/scf/lcao_inc.F90,
	  src/scf/mix.F90, src/scf/rdmft.F90, src/scf/scf.F90,
	  src/species/atomic.F90, src/species/ps.F90,
	  src/species/ps_hgh.F90, src/species/ps_pspio_inc.F90,
	  src/species/species.F90, src/states/cmplxscl.F90,
	  src/states/linear_response.F90,
	  src/states/linear_response_inc.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/restart.F90, src/states/restart_inc.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_calc_inc.F90, src/states/states_io.F90,
	  src/states/states_restart.F90, src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/sternheimer/phonons_lr_inc.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/system/eigen_feast.F90, src/system/eigen_mg_inc.F90,
	  src/system/eigen_rmmdiis_inc.F90, src/system/eigensolver.F90,
	  src/system/elf.F90, src/system/energy_calc.F90,
	  src/system/energy_calc_inc.F90, src/system/forces_inc.F90,
	  src/system/linear_solver.F90, src/system/linear_solver_inc.F90,
	  src/system/output.F90, src/system/output_berkeleygw_inc.F90,
	  src/system/output_etsf_inc.F90, src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_me.F90, src/system/output_states_inc.F90,
	  src/system/pert.F90, src/system/pert_inc.F90,
	  src/system/subspace.F90, src/system/subspace_inc.F90,
	  src/system/system.F90, src/system/v_ks.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep_inc.F90,
	  src/system/xc_oep_x_inc.F90, src/td/pes.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90, src/td/pes_rc.F90,
	  src/td/potential_interpolation.F90, src/td/propagator_cn.F90,
	  src/td/spectrum.F90, src/td/td.F90, src/td/td_write.F90,
	  src/utils/casida_spectrum.F90, src/utils/convert.F90,
	  src/utils/oscillator_strength.F90: Replaced all 'endif' by 'end
	  if'.

2015-06-05 17:03  xavier

	* [r14222] src/grid/boundaries.F90: This should fix compilation
	  with OpenCL enabled.

2015-06-09 18:27  dstrubbe

	* [r14223] src/species/ps.F90: Removing unused components of the
	  ps_t object and their computation.

2015-06-09 19:08  dstrubbe

	* [r14224] src/species/ps.F90: * Removing unused component a_erf of
	  ps_t.
	  * Making sigma_erf a local parameter rather than a component of
	  ps_t.
	  * Adding and standardizing separators between routines.

2015-06-09 19:22  dstrubbe

	* [r14225] src/hamiltonian/epot.F90,
	  src/hamiltonian/gauge_field.F90, src/species/ps.F90: *
	  Indentation and other formatting.
	  * Unused variable.

2015-06-09 19:22  mjv500

	* [r14226] src/states/states.F90,
	  src/system/output_modelmb_inc.F90: correct modelmb printing
	  condition for no Young diagram found

2015-06-09 20:39  dstrubbe

	* [r14227] src/hamiltonian/species_pot.F90,
	  src/opt_control/initst.F90: * Remove unused variables.
	  * Make sure a routine is called only for finite systems, as
	  intended.

2015-06-09 21:01  dstrubbe

	* [r14228] testsuite/real_time/12-absorption.test,
	  testsuite/real_time/14-absorption-spinors.test: Further
	  adjustment of the unstable compressed-sensing matches.

2015-06-09 21:10  dstrubbe

	* [r14229] src/hamiltonian/species_pot.F90: Fixing mistaken
	  assertion and clarifying when the routine is used.

2015-06-09 21:19  dstrubbe

	* [r14230] src/basic/multicomm.F90, src/states/states.F90: *
	  Removing unnecessary temporary variable.
	  * Using an accessor function rather than a type component.

2015-06-10 00:00  xavier

	* [r14231] src/td/td.F90, src/td/td_write.F90: Bugfix: Since the
	  TDOutput files are used as restart information, they
	  should be written every RestartWriteInterval steps instead of
	  every OutputInterval steps. Otherwise the restart information
	  might not be
	  consistent when a TD calculation is interrupted.

2015-06-10 02:36  dstrubbe

	* [r14232] src/basic/multicomm.F90: Some assertions and debugging
	  info that may help to catch th occasional error on lascar g95
	  openmpi for 06-caetrs with MPI_Cart_create MPI_ERR_ARG.

2015-06-10 02:57  dstrubbe

	* [r14233] testsuite/functionals/04-oep.test: Updating value for
	  poorly converged OEP test, which changed slightly after r14100.

2015-06-10 08:45  philipp

	* [r14234] src/td/pes_flux.F90: Bugfix: sign of vector potential.

2015-06-10 16:41  dstrubbe

	* [r14235] src/system/v_ks.F90: Comments regarding XCKernel.

2015-06-10 17:40  dstrubbe

	* [r14236] src/td/spectrum.F90: Unused variable.

2015-06-10 19:09  dstrubbe

	* [r14237] src/grid/derivatives.F90, src/ions/simul_box.F90:
	  Bugfix: indices 1 to 3 were being used to check for
	  non-orthogonality of lattice vectors. This could cause problems
	  if MAX_DIM was set smaller than 3, or for a system with more than
	  3 dimensions. Now, only the actual dimensions are used, and the
	  result is stored so it can be used elsewhere too.

2015-06-10 19:32  dstrubbe

	* [r14238] src/utils/convert.F90, testsuite/README,
	  testsuite/finite_systems_3d/05-output.test: * The oct-convert
	  utility is compiled in parallel (since global_init is not called
	  with is_serial = .true. like the other utilities) and does indeed
	  run in parallel. Therefore, it must be invoked with Program not
	  Utility in the testsuite, or errors may occur on some machines
	  that don't let MPI programs run at all without 'mpiexec'.
	  * Some comments on the situation.
	  * Slight improvements to variable reference. The text for
	  ConvertFilename still doesn't make much sense to me.

2015-06-10 20:02  dstrubbe

	* [r14239] testsuite/buildbot_query.pl: buildbot_query should check
	  whether the local file passed exists.

2015-06-10 20:13  dstrubbe

	* [r14241]
	  testsuite/finite_systems_1d/02-neon_mpi.02-ground_state-kli_par_domains.inp:
	  More eigensolver iterations and less mixing may help avoid the
	  strange convergence failure that recently occurred, in which just
	  before SCF convergence was expected the first eigenvector
	  acquired a large error, and convergence was never approached
	  again
	  (http://www.tddft.org/programs/octopus/buildbot/builders/lascar_g95_openmpi_short/builds/1311/steps/shell_3/logs/stdio).

2015-06-10 21:21  dstrubbe

	* [r14242] testsuite/oct-run_testsuite.sh.in: * Removing duplicated
	  setting of bin_directory.
	  * Improving messages.
	  * Fixing reappearance in r13470 of the bug fixed in r13406.

2015-06-10 21:30  dstrubbe

	* [r14243] testsuite/oct-run_regression_test.pl: Removing obsolete
	  temporary variable.

2015-06-11 00:40  dstrubbe

	* [r14244] testsuite/oct-run_testsuite.sh.in: * Fix to r14242 which
	  made all tests be skipped if OCT_TEST_NJOBS was set.
	  $bin_directory is now set outside an if-condition.
	  * Removing confusing test for whether $bin_directory exists in
	  the run_testsuite function that just skipped silently if not.
	  Instead, after $bin_directory is set, an error is written if it
	  does not exist.
	  * Sending an error message to standard error.

2015-06-11 00:44  dstrubbe

	* [r14245] testsuite/oct-run_regression_test.pl: * Removing
	  unnecessary variable.
	  * Initialize $opt_f to avoid an extra warning when it is not set.

2015-06-11 14:09  umberto

	* [r14246] src/td/pes_mask_out_inc.F90: Write the photoemission
	  output for each k-point separately. an external utility is then
	  needed to recover the full ARPES.

2015-06-11 16:38  dstrubbe

	* [r14250] configure.ac, src/utils/Makefile.am: * Removing
	  --disable-utils. There is no reason not to build utilities, since
	  making them work in serial despite an MPI compilation, which
	  happened some time ago.
	  * There is no longer any need to write the message "octopus + ...
	  will be generated" since it is always the same now.

2015-06-11 16:47  dstrubbe

	* [r14251] testsuite/oct-run_regression_test.pl: * Absence of
	  executable specified by Program or Util in a testsuite run should
	  be a failure, not a skip, particularly since presence of
	  utilities is now required.
	  * Incorrect match command should also be a failure not just a
	  warning.

2015-06-11 16:48  xavier

	* [r14252] src/system/output.F90, src/td/td_write.F90: Clarified
	  the documentation about TDOutput and RestartWriteInterval.

2015-06-11 18:10  dstrubbe

	* [r14253] testsuite/oct-run_regression_test.pl: Testsuite Program
	  tag will search for executable in utils directory too, like Util
	  tag.

2015-06-11 18:32  dstrubbe

	* [r14254] src/math/math.F90, src/math/math_inc.F90: Removing
	  PUSH/POP's from two routines called too frequently from optimal
	  control.

2015-06-11 18:38  dstrubbe

	* [r14255] testsuite/real_time/12-absorption.test,
	  testsuite/real_time/13-absorption-spin.test: Yet more adjustment
	  of compressed-sensing matches to pass on hopper (the
	  supercomputer in California, not the little buildslave).

2015-06-11 19:46  dstrubbe

	* [r14257] configure.ac, src/utils/Makefile.am: Reverting part of
	  r14250. Somehow the version of autoconf on chum needs
	  bin_PROGRAMS to be set in this particular way, or else we get
	  error messages of the form
	  {{{
	  automake: oct_casida_spectrum_OBJECTS should not be defined
	  src/utils/Makefile.am:26: while processing program
	  `oct-casida_spectrum'
	  }}}

2015-06-12 16:18  dstrubbe

	* [r14258] testsuite/photo_electron/06-2D.test: This test seems to
	  run fine in parallel too so let's do that.

2015-06-12 16:33  dstrubbe

	* [r14259] liboct_parser/gsl_userdef.c,
	  liboct_parser/gsl_userdef.h, liboct_parser/symbols.c,
	  testsuite/photo_electron/06-2D.02-Na_few_cy.inp: * Implementing
	  functions 'real', 'imag', 'round', 'ceiling', and 'floor' for the
	  parser.
	  * Using 'round' where a real number was being assigned to an
	  integer variable in the testsuite.

2015-06-12 16:59  dstrubbe

	* [r14260] liboct_parser/parse.c: The parser now rejects
	  inappropriate types, as opposed to not initializing or casting to
	  the desired type, as before.

2015-06-12 17:36  dstrubbe

	* [r14261] src/basic/varinfo.F90, src/main/test.F90: *
	  varinfo_print_option writes the number with INVALID if it is
	  wrong, as opposed to just writing nothing at all.
	  * The validity of input to TestType is checked.

2015-06-12 17:49  dstrubbe

	* [r14262] liboct_parser/gsl_userdef.c,
	  liboct_parser/gsl_userdef.h, liboct_parser/symbols.c: Fix to
	  previous commit: There is a variable option 'real' used for
	  TestType (and possibly elsewhwere) so I am changing the function
	  to get the real part to 'realpart' and the same for 'imagpart'.

2015-06-12 18:15  philipp

	* [r14263] src/td/pes_flux.F90: Simplifies commit r14234

2015-06-12 19:23  dstrubbe

	* [r14264] src/states/modelmb_particles.F90: Bugfix: use of
	  messages_print_var_option for a variable without options results
	  in no output. Instead, use messages_print_var_value, and don't
	  call when NParticleModelmb is not set > 0.

2015-06-12 19:42  dstrubbe

	* [r14265] src/basic/space.F90: Make clear the range of possible
	  values for Dimensions.

2015-06-12 20:05  dstrubbe

	* [r14266] src/basic/varinfo.F90: Less lenient error-handling for
	  varinfo routines: if the variable or option doesn't exist, and
	  there isn't a way of passing this information back, then an error
	  message is written and the code stops. This will help avoid
	  incorrect calls.

2015-06-12 20:19  dstrubbe

	* [r14267] src/basic/multicomm.F90: Bugfix: memory leak, not all
	  the communicators were freed.

2015-06-12 21:08  dstrubbe

	* [r14268] src/grid/mesh.F90: Bugfix: memory leak, a communicator
	  was not freed.

2015-06-12 22:06  dstrubbe

	* [r14269] src/sternheimer/em_resp.F90, src/system/pert.F90:
	  Bugfix: Removing mistaken call to print option of obsolete
	  variable (which would have no effect), and inserting correct call
	  in a more appropriate place.

2015-06-12 22:18  dstrubbe

	* [r14270] liboct_parser/parse.c: Follow-up to r14260: the parser
	  should reject a value with an imaginary part passed to an integer
	  too.

2015-06-12 22:21  dstrubbe

	* [r14271] src/grid/mesh.F90: Fix to r14268: forgot argument to
	  MPI_Comm_free.

2015-06-15 22:20  xavier

	* [r14272] src/basic/messages.F90: The messages_fatal routine now
	  avoids sending a message from all nodes.

2015-06-16 18:01  xavier

	* [r14273] src/basic/messages.F90: Fix to the serial compilation,
	  broken by my previous commit.

2015-06-17 15:30  xavier

	* [r14274] share/pseudopotentials/sg15.set,
	  share/pseudopotentials/sg15/Ar_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Ar_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/As_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/As_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Cl_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cl_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Cs_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Cs_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/I_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/I_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/In_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/In_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Makefile.am,
	  share/pseudopotentials/sg15/P_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/P_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/S_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/S_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Sb_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sb_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Se_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Se_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Si_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Si_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Sn_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Sn_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Te_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Te_ONCV_PBE-1.1.upf,
	  share/pseudopotentials/sg15/Xe_ONCV_PBE-1.0.upf,
	  share/pseudopotentials/sg15/Xe_ONCV_PBE-1.1.upf: Upstream updates
	  in the SG15 pseudopotential set.

2015-06-17 18:31  dstrubbe

	* [r14275] src/basic/messages.F90: * The Fortran interface in
	  mpi.mod for MPICH requires a logical not an integer for MPI Test.
	  This is in accordance with documentation from OpenMPI too:
	  https://www.open-mpi.org/doc/v1.8/man3/MPI_Test.3.php
	  * Let's deallocate what is allocated.

2015-06-17 18:53  dstrubbe

	* [r14276] src/basic/io_binary_f.F90: I see no purpose in checking
	  whether MPI_Finalize has been called in io_binary_end: the only
	  way it would have been is if mpi_module_end had been called. If
	  that happened before the end of the program, merely avoiding this
	  particular MPI call will hardly save the run from crashing soon.

2015-06-17 18:57  dstrubbe

	* [r14277] src/basic/io_binary_f_inc.F90: Moving call to
	  io_binary_parallel_end to avoid the possibility of trying to
	  close the file twice.

2015-06-17 19:26  dstrubbe

	* [r14279] src/td/pes_flux.F90, src/td/pes_rc.F90,
	  src/td/td_write.F90: Unused variables.

2015-06-17 21:55  dstrubbe

	* [r14280] src/grid/io_function_inc.F90: * Bugfix: OutputHow =
	  out_plane did not respect OutputHow = boundary_points.
	  * Fix to error message.
	  * Refrain from outputting some extra blank lines.

2015-06-17 22:25  dstrubbe

	* [r14281] testsuite/finite_systems_3d/05-output.test: Fix to last
	  commit: update line numbers for test matches.

2015-06-17 23:35  dstrubbe

	* [r14282] src/grid/mesh_function_inc.F90: Removing unneeded
	  'target' attributes.

2015-06-18 20:23  dstrubbe

	* [r14284] src/species/ps.F90: Better math in variable
	  documentation.

2015-06-18 20:25  dstrubbe

	* [r14285] src/frozen/ssys_config.F90: Typos.

2015-06-18 21:59  dstrubbe

	* [r14286] src/hamiltonian/epot.F90, src/math/splines.F90: * Typo
	  in comment.
	  * Comment about missing PUSH_SUB.

2015-06-19 17:51  xavier

	* [r14298] src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Bugfix: A profiling
	  region was reusing a profiling object.

2015-06-19 23:13  xavier

	* [r14299] src/hamiltonian/hamiltonian_base_inc.F90: Merged the
	  reductions in the calculation of the force matrix element.

2015-06-20 18:44  dstrubbe

	* [r14300] src/grid/partition.F90: Further checks on the
	  troublesome partition loading.

2015-06-21 17:11  dstrubbe

	* [r14301] src/ions/read_coords.F90: Suppress warning about
	  undocumented variable ReducedVelocities by not attempting to
	  parse it (since it does not exist).

2015-06-22 14:57  dstrubbe

	* [r14302] src/grid/mesh_interpolation_inc.F90: Removed unnecessary
	  'target' attribute.

2015-06-22 15:06  dstrubbe

	* [r14303] m4/arch.m4: To enable SSE2 instructions, check not only
	  that the compiler accepts the __m128d type but also that a
	  program containing SSE2 instructions can be compiled, linked, and
	  run.

2015-06-22 15:39  dstrubbe

	* [r14304] m4/arch.m4, m4/fc_integer.m4,
	  m4/octopus_compilation_info.m4,
	  src/poisson/solver_1d_solve_inc.F90,
	  testsuite/finite_systems_3d/06-restart.02-restart_gs_mixrho.inp,
	  testsuite/finite_systems_3d/06-restart.03-gs_mixvhxc.inp,
	  testsuite/finite_systems_3d/06-restart.04-restart_gs_mixvhxc.inp,
	  testsuite/functionals/08-vdw_ts.test: Setting svn 'Id' line and
	  property correctly for files that were copied without doing this.

2015-06-22 15:56  dstrubbe

	* [r14305] share/opencl/axpy.cl, share/opencl/boundaries.cl,
	  share/opencl/cl_complex.h, share/opencl/cl_rtype.h,
	  share/opencl/convert.cl, share/opencl/copy.cl,
	  share/opencl/density.cl, share/opencl/forces.cl,
	  share/opencl/mesh_batch.cl, share/opencl/mesh_to_cube.cl,
	  share/opencl/mul.cl, share/opencl/operate.cl,
	  share/opencl/pack.cl, share/opencl/phase.cl,
	  share/opencl/points.cl, share/opencl/projector.cl,
	  share/opencl/rotate.cl, share/opencl/set_zero.cl,
	  share/opencl/subarray.cl, share/opencl/trsm.cl,
	  share/opencl/vpsi.cl: Set svn 'Id' line and property correctly on
	  OpenCL files. I detected the mismatches with this perl script:
	  {{{
	  # Usage: pipe in "grep -n -R 'Id: ' *"
	  while(<>) {
	  $_ =~ /.*\/(.*):[0-9]*:.*\$Id: (.*?) /;
	  if($1 ne $2) {
	  print "File = '$1', Id = '$2'\n";
	  }
	  }
	  }}}

2015-06-22 16:02  dstrubbe

	* [r14306] src/basic/parser.F90: Making common 'parse_fatal'
	  subroutine.

2015-06-22 16:12  dstrubbe

	* [r14307] src/basic/multicomm.F90, src/basic/parser.F90,
	  src/system/output_etsf_inc.F90: Using 'stderr' instead of unit 0
	  for warning/error output, to respect the variable 'stderr'.

2015-06-22 16:23  dstrubbe

	* [r14308] src/basic/parser.F90: Parsing an undocumented variable
	  is now an error, to make sure all our variables are properly
	  documented. This will also guard against typos in the name in the
	  variable documentation or call to parse_variable, which has
	  happened occasionally.

2015-06-22 16:38  dstrubbe

	* [r14309] src/hamiltonian/projector_inc.F90: Move FIXME about
	  projector application with OpenMP to the right place.

2015-06-22 19:54  dstrubbe

	* [r14310] m4/arch.m4: * Header to avoid warnings in config test
	  programs.
	  * Comment on why there is a dummy printf call in config test
	  programs.

2015-06-22 20:23  dstrubbe

	* [r14311] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  * Bugfix: OpenSCAD output was incorrect when parallel in domains
	  due to mistaken use of mesh%x instead of mesh_x_global.
	  * Bugfix: same for matlab output.
	  * Comments and caveats about validity of OpenSCAD output.
	  * A function can no longer be pure; it may be possible to make
	  what it calls be pure too so it can be made pure again.

2015-06-22 20:25  dstrubbe

	* [r14312] testsuite/finite_systems_3d/16-scfinlcao_std.test:
	  Restoring and updating matches for OpenSCAD density.

2015-06-22 20:51  dstrubbe

	* [r14313] testsuite/finite_systems_3d/16-scfinlcao_std.01-gs.inp,
	  testsuite/finite_systems_3d/16-scfinlcao_std.test: Test matlab
	  output.

2015-06-22 21:00  dstrubbe

	* [r14314] src/basic/blacs_proc_grid.F90, src/basic/multicomm.F90:
	  Reverting r14140 and r14155. The Fortran interface for
	  MPI_Cart_sub and MPI_Cart_create according to OpenMPI does use a
	  logical not an integer, so without this change it won't compile
	  with --enable-mpi_mod. And, the change did not stop the failures
	  on lascar as I had hoped.

2015-06-22 21:50  xavier

	* [r14315] src/hamiltonian/hamiltonian_base_inc.F90: Added a
	  profiling region for the projector matrix element reduction.

2015-06-22 22:45  dstrubbe

	* [r14316] src/hamiltonian/hamiltonian_base.F90: Fixing compilation
	  after Xavier's previous commit. I think he forgot to commit this
	  file.

2015-06-22 22:55  dstrubbe

	* [r14317] src/grid/boundaries.F90: Bugfix: memory leak, missing
	  deallocation.

2015-06-22 23:04  dstrubbe

	* [r14318] configure.ac, liboct_parser/Makefile.am: * Since r1198
	  we are not using bison/yacc in the build system, so there is no
	  need to check for it in the configure script.
	  * Comment on how to generate grammar.c.

2015-06-22 23:27  dstrubbe

	* [r14319] m4/fortran.m4: cpp from GCC version 5.1.0 produces this
	  error on many of our F90 files: "error: C++ style comments are
	  not allowed in ISO C90". Still looking for the proper solution to
	  this, but in the meantime, these changes ensure that the
	  configure script correctly detects that there is a problem before
	  allowing compilation. (Use of -q with grep is just to look nicer,
	  not because there was a problem with /dev/null.)

2015-06-23 01:46  dstrubbe

	* [r14320] liboct_parser/grammar.c: Bringing grammar.c into the
	  modern age. Last update was 2010. The new version resolves the
	  compiler warnings already that I had fixed by hand over the last
	  couple of years.
	  {{{bison grammar.y --name-prefix=oct_parser_
	  --output=grammar.c}}}

2015-06-23 02:36  dstrubbe

	* [r14321] src/grid/grid.F90: Bugfix: if Spacing is set to zero,
	  deliberately or accidentally, the calculation may hang rather
	  than give a sensible message.

2015-06-23 09:02  umberto

	* [r14322] src/system/v_ks.F90: Calculate the current also when
	  Vhxc is frozen.

2015-06-23 09:09  umberto

	* [r14323] src/states/density.F90: Fix the total charge when
	  freezing orbitals with periodic systems

2015-06-23 15:10  irina

	* [r14324] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90: Magneto-optical response for finite and
	  periodic systems within Sternheimer approach

2015-06-23 17:13  irina

	* [r14325] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90: Corrections to formatting for
	  magneto-optical response within Sternheimer approach

2015-06-23 17:32  dstrubbe

	* [r14326] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/em_resp_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90: Reverting r14324 and r14325. Sorry to do
	  this Irina, but:
	  * r14324 did not compile on most slaves;
	  * you changed indentation erratically in so many places that it
	  is very difficult to see in what places you actually made a
	  meaningful change to the code;
	  * I see at least one place in which you undid (without any
	  comment) work that I did in the last week, which leads me to
	  think that you just ignored svn conflicts and may well have
	  undone other changes accidentally;
	  * This is a huge commit and requires a much longer description of
	  what you did than what was provided.
	  
	  Please try again, after consulting the first section of
	  http://www.tddft.org/programs/octopus/wiki/index.php/Developers:Coding_standards
	  again:
	  * Pay careful attention to the our indentation convention (there
	  are a lot more places to fix than what you changed in r14325).
	  * Break this up into at least 3 independent commits since there
	  is so much changed here. For example, you can divide up the
	  finite and periodic support. (It is best to do this as you finish
	  each part rather than wait until the end.)
	  * Make sure you can justify a reason for every single line of
	  change that comes up with 'svn diff'. I think a large fraction of
	  the lines in r14324 are just meaningless (and hopefully
	  accidental) whitespace changes.
	  * Write a paragraph for each commit about what exactly you have
	  changed or added and why.
	  * Make sure your SAFE_ALLOCATE lines are not too long; this is at
	  least one reason why the slaves are not compiling.
	  
	  Then it will be easiest for all of us (including you) to
	  understand your changes and make sure they are correct. Let me
	  know if you have questions or need help.

2015-06-23 18:12  irina

	* [r14327] src/sternheimer/kdotp.F90: Added ending for perturbation
	  for second direction (pert2) in second-order kdotp

2015-06-23 18:15  dstrubbe

	* [r14328] liboct_parser/grammar.c, liboct_parser/grammar.y: Add
	  rule in grammar for parser to block use of function symbol
	  without arguments. This would catch conflicting option and
	  function names, as was a problem earlier. Otherwise, it is just
	  treated silently as zero.

2015-06-23 18:23  dstrubbe

	* [r14329] src/ions/vibrations.F90: Use a data member of
	  vibrations_t instead of a preprocessor symbol for the units of
	  the dynamical matrix.

2015-06-23 18:28  dstrubbe

	* [r14330] src/basic/global.F90, src/include/global.h: Use
	  character parameters rather than preprocessor symbols.

2015-06-23 18:34  dstrubbe

	* [r14331] configure.ac: Since removal of the use of the assembler
	  in r6717 (2010) there is no purpose in checking for it in the
	  configure script.

2015-06-23 18:43  irina

	* [r14332] src/system/pert.F90, src/system/pert_inc.F90: Added new
	  option for kdotp pertubations in which velocity is calculated
	  directly as the commutator of the position operator and
	  Hamiltonian. This performs much better for magneto-optics with
	  kdotp. Otherwise formulations treating the same system as finite
	  and periodic would give very different answers

2015-06-23 18:43  dstrubbe

	* [r14333] src/main, src/main/Makefile.am, src/utils,
	  src/utils/Makefile.am: * gcc5 on MacOS with "-g" creates .dSYM
	  directories of debugging info for each executable. These should
	  be svn:ignore'd and cleaned by 'make clean'.
	  * Also, there is no oct-test_mpi anymore.

2015-06-23 18:50  irina

	* [r14334] src/system/pert_inc.F90: Change of indentation in the
	  old option for velocity in kdotp

2015-06-23 18:58  dstrubbe

	* [r14335] src/basic/global.F90, src/include/global.h: M_ONE and
	  M_ZERO can be Fortran parameters instead of preprocessor symbols.

2015-06-23 19:01  dstrubbe

	* [r14336] m4/fortran.m4: Make sure warnings and errors from FCPPP
	  tests end up in config.log, which was not necessarily happening.

2015-06-23 19:42  dstrubbe

	* [r14337] src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90,
	  src/system/pert.F90: Removing unused argument.

2015-06-23 19:44  dstrubbe

	* [r14338] src/grid/mesh_function_inc.F90: r14335 made a
	  preprocessed line slightly longer, causing truncation of the line
	  with some compilers. I rewrote it to be a bit shorter.

2015-06-23 19:46  dstrubbe

	* [r14339] src/system/xc_oep.F90: * More info on how to control OEP
	  linear solver.
	  * Better message for not-implemented case.

2015-06-23 19:52  dstrubbe

	* [r14340] src/basic/utils.F90, src/scf/mix.F90: Avoid using a
	  preprocessor macro on the same line as a string concatenation
	  operator '//' -- this will help make more preprocessors
	  acceptable for use with our code, since some are enforcing a part
	  of the C90 standard which forbids use of C++ style comments (//).

2015-06-23 19:57  dstrubbe

	* [r14341] src/grid/io_function_inc.F90: I don't see any way to
	  make X(interpolate_isolevel) pure again, given the complexity of
	  curv_chi2x that is ultimately called by it.

2015-06-23 22:36  umberto

	* [r14355] src/states/density.F90: Correctly calculate the total
	  charge and change the default smearing method to fixed
	  occupations after David's suggestion.

2015-06-23 23:16  dstrubbe

	* [r14356] src/ions/vibrations.F90: Fix to r14329: the
	  initialization was only after one usage, which correctly made a
	  test fail when an output file contained non-ASCII characters from
	  printing an uninitialized string.

2015-06-23 23:26  dstrubbe

	* [r14357] src/math/Makefile.am, src/math/lalg_adv.F90,
	  src/math/lalg_adv_scalapack_inc.F90: Removing unused routines
	  X(eigensolve_scalapack). Actual eigensolves with scalapack are
	  done elsewhere in the code. This one on the other hand included
	  an assertion (acccidentally left in r7378?) that blocked use of
	  the complex flavor.

2015-06-24 01:54  dstrubbe

	* [r14358] src/grid/batch_ops_inc.F90, src/system/forces_inc.F90,
	  src/system/output_etsf_inc.F90: More changes to avoid using //
	  and a preprocessor substitution in the same line.

2015-06-24 15:43  dstrubbe

	* [r14359] src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  testsuite/finite_systems_2d/07-modelmb.01-gs.inp: * Further
	  clarification in documentation about OutputHow = boundary_points.
	  * Blocking attempts to use it when parallel in domains, which
	  does not work.
	  * If it is used for a field passed which does not contain the
	  boundary points, write a warning.
	  * Do not use it in the test, since it would be blocked for
	  parallel runs.

2015-06-24 15:58  dstrubbe

	* [r14360] src/states/states_calc_inc.F90: Replacing string
	  concatenation {{//}} with writing multiple strings to avoid
	  preprocessor conflict.

2015-06-24 16:26  xavier

	* [r14361] src/basic/global.F90, src/utils/xyzanim.F90: Proof of
	  concept to overload the + operator to concatenate strings. This
	  works
	  with gfortran 4.9.2. Let's see what other compilers think.

2015-06-24 17:02  xavier

	* [r14362] src/basic/global.F90, src/grid/stencil_variational.F90,
	  src/hamiltonian/gauge_field.F90, src/hamiltonian/vxc_inc.F90,
	  src/math/math.F90, src/math/ode_solver.F90,
	  src/species/atomic.F90, src/species/ps.F90,
	  src/species/ps_hgh.F90, src/states/cmplxscl.F90,
	  src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/sternheimer_inc.F90,
	  src/system/eigen_arpack_inc.F90, src/system/elf.F90,
	  src/system/forces.F90, src/td/propagator_magnus.F90,
	  src/td/propagator_rk.F90: Removed constants M_SIX to M_TEN.

2015-06-24 19:10  dstrubbe

	* [r14363] src/system/xc_kli_pauli_inc.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_inc.F90: * Bugfix: number of iterations
	  reported from OEP for residual was one too high when not
	  converged.
	  * Bugfix: incorrect variable name in call to
	  messages_input_error.
	  * More information on OEP in variable documentation.

2015-06-24 19:27  dstrubbe

	* [r14364] src/basic/global.F90: Fix to r14361, which did not
	  compile with g95 and path. A version of the string concatenation
	  function that uses more normal syntax and is definitely accepted
	  by g95. Also, this one doesn't dynamically allocate memory, so it
	  shouldn't create memory leaks.

2015-06-24 19:35  dstrubbe

	* [r14365] liboct_parser/symbols.h: Clarifications in comments of
	  liboct_parser.

2015-06-25 10:15  irina

	* [r14366] src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90: Addition kernel kxc to
	  Sternheimer for calculation of second-order responses

2015-06-25 10:45  micael

	* [r14367] src/hamiltonian/lasers.F90: Clarified how to specify the
	  phase in the TDExternalFields block documentation.

2015-06-25 10:55  irina

	* [r14368] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Added subroutines for
	  calculation of magneto-optical response of finite systems

2015-06-25 13:06  irina

	* [r14369] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Added subroutine for
	  calculation of magneto-optical response of periodic systems

2015-06-25 13:34  irina

	* [r14370] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Added subroutine for
	  calculation of orbital magnetic susceptibility and magnetization
	  of periodic systems

2015-06-25 17:31  dstrubbe

	* [r14376] src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90: * Missing PUSH/POPs.
	  * A vector assignment instead of a loop.
	  * Typo variable name.
	  * Using new OPTION_* constants.
	  * Combining two if-statements.

2015-06-25 19:29  dstrubbe

	* [r14377] src/grid/io_function_inc.F90: Bugfix: expand some
	  formats for Output when max-dim is set to 4 or higher.

2015-06-25 19:54  dstrubbe

	* [r14378] src/include/global.h: Use our new '+' string
	  concatenation operator for the PUSH_SUB and POP_SUB macros.

2015-06-25 20:05  dstrubbe

	* [r14379] src/basic/utils.F90, src/grid/batch_ops_inc.F90,
	  src/scf/mix.F90: Undoing recent changes introducing unusual new
	  lines to avoid use of // on the same line as a preprocessor
	  substitution, and instead solving the problem by using the new
	  '+' string concatenation operator.

2015-06-25 20:08  dstrubbe

	* [r14380] src/system/forces_inc.F90: Using '+' rather than // and
	  a new line in another place.

2015-06-25 20:56  mjv500

	* [r14381] src/system/xc_ks_inversion.F90: doc, output progress
	  during KS inversion and corrected variable name for td KS
	  inversion vhxc

2015-06-25 21:37  dstrubbe

	* [r14382] m4/fortran.m4: * PUSH_SUB no longer contains {{//}}, so
	  the m4 macro for FCCPP no longer needs to require proper
	  treatment of {//}} in a line with a preprocessor substitution.
	  * -C rather than -ansi is a better recommendation for FCCPP,
	  because -ansi can trigger errors such as "C++ style comments are
	  not allowed in ISO C90" in gcc 5.1, whereas -C works when we
	  relax the constraint in the first point.

2015-06-25 21:40  umberto

	* [r14383] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  * Added support for complex data in vtk format
	  * Added experimental helper routine to save data in vtk with
	  structured grid format (for the moment only ASCII).

2015-06-25 21:55  umberto

	* [r14384] src/basic/getopt_f.c, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: *
	  oct-photoelectron-spectrum should now be able to calculate ARPES
	  in semi-periodic systems. The spectrum is generate combining the
	  momentum-space mesh obtained form the mask method with the kpoint
	  mesh (only when the grid is automatically generated). I have
	  tested it only in 2D (one periodic dimension and one for the
	  vacuum), 3D is coming next.
	  * the data is now created by directly reading the momentum-space
	  wavefunction.

2015-06-25 21:56  dstrubbe

	* [r14385] m4/fortran.m4: Undoing change of -ansi to -C in m4. gcc
	  on erlo and hopper includes headers that cause trouble with -C
	  but not with -ansi.

2015-06-26 11:50  umberto

	* [r14386] src/math/nfft_f.c: Flattening array indices was wrong
	  for the 3D case.

2015-06-26 16:08  umberto

	* [r14387] src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: * The ARPES momentum-space
	  mesh should now be working in 3D. More testing is needed though.
	  * The photolectron utility now rebuilds the data from the restart
	  files also for finite system.

2015-06-26 19:00  dstrubbe

	* [r14388] m4/metis.m4, m4/parmetis.m4, m4/yaml.m4: *
	  AC_HELP_STRING is apparently considered deprecated and
	  AS_HELP_STRING should be used instead (as it is nearly all of our
	  m4 macros).
	  * Making metis, parmetis, and yaml configure arguments fit the
	  pattern of our other ones.

2015-06-29 17:55  jjornet

	* [r14389] src/grid/io_function.F90, src/system/output.F90: -
	  Forces can be printed in BILD format.

2015-06-29 18:01  jjornet

	* [r14390] src/main/geom_opt.F90: - Forces are printed for each
	  optimization step if Output = forces.

2015-06-30 08:22  umberto

	* [r14391] testsuite/photo_electron/06-2D.test: Fix long
	  photoemission tests: the file to grep changed name but was not
	  updated accordingly in the test.

2015-06-30 08:57  micael

	* [r14392] src/hamiltonian/lasers.F90: Write a warning if the phase
	  specified in the TDExternalFields block is not found in the
	  TDFunctions block.

2015-06-30 09:02  philipp

	* [r14393] src/td/pes_flux.F90: Adding templates for variable
	  documentation.

2015-06-30 09:17  umberto

	* [r14394] src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: Perform cuts of the 3D
	  ARPES distribution on arbitrary planes.

2015-06-30 09:29  irina

	* [r14396] src/system/pert_inc.F90: Fix to r14332 in hcom_vel
	  option for first-order and second-order kdotp. Setting boundary
	  conditions only before multiplication by x. Removing delta_ij
	  term in second-order kdotp for this option as it is already taken
	  into account in the commutators of the position operator and
	  Hamiltonian.

2015-06-30 09:34  irina

	* [r14397] src/system/pert_inc.F90: Indentation change for r14396

2015-06-30 10:44  micael

	* [r14398] src/hamiltonian/lasers.F90: With the recent changes to
	  the parser, there is no need to close a block before openning a
	  new one.

2015-06-30 13:25  philipp

	* [r14400] src/td/pes_flux.F90: Removing a blank line for gnuplot
	  output.

2015-06-30 13:26  philipp

	* [r14401] src/td/pes_flux.F90: Bugfix for 3d calculations.

2015-06-30 14:25  irina

	* [r14402] src/system/pert_inc.F90,
	  testsuite/periodic_systems/04-silicon.test,
	  testsuite/periodic_systems/06-h2o_pol_lr.test: Bugfix to grad_vel
	  option in second-order kdotp. To calculate the negative term in
	  the commutator of r and vnl the latter should be applied to the
	  input function multiplied by r. The tests for effective mass are
	  corrected correspondingly.

2015-06-30 14:55  irina

	* [r14403] src/system/pert.F90: Correction to comments for hcom_vel
	  option in kdotp.

2015-06-30 15:15  irina

	* [r14404] src/grid/symmetrizer.F90, src/grid/symmetrizer_inc.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Moving the subroutine for
	  taking into account symmetries for the magneto-optical response
	  of periodic systems to symmetrizer_inc. Removing the call to this
	  subroutine for finite systems.

2015-06-30 19:02  jjornet

	* [r14405] src/main/geom_opt.F90: - Ions that are specified in the
	  %Coordinates block to do not move are fixed
	  during the geometry optimization.

2015-07-01 09:20  irina

	* [r14406] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Added a function providing
	  components of position and velocity needed for calculation of a
	  given component of magnetic dipole moment

2015-07-01 10:07  irina

	* [r14407] src/sternheimer/em_resp_calc_inc.F90: Added functions
	  serving as a basis for calculation of the right-hand side of the
	  Sternheimer equation for magnetic and kdotp perturbations within
	  density matrix formulation.

2015-07-01 10:39  philipp

	* [r14408] src/td/pes_flux.F90: Adding a factor for the surface
	  element.

2015-07-01 10:53  umberto

	* [r14409] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90: Binay output for 4D arrays

2015-07-01 10:55  umberto

	* [r14410] src/grid/io_function_inc.F90,
	  src/utils/photoelectron_spectrum.F90: First implementation od VTK
	  output for structured grids (curviliner) in binary format.

2015-07-01 11:01  umberto

	* [r14411] src/td/pes_mask_out_inc.F90: The routine that perform
	  cuts on the photoelectron distribution now accepts either Lk(:,:)
	  (the coordinates along each axis on a cube) of the full
	  pmesh(:,:,:,:) (specifying the coordinate of each momentum-spcae
	  point).
	  * this should also fix compilation errors due to the fact that I
	  accidentally committed a file using this modified routine in my
	  previous commit.

2015-07-01 13:08  umberto

	* [r14412] src/grid/io_function_inc.F90: Save VTK binary format for
	  complex structured-grid data

2015-07-01 13:12  jjornet

	* [r14413] src/main/geom_opt.F90: * Bugfix: Assignement of the new
	  coordinate was wrong

2015-07-01 13:55  umberto

	* [r14414] src/td/pes_mask_out_inc.F90:

2015-07-01 16:06  jjornet

	* [r14415] src/main/geom_opt.F90: * Generalized the way of handle
	  fixed ions in geometry optimizations.
	  Fixed ions coordinates are not passed to minimizer function.
	  Then,
	  fixed ions parameters are not taken into account for the
	  convergence criteria

2015-07-02 08:15  irina

	* [r14416] src/sternheimer/em_resp_calc_inc.F90: Added subroutines
	  for account of variation of Hartree, exchange and correlation
	  terms on the right-hand side of Sternheimer equation for magnetic
	  and second-order perturbations.

2015-07-02 08:47  irina

	* [r14417] src/sternheimer/em_resp_calc_inc.F90: Added subroutines
	  for calculation of the right-hand side of Sternheimer equation
	  (inhomog) for magnetic (B), magnetic on top of kdotp or electric
	  (BE), electric on top of kdotp or magnetic (EB), kdotp on top of
	  electric (KE), kdotp (K2) and magnetic (KB) perturbations within
	  density matrix formulation.

2015-07-02 09:29  ravindra

	* [r14418] src/poisson/poisson.F90: updating documentation for
	  warning

2015-07-02 09:34  irina

	* [r14419] src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90: Added calculation of the
	  total right-hand side of Sternheimer equation for second-order
	  perturbations (BE, KE, K2) within density matrix formulation.

2015-07-02 15:43  ravindra

	* [r14420] src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_init_direct_inc.F90,
	  src/poisson/poisson_no.F90: POISSON_NO added as a valid option
	  for Poisson solver

2015-07-06 14:26  umberto

	* [r14421] src/ions/kpoints.F90: The kpoint grid generation routine
	  optionally return an index vector mapping each kpoint to a 3d
	  cubic index.

2015-07-06 14:43  umberto

	* [r14422] src/td/pes_mask_out_inc.F90,
	  src/utils/photoelectron_spectrum.F90: * Fixed a bug that was
	  preventing to correctly mix the kpoint and momentum space meshes
	  when using even grids. The kpoint mesh generated using the
	  kpoints_grid_generate is supposed to be correct for every
	  variation of the Monkhorst-Pack scheme.
	  * The pes_mask_output_full_mapM_cut generating cuts on the
	  photoelectrons velocity map now accepts allows to position the
	  cutting plane by passing the pos vector.

2015-07-06 17:03  jjornet

	* [r14423] src/math/minimizer.F90,
	  testsuite/finite_systems_3d/23-go-na2.test: * Velocity Verlet
	  Algorithm is now used in geometry optimization using Fire method.
	  * max_dr gives now the largest displacement that will occurs in
	  the next step.
	  * Modified the test results for the Fire method.

2015-07-08 12:49  ravindra

	* [r14424] src/grid/mesh_init.F90, src/ions/simul_box.F90,
	  src/system/output_states_inc.F90: mesh updated for non-orthogonal
	  lattices. Condition of having both Lsize and LatticeVectors
	  modified. Conversion of coordinates from Cartesian to reduced
	  Lattice modified.

2015-07-08 12:51  ravindra

	* [r14425] src/system/output_states_inc.F90: debugging info removed

2015-07-10 14:31  umberto

	* [r14426] src/utils/photoelectron_spectrum.F90: Fixing compilation
	  issue plus some more error checking.

2015-07-10 17:59  xavier

	* [r14427] src/species/ps.F90: The atomic density is now resolved
	  by spin.

2015-07-10 20:52  xavier

	* [r14428] src/utils/conductivity.F90: The conductivity utility can
	  now work if the coordinates xor the
	  current files are missing.

2015-07-11 15:18  xavier

	* [r14429] src/hamiltonian/species_pot.F90, src/species/ps.F90: *
	  The atomic density is obtained from the density spline instead of
	  the
	  orbitals.
	  
	  * The density splines are now filtered.
	  
	  * Corrected the calculation of the density splines for UPF
	  pseudos.

2015-07-13 12:09  adelgado

	* [r14430] src/basic/global.F90, src/hamiltonian/pcm.F90: -
	  'hamiltonian/pcm.F90':
	  * add the subroutine 'cav_gen' + internal subprograms to generate
	  cavity hosting the solute molecule. The possibility of reading
	  the cavity geometry from an external file is also available.
	  * The variable 'SmearingFactor' has been renamed to
	  'PcmSmearingFactor'.
	  
	  - 'basic/global.F90':
	  * 'PCM_DIR' has been defined.

2015-07-13 13:06  adelgado

	* [r14431]
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.01-ground_state.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.02-td_prop.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.test: - Adding
	  test runs for PCM.

2015-07-13 13:08  adelgado

	* [r14432] testsuite/finite_systems_3d/Makefile.am: - Updating
	  'testsuite/finite_systems_3d/Makefile.am' to run PCM tests.

2015-07-13 14:53  adelgado

	* [r14433] src/hamiltonian/pcm.F90: - 'hamiltonian/pcm.F90':
	  modifying format statement to fix lascar runtime error.

2015-07-13 16:26  adelgado

	* [r14434] testsuite/finite_systems_3d/29-pcm_chlorine_anion.test:
	  - PCM tests are have been disabled.

2015-07-13 17:53  jjornet

	* [r14436] src/main/geom_opt.F90: * New varieble GOFireMass added
	  to set equal masses for all species of the system as suggested in
	  the paper Bitzek PRL 97,170201 (2006).

2015-07-14 15:41  adelgado

	* [r14437] src/hamiltonian/pcm.F90: - Removing unused variables in
	  'hamiltonian/pcm.F90'.

2015-07-14 15:44  adelgado

	* [r14438] src/hamiltonian/pcm.F90: - Deleting commented line in
	  'hamiltonian/pcm.F90'

2015-07-14 21:28  xavier

	* [r14439] src/species/ps.F90: Bugfix: The atomic density is
	  filtered only when available.

2015-07-15 08:51  adelgado

	* [r14440]
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.01-ground_state.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.02-td_prop.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.test: -
	  Increasing the spacing from 0.15 to 0.19 in the PCM tests to
	  reduce running times.

2015-07-15 12:44  adelgado

	* [r14441] src/hamiltonian/pcm.F90: - just comment one line trying
	  to isolate the problem making the PCM test to fail in hopper.

2015-07-15 13:37  adelgado

	* [r14442] src/hamiltonian/pcm.F90: - reverting changes made in rev
	  14441 and fixing the position of POP_SUB(gaubon).

2015-07-15 16:05  adelgado

	* [r14443] testsuite/finite_systems_3d/29-pcm_chlorine_anion.test:
	  - switching off pcm tests until fixing the floating point error
	  in hopper.

2015-07-16 19:30  cborca

	* [r14444] src/hamiltonian/Makefile.am, src/hamiltonian/vdw_ts.F90,
	  src/hamiltonian/vdw_ts_low.c: Intial implementation of
	  Tkatchenko-Scheffler Van der Waals functional as a separate
	  C-code.

2015-07-16 23:51  xavier

	* [r14445] src/hamiltonian/hirshfeld.F90,
	  src/hamiltonian/species_pot.F90, src/hamiltonian/vdw_ts.F90,
	  src/species/ps.F90: * Implementation of all terms in the
	  derivative of the Hirshfeld volumes
	  with respect to the coordinates.
	  
	  * Removed some obsoleted code.

2015-07-17 00:16  xavier

	* [r14446] src/hamiltonian/vdw_ts.F90,
	  src/hamiltonian/vdw_ts_low.c: The derivatives of the Hirshfeld
	  volume ratio are passed to the
	  vdw_calculate funcion.

2015-07-17 21:25  xavier

	* [r14447] src/hamiltonian/vdw_ts.F90,
	  src/hamiltonian/vdw_ts_low.c: * Changed the name of the fortran
	  interface of the vdW code to avoid
	  problems with compilers that do not decorate Fortran objects.
	  
	  * Added an explicit interface.

2015-07-20 15:21  adelgado

	* [r14448] src/hamiltonian/pcm.F90: - 'hamiltonian/pcm.F90': The
	  integer variable 'pcm_dim_space' is defined to avoid floating
	  point exceptions within pcm calculations when MAX_DIM > 3. This
	  should fix the failures of pcm tests in hopper.

2015-07-20 16:13  adelgado

	* [r14449]
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.01-ground_state.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.02-td_prop.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.test: -
	  Enabling PCM tests.

2015-07-21 16:50  umberto

	* [r14450] src/states/states.F90: Charge_in_block should take into
	  account the weigh of each kpoint and the degeneracy of the spin
	  space are now taken care by the spin_n variable. This should fix
	  Occupations with kpoints without breaking the test for
	  spin-polarize and spinor cases.

2015-07-23 14:26  mjv500

	* [r14451] src/system/xc_ks_inversion.F90: comments, indentation,
	  and changed loop evaluation of the residual density error to a
	  maxval call - this should be easier to optimize for the compiler

2015-07-23 15:18  dannert

	* [r14452] testsuite/finite_systems_3d/29-pcm_chlorine_anion.test:
	  changed Processors from serial to 1 for the
	  29-pcm_chlorine_anion.test

2015-07-23 16:52  adelgado

	* [r14453] src/hamiltonian/pcm.F90, src/main/run.F90: -
	  'main/run.F90': At present PCM implementation can be run in
	  serial and parallel only if 'ParallelizationStrategy =
	  par_states'. This check will stop the calculation accordingly.
	  - 'hamiltonian/pcm.F90': A missing call messages_fatal(1) was
	  added.

2015-07-23 17:01  xavier

	* [r14454] configure.ac, share/pseudopotentials/Makefile.am,
	  share/pseudopotentials/hscv,
	  share/pseudopotentials/hscv/Makefile.am,
	  share/pseudopotentials/hscv/lda,
	  share/pseudopotentials/hscv/lda/Ac_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ag_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Al_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ar_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/As_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/At_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Au_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/B_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ba_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Bi_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Br_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/C_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ca_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Cd_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ce_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Cl_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Co_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Cr_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Cs_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Cu_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Dy_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Er_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Eu_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/F_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Fe_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Fr_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ga_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Gd_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ge_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/H_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/He_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Hf_HSCV_LDA-1.1.xml,
	  share/pseudopotentials/hscv/lda/Hg_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ho_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/I_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/In_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ir_HSCV_LDA-1.1.xml,
	  share/pseudopotentials/hscv/lda/K_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Kr_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/La_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Li_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Lu_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Makefile.am,
	  share/pseudopotentials/hscv/lda/Mg_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Mn_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Mo_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/N_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Na_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Nb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Nd_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ne_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ni_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Np_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/O_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Os_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/P_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pa_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pd_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pm_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Po_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pr_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pt_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Pu_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ra_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Rb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Re_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Rh_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Rn_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ru_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/S_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Sb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Sc_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Se_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Si_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Sm_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Sn_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Sr_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ta_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Tb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Tc_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Te_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Th_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Ti_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Tl_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Tm_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/U_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/V_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/W_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Xe_HSCV_LDA-1.2.xml,
	  share/pseudopotentials/hscv/lda/Y_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Yb_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Zn_HSCV_LDA-1.0.xml,
	  share/pseudopotentials/hscv/lda/Zr_HSCV_LDA-1.1.xml,
	  share/pseudopotentials/hscv/pbe,
	  share/pseudopotentials/hscv/pbe/Ac_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ag_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Al_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ar_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/As_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/At_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Au_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/B_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ba_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Bi_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Br_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/C_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ca_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Cd_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ce_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Cl_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Co_HSCV_PBE-1.1.xml,
	  share/pseudopotentials/hscv/pbe/Cr_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Cs_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Cu_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/D_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Dy_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Er_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Eu_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/F_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Fe_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Fr_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ga_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Gd_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ge_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/H_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/He_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Hf_HSCV_PBE-1.1.xml,
	  share/pseudopotentials/hscv/pbe/Hg_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ho_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/I_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/In_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ir_HSCV_PBE-1.1.xml,
	  share/pseudopotentials/hscv/pbe/K_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Kr_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/La_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Li_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Lu_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Makefile.am,
	  share/pseudopotentials/hscv/pbe/Mg_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Mn_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Mo_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/N_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Na_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Nb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Nd_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ne_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ni_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Np_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/O_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Os_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/P_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pa_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pd_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pm_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Po_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pr_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pt_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Pu_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ra_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Rb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Re_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Rh_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Rn_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ru_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/S_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Sb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Sc_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Se_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Si_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Sm_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Sn_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Sr_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ta_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Tb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Tc_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Te_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Th_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Ti_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Tl_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Tm_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/U_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/V_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/W_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Xe_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Y_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Yb_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Zn_HSCV_PBE-1.0.xml,
	  share/pseudopotentials/hscv/pbe/Zr_HSCV_PBE-1.1.xml,
	  share/pseudopotentials/hscv_lda.set,
	  share/pseudopotentials/hscv_pbe.set, src/species/species.F90: *
	  Some new pseudopotentials coming from QBox: HSCV. These come in
	  two flavors: lda and pbe, so two sets are available, hscv_lda and
	  hscv_pbe, that cover most of the periodic table.
	  
	  * Now a pseudopotential set file does not need to specify the
	  atomic
	  number, it is determined automatically from the species name.

2015-07-23 18:39  xavier

	* [r14455] src/species/species.F90: Some fixes in the documentation
	  for PseudopotentialSet:
	  
	  * Updated the reference for sg15 and improved the description.
	  
	  * The hscv sets are marked as experimental.

2015-07-24 00:05  xavier

	* [r14456] src/system/xc_ks_inversion.F90: Some literals were
	  missing the CNST macro.

2015-07-24 06:42  dannert

	* [r14457] src/basic/ialist.F90: nullify the ptr%next in the
	  ialist_insert

2015-07-24 07:03  dannert

	* [r14458] src/include/global.h: insert linebreaks in macro
	  definition of SAFE_ALLOCATE in global.h

2015-07-24 07:05  dannert

	* [r14459] src/grid/cube_function.F90,
	  src/grid/cube_function_inc.F90: Remove the USEage of the pfft
	  module. It is not necessary here.
	  Also some indentation changes and replace reference to the
	  first element of an array with the array itself in the call
	  to an MPI function.

2015-07-24 07:07  dannert

	* [r14460] src/math/fft.F90, src/math/fft_inc.F90,
	  src/math/fftw.F90, src/math/nfft.F90, src/math/pfft.F90,
	  src/math/pnfft.F90, src/td/pes_mask.F90, src/utils/convert.F90:
	  Use ISO_C_BINDINGs of the FFTW and the PFFT library.
	  Be aware that the array order of multidimensional arrays are
	  reversed in the calls to pfft library calls. Also the .._istart
	  arrays that
	  come back from pfft calls are 0-based instead of 1-based in the
	  rest of the
	  code.
	  
	  Now all the copied definitions in fftw.F90 and pfft.F90 are
	  deleted
	  and included from the include files of the libraries.

2015-07-24 09:54  mjv500

	* [r14461] testsuite/functionals/05-ks_inversion.test: updated test
	  file for KS inversion - it converges too quickly now

2015-07-24 19:25  dannert

	* [r14462] m4/fft.m4, src/math/fftw.F90: added configure test for
	  fftw3-mpi library to fix a bug with the serial runs.

2015-07-25 00:32  xavier

	* [r14463] src/grid/io_function_inc.F90: Some improvements in the
	  performance of writing cube files with the
	  IBM compiler.

2015-07-26 18:15  xavier

	* [r14464] src/grid/batch_ops_inc.F90: Array size assertion.

2015-07-26 18:33  xavier

	* [r14465] src/states/density.F90,
	  testsuite/finite_systems_3d/27-fine_mesh.test: Changed the way
	  the fine mesh density is calculation. Now
	  interpolation is done before squaring the orbitals. This requires
	  a
	  reorthogonalization step as well.

2015-07-27 18:52  xavier

	* [r14466] src/math/pfft.F90, src/math/pnfft.F90: Two modules from
	  the pfft/pnfft interface as private. This fixes
	  compilation with IBM xlf (but most likely breaks pfft/pnfft
	  compilation).

2015-07-28 11:35  umberto

	* [r14467] src/td/pes_mask_out_inc.F90: Fixing intent
	  inconsistencies introduced in r14460.

2015-07-28 11:39  umberto

	* [r14468] src/td/pes.F90, src/td/td.F90: pes_calc should be called
	  with iter instead of iter-1 and differentiate the value according
	  to the different method.

2015-07-28 20:53  xavier

	* [r14469] src/include/global.h: Removed the newlines inserted into
	  the SAFE_DEALLOCATE macros. Otherwise line reporting does not
	  work properly.

2015-07-29 09:02  dannert

	* [r14470] m4/fft.m4, m4/nfft.m4, m4/pfft.m4,
	  src/common-rules.make, src/math/fft.F90, src/math/fftw.F90:
	  Modified the autoconf macro for determining the include path
	  and libraries for the fftw and fftw-mpi usage.
	  
	  Now you have three possibilities to give the fftw libraries to
	  the
	  --with-fft-lib configure option:
	  
	  1. ".../../...libfftw3.a .../libfftw3-mpi.a ..." (static linking)
	  2. "-Lpath/to/lib -lfftw3-mpi -lfftw3 ..." (dynamic linking)
	  3. "/prefix/path/to/lib" (give only the prefix, lib and include
	  subdirs are tested then)

2015-07-29 13:23  adelgado

	* [r14472] src/hamiltonian/pcm.F90,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.01-ground_state.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.02-td_prop.inp:
	  - All the input variables related to PCM (some of them renamed)
	  have been added the prefix Pcm.
	  - Variable descriptions have been updated.
	  - Input files 29-pcm_chlorine_anion.01-ground_state.inp and
	  29-pcm_chlorine_anion.02-td_prop.inp were modified accordingly to
	  the renamed PCM variables.

2015-07-29 13:46  umberto

	* [r14473] src/utils/photoelectron_spectrum.F90: Implemented an
	  index reordering when combining kpoint and gpoint meshes in the
	  photolectron spectrum. It took ma a while to figure this out and
	  I hope now the photoemission for semi-periodic systems is working
	  correctly. Is there any reason why in octopus we choose the Bloch
	  phase to be exp(-ik*r) instead of the textbook exp(ik*r)?

2015-07-29 14:34  dannert

	* [r14474] m4/pfft.m4, m4/pnfft.m4: Modified again the autoconf
	  macros for pfft. Now testing pfft
	  also for the Fortran 2003 interfaces. Reintroduced the
	  --with-mpifftw-prefix for the FFTW-MPI bindings used for pfft.

2015-07-29 14:55  adelgado

	* [r14475] src/hamiltonian/pcm.F90,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.01-ground_state.inp,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.02-td_prop.inp:
	  - replacing the prefix 'Pcm' by 'PCM' as suggested by Xavier.

2015-07-29 23:39  xavier

	* [r14476] configure.ac, m4/fft.m4, m4/nfft.m4, m4/pfft.m4,
	  m4/pnfft.m4, src/common-rules.make: Modernized version of the
	  fftw detection configure script. It now uses
	  the --with-fftw-prefix flags and checks for the multithreaded and
	  MPI
	  versions. I renamed it from ACX_FFT to ACX_FFTW, since for a
	  while
	  this macro has only checked for fftw.

2015-07-29 23:41  xavier

	* [r14477] m4/fftw.m4: Forgot the new macro file.

2015-07-29 23:53  xavier

	* [r14478] src/hamiltonian/pcm.F90: Removed a single quote from a
	  comment.

2015-07-29 23:55  xavier

	* [r14479] src/frozen/base_config.F90, src/frozen/base_density.F90,
	  src/frozen/base_functional.F90, src/frozen/base_geom.F90,
	  src/frozen/base_hamiltonian.F90, src/frozen/base_handle.F90,
	  src/frozen/base_model.F90, src/frozen/base_potential.F90,
	  src/frozen/base_states.F90, src/frozen/base_system.F90,
	  src/frozen/base_term.F90, src/frozen/basis.F90,
	  src/frozen/domain.F90, src/frozen/fio_config.F90,
	  src/frozen/fio_curvilinear.F90, src/frozen/fio_simul_box.F90,
	  src/frozen/tdict_inc.F90, src/frozen/thash_inc.F90: Removed some
	  pointless 'only' statements from module loading.

2015-07-30 01:36  xavier

	* [r14480] src/math/pfft.F90: * Fixed the compilation of pfft by
	  declaring as public all the required
	  objects.
	  
	  * Removed initial & from continuation lines and fixed
	  indentation.

2015-07-30 01:42  xavier

	* [r14481] src/math/pfft.F90: Fixed compilation without pfft.

2015-07-30 01:46  xavier

	* [r14482] configure.ac, m4/pfft.m4: * Removed the option
	  --with-mpifft-prefix, otherwise we might end up
	  trying to link with two different versions of fftw. The mpi
	  version of
	  fftw must be given through --with-fftw-prefix.
	  
	  * Moved all the fft libraries together in configure.ac.

2015-07-30 09:33  dannert

	* [r14485] m4/fftw.m4: Run the autoconf test for the distributed
	  FFTW
	  only if MPI is enabled and found.
	  
	  Define CFLAGS_FFTW which are needed for the nfft checks.

2015-07-30 10:29  dannert

	* [r14486] src/math/fftw.F90, src/math/pfft.F90,
	  src/math/pnfft.F90: Repaired the *_params_m modules for the FFT
	  libraries.
	  
	  The idea of having these modules separate with public
	  accessibility is that
	  all symbols from the libraries can be used. This is especially
	  necessary as pnfft depends on the symbols in pfft and pfft
	  depends
	  on symbols in fftw-mpi.
	  If one restricts the access to the symbols of the include files,
	  one has to pass all needed references explicitly,
	  and this without knowing for example what pfft needs from fftw.
	  
	  The only thing, one have to be aware is that no more than one
	  *_params_m module can be USEd in other modules, otherwise symbols
	  are included twice (leading to errors).

2015-07-30 19:05  xavier

	* [r14487] src/frozen/iterator_inc.F90, src/frozen/tdarr_inc.F90,
	  src/frozen/thash_inc.F90: Removed some more 'only' statements to
	  try to avoid an ICE with the
	  Intel compiler.

2015-07-30 19:47  xavier

	* [r14489] src/frozen/fio_density.F90, src/frozen/fio_external.F90,
	  src/frozen/fio_grid.F90, src/frozen/intrpl_inc.F90,
	  src/frozen/simulation.F90, src/frozen/tlist_inc.F90,
	  src/frozen/tsingle_inc.F90: Removed more only statements.

2015-08-01 01:48  xavier

	* [r14490] src/system/v_ks.F90: Bugfix: The van der Waals potential
	  was not considered in the
	  calculation of intnvxc, so the total energy was not correct.

2015-08-01 06:07  xavier

	* [r14491] src/hamiltonian/vdw_ts.F90, src/system/v_ks.F90,
	  testsuite/functionals/08-vdw_ts.01-gs.inp,
	  testsuite/functionals/08-vdw_ts.test: * The VDWCorrection is now
	  applied self-consistently by default, this
	  can be disabled through the variable VDWSelfConsistent.
	  
	  * Updated the corresponding test and corrected the label for some
	  matches.

2015-08-01 15:50  xavier

	* [r14492] testsuite/functionals/09-vdw_ts_sc.01-gs.inp,
	  testsuite/functionals/09-vdw_ts_sc.test,
	  testsuite/functionals/Makefile.am: Added a test for
	  self-consistent van der Waals.

2015-08-01 17:54  xavier

	* [r14493] src/system/v_ks.F90: The variable VDWCorrection now
	  takes options, vdw_ts is the only one
	  available for now.

2015-08-01 19:36  xavier

	* [r14494] build/mk_varinfo.pl, src/hamiltonian/gauge_field.F90,
	  src/main/geom_opt.F90, src/main/static_pol.F90,
	  src/main/test.F90, src/species/species.F90,
	  src/sternheimer/em_resp.F90, src/system/output.F90,
	  src/system/output_etsf_inc.F90, src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90, src/system/v_ks.F90,
	  src/td/pes_mask_out_inc.F90, src/utils/convert.F90: Instead of
	  OPTION_OPTNAME, now the parser interface defines
	  OPTION__VARNAME__OPTNAME.

2015-08-01 21:31  xavier

	* [r14495] testsuite/functionals/08-vdw_ts.01-gs.inp,
	  testsuite/functionals/09-vdw_ts_sc.01-gs.inp: Updated the
	  VDWCorrection variable in the tests.

2015-08-04 06:08  xavier

	* [r14496] src/system/forces.F90: Renamed a variable called i to
	  iatom.

2015-08-04 06:10  xavier

	* [r14497] src/hamiltonian/epot.F90, src/system/forces.F90,
	  src/system/v_ks.F90: The forces now include the van der Waals
	  terms.

2015-08-04 13:31  irina

	* [r14498] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Reorganising em_resp for
	  incorporation of magneto-optical response. Moving the loop for
	  idir inside the loops for iomega and ifactor so that first-order
	  responses for all directions are known before calculation of the
	  second-order response in the presence of the magnetic field.

2015-08-04 13:44  irina

	* [r14499] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Indentation change for r14498.

2015-08-05 09:31  irina

	* [r14500] src/sternheimer/em_resp.F90: Circular dichroism and
	  dielectric constant should be calculated in em_resp only for
	  electric perturbations.

2015-08-07 01:17  xavier

	* [r14501] src/states/Makefile.am, src/states/density.F90,
	  src/states/density_inc.F90, src/system/forces.F90,
	  src/system/forces_inc.F90: Moved the accumulation of the density
	  gradient to the density_m
	  module.

2015-08-10 09:16  irina

	* [r14502] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_inc.F90: Added calculation of magnetic
	  susceptibility for periodic systems.

2015-08-10 17:04  irina

	* [r14503] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Change of formatting for r14502.

2015-08-11 12:27  irina

	* [r14504] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Added calculation of
	  magneto-optical response for finite systems in Sternheimer
	  approach.

2015-08-12 10:27  irina

	* [r14505] src/sternheimer/em_resp.F90,
	  src/sternheimer/em_resp_inc.F90: Added calculation of
	  magneto-optical response for periodic systems.

2015-08-12 13:46  micael

	* [r14506] src/hamiltonian/energy.F90: Bug fix: vdw energy
	  component was not initialized nor copied. This should fix the
	  valgrind errors in estocastico.

2015-08-12 19:16  cborca

	* [r14509] src/hamiltonian/vdw_ts_low.c: Implementation of the
	  TS-vdW forces.

2015-08-12 22:11  xavier

	* [r14510] src/frozen/base_model.F90: Removed a couple 'only's that
	  can cause trouble with the Intel compiler.

2015-08-13 10:51  ravindra

	* [r14511] src/ions/simul_box.F90: updating the warning regarding
	  the declaration of Lsize along with LatticeVectors

2015-08-20 14:39  adelgado

	* [r14512] src/hamiltonian/pcm.F90,
	  testsuite/finite_systems_3d/29-pcm_chlorine_anion.test: -
	  pcm.F90: - van der Waals (vdW) radii for elements H-Xe have been
	  defined.
	  - the new variable 'PCMSpheresOnH' allows to add spheres centered
	  on the Hydrogen atoms to build the cavity surface. The default is
	  .false.
	  - The default for 'PCMRadiusScaling' is set to 1.2 as it is
	  defined in other quantum chemistry programs building the cavity
	  surface from the vdW radii.
	  - testsuite/finite_systems_3d/29-pcm_chlorine_anion.test: target
	  numbers have been updated accordingly to the vdW radius of
	  chlorine.

2015-08-22 01:21  adelgado

	* [r14513] src/hamiltonian/pcm.F90: - correcting the default value
	  in the documentation of the the variable PCMRadiusScaling.

2015-08-24 21:35  xavier

	* [r14514] src/hamiltonian/hirshfeld.F90: Bugfix: Integration was
	  missing in the calculation of the derivatives
	  of the Hirshfeld volumes.

2015-08-26 18:53  xavier

	* [r14515] m4/libxc.m4, src/hamiltonian/functionals.F90: Support
	  for the trunk version of libxc.

2015-08-31 02:41  xavier

	* [r14516] src/species/ps.F90: Bugfix: Octopus was trying to end a
	  non-allocated array of splines. This should fix the problem with
	  the g95 buildbots.

2015-09-03 10:12  huebener

	* [r14517] src/hamiltonian/scdm.F90: Documentation of SCDM input
	  variables

2015-09-03 10:20  huebener

	* [r14518] src/hamiltonian/scdm.F90: Typo in documentation

2015-09-04 15:29  huebener

	* [r14519] src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90:
	  parallelization of some matrix products in the SCDM procedure.

2015-09-04 17:24  huebener

	* [r14520] src/hamiltonian/scdm_inc.F90: add missing precompiler
	  flag

2015-09-04 17:33  huebener

	* [r14521] src/hamiltonian/scdm_inc.F90: remove empty line

2015-09-04 17:38  huebener

	* [r14522] src/hamiltonian/scdm_inc.F90: add missing precompiler
	  flag

2015-09-05 04:31  xavier

	* [r14523] src/basic/profiling.F90, src/grid/mesh_init.F90,
	  src/states/states_block.F90, src/states/states_block_inc.F90,
	  src/system/eigen_lobpcg.F90, src/system/eigen_lobpcg_inc.F90,
	  src/system/xc_kli_inc.F90, src/system/xc_kli_pauli_inc.F90,
	  src/system/xc_oep.F90, src/system/xc_oep_inc.F90,
	  src/system/xc_oep_sic_inc.F90, src/system/xc_oep_x_inc.F90: *
	  Moved the few profiling objects in profiling_m to their own
	  modules.
	  * The label argument to profiling_in is now mandatory.

2015-09-05 10:24  philipp

	* [r14524] src/td/pes.F90, src/td/pes_rc.F90: Removing filenames
	  variable from type pes_rc & minor corrections.

2015-09-05 10:50  philipp

	* [r14525] src/td/pes.F90, src/td/pes_rc.F90: Adding Volkov phase.
	  
	  Conflicts:
	  src/td/pes_rc.F90

2015-09-05 11:24  philipp

	* [r14526] src/td/pes_rc.F90: Forgot a variable declaration.

2015-09-05 12:09  philipp

	* [r14527] src/td/pes_rc.F90: A similar issue.

2015-09-05 14:51  philipp

	* [r14528] src/basic/io_binary_f.F90,
	  src/basic/io_binary_f_inc.F90, src/states/restart.F90,
	  src/states/restart_inc.F90, src/td/pes_rc.F90: Adding option to
	  calculate spectrum during time propagation.
	  
	  Conflicts:
	  src/td/pes_rc.F90

2015-09-05 15:31  xavier

	* [r14529] src/states/density.F90: Fixed OpenCL compilation.

2015-09-05 15:38  philipp

	* [r14530] src/td/pes_rc.F90: Declaring two mpi variables only when
	  needed.

2015-09-05 16:01  philipp

	* [r14531] src/td/pes_rc.F90: Removing obsolete argument from
	  pes_rc_calc_rcphase routine.

2015-09-05 16:12  philipp

	* [r14532] src/td/pes.F90, src/td/pes_rc.F90, src/td/td.F90: *
	  Partly reverting r14468.
	  * Renaming variables for clarification purposes.
	  
	  Conflicts:
	  src/td/pes_rc.F90

2015-09-05 16:17  xavier

	* [r14533] src/grid/boundaries_inc.F90: Fixed compilation with
	  OpenCL and MPI.

2015-09-05 17:09  philipp

	* [r14534] src/td/pes_rc.F90: Another declaration which was
	  missing.

2015-09-05 17:21  philipp

	* [r14535] src/td/pes.F90, src/td/pes_rc.F90: variable iwrite
	  should be better called save_iter as well.

2015-09-05 17:44  philipp

	* [r14536] src/td/pes.F90, src/td/pes_rc.F90, src/td/td.F90: Moving
	  save_iter into type pes_rc to avoid duplication.

2015-09-05 19:57  philipp

	* [r14537] src/td/pes_rc.F90: Another variable which is used for
	  mpi only.

2015-09-06 11:59  huebener

	* [r14538] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90,
	  src/td/propagator.F90: For scdm_EXX in td mode, the Kohn-Sham
	  states are overwritten by the SCDM states to make use of their
	  locality when evaluating the exchange operator. This should also
	  be done in gs mode, but not sure if it is possible to do with the
	  iterative solvers.

2015-09-06 12:04  huebener

	* [r14539] src/td/propagator.F90: For clarity add flag from the
	  hamiltonian object.

2015-09-06 12:07  huebener

	* [r14540] src/hamiltonian/scdm_inc.F90: precompiler flags

2015-09-06 15:13  xavier

	* [r14541] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90,
	  src/main/gcm.F90, src/opt_control/initst.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/opt_control/target_classical_inc.F90,
	  src/opt_control/target_density_inc.F90,
	  src/opt_control/target_excited_inc.F90,
	  src/opt_control/target_exclude_inc.F90,
	  src/opt_control/target_groundstate_inc.F90,
	  src/opt_control/target_gstransformation_inc.F90,
	  src/opt_control/target_hhg_inc.F90,
	  src/opt_control/target_local_inc.F90,
	  src/opt_control/target_spin_inc.F90,
	  src/opt_control/target_tdlocal_inc.F90,
	  src/opt_control/target_userdefined_inc.F90,
	  src/opt_control/target_velocity_inc.F90, src/scf/rdmft.F90,
	  src/states/density.F90, src/states/linear_response_inc.F90,
	  src/states/states.F90, src/states/states_calc_inc.F90,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90,
	  src/system/eigen_evolution_inc.F90,
	  src/system/eigen_lobpcg_inc.F90, src/system/eigen_mg_inc.F90,
	  src/system/forces.F90, src/system/linear_solver_inc.F90,
	  src/system/subspace_inc.F90, src/system/xc_kli_inc.F90,
	  src/system/xc_oep_inc.F90, src/td/propagator_rk.F90: Renamed
	  st%X(psi) to st%X(dontusepsi) to warn users about not using
	  this for new code and to make it easier to detect and replace.

2015-09-06 15:35  xavier

	* [r14542] src/states/states.F90, src/states/states_calc_inc.F90,
	  testsuite/components/09-qr.01-real.inp,
	  testsuite/components/09-qr.02-complex.inp,
	  testsuite/components/09-qr.test,
	  testsuite/components/Makefile.am: Removed the QR
	  orthogonalization.

2015-09-06 15:48  xavier

	* [r14543] src/hamiltonian/scdm_inc.F90: Fixed compilation in
	  serial, broken by changes in SCDM. (Hannes, I
	  think this code does not work.)

2015-09-06 15:59  xavier

	* [r14544] src/hamiltonian/scdm_inc.F90: Replaced an instance of
	  st%X(dontusepsi) by states_get_state.

2015-09-06 17:05  xavier

	* [r14545] src/hamiltonian/scdm.F90, src/states/states.F90,
	  src/states/states_calc_inc.F90, src/states/states_dim.F90: Using
	  OPTION__ values for orthogonalization values.

2015-09-06 21:46  xavier

	* [r14546] src/states/states_calc_inc.F90: The "serial"
	  orthogonalization now works with states parallelization,
	  without using scalapack.

2015-09-06 21:54  xavier

	* [r14547] src/system/subspace.F90, src/system/subspace_inc.F90:
	  OPTION__ values are used in subspace_m.

2015-09-06 22:07  xavier

	* [r14548] src/states/states_calc_inc.F90: Removed a debug barrier
	  that accidentaly went in in my last commit.

2015-09-07 22:47  xavier

	* [r14549] src/system/subspace.F90, src/system/subspace_inc.F90:
	  Changed the implementation for subspace diagonalization for a
	  more
	  efficient algorithm.

2015-09-08 03:16  xavier

	* [r14550] src/states/states_calc_inc.F90: Defined a function do
	  the gathering of arrays distributed by states.

2015-09-08 03:49  xavier

	* [r14551] src/states/states_calc.F90,
	  src/states/states_calc_inc.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90: The standard subspace
	  diagonalization now works with state
	  parallelization. With this, it is possible to do ground-state
	  calculations parallel in states without Scalapack.

2015-09-08 16:10  xavier

	* [r14552] src/scf/ground_state.F90, src/states/states.F90,
	  testsuite/components/07-cholesky_serial.01-real.inp,
	  testsuite/components/07-cholesky_serial.02-complex.inp,
	  testsuite/components/07-cholesky_serial.test,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp: *
	  State-parallelization of the ground state is now declared
	  experimental.
	  
	  * The scalapack orthogonalization is only used when scalapack is
	  available.
	  
	  * The cholesky serial test can now run in parallel.

2015-09-09 00:15  xavier

	* [r14553] src/scf/lcao.F90: Using OPTION__ in lcao_m.

2015-09-11 18:52  xavier

	* [r14554] src/basic/unit_system.F90, src/ions/atom.F90,
	  src/ions/geometry.F90, src/ions/read_coords.F90: New variable
	  UnitsXYZFiles. When set to angstrom, Octopus will read
	  and write xyz in angstrom rather than the input file units.

2015-09-12 00:47  xavier

	* [r14555] src/system/subspace_inc.F90: One assertion to avoid
	  state parallelization in non-parallel code.

2015-09-12 03:28  xavier

	* [r14556] src/hamiltonian/scdm_inc.F90: MPI_IN_PLACE cannot be
	  used unless the macro HAVE_MPI2 is checked. For
	  reductions calling comm_allreduce is simpler in any case.

2015-09-12 05:54  xavier

	* [r14557] src/hamiltonian/scdm.F90: I forgot to commit changes to
	  one file.

2015-09-12 19:49  huebener

	* [r14558] src/hamiltonian/scdm_inc.F90: revert change from
	  revision 14544 becasue it produces seg fault. Probably because
	  scdm%st is not initialized the same way as the general st object.
	  This is a temporary fix.

2015-09-12 19:58  huebener

	* [r14559] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/td/propagator.F90, src/td/td.F90:
	  remove the runmode dependence in scdm_init() by adding optional
	  argument and also put scdm_init() in runmode td in a better
	  place.

2015-09-13 11:45  huebener

	* [r14560] src/td/td.F90: add missing module use statement that
	  somehow wasnt included in last commit.

2015-09-13 12:31  huebener

	* [r14561] src/hamiltonian/scdm_inc.F90: replace st%X(dontusepsi)
	  with get/set_state where possible.

2015-09-13 15:08  xavier

	* [r14562] src/grid/subarray.F90, src/grid/subarray_inc.F90: *
	  Improved the subarray_gather function.
	  * The get_blocks function should not be public.

2015-09-13 19:09  xavier

	* [r14563] share/opencl/subarray.cl, src/grid/subarray_inc.F90:
	  Optimization of the OpenCL version of the subarray_gather_batch
	  routine.

2015-09-13 19:26  xavier

	* [r14564] share/opencl/density.cl, share/opencl/forces.cl,
	  share/opencl/operate.cl, share/opencl/phase.cl,
	  share/opencl/subarray.cl: Some missing "restrict" declarations.

2015-09-14 20:35  huebener

	* [r14565] src/grid/par_vec_inc.F90: condition to make it save to
	  call vec_allgather() without domain parallelization. There is the
	  same statement in vec_gather()

2015-09-15 08:50  huebener

	* [r14566] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90: To
	  restructure parallelism of SCDM routines, I removed the module
	  specific state parallelisation. The state object scdm%st that
	  holds the localized states now has the identical layout as the
	  general st objects, which allows simple copying etc. and there is
	  no more reference to X(dontusepsi). This is work in progress and
	  needs an additional layer of state parallelisation.

2015-09-15 09:15  huebener

	* [r14567] src/hamiltonian/scdm_inc.F90: Missing MPI flags.

2015-09-16 15:32  huebener

	* [r14568] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90: States parallelization for SCDM.
	  Works in combination with domain parallelization and is intended
	  to be used as such. In the exchange operator the processors of
	  the domain group are used to distribute the sum over orbitals.

2015-09-17 09:36  huebener

	* [r14569] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90, src/hamiltonian/scdm.F90,
	  src/hamiltonian/scdm_inc.F90: Profilers for the different parts
	  of the SCDM procedure and the SCDM exchange operator. Removed
	  cpu_time calls.

2015-09-17 09:51  huebener

	* [r14570] src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90: Clean up
	  of code: typos in comments, remove commented unused code, correct
	  indentations.

2015-09-17 12:41  huebener

	* [r14571] src/hamiltonian/scdm_inc.F90: Further parallelization of
	  SCDM procedure. Specifically a costly matrix-vector product is
	  fully distributed now and the density matrix of Kohn-Sham states
	  is only referenced on the root process (and its the redundant
	  copy has disappeared). This will hopefully be distributed with
	  scalapack.

2015-09-17 12:54  huebener

	* [r14572] src/hamiltonian/scdm_inc.F90: Added MPI flags that were
	  missing in previous commit.

2015-09-17 17:37  xavier

	* [r14573] src/hamiltonian/hirshfeld.F90: Fixed a couple of small
	  errors in the formula for the effective volume
	  derivative.

2015-09-18 08:39  huebener

	* [r14574] src/hamiltonian/scdm_inc.F90: Removed an unecessary mesh
	  global operation (and moved some deallocations).

2015-09-18 11:49  huebener

	* [r14575] src/td/td_write.F90: Bug fix(?): the projections were
	  only calculated as diagonal elements, but stored as a full
	  matrix. Now fixed to compute all pairs of projections.

2015-09-18 22:45  xavier

	* [r14576] src/hamiltonian/hirshfeld.F90: More corrections to the
	  Hirshfeld volume derivatives.

2015-09-21 07:55  huebener

	* [r14577] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_inc.F90: remove some profiling
	  instances in SCDM exchange operator

2015-09-21 08:58  huebener

	* [r14578] src/ions/kpoints.F90, src/states/smear.F90: User defined
	  k-points are allowed to have zero weight. This is intended for
	  propagating a band structure sampled along a specific path in the
	  BZ. Or generally to allow for inhomogeneous k-sampling in
	  propagation.

2015-09-21 09:56  jrfsousa

	* [r14579] src/frozen/base_model.F90, src/frozen/basis.F90,
	  src/frozen/domain.F90, src/frozen/functional.F90,
	  src/frozen/interface_xc.F90, src/frozen/intrpl.F90,
	  src/frozen/simulation.F90, src/frozen/storage.F90,
	  src/frozen/strng.F90: Frozen:
	  
	  base_model.F90:
	  
	  * Code cleanup.
	  
	  * Reflection of changes.
	  
	  basis.F90, functional.F90, interface_xc.F9, intrpl.F90:
	  
	  * Code cleanup.
	  
	  domain.F90:
	  
	  * Major rewrite.
	  
	  simulation.F90:
	  
	  * Code simplification and cleanup.
	  
	  storage.F90:
	  
	  * Code cleanup.
	  
	  * Add multiplication by a real procedure (storage_mlt).
	  
	  strng.F90:
	  
	  * Code clenaup.
	  
	  * Add type (de)allocation procedures (strng_del, srng_new).

2015-09-21 10:17  jrfsousa

	* [r14580] src/frozen/Makefile.am: Frozen:
	  
	  Makefile.am:
	  
	  * Add missing dependency.

2015-09-21 11:43  philipp

	* [r14581] src/td/pes_rc.F90: Renamed variables & changing
	  documentation.

2015-09-21 11:49  philipp

	* [r14582] src/td/pes_rc.F90: Using an array for coordinates of the
	  sample points.

2015-09-21 12:10  philipp

	* [r14583] src/td/pes_rc.F90: Replacing MPI_Allreduce by routine
	  from comm_m module.

2015-09-21 12:17  jrfsousa

	* [r14584] src/frozen/base_density.F90,
	  src/frozen/base_potential.F90, src/frozen/fio_config.F90,
	  src/frozen/fio_curvilinear.F90, src/frozen/fio_density.F90,
	  src/frozen/fio_external.F90, src/frozen/fio_grid.F90,
	  src/frozen/fio_hamiltonian.F90, src/frozen/fio_handle.F90,
	  src/frozen/fio_mesh.F90, src/frozen/fio_model.F90,
	  src/frozen/fio_simul_box.F90, src/frozen/fio_simulation.F90,
	  src/frozen/fio_states.F90, src/frozen/fio_system.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90, src/frozen/intrpl_inc.F90,
	  src/frozen/template.h: Frozen:
	  
	  base_*.F90, frozen_*.F90:
	  
	  * Reflect changes.
	  
	  * Some code cleanup.
	  
	  fio_*.F90, intrpl_inc.F90:
	  
	  * Code cleanup.
	  
	  template.h:
	  
	  * Extend EXTERNAL macro.

2015-09-21 12:25  philipp

	* [r14585] src/td/pes_rc.F90: Further replacing MPI_Allreduce &
	  changing call to pes_rc_calc_rcphase.

2015-09-21 12:47  philipp

	* [r14586] src/td/pes_rc.F90: Preparing things to use
	  mesh_interpolation_m.

2015-09-21 12:52  jrfsousa

	* [r14587] src/frozen/frozen_config.F90,
	  src/frozen/frozen_density.F90, src/frozen/frozen_external.F90,
	  src/frozen/frozen_hamiltonian.F90, src/frozen/frozen_handle.F90,
	  src/frozen/frozen_model.F90, src/frozen/frozen_states.F90,
	  src/frozen/frozen_system.F90: Frozen:
	  
	  frozen_*.F90:
	  
	  * Code cleanup.

2015-09-21 13:17  philipp

	* [r14588] src/td/pes_rc.F90: Using an interpolated spherical grid
	  if PhotoelectronspectrumPoints are
	  not given.

2015-09-21 13:30  jrfsousa

	* [r14589] src/frozen/Makefile.am, src/frozen/live_config.F90,
	  src/frozen/live_hamiltonian.F90, src/frozen/live_handle.F90:
	  Frozen:
	  
	  live_*.F90:
	  
	  * Code cleanup.

2015-09-21 13:35  philipp

	* [r14590] src/td/pes_rc.F90: Updating variable definitions.

2015-09-21 14:32  philipp

	* [r14591] src/td/pes_rc.F90: Changing the output routine in
	  pes_rc.F90.

2015-09-21 15:39  philipp

	* [r14592] src/td/pes_rc.F90: Added a variable declaration at wrong
	  place.

2015-09-22 11:37  philipp

	* [r14593] src/td/pes_rc.F90: * Inserting if-statements for mpi
	  communication.
	  * Using correct mpi grp for wfftact.

2015-09-22 11:37  philipp

	* [r14594] src/td/pes_rc.F90: Setting default radius for spherical
	  grid.

2015-09-22 17:11  xavier

	* [r14595] src/hamiltonian/vdw_ts_low.c: Function arguments are now
	  more readable.

2015-09-22 19:19  xavier

	* [r14596] src/hamiltonian/vdw_ts.F90,
	  src/hamiltonian/vdw_ts_low.c: Simplified the force calculation in
	  vdW TS. This saves memory and
	  computing time.

2015-09-23 23:55  xavier

	* [r14597] src/hamiltonian/vdw_ts_low.c: Added an LGPL copyright
	  notice to the TS vdW C code.

2015-09-24 10:03  philipp

	* [r14598] src/td/pes_rc.F90: Bugfix in the routine to calculate
	  the Volkov phase.

2015-09-24 14:53  jjornet

	* [r14599] src/utils/local_multipoles.F90: - Documentation added
	  for undocumented variables.

2015-09-25 07:48  philipp

	* [r14600] src/td/pes_rc.F90: Inserting default values in
	  documentation.

2015-09-25 13:01  jjornet

	* [r14601] src/utils/local_multipoles.F90: - Add space separation
	  between variable documentation.
	  - Modified the definition of bsize for Bader shapes.

2015-09-26 06:21  xavier

	* [r14602] src/hamiltonian/vdw_ts_low.c: Removed some unnecessary
	  code and more consistent variable names.

2015-09-28 00:59  xavier

	* [r14603] src/hamiltonian/vdw_ts_low.c,
	  testsuite/functionals/09-vdw_ts_sc.test: Bugfix in the
	  calculation of the vdW potential.

2015-09-28 13:31  jjornet

	* [r14604]
	  testsuite/finite_systems_3d/30-local_multipoles.01-gs.inp,
	  testsuite/finite_systems_3d/30-local_multipoles.02-multipoles.inp,
	  testsuite/finite_systems_3d/30-local_multipoles.test,
	  testsuite/finite_systems_3d/Makefile.am: - Added a test for
	  local_multipoles utility.

2015-09-28 18:41  xavier

	* [r14605] src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/hamiltonian/vxc_inc.F90, src/main/geom_opt.F90,
	  src/scf/lcao_inc.F90, src/system/current.F90,
	  src/system/output.F90, src/td/pes_flux.F90,
	  src/td/pes_mask_out_inc.F90, src/utils/convert.F90,
	  src/utils/local_write.F90: Change the C_OUTPUT_HOW_* options to
	  OPTION__OUTPUTHOW__*.

2015-09-28 20:48  xavier

	* [r14606] src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/system/output_h_inc.F90: * Defined a function to output
	  vector quantities. If not supported by
	  the requested format (true for all formats at the moment),
	  individual
	  files for each direction are created.
	  
	  * This new function is used to output the current.

2015-09-28 21:16  xavier

	* [r14607] src/grid/Makefile.am, src/grid/io_function.F90,
	  src/grid/io_function_inc.F90, src/grid/vtk.F90,
	  src/grid/vtk_inc.F90, src/td/pes_mask.F90,
	  src/td/pes_mask_out_inc.F90: Moved the vtk output functions to
	  their own module.

2015-09-28 23:34  xavier

	* [r14608] src/system/output_states_inc.F90: The polarization
	  density is also output as a vector.

2015-09-28 23:46  xavier

	* [r14609] src/grid/io_function_inc.F90, src/grid/vtk.F90,
	  src/grid/vtk_inc.F90: Implemented the output of vector fields in
	  VTK format.

2015-09-29 04:47  xavier

	* [r14610] src/grid/vtk.F90, src/grid/vtk_inc.F90,
	  src/system/output.F90: Added geometry output in VTK format.

2015-09-29 12:56  micael

	* [r14611] share/pseudopotentials/hscv,
	  share/pseudopotentials/hscv/lda, share/pseudopotentials/hscv/pbe:
	  Setting svn:ignore property.

2015-09-29 14:52  micael

	* [r14612] src/states/states_io.F90: Increasing lenght of temporary
	  string.

2015-09-29 17:55  xavier

	* [r14613] src/grid/vtk.F90: The vtk geometry file can now be
	  written in binary format.

2015-09-29 17:56  xavier

	* [r14614] src/species/ps.F90: Check for an allocated array before
	  ending objects.

2015-10-01 04:39  xavier

	* [r14615] src/grid/io_function_inc.F90: Implementation of vector
	  output with domain parallelization.

2015-10-01 05:18  xavier

	* [r14616] src/grid/io_function_inc.F90, src/grid/vtk_inc.F90: *
	  Fixed serial compilation.
	  * The name of the field is included in vectorial vtk files.

2015-10-01 13:09  huebener

	* [r14617] src/states/states.F90: Missing copy of scalapack flag in
	  states_copy()

2015-10-01 15:02  huebener

	* [r14618] src/hamiltonian/scdm.F90, src/hamiltonian/scdm_inc.F90:
	  Use scalapack to compute the rank-revealing QR on the transpose
	  of the states array (density matrix) in the SCDM procedure. The
	  serial lapack version has been preserved.

2015-10-01 15:18  xavier

	* [r14619] src/hamiltonian/scdm_inc.F90: Fixed non-scalapack
	  compilation.

2015-10-01 17:17  xavier

	* [r14620] src/grid/io_function_inc.F90: Do not generate individual
	  component files when the format supports
	  vectors.

2015-10-01 17:31  xavier

	* [r14621] src/grid/io_function_inc.F90: Bugfix: Do not try to
	  output individual files when there is nothing
	  left to do.

2015-10-02 22:46  xavier

	* [r14622] src/hamiltonian/vdw_ts.F90, src/main/Makefile.am,
	  src/main/gcm.F90, src/main/main.F90, src/main/run.F90: Removed
	  the GCM implementation.

2015-10-03 13:29  xavier

	* [r14623] src/hamiltonian/species_pot.F90: Improved check for the
	  atomic density. Fixes a problem with g95.

2015-10-03 13:39  xavier

	* [r14624] src/frozen/fio_mesh.F90, src/grid/index.F90,
	  src/grid/mesh.F90, src/grid/mesh_init.F90: Converted pointers to
	  allocatables in index_t and mesh_t.

2015-10-03 18:33  xavier

	* [r14625] testsuite/oct-run_testsuite.sh.in: Added David and I to
	  the copyright notice of the testsuite script.

2015-10-03 21:10  xavier

	* [r14626] src/hamiltonian/species_pot.F90,
	  testsuite/periodic_systems/11-silicon_force.01-gs.inp,
	  testsuite/periodic_systems/11-silicon_force.test: * The maximum
	  radius for periodicity is calculated from the atomic
	  density instead of the orbitals.
	  
	  * One test needs to be updated.

2015-10-03 21:22  xavier

	* [r14627] testsuite/periodic_systems/12-boron_nitride.test:
	  Another test needed to be updated.

2015-10-03 22:36  xavier

	* [r14628] testsuite/finite_systems_3d/30-local_multipoles.test:
	  Corrected keyword in the multipoles test files.

2015-10-04 01:45  xavier

	* [r14629] src/math/lalg_basic_blas_inc.F90: Removed a
	  PUSH_SUB/POP_SUB.

2015-10-04 02:12  xavier

	* [r14630] src/utils/local_multipoles.F90: The local_multipoles
	  utility calls some MPI routines. So it needs to
	  call MPI_Init.

2015-10-04 03:48  xavier

	* [r14631] src/grid/subarray.F90: * Fixed memory leak.
	  * Changed pointers by allocatables.

2015-10-04 04:33  xavier

	* [r14632] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/projector.F90: Converted pointers to allocatables
	  in hamiltonian_base_m.

2015-10-04 05:40  xavier

	* [r14633] src/grid/boundaries.F90, src/grid/nl_operator.F90,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_inc.F90: Removed some unnecesary
	  preprocessor macros.

2015-10-04 05:57  xavier

	* [r14634] src/hamiltonian/hamiltonian_base_inc.F90: Fixed OpenCL
	  compilation.

