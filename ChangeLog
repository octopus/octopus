2006-02-16 23:22  appel

	* AUTHORS: Adding current e-mail addresses.

2006-02-16 17:23  marques

	* AUTHORS: updated list

2006-02-16 16:50  marques

	* external_libs/: expokit/COPYING, expokit/Copyright,
	  metis-4.0/COPYING, metis-4.0/Copyright: Changed filenames from
	  Copyright COPYING

2006-02-16 16:49  marques

	* configure.ac, liboct/Makefile.am, liboct/oct_f.c,
	  build/acx_metis.m4, src/Makefile.am,
	  external_libs/metis-4.0/Makefile.am: *) Metis is now only
	  compiled when needed *) changed version number to 2.0 *) octopus
	  fails a couple of tests in my machine. I will take a look before
	  committing

2006-02-16 16:02  appel

	* liboct/: Makefile.am, oct_f.c: The header file metis.h was still
	  included as <metis/metis.h>. Now we use the one that we ship in
	  external_libs.

2006-02-16 12:37  appel

	* debian/changelog: Switching from 1.99devel to 2.0 for the
	  upcoming release.

2006-02-16 12:36  appel

	* configure.ac, build/acx_metis.m4: I forgot to treat the
	  HAVE_METIS properly, when I added the library to external_libs.
	  Now HAVE_METIS is enabled by default, but can be disabled with
	  --disable-metis at configure time.

2006-02-13 16:58  acastro

	* src/spectrum.F90: Bug fixed.	The units were not properly handled
	  in the cross_section_tensor subroutine.

2006-02-12 23:13  acastro

	* testsuite/rc_bugs/12-spin: Bug added.  Sorry, but I had to add
	  another bug, I think that it is important.  See the explanation
	  in the file. I will try to think about it the next days, to solve
	  it asap.

2006-02-09 23:38  appel

	* src/liboct_parser.F90: o Adding the full filename to the
	  variables error message.  o Removing stdin stuff completely.

2006-02-09 23:32  appel

	* Makefile.am: There was a line continuation \ missing. During make
	  install the share and testsuite directories have not been taken
	  into account.

2006-02-09 22:49  appel

	* src/out.F90: The compilation failed when using --with-netcdf. The
	  netcdf module doesn't have _m. Too much Perl :) ...

2006-02-09 21:43  appel

	* COPYING: Updating the top-level license file to account for
	  Expokit and Metis as 'external libraries'. I explicitely state in
	  the text, that both are _not_ GPL.

	  Please have a look if you agree with the style.

2006-02-09 21:39  appel

	* Makefile.am, configure.ac, external_libs/Makefile.am,
	  external_libs/expokit/Copyright,
	  external_libs/expokit/Makefile.am,
	  external_libs/expokit/expokit.f90, src/Makefile.am,
	  external_libs/metis-4.0/Copyright,
	  external_libs/metis-4.0/Makefile.am,
	  external_libs/metis-4.0/balance.c,
	  external_libs/metis-4.0/bucketsort.c,
	  external_libs/metis-4.0/ccgraph.c,
	  external_libs/metis-4.0/coarsen.c,
	  external_libs/metis-4.0/compress.c,
	  external_libs/metis-4.0/debug.c, external_libs/metis-4.0/defs.h,
	  external_libs/metis-4.0/estmem.c, external_libs/metis-4.0/fm.c,
	  external_libs/metis-4.0/fortran.c,
	  external_libs/metis-4.0/frename.c,
	  external_libs/metis-4.0/graph.c,
	  external_libs/metis-4.0/initpart.c,
	  external_libs/metis-4.0/kmetis.c,
	  external_libs/metis-4.0/kvmetis.c,
	  external_libs/metis-4.0/kwayfm.c,
	  external_libs/metis-4.0/kwayrefine.c,
	  external_libs/metis-4.0/kwayvolfm.c,
	  external_libs/metis-4.0/kwayvolrefine.c,
	  external_libs/metis-4.0/macros.h,
	  external_libs/metis-4.0/match.c,
	  external_libs/metis-4.0/mbalance.c,
	  external_libs/metis-4.0/mbalance2.c,
	  external_libs/metis-4.0/mcoarsen.c,
	  external_libs/metis-4.0/memory.c, external_libs/metis-4.0/mesh.c,
	  external_libs/metis-4.0/meshpart.c,
	  external_libs/metis-4.0/metis.h, external_libs/metis-4.0/mfm.c,
	  external_libs/metis-4.0/mfm2.c,
	  external_libs/metis-4.0/mincover.c,
	  external_libs/metis-4.0/minitpart.c,
	  external_libs/metis-4.0/minitpart2.c,
	  external_libs/metis-4.0/mkmetis.c,
	  external_libs/metis-4.0/mkwayfmh.c,
	  external_libs/metis-4.0/mkwayrefine.c,
	  external_libs/metis-4.0/mmatch.c, external_libs/metis-4.0/mmd.c,
	  external_libs/metis-4.0/mpmetis.c,
	  external_libs/metis-4.0/mrefine.c,
	  external_libs/metis-4.0/mrefine2.c,
	  external_libs/metis-4.0/mutil.c,
	  external_libs/metis-4.0/myqsort.c,
	  external_libs/metis-4.0/ometis.c,
	  external_libs/metis-4.0/parmetis.c,
	  external_libs/metis-4.0/pmetis.c,
	  external_libs/metis-4.0/pqueue.c,
	  external_libs/metis-4.0/proto.h,
	  external_libs/metis-4.0/refine.c,
	  external_libs/metis-4.0/rename.h,
	  external_libs/metis-4.0/separator.c,
	  external_libs/metis-4.0/sfm.c, external_libs/metis-4.0/srefine.c,
	  external_libs/metis-4.0/stat.c, external_libs/metis-4.0/struct.h,
	  external_libs/metis-4.0/subdomains.c,
	  external_libs/metis-4.0/timing.c, external_libs/metis-4.0/util.c:
	  Both, Expokit and the Metis library are now declared as external
	  libraries. The build system has been adapted accordingly to
	  reflect this change.

	  The inclusion of Metis should now finally solve the build
	  problems, that people were encountering frequently with the MPI
	  executable.

2006-02-09 21:34  acastro

	* src/: par_vec.F90, simul_box.F90: Bug fixed.	Just an absolute
	  value, but it created some awful problems.  I also put an ASSERT
	  in par_vec at a point where, if it had been before, it would have
	  saved me quite a few hours to debug. Maybe it is useful in the
	  future.  This bug was pointed out by some Carlo Camilloni.

2006-02-09 21:08  appel

	* src/: atomic.F90, blas.F90, broad.F90, casida.F90,
	  centergeom.F90, cf.F90, cf_inc.F90, cross_section.F90,
	  crystal.F90, curv_briggs.F90, curv_gygi.F90, curv_modine.F90,
	  curvlinear.F90, datasets.F90, derivatives.F90,
	  derivatives_inc.F90, eigen.F90, eigen_arpack.F90, eigen_cg.F90,
	  eigen_evolution.F90, eigen_plan.F90, eigen_trlan.F90, epot.F90,
	  epot_inc.F90, f.F90, f_inc.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, geometry.F90, global.F90, grid.F90, gs.F90, h.F90,
	  h_inc.F90, h_so.F90, hgh.F90, hs.F90, io.F90, lasers.F90,
	  lcao.F90, liboct.F90, liboct_parser.F90, libxc.F90,
	  linalg_adv.F90, linalg_basic.F90, linear_response.F90,
	  linear_response_inc.F90, logrid.F90, main.F90, math.F90,
	  mesh.F90, mesh_init.F90, mesh_lib.F90, messages.F90, mf.F90,
	  mf_inc.F90, mix.F90, mpi.F90, mpi_debug.F90, multicomm.F90,
	  multigrid.F90, nl_operator.F90, ode_solver.F90,
	  ode_solver_inc.F90, opt_control.F90, out.F90, out_inc.F90,
	  par_vec.F90, par_vec_inc.F90, pes.F90, pes_mask.F90, pes_rc.F90,
	  phonon_spectrum.F90, phonons.F90, poisson.F90, poisson1D.F90,
	  poisson2D.F90, poisson3D.F90, poisson_cg.F90,
	  poisson_corrections.F90, poisson_multigrid.F90, profiling.F90,
	  ps.F90, pulpo.F90, restart.F90, restart_inc.F90, root_solver.F90,
	  root_solver_inc.F90, rotational_strength.F90, run.F90,
	  scalar_mesh.F90, scf.F90, simul_box.F90, sparskit.F90,
	  sparskit_driver.F90, sparskit_inc.F90, specie.F90, spectrum.F90,
	  spline.F90, states.F90, states_inc.F90, states_kpoints.F90,
	  static_pol.F90, static_pol_lr.F90, stencil_cube.F90,
	  stencil_star.F90, stencil_starplus.F90, stencil_variational.F90,
	  string.F90, systm.F90, td.F90, td_calc.F90, td_exp.F90,
	  td_exp_split.F90, td_init.F90, td_rti.F90, td_write.F90, tm.F90,
	  units.F90, unocc.F90, v_ks.F90, v_ks_inc.F90, varinfo.F90,
	  wave_matching.F90, xc.F90, xc_KLI.F90, xc_OEP.F90,
	  xc_OEP_SIC.F90, xc_OEP_inc.F90, xc_OEP_x.F90, xc_axc.F90,
	  xc_functl.F90, xc_fxc.F90, xc_kxc.F90, xc_vxc.F90,
	  xyz_adjust.F90, xyz_file.F90, xyzanim.F90: The MVAPICH
	  implementation has serious I/O problems when one of the modules
	  in the code is called 'system'. Besides the problem with reading
	  from stdin, this was the main issue in Sahu's problem report. I
	  spent more than a day to figure this out. Also thanks again to
	  Sahu for his patience, while we were debugging this issue.

	  As there were some thoughts on this previously, I take the
	  opportunity to rename all modules according to

	   sample/sample_mod  ->  sample_m

	  Similarly all types have been converted according to

	   sample_type	->  sample_t

	  This is actually Linux kernel convention :).

2006-02-09 19:13  appel

	* src/liboct_parser.F90: Some MPI implementations, e.g. the MVAPICH
	  implementation for infiniband interconnects, do not forward stdin
	  to all compute nodes. This problem was initially reported by Sahu
	  on the octopus-users mailing list and recently showed up in a
	  second posting.

	  Reading the input file from stdin via e.g.

	   octopus < Na2

	  is now disabled. This caused too many confusions, even in the
	  serial case.	Often people already had a file with name 'inp' in
	  the working directory while trying to read the input via '<'. In
	  that case they got tricked by the precedence.

	  Octopus is now printing an error message, mentioning that reading
	  input from stdin is deprecated.

2006-02-06 17:18  acastro

	* src/messages.F90: The write_warning and write_fatal were writing
	  an awkard "WARNING: From Node x", with no information afterwards,
	  from all the nodes.  Only node zero was really printing the
	  information.

	  Maybe in the future we should allow for a way for all non-head
	  nodes to write warning and fatal errors.

2006-02-05 12:33  acastro

	* src/: atomic.F90, hgh.F90, tm.F90: Not really a bug fix.  The
	  problem with the Gadolinium bug report ("rc_bugs/07-Atomic_Gd")
	  is deep in the "egofv" routine, and I don't quite understand it.
	  What I have done is:	- for HGH pseudopotentials, the atomic
	  wavefunctions are not strictly neccesary, so if they are not
	  found, they are just not used. "egofv" does no longer kill the
	  program, but passes back an error flag and the program emits a
	  warning. The program can no longer do LCAO, but hopefully it
	  could converge. I could not try it in the case of Gadolinium,
	  because in any case the memory needed to get all the projectors
	  is so large that it does not fit in my laptop.   - for TM
	  pseudopotentials, the wavefunctions are needed to build the
	  projectors. So if the error is produced, the program stops. But
	  the error message emitted now is more friendly than before.

	  In any case, the proper solution to these issues will have to be
	  done for next release.

2006-02-04 20:22  acastro

	* src/mesh_init.F90, testsuite/rc_bugs/08-TDELF_C2H4: Bug fixed.

	  This bug was the one reported in 08-TDELF_C2H4, which I remove.
	  The input of the file was not consistent any more, in any case.

	  The bug showed up when trying to write a dx file. There was a
	  seg-fault whent trying to pass the mesh to a cube, and I traced
	  it back to be some kind of round-off error in the point that I
	  changed in mesh_init. Probably it is a quick and dirty trick, but
	  we should leave a deeper clarification of the mesh module for
	  after the release.

2006-02-04 15:18  acastro

	* src/poisson.F90: Bug fixed.  Some compilers (intel) seem to have
	  problems manipulating big 3D arrays.

2006-02-04 02:45  acastro

	* src/out_inc.F90: Bug fixed.  Under some circumstances, this bug
	  stopped some parallel runs in marenostrum. I don't know why it
	  did not show up always.

2006-02-03 19:22  acastro

	* src/systm.F90: The argument parallel_mask of system_init was
	  flagged as optional.	Then the internal argument parallel_mask_
	  was set to be equal to parallel_mask when it was present, as
	  usual... except that then it was not used.  Instead of fixing
	  this, I noticed that system_init is only called once, and
	  parallel_mask was passed. So no need for an optional argument
	  there.

2006-02-03 18:27  acastro

	* src/run.F90: (Possible) bug fixed: The variable mode (now
	  parallel_mask), used in the routine get_mode_parallelized (now
	  renamed to get_parallel_mask), was not initialized to 0. Some
	  compilers do not initialize variables to 0, so this could cause
	  trouble.

2006-02-02 19:20  acastro

	* liboct_parser/: parse.c, parser_f.c: Bug fixed.  *
	  parse_block_string function (file parse.c): I think that it
	  should return an error code whatever is read is not a string. For
	  other case it is OK to convert, but not in this case.  *
	  parse_block_error (file parser_f.c): I am not sure about this
	  one.	I uncommented the exit function. I believe that the code
	  should stop if an error is encountered. But whoever commented
	  that code probably had reasons for it, so take a look, maybe I am
	  wrong.

	  Now the code seg-faulted if a non-string was found where a string
	  should be found.

	  For next release we have to improve the input error handling.

2006-01-31 12:11  acastro

	* libxc/gga_lb.c, testsuite/rc_bugs/05-Na2_LB94_Casida: Bug fixed.
	  Removed the 05-Na2_LB94_Casida bug.  The LB94 is still rather
	  under suspiscion, in any case.

	  I don't know why the bug was there, in fact, it looked that the
	  code that I removed was there for a reason, but I could not trace
	  it down because it was there since the first revision...

2006-01-30 16:55  acastro

	* doc/Makefile.am: Bug fixed.  The compilation of octopus depended
	  on the existence of emacs. I think this should not be the case,
	  so I changed the Makefile.am in order that if emacs is not found,
	  octopus.info is not attempted to be rebuilt.	This way the
	  compilation proceeds.

2006-01-26 13:25  appel

	* liboct_parser/parser_f.c: Correcting cut'n paste error that was
	  found by Francesco Sottile.

2006-01-22 11:15  appel

	* src/: casida.F90, run.F90: Removing unused variables.

2006-01-22 11:15  appel

	* share/util/: Makefile.am, display_partitions.sh,
	  oct-display_partitions: Renaming display_partitions.sh to
	  oct-display_partitions and adding it to bin_SCRIPTS.

2006-01-14 07:44  acastro

	* src/epot.F90: The code should stop if a magnetic field is
	  required, but the executable is the one that only has real
	  wavefunctions.

2006-01-13 16:41  xavier

	* src/static_pol_lr.F90: Only a small modification, I was
	  multiplying and the diving by the same number.

2006-01-12 18:58  acastro

	* src/: epot.F90, global.F90, h_inc.F90: Bug fixed.

	  There was no definition of the gyromagnetic ratio; now it is
	  input by variable "GyromagneticRatio". Of course it is, in
	  principle, a physical constant, but this led to an error when
	  calculating the Zeeman term of quantum dots, which should use an
	  "effective" gyromagnetic ratio.

	  I still have some doubts about factors and signs in the Zeeman
	  term.

2006-01-12 17:59  xavier

	* src/static_pol_lr.F90: * The hyperpolarizability tensor now is
	  symmetrized by taking the average of all the corresponding
	  components.

	  * Now the output file only contains the components that are
	  different.

2006-01-12 14:37  micael

	* configure.ac, src/Makefile.am:  *) Bug fix: disable-debug mode
	  was not working.

2006-01-12 10:02  micael

	* src/v_ks_inc.F90, testsuite/finite_systems_3d/spinors.test:  *)
	  There was a bug in the calculation of the expectation value of
	  the
	      exchange-correlation potential.

2006-01-11 13:56  micael

	* src/epot_inc.F90, src/h_so.F90, testsuite/rc_bugs/12-spin_orbit:
	  *) Spin-orbit bug fixed.

2006-01-11 09:04  appel

	* src/simul_box.F90: Bug fixed: The array lsize in simul_box_in_box
	  had a wrong index. When running with BoxShape = parallelepiped
	  the mesh was not symmetric around the origin (in z-direction) and
	  had the wrong size.

2006-01-04 23:06  acastro

	* src/td_rti.F90, testsuite/finite_systems_3d/restart.test,
	  testsuite/rc_bugs/10-Restart: Bug fixed.  Another one of the
	  NP/NP_PART that so much fun we are having with.  It affected the
	  "etrs" evolution method.

	  Now the restart.test is finally fully passed, so I enabled it
	  back, and removed the rc_bugs/10-Restart file.

2006-01-04 19:40  acastro

	* src/xc_vxc.F90, testsuite/finite_systems_2d/2dbox.test,
	  testsuite/rc_bugs/11-2dbox: Bug fixed.

	  This one was pretty serious,	since it affected all the
	  spin-polarized calculations,	at least  in  some  computers, such
	   as  in the  Berlin opteron  cluster.  It was  the  reason that
	  some	of  the tests  were disabled.

	  Now the 2dbox.test  and the first two matches  of the
	  restart.test are passed  OK  in the  opteron.  However, the  last
	   two	matches of  the restart.test  are  not	passed	in  the
	  opteron,  due  to  some  other different bug (so I did not enable
	  it again), and the 2dbox.test fails in my  PC. This is why
	  although  I enabled again 2dbox.test,  I do not remove its file
	  in the rc_bugs directory.

2005-12-28 16:10  acastro

	* src/poisson.F90: Just one warning.

	  It has to do with the bug reported by Francesco Sottile, about
	  divergent results with some 1.99 version and the rc1. In fact,
	  there is no such difference, but the fact that the cg_corrected
	  Poisson solver gives wrong results when using the "minimum" box
	  shape. The two runs reported by Francesco were done with
	  different solvers: fft and cg_corrected.

	  I have been trying to figure out if it is a bug, but I am
	  starting to think it is a fact: the method gives poor results
	  with odd box geometries. This is why I thought about putting a
	  warning/disclaimer, so that users don't get too mad, or screw
	  them if they do.

	  I always thought that cg and cg_corrected were essentialy
	  equivalent in the error that they provided, the difference being
	  that the latter is faster.  But it seems not to be true; the cg
	  method seems to behave better with odd geometries. That is why in
	  the warning I recommend using cg.

	  In any case I will try to investigate why and how this happens.

2005-12-20 15:50  acastro

	* src/scf.F90: The clean_stop was not working during the SCF
	  procedure since it actually was called twice -- one for checking
	  and then to really exit the SCF loop.  Since now the function
	  erases the "stop" file, the second call found no file at all.

2005-12-20 13:48  xavier

	* src/static_pol_lr.F90: Correction of an error message.

2005-12-19 16:47  marques

	* src/Makefile.am: Added integer.F90 to the Makefile so that it is
	  included in the .tar.gz

2005-12-19 13:38  acastro

	* src/: geometry.F90, xyz_file.F90: Corrected the bugs pointed out
	  by Carlo Camilloni.  I just had to apply the patches that he had
	  suggested, I think that they were just what was needed.

2005-12-17 10:14  marques

	* doc/: tutorial.tex, img/elf.eps, img/laser.eps, img/pi02.eps,
	  img/pi03.eps, img/pi04.eps, img/spacing.eps, img/spacing.ps,
	  pdf/Makefile.am, pdf/tutorial.pdf: The tutorial was moved to the
	  wiki. Therefore, I delete the corersponding files from the
	  distribution.

2005-12-16 10:22  marques

	* doc/pdf/Makefile.am: References to octopus-devel removed

2005-12-16 10:21  marques

	* doc/Makefile.am: References to octopus-devel removed.

2005-12-16 10:20  marques

	* doc/: octopus-devel.info, octopus-devel.texi, octopus.info,
	  octopus.texi, pdf/octopus-devel.pdf: The information contained in
	  the -devel.texi file was passed to the wiki. Therefore I am
	  deleting these files.

2005-12-12 14:01  appel

	* doc/html/Makefile.am: make was aborting, probably just a typo:
	  make[3]: *** No rule to make target `vars/*', needed by `all-am'.
	   Stop.

	  I replaced vars/* by vars*

2005-12-12 12:59  marques

	* doc/pdf/: octopus-devel.pdf, octopus.pdf, tutorial.pdf: The pdfs
	  are now updated

2005-12-12 12:53  marques

	* doc/Makefile.am, doc/html/Makefile.am, share/util/Makefile.am,
	  src/Makefile.am, build/octopus.spec.in, testsuite/Makefile.am:
	  There were several "bugs" in the Makefiles that made "make rpm"
	  not work.

2005-12-12 12:52  marques

	* configure.ac: Added one Makefile.am

2005-12-12 09:34  marques

	* configure.ac, doc/octopus.texi: As Heiko suggested, I removed the
	  "_" from the version number

2005-12-12 09:33  marques

	* src/: epot.F90, epot_inc.F90, h_inc.F90, states_inc.F90,
	  v_ks_inc.F90, xc_functl.F90: some cleaning... nothing really
	  important, except that I changed index->iatom in the
	  projector_type.

2005-12-12 09:31  marques

	* configure.ac, doc/octopus.texi: Retagged 1.88->2.0_rc1

2005-12-11 16:45  marques

	* src/spectrum.F90: Bug fixed. BTW, the _info routines in this file
	  are all terribly similar. Can we somehow merge them into one?

2005-12-08 18:07  micael

	* testsuite/rc_bugs/12-spin_orbit:  *) Adding a bug file:
	  spin-orbit is sometimes causing a segfault.

2005-12-08 09:55  marques

	* src/: mix.F90, td_write.F90: These continuation lines were
	  skrewing my octopus analyzer tool. Please try not tu use "&"
	  inside a type definition.

2005-12-07 23:26  appel

	* testsuite/oct-run_regression_test.pl: Forgot $ in front of opt_m.

2005-12-07 22:51  appel

	* testsuite/rc_bugs/02-Na_Chain: This input file is by now running
	  properly and can be removed.

2005-12-07 22:50  appel

	* testsuite/oct-run_regression_test.pl: Added option -m which
	  allows to perform only the matches of a given test without
	  running the code. This turned out to be useful for checking the
	  numbers in an existing working directory.

2005-12-07 22:49  appel

	* src/: gs.F90, lcao.F90, scf.F90, unocc.F90: In my opinion this is
	  definitely a compiler bug of the NAG compiler. If the arguments
	  of the routine lcao_wf are not sorted according to their intent
	  flavour, the compiler creates an executable that produces
	  non-deterministic! output, i.e.  you can run the very same
	  executable with the very same input several times from scratch
	  and you get different numbers (probably some garbage numbers from
	  memory were collected).  This was very akward to debug.
	  Especially since I had to run the code xillion times, as not
	  every run was giving the wrong numbers ...  Finally I wasted a
	  full day on this :(, but at least the 3D/1D periodic stuff is now
	  running properly on 64Bit and one of the tests in rc_bugs can be
	  removed.

	  Probably it is a good idea to sort all other arguments that are
	  passed to the routines in the code in a similar fashion.

2005-12-07 22:47  appel

	* testsuite/periodic_systems_1d/sodium_chain.test: Adding a test
	  for a chain of sodium atoms. Finally we have the first realistic
	  test for 3D/1D periodic systems. To speed up the runtime of the
	  test I had to stop the SCF cycle after one step, i.e. be careful,
	  the results are not converged.

2005-12-07 17:17  marques

	* src/multicomm.F90: Thre was a bug in the distribution of the
	  nodes that made the code crash with some combination of number of
	  nodes.

2005-12-07 09:19  appel

	* debian/info: Remove octopus-faq.info from the build system.

2005-12-06 16:09  acastro

	* src/casida.F90: Bug fixed.  The casida module was breaking when
	  using non-interacting electrons.  It is a bit absurd to run the
	  casida module with non-interacting electrons, but it is nice for
	  testing, and the program should not break like that in any case.

2005-12-06 14:58  acastro

	* src/scf.F90: I guess that line was there just for debugging...

2005-12-06 10:52  marques

	* doc/: Makefile.am, installation.texi, octopus-faq.info,
	  octopus-faq.texi, octopus.info, octopus.texi: Removed octopus-faq
	  and some info from octopus.texi that are now in the wiki.

2005-12-04 22:17  marques

	* src/: datasets.F90, syslabels.F90: This file was rename from
	  src/syslabels.F90 to src/datasets.F90 as explained in the
	  previous commit.

2005-12-04 22:15  marques

	* src/Makefile.am, src/broad.F90, src/casida.F90,
	  src/centergeom.F90, src/cross_section.F90, src/curv_briggs.F90,
	  src/curv_gygi.F90, src/curv_modine.F90, src/curvlinear.F90,
	  src/derivatives.F90, src/eigen.F90, src/fftw2.F90, src/fftw3.F90,
	  src/geom_opt.F90, src/geometry.F90, src/gs.F90, src/h.F90,
	  src/hs.F90, src/io.F90, src/lasers.F90, src/linear_response.F90,
	  src/main.F90, src/math.F90, src/messages.F90, src/mix.F90,
	  src/mpi_debug.F90, src/multicomm.F90, src/ode_solver.F90,
	  src/opt_control.F90, src/out.F90, src/out_inc.F90,
	  src/phonon_spectrum.F90, src/phonons.F90,
	  src/poisson_multigrid.F90, src/profiling.F90, src/restart.F90,
	  src/restart_inc.F90, src/root_solver.F90,
	  src/rotational_strength.F90, src/run.F90, src/scalar_mesh.F90,
	  src/scf.F90, src/simul_box.F90, src/sparskit.F90, src/specie.F90,
	  src/spectrum.F90, src/states.F90, src/static_pol.F90,
	  src/static_pol_lr.F90, src/systm.F90, src/td.F90,
	  src/td_write.F90, src/units.F90, src/unocc.F90, src/v_ks.F90,
	  src/wave_matching.F90, src/xc.F90, src/xc_functl.F90,
	  src/xyz_adjust.F90, src/xyz_file.F90, src/xyzanim.F90,
	  testsuite/periodic_systems_1d/cosine_potential.test,
	  testsuite/periodic_systems_1d/free_electrons.test: *) I finally
	  cleaned the run.F90 file. The reason is that, with the new
	  changes    allowing for multi-parallelization, the ability to,
	  e.g., run the gs if the    td calculation did not find the
	  restart wave-functions had to be removed,    as there could be
	  inconsistencies in the parallelization method. Now, if you
	  want to run both the gs and td in the same file, use the
	  %CalculationMode    block.  *) I changed slightly the
	  initialization of the old syslabels stuff, allowing	 for
	  sensible defaults for the variables. Now the only thing you
	  really have	 to say are the CalculationModes for each run. This
	  implied changing the order	of the lines in the block (now
	  modes, labels, and the order). You may have	 to change you
	  input files to reflect this change.  *) To make this multilpe
	  runs useful, they had (sometimes) to share the same	 tmp
	  directory (otehrwise, one couldn't start a td calculation after a
	  gs).	   Until now they all had different tmps. Now by default
	  they have all the same     "tmp", but this can be changed by the
	  variable TmpDir.  *) I rename "syslabels" to "datasets". The
	  reason is that ABINIT has this    multiple datasets for years,
	  and they work more our less like ours. So I	 thought it was a
	  good idea to make the names more compatible.

2005-12-01 17:51  xavier

	* src/static_pol_lr.F90: Fixes in dynamic polarizability, now it
	  gives the correct result for w = 0.

2005-11-30 16:28  micael

	* share/util/: vf.cfg, vf.net:	*) This is a DX program I wrote
	  some time ago to plot vector fields (very usefull to
	      plot currents ;) Probably it could be greatly improved, or
	  even merged into the
	      existing mf.net program, but for now I'm just commiting what
	  I have.

2005-11-30 16:11  micael

	* src/spectrum.F90:  *) Added the pre-factors that were missing
	  from the complex rotatory strength function.
	      I also added two sum rules.

2005-11-30 15:17  marques

	* src/: epot.F90, epot_inc.F90: I believe that this solves the
	  problem of Carlo (please check). There was a R_CONJ missing in
	  the non-local part of the pseudopotential.

2005-11-30 14:18  rozzi

	* src/static_pol_lr.F90: Intel compiler was confused by unmatched
	  single quote

2005-11-30 11:09  xavier

	* src/static_pol_lr.F90: * Dynamic polarizability is implemented
	  but not tested yet.  * Now an array of lr objects is used instead
	  of only one, indexes are direction, sign and frequency.

2005-11-30 11:05  micael

	* src/scf.F90:	*) Only the root node should output the local
	  magnetic moments.

2005-11-30 10:51  marques

	* src/: cross_section.F90, hs.F90, spectrum.F90, td_exp.F90,
	  td_init.F90, td_rti.F90: Rearranged a little the sections to
	  which the variables belong to.

2005-11-30 10:14  marques

	* liboct_parser/parser_f.c, share/variables.local, src/epot.F90,
	  src/xc.F90, src/xc_OEP.F90, src/xyz_adjust.F90: *) Documented a
	  couple more variables, and made the corresponding changes in
	  variables.local *) Fixed a bug in parse_expression. There is a
	  variable in symrec name def, that    defines if a variable has
	  been defined, and that we should not forget to set.

2005-11-30 10:10  marques

	* testsuite/finite_systems_1d/helium.test: I don't see any reason
	  why the helium test should not be done with th real executable.

2005-11-30 10:07  marques

	* testsuite/periodic_systems_1d/: cosine_potential.test,
	  free_electrons.test: The Units should be "a.u" and not a.u. As
	  this is the default value, I took away those lines.

2005-11-30 00:27  appel

	* src/Makefile.am: Forgot oct-make-st in EXTRA_PROGRAMS.

2005-11-29 23:51  appel

	* src/Makefile.am: make_st can also be removed from Makefile.am.

2005-11-29 23:33  appel

	* liboct_parser/parser_f.c, liboct_parser/symbols.c,
	  src/liboct_parser.F90, src/make_st.F90, src/specie.F90,
	  src/states.F90, src/states_inc.F90, src/td.F90: I know that we
	  are actually in feature freeze. But I believe that this is a must
	  have feature for every td code: there is now the possibility to
	  specify arbitrary user defined orbitals as initial states for the
	  time propagation.

	  Similar to user defined species this is done with formula strings
	  in the input file:

	  %UserDefinedStates	1 | 1 | 1 | "exp(-r^2)*exp(-i*0.2*x)" %

	  The first three columns specify dim, nst and nik value of the
	  respective orbital. The last column specifies the formula for the
	  orbital. Normalization constants are not required as the code
	  takes care of that after reading the formula. Also note, that the
	  parser now accepts "i" for the imaginary unit.

	  Currently octopus reads all orbitals from the restart_gs
	  directory and only the ones specified in the above block will be
	  replaced in the restart_gs determinant. Combined with ExtraStates
	  this can be used e.g. to setup scattering states.  The
	  modifications also obsolete the make_st program.

2005-11-29 23:17  appel

	* src/restart.F90: Only the root node should delete the stop file.

2005-11-29 23:16  appel

	* src/: out.F90, out_inc.F90: Using 'e' in the default Fortran
	  output format causes for very small numbers output like
	  9.43732460066152-133 instead of 9.43732460066152E-133. Gnuplot
	  cannot cope with the missing E.  Therefore I switched to 'f' in
	  gnuplot_mode.

2005-11-29 23:15  appel

	* src/messages.F90: The debug mode was extremely slow for the MPI
	  executable. Now the debug_trace files in the debug directory are
	  written only if DebugLevel >= 100. For smaller values only the
	  root node writes to stderr.

2005-11-29 23:14  appel

	* src/string.F90: Added routine to convert Fortran strings to C
	  strings.

2005-11-29 23:14  appel

	* src/lcao.F90: To deallocate only X(psi) a full fledged
	  states_end() was called in lcao_end. However, since there is no
	  states_init() in lcao_init() there were some arrays not
	  available. I got segfaults due to this (although this shouldn't
	  happen since states_end() checks if the pointers are associated.
	  Perhaps a compiler bug?).

2005-11-29 23:13  appel

	* src/io.F90: Now also flush_messages can be enabled/disabled on
	  the fly. Simply touch the files
	  enable_flush_messages/disable_flush_messages.

2005-11-29 15:59  marques

	* src/: epot.F90, fftw3.F90, mesh.F90, mesh_init.F90: A phase was
	  wrong in the code. The most important thing was a minus sign
	  missing. I believe that the potential is OK now.

2005-11-28 17:32  xavier

	* src/spectrum.F90: There was a problem reading the multipoles file
	  in spectrum_hs_from_mult.

2005-11-28 15:50  marques

	* src/spectrum.F90: There were a couple of '#' missing, which made
	  oct-cross-section crash while readin the _vector files. I also
	  took the opportunity of removing several lines that gave warning
	  with ifc7.

2005-11-28 14:45  marques

	* src/td_rti.F90: removed some unused lines of code.

2005-11-28 14:41  marques

	* liboct_parser/grammar.y, liboct_parser/parse.c,
	  liboct_parser/parse_exp.c, liboct_parser/symbols.c,
	  liboct_parser/symbols.h, src/poisson_multigrid.F90,
	  src/td_exp.F90, src/td_rti.F90: *) Added a very tiny feature to
	  the parser. Now it will stop with a input    error if one
	  attempts to use a variable that has not been defined. This
	  avoids misspells in the input file to be acepted as valid inputs.
	  (most of the diff is whitespace, as the files were indented
	  with tabs,	 when they should be indent with spaces)  *) This
	  allowed to find a couple of variables that were using "-". This
	  is	forbidden, as he "-" is going to be confused with the minus
	  sign. For    example, suzuki-troter is read as "suzuki" -
	  "troter", and as these two	variables have not been defined
	  (i.e. are 0), the result will be 0, and    not the expected
	  value.

2005-11-28 12:03  marques

	* libxc/: lda.c, lda_c_vwn.c, lda_x.c, test.c: *) very tiny bug
	  corrected in VWN (one of the constants was wrong in the 5th
	  digit) *) fxc is now calculated numerically a bit better in case
	  of the ferromagnetic gas. Actually I don't really know how to
	  handle this case properly, as fxc should diverge (at least fx).

2005-11-27 10:32  appel

	* testsuite/oct-run_regression_test.pl: There was a \ missing.
	  Without the \ the -c option was creating buggy testfiles.

2005-11-27 10:30  appel

	* testsuite/: finite_systems_2d/2dbox.test,
	  finite_systems_3d/restart.test, rc_bugs/10-Restart,
	  rc_bugs/11-2dbox: There's something fishy with the precision on
	  64Bit. The last input in the 2dbox test takes currently 114 scf
	  cycles to converge on x86_64 but requires only 14 on i386. Also
	  the eigenvalues and total energy come out differently.  Similar
	  things apply to the last input file in restart.test.

	  To avoid spamming of octopus-devel I've disabled both tests
	  (Enabled: No) and have copied them to the rc_bugs directory.
	  Before we release this eventually has to be sorted.

2005-11-26 18:58  acastro

	* src/states.F90: The output of the information of which node
	  manages which KS states was not good for the case where there is
	  a combined parallelization scheme. I have redone it; now it is
	  also better since only root node is doing the output, as it
	  should be.  [I noticed this when doing a run with 128 processors:
	  32 domains and four states groups. OK, I could only do a 10
	  minutes run in the debug queue, but still, I think it is a
	  record. The speedup, by the way, was of about 80]

2005-11-26 17:43  acastro

	* src/: profiling.F90, restart.F90, td.F90: (*) Added the TIME_STEP
	  tag to the profiling module.	(*) A little bug fixed also in that
	  module.  (*) The clean_stop routine deletes the stop file, as
	  Heiko suggested. I	 also found it annoying, never remembered
	  to delete it.

2005-11-25 22:31  appel

	* src/: io.F90, out_inc.F90, scf.F90, td.F90: I found this quite
	  useful for chasing bugs which were not showing up immediately:
	  There is now the possibility to enable/disable the debug mode on
	  the fly. Imagine a bug that shows up after 100 SCF cycles. One
	  definitely does not want to run the code all the way in debug
	  mode. The present modifications allow to run the first 99 cycles
	  in normal mode and to switch only then to debug mode.

	  To enable the debug mode on the fly you have to touch a file with
	  name enable_debug_mode in the working directory, similarly to
	  disable the debug mode simply touch disable_debug_mode. Contrary
	  to the stop file the code takes care of the cleanup of the
	  touched files in this case.  (should the code also take care of
	  the cleanup of the stop file?) What a pity that Fortran does not
	  support signal handling ...

	  If the code runs inside some queueing system which buffers output
	  this could also be used to quickly check if octopus is still
	  doing reasonable things or got e.g. stuck in an MPI deadlock.

2005-11-25 20:27  appel

	* src/states.F90, testsuite/finite_systems_2d/fock_darwin.test,
	  testsuite/finite_systems_3d/restart.test: Adjusting the failing
	  tests to the new format.

2005-11-24 21:55  appel

	* src/states.F90: I just noticed that I unintentionally modified
	  the format for the output of the eigenvalues in my last commit.
	  The altered format causes some tests to fail (the matches don't
	  work as intended).  I've now again changed the output of the
	  eigenvalues, since in the spin-polarized case more than 80
	  columns were used. Please have a look if you agree with the new
	  format (basically I use "up", "dn", "--" for spin up, spin down
	  and spin unpolarized respectively).  If you agree with the
	  modification I volunteer to update the test files accordingly.

2005-11-24 19:42  appel

	* src/par_vec.F90: Forgot to remove debug output.

2005-11-24 19:37  appel

	* src/: io.F90, mesh.F90, mesh_init.F90, messages.F90, par_vec.F90,
	  simul_box.F90, states.F90, xc.F90, xc_functl.F90: Support for
	  FlushMessages was broken. When running in parallel filehandles
	  were not treated properly.  Instead of writing directly to some
	  unit I've changed several places such that they use the write_*
	  functions.

2005-11-24 18:36  appel

	* src/mesh_init.F90: Array index was missing in the last commit.

2005-11-24 17:08  rozzi

	* src/: mesh.F90, mesh_init.F90: Bug fixed in the building of the
	  potential for periodic calculations: the box size was not correct

2005-11-24 13:55  acastro

	* src/mf_inc.F90: Just some corrections of the push_sub argument,
	  which seem to have no relation to the actual subroutine name in
	  many cases.

2005-11-24 13:39  marques

	* src/td_rti.F90: another NP NP_PART issue.

2005-11-24 13:09  marques

	* src/nl_operator.F90: Some cleaniong in nl_operator.F90. I think
	  the routines _operate are more readable now.

2005-11-24 12:35  marques

	* src/: derivatives.F90, eigen_trlan.F90, mesh_init.F90,
	  mf_inc.F90, multicomm.F90, nl_operator.F90, out_inc.F90,
	  poisson.F90, run.F90, systm.F90: *) Cleaned the #if
	  defined(HAVE_METIS) directives in the code. Now they only
	  appear in 2 or 3 places (where they are really needed) *) The
	  code now stops if you want to run in parallel in domains with a
	  fft	 poisson solver. This made me waste 30 minutes ;((

	  Incidentally, I now get *exactly* the same result running in
	  serial or in parallel (and not only approximately like before).
	  This means that it was either a np<->np_part issue, or a problem
	  with the HAVE_METIS (in fact there were a couple of
	  inconsistencies in the code)

2005-11-24 10:12  appel

	* share/PP/defaults: Updating the PP/defaults file for Cd since by
	  now all elements are included.

2005-11-24 09:59  marques

	* share/PP/TM2/Cd.ascii: Sorry, but this pseudo has problems, so I
	  removed it.

2005-11-23 17:15  xavier

	* src/: linear_response_inc.F90, static_pol_lr.F90: * Bugfix in
	  linear response: Because density was put to zero before time, the
	  fxc term was not considered for the polarizability. This affected
	  calculations of polarizability and hyperopolarizability.

	  * Added a check for DevelVersion to protect users from the
	  dynamic polarizability part which is not working.

2005-11-23 15:54  micael

	* src/h_inc.F90:  *) Moved the Zeeman term from subroutine vlpsi to
	  subroutine magnetic_terms
	      as it seems more apropriate.

2005-11-23 15:05  micael

	* src/xc_axc.F90:  *) Some more np/np_part issues fixed.

2005-11-23 14:54  micael

	* share/variables.local:  *) This two lines can now go away.

2005-11-23 14:50  micael

	* src/xc_functl.F90:  *) Documented the current functionals.

2005-11-23 14:21  micael

	* src/: h.F90, h_inc.F90, scf.F90, v_ks_inc.F90:  *) Removed the
	  current-current interaction from the CDFT hamiltonian, because it
	  is
	      time-consuming and in practice it should be neglectable.

2005-11-23 12:24  appel

	* src/states.F90: Bug fixed. The bands were not written anymore.

2005-11-23 12:02  micael

	* src/h_inc.F90:  *) Bug fixed: again a np/np_part issue. This time
	  in the CDFT part.
	   *) Corrected another 1/2 factor that was wrong in the magnetic
	  terms.

2005-11-22 23:22  appel

	* src/: Makefile.am, global.h, par_vec.F90, poisson.F90,
	  td_exp_split.F90: These modifications of the build system allow
	  for newline characters inside CPP macros. This overcomes the
	  problems with line truncation that we had with some compilers.
	  I've chosen \newline as newline sequence as \n was colliding with
	  things like eg. \nabla inside comments.  The changes partially
	  obsolete Alberto's m4 check for long lines. However, I kept it
	  since it is also used for conf%fcflags.

2005-11-22 08:51  appel

	* src/v_ks_inc.F90: Because of too long lines the code did not
	  compile with the NAG compiler.

2005-11-21 17:16  acastro

	* src/casida.F90: Bug fixed.  The casida module was broken. Yet
	  another np/np_part issue.

2005-11-21 14:14  marques

	* src/: eigen.F90, eigen_evolution.F90, eigen_plan.F90,
	  eigen_trlan.F90, epot.F90, epot_inc.F90, f_inc.F90, fftw3.F90,
	  geom_opt.F90, geometry.F90, grid.F90, gs.F90, h.F90, h_inc.F90,
	  h_so.F90, hgh.F90, lasers.F90, lcao.F90, linalg_adv_lapack.F90,
	  linalg_basic_int.F90, linear_response.F90,
	  linear_response_inc.F90, logrid.F90, make_st.F90, math.F90,
	  math_cg_inc.F90, math_inc.F90, mesh_init.F90, mf_inc.F90,
	  mix.F90, multicomm.F90, multigrid.F90, nl_operator.F90,
	  ode_solver_inc.F90, opt_control.F90, out_inc.F90, par_vec.F90,
	  par_vec_inc.F90, pes_mask.F90, pes_rc.F90, phonons.F90,
	  poisson.F90, poisson1D.F90, poisson2D.F90, poisson3D.F90,
	  poisson_cg.F90, poisson_corrections.F90, poisson_multigrid.F90,
	  ps.F90, restart_inc.F90, root_solver.F90, root_solver_inc.F90,
	  scalar_mesh.F90, scf.F90, sparskit_inc.F90, specie.F90,
	  spectrum.F90, spline.F90, states.F90, states_inc.F90,
	  states_kpoints.F90, static_pol.F90, static_pol_lr.F90,
	  stencil_star.F90, systm.F90, td_calc.F90, td_exp.F90,
	  td_exp_split.F90, td_rti.F90, td_write.F90, tm.F90, unocc.F90,
	  v_ks_inc.F90, xc_KLI.F90, xc_OEP.F90, xc_OEP_SIC.F90,
	  xc_OEP_inc.F90, xc_axc.F90, xc_fxc.F90, xc_kxc.F90, xc_vxc.F90,
	  xyz_file.F90: I changed the rest of the allocate -> ALLOCATE. Now
	  all the code has some rudimentary memory allocation error checks.
	  I am still not very happy about this solution. I have plans to
	  improve it (allowing also for statistics) but this will have to
	  wait for the next version.

2005-11-20 21:57  xavier

	* testsuite/rc_bugs/09-H2O_POL: Removed input file from bug that
	  was fixed in the previous commit.

2005-11-20 21:51  xavier

	* doc/octopus-devel.info, doc/octopus.info, doc/octopus.texi,
	  src/eigen_evolution.F90, src/geom_opt.F90, src/h_inc.F90,
	  src/linear_response.F90, src/linear_response_inc.F90,
	  src/make_st.F90, src/phonons.F90, src/static_pol.F90,
	  src/static_pol_lr.F90, src/td_write.F90: Bugfixes related to the
	  np/np_part transition: * Linear response.  * Other parts where
	  st%X(psi) was initialized with np size.  * Added an assert to
	  check input array size in h_inc.XHpsi.

2005-11-20 19:21  acastro

	* src/profiling.F90, src/states.F90, src/xc_KLI.F90,
	  src/xc_OEP_inc.F90, src/xc_OEP_x.F90,
	  testsuite/rc_bugs/04-Na2_Exx: Bug fixed.  This time, 04-Na2_Exx.
	  It had to do with the parallelization.

	  I do not put it as a test because I am not fully certain of the
	  validity of the result. I will try to find exact known results
	  for EXX and make a test for it. Also for the rest of the
	  orbital-dependent functionals.

2005-11-18 17:02  acastro

	* src/poisson_corrections.F90: When running in parallel in domains,
	  I got a crash there due to the np/np_part problem.

2005-11-18 15:56  acastro

	* src/h_inc.F90: Bug fixed.  Forgot one pop_sub

2005-11-18 15:12  acastro

	* src/profiling.F90: I don't think the profiling_in and
	  profiling_out should be monitored by the push_sub/pop_sub, the
	  output gets rather ugly.

2005-11-18 14:52  acastro

	* src/out_inc.F90: The ASSERT(0) led to an arithmetic if in Fortran
	  that is not accepted by modern compilers.

2005-11-18 14:41  acastro

	* src/: h.F90, h_inc.F90, poisson.F90, profiling.F90, v_ks.F90,
	  v_ks_inc.F90: Added some more profiling tags. I know that we
	  should be in regression mode, but maybe we should have some way
	  to properly benchmark the 2.0 code against all future
	  developments.

2005-11-18 13:54  acastro

	* src/: nl_operator.F90, profiling.F90: Bug fixed in the profiling.
	   The nl_operator tag had two entries and no exit.

	  I improved a little bit the output in the profiling.xxx files, so
	  that it is more readable.

2005-11-18 11:38  acastro

	* src/mesh_init.F90: The code was crashing in the marenostrum
	  machine at unexpected points near the call to mesh_partition,
	  when attempting to run systems with large meshes. The reason
	  seemed to be a memory problem, probably the code was legal but
	  the memory managemente was badly done by the compiler (mpxlf
	  compiler from ibm). With the changes that I did, it seems to work
	  fine now. I don't know, maybe in the way that it was done before,
	  some odd copies were being made, filling the cache, or the stack,
	  or whatever, maybe the ventilators, god knows.

	  In general, it is probably not a good practice to pass a
	  structure and components of that structure separately to a
	  subroutine. Also, it is probably better to use allocate than
	  using automatic arrays.

2005-11-17 17:36  xavier

	* src/static_pol_lr.F90: The off-diagonal terms of the beta tensor
	  were wrong.

2005-11-17 15:16  acastro

	* testsuite/finite_systems_2d/fock_darwin.test: Added a test for
	  the magnetic field. For the moment, only in 2D, and with a null
	  Zeeman term. It is the spectrum of Fock-Darwin (one particle in
	  2D confined by a Harmonic potential, and subject to a
	  perpendicular static constant magnetic field).

2005-11-17 14:58  acastro

	* src/unocc.F90: The unocc mode was broken due to the usual
	  np/np_part problem.

2005-11-17 14:33  xavier

	* src/geometry.F90: The atom_write_xyz function was printing the
	  file in all nodes except root, as a result oct-center-geom didn't
	  write the adjusted.xyz file. So I added a .not.

2005-11-17 11:43  acastro

	* liboct_parser/parser_f.c: Bug fixed.	In some cases, the code
	  stopped in xyz_file_read when attempting to see if the block was
	  defined. This was due to the assert statement in the
	  loct_parse_block C function, which may detect non-null
	  block_name.

	  I am not too sure about why this was happening, but in any case I
	  think it is much more robust this way.

2005-11-17 08:30  xavier

	* src/static_pol_lr.F90: Fixed compilation issues with complex
	  version.

2005-11-16 23:37  acastro

	* src/: epot.F90, h_inc.F90: I tested the static external magnetic
	  field. Apart from a 1/2 factor that shouldn't be there, it was
	  OK.

	  I allowed for the possibility of having the external magnetic
	  field and *not* doing CDFT, they are independent things.

	  The test that I did was to reproduce the Darwin-Fock spectrum in
	  2D: eigenvalues of a 2D single-particle system, confined by a
	  harmonic potential, and subject to a perpendicular magnetic
	  field. This spectrum is analytical.

	  However, I did not check the Zeeman term.

2005-11-16 17:55  xavier

	* src/static_pol_lr.F90, testsuite/rc_bugs/09-H2O_POL: Some
	  corrections for first static hyperpolarizability, and now it
	  seems to work fine (the spin polarized case still needs some
	  work).

	  Unfortunately, the linear response code is broken after the
	  np->np_part transition, but I haven't been able to locate where
	  the problem is. So I am commiting a example input to the rc_bugs
	  directory.

2005-11-15 13:46  xavier

	* src/linalg_basic_blas.F90: Removed spaces before the # in a
	  couple of preprocessor directives, Compaq cpp doesn't like them.

2005-11-15 13:12  marques

	* src/global.h: This should fix the compilation issues from
	  yesterday.

2005-11-14 20:58  marques

	* src/: atomic.F90, broad.F90, casida.F90, cf_inc.F90,
	  cross_section.F90, crystal.F90, curv_gygi.F90, derivatives.F90,
	  derivatives_inc.F90, eigen_arpack.F90, eigen_cg.F90, global.h,
	  messages.F90: I spent more than half an hour searching for a bug
	  that didn't exist - it had been an allocate error (out of
	  memory), but, as usual, it appeared as a segmentation fault.
	  Therefore, I decided to put a very simple check for the
	  allocation errors. It is basically a preprocessor macro, and
	  changing allocate -> ALLOCATE. I started changing all allocates
	  in the code, but I will finish when I come back from Louvain.

2005-11-14 20:00  micael

	* src/v_ks_inc.F90:  *) Sorry, I forgot to remove those lines.

2005-11-14 17:45  appel

	* src/: broad.F90, out.F90: Remove unused variables.

2005-11-14 17:45  appel

	* src/sparskit_inc.F90: Documented all Sparskit variables.

2005-11-14 17:26  appel

	* src/v_ks_inc.F90: The code did not compile. I commented some
	  lines in v_hartree() and added a FIXME at the corresponing
	  position. Micael, can you check if this part is still required?

2005-11-14 17:06  micael

	* src/restart_inc.F90:	*) Increased the number of digits of the
	  number of iterations in file "wfns".

2005-11-14 16:58  micael

	* src/: h.F90, h_inc.F90:  *) Removed the effective-mass model as
	  there were some precision issues when using it.
	      Also, I realized there is a better way of including this
	  model: I will make it a system
	      of units.

2005-11-14 16:15  marques

	* src/eigen_arpack.F90: Small bug corrected. h has to have intent
	  inout now.

2005-11-14 16:14  marques

	* share/variables.local: Forgot to commit this file.

2005-11-14 16:05  micael

	* testsuite/finite_systems_3d/spinors.test:  *) Changed the spinors
	  test. Now it uses the Lanczos eigensolver.

2005-11-14 15:52  marques

	* src/: curvlinear.F90, global.F90, io.F90, main.F90: *) Moved
	  reading of DebugLevel from io to main *) Added variable
	  DevelVersion. As discussed with Heiko, the objective is that
	  when conf%devel_version is .false. certain areas of the code are
	  not	 accessible. This allows to "disconnect" some options, and
	  reconnect them    with DebugLevel, i.w., without having to
	  comment the test in the source    file.  *) conf%devel_version is
	  only used now in curvlinear.F90

2005-11-14 15:03  marques

	* src/: derivatives_inc.F90, eigen.F90, eigen_cg.F90,
	  eigen_evolution.F90, eigen_plan.F90, f_inc.F90, geometry.F90,
	  global.h, h_inc.F90, lcao.F90, poisson_cg.F90,
	  poisson_corrections.F90, poisson_multigrid.F90, scf.F90,
	  states.F90, states_inc.F90, td.F90, td_calc.F90, td_exp.F90,
	  td_write.F90, xc_vxc.F90: This change may cause some problems in
	  some cases. The problem is that, with the changes that Florian
	  and Heiko did, the wave-functions (or better, any function that
	  we want to calculate the derivative of) must be defined from
	  (1:m%np_part). If I remember well, this had to do with the
	  communication of the ghost points. What happened is that in
	  several places in the code, the functions were defined from
	  1:m%np. An example, in gs.F90, st%psi is defined from
	  1:m%np_part, while in td.F90 st%psi is defined from 1:m%np.

	  This is therefore an attemp to to clarify this situation. All
	  functions have to be passed to derivatives defined from
	  1:m%np_part. All tests work at the moment, but it is possible
	  that some parts of the code will fail (for example, I am not 100%
	  sure of td_exp::lanczos)

	  Furthermore, there was a problem and the ASSERT macro was never
	  define. Now it is OK. I also added some ASSERTs to the
	  calculation of the derivatives.

2005-11-14 13:56  micael

	* src/eigen_plan.F90:  *) Bug fixed: Lanczos eigensolver was not
	  working as there were some
	      inconsistencies between the size of the arrays and the calls
	  to the blas.

2005-11-14 13:36  marques

	* testsuite/periodic_systems_1d/: cosine_potential.test,
	  free_electrons.test: Following the recent changes of Alberto, the
	  tests were no longer working.  Now they do.

2005-11-14 12:10  acastro

	* src/geometry.F90, src/scf.F90, testsuite/rc_bugs/06-Spinors: I
	  did not know that geometry_min_distance existed. It can be used
	  in geometry_atoms_are_too_close, of course.

	  Also, I made sure that a meaningful default lmm_r is set in scf
	  when there is only one atom. It was wrong before due to the huge
	  value returned by geometry_min_distance. This way the 06-Spinors
	  bug file can also go away.

2005-11-14 11:38  acastro

	* share/samples/Makefile.am, src/geometry.F90, src/messages.F90,
	  testsuite/rc_bugs/01-Hartree_1D: Added a
	  geometry_atoms_are_too_close check to make sure that there are no
	  atoms sitting on top of each other in the input file. This way we
	  can get rid of one of the bug files, 01-Hartree_1D.

	  I forgot to change the Makefile.am when I changed the sample
	  input files.

	  Added a new line in write_fatal, otherwise the output looked
	  ugly.

2005-11-14 11:06  acastro

	* share/samples/Na2td: I added the Na2td sample input file, so that
	  one time-dependent run is also in the samples directory.

2005-11-14 11:01  acastro

	* share/samples/: Na2, bench-gs, benzene: After so many changes in
	  the input variables, the sample file had got wildly inaccuarte. I
	  removed most of the variables, leaving a more minimal set, I
	  think Miguel asked for that some time ago. I also renamed
	  bench-gs into benzene, and chaged it slightly. We can still use
	  it for benchmarking, anyways, but the name is more descriptive.
	  We should maybe add more examples before the commit, and describe
	  them better.

2005-11-14 10:24  marques

	* src/: h.F90, multicomm.F90, out.F90, scf.F90, states.F90,
	  states_inc.F90, td_write.F90, varinfo.F90: A small change to make
	  the code more usable. I transformed the OutputXXX and TDOutputXXX
	  variables into flags. In this way, the ~20 variables of this kind
	  are transformed in only 3: Output, TDOutput, and OutputHow

2005-11-14 10:18  marques

	* testsuite/oct-run_regression_test.pl: Small change to allow the
	  use of ; (written as '\;') in the precommand part of the match.
	  This is useful if we want to use awk scripts in the match.

2005-11-14 08:03  acastro

	* src/: global.F90, hgh.F90: This fixes, I think, the compilation
	  errors of yesterday night.

2005-11-14 00:34  acastro

	* src/mpi.F90: I believe that the #else there should be an #endif.
	  Otherwise some problems could show up when running with one
	  processor but with one mpi executable.

2005-11-13 22:22  acastro

	* src/curv_gygi.F90, testsuite/finite_systems_3d/curvilinear.test:
	  Added one first test for the curvlinear coordinates stuff.  It is
	  a bit slow, but the initialization time of the curvilinear runs
	  are that way.

	  Also, corrected a small error in the documentation of the
	  CurvGygiA variable.

2005-11-13 21:09  acastro

	* src/ps.F90: Bug fixed.  The code crashed when trying to run
	  Helium with the HGH pseudopotential.

2005-11-13 11:04  acastro

	* src/: Makefile.am, oct_test.F90: Removed the oct-test program,
	  which was there for internal use, and should not be there in the
	  release.

2005-11-12 23:07  acastro

	* src/xc_functl.F90, testsuite/finite_systems_2d/2dbox.test: The
	  default correlation should not be the same in 3D and 2D.

	  I added tests for the exchange and correlation potential in 2D
	  (the Attacalite one).

2005-11-12 20:47  acastro

	* libxc/lda_c_amgb.c: Bug fixed.  One wrong character kept me busy
	  the whole afternoon.

2005-11-12 11:25  appel

	* src/messages.F90: Adapting string lengths in
	  messages_print_stress. Octopus was printing on x86_64 garbage
	  like this

	  ^@^@^PS^@^@^@^@^@)^A^@^@^@~@S^@^@^@^@^@PS^@^@^@^@^@Q^@^@^@^@^@

	  to static/info. This was causing grep to assume it is a binary
	  file.  Therefore the matches of the testsuite were failing.

2005-11-11 13:00  marques

	* src/: Makefile.am, casida.F90, epot.F90, epot_inc.F90,
	  geometry.F90, global.F90, grid.F90, gs.F90, h.F90, io.F90,
	  liboct_parser.F90, main.F90, mesh.F90, mesh_init.F90,
	  messages.F90, mf.F90, mpi.F90, mpi_debug.F90, mpi_debug_inc.F90,
	  multicomm.F90, out.F90, out_inc.F90, par_vec.F90, profiling.F90,
	  restart.F90, restart_inc.F90, run.F90, scf.F90, specie.F90,
	  states.F90, states_inc.F90, td.F90, td_calc.F90, td_write.F90,
	  v_ks.F90, xc_KLI.F90, xc_OEP.F90, xc_OEP_SIC.F90, xc_OEP_inc.F90,
	  xc_OEP_x.F90: Some rearrangements (cleaning) in the mpi stuff
	  *) The stuff that was in mpi.F90 is now in mpi_debug.F90   *) Now
	  mpi_mod has low level MPI stuff   *) There is now a mpi_grp that
	  handles MPI groups (including a mpi_grp_is_root      that, in my
	  opinion, is much more readable than (rank == 0)   *) The rest of
	  the code was changed to use this infrastructure

2005-11-11 11:11  acastro

	* src/poisson.F90: I commit a commented subroutine, poisson_test,
	  in the poisson module.  It implements a check for the Hartree
	  integrator, either in 2D or in 3D (it calculates the Hartree
	  potential of a Gaussian charge, and compares it to the exact
	  analytical result). This I didn't do it for 1D because for the
	  soft-Coulomb interaction actually I couldn't think about an exact
	  result.

	  I am not sure about wether or not to put it commented out or not.
	  After all, we are in regression mode. But I wanted it to be in
	  the code after all. It would be nice to have this kind of x_test
	  routines for some of the modules, so that their particular tasks
	  can be checked independently.

2005-11-10 23:24  acastro

	* testsuite/finite_systems_2d/2dbox.test: I checked the 2D Hartree
	  solver, so I added a test to the 2D file: a qd with 2 electrons
	  interacting with only the Hartree term.

2005-11-09 16:45  acastro

	* testsuite/finite_systems_2d/2dbox.test: Added a first test for 2D
	  calculations. This is just an infinite potential box example. I
	  will put more as a continue checking the 2D part of the code.

2005-11-09 14:06  acastro

	* src/: mesh.F90, specie.F90: Just a couple of stupid bugs that
	  showed up in my 2D calculations.

2005-11-09 12:01  marques

	* src/: eigen_cg.F90, geometry.F90, grid.F90, hgh.F90,
	  messages.F90, multicomm.F90, run.F90, scf.F90, td.F90, tm.F90,
	  v_ks.F90, varinfo.F90, xc.F90: Some more "cleaning" of the output
	  of octopus. Now the variable "stars" disapeared, replaced by the
	  function messages_print_stress, that was given some more options.

2005-11-09 10:13  marques

	* libxc/: lda.c, xc.h, xc_f.c: *) Alberto, I think that the "break"
	  in the fxc calculation should be a	"continue" (i.e., he should
	  skip the rest of the current cycle, but    should get out of the
	  cycle). Can you please check? *) Xavier, I guess that the
	  calculation of Kxc should have a similar to	 the one Alberto
	  put in for fxc. Can you please check? *) I cleaned a little bit
	  the includes, whitespaces, and changed "(*p)." to    "p->" as it
	  is more C-like.

2005-11-08 23:01  acastro

	* libxc/lda.c: Bug fixed.

	  The numerical functional derivation was not working properly in
	  some spin-polarized cases (Perdew-Zunger parameterization,
	  Na4(+1), it was just giving lots of NaN).  Now, at least for
	  those cases, it seems to work. I still have to do some more
	  testing on the Casida module, though.

	  In any case, the PZ kernel should be obtained analytically. Maybe
	  in the future.

2005-11-08 16:08  acastro

	* src/mix.F90: Removed two FIXMEs.

2005-11-08 16:03  xavier

	* src/: multigrid.F90, poisson_multigrid.F90: All multigrid
	  variables are documented now.

2005-11-08 14:51  acastro

	* src/: broad.F90, casida.F90: The LinCasida, LinEigenvalues and
	  LinPetersilka variables are gone.  The oct-broad utility just
	  broadens whatever spectrum it finds.

2005-11-08 08:24  appel

	* src/eigen_arpack.F90: Fix compilation issues from last night. The
	  MPI version of the code was not compiling.

2005-11-08 08:18  appel

	* testsuite/rc_bugs/08-TDELF_C2H4: This bug will probably a bit
	  harder to trace, but I believe it's a real bug.  The code stops
	  after 200 SCF cycles with an ** Address Error **.

2005-11-07 20:14  marques

	* src/: curvlinear.F90, derivatives.F90, eigen.F90,
	  eigen_arpack.F90, epot.F90, f.F90, geom_opt.F90, h.F90, main.F90,
	  mesh_init.F90, messages.F90, mix.F90, multigrid.F90, pes_rc.F90,
	  poisson.F90, poisson_multigrid.F90, restart.F90, run.F90,
	  scf.F90, spectrum.F90, states.F90, states_kpoints.F90, systm.F90,
	  td_exp.F90, td_init.F90, td_rti.F90, v_ks.F90, varinfo.F90: I did
	  some cleaning in the way of handling the input errors (making the
	  use of input_error more consistent), and in the output of the
	  options (using messages_print_var_option throughout the code).

	  There is some need now of "beautifying" the output, by adding
	  some spaces and stars. In any case, from my experience with
	  Silvana, I would be happier if octopus would output more about
	  what it is doing...

2005-11-07 17:40  xavier

	* src/specie.F90: Updated documentation for Species block.

2005-11-07 16:41  marques

	* liboct/varinfo.c: Small bug corrected regarding newlines in the
	  varinfo file.

2005-11-07 15:43  appel

	* src/: gs.F90, lcao.F90, scf.F90, unocc.F90: The 1D periodic tests
	  were not passed anymore on x86_64. Fixing pointer deallocation.

2005-11-07 15:14  appel

	* src/epot_inc.F90: Remove unused variables.

2005-11-07 15:12  appel

	* src/global.F90: The new compilerflag feature can produce rather
	  long source lines (depending on the amount of compiler options
	  used).

	  The code didn't compile with NAG, as this compiler doesn't like
	  long lines

	   Error: global.F90, line 181: Line too long - truncated
	   Error: global.F90, line 181: Unterminated character literal

2005-11-07 14:50  acastro

	* src/curvlinear.F90: The code will now stop if the two non-working
	  adaptive coordinate schemes attempt to be used. They will not
	  make it before the release.

2005-11-07 14:40  acastro

	* src/: Makefile.am, global.F90, main.F90: I thought that it would
	  be cool if the code outputs what compiler and what compiler flags
	  were used to make the executable.

2005-11-07 10:05  appel

	* testsuite/rc_bugs/: 01-Hartree_1D, 02-Na_Chain, 03-Na2_MGGA,
	  04-Na2_Exx, 05-Na2_LB94_Casida, 06-Spinors, 07-Atomic_Gd: This is
	  a set of non-working input files. I've used the format of the
	  test files so that we can use them eventually for the testsuite
	  if they are working properly. The files contain a short bug
	  description and the output of octopus respectively.

	  I decided to add them to the cvs (besides the copy I put in the
	  wiki) so that everybody has easy file access and we have a
	  revision history on the bug tracking process (poor mans bugzilla
	  :).

	  Perhaps some of the features used in these files should be simply
	  disabled for the release of 2.0. In that case view this list just
	  as reminder that we have to stop the code with an appropriate
	  error message. Otherwise we have to look into the bugs ...

	  Some further things I noticed

	   - According to a comment in xc_OEP.F90:57 full OEP seems to be
	  only half
	     implemented. Is the comment outdated, or should we stop the
	  code? The
	     same applies to the Amaldi correction term. In both cases the
	  code seems
	     to run so that the user could assume by mistake that the
	  output is correct.

	   - There are 9 FIXME's in the sources:

	      appel@miraculix:..octopus/src> grep -i fixme *.F90 | wc -l
	      9

	   - ... and 31 warnings:

	      appel@miraculix:..octopus/src> grep -i warning *.F90 | grep
	  -v write | wc -l
	      31

2005-11-07 10:00  appel

	* share/util/: oct-atomic_occupations, oct-run_periodic_table:
	  Update the scripts. oct-run_periodic_table has now support for
	  ExtraStates and ElectronicTemperature and oct-atomic_occupations
	  has improved ordering for occupation numbers (4s states appear
	  before 3d states).

2005-11-07 09:59  appel

	* testsuite/: oct-run_regression_test.pl,
	  finite_systems_3d/multigrid.test, finite_systems_3d/restart.test,
	  finite_systems_3d/so.test: There was a / missing.

2005-11-07 09:58  appel

	* src/: io.F90, ode_solver_inc.F90, root_solver.F90,
	  root_solver_inc.F90: Documented a bunch of variables.

2005-11-05 16:06  acastro

	* src/: derivatives.F90, f.F90: The default stencil when using
	  curvilinear coordinates should be the "stencil_starplus" one, not
	  just the star. In fact, the star should *not* be used with curv
	  coordinates, so I made the code stop in that case.

2005-11-04 18:26  acastro

	* src/run.F90: This is to make sure that the code does not crash if
	  running in parallel but without metis.

2005-11-04 18:12  marques

	* src/: poisson_cg.F90, scf.F90: poisson_cg1 now works (also in
	  parallel). This is the PoissonSolver = cg

2005-11-04 17:29  marques

	* src/: casida.F90, epot.F90, epot_inc.F90, geometry.F90,
	  global.F90, grid.F90, io.F90, liboct_parser.F90, main.F90,
	  mesh.F90, mesh_init.F90, messages.F90, multicomm.F90,
	  par_vec.F90, profiling.F90, restart_inc.F90, scf.F90, specie.F90,
	  states.F90, states_inc.F90, systm.F90, td_write.F90, v_ks.F90,
	  xc.F90, xc_KLI.F90, xc_vxc.F90: *) Forces wre not working in
	  parallel. Now they seem to work.

	  *) Sorry, Alberto, I had also fixed the xc. I changed your
	  solution, for the    following resaon: I think it is much more
	  clear to use the mf_integrate    function than to call MPI
	  directly. The disadvantage is that this is	(maybe) slower and
	  more memory consuming (although temporarely). However,    I think
	  it is worth it. The same applies to the forces.

	  *) I rename the variables in mpiv in global. I think it is more
	  clear now.	 I will probably create a module called mpi_group,
	  or something like that     to contain rank/size/comm to be used
	  consistently in the code.

2005-11-04 17:06  acastro

	* src/: xc.F90, xc_vxc.F90: The exchange and correlation energies
	  were badly calculated when using the parallelization in domains.

2005-11-04 16:32  acastro

	* src/states_inc.F90: Sorry about the last commit, I just
	  replicated Migues's bug fix.

2005-11-04 15:23  acastro

	* src/states_inc.F90: Bug fixed.  When running in parallel in
	  domains, the code crashed at that point because the state
	  communicator is null.

2005-11-04 09:47  rozzi

	* src/: epot.F90, out.F90, states.F90, states_kpoints.F90: A
	  contribution to the documentation of the variables.

2005-11-04 08:59  marques

	* src/states_inc.F90: Small bug corrected in the parallel version.

	  Alberto, the Na2 ground-states seems to work in my machine.
	  You'll have to use the cg_corrected Poisson solver (the cg
	  crashes), and decrease the PoissonSolverThreshold to 1e-7. Note
	  that using the fft solver does not stop octopus with an error,
	  but it gives non-sense!!!

2005-11-04 08:35  appel

	* src/td_rti.F90: Fix compilation problems. Same story as
	  yesterday: Don't put single quotes ' in the documentation. This
	  causes the compilation of the code to fail ...

2005-11-03 18:43  marques

	* build/var2html.pl, doc/octopus.info, doc/octopus.texi,
	  share/variables.local, src/curv_gygi.F90, src/geom_opt.F90,
	  src/h.F90, src/hs.F90, src/io.F90, src/out.F90, src/pes.F90,
	  src/pes_rc.F90, src/phonons.F90, src/poisson3D.F90, src/scf.F90,
	  src/spectrum.F90, src/static_pol.F90, src/systm.F90, src/td.F90,
	  src/td_exp.F90, src/td_init.F90, src/td_rti.F90,
	  src/td_write.F90, src/unocc.F90, src/v_ks.F90: I finished putting
	  the documentatio of the variables. I will now make a list of
	  undocummented variables.

2005-11-03 15:37  appel

	* share/util/: Makefile.am, oct-atomic_occupations,
	  oct-run_periodic_table: There's now a utility to compute the
	  atomic occupations and ExtraStates for all Pseudopotentials that
	  ship with octopus:

	   appel@g35:..share/util> ./oct-atomic_occupations -s Ce_sc
	   # =============================================================
	   # configurations for specie: Ce_sc
	   #  core orbitals	: 1s^2 2s^2 2p^6 3s^2 3p^6 3d^10 4s^2 4p^6
	  4d^10
	   #  valence orbitals	: 5s^2 5p^6 4f^1 5d^1 6s^2
	   #  core electrons	: 46
	   #  valence electrons : 12
	   %Occupations
	    2 | 6 | 1/7 | 1/7 | 1/7 | 1/7 | 1/7 | 1/7 | 1/7 | 1/5 | 1/5 |
	  1/5 | 1/5 | 1/5 | 2
	   %
	   ExtraStates = 10

	  I've updated my script from yesterday in order to append this
	  information to the input files. Also the script now permits to
	  run a single atom

	   appel@g35:..share/util> ./oct-run_periodic_table -s Ce_sc

2005-11-03 08:27  appel

	* share/PP/defaults: Run M-x untabify on the file since octopus
	  didn't like tabs in the file.

2005-11-03 08:26  appel

	* src/: lcao.F90, unocc.F90, xc_functl.F90: o Fixing compilation
	  issues from yesterday.  o Removing unused variables.

2005-11-02 21:04  marques

	* build/mk_varinfo.pl, build/var2html.pl, doc/Makefile.am,
	  doc/description.texi, doc/examples.texi, doc/external.texi,
	  doc/octopus.info, doc/octopus.texi, doc/parser.texi,
	  doc/undocumented.texi, doc/html/vars.php,
	  doc/html/varsLeftFrame.php, doc/html/varsRightFrame.html,
	  doc/html/icons/ftv2blank.gif, doc/html/icons/ftv2doc.gif,
	  doc/html/icons/ftv2folderclosed.gif,
	  doc/html/icons/ftv2folderopen.gif,
	  doc/html/icons/ftv2lastnode.gif, doc/html/icons/ftv2link.gif,
	  doc/html/icons/ftv2mlastnode.gif, doc/html/icons/ftv2mnode.gif,
	  doc/html/icons/ftv2node.gif, doc/html/icons/ftv2plastnode.gif,
	  doc/html/icons/ftv2pnode.gif, doc/html/icons/ftv2vertline.gif,
	  doc/html/js/ftiens4.js, doc/html/js/ua.js, share/variables.local,
	  src/eigen.F90, src/epot.F90, src/f.F90, src/fftw3.F90,
	  src/geometry.F90, src/gs.F90, src/h.F90, src/lasers.F90,
	  src/scf.F90, src/simul_box.F90, src/specie.F90, src/states.F90,
	  src/systm.F90, src/td_exp.F90, src/td_init.F90, src/unocc.F90,
	  src/v_ks.F90, src/xc_functl.F90: I continued my documentation
	  efforts (but now I have to got o bed)

	  *) I am putting the variables that were defined in the old
	  octopus.texi	  in the .F90 files. I stopped just before
	  TDExpOrder. If someone wants	  to continue this boring job, let
	  me know (I'm away tomorrow).

	  *) Now there is a varinfo (used to print errors in octopus) and a
	  varinfo_orig	  used to create the documentation.

	  *) added two more files doc/description.texi doc/external.texi
	  with things that    were in the old manual. The manual is a bit
	  messy now... we have to put it    in shape for the release!!!

	  *) I added the javacript/images for the trees. It is generated in
	  doc/html

2005-11-02 19:36  acastro

	* doc/: Makefile.am, octopus.info, octopus.texi: The problem with
	  the @menu and @end menu that you were mentioning, seems to be
	  solved by putting the description of the items in the master
	  menu.  I have no idea of why, but I could not finish the
	  compilation otherwise.

	  In my case, xemacs failed, emacs did not. I believe that more
	  people will have emacs than xemacs. So I changed that. But I
	  guess this should be treated in the configure.

2005-11-02 17:44  acastro

	* src/out_inc.F90: The code did not compile in parallel without
	  METIS. Now it compiles but it does not run properly.

2005-11-02 17:18  marques

	* build/mk_varinfo.pl, build/var2html.pl, doc/Makefile.am,
	  doc/authors.texi, doc/copying.texi, doc/examples.texi,
	  doc/index.texi, doc/installation.texi, doc/introduction.texi,
	  doc/octopus.info, doc/octopus.texi, doc/parser.texi,
	  doc/undocumented.texi, doc/update.el, share/Makefile.am,
	  src/geometry.F90, src/io.F90, src/simul_box.F90, src/specie.F90:
	  Now, also the list of variables in the texi manual is generated
	  automatically from the share/varinfo file. In order to do this, I
	  have to use (x)emacs in order to update the nodes and menus. Of
	  course the code is *not* bulletproof.

	  *) The automatical generation of nodes *requires* that the texi
	  file is    broken into pieces (one per chapter). That is why
	  you'll find so many	 new files. It also has some bugs, e.g.
	  sometimes you'll have to delete    in octopus.texi the lines
	  between @menu and @end menu. Don't ask me why...

	  *) If you do not have xemacs installed, the update of the nodes
	  will fail. I	  guess that emacs can do the trick also. I should
	  add something to the	  ./configuration script to find it.

	  *) The comments in the Variable blocks contained ni the code
	  should be written    in a striped down version of html. Only half
	  a dozen commands are accepted,    like <i>, <b>, <tt>, <ul>,
	  <li>, &nbsp; Please try to use the minimum	possible.

	  *) When octopus outpus something from varinfo, it will look bad!
	  I will have	 to make a varinfo.orig and a varinfo, the latter
	  *not* including any	 formatting command. This will follow soon,
	  I hope.

2005-11-02 15:09  appel

	* share/: PP/defaults, util/Makefile.am,
	  util/oct-run_periodic_table: Some more work for the release:

	   o I've updated the PP/defaults file. It contains now all
	     pseudopotentials that are included in the octopus package.
	     I've taken the nuclear masses from the NIST database

	      http://physics.nist.gov/PhysRefData/Compositions/index.html

	     To facilitate formatting I've padded the numbers for the
	     masses with zeros.

	     The PP/defaults needs definitely some polishing. The current
	     table contains as subset the previous entries for the TM2
	     species and adds HGH potentials for the rest of the atoms.
	     Grid size and spacing will have to be adapted in most cases,
	     so consider this only as an attempt to get things started.

	   o There's now a script oct-run_periodic_table in util/ that
	     you can use to run octopus for all atoms for which we have
	     pseudopotentials available. The script also gets installed
	     to /usr/bin.

	     I think it would be nice to compare the eigenvalues of such
	     a run with the NIST reference data for the LDA

	      http://physics.nist.gov/PhysRefData/DFTdata

	     My machine has currently proceeded up to the semicore
	  potential
	     of Titanium. However already a bunch of atoms did not
	  converge:

	      appel@g35:..octopus-head/runs> grep -r "SCF \*not\*
	  converged" .
	      ./05_B/static/info:SCF *not* converged!
	      ./06_C/static/info:SCF *not* converged!
	      ./07_N/static/info:SCF *not* converged!
	      ./08_O/static/info:SCF *not* converged!
	      ./09_F/static/info:SCF *not* converged!
	      ./14_Si/static/info:SCF *not* converged!
	      ./15_P/static/info:SCF *not* converged!
	      ./21_Sc_sc/static/info:SCF *not* converged!
	      ./22_Ti/static/info:SCF *not* converged!

	     I'm especially surprised about C, N, O and Si, since these
	  have been
	     in the table before.

	     How could you trust previous octopus calculations for
	  molecules if
	     already the atoms for these species fail? I know that the
	  convergence
	     might be different for molecules, but with the current
	  defaults there's
	     within octopus no way to assess the quality of the atomic
	  eigenvalues
	     for the given PP ...

2005-11-01 17:17  acastro

	* src/simul_box.F90, share/variables.local: Some more effort in the
	  documentation.

2005-11-01 14:28  marques

	* src/casida.F90, src/curv_gygi.F90, src/curvlinear.F90,
	  src/derivatives.F90, src/eigen.F90, src/geometry.F90, src/hs.F90,
	  src/io.F90, src/lasers.F90, src/main.F90, src/mix.F90,
	  src/multicomm.F90, src/multigrid.F90, src/ode_solver_inc.F90,
	  src/poisson.F90, src/poisson3D.F90, src/poisson_multigrid.F90,
	  src/root_solver_inc.F90, src/scalar_mesh.F90, src/simul_box.F90,
	  src/sparskit_inc.F90, src/specie.F90, src/spectrum.F90,
	  src/states.F90, src/units.F90, src/unocc.F90, src/v_ks.F90,
	  build/var2html.pl: In a effort of getting the code ready for the
	  release, I started working on the documentation. The idea is to
	  get *all* variables documented inside the code. Furthermore, I
	  wrote a small script (build/var2html.pl) that converts the
	  share/varinfo file to html. I would like to have a meeting about
	  the future of the documentation in octopus. When will you have
	  time?

2005-10-31 20:19  acastro

	* src/h_inc.F90: The ik should not be modified within the kinetic
	  routine.

2005-10-31 19:40  acastro

	* src/: lcao.F90, unocc.F90: Now an initial LCAO calculation, if
	  possible, is made also for the calculation of the unoccupied
	  states in unocc mode.  This means that the calculation is *much*
	  faster, since the initial points for the cg search are pretty
	  good.

	  This is only possible if there are enough LCAOs available to fill
	  the occupied+unoccupied states.

2005-10-31 15:53  appel

	* build/latest_cvs_commit.sh: The "latest cvs changes" info that
	  octopus prints at startup was not set correctly anymore. The
	  reason were multiple cvs Id tags that are contained in the
	  ChangeLog file. To fix this I added --exclude="./ChangeLog" to
	  the grep call.

2005-10-31 15:47  appel

	* src/: atomic.F90, broad.F90, casida.F90, centergeom.F90, cf.F90,
	  cf_inc.F90, cross_section.F90, crystal.F90, curv_briggs.F90,
	  curv_gygi.F90, curv_modine.F90, curvlinear.F90, derivatives.F90,
	  derivatives_inc.F90, eigen.F90, eigen_arpack.F90, eigen_cg.F90,
	  eigen_evolution.F90, eigen_plan.F90, eigen_trlan.F90, epot.F90,
	  epot_inc.F90, f.F90, f_inc.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, geometry.F90, global.F90, global.h, grid.F90,
	  gs.F90, h.F90, h_inc.F90, hgh.F90, hs.F90, io.F90, lasers.F90,
	  lcao.F90, liboct.F90, liboct_parser.F90, libxc.F90,
	  linalg_adv.F90, linalg_adv_lapack.F90, linalg_basic.F90,
	  linalg_basic_int.F90, linear_response.F90,
	  linear_response_inc.F90, logrid.F90, main.F90, make_st.F90,
	  math.F90, math_cg_inc.F90, math_inc.F90, mesh.F90, mesh_init.F90,
	  mesh_lib.F90, messages.F90, mf.F90, mf_inc.F90, mix.F90, mpi.F90,
	  mpi_inc.F90, multicomm.F90, multigrid.F90, nl_operator.F90,
	  ode_solver.F90, ode_solver_inc.F90, opt_control.F90, out.F90,
	  out_inc.F90, par_vec.F90, par_vec_inc.F90, pes.F90, pes_mask.F90,
	  pes_rc.F90, phonon_spectrum.F90, phonons.F90, poisson.F90,
	  poisson1D.F90, poisson2D.F90, poisson3D.F90, poisson_cg.F90,
	  poisson_corrections.F90, poisson_multigrid.F90, profiling.F90,
	  ps.F90, restart.F90, restart_inc.F90, root_solver.F90,
	  root_solver_inc.F90, rotational_strength.F90, run.F90,
	  scalar_mesh.F90, scf.F90, simul_box.F90, sparskit.F90,
	  sparskit_driver.F90, sparskit_inc.F90, specie.F90, spectrum.F90,
	  spline.F90, states.F90, states_inc.F90, states_kpoints.F90,
	  static_pol.F90, static_pol_lr.F90, stencil_cube.F90,
	  stencil_star.F90, stencil_starplus.F90, stencil_variational.F90,
	  string.F90, syslabels.F90, systm.F90, td.F90, td_calc.F90,
	  td_exp.F90, td_exp_split.F90, td_init.F90, td_rti.F90,
	  td_write.F90, tm.F90, units.F90, unocc.F90, v_ks.F90,
	  v_ks_inc.F90, varinfo.F90, wave_matching.F90, xc.F90, xc_KLI.F90,
	  xc_OEP.F90, xc_OEP_SIC.F90, xc_OEP_inc.F90, xc_OEP_x.F90,
	  xc_axc.F90, xc_functl.F90, xc_fxc.F90, xc_kxc.F90, xc_vxc.F90,
	  xyz_adjust.F90, xyz_file.F90, xyzanim.F90: This is a major effort
	  to improve the code for the release:

	    o The serial and parallel flavours of octopus compile now
	  without
	      _any_ warnings (at least using NAG on x86_64 and Intel v9 on
	  i386 :).
	      All unused variables have been removed. Please make an effort
	  to
	      keep the sources in this shape until we release.

	      Having no warnings anymore has the nice side effect that we
	  can
	      take them now serious: whenever you see a warning during
	  compilation
	      you introduced something fishy in the code you are working
	  at.

	    o The changes are also an attempt to give the code a unified
	  look
	      an feel. I tried to use the same formatting style in all
	  files.
	      In this way one should feel familiar also with not so often
	  touched
	      parts of the sources.
	      I'll soon commit a small document to the cvs that summarizes
	  the
	      style I used (we could have some opinion polls on that in the
	  next
	      IRC meeting).

2005-10-31 11:06  acastro

	* src/: gs.F90, lcao.F90: Bug fixed.  The LCAO for the
	  spin-polarized case was not handled properly.

2005-10-31 10:37  acastro

	* src/specie.F90: Bug fixed.  A bug that I introduced yesterday
	  made the code crash when running with a pseudopotential that had
	  more than the l=0 component.

2005-10-30 19:47  acastro

	* src/lcao.F90: The lcao data type now contains a state data type,
	  instead of just a set of wave functions. I think it is cleaner
	  this way.

2005-10-29 11:48  acastro

	* src/: eigen_cg.F90, lcao.F90, math.F90, specie.F90: Harmonic
	  oscillator functions (in 1D, 2D or 3D) are used as initial
	  wavefunctions to do "LCAO" calculations with user defined
	  potentials.

	  The code is still a little bit ugly, but it seems to work.

2005-10-28 17:09  acastro

	* src/gs.F90: It may be that a LCAO calculation is to be done with
	  user defined potential (for that purpose I am currently
	  implementing harmonic oscillator wave functions). But since it
	  may be actually not desirable, let us leave it this way:
	  LCAOStart = .true. by default if we have pseudpotentials,
	  LCAOStart = .false. if we have user defined potentials.

2005-10-28 15:45  rozzi

	* src/gs.F90: I think it is not well defined to do LCAO on user_def
	  species. This fixes last night failed test on the empty periodic
	  lattice in the quick and dirty way. If we want LCAO start also
	  for user_def, this issue has to be investigated further.

2005-10-28 15:42  rozzi

	* src/eigen_cg.F90: I guess this is what you mean, Alberto. :)

2005-10-28 01:55  acastro

	* src/eigen_cg.F90: Bug fixed.	The conjugate gradients method for
	  diagonalizing the Hamiltonian (the default or old one, "cg") had
	  the annoying ability to modify and overwrite an eigenvector that
	  is passed to the routine but which is already well converged.
	  This bug could be the one responsible for an annoying behavior
	  that we got sometimes -- namely that a SCF loop that is
	  apparently going well suddenly went crazy.

	  In any case, I will change the default cg to the new one
	  ("cg_new".  If we observe no problems, then eventually the old
	  one will go away. I think that the new one is more elegant and,
	  moreover, I still do not understand some of the lines of code of
	  the old one.

2005-10-27 17:15  marques

	* src/: casida.F90, multicomm.F90, run.F90, systm.F90: Casida now
	  also works in parallel, both in serial and in e-h pairs. However,
	  it is not OK, and requires a lot of cleaning. I don't think it is
	  so important at this point, so I will look at it later.

2005-10-27 15:32  xavier

	* src/static_pol_lr.F90: Now CalculationMode pol_lr calculates also
	  beta(i,j,k), the first static hyperpolarizability using Density
	  Functional Perturbation Theory.  Until now the values obtained
	  with this method agree with those obtained by finite differences,
	  but there are still more tests to do, so this code is not
	  completely reliable.

2005-10-27 15:28  acastro

	* testsuite/oct-run_regression_test.pl, src/multigrid.F90,
	  src/poisson_multigrid.F90: Bug fixed.  The testsuite was not
	  passed: the multigrid tests were broken. I think I fixed the bug,
	  however, I have to say that I am still not very expert on that
	  part of the code. So Xavier, Miguel, please take a look at my
	  changes.  Now the tests are passed at least in my machine.

2005-10-27 15:15  xavier

	* liboct_parser/parse.c: A bit of code cleaning.

2005-10-27 13:34  acastro

	* src/: global.F90, main.F90, math.F90, simul_box.F90, states.F90:
	  I think that the dimensions of the calculation should be
	  available to all modules, not just those that use simul_box. For
	  example, I am going to need it in specie. So I put it in global,
	  as it was before -- but this time I just put it as a variable,
	  calc_dim, instead of inside conf structure.

	  Also, a couple of minor bugs fixed.

2005-10-27 09:58  rozzi

	* src/lcao.F90: the code was not compiling with complex

2005-10-26 20:24  marques

	* src/: Makefile.am, grid.F90, h.F90, mesh.F90, mesh_create.F90,
	  mesh_init.F90, multicomm.F90, multigrid.F90, nl_operator.F90,
	  opt_control.F90, out.F90, out_inc.F90, poisson1D.F90,
	  poisson2D.F90, states.F90, states_inc.F90, systm.F90, td.F90,
	  td_rti.F90: *) renamed mesh_create.F90 to mesh_init.F90, as the
	  functions in this file    are indeed mesh_init*

	  *) Lots of cleaning in the parallel stuff. Now octopus_mpi can
	  run in only	 1 processor. Furthermore, the TD part can be run
	  parallel in domains,	  states, or both (before it run only in
	  both)

	  *) Due to the cleaning, several reduce=.true. disappeared ;) This
	  makes the    code slightly simpler in some places.

	  I only checked in 1D. It would be great if you could

2005-10-26 16:03  marques

	* src/: casida.F90, derivatives.F90, epot_inc.F90, h.F90, mesh.F90,
	  mesh_create.F90, mf_inc.F90, multicomm.F90, nl_operator.F90,
	  out_inc.F90, par_vec.F90, par_vec_inc.F90, restart_inc.F90,
	  specie.F90, states.F90, states_inc.F90, systm.F90, td.F90,
	  td_calc.F90, td_write.F90, xc_KLI.F90, xc_OEP.F90,
	  xc_OEP_SIC.F90, xc_OEP_inc.F90, xc_OEP_x.F90: Still some cleaning
	  to be done. However, octopus now   *) runs in parallel in the
	  ground-state in domains   *) runs in parallel in TD both in
	  domains and in states

2005-10-26 13:12  acastro

	* share/variables.local, src/geometry.F90, src/states.F90: The
	  variable geo%only_user_def is now deduced from what is read in
	  the Species block, not read from the input file. That could lead
	  to an inconsistency. One input variable less.

	  Also, I documented SpinComponents: we have unpolarized,
	  spin_polarized or polarized, and spinors or non_collinear.

2005-10-26 02:23  acastro

	* ChangeLog: [no log message]

2005-10-26 02:19  acastro

	* src/: lcao.F90, specie.F90, systm.F90: atom_get_wf, which was in
	  system module, is gone. Now there is a subroutine,
	  specie_get_iwf, that plays that role -- in the spirit of
	  specie_get_local, etc. I think it makes more sense this way.
	  atom_density should go, also, but I will take care of that later.

	  In specie_get_iwf I will put also the possibility to define
	  harmonic oscillator wave functions for model potentials, etc.

	  Also, I want that the calculation of unoccupied states is
	  initiated from unoccupied atomic states, rather than from random
	  functions. These random functions lead to horrible convergence
	  problems sometimes.

2005-10-25 10:00  marques

	* src/multicomm.F90: forgot to initialize a variable

2005-10-25 09:59  marques

	* configure.ac: --disable-debug was not working as expected

2005-10-24 18:27  micael

	* src/: epot.F90, h_inc.F90:  *) More bug fixes related to the
	  CDFT. Still not working though...

2005-10-24 18:24  micael

	* src/lcao.F90:  *) Complex executable was not compiling. As I
	  believe the line that was causing the problem
	     was there only for debuging purposes I removed it.

2005-10-19 21:30  marques

	* src/: Makefile.am, casida.F90, epot.F90, global.F90, grid.F90,
	  gs.F90, h.F90, main.F90, math.F90, mesh.F90, mesh_create.F90,
	  mf.F90, mix.F90, mpi.F90, multicomm.F90, multigrid.F90, out.F90,
	  par_vec.F90, restart.F90, run.F90, states.F90, systm.F90, td.F90,
	  td_write.F90, xc.F90, xc_OEP.F90: This commit is related to the
	  multi parallelism in octopus. It still does not work always, but
	  I am leaving for the weekend, and I wanted to commit it before
	  leaving. The code compiles in serial and runs all tests.

	  *) I changed quite a lot the code that Heiko and Florian wrote
	  (now in    multicomm.F90). The comments are *not* consistent with
	  the code (I will    change it when I come back) *) The nodes are
	  arranged in a tree structure. If you want to see the tree,
	  just use "dot" on the file tree.dot.	*) Now each node just gets
	  n_index communicators. I think this is sufficient,	but it may
	  be changed in the future.  *) Nodes are assigned using a very
	  simple algorithm. Priority is given to    parallelization in
	  k-points, then in states, and finally in domains.  *) TD part is
	  still not changed (nor Casida), but the code behaves more or
	  less for the GS (at least in 1D ;) *) Lots of cleaning and
	  testing missing (for next week).

2005-10-19 00:06  xavier

	* liboct_parser/parse.c: Now liboct_parser can read variables from
	  the environment, this is useful to call octopus from scripts
	  without having to modify the input file or to give parameters
	  from the command line.

	  To use this, the environment variable OCT_PARSE_ENV must be
	  defined and the octopus variable name must be prepended with OCT_
	  .

	  For example, to call octopus with the CG poisson solver:

	  $ OCT_PARSE_ENV=1 OCT_PoissonSolver=cg_corrected octopus

	  or

	  $ export OCT_PARSE_ENV=1 $ export OCT_PoissonSolver=cg_corrected
	  $ octopus

	  This works only if the variables are not defined inside of the
	  input file (if they are, variables are defined twice and I don't
	  know what happens there). Blocks are not supported.

	  The code is only 15 lines long and it doesn't change anything of
	  the rest of the code of the parser, so it shouldn't introduce
	  bugs (at least not many ;-).

2005-10-18 18:06  acastro

	* src/lcao.F90, src/liboct.F90, src/main.F90, src/math.F90,
	  src/syslabels.F90, src/systm.F90, liboct/oct_gsl_f.c: I started
	  improving the initial guesses for the SCF calculations. The
	  reason is that there are serious convergence problems for model
	  potential (quantum dots) in 1D and 2D (where random functions are
	  used), and also for the calculation of particle states in the
	  unocc mode -- where also random functions are used.

	  I am basicly going to put Harmonic oscillators functions. The
	  code I commit now is far from complete (only 1D Harmonic
	  oscillator functions for the moment).

2005-10-18 15:01  xavier

	* testsuite/finite_systems_3d/multigrid.test: Added a test for the
	  multigrid poisson solver.

2005-10-18 14:51  xavier

	* libxc/lda.c, libxc/util.h, libxc/xc.h, libxc/xc_f.c,
	  src/libxc.F90, src/xc.F90, src/xc_kxc.F90: Added Kxc, the third
	  derivatives of Exc, to libxc. It's calculated using a second
	  order numerical derivative of Vxc.

2005-10-18 14:27  xavier

	* src/poisson_multigrid.F90: Added Full MultiGrid, in this scheme a
	  good initial approximation is obtained by solving the problem in
	  the coarser levels. This is only used when the approximation
	  passed to the subroutine is not good enough.

2005-10-18 12:54  marques

	* liboct/varinfo.c: Stupid bug. I was comparing a C string with a
	  Fortran string, and sometimes it did not work out...

2005-10-17 11:55  micael

	* src/: derivatives_inc.F90, f_inc.F90:  *) Bug fixed: gradient
	  should be initialized to zero inside subroutine
	      X(derivatives_grad) as it is declared as intent(out).

2005-10-14 18:00  micael

	* src/h_inc.F90:  *) Bug fixes in the CDFT extra-terms.

2005-10-14 17:49  micael

	* share/PP/HGH/B.hgh:  *) Bug fixed.

2005-10-14 15:37  appel

	* src/: epot.F90, gs.F90, h.F90, main.F90, mf.F90, mpi.F90,
	  out.F90, par_vec.F90, restart.F90, states.F90, td.F90,
	  td_write.F90, xc_OEP.F90: The parallel version of the code did
	  not compile since Alberto was declaring the global module as
	  private. I added preprocessor statements to include either the
	  mpi module or mpif.h in the corresponding files.  The affected
	  files are therefore the only ones where we use MPI statements.

2005-10-14 15:35  appel

	* src/curv_gygi.F90: natoms_ was accidentally declared as FLOAT.

2005-10-14 15:34  appel

	* src/casida.F90: Remove unused variables.

2005-10-14 11:33  xavier

	* src/static_pol_lr.F90: Fixed compilation issue.

2005-10-13 15:26  xavier

	* src/: main.F90, mix.F90: Added missing 'use varinfo' that was
	  causing problems with ifc.

2005-10-13 13:39  acastro

	* src/: cross_section.F90, global.F90, messages.F90, profiling.F90,
	  spectrum.F90: The global module was not declared as private.

2005-10-13 12:58  xavier

	* src/td_exp.F90: BUGFIX: In lanczos, the workspace allocated to
	  call ZGPADM was too small, this caused the subroutine to stop
	  sometimes.

2005-10-13 12:47  acastro

	* share/variables.local, src/mix.F90, src/scf.F90: OK, now the
	  GR-Pulay scheme also works with domain-parallelization.

2005-10-13 12:00  acastro

	* share/variables.local, src/mix.F90, src/poisson3D.F90,
	  src/scf.F90: The Broyden mixing scheme now also works with domain
	  parallelization.  I will fix the GR-Pulay later if I have time.

	  Incidentally, the mixing scheme was also wrong for the case of
	  using adaptive coordinates. This didn't mean that it yielded
	  wrong results (if the result was converged, it was correct), but
	  it showed poor convergence behavior. Now it should be better, but
	  that remains to be tested.

2005-10-12 15:57  acastro

	* src/: main.F90, varinfo.F90: Bug fixed.  The code was not
	  complaining when passing a a non-valid CalculationMode input
	  variable. It just did nothing.

	  In order to fix this bug, I introduced a new public function in
	  the varinfo module: varinfo_valid_option. It returns .true. if
	  the value given to an option is valid. *However*, it now only
	  works for variables whose range of valid option is a finite list
	  of integers (such as the CalculationMode). In principle, we could
	  get ambitious about this, and increase the functionality of it.

2005-10-12 15:43  marques

	* libxc/lda_c_pw.c: There was a sign wrong in the definition of
	  pw92.

	  Micael, can you please test this functional?

2005-10-12 14:46  marques

	* src/: epot.F90, epot_inc.F90, mesh.F90, mesh_create.F90,
	  mf_inc.F90, simul_box.F90: *) mpi code now works even if using
	  only one processor (it was given ?????? before) *) You can now
	  run in parallel with non-local pseudopotentials

	  However, I was not able to find the bug when running mpi with
	  interacting electrons. This is what is missing for us to have the
	  parallel version!!! Help anyone????

2005-10-12 11:10  marques

	* libxc/Makefile.am, src/Makefile.am, src/epot.F90,
	  src/epot_inc.F90, src/grid.F90, src/h_inc.F90, src/main.F90,
	  src/td.F90: Some cleaning:   *) test.x is no longer generated in
	  libxc/   *) changed the names of several single character
	  variables. Please *do not*	  call a variable a, b, n, c or
	  whatever!!!!	 *) I noticed that some of you had tabs of 3 and 4
	  spaces. Do not forget that	  the default we agreed upon some
	  years ago was *2*. Please change you emacs	  settings!

2005-10-11 15:28  acastro

	* INSTALL, TODO: Removed the TODO list, which was wildly outdated.
	  Now it is an empty file. We could start maintaining it after the
	  release...

	  Also, I have put the GNU generic installation instructions in the
	  INSTALL file, after a small header referring the reader to the
	  manual for octopus- specific details.

2005-10-11 14:03  acastro

	* src/casida.F90: Bug fixed.  For some reason I had forgotten to
	  remove a "stop" statement that I put for debugging...

2005-10-11 11:50  appel

	* src/nl_operator.F90: Do only ghost updates in
	  znl_operator_operate when there is more than one partition.

2005-10-11 11:50  appel

	* src/grid.F90: Pass gr to grid_init as intent(inout). The code was
	  segfaulting with the NAG compiler when only intent(out) was used.
	  The problem didn't show up with the Intel compiler and I still
	  don't understand why NAG failes in this case (compiler bug)?

2005-10-10 00:49  acastro

	* ChangeLog: [no log message]

2005-10-10 00:39  acastro

	* ChangeLog: I substituted the ChangeLog, that none of us
	  maintained, by a proper one.	I generated it through the command:

	  cvs2cl.pl --fsf -l "-d >2005-06-01"

	  The command cvs2cl.pl seems to be pretty standard (at least it is
	  in the debian official repository). Basically it uses the output
	  from the cvs log command -- so all the comments that we do when
	  committing code.  The option "-d >2005-06-01" selects logs more
	  recent than 2005-06-01.  Otherwise the file would get too large.
	  The choice was completely arbitrary.

	  Note than commiting a revision to the ChangeLog file, the way to
	  do it is in my opinion to commit it isolated (just the ChangeLog
	  file), and putting no log in the commit message (it is sort of
	  redundant to log the ChangeLog). Of course this first one is the
	  exception.

2005-10-07 10:54  lorenzen

	* share/util/plot_profiling: Added simple perl script to generate
	  some plots from results of profiling runs.

2005-10-07 10:53  lorenzen

	* src/: grid.F90, mf_inc.F90, nl_operator.F90, par_vec.F90,
	  par_vec_inc.F90: * The domain communicator in grid_init was
	  accidentally set to	MPI_COMM_WORLD.  * vec_ghost_update and
	  MPI_Allreduce are only called when haveing   more than one
	  partition.  * Added some notes concerning a possible problem with
	  the size of	the global array in type(pv_type).

2005-10-06 15:35  acastro

	* src/: grid.F90, poisson_multigrid.F90, scf.F90, systm.F90,
	  td_write.F90: Just style: the grid module was not declared as
	  private, and so some modules were used through it, instead of
	  directly, which I think is bad practice.

2005-10-06 13:31  lorenzen

	* src/mpi.F90: It is now possible to have more index-combinations
	  than nodes (i. e. n_node < product(index_range)). In this case,
	  the indices are mapped onto the available nodes with respect to
	  communication costs of the different indices.  This mapping is
	  also done if n_node = product(index_range) to keep things simple
	  but in this case the outcome is just a one-to-one mapping.  The
	  contraction is done using METIS.

	  The multicomm_sanity_check has to be refreshed as I have removed
	  the input variable NumberOfProcessorsForDomain. I think this
	  variable leads to too much confusion. The number of processors
	  per domain is implicitly set by n_node/n_domain_comm (and
	  n_domain_comm is either product(range_index) or n_node if n_node
	  < product(range_index)).

2005-10-05 17:20  lorenzen

	* src/: grid.F90, mpi.F90, systm.F90: Changes related to the
	  multicommunicator part: 1) Fixed the creation of domain
	  communicators in case of    no domain parallelization.  2)
	  Changed to code to compute the index communicators to use
	  generalized	 indexing functions.  3) Corrected the explainatory
	  comment at head of mpi.F90.

	  Bugfix: The indexing scheme for domain_comm_of_node has to
	  explicitly declared for formal parameters as the index range
	  starts with 0.

2005-10-05 09:02  acastro

	* src/: casida.F90, liboct.F90, out.F90, states_inc.F90:
	  Substituted loct_wfs_list by some loct_isinstringlist, easier to
	  use.	(oct_wfs_list stays internal to the lib_oct module as an
	  interface to the C library).

2005-10-05 08:30  appel

	* src/: grid.F90, systm.F90: Call simul_box_init before states_init
	  is called. Otherwise lattice primitive vectors are not available
	  for kpoint initialization (this was a leftover from yesterdays
	  rearrangement).

2005-10-05 08:30  appel

	* src/: casida.F90, curv_gygi.F90, linalg_adv_lapack.F90, mpi.F90,
	  poisson_corrections.F90, spectrum.F90, td_write.F90: Remove
	  unused variables.

2005-10-04 11:27  appel

	* src/: geometry.F90, grid.F90, mpi.F90, states.F90, systm.F90:
	  These changes introduce initial support for (MPI)
	  multi-communicators.	In general the code now distinguishes
	  between domain communicators and index communicators. The latter
	  will be used for state indices and kpoints. The new code in the
	  mpi module allows for index parallelizations in n-dimensional
	  hypercubes, i.e. I kept the routines general so that in principle
	  we can add further indices later on. For now I specialized to a
	  two dimensional index parallelization: states and kpoints.

	  Multi-communicators are initialized with multicomm_init. At the
	  point when this routine is called the number of states and
	  kpoints have to be available. This required some reordering in
	  system_init, i.e. a stripped down version of states_init is now
	  called _before_ we call grid_init. In this way we can make sure
	  that the number of states and kpoints is known and that the right
	  domain communicators are passed to grid_init.

	  There is also a new input variable called ParallelizationStrategy
	  that decides what kind of parallelization Octopus will use:

	   1)  000 - serial	     (single domain, all states, kpoints on
	  a single processor)
	   2)  001 - only_domains    (only parallelization in domains)
	   3)  010 - only_kpoints    (no parallelization in domains, only
	  in kpoints)
	   4)  011 - kpoints_domains (combined parallelization in kpoints
	  and domains)
	   5)  100 - only_states     (only parallelization in state
	  indices)
	   6)  101 - states_domains  (combined parallelization in states
	  and domains)
	   7)  110 - states_kpoints  (no parallelization in domains, only
	  in states and kpoints)
	   8)  111 - full	     (parallelization in states, kpoints
	  and domains)

	  Except for a few cases this list is of course not available yet.
	  Also a possible choice will depend on the run mode. There is
	  quite some integration work in the rest of the code that has to
	  be done (e.g. the existing TD parallelization should be combined
	  with this scheme, other things like parallelization in kpoints
	  hasn't been touched at all).

	  The idea is to stop the code for parallelization schemes that are
	  not available yet and to get only the important ones (e.g. 1, 2
	  or 5 for td) running initially. Later refinement is always
	  possible but it is in my opinion important to have things
	  organized from the start ...

	  Expect the parallel version of the code to be broken for quite
	  some time until the integration with the above scheme has been
	  completed.  If you need to run eg. TD in parallel please fetch an
	  older version from the cvs that was still ok.

2005-10-04 10:17  appel

	* src/main.F90: Reorder profiling calls to allow profiling also for
	  all subsystems in multi subsystem mode.

2005-10-04 10:16  appel

	* src/profiling.F90: o Initialize all counter in profiling_init.  o
	  Fix SIGFPE. Avoid divisions by zero.

2005-10-04 10:12  appel

	* src/io.F90: Fix typo.

2005-10-02 23:14  acastro

	* src/: crystal.F90, linalg_adv_lapack.F90, mix.F90, spectrum.F90,
	  states_inc.F90: The calculation of the determinant, in the
	  routines ddeterminant and zdeterminant that I just submitted, was
	  not working for the Hermitian case. I was actually unable of
	  making it work, either because of my fault or because an error in
	  my implementation of LAPACK, I don't know.  In any case, I
	  removed the Hermitian case; all cases are treated now in the
	  general case, which works fine.

2005-10-02 19:13  acastro

	* src/: casida.F90, crystal.F90, curvlinear.F90, linalg_adv.F90,
	  linalg_adv_lapack.F90, math.F90, mix.F90, spectrum.F90,
	  states_inc.F90: The routine lalg_invert was assuming only
	  symmetric/Hermitian matrices.  Now it may only use non-symmetric
	  ones. I also "merged" the determinant and inversion matrices,
	  since they share the code. But I left two public wrappers,
	  lalg_determinant and lalg_inverter. There is a mandatory
	  argument, invert = .false./.true., which tells wether or not the
	  matrix is to be inverted -- the determinant is always calculated,
	  and is the function result.  Since it is no longer necessary,
	  invert_3by3 is gone.

2005-09-30 22:31  acastro

	* src/casida.F90: Added support for spin-polarized calculations in
	  the linear-response TDDFT formalism (Casida mode).  Not all
	  kernels work, though. And in some cases I get some negative
	  excitation energies, don't know why.

2005-09-30 21:23  acastro

	* src/: casida.F90, restart.F90, td_write.F90: Added preliminary
	  support for spin-polarized linear response TDDFT calculations.

2005-09-30 01:06  acastro

	* src/casida.F90: Just rearrangements in the casida module. I think
	  it is cleaner this way.  The reason is that I had to do these
	  changes in my temporal branch, and then I thought that since this
	  looks nicer, I should put it in main.

2005-09-29 16:47  lorenzen

	* src/: mf_inc.F90, profiling.F90: (*) The profiling module now
	  also computes the average time     spent between in and out calls
	  and writes it in an extra	column in the output.  (*) Added
	  profiling calls to measure the time of allreduce     in mf_dotp.

2005-09-29 16:42  acastro

	* src/: casida.F90, restart.F90, td_write.F90: Introduced a
	  "restart_look" function that takes a look at a restart directory
	  to see what is inside, how many states, etc.	This way there is
	  no need to read NumberUnoccStates in td_write and in the casida
	  run-mode. I think this is the cleanest way.

2005-09-29 10:07  acastro

	* src/casida.F90: I was about to document the variables in the
	  casida run-mode (the ones that decide which mode is to be run --
	  eigenvalues differences, Petersilka, or Casida), but I realized
	  that the best way to document them is to eliminate them. This way
	  it is much easier for the users and for us.

	  There is no reason why one wouldn't want to get the eigenvalues
	  differences, since it takes a fraction of a second.  And ther is
	  no reason why one wouldn't want to execute the Petersilka scheme:
	  the time spent on it is not lost since the matrix elements
	  calculated are used afterwards for the Casida approach. And, in
	  case that one wants to do the Petersilka calculation and not the
	  Casida one because it is too time-consuming, one can always abort
	  the program after the Petersika file has been written.

	  Also, I fixed a bug regarding the proper reading of the stored
	  matrix elements -- before it did not consider that the matrix is
	  symmetric, which led to unnecessary calculations.

	  I changed the variable "ExciteStates" (misleading name) to
	  "LinearResponseKohnShamStates", and documented it.

2005-09-28 17:42  lorenzen

	* src/mpi.F90: Added a type for the multi communicator part and a
	  partial description of how it will work.

2005-09-28 14:37  acastro

	* src/: epot.F90, lasers.F90: I rewrote a little bit the laser
	  field definition. Wrote a short piece of documentation for
	  "TDLasers"

	  The reason is that I wanted to allow for the possibility of a
	  more arbitary shape for the spatial part of the external field.
	  Before it could only be a dipolar field. Now the code may read
	  the shape from a file. Of course this file has to be written
	  before in some way.

	  I had been working on this in my own branch, the one where I am
	  implementing the technique of construction of excited states
	  through "propagation in the BLUES" (BLackout of Undesired Excited
	  States, I just made up the name), but I thought that maybe it
	  would be nice to put it in main, since it could be useful for
	  other purpuses (application of quadrupolar fields, who knows)

2005-09-28 10:34  lorenzen

	* src/: mesh_lib.F90, nl_operator.F90, par_vec.F90: Removed unused
	  variable dir.

2005-09-28 09:42  acastro

	* src/: main.F90, run.F90, syslabels.F90: Now the multi system mode
	  is not any more a run mode. The variable CalculationMode may now
	  be a scalar (in which case we only have one system) or a block
	  (in which case it should include the labels in the first row, the
	  run-modes in the second row, and the order in the third row).

2005-09-28 07:51  appel

	* share/samples/Na2: Update sample to take new naming scheme for
	  debug level into account.

2005-09-28 07:50  appel

	* src/: io.F90, main.F90, profiling.F90: Syslabels have to be
	  available before the first io_mkdir takes place. The call of
	  io_init() and profiling_init() is now done after
	  syslabels_init().

2005-09-28 07:44  appel

	* src/messages.F90: Remove recursion in timing functions that
	  caused stack overflows. The push/pop functions were calling
	  functions that were calling push/pop which were calling functions
	  that were calling push/pop which were calling functions that were
	  calling push/pop which were calling functions ....  :)

2005-09-27 22:46  acastro

	* src/: eigen_trlan.F90, epot.F90, global.F90, grid.F90, hgh.F90,
	  io.F90, main.F90, mesh.F90, messages.F90, nl_operator.F90,
	  specie.F90, states.F90, tm.F90, v_ks.F90, xyzanim.F90: I
	  eliminated the conf%verbose variable. So we don't have verbosity
	  levels any more; only debug and non-debug mode -- which is
	  controlled by the in_debug_mode logical variable.

2005-09-27 19:52  acastro

	* src/: hs.F90, rotational_strength.F90, spectrum.F90, states.F90,
	  systm.F90: Fixed the rotational strength program, which was
	  broken. (Now it is not broken, but still could be giving wrong
	  numbers).  Also, removed a couple of appearances of vol_pp... I
	  hope it helps for the parallelization.

2005-09-27 18:44  acastro

	* src/: rotational_strength.F90, spectrum.F90, td_write.F90: Just
	  usability; I made all headers of the output files look a little
	  bit more homogeneous.

2005-09-27 18:38  lorenzen

	* src/hs.F90: Bugfix: mode was not declared.

2005-09-27 10:37  lorenzen

	* src/: math_cg_inc.F90, poisson_cg.F90, poisson_corrections.F90:
	  Fixed the cg corrected poisson solver to work in parallel.  Only
	  some arrays had to extended to hold ghost points.

	  However, it seems that the numbers from the cg corrected as well
	  as from the cg solver differ considerably compared to those
	  computed by serial runs which leads to more and more inaccurate
	  eigenvalues with increasing number of nodes (and -- as I
	  mentioned previously -- to more SCF cycles eating up the parallel
	  speed up, it is strange that it converges anyway).  So, this is
	  still an open issue.

2005-09-27 09:16  lorenzen

	* src/: Makefile.am, global.F90, io.F90, main.F90, mf.F90,
	  mf_inc.F90, nl_operator.F90, par_vec.F90, par_vec_inc.F90,
	  profiling.F90, scf.F90: Sorry, I forgot to add the profiling
	  module...

	  Here it is together with some minor changes: 1) Everything is
	  called profiling -- not profile -- now.  2) The subdirectory for
	  profiling results is called	 profiling.NNN with NNN being the
	  number of nodes. This    way it is easier to measure scaling
	  because a new subdirectory	is created for every run.

2005-09-27 00:38  acastro

	* src/: Makefile.am, hs.F90, hs_from_acc.F90, hs_from_mult.F90:
	  Merged hs-from-mult and hs-from-acc programs; doesn't make sense
	  to have two. Now it is called oct-harmonic-spectrum, and an input
	  variable HarmonicSpectrumMode decides in which way the spectrum
	  is calculated.

	  The HSPolarization is renamed to HarmonicSpectrumPolarization. I
	  documented the variables.

2005-09-26 17:02  appel

	* src/.cvsignore: Update cvsignore file.

2005-09-26 16:42  lorenzen

	* src/: Makefile.am, global.F90, main.F90, messages.F90, mf.F90,
	  mf_inc.F90, nl_operator.F90, par_vec.F90, par_vec_inc.F90,
	  scf.F90: Added a simple profiling module, a profiling mode
	  (ProfileMode in the input file) and some profiling hooks to the
	  code.

	  The profiler counts the number of times a code between call
	  profile_in(tag) ...  call profile_out(tag) is executed and how
	  much time this takes.

	  In the end, each node writes a file './profile/profile.nnn' (nnn
	  being the node number) with statistics for each tag. Tags have to
	  be registered in the profile module.

	  Later, I will write a simple script that displays the profiling
	  information of different runs or different parts of the code in
	  some diagrams.

2005-09-26 15:01  acastro

	* src/: curv_gygi.F90, derivatives.F90: Changed the defaults for
	  the Gygi grid, since the ones that were used lead to the failure
	  of the inversion of the mapping through the Newton- Raphson
	  procedure in many cases.

	  I also tried to improve this procedure for the difficult cases,
	  by trying to improve the guess of the initial point. But it does
	  not guarantee the result.

2005-09-26 10:17  appel

	* src/states_inc.F90: Correct lalg_scal call (NP -> NP_PART
	  transition).

2005-09-26 10:16  appel

	* src/: Makefile.am, liboct_parser.F90, messages.F90,
	  syslabels.F90: Remove 'use messages' from liboct_parser and
	  syslabels. In both modules a write_fatal is now done manually. I
	  had to change this to circumvent cyclic dependencies that
	  appeared in multi_subsys_mode.

2005-09-26 10:15  appel

	* src/epot_inc.F90: Remove SIGFPE that occurred for periodic
	  systems during force calculations.

2005-09-26 10:14  appel

	* src/: ode_solver.F90, ode_solver_inc.F90, root_solver.F90,
	  root_solver_inc.F90, scalar_mesh.F90, sparskit.F90,
	  sparskit_inc.F90: Add calls to input_error().

2005-09-26 10:14  appel

	* src/poisson3D.F90: push_sub call was missing (stack got scrambled
	  due to this).

2005-09-26 07:10  acastro

	* src/: geometry.F90, spectrum.F90, units.F90: Bug fixed.  Forgot
	  to remove the public declaration of the strength_function stuff
	  as public in spectrum module.

	  Added the documentation of a couple of variables.

2005-09-25 20:33  acastro

	* src/: Makefile.am, spectrum.F90, strength_function.F90: Removed
	  strength_function.F90 file and, with it, oct-sf program.  Now
	  oct-cross-section should be used instead.

	  The dipole strength is also printed in the cross_section_vector
	  file.

	  Still some work has to be done to clean up the utility programs,
	  to make them more user-friendly, and to document them properly.

2005-09-23 18:05  lorenzen

	* src/restart_inc.F90: Removed unused variable.

2005-09-23 18:04  lorenzen

	* src/: poisson_cg.F90, poisson_corrections.F90: Fixed the poisson
	  cg solver to work in parallel. Therefore I had to change
	  get_multipoles to use Xmf_integrate instead of doing the
	  integration by hand and boundary_conditions to respect the
	  different location of boundary points in the parallel case.

	  Presently, it seems that the number of SCF cycles increases when
	  run on more nodes: 11 iterations serially, 17 on two nodes and 24
	  on 4 nodes. This may be due to some minor bug I have not found
	  yet (but the intermediate numbers I have checked looked quite
	  good). It may also be related to the non-commuting algebra on
	  machine numbers. This will have to be investigated but at least
	  it is working in principle.

2005-09-23 16:45  appel

	* src/h_inc.F90: Bugfix: the spinor test was broken since lalg_scal
	  calls are affected by the NP -> NP_PART transition. There seem to
	  be further places in the code that might have the same problem.
	  This is to be checked.

2005-09-23 14:37  acastro

	* src/spectrum.F90: Th cross sectio utility now outputs, in
	  addition to the full tensor, also the two principal invariants:
	  the trace, and the anisotropy \Delta\sigma, defined as:

	  \Delta\sigma = (1/3)*( 3*Tr(\sigma^2) - Tr(\sigma)^2 )

	  Also, it prints the names of the columns and the units.

2005-09-23 12:51  acastro

	* src/: broad.F90, centergeom.F90, cross_section.F90,
	  hs_from_acc.F90, hs_from_mult.F90, make_st.F90,
	  phonon_spectrum.F90, rotational_strength.F90,
	  strength_function.F90, syslabels.F90, xyzanim.F90: Bug fixed.
	  All subprograms crashed in debugging mode because the "debug"
	  directory was not created.

2005-09-23 11:10  lorenzen

	* src/poisson2D.F90: Bugfix: Hardcoded bounds for the two
	  dimensions to make the NAG compiler with -C=array happy.

2005-09-23 10:47  lorenzen

	* src/eigen_plan.F90: Actually, then lanczos solver is working. I
	  just tested with a way to small mesh (just a handful of points).
	  So the FIXME is removed.

2005-09-23 10:17  appel

	* src/eigen_cg.F90: Now also eigen_solver_cg2_new seems to work
	  properly in parallel, NP -> NP_PART has been adjusted.

2005-09-23 10:16  appel

	* src/derivatives.F90: The code spends quite some time in
	  make_discretization when running with curvlinear coordinates.
	  Print a status message to notify the user what we are doing.

2005-09-23 10:09  appel

	* src/: mesh_create.F90, mpi.F90: o Correct push_sub label in
	  mesh_partition.  o Fix format strings for output.

2005-09-23 08:14  lorenzen

	* src/states_inc.F90: Bugfix: Some 1:m%np in a vector operation
	  were missing.

2005-09-23 07:59  lorenzen

	* src/gs.F90: Bugfix: ground_state_run has no parameter gs, so the
	  macro NP_PART gr%m%np_part does not work. sys% has to be
	  prepended.

2005-09-22 19:27  acastro

	* src/restart_inc.F90: Bug fixed.  Bad choice for the error flag...
	  ierr is being used as a counter there.

2005-09-22 18:26  appel

	* src/: derivatives_inc.F90, f_inc.F90, gs.F90, h_inc.F90,
	  mf_inc.F90, nl_operator.F90, poisson_corrections.F90,
	  states_inc.F90: Already a few changes for the NP NP_PART
	  transistion. More to come ...  (I've to run now; possible
	  autobuild/test fails due to this will be fixed tomorrow).

2005-09-22 18:24  appel

	* src/: complex.F90, real.F90: Fix serial compilation.

2005-09-22 17:00  appel

	* src/eigen_cg.F90: Sample code to be discussed in the IRC meeting
	  ...

2005-09-22 16:42  appel

	* src/global.h: Introduce similar to NP a macro for NP_PART:

	   #define NP_PART gr%m%np_part

2005-09-22 16:26  acastro

	* src/units.F90: Just continuing with my documentation effort.

2005-09-22 16:00  lorenzen

	* src/: out.F90, restart_inc.F90: Introduced handling of 'parallel
	  file i/o': I added four new i/o routines to out.F90:

	  iopar_open, iopar_close, iopar_read, iopar_backspace

	  which correspond to

	  io_open, io_close, read, backspace

	  respectively. Those routines are in the sense parallel that only
	  root opens, closes, reads, modfies the seek pointer but all nodes
	  get the result and the error code. Some compromise had to be made
	  with the read: It is only possible to read files lines by lines
	  into a string, which can be tokenized by Fortran intrinsic read
	  afterwards.  These routines can be called in parallel or serial,
	  in serial they are just another layer of wrappers, which call
	  io_* routines.

	  With this abstraction it is possible to write file reading code
	  in a consistent manner in serial and parallel.

	  As a prototypic application, I have translated the ugly #ifdef
	  spaghetti code from yesterday in restart_inc to the new coding
	  style, which looks like this:

	  Doing everything by hand: <...>   do #if defined(HAVE_MPI) &&
	  defined(HAVE_METIS)	  if(m%vp%rank.eq.m%vp%root) then #endif
	     read(unit=iunit, fmt='(a)', iostat=i) char #if
	  defined(HAVE_MPI) && defined(HAVE_METIS)     endif	 call
	  MPI_Bcast(i, 1, MPI_INTEGER, m%vp%root, m%vp%comm, mpierr)
	  call MPI_Bcast(char, 1, MPI_CHARACTER, m%vp%root, m%vp%comm,
	  mpierr) #endif     if(i.ne.0.or.char=='%') exit

	  #if defined(HAVE_MPI) && defined(HAVE_METIS)
	  if(m%vp%rank.eq.m%vp%root) then #endif
	  backspace(unit=iunit) #if defined(HAVE_MPI) &&
	  defined(HAVE_METIS)	  endif #endif

	  #if defined(HAVE_MPI) && defined(HAVE_METIS)
	  if(m%vp%rank.eq.m%vp%root) then #endif       read(unit=iunit,
	  iostat=i, fmt=*) ik, char, ist, char, idim, char, filenam e #if
	  defined(HAVE_MPI) && defined(HAVE_METIS)     end if	  call
	  MPI_Bcast(ik, 1, MPI_INTEGER, m%vp%root, m%vp%comm, mpierr)
	  call MPI_Bcast(ist, 1, MPI_INTEGER, m%vp%root, m%vp%comm, mpierr)
	      call MPI_Bcast(idim, 1, MPI_INTEGER, m%vp%root, m%vp%comm,
	  mpierr) #endif     if(index_is_wrong()) then #if
	  defined(HAVE_MPI) && defined(HAVE_METIS)
	  if(m%vp%rank.eq.m%vp%root) then #endif	 read(unit=iunit2,
	  iostat=i, fmt=*) ! skip the line in the occs file #if
	  defined(HAVE_MPI) && defined(HAVE_METIS)	 end if #endif
	   cycle     end if <...>

	  With iopar_* routines: <...>	 do	call iopar_read(m, iunit,
	  line, i)     read(line, '(a)') char	  if(i.ne.0.or.char=='%')
	  exit

	      call iopar_backspace(m, iunit)

	      call iopar_read(m, iunit, line, ierr)
	      read(line, *) ik, char, ist, char, idim, char, filename
	      if(index_is_wrong()) then
		call iopar_read(m, iunit2, line, ierr)
		cycle
	      end if
	  <...>

	  Note the 'doubling' of the read lines: one call to iopar_read to
	  get the line and one to read to tokenize it.

	  This approach shown can easily be adopted to idditional o_*
	  routines if the need arises.	Moreover, there are surely lots of
	  spots in the code that need maintenance in this respect.

2005-09-22 15:57  acastro

	* src/: global.F90, mesh_lib.F90, run.F90: Removed the
	  conf%boundary_zero_derivative variable.

	  The boundary conditions should be taken care of elsewhere.
	  Anyways, the zero derivative boundary conditions (Dirichlet
	  boundary conditions, I think they were called) were not used now.
	  Maybe we should put them back in the future, but in some other
	  way.

2005-09-22 14:51  acastro

	* src/: gs.F90, io.F90, restart_inc.F90: (*) I committed what I
	  think it is a good option for the variable that     defines, from
	  the end user point of view, the debugging level.	Basically
	  it is only one, "DebugLevel". Take a look, it is documented.
	  I kept the internal variables, conf%verbose and in_debug_mode,
	  for the      moment being.	  We can change this later, I leave
	  it open to discussion.      We also have to think what we do with
	  the "push_sub"/"pop_sub". I still	 think that a preprocessor
	  def:

	  #define PUSH_SUB(x) if(in_debug_mode) call push_sub('x')

	      would look nice.

	  (*) A couple of bugs fixed -- preprocessing out MPI stuff when
	   compiling in serial.

2005-09-22 13:17  appel

	* configure.ac, src/Makefile.am, src/messages.F90: Rename
	  DISABLE_DEBUG as NDEBUG to comply with the C standard.

2005-09-22 13:04  appel

	* src/: complex.F90, gs.F90, real.F90, restart_inc.F90: Don't use
	  MPI timestamp macro if configured with --disable-debug.

2005-09-22 11:31  acastro

	* src/io.F90: Just documentation of some variables. Before release,
	  all variables should be documented, both in the code and in the
	  manual!!

2005-09-22 11:09  acastro

	* src/grid.F90: Bug fixed.  MPI_COMM_WORLD does not exist in serial
	  mode...

2005-09-22 10:57  appel

	* src/: messages.F90, mpi.F90: Bugfix: There were further places
	  where if(in_debug_mode) statements were missing.

2005-09-22 10:49  lorenzen

	* src/: grid.F90, mesh.F90, mesh_create.F90, nl_operator.F90,
	  par_vec.F90, poisson1D.F90, poisson2D.F90: Clean-up of the
	  following things:

	  1) part (i. e. the point to partition mapping) in type(mesh_type)
	     has moved to type(pv_type) where it belongs. npart has been
	  removed from type(mesh_type) because the number of partitions
	  is already stored in type(pv_type).

	  2) The number of partitions created now depends on the
	  communicator	  passed to mesh_partition and vec_init. They do a
	  MPI_Comm_size call	to get the number of nodes. For this to
	  work, a communicator is    passed to mesh_init, which is
	  MPI_COMM_WORLD at the moment but this    will change.

	  3) mesh_partition_init_default and vec_init_default are removed.
	     They are not needed anynore with the new communicator
	  parametrization.     mesh_partition_end is removed as part is now
	  in type(pv_type)     and will be deallocated by vec_end.

	  4) Some spots in the code used m%part, they were changed to
	  m%vp%part.

2005-09-22 10:38  lorenzen

	* src/messages.F90: Bugfix: write_debug did not check if octopus is
	  in debug mode.

2005-09-22 00:48  acastro

	* src/: cross_section.F90, spectrum.F90: Bugs fixed and code
	  cleaning.

2005-09-21 18:40  appel

	* src/restart_inc.F90: Add ifdefs to fix serial build.

2005-09-21 17:18  lorenzen

	* src/: eigen_cg.F90, eigen_plan.F90, gs.F90, h_inc.F90: I had to
	  introduce a rather small but invasive change: As we need ghost
	  points in parallel (which are stored after the local points in a
	  vector), Xpsi needs np_part entries (I wonder how the code worked
	  with Xpsi being allocated for np values -- probably because
	  bounds checking was switched off).  This, in consequence, needs
	  changes in many places where vector operations involving Xpsi of
	  the form

	  ... Xpsi(:, ...,) ... a(:, ...) ... b(:)

	  occur. The reason is that a, b and the like may normally have np
	  values but then the wildcard index has different ranges which --
	  unfortunately -- is handled differently by different compilers.
	  Thus, the above line has to be

	  ... Xpsi(1:np, ...,) ... a(1:np, ...) ... b(1:np)

	  I've already fixed allocation of Xpsi and the cg_solver as well
	  as some routines of h_inc.F90. Now, it is possible to compute non
	  interacting electrons using curvlinear coordinates in parallel in
	  at least 1D and 2D. As Heiko has already translated the 1D and 2D
	  poisson solver to parallel, we can even do a bit more -- but that
	  is not tested yet.  All the above only works with the cg
	  eigensolver, lanczos is a different-story: for some reason, an
	  index gets out of bound when running in parallel. I have put a
	  FIXME at the appropriate spot. This should be fixed next that we
	  can compare results from cg and lanczos.

2005-09-21 17:05  lorenzen

	* src/restart_inc.F90: Changed the file input bevahiour in
	  restart_read: Only the root node is allowed to read files.  This
	  should be our general approach to file-input for parallel code
	  from now on because 1) handling of I/O errors should be
	  centralized, 2) sometimes freshly written files are not available
	     to remote nodes because of NFS latencies which leads to
	  deadlocks.  There are - I guess - many places in the code where
	  file input has to be changed. Like it is done now in
	  restart_inc.F90 is really ugly, so changeing other spots in the
	  code should wait until some better abstraction is found. I am
	  thinking about this.

	  File output is no issue because it is already centralized.

2005-09-21 16:57  lorenzen

	* src/nl_operator.F90: Bugfix: nl_operator_equal forgot to copy the
	  op_cmplx attribute to the duplicated operator.

2005-09-21 16:56  lorenzen

	* src/derivatives.F90: Simplified the determination of points,
	  which must have a zero weight due to boundary conditions.

2005-09-21 16:53  lorenzen

	* src/: out_inc.F90, par_vec_inc.F90: Somehow, the TS macro from
	  the mpi module causes seg faults sometimes.  In par_vec_inc.F90
	  and out_inc.F90 the debug code is put in by hand using
	  MPI_Debug_In and MPI_Debug_Out directly.

2005-09-21 16:51  lorenzen

	* src/: derivatives_inc.F90, states_inc.F90: Added push_sub and
	  pop_sub to several routines.

2005-09-21 16:04  appel

	* debian/rules: Remove debug executables from the nightly
	  autobuild.

2005-09-21 16:01  acastro

	* src/: cross_section.F90, spectrum.F90: The oct-cross-section
	  tensor now looks for "multipoles" or "multipoles.x" files, and
	  decides about the equivalent axis and wether or not to calculate
	  the full tensor, and how, depending on what it sees, rather than
	  via the input variables, as before.

2005-09-21 15:58  appel

	* src/Makefile.am, src/global.F90, src/grid.F90, src/io.F90,
	  src/main.F90, src/mesh.F90, src/mesh_create.F90,
	  src/messages.F90, src/mpi.F90, src/nl_operator.F90,
	  src/out_inc.F90, src/par_vec.F90, src/sparskit_driver.F90,
	  configure.ac: Modified the debug mode. Before the debug mode was
	  opt in: you explicitely had to enable the mode with
	  --enable-debug. Now all DEBUG preprocessor flags have been
	  replaced by Fortran if statements. The Debug mode is triggered by
	  setting DebugMode = yes in the input file.  The call to push_sub
	  and pop_sub routines will always be performed (in critical places
	  like mf_dotp I will later make further modifications). To create
	  an executable that does not have this overhead you have to opt
	  out, ie. remove the debug mode by configuring with
	  --disable-debug.

2005-09-21 13:59  acastro

	* src/broad.F90: The defaults were very badly chosen.

2005-09-21 13:16  appel

	* liboct/oct_f.c, src/io.F90, src/liboct.F90: Add oct_nanosleep to
	  liboct.

2005-09-21 08:30  acastro

	* src/: Makefile.am, global.F90, main.F90: Heiko: I was about to
	  add the loct_gettimeofday to all the utility programs, but then I
	  thought that maybe it is cleaner to put it in global_init, since
	  they all should call that.  I had to change a bit the compilation
	  order so that it would work. But I think that this order now is
	  more correct.  In anycase please take a look just in case this is
	  wrong for some reason.

2005-09-20 23:31  acastro

	* src/: cross_section.F90, spectrum.F90: Removed the possibility of
	  specifying a minimum energy, other that zero, to calculate
	  spectra. It is one of those features that are clearly totally
	  useless and only complicate the code.

2005-09-20 17:55  appel

	* src/Makefile.am: Add mpi_inc.F90 to dependency list.

2005-09-20 17:33  appel

	* src/Makefile.am: Add mesh_lib to Makefile.am

2005-09-20 16:36  lorenzen

	* src/: par_vec.F90, mesh.F90, mesh_create.F90, mesh_lib.F90,
	  nl_operator.F90: Fixed problem with the calculation of the ghost
	  point in vec_init.  vec_init now uses mesh_index to handle
	  periodic boundary conditions and out of the box points etc. To
	  get this accomplished I had to introduce the new module mesh_lib
	  to circumvent cyclic dependencies. mesh_lib contains mesh_index
	  only at the moment. There will perhaps be some more restructuring
	  which fills this module but at the moment it exists only due to
	  technical constraints.

2005-09-20 16:30  lorenzen

	* src/par_vec_inc.F90: For some reason, there is a seg fault, when
	  using the TS macro on MPI_Gatherv. I removed it and put in the
	  calls to MPI_Debug_IN and MPI_Debug_OUT directly.  My suspicion
	  is that is has to do something with the parameter handling in the
	  Fortran compiler what I could not figure out yet.

2005-09-20 16:21  lorenzen

	* src/poisson.F90: A 'use mesh_function' was missing.

2005-09-20 16:16  lorenzen

	* src/mf_inc.F90: Corrected typo.

2005-09-20 15:25  appel

	* src/: poisson1D.F90, poisson2D.F90: Add ifdefs so that the code
	  compiles in serial again (thanks to Alberto for pointing this one
	  out).

2005-09-20 14:30  acastro

	* src/casida.F90: New performance hack.

	  The point is that the Hartree potential originated by of
	  psi_j*psi_b (j occupied, b unoccupied) was now calculated for
	  every matrix term <ia|V_coul + fxc|jb>. This is not necessary,
	  since it can be stored and used for all (i,a).

	  The previous performance hack seemed to reduce the compuational
	  burden by some 25%. But this one is simply spectacular, the
	  casida calculations are now *way* faster, although I did not
	  check by a factor of how much -- the time spent calculating
	  Hartree potentials, by a factor of N_pairs, which is *a lot*,
	  since a large fraction of the computational time was actually
	  spent doing this.

2005-09-20 13:43  acastro

	* src/casida.F90: Performance hack: the kernel fxc was calculated,
	  in the casida module, for all the matrix elements; the kernel is
	  the same for all of them, so it only needs to be done once.

	  A similar performance hack can be done for the Hartree part; I
	  will do it later.

2005-09-20 13:06  appel

	* src/: poisson1D.F90, poisson2D.F90: The direct integration of the
	  Hartree integral in 1D and 2D is now parallelized.  However, in the
	  2D case the potential produced by the MPI code differs from the
	  serial one stronger than I expected. For further debugging
	  purposes I therefore kept the old serial code in comments.

2005-09-20 11:33  acastro

	* src/: broad.F90, casida.F90: (*) Bug fixed in oct-broad: the
	  usual lack of awareness about the syslabels.

	  (*) More serious, the casida calculations is giving sometimes NaN
	  for some     of the energies. This is because some eigenvalues of
	  the Omega matrix     that defines the problem are sometimes
	  negative. This should not happen     since that matrix should be
	  symmetric positive definite (at least I     think so, I could not
	  really prove the positive definite part).

	      I have made one change: the energies and pairs are only
	  ordered now
	      when the writing subroutine is called, and only locally
	  inside there.
	      Before they were ordered after calling the Petersilka
	  routine, and used
	      in the new ordering when using the Casida approach. After
	  this change,
	      I cannot reproduce the bug. This is odd, because I do not
	  think that
	      this change should fix it. So I am not sure that the bug has
	  been
	      fixed.

2005-09-20 09:53  lorenzen

	* src/states.F90: Bugfix: In states_calculate_multipoles was an
	  array extend error in parallel mode: as m%x also contains ghost
	  points x(:) is x(1:m%np_part) and not x(1:m%np).

2005-09-20 09:27  lorenzen

	* src/: mpi.F90, mpi_inc.F90: Added support for MPI_Bcast.  It is
	  not used yet because the only place where it is called is
	  Xinput_function and there buf is a scalar and I do not know how
	  to change the wrapper to accept both scalars and arrays without
	  changeing to pointers.

2005-09-20 09:24  lorenzen

	* src/out_inc.F90: Bugfix: When reading a function from harddisk
	  with Xinput_function in parallel only root knew the ierr state.
	  In some cases the result was that all other nodes tried to read
	  the function again which was a deadlock in consequence.  No the
	  ierr state is broadcasted and the scatter is only done after a
	  successful read.  Apart from that, I changed that only root
	  allocates memory for all points of the function.

2005-09-19 12:29  acastro

	* src/states.F90: Little performance hack.  The code was
	  orthonormalizing way too many times the same vectors when
	  randomizing unoccupied vectors. This was a pain for example with
	  C60.

2005-09-17 19:21  appel

	* src/nl_operator.F90: Forgot this file.

2005-09-17 19:04  appel

	* liboct/oct_f.c: I changed the typecast from long to int, but
	  forgot the datatypes in the argument list of the function.

2005-09-17 19:01  appel

	* src/derivatives.F90: Bug fixed. The stencil of the auxop array
	  was not initialized. Since it was used to overwrite the stencils
	  of gradient and laplacian the code was crashing in parallel (it
	  is still crashing in several other places, but that's a different
	  story :).  In light of this bug I'm a bit surprised that octopus
	  was working with curvlinear coordinates before ...

2005-09-17 18:55  appel

	* src/: derivatives.F90, derivatives_inc.F90, eigen_plan.F90,
	  mesh.F90, mesh_create.F90, out_inc.F90, par_vec.F90,
	  par_vec_inc.F90, poisson_cg.F90, poisson_multigrid.F90,
	  systm.F90: o Add partition number "partno" and rank number "rank"
	  as fields   to pv_type. Having both variables is actually a bit
	  redundant   but makes the code readable.

	  o Remove MPI_Comm_Rank calls since this information is now stored
	    in vp%rank.

	  o Rename a few variables:

	      np_glob	  ->  np_global
	      np_tot	  ->  np_part
	      np_tot_glob ->  np_part_global

2005-09-17 18:53  appel

	* src/: atomic.F90, spectrum.F90: A couple of variables were not
	  given a datatype. Removed unused variables.

2005-09-17 11:02  appel

	* src/Makefile.am: Add par_vec_inc.F90 to dependency list.

2005-09-17 10:54  appel

	* liboct/oct_f.c: Replace typecast to (long) by typecast to (int).
	  In principle the typecast should use long. However, this causes
	  incompatibilities with Fortran integers.  Using int instead will
	  cause wrong results when tv.tv_sec exceeds INT_MAX=2147483647,
	  i.e. in about 30 years from now :)

2005-09-17 10:52  appel

	* src/fftw3.F90: Remove stop statements (stopping the code with a
	  stop will not call MPI_FINALIZE). Also the old error message was
	  not helpful at all.

2005-09-17 10:49  appel

	* src/td_write.F90: Array out of bounds during td calculation in 1D
	  and 2D. I've replaced NDIM by 1:3, but think that it would be
	  better not to use explicit array bounds in line 551.

2005-09-16 16:24  lorenzen

	* src/: derivatives.F90, nl_operator.F90, par_vec.F90,
	  par_vec_inc.F90: Curvlinear coordinates are now usable on
	  partitions -- at least with the lanczos eigensolver. cg does not
	  converge and I don't know why yet.  In order to get curvlinear
	  working in principle I had to

	  * add routines to scatter and (all)gather non local operators:
	  nl_operator_scatter, nl_operator_gather and
	  nl_operator_allgather.    In order to computer OP +/i Op^T, which
	  can not be done locally,    the operators are allgathered and
	  each nodes computes the final    operator itself. The calculation
	  of the weights by solving    a system of linear equations can be
	  done locally, though.  * The indices for boundary points had to
	  be fixed in	derivatives_build.  * To allgather a vector,
	  Xvec_allgather was added to par_vec, which is more   or less
	  Xvec_gather with MPI_Allgatherv instead of MPI_Gatherv.

	  nl_operator_op_to_matrix and nl_operator_write are working and
	  can be used for debugging purposes (nl_operator_matrix_to_op is
	  not but can be done easily with nl_operator_scatter).

2005-09-16 16:16  acastro

	* src/spectrum.F90: Bug fixed.	The spin-polarized and spinors case
	  were not working properly.

2005-09-16 16:02  lorenzen

	* src/: mpi.F90, mpi_inc.F90: Added support for MPI_Allgather,
	  which is needed in Xvec_allgather.

2005-09-15 22:43  acastro

	* src/: cross_section.F90, spectrum.F90: Added support for cases
	  where only two equivalent independent axis exist.

	  However, I am a bit puzzled because the algorithm does not seem
	  to work for Na3...

2005-09-15 15:44  appel

	* src/: crystal.F90, messages.F90, out_inc.F90, spectrum.F90,
	  td.F90, td_init.F90, td_write.F90: Remove unused variables.

2005-09-15 15:27  appel

	* src/mpi.F90: Take overloading of integer functions into account.

2005-09-15 11:37  acastro

	* src/grid.F90: I am not too sure about this commit; I have to say
	  that I did not read very carefully all the new debugging stuff.
	  However the code crashed when running with mpi, without METIS,
	  and without the debug mode.  Please take a look to make sure that
	  my change fits in.

	  Probably this is the bug that Miguel was reporting?

2005-09-15 08:58  lorenzen

	* src/: integer.F90, par_vec.F90, undef.F90: Pseudo-overloading
	  with the X macro and undef.F90/complex.F90/real.F90 is now also
	  possible for integers with integer.F90. This will not be of much
	  use for the numerics but is handy for the scatter and gather
	  routines in par_vec, which now handle vectors of indices, too,
	  and avoids copy and paste.  As already mentioned in my previous
	  commit, something like ivec_gather etc. is needed in the
	  initialization of operators for curvlinear coordinates.

2005-09-15 00:16  acastro

	* src/: spectrum.F90, td_write.F90: (*) Removed some comments that
	  I have left in td_write module (*) The transpose of the inverse
	  happens to be the inverse of the     transpose :) I simplified a
	  bit spectrum_cross_section_tensor.

	      Regarding the latter point, I have proved that the scheme
	  works for Na2,
	      and for Na6 and Na_{12} in D_{6h} arrangemets. I have also
	  made the
	      benzene test, but I am a bit puzzled about the latter test --
	  some small
	      error is present, and I am not too sure about its origin.

2005-09-14 17:45  lorenzen

	* src/: nl_operator.F90, par_vec.F90: * Added a routine ivec_gather
	  to par_vec to gather vectors of   integers. This is necessary to
	  collect the non local operator   when running on several
	  partitions.  * The routine nl_operator_op_to_matrix is now
	  working   for parallel runs on partitions, so is
	  nl_operator_write and   nl_operatorT_write. Those routines are
	  mainly for debugging. I   need them to check the adaption of
	  curvlinear coordinates to   parallel runs on partitions, which
	  will be implemented soon.

2005-09-14 09:50  acastro

	* src/: cross_section.F90, spectrum.F90: Finally I tested the
	  cross-section program. I commit it now, although I still have to
	  work on it -- very "raw" code for the moment. But in this way I
	  am sure that there is in the repository something that works.

	  I could calculate in this way the full cross section tensor of a
	  molecule with D_{\infty h} symmetry (this seems to be the
	  symmetry group of linear molecules with a center of inversion)
	  with only one run. Yes, it was Na2 in my example run, of course.
	  I will do benzene, which is D_{6h}, and is an analog case.

	  But note that we dot only get the trace with only one run, but
	  the full tensor: the cross section along any direction, the
	  crossed terms in the tensor, the anisotropy.

	  Note also that for these particular cases (linear molecules), it
	  is *not* true, as we discussed, that we get the trace just by
	  getting the result with a run done with a polarization tilted 45
	  degree with respect to the linear molecule. The set of equivalent
	  axis is not orthonormal, and because of this a proper tensor
	  transformation has to be done. I guess that we will have to
	  correct by hand the gold runs, and the process them.

2005-09-14 09:15  appel

	* src/h_inc.F90: Bug fixed. The second argument of the grad array
	  in X(kinetic) was running out of bounds for periodic dimensions
	  less than 3.

	  Yesterday I switched to Intel v9 and it turned out that the -C
	  option works contrary to v7 and v8 in v9 rather reliable. After
	  fixing the above bug all tests in the testsuite were running
	  without problems when using -C.

2005-09-14 09:08  appel

	* src/main.F90: Always create debug directory when running in Debug
	  mode. By now this has to be independent of conf%verbose.

2005-09-14 06:30  acastro

	* src/casida.F90: Bug [reported by the daily test] fixed.

2005-09-13 18:16  acastro

	* src/: Makefile.am, casida.F90, cross_section.F90, spectrum.F90:
	  (*) The calculation of the full cross section tensor from the
	  response of	  the system to the perturbation along only one
	  "properly chose"     direction is now implemented... except it
	  has not been tested yet.	Once I have properly tested it, I
	  will document it.

	      Afterwards we will have to think wether or not we define a
	  new run
	      mode that takes care of everything.

	  (*) In the way, I removed a couple of non-MPI friendly uses of
	  vol_pp     in the casida.F90 file.

2005-09-13 15:39  lorenzen

	* src/mesh_create.F90: x_global in type(mesh_type) is only
	  allocated on the master node.

2005-09-13 12:57  acastro

	* src/: Makefile.am, spectrum.F90, td.F90, td_init.F90,
	  td_write.F90: Sorted out some formatting problem.

	  And, since the information about the kick was getting so
	  complicated, I abstrated it in a derived data type, kick_type,
	  which is stored in the spectrum module -- I believe that is the
	  proper place.

2005-09-12 17:50  acastro

	* src/: cross_section.F90, spectrum.F90, td.F90, td_init.F90,
	  td_write.F90: Now the td data type is aware of a possibly
	  non-orthogonal set of unit vector along which the polarization is
	  calculated, in order to make use of symmetry.  This set is
	  defined by the user; hopefully we will get smart and the program
	  will actually define it.

2005-09-12 17:02  appel

	* src/io.F90: Uncomment system calls for the moment. Will have to
	  adapt the autobuild to take this into account ...

2005-09-12 16:03  appel

	* src/out_inc.F90: Too many octopus flavours. This time
	  octopus_debug did not compile ...

2005-09-12 15:41  appel

	* src/io.F90: Fix serial compilation - a variable was not defined.

2005-09-12 15:38  acastro

	* src/mpi.F90: The mpi_mod module should be empty if the
	  compilation is done without MPI. Otherwise the compiler complains
	  when linking a serial version.

	  [I think that the way I have done it is the easiest; maybe one
	  could think of not passing mpi.F90 to the linker, but then one
	  would need to touch the Makefile. If you think of a better way,
	  just change it]

2005-09-12 15:30  acastro

	* src/mesh_create.F90: The code did not compile in serial mode,
	  because of a problem in mesh_get_vol_pp; I believe that now it is
	  OK.

2005-09-12 15:19  lorenzen

	* src/systm.F90: Small changes because np is now the number of
	  local points.  There is one FIXME left concerning the density.

2005-09-12 15:15  lorenzen

	* src/nl_operator.F90: Before computing a non local operator,
	  vec_ghost_update is called.  This is responsible for many
	  intent(in) to intent(inout) changes.

2005-09-12 15:14  lorenzen

	* src/: mesh.F90, mesh_create.F90: x and vol_pp in type(mesh_type)
	  only contain the local points (including ghost and boundary
	  points).  As all values of x are needed for input and output on
	  the master node, x_global is added to type(mesh_type) which
	  contains all points as did x prior to this change.  One bugfix
	  concerning x_global still has to be done: At the moment, x_local
	  is allocated on all node which should not be becessary.

2005-09-12 15:07  lorenzen

	* src/epot_inc.F90: Marked some places with FIXMEs, where vol_pp is
	  used. It is likely that these have to be modified to handle the
	  non local part of the pseudo-potential correctly when running in
	  parallel.

2005-09-12 14:29  appel

	* src/out_inc.F90: It was still not compiling on x86_64 ...

2005-09-12 14:19  appel

	* src/out_inc.F90: Correct missplaced preprocessor statements.

2005-09-12 14:10  appel

	* src/Makefile.am: Add mpi.F90 to source files.

2005-09-12 14:05  appel

	* src/states_inc.F90: Remove misplaced MPI statement that caused
	  communication blocking.

2005-09-12 14:04  appel

	* src/out.F90: Add new mpi module.

2005-09-12 14:04  appel

	* src/: io.F90, messages.F90: o Fix compilation problems. The NAG
	  compiler is a bit picky with	 output formats ...  o Add sanity
	  check, if gettimeofday outputs zero values.

2005-09-12 13:44  acastro

	* src/: cross_section.F90, spectrum.F90: The cross section vector
	  is now projected onto the basis that should "know" about the
	  symmetry.

	  The cross section seems to be well calculated, but still the
	  symmetry knowledge is not applied...

2005-09-12 10:35  acastro

	* src/: cross_section.F90, spectrum.F90, td_write.F90: The
	  oct-cross-section now calculates the cross section.

	  In fact, it calculates a cross section "vector", sigma_{\hat{u},
	  i} (i=1, 2, 3), for a given unit vector \hat{u} that is the
	  polarization vector of the perturbation. The definition is:

	  sigma_{\hat{u}, i}(w) = - (4*pi*w/c) *      Int dr dr' \vect{r}*u
	  * Chi(r, r', w) * x_i

	  where Chi(r, r', w) is the response function.

	  Out of these vectors one can get the sigma_{\hat{u}, \hat{v}} for
	  other unit vector \hat{v}, and from those, the cross section
	  tensor, possibly making use of symmetry. This is what I have to
	  do next.

2005-09-12 09:48  appel

	* src/restart.F90: Add new mpi module.

2005-09-12 09:47  appel

	* src/td_write.F90: Some more intent changes.

2005-09-12 09:36  appel

	* src/run.F90: Print node specific MPI statistics at the end of
	  each run. The output is written to the debug/debug_trace.node.*
	  files.

	  The runtime analysis as implemented in mpi.F90, mpi_inc.F90 gives
	  quite interesting numbers. We could use this to benchmark the
	  scaling of the code for different node numbers, or on different
	  platforms.

2005-09-12 09:35  appel

	* src/restart_inc.F90: Octopus crashed frequently because of a
	  pretty hidden racing condition: The close statement for the
	  tmp/restart_gs/{occs,wfns} was placed _after_ a MPI_Barrier.
	  Because of run-time differences of different nodes it occured
	  frequently that one of the nodes was already trying to read
	  {occs,wfns} in restart_read, although the master node had not
	  completed the write operation of these files. The node was
	  therefore attempting to read from an empty file.

2005-09-12 09:33  appel

	* src/: out.F90, out_inc.F90: Prepare output modules for parallel
	  output/input. The functions input_function and output_function
	  have been renamed to input_function_global and
	  output_function_global respectively. The original input_function
	  output_function routines are now wrappers that take care of
	  scatter and gather.

	  As before only input_function and output_function should be
	  called from outside.

2005-09-12 09:26  appel

	* src/: complex.F90, mf.F90, mf_inc.F90, mpi.F90, mpi_inc.F90,
	  par_vec.F90, par_vec_inc.F90, real.F90, undef.F90: Add mpi_mod
	  module. Currently the module contains wrapper for the used MPI
	  calls in the code. The wrapper are used only in debug mode and
	  take care of the timing of MPI calls.  Later on we can use the
	  module to place there some infrastructure to handle different
	  communicators.

2005-09-12 09:21  appel

	* src/messages.F90: push_sub and pop_sub have been modified such
	  that each node writes it's own debug trace to
	  debug/debug_trace.node.* This comes very handy while
	  investigating why a particular node crashed.	To write node
	  specific debug output there is now also a write_debug function.

2005-09-12 09:19  appel

	* src/: global.F90, main.F90: Store epoch time at node startup. All
	  time differences will be computed relative to this timestamp.
	  This circumvents timing problems with nodes that are out of sync.

2005-09-12 09:16  appel

	* src/io.F90: Add MPI debug hook. There is a new variable
	  MPIDebugHook. If set to yes, all nodes will look at regular time
	  intervals of one second for files of the form node_hook.000,
	  node_hook.001, etc. This mechanism allows to attach gdb or strace
	  sessions to the different MPI processes. By touching the
	  node_hook file of a given node, the program execution of the
	  respective MPI process can be continued independently of the
	  other processes in the communicator.	The usage of empty files is
	  in spirit similar to the stop file for clean_stop.

2005-09-12 09:14  appel

	* src/gs.F90: Set MPI barrier to initialize debug timing of MPI
	  calls.

2005-09-12 09:12  appel

	* liboct/oct_f.c, src/liboct.F90: Add interface for gettimeofday
	  system call. Contrary to clock() which measures cpu usage, this
	  call can be used to measure realtime differences, e.g. caused by
	  network latencies.

2005-09-12 09:09  appel

	* src/: grid.F90, specie.F90: Cleanup debug stack for MPI calls.
	  push/pop calls were not called in pairs for nodes other than node
	  0. There are however still a few places in the code left where
	  this is wrong.

2005-09-12 09:07  appel

	* src/: eigen_arpack.F90, eigen_trlan.F90: Stop code if arpack or
	  trlan eigensolver is selected for domain decomposition. This is
	  not parallelized yet.

2005-09-12 09:02  appel

	* src/: derivatives_inc.F90, f_inc.F90, h_inc.F90, math_cg_inc.F90,
	  poisson_corrections.F90, td_calc.F90, td_exp.F90: In order to
	  allow for ghost point updates some of the intent statements have
	  to be modified from intent(in) to intent(inout).

2005-09-10 18:29  acastro

	* src/: cross_section.F90, spectrum.F90, strength_function.F90,
	  td.F90, td_write.F90: The "kick" information is now properly read
	  from the multipoles file.

2005-09-10 13:39  acastro

	* src/: spectrum.F90, td.F90: Thef "delta strength" and the "delta
	  strength mode" are now part of the td_type. This is because I
	  want to write them down in the multipoles file.

	  I documented the variable a little bit.

	  Correction of a bug in the construction of the varinfo file: pol
	  was defined twice in an incompatible way.

2005-09-10 10:25  acastro

	* src/: cross_section.F90, rotational_strength.F90, spectrum.F90,
	  strength_function.F90: Removed the SpecTransformMode variable,
	  completely unnecessary.  Also, moved the damping mode stuff to
	  the spectrum_type variable.  And now the SpecDampMode is no
	  longer a string ("exp", "pol"...), but an integer, properly
	  defined in the variables file as exp, pol, gaussian or none.

2005-09-10 09:41  acastro

	* src/: cross_section.F90, hs_from_acc.F90, hs_from_mult.F90,
	  rotational_strength.F90, spectrum.F90, strength_function.F90:
	  Started the modification of spectrum module, which is a bit old
	  by now: built a spectrum_init routine.

2005-09-10 08:26  marques

	* src/unocc.F90: Now it compiles.

2005-09-09 18:46  acastro

	* src/: cross_section.F90, hs_from_acc.F90, hs_from_mult.F90,
	  rotational_strength.F90, spectrum.F90, strength_function.F90:
	  Module spectrum is now "privatized", for the sake of good
	  programming practice.  Also, the bug related to the labeling of
	  the systems is corrected in all the utilities. These have to "use
	  io" now, since they no longer use it through the spectrum module.

2005-09-09 18:03  acastro

	* src/unocc.F90: Bug fixed.  My compiler complained because the
	  grid has to be passed as intent(inout) to the X(poisson_solve)
	  routine -- because it may be modified in case of using the
	  multigrid method, it seems.

	  I don't know, maybe this is not a very clean design -- in
	  principle the grid should not be modified when the Hartree term
	  is calculated.

2005-09-09 17:48  acastro

	* src/spectrum.F90: oct-sf is back to work -- is able to tackle
	  with the new multipoles file.  However, note that oct-sf is going
	  to be gone pretty soon, as soon as I have oct-cross-section
	  working. I put it back so that I could keep checking the results
	  properly.

2005-09-09 17:19  acastro

	* src/strength_function.F90: Bug fixed.  The program died when
	  attempting to read files.

2005-09-09 15:12  acastro

	* src/td_write.F90, testsuite/finite_systems_3d/restart.test:
	  Changed the format of the multipoles file.

	  Now it does not output the dipole projected onto the polarization
	  of the perturbation.	Now it sums up the electronic and nuclear
	  dipole, printing the full system dipole -- in cartesian usual
	  form.  Now it prints the charge in atomic units (i.e. number of
	  electrons), instead of dividing it by the square root of four
	  pi).	And now it writes down, in the header, the unit vector that
	  signals the polarization direction of the perturbing field.

	  I had to change the testsuite accordingly.

	  But now the oct-sf program is not aware of these changes, so it
	  is broken.  I hope to solve it over the weekend.

2005-09-09 13:20  acastro

	* src/: scf.F90, states.F90, td_init.F90, td_write.F90: [*] Changed
	  states_calculate_multipoles subroutine. Now, I think, it is
	  compliant with the new parallelization scheme -- before it did
	  the integrals without calling dmf_integrate; now it calls it.
	  Also,     the definition of the multipoles changed a little: the
	  zero multipole     is now the charge (not the charge divided by
	  square root of four pi),     the dipole is the usual cartesian
	  dipole (not the spherical harmonics -     based dipole). The
	  higher order multipoles stay are they were.  [*] The polarization
	  vector for the optical response calculation is now	 normalized
	  right after it is read.

2005-09-09 12:53  marques

	* src/unocc.F90: When asked, outputs 1- and 2-body matrix elements
	  in the KS basis.

2005-09-09 09:58  acastro

	* src/: Makefile.am, cross_section.F90: The oct-sf program will
	  (eventually) be substituted by a oct-cross-section program.

	  For the moment being, I just copied the strength_function.F90
	  file into a new cross_section.F90 file, from which an
	  oct-cross-section program is built. But I felt like committing.

2005-09-06 23:18  acastro

	* src/td_write.F90: Now also the projection onto the many-body GSKS
	  state works.

	  However, regarding the calculation of the two kinds of
	  projections (projection onto the many body GSKS and onto the
	  single-particel GSKSs) two possible performance issues might need
	  to be solved in the future:

	  (i) Currently, the GSKS state is stored in memory in all
	  processors: all single particle states in all processor. This
	  makes the computation fast in  MPI, since almost no communication
	  is needed when computing the projections, but it is memory
	  intensive.  (ii) Moreover, the calculation of the projection onto
	  the many-electron GSKS is actually done "as if" the GSKS state
	  was distributed along the processors. This is because it is the
	  way it was done in the past, and I decided to keep it in order to
	  improve this later. So right now, the calculation is memory
	  intensive *and* actually the communication is done, which is
	  stupid.

	  Both kind of projections are done every time step. If performance
	  issues are important, maybe one should allow for computation of
	  "heavy" observables every n time steps.

2005-09-06 21:31  acastro

	* src/: states.F90, td_write.F90: Bug fixed.  Finally it seems that
	  the calculation of the projections of the TDKS states onto the
	  GSKS states (TDOutputOccAnalysis) is properly done also in
	  parallel.

	  There still exists an error in the calculation of the projection
	  of the many-electron TDKS state onto the many-electron GSKS state
	  (TDOutputGSProjection).

2005-09-06 17:38  lorenzen

	* src/: Makefile.am, grid.F90, mesh.F90, mesh_create.F90, mf.F90,
	  mf_inc.F90, par_vec.F90, par_vec_inc.F90: After some back and
	  forth, type(pv_type) is back in par_vec and par_vec no longer
	  depends on mesh but vice versa.

	  When running in parallel, the vec_init is called in
	  mesh_create_xyz and the resulting parallelization is stored in vp
	  in the mesh.	For this to work, the stencil is passed from
	  mesh_init via mesh_create_xyz to vec_init in an optional argument
	  (this will probably be changed later, but at the moment,
	  mesh_create_xyz is also called from the multigrid module, which
	  is not yet parallelized).

	  The members vol_pp and x of type(mesh_type) contain only the
	  point local to the node (including ghost and boundary points).
	  Now, all operations with something like ...x(1:m%np)... or
	  ...vol_pp(1:m%np)...	only work on local points.

	  For global operations like integrations or dot products, routines
	  from module mf should be used, which are parallelized by now.

	  There are still some points in the code, which do global
	  operations and do not use routines from mf...

2005-09-06 11:46  acastro

	* src/: td.F90, td_init.F90, td_write.F90: Now the ground-state KS
	  system may contain more states that the one used during the
	  evolution, so that projections onto unoccupied states can be
	  calculated without the need of propagating also the unoccupied
	  states.

2005-09-06 11:38  lorenzen

	* src/: grid.F90, mesh.F90, mesh_create.F90, nl_operator.F90,
	  par_vec.F90: All code related to domain parallelization is put
	  between

	  #if defined(HAVE_MPI) && defined(HAVE_METIS) ...  #endif

	  This is a quick fix to keep the parallel code for the td-part
	  working. The Problem is that nl_operator_build for example
	  computes a operator local to domains when running parallel and
	  this is incompatible with the td-part at this point of time.	I
	  hope, this works.

2005-09-06 08:41  lorenzen

	* src/mesh.F90: BUGFIX: Fixed the build error from last night. An
	  #ifdef HAVE_MPI was missing.

2005-09-06 08:21  lorenzen

	* src/: grid.F90, mesh.F90, mesh_create.F90, par_vec.F90,
	  par_vec_inc.F90: The meaning of m%np and m%np_tot in
	  type(mesh_type) has changed when running in parallel: - np is the
	  number of local points and - np_tot is the number of local points
	  plus all additional	points like ghost points and boundary
	  points (from the global   boundary conditions).  As it is still
	  necessary to know the number of global points, two new members
	  np_glob and np_tot_glob have been introduced, which hold the
	  total number of inner points (np_glob) and total number of inner
	  points plus boundary points (np_tot_glob).  When running in
	  serial it is np=np_glob and np_tot=np_tot_glob, as one would
	  expect.  This change is introduced to integrate parallel vector
	  operations seamlessly.

	  dvec_nl_operator and vec_op_pop have been removed from par_vec,
	  they are not necessary any longer.

	  mpierr has been removed from par_vec as it is better to install
	  some MPI errorhandler routine right after initialization for
	  producing debug output on MPI errors. By the way, communication
	  errors are by default treated fatal, as MPI guarantees reliable
	  communication and those failures normally indicate programming
	  errors.

	  I have not found the reason for the build error from last night,
	  after checkout this morning, everything just compiled fine.

2005-09-05 18:36  acastro

	* libxc/Makefile.am: It seems that the test_x_LINK variable needs
	  to be defined in this way so that the executable is actually
	  built.

2005-09-05 18:31  acastro

	* src/: td.F90, td_init.F90, td_write.F90: Finally, after so much
	  cleaning, I started fixing the calculation of the projections
	  onto the ground state KS system (not working yet, though!)

2005-09-05 18:00  acastro

	* src/: td.F90, td_init.F90, td_write.F90: Bug fixed.  I introduce
	  a bug in my previous commit. In the way, I did some other
	  cosmetic changes.

2005-09-05 17:36  lorenzen

	* src/: Makefile.am, grid.F90, mesh.F90, nl_operator.F90,
	  par_vec.F90, par_vec_inc.F90: Integration of the par_vec-routines
	  into the rest of the code started: - type(mesh_type) takes the
	  result of vec_init which is	the ghost point information and the
	  point mappings   in the new member vp.    The defintion of
	  type(pv_type) has moved to mesh as it is    actually a property
	  of the mesh.	- vec_init_default is called in grid_init (right
	  after mesh_init).    Accordingly, vec_end is called in grid_end.
	  - nl_operator_build is able to build parallel operators (i. e.,
	  operators that are local to each partition).	  dvec_nl_operator
	  or vec_op_pop are not needed anymore because	  parallelization
	  for non-local operations is nearly transparent    as far as np is
	  considered as the number of local points of a    certain
	  partition.

	  BUGFIX: Corrected displacement for MPI_Gather in vec_gather.

2005-09-05 10:50  lorenzen

	* src/par_vec_inc.F90: Completing the previous log message (and
	  correcting some debug-code error): There are two new routines in
	  par_vec: - vec_scatter_bndry	 to scatter the boundary points
	  v(np+1:np_tot) of a vector to all   nodes.  - vec_scatter_all
	  which does a vec_scatter and a vec_scatter_bndry to scatter all
	  points of a vector.

2005-09-05 10:46  lorenzen

	* src/: mesh_create.F90, par_vec.F90, par_vec_inc.F90: It is now
	  possible to handle global boundary conditions. The points from
	  the enlargement are divided into partitions, too. These points
	  are only needed for boundary conditions that cannot be
	  implemented using appropriate indices (like for periodic boundary
	  conditions). However, this general handling offers the possibilty
	  to use any kind of boundary conditions as long as the values for
	  the boundary points are computed at some point. In the simplest
	  case for zero boundary conditions, they are just set to 0.

	  There are two new routines in

2005-09-05 08:52  acastro

	* src/: td_init.F90, td_write.F90: Bugs fixed, detected by the
	  automated tests.

2005-09-04 23:44  acastro

	* src/: td.F90, td_write.F90: Yet more refurbishing of the td_write
	  stuff.

2005-09-04 17:21  acastro

	* src/: td.F90, td_init.F90, td_write.F90: Moved some more of the
	  writing from td module to td_write module, this way it is more
	  organized.

2005-09-02 16:03  acastro

	* src/: Makefile.am, td.F90, td_write.F90: Just cosmetics: put all
	  the routines in td_write.F90 (and td_calc.F90) into a module
	  (td_write) separated from timedep. The only user of td_write is
	  in fact timedep.

2005-09-01 16:01  acastro

	* src/: casida.F90, unocc.F90: There is no need to keep a separte
	  tmp/restart_unocc. The unocc mode may use tmp/restart_gs instead.

2005-09-01 14:36  acastro

	* src/restart_inc.F90: Bug fixed.  Only node 0 was writing down the
	  KS states in the restart directory.

2005-08-31 11:44  appel

	* src/nl_operator.F90: Correct debug output (replace init by
	  operate).

2005-08-31 11:42  appel

	* build/acx.m4: Add flag -ansi to FCCPP flags. With this setting
	  cpp recognizes only /* */ as comments. The usual C++ comments
	  (i.e. //) are not treated as comments anymore.

	  The need for this setting emerges when having lines like:

	   call loct_parse_float(check_inp(trim(label)//'MeshMin'),
	  CNST(0.0), sm%min)

	  If cpp would view // as comment, the macro CNST would not be
	  touched.

2005-08-31 11:35  appel

	* src/scalar_mesh.F90: Introduce labels (i.e. namespacing if more
	  than one scalar mesh is used).

2005-08-31 01:03  xavier

	* src/poisson_multigrid.F90: Now multigrid works with curvilinear
	  coordinates, for this i had to change some things:

	  - The multigrid scheme was changed from Correction Scheme (CS),
	  the most basic algortihm that only works for lineal operators, to
	  Full Approximation Scheme (FAS) which works for nonlinear
	  operators and also accounts differences in grid representations.

	  - Gauss-Jacobi is used as a relaxation operator instead of
	  Gauss-Seidel (only for curvilinear coordinates).

	  - Defaults values are selected according to the type of grid.

	  Below is the input I have been using. Testing is welcome, I am
	  not sure this is going to work allways.

	  --------------------------------

	  CalculationMode = gs fromScratch = yes

	  Units = "eVA" ConvAbsDens = 1e-4

	  %Coordinates "Na" | 0 | 0 | -1.54 "Na" | 0 | 0 |  1.54 %

	  Spacing = 0.6

	  CurvMethod = curv_gygi CurvGygiA = 1.0 CurvGygiAlpha = 4.0
	  CurvGygiBeta = 7.0

	  DerivativesStencil = stencil_starplus DerivativesOrder = 3

	  #PoissonSolver = cg_corrected PoissonSolver = multigrid

	  --------------------------------

2005-08-31 00:46  xavier

	* src/multigrid.F90: Added variable MultigridLevels, very useful
	  for debugging and comes with a relaxation-only solver for free
	  (MultigridLevels = 1), slow but stable.

2005-08-31 00:44  xavier

	* src/poisson.F90: BUGFIX: One line of output was not shown.

2005-08-30 17:10  acastro

	* src/io.F90, share/variables.local: Yet another variable
	  documented.

2005-08-30 16:24  acastro

	* libxc/Makefile.am: Since the test.x program is all C, it is
	  better to link with the C compiler.  Otherwise some Fortran
	  compilers (i.e. the Intel 9.0 version) seem to have problems with
	  a duplicated "main" function.

2005-08-30 14:24  acastro

	* src/curv_gygi.F90: The variables corresponding to the Gygi scheme
	  of curvilinear coordinates are also now documented in the code.

2005-08-30 13:59  acastro

	* src/curvlinear.F90, share/variables.local: One more variable
	  (CurvMethod) documented in the code (not yet in the manual,
	  though).

2005-08-29 11:06  lorenzen

	* src/par_vec.F90: vec_init uses now the same stencil description
	  as type(nl_operator_type).

	  I started testing the dvec_nl_operator routine but before they
	  are usable, par_vec must be able to handle boundary conditions. I
	  am not sure how those affect the vec_init and scatter/gather
	  routines, so perhaps some bunch of work comes in via the backdoor
	  and wants to be done before non local operations will work in
	  parallel.

2005-08-26 17:22  marques

	* src/par_vec.F90: Just added an #ifdef as the code was not
	  compiling without MPI

2005-08-26 16:15  lorenzen

	* src/: par_vec.F90, par_vec_inc.F90: The par_vec routines are now
	  pseudo-overloaded for real and complex vectors except for
	  dvec_nl_operator.

	  Furthermore, a routine vec_op_pop is drafted to localize an
	  operator to a partition (or to parallelize it, depending on the
	  perspective). I am not sure, whether it is better to complete the
	  series of dvec_nl_operator, zvec_nl_operator,
	  dvec_nl_operator_cmplx, zvec_nl_operator_cmplx or to use
	  vec_op_pop and the usual ?nl_operator_operate routines.  I think,
	  this is a question of runtime tests that I will hopefully do next
	  week.  Anyway, just parallelizing the operator and inserting
	  parallelized vectors makes the integration of the new routines
	  more seamlessly than using new routines (it should be possible to
	  take the old code and just insert some lines packed into #if
	  defined(HAVE_MPI) && defined(HAVE_METIS) ... #endif).

2005-08-26 13:20  lorenzen

	* src/: Makefile.am, par_vec.F90: First draft of a parallel vector
	  library (module par_vec.F90).

	  The module contains the following routines: - vec_init(_default)
	   Takes a partitioned mesh and information about the stencil
	  being used in non-local operations and returns a parallelization
	  vp   for vectors defined for all points of the mesh.	  vp
	  contains information about what points belong to what node	and
	  about necessary ghost point exchange.  - vec_scatter	 Scatter a
	  vector to all nodes in vp.  - vec_gather   Inverse operation of
	  vec_scatter.	- vec_ghost_update   Realizes the ghost point
	  exchange for a vector   which has been scattered before.  -
	  vec_end   Frees used memory of vp.  - vec_integrate	Sums over a
	  scattered vector.  - vec_dnl_operator   Applies a a non-local
	  operator op to a scattered and ghost	 point updated vector.
	  (None of the routines is used in the rest of the code at the
	  moment)

	  The first six routines are tested with small examples and seem to
	  work as far as I can see. I have not done any performance tests
	  up to now and it is perhaps necessary to optimize
	  vec_ghost_update (which will be frequently called, I guess).	The
	  last routine is not tested yet. I am also not sure whether it
	  will be better to 'parallelize' an nl_operator_type operator in
	  such a way that the usual ?nl_operator_operate routines can be
	  called on a scattered vector (i. e. changing the i(:,:) array, np
	  and the order of weights(:,:) for non constant weights). I have
	  not evaluated this approach yet but it seems quite promising. The
	  outcome would be some routine like vec_op_par(vp, op, pop)
	  transforming op to a parallel operator pop according to vp with
	  the same type as op so that a call ?nl_operator_operate(op, fi,
	  fo) is possible.

	  However, I decided to commit this draft so you can already
	  comment on it.

	  An application of the routines written so far could look like
	  this:

	  integer	     :: np_local, np_ghost FLOAT	      :: s
	  FLOAT 	     :: u(np), v(np) FLOAT, allocatable :: ul(:),
	  vl(:), w(:) type(pv_type)	 :: vp type(mesh_type)	  :: m

	  ! Fill u, v with sensible values.  ! ...

	  ! Initialize parallelization with e. g.  ! m		= sys%gr%m
	  ! stencil    = op%stencil ! np_stencil = op%n call
	  vec_init_default(m, stencil, np_stencil, vp, np_local, np_ghost)

	  ! Allocate space for local vectors.
	  allocate(ul(np_local+np_ghost)) allocate(vl(np_local+np_ghost))
	  allocate(wl(np_local+np_ghost))

	  ! Distribute vectors.  call vec_scatter(vp, u, ul) call
	  vec_scatter(vp, v, vl)

	  ! Calculate scalar product s=<u, v>.	wl = ul*vl ! vec_integrate
	  ignores ghost points (i. e. wl(np_local+1:)).  s =
	  vec_integrate(vp, wl)

	  ! Compute some operator op: vl = op ul call vec_ghost_update(vp,
	  ul) call vec_nl_operator(vp, op, ul, vl) ! Gather result of op in
	  one vector v.  call vec_gather(vp, v, vl)

	  ! Clean up.  call vec_end(vp)

2005-08-25 17:46  lorenzen

	* build/acx_metis.m4, liboct/oct_f.c, share/util/Makefile.am,
	  share/util/display_partitions.sh, src/mesh.F90,
	  src/mesh_create.F90: Rewritten code for mesh partitioning. The
	  grid is directly converted into a graph and then processed by
	  METIS. This should work for any geometry.  Added field in
	  type(mesh_type) to store mapping of points to partitions.

	  The script display_partitions.sh can be used to create PNG images
	  of the partitions from debug output in debug/mesh_partition.

2005-08-23 15:03  xavier

	* src/multigrid.F90: Number of multigrid levels was miscalculated
	  for grids with few points. Now the levels are calculated in a
	  different way.

2005-08-23 15:00  xavier

	* src/poisson_multigrid.F90: BUGFIX: Array index variable was
	  defined as FLOAT.

2005-08-23 00:23  xavier

	* src/poisson_multigrid.F90: * Now Gauss Seidel iteration uses the
	  diagonal term of the laplacian as the convergency factor. I have
	  checked the formulation and in principle with current changes it
	  should work for curvilinear coordinates. (If grid tranfers are
	  right.)

2005-08-22 15:21  xavier

	* src/multigrid.F90: BUGFIX: Fixed segfault in the Multigrid
	  initialization when compiled with NAG on AMD64.

2005-08-22 14:18  appel

	* liboct/oct_f.c, src/mesh_create.F90: Interface for both,
	  PartMeshDual and PartMeshNodal.

2005-08-19 13:29  appel

	* src/: Makefile.am, math.F90, ode_solver.F90, root_solver.F90,
	  root_solver_inc.F90: Turn the ODE and Root-Solver into modules.

2005-08-19 13:15  appel

	* src/: casida.F90, eigen_cg.F90, eigen_evolution.F90, h_inc.F90,
	  mesh_create.F90, multigrid.F90, nl_operator.F90, opt_control.F90,
	  poisson3D.F90, poisson_cg.F90, scalar_mesh.F90, td_calc.F90,
	  td_rti.F90, xc_OEP_x.F90: remove unused variables.

2005-08-15 11:06  appel

	* src/poisson_corrections.F90: Fix compilation problems.

2005-08-11 19:03  acastro

	* src/: poisson.F90, poisson_corrections.F90,
	  poisson_multigrid.F90: Added the conjugate-gradient method as a
	  relaxation method for the multigrid algorithm. Still not cleare
	  wether or not it is better or not than Gauss-Seidel, it seems
	  that it is actually worse. But this way it permits to use the
	  multigrid method for adaptive coordinates.

2005-08-11 18:11  acastro

	* src/: math_cg_inc.F90, poisson_cg.F90, poisson_corrections.F90:
	  Now the conjugate_gradient procedure(s) in math module accept
	  arbitrary metrics: the dot product must be passed as an argument.
	  Before it assumed that an orthogonal base was being used (metric
	  equal to unity).  This way we do not need the change of base in
	  the Poisson solver.

2005-08-09 13:20  acastro

	* src/: derivatives.F90, derivatives_inc.F90: I slightly changed
	  the way in which the Laplacian is calculated in
	  derivatives_inc.F90, subroutine X(derivatives_lapl).

	  The change only affects the case of adaptive coordinates == the
	  weights associated to each point are not constant. In this case,
	  there is no need to define and use a larger function (function +
	  enlargement). One can just make the coefficients of those points
	  null, and make the index that points to a grid point outside the
	  original box, to point to a grid point inside the box.

2005-08-09 11:26  acastro

	* src/: epot.F90, epot_inc.F90: Bug fixed.  It showed up in the NAG
	  compiler.

2005-08-08 19:48  acastro

	* src/: h.F90, poisson_cg.F90, v_ks_inc.F90: New (old) performance
	  hack: Both the conjugate gradient solvers were not using the
	  "current" Hartree potential as a starting point.

	  This stopped being like that when we merged h%vhartree and h%vxc
	  in favour of h%vhxc. Since we did not use it much, we just forgot
	  about that detail. But now since the conjugate gradient solver
	  are bound to be used (specially with curvilinear coordinates), or
	  at least should be fairly compared to the multigrid solver, I put
	  back this feature -- for this purpose I had to put back a
	  h%vhartree component in the Hamiltonian data type.

2005-08-08 15:13  acastro

	* src/: epot.F90, h_inc.F90, td_calc.F90, td_exp_split.F90,
	  td_rti.F90: The way it was implemented, the calculation of the
	  laser field took more (which should be neglibible) was taking
	  more time than the rest of the parts of the Hamiltonian.

	  In fact, I believe that a more extreme change should be made: now
	  the laser field is constructed explicitly for each of the
	  orbitals -- it does not make sense since it is the same for every
	  orbital. However, this would require more heavy changes; I will
	  think about which way combines best elegance and efficiency
	  (suggestions wecome).

2005-08-06 13:39  rozzi

	* src/: scf.F90, states.F90, unocc.F90: added variable
	  BandsOutputMode to choose the band output format (currently 1 =
	  gnuplot, 2 = xmgrace)

2005-08-05 16:50  acastro

	* src/: poisson.F90, poisson3D.F90: It is not a good idea to give a
	  variable the name of a module; the Intel Fortran 9.0 on Itanium
	  will not work.

2005-08-05 16:28  rozzi

	* src/: Makefile.am, grid.F90, mesh.F90, mesh_create.F90,
	  nl_operator.F90, stencil_cube.F90: Bug fixed: in the mixed
	  periodic/non-periodic configurations some mesh indices passed to
	  nl_operator_operate were erroneously 0.  The reason was that only
	  the first value of n_ghost(:) was used to define m%enlarge. Now
	  enlarge -> enlarge(3) to be consistent in all the cases.

2005-08-05 10:00  appel

	* src/mf_inc.F90: Fix compilation problems from last night. The
	  type of the result of X(mf_integrate) was defined twice.

2005-08-04 14:08  rozzi

	* src/poisson3D.F90: bug fixed in the planar cutoff

2005-08-04 14:06  rozzi

	* src/derivatives.F90: bug fixed in the input check

2005-08-04 13:59  rozzi

	* src/: epot_inc.F90, f_inc.F90, linalg_basic_blas.F90, mf_inc.F90,
	  out_inc.F90: mesh size of arrays made explicit in some calls to
	  simplify debugging

2005-08-04 13:58  rozzi

	* src/specie.F90: the variables z, lloc, lmax are not used for the
	  USDEF type

2005-08-02 11:57  appel

	* src/scalar_mesh.F90: One of the varinfo variables was doubly
	  defined. The varinfo file got therefore not installed and caused
	  all tests from last night to fail.

2005-08-02 11:28  xavier

	* src/: multigrid.F90, poisson3D.F90, poisson_multigrid.F90: *
	  Fullweight restriction now uses the volume of the grid for the
	  average.

	  * Added an optional parameter to subroutine multigrid_fine2coarse
	  that selects restriccion method.

	  * Added variable PoissonSolverMGRestrictionMethod that selects
	  the restriction method for multigrid solver.

	  * Variable PoissonSolverCGMaxMultipole was renamed to
	  PoissonSolverMaxMultipole, and PoissonSolverMGThreshold was
	  renamed to PoissonSolverThreshold, because they are not only used
	  for CG but also for multigrid.

	  * Documented some variables: PoissonSolverMGRestrictionMethod,
	  PoissonSolverMGMaxCycles, PoissonSolverMGPostsmoothingSteps,
	  PoissonSolverMaxMultipole, PoissonSolverThreshold.

2005-08-01 12:15  appel

	* src/: ode_solver_inc.F90, scalar_mesh.F90: Fix some compilation
	  problems with NAG compiler.

2005-08-01 11:45  appel

	* src/Makefile.am: Update makefile accordingly.

2005-08-01 11:45  appel

	* src/scalar_mesh.F90: Adding scalar_mesh class. It contains
	  linear, log, sinh and Gauss-Legendre meshes with corresponding
	  integration routines. Also a double-log mesh as used by the
	  superconductivity people is included.  The class will be used to
	  setup angular and energy meshes for the wave- matching mode.

2005-08-01 11:39  appel

	* src/math.F90: Add ode_solver and root_solver types to math
	  module.

2005-08-01 11:37  appel

	* src/: root_solver.F90, root_solver_inc.F90: Adding root solver
	  class. Currently it provides Laguerre's method and an
	  implementation of J. Comp. Phys., 8, (1971), p. 304-308. If time
	  permits I'll also put an implementation of the Jenkins-Traub
	  method (none of the three mentioned above is in GSL).  The
	  solvers are used to find the zeros of finite difference
	  polynomials of arbitrary order. This allows to determine
	  evanescent waves on the grid very accurately.

2005-08-01 11:28  appel

	* src/: ode_solver.F90, ode_solver_inc.F90: Adding ODE solver
	  class. Besides the standard Runge-Kutta method it provides higher
	  order Fehlberg, Verner and Prince-Dormand solver. Adaptive step
	  size control is prepared but not included yet.

2005-08-01 09:42  acastro

	* src/: states.F90, td.F90, td_write.F90: The calculation of the
	  projections of the time-dependent Kohn-Sham states onto the
	  ground-state Kohn-Sham states was deactivated because it crashed.
	  I have put it back, although it is now done in a rather
	  primitive way.

2005-08-01 09:25  acastro

	* src/unocc.F90: The unocc_type was not used.

2005-07-31 22:32  xavier

	* src/poisson_multigrid.F90: Improvements in the multigrid poisson
	  solver:

	  * The module checks if it has been initialized.

	  * Now the old solution is saved and is used as the starting point
	  for the next one. This speeds up things a lot.

2005-07-31 19:30  appel

	* src/: atomic.F90, blas.F90, broad.F90, casida.F90, cf.F90,
	  cf_inc.F90, crystal.F90, curv_briggs.F90, curv_gygi.F90,
	  curv_modine.F90, curvlinear.F90, derivatives.F90,
	  derivatives_inc.F90, eigen.F90, eigen_arpack.F90, eigen_cg.F90,
	  eigen_evolution.F90, eigen_plan.F90, eigen_trlan.F90, epot.F90,
	  epot_inc.F90, f.F90, f_inc.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, geometry.F90, global.F90, grid.F90, gs.F90, h.F90,
	  h_inc.F90, h_so.F90, hgh.F90, hs_from_acc.F90, hs_from_mult.F90,
	  io.F90, lasers.F90, lcao.F90, liboct.F90, liboct_parser.F90,
	  libxc.F90, linalg_adv_lapack.F90, linalg_basic_blas.F90,
	  linalg_basic_int.F90, linear_response.F90,
	  linear_response_inc.F90, logrid.F90, make_st.F90, math.F90,
	  math_cg_inc.F90, math_inc.F90, mesh.F90, mesh_create.F90,
	  messages.F90, mf.F90, mf_inc.F90, mix.F90, multigrid.F90,
	  nl_operator.F90, opt_control.F90, out.F90, out_inc.F90, pes.F90,
	  pes_mask.F90, pes_rc.F90, phonons.F90, poisson.F90,
	  poisson1D.F90, poisson2D.F90, poisson3D.F90, poisson_cg.F90,
	  poisson_corrections.F90, poisson_multigrid.F90, ps.F90,
	  pulpo.F90, restart_inc.F90, rotational_strength.F90, run.F90,
	  scf.F90, simul_box.F90, sparskit.F90, sparskit_driver.F90,
	  sparskit_inc.F90, specie.F90, spectrum.F90, spline.F90,
	  states.F90, states_inc.F90, states_kpoints.F90, static_pol.F90,
	  static_pol_lr.F90, stencil_cube.F90, stencil_star.F90,
	  stencil_starplus.F90, stencil_variational.F90,
	  strength_function.F90, string.F90, syslabels.F90, systm.F90,
	  td.F90, td_calc.F90, td_exp.F90, td_exp_split.F90, td_init.F90,
	  td_rti.F90, td_write.F90, tm.F90, units.F90, unocc.F90, v_ks.F90,
	  v_ks_inc.F90, varinfo.F90, wave_matching.F90, xc.F90, xc_KLI.F90,
	  xc_OEP.F90, xc_OEP_SIC.F90, xc_OEP_inc.F90, xc_OEP_x.F90,
	  xc_axc.F90, xc_functl.F90, xc_fxc.F90, xc_vxc.F90,
	  xyz_adjust.F90, xyz_file.F90: o Improving debug output. Now the
	  string argument of push_sub	has the format filename.routinename
	  (filename without F90).    By looking at the debug output you can
	  see now directly in which    file you will find the prominent
	  piece of code which caused	octopus to crash.

	  o Removing trailing spaces from all files.

2005-07-31 17:18  appel

	* src/: f_inc.F90, sparskit_driver.F90, systm.F90, td.F90,
	  td_write.F90: Use consistently single quotes for push_sub calls,
	  i.e. (' ') and not (" ").  Single quotes were holding by far the
	  majority, only these few double ones were left.

2005-07-31 17:04  appel

	* src/: hgh.F90, logrid.F90, tm.F90: kill_logrid sounds a bit scary
	  ... :)

2005-07-31 16:58  appel

	* src/: atomic.F90, crystal.F90, derivatives.F90, eigen_trlan.F90,
	  io.F90, td_exp_split.F90, xc_vxc.F90: A few MPI cleanups.
	  Replacing stop ' .... '  by a call to write_fatal. This ensures
	  that MPI_FINALIZE is called.

2005-07-30 10:59  acastro

	* src/epot_inc.F90: A new little performance hack.

2005-07-30 08:51  acastro

	* src/: epot.F90, epot_inc.F90, h_inc.F90, h_so.F90,
	  nl_operator.F90: A performance hack.

	  Now project computes tha action of a sum of projectors, not only
	  one. This way one can significantly speed up its calculation
	  since the mesh of the projectors due to the same atom are equal.
	  This performance hack was already done before, but I temporarily
	  removed it when changing the nonlocal_op data type to the
	  projector.

	  Otherwise, in some occassions the calculation of the non-local
	  projectors may take 90% of the computational time, specially if
	  the spin-orbit term is calculated.

2005-07-28 22:17  acastro

	* src/: epot.F90, epot_inc.F90, f_inc.F90, h.F90, h_inc.F90,
	  h_so.F90, lcao.F90, td_exp_split.F90: Now the spin-orbit coupling
	  term also works with curvilinear coordinates.  Note, however,
	  that I am not too sure wether or not it is OK when using TM
	  pseudopotentials.

	  Also, the calculation of the forces was badly done with
	  curvlinear coordinates. Not it is OK.

	  To get those two things, I did some rearrangements. The
	  "nonlocal_op" type that held the Kleinmann-Bylander projectors
	  and the Goedeckers' projectors is substituted in favour of a
	  "projector" type, which is simpler. The spin- orbit term and the
	  normal term are split -- no longer in the same nonlocal_op
	  projector. Also, there are some "dp" projectors in the epot data
	  type which hold the gradient of the projector, so that the forces
	  can be calculated from them.

	  For the moment, the spin-orbit term is neglected when calculating
	  the forces.

2005-07-28 00:29  xavier

	* src/: grid.F90, multigrid.F90, poisson3D.F90,
	  poisson_multigrid.F90: More multigrid improvements: - Number of
	  levels is calculated from the number of points in the mesh.  -
	  Fullweight Restriction is used instead of Injection for fine to
	  coarse transfer.  - More cleaning.

2005-07-27 14:50  xavier

	* src/: poisson.F90, poisson3D.F90, poisson_multigrid.F90:
	  Multigrid improvements: - Added poisson_multigrid_init and
	  poisson_multigrid_end subroutines.  - Now it stops when the
	  residue goes below a threshold (the same variable
	  PoissonSolverCGThreshold from CG is used).  - 3 new input
	  variables that control multigrid process.  - Code is cleaner.

2005-07-27 08:22  xavier

	* src/poisson_multigrid.F90: BUGFIX: Removed the ' characters from
	  comments which causes problems in some systems.

2005-07-26 20:48  xavier

	* src/: Makefile.am, poisson.F90, poisson3D.F90,
	  poisson_multigrid.F90: Added the Multigrid solver for Poisson
	  equation (PoissonSolver = multigrid).  It works for a simple
	  case, but it needs some work for curvilinear coordinates. Don't
	  expect it to be very fast right now, currently only uses a fixed
	  number of cycles (10, which is much more than actually needed)
	  and there are many things to improve.

2005-07-25 19:05  acastro

	* src/derivatives.F90: Bug fixed.  Another one of those that only
	  shows up in some architectures, and for some cases...  It was a
	  wrong initialization of the auxiliary non-local operator that is
	  used to symmetrize properly the gradient and the Laplacian.

2005-07-25 14:36  acastro

	* src/: eigen.F90, ps.F90: Bugs fixed.	(*) The runs with HGH
	  pseudopotentials were giving wrong numbers in my     opteron with
	  the NAG compiler. The reason is that it seems that it     gets
	  screwed up with arrays (or maybe with pointer arrays) whose lower
	  bound is 0 instead of 1. In general, I think that in those
	  cased it is	  good practice to specify bound explicitly.  (*)
	  The second one is just aesthetics: one of the messages in stdout
	  was	  giving the wrong message (the eigensolver information),
	  because the	  message(1) variable was overwritten.

2005-07-24 18:02  acastro

	* src/hgh.F90: Bug fixed. Apparently, this bug was only causing a
	  problem to the NAG compiler in the opteron. But it was wrong
	  anyways.

2005-07-24 16:09  acastro

	* src/nl_operator.F90: This message, rather cryptic for a user,
	  should only show up in debug mode, I think.

2005-07-24 14:41  acastro

	* src/stencil_starplus.F90: Bug fixed.

2005-07-21 12:02  micael

	* src/: xc.F90, xc_axc.F90:  *) Bug fixes: some variables were not
	  initialized.

	  CDFT is *almost* working :)

2005-07-21 10:21  marques

	* src/stencil_starplus.F90: there was an undefined variable

2005-07-21 10:17  marques

	* src/xc_KLI.F90: small cleaning.

2005-07-21 10:07  marques

	* src/: xc_KLI.F90, xc_OEP_x.F90: Now most communication is done
	  with blocking recv/send. This simplifies a bit the code.

2005-07-21 08:34  acastro

	* src/: derivatives.F90, stencil_starplus.F90: Changed the
	  "starplus" stencil for the gradient. Before, it was equal to the
	  one used for the Laplacian, which involved huge memory
	  requirements.  Now it is much lower (although still much larger
	  than when using uniform coordinates).  Incidentally, also
	  corrected one bug: the Gradient had before the opposite sign.

2005-07-20 21:14  marques

	* src/: xc_KLI.F90, xc_OEP_x.F90: There were some problems with the
	  parallel version of these routines.	 *) Mpi_I(recv/send) must
	  be followed by MPI_Wait (or similar, otherwise       it will not
	  free the request (and we get a beautiful memory leak ;)    *) The
	  routines are all done with non-blocking commands. I think that
	  most	     of the communication can be blocking, which will make
	  easier the code.	 Tomorrow I will try to change it.

2005-07-20 14:08  acastro

	* src/: derivatives.F90, poisson_cg.F90: The transponse of the
	  Laplacian is no longer needed, since now the biconjugate gradient
	  routine does not need to be used in poisson_cg2 (normal conjugate
	  gradient is enough).	I leave most of the machinery, though, in
	  case we ever need it. When the developing process is more mature,
	  maybe some code should be gone.

2005-07-20 10:49  acastro

	* src/: derivatives.F90, nl_operator.F90: Sorry, I committed wrong
	  versions of the files... these ones are more polished.

2005-07-20 10:36  acastro

	* src/: derivatives.F90, nl_operator.F90: Symmetrization of the
	  differential operators defined on curvilinear coordinates, so
	  that the Laplacian is Hermitian, and the gradient is
	  skew-Hermitian.

	  This change is so easy that I am almost embarrassed of myself.
	  All the difficulties associated to the non-Hermiticity of the
	  Hamiltonian are gone (namely the horrible convergence problems in
	  the ground state, and the possible-to-come difficulties in the
	  propagation).

	  The way this is achieved is outrageously simple; had I thought
	  about this half a year ago and we would have been using
	  curvilinear coordinates since then. I will explain it in our next
	  meeting (in anycase, from outside, it is a sheer change of value
	  of the coefficients, so you need not worry about it, nothing
	  should have been broken).

	  The next big problem is the enourmous memory requirements. I
	  think that this can be alleviated by refining the stencils.

2005-07-20 09:49  marques

	* src/messages.F90: some messages were being printed by all nodes
	  :(

2005-07-20 09:38  marques

	* doc/mdate-sh: This file is automatically created by autoreconf
	  -si, so it should not be in cvs

2005-07-20 09:35  marques

	* src/: casida.F90, mf_inc.F90, systm.F90, td.F90, td_write.F90,
	  xc_KLI.F90, xc_OEP_SIC.F90, xc_OEP_inc.F90: IMPORTANT: as vol_pp
	  is now defined from 1:m%np_tot, some implicit sums like
	  sum(f(:)*vol_pp(:)) were segfaulting in some machines. I added
	  1:m%np in all places I could find.

2005-07-20 09:33  marques

	* liboct/Makefile.am: added "-f" to the link command.

2005-07-19 15:28  marques

	* liboct/Makefile.am: The config.h was not being regenerated.

2005-07-19 15:11  marques

	* liboct/varinfo.c: Apparently I forgot to commit this file some
	  time ago. It is an innocuous change that allows options to have a
	  negative sign.

2005-07-18 20:35  marques

	* src/: Makefile.am, grid.F90, main.F90, mesh.F90, mesh_create.F90,
	  multigrid.F90, poisson.F90, poisson2D.F90, poisson3D.F90,
	  poisson_multigrid.F90, xc_OEP_x.F90: Initial support for
	  multigrids. We can now generate the coarser grids, transfer
	  functions between the fine and coarse grids and vice-versa, and
	  calculate derivatives in all grids. In poisson_multigrid.F90
	  there is just a test, not the poisson solver yet ;)

2005-07-18 14:25  acastro

	* src/eigen_evolution.F90: * Bug fixed.    The code did not compile
	  with --enable-complex, as noted by Carlo ;)  * Also, I removed a
	  lot of unused code in file expokit.f

2005-07-18 12:43  acastro

	* src/: casida.F90, eigen_evolution.F90, linalg_basic.F90,
	  linalg_basic_blas.F90, math.F90: * I implemented the a different
	  orthonormalization scheme for the   "evolution in imaginary time"
	  eigensolver method, as suggested by	Aichinger and Krotscheck
	  (ref in a comment). It permits faster   convergence (not
	  spectacular, but noticeable).

	    Still poor convergence for curvilinear coordinates; however it
	  converges
	    with a little bit of patience, if you want to try. I already
	  did
	    calculations for molecules such as CO2. Did not try the time
	  evolution,
	    though (it crashes).

	    I think we now probably are now in a state similar to the state
	  that
	    Gygi achieved, unless he had a better diagonalizer (I wrote him
	  an
	    email, no response yet). Maybe after implementing a multigrid
	  algorithm
	    we will be even better.

	  * Polished the sorting algorithm. I changed the casida routine so
	  that	 now it uses the sort in math.

	  * Extended the interface to the BLAS X(gemm) routine, so that it
	  can	be called fro three-dimensional matrices (the first two
	  dimensions are   in fact only one inside the routine).

2005-07-16 17:25  acastro

	* src/: eigen.F90, eigen_cg.F90, eigen_evolution.F90, math.F90,
	  math_inc.F90: Put a proper ordering algorithm in the math modul
	  (I put the shell method, easier to implemente than the quicksort,
	  and of comparable speed for the typical numbers that we use).
	  The eigensolvers now call this routine. The casida algorithm also
	  needs sorting, so I will eventually remove the algorithm that it
	  now uses so that it calls sort instead.

2005-07-16 15:32  acastro

	* src/: Makefile.am, eigen.F90, eigen_cg.F90, eigen_cg2.F90,
	  eigen_cg3.F90, eigen_trlan.F90: Some rationalization in the names
	  of the files, which had no relation to the contents.

2005-07-15 11:45  acastro

	* src/Makefile.am: Duplicated the LIB_BLAS and LIB_LAPACK in the
	  linking line to make sure that it links in the cluster... This is
	  not too orthodox, maybe I find a better way to put it.

2005-07-14 19:37  acastro

	* src/: eigen.F90, eigen_evolution.F90: Now the evolution in
	  imaginary time eigensolver method seems to work properly also for
	  more than one eigenvector.  It works also for the non-symmetric
	  case (i.e. with curvilinear coordinates) and seems to be much
	  faster than arpack. But much slower still than cg for the regular
	  grid cases.

2005-07-14 13:32  acastro

	* src/eigen_evolution.F90: Bug fixed.  The code did not compile in
	  the complex mode.  Thanks, Carlo.

2005-07-14 10:56  acastro

	* src/: Makefile.am, eigen.F90, eigen_evolution.F90: The evolution
	  in imaginary time is now implemented in octopus.  It can be set
	  with "EigenSolver = evolution" in the input file (evolution = 7).
	  I did not test it for more than one eigenstate, and did not try
	  it yet with curvilinear coordinates. Also, there are a few things
	  that should be fine-tuned, so expect changes in the following
	  days.

2005-07-14 10:30  acastro

	* src/td_exp.F90: The calls to the expokit routines had to be
	  changed accordingly.

2005-07-14 09:38  acastro

	* Makefile.am, configure.ac, src/Makefile.am, src/expokit_inc.F90,
	  src/math.F90, src/td_exp.F90: Added the directory expokit, where
	  the expokit.f file is placed exactly as it is in the expokit
	  distribution. A library libexpokit.a is built now and linked to
	  the octopus executable. Before the routines were included in the
	  math module. However, this involved changing the routines to
	  adapt them to Fortran 90, which was not as obvious as it seemed.

	  The expokit.f file is large -- maybe we could remove some unused
	  routines.

	  I am touching this since soon I am experiencing with a new method
	  do get the eigenvectors of the Hamiltonian: propagation in
	  imaginary time.

2005-07-13 11:42  rozzi

	* src/: mf_inc.F90, restart_inc.F90: removed some complains from
	  the -C compiler flag

2005-07-13 11:41  rozzi

	* src/out_inc.F90: missing error status in some functions

2005-07-13 11:40  rozzi

	* src/curvlinear.F90: chi(:) and x(:) are passed from subroutine
	  curvlinear_chi2x() as 3-dimensional, and not sb%dim-ensional
	  arrays

2005-07-13 11:37  rozzi

	* src/simul_box.F90: the rlat and klat vectors are built also for
	  non-periodic directions (to avoid a zero-determinant crash in the
	  crystal module)

2005-07-13 11:37  rozzi

	* src/specie.F90: the variable jradius is only used in for JELLI
	  and POINT types

2005-07-12 10:46  micael

	* testsuite/finite_systems_3d/so.test:	*) Disabled the spin-orbit
	  test. Latter I will fix it.

2005-07-11 15:23  acastro

	* src/xyzanim.F90, libxc/test.c: The xyzanim utility was broken, at
	  least in the IBM machines. I put an emergency fix. If I get time
	  I will take a look at the utilities, see how the system labels
	  affect them, and make up some tests for them.

	  Also, the IBM preprocessor had problems with the // comments in C
	  files..

2005-07-11 14:07  appel

	* testsuite/oct-run_testsuite: Sending mails was broken. I'll run
	  the testsuite today manually since the new tests of Micael seem
	  to give some FAIL's (I guess precision issues).  Tonight the
	  testsuite should again run automatically.

2005-07-10 13:56  micael

	* testsuite/finite_systems_3d/: restart.test, so.test,
	  spinors.test:  *) Added two new tests. One checks the spin-orbit
	  coupling. The other one
	      checks the ground state and time-dependent restarts.
	   *) Changed the spinors test in order to make it faster.

2005-07-08 09:53  appel

	* src/io.F90: Forgot to commit this one (flush_messages migration).

2005-07-08 09:36  appel

	* src/nl_operator.F90: just cosmetics.

2005-07-08 09:35  appel

	* src/: crystal.F90, states.F90, states_kpoints.F90: remove more
	  unused variables.

2005-07-08 09:32  appel

	* src/: global.F90, messages.F90: move flush_messages from global
	  to messages module.

2005-07-08 09:32  appel

	* src/: epot.F90, epot_inc.F90, geometry.F90, run.F90: move
	  variable "only_user_def" out of global.F90

2005-07-07 18:48  appel

	* src/crystal.F90: Forgot the .d-xx expressions ...

2005-07-07 18:41  appel

	* src/crystal.F90: Replace all .d0 expressions by their CNST()
	  counterparts.

2005-07-07 18:37  appel

	* src/: atomic.F90, eigen.F90, eigen_arpack.F90, eigen_cg2.F90,
	  eigen_plan.F90, epot.F90, epot_inc.F90, geom_opt.F90,
	  geometry.F90, h.F90, h_inc.F90, lcao.F90, liboct_parser.F90,
	  linalg_basic_blas.F90, linalg_basic_int.F90, logrid.F90,
	  math_inc.F90, mesh.F90, mf_inc.F90, opt_control.F90, pes.F90,
	  pes_mask.F90, pes_rc.F90, poisson.F90, poisson1D.F90,
	  poisson2D.F90, ps.F90, scf.F90, specie.F90, spline.F90,
	  states.F90, states_inc.F90, states_kpoints.F90, systm.F90,
	  td_exp.F90, td_exp_split.F90, td_rti.F90, td_write.F90, tm.F90,
	  xc_OEP_inc.F90, xyz_adjust.F90: Improve readability. Replace all
	  intent(IN) by intent(in). out and inout were already lowercase in
	  all places.

2005-07-07 18:31  appel

	* src/: eigen_arpack.F90, epot.F90, h_inc.F90, run.F90,
	  sparskit_driver.F90, sparskit_inc.F90, stencil_starplus.F90,
	  td.F90, td_exp_split.F90, td_rti.F90: remove unused variables.

2005-07-07 16:19  marques

	* src/mesh_create.F90: Let's see...

2005-07-07 15:26  rozzi

	* src/crystal.F90: the blas call was not consistent with the
	  interface

2005-07-07 14:27  marques

	* src/: fftw2.F90, fftw3.F90, mesh.F90, mesh_create.F90: Adress
	  error seems to be solved.

2005-07-07 10:20  rozzi

	* src/Makefile.am: I use the output module to debug the Hartree
	  potential. It shouldn't hurt.

2005-07-07 10:03  rozzi

	* testsuite/oct-run_testsuite: bug fixed: the -p option did not set
	  the prefix variable

2005-07-07 09:54  rozzi

	* src/: crystal.F90, states_kpoints.F90: just cosmetics

2005-07-07 09:53  rozzi

	* src/: epot.F90, math.F90, poisson3D.F90: updating the cutoff
	  stuff for periodic systems

2005-07-06 12:14  marques

	* src/states_inc.F90: Hopefully this will fix the mpi compilation.

2005-07-05 17:42  marques

	* src/messages.F90, src/run.F90, src/string.F90, src/varinfo.F90,
	  liboct/varinfo.c: *) Added function messages_print_var_option,
	  etc. that allow to print    information about an option of an
	  input variable (see run.F90#263 for an    example) Please use
	  this function, as it keeps the code cleaner.	*) Corrected a bug
	  in varinfo.c that gave a segfault

	  P.S. It does pass all tests this time ;)

2005-07-05 16:14  marques

	* src/: h_inc.F90, simul_box.F90: This should solve the problems
	  with the complex test suite. There was no problem with the
	  compiler: the specific section of the code that was giving
	  problems was only compiled with --enable-complex.

	  Note that there is still a small bug in liboct/varinfo.c that I
	  will fix when I commit a couple of changes I made to that part.

2005-07-05 13:23  marques

	* src/h_inc.F90: Let's see if now this fixes the compilation in the
	  opteron!

2005-07-04 19:45  marques

	* src/h.F90: Hopefully, the code will compile now. I really don't
	  undrestand how it could compile in my machine!!

2005-07-04 13:39  marques

	* share/util/: mf.cfg, mf.net: This was not working properly. Note
	  that I also changed slightly the CMSP package.

2005-07-03 20:41  marques

	* src/: Makefile.am, cf.F90, cf_inc.F90, curv_briggs.F90,
	  curv_gygi.F90, curv_modine.F90, curvlinear.F90, derivatives.F90,
	  derivatives_inc.F90, eigen.F90, eigen_arpack.F90, epot.F90,
	  epot_inc.F90, f.F90, f_inc.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, geometry.F90, global.F90, global.h, grid.F90,
	  gs.F90, h.F90, h_inc.F90, lasers.F90, lcao.F90, make_st.F90,
	  mesh.F90, mesh_create.F90, mf_inc.F90, nl_operator.F90,
	  opt_control.F90, out.F90, phonons.F90, poisson.F90,
	  poisson2D.F90, poisson3D.F90, rotational_strength.F90, run.F90,
	  scf.F90, simul_box.F90, specie.F90, states.F90, states_inc.F90,
	  static_pol.F90, static_pol_lr.F90, stencil_cube.F90,
	  stencil_star.F90, stencil_starplus.F90, stencil_variational.F90,
	  systm.F90, td.F90, td_calc.F90, td_exp.F90, td_exp_split.F90,
	  td_init.F90, td_rti.F90, td_write.F90, unocc.F90, v_ks.F90,
	  v_ks_inc.F90, xc.F90, xc_OEP_SIC.F90, xc_axc.F90, xc_functl.F90,
	  xc_vxc.F90: Now conf%dim -> simul_box%dim. I think that this is
	  the right place to have it.  This implied changing a lot of
	  things, some of them I am still not happy with.  In any case
	  there are still some more movings to be done ;)

2005-07-02 10:20  marques

	* src/: eigen.F90, eigen_arpack.F90, eigen_cg2.F90, epot.F90,
	  epot_inc.F90, fftw2.F90, fftw3.F90, h_inc.F90, poisson.F90,
	  scf.F90, simul_box.F90, states.F90, td_exp_split.F90: *)
	  Hopefully eigen_arpack will now compile *) Created function
	  simul_box_is_periodic

2005-07-01 22:47  marques

	* src/: Makefile.am, casida.F90, cf_inc.F90, derivatives.F90,
	  eigen.F90, eigen_cg2.F90, eigen_plan.F90, epot.F90, epot_inc.F90,
	  f.F90, fftw2.F90, fftw3.F90, global.F90, global.h, grid.F90,
	  gs.F90, h.F90, h_inc.F90, lcao.F90, linear_response.F90,
	  linear_response_inc.F90, make_st.F90, mesh.F90, mesh_create.F90,
	  opt_control.F90, out.F90, out_inc.F90, pes.F90, pes_mask.F90,
	  poisson.F90, poisson2D.F90, poisson3D.F90, ps.F90, restart.F90,
	  restart_inc.F90, run.F90, scf.F90, simul_box.F90, states.F90,
	  states_inc.F90, states_kpoints.F90, static_pol_lr.F90, systm.F90,
	  td.F90, td_calc.F90, td_exp.F90, td_exp_split.F90, td_init.F90,
	  td_rti.F90, td_write.F90, unocc.F90, v_ks.F90, v_ks_inc.F90,
	  xc_OEP.F90, xc_OEP_SIC.F90, xc_OEP_inc.F90, xc_OEP_x.F90: *)
	  periodic_dim is now a part of simul_box and not of conf (as I
	  think it should    be) *) defined a macro NP = gr%m%np in
	  global.h to ease a bit the writing *) there is now a function
	  simul_box::simul_box_is_periodic

	  I am trying to get the variables out of conf. The next one to go
	  will be conf%dim, and will go to simul_box. So please expect some
	  large change sets in the next couple of days. Also I am thinking
	  about doing the following changes to improve readibility:   m ->
	  mesh	 h -> hamilt   gr -> grid   sb -> simul_box and to avoid
	  repetitions to add _mod to the name of the modules.

2005-07-01 14:12  marques

	* src/: casida.F90, geom_opt.F90, grid.F90, gs.F90, lcao.F90,
	  opt_control.F90, phonons.F90, run.F90, scf.F90, states.F90,
	  states_inc.F90, static_pol.F90, static_pol_lr.F90, systm.F90,
	  td.F90, td_calc.F90, td_rti.F90, td_write.F90, unocc.F90,
	  v_ks.F90, v_ks_inc.F90: *) geometry is now a part of system *)
	  several cleanings

2005-07-01 11:43  marques

	* src/: Makefile.am, casida.F90, curvlinear.F90, derivatives.F90,
	  epot.F90, f.F90, f_inc.F90, geom_opt.F90, grid.F90, gs.F90,
	  h_inc.F90, make_st.F90, mesh.F90, mesh_create.F90, mf_inc.F90,
	  nl_operator.F90, opt_control.F90, phonons.F90, poisson1D.F90,
	  poisson2D.F90, run.F90, scf.F90, simul_box.F90, states.F90,
	  states_kpoints.F90, static_pol.F90, static_pol_lr.F90, systm.F90,
	  td.F90, td_calc.F90, td_exp_split.F90, td_rti.F90, unocc.F90: I
	  am restructuring octopus, in order to implement multigrid
	  methods.  Unfortunately, the changes are quite invasive :(

	  *) Added two new structures	-) simul_box includes details
	  concerning the simulation box   -) grid includes the simulation
	  box, the mesh, the "multi_mesh", and (later)	    the geometry *)
	  deleted mesh_x, mesh_y, mesh_z, and mesh_xyz. Their use was
	  inconsistent,    and it's faster anyway to access m%x

	  Further cleaning will follow.

2005-06-30 20:03  appel

	* src/syslabels.F90: Forgot this initialization.

2005-06-30 18:48  appel

	* src/: derivatives.F90, eigen.F90, nl_operator.F90,
	  stencil_star.F90, stencil_variational.F90: Add possibility to
	  have complex nl operators (will be necessary for wave-matching).

2005-06-30 18:36  appel

	* src/: main.F90, syslabels.F90: allow for more runs than syslabels
	  are defined. permits to run a periodic calculation only once when
	  equivalent leads are used.

2005-06-30 18:32  appel

	* src/out_inc.F90: luns are already assigned inside io_open. this
	  statement was using up all luns (showed up in multi-subsys mode).

2005-06-30 18:30  appel

	* src/crystal.F90: Bug fixed. This was the wrong index.

2005-06-30 11:54  marques

	* libxc/util.h: There were a couple of misspells in function names

2005-06-17 08:49  appel

	* testsuite/Makefile.am: Install tests for periodic systems during
	  make install.

2005-06-16 18:58  appel

	* testsuite/: oct-run_regression_test.pl,
	  finite_systems_1d/helium.test, finite_systems_3d/sodium.test,
	  finite_systems_3d/spinors.test,
	  periodic_systems_1d/cosine_potential.test,
	  periodic_systems_1d/free_electrons.test: Adding $Id$ tags to all
	  tests. Modify Perl script to add tags when a template is created
	  with oct-run_regression_test.pl -c

2005-06-16 18:49  appel

	* testsuite/periodic_systems_1d/: cosine_potential.test,
	  free_electrons.test: Adding regression tests to validate the band
	  structure of non-interacting electrons in 1D.

2005-06-16 17:40  appel

	* src/: sparskit.F90, sparskit_driver.F90, sparskit_inc.F90:
	  Generalizing the Sparskit interface to complex matrices and
	  vectors. Since the Sparskit library offers only routines for real
	  arithmetic I'm essentially stacking real and imaginary parts of
	  the vectors, i.e. for

	       (A+iB)(f+ig)=h+iv

	  with A, B \in R^{NxN}, f,g,h,v \in R^{N} I'm solving

	       (A -B)(f)   (h)
			       =
	       (B  A)(g)   (v)

	  This system is by construction non-symmetric. For the test
	  matrices I was using only the stabilized Bi-Conjugate Gradient
	  method and some of the GMRES flavors were giving accurate results
	  for a reasonable number of iterations.

2005-06-14 12:36  acastro

	* src/eigen_cg2.F90: Bug fixed.  It showed up when doing
	  spin-polarized calculations. It has been there for a while...

2005-06-14 08:09  acastro

	* src/stencil_starplus.F90: Rewrote the "starplus" stencil. Finally
	  I found one way of choosing the points and the polynomials that
	  seems to be a good compromise: not as unmanageable as the cubic
	  stencil, and not as inaccurate as the star stencil for
	  curvilinear coordinates.

2005-06-12 15:25  acastro

	* src/eigen_arpack.F90: Bug fixed.

2005-06-11 18:04  acastro

	* src/stencil_starplus.F90: The new "starplus" stencil is now
	  operative also in 3D.

2005-06-11 16:45  acastro

	* share/variables.local, src/eigen.F90, src/eigen_arpack.F90: A new
	  iteration for the arpack support. Now it does not support
	  bi-spinors, or complex wavefunctions.

2005-06-11 11:29  appel

	* src/mesh_create.F90: Bug fixed. Free electron bands seem to come
	  out again in head.

2005-06-11 11:25  appel

	* testsuite/finite_systems_1d/helium.test: Setting Dimensions = 2.
	  That is what I was originally intending with the test: 2
	  _interacting_ electrons in 1D (== 1 electron in 2D with
	  appropriate potential). Just forgot initially the Dimensions
	  variable :).

2005-06-10 17:27  acastro

	* share/variables.local, src/Makefile.am, src/derivatives.F90,
	  src/stencil_starplus.F90: It seems that to use curvilinear
	  coordinates, the star stencil was not enough (too inaccurate),
	  and the cubic stencil is too expensive (too many points). So I
	  have put an intermediate stencil, some kind of star + some
	  off-diagonal points. For the moment I have only put it in 2D,
	  adding four points.

2005-06-10 14:15  acastro

	* testsuite/: Makefile.am, finite_systems_1d/helium.test: The
	  Helium test was not really one-dimensional; I added the Dimension
	  = 1 option. So I had to change the eigenvalue number.

2005-06-10 11:03  appel

	* src/sparskit.F90: Fix compilation errors on x86_64.

2005-06-10 10:34  appel

	* configure.ac: Forgot this one. Add call to m4 macro for sparskit
	  library.

2005-06-10 10:24  appel

	* debian/rules: Add sparskit library to configure calls for the
	  Debian packages.

2005-06-10 10:23  appel

	* acinclude.m4, build/acx_sparskit.m4, src/Makefile.am,
	  src/sparskit.F90, src/sparskit_inc.F90: Adding interface module
	  for sparskit library. The library contains ten different solver
	  for sparse linear systems. Preconditioning is supported by the
	  solvers but not yet implemented in the interface.

2005-06-08 07:09  acastro

	* src/Makefile.am: Changed the order of io.F90. The dependency tree
	  should take care of this, but the dependency tree that we have
	  basicly only takes carer of the #includes. The result was an
	  annoying linking warning (changed size of modules, or something
	  like that).

2005-06-07 13:58  acastro

	* libxc/: Makefile.am, xc_f.c: I forgot to change also this when I
	  changed the config.h stuff.

2005-06-07 07:59  acastro

	* src/eigen_arpack.F90: The bug reported by the cron robot is
	  fixed.

2005-06-06 10:43  acastro

	* build/acx_arpack.m4, src/eigen_arpack.F90: Next step towards
	  having the ARPACK diagonalizers for non-Hermitian cases.  Now I
	  have to change the normalization of all functions, so that the
	  dot product is the canonical one...

2005-06-05 17:41  acastro

	* configure.ac, liboct/grammar.c, liboct/oct_f.c,
	  liboct/oct_gsl_f.c, liboct/recipes.c, liboct/varia.c,
	  liboct/varinfo.c, liboct/write_iter.c, liboct_parser/Makefile.am,
	  liboct_parser/grammar.c, liboct_parser/parser_f.c,
	  src/Makefile.am, src/config.h.in: Just "maintenance" changes.

	  We can finally get rid of config.h.in. It involved a couple of
	  apparantly unrelated changes:

	  o Moved grammar.c from liboct to liboct_parser, where it belongs.
	  I also eliminated grammar.y from the Makefile.am, so there will
	  be no attempt to regenerate it automatically. I think it is
	  better this way since, for example, I do not have bison.  o Now
	  config.h will be in the parent directory. It has to be included
	  with <config.h> instead of "config.h". Also, I changed the rule
	  that generates config_F90.h in src, to avoid getting C comments.

2005-06-05 13:39  appel

	* src/io.F90: Remove debug write statement.

2005-06-05 13:17  appel

	* src/out_inc.F90: This compiled before with NAG but seems to cause
	  problems with Intel. In this way it compiles with both.

2005-06-05 13:06  appel

	* src/: broad.F90, crystal.F90, curv_briggs.F90, curvlinear.F90,
	  derivatives.F90, eigen.F90, eigen_arpack.F90, eigen_cg2.F90,
	  eigen_cg3.F90, epot.F90, global.F90, h.F90, h_inc.F90, h_so.F90,
	  hgh.F90, hs_from_acc.F90, hs_from_mult.F90, lasers.F90,
	  libxc.F90, main.F90, mix.F90, nl_operator.F90, out_inc.F90,
	  phonon_spectrum.F90, ps.F90, spectrum.F90, stencil_cube.F90,
	  td.F90, td_write.F90, xc_KLI.F90, xc_OEP.F90, xc_OEP_SIC.F90,
	  xc_OEP_inc.F90, xyzanim.F90: Removing unused variables. Now we
	  are getting close to a point where we actually can extract useful
	  infromation from the compiler warnings:

	  Warning: td_exp_split.F90, line 201: Symbol UVPSI referenced but
	  never set	     detected at ZEXP_VNLPSI@<end-of-statement>
	  Warning: td_exp_split.F90, line 201: Symbol P2 referenced but
	  never set	     detected at ZEXP_VNLPSI@<end-of-statement>

	  It seems that these variables are used for calculations but don't
	  carry any value. Any ideas why the lines above were uncommented?

2005-06-05 11:45  appel

	* src/messages.F90: Loop variable got lost during last rename.

2005-06-05 11:39  appel

	* src/messages.F90: Variable ierr for MPI_FINALIZE was missing for
	  parallel octopus flavours.

2005-06-05 11:25  appel

	* src/.cvsignore: Adding messages.std*, semantic.cache, *.pbs

2005-06-05 11:23  appel

	* src/: Makefile.am, atomic.F90, broad.F90, casida.F90,
	  centergeom.F90, crystal.F90, curv_briggs.F90, curv_gygi.F90,
	  curv_modine.F90, derivatives.F90, eigen.F90, epot.F90,
	  expokit_inc.F90, f.F90, fftw2.F90, fftw3.F90, geom_opt.F90,
	  geometry.F90, global.F90, gs.F90, h.F90, hgh.F90,
	  hs_from_acc.F90, hs_from_mult.F90, io.F90, lasers.F90, lcao.F90,
	  liboct_parser.F90, linalg_adv.F90, linalg_adv_lapack.F90,
	  linalg_basic_int.F90, linear_response.F90, main.F90, make_st.F90,
	  math.F90, mesh.F90, mesh_create.F90, mf.F90, mix.F90,
	  opt_control.F90, out.F90, phonon_spectrum.F90, phonons.F90,
	  poisson.F90, poisson_cg.F90, poisson_corrections.F90, ps.F90,
	  pulpo.F90, restart.F90, rotational_strength.F90, run.F90,
	  scf.F90, specie.F90, spectrum.F90, states.F90, static_pol.F90,
	  static_pol_lr.F90, stencil_cube.F90, stencil_star.F90,
	  stencil_variational.F90, strength_function.F90, systm.F90,
	  td.F90, td_exp.F90, td_exp_split.F90, td_rti.F90, tm.F90,
	  units.F90, unocc.F90, v_ks.F90, wave_matching.F90, xc.F90,
	  xc_OEP.F90, xc_functl.F90, xyz_adjust.F90, xyz_file.F90,
	  xyzanim.F90, messages.F90, syslabels.F90: I've broken the global
	  module in several parts. Since global was used in many places,
	  the changes affect most of the files. Here a changelog:

	   o The io module now contains a "use global", i.e. the module
	  _knows_ about MPI
	     and the node numbers (_very_ important to clean up IO in
	  parallel runs).

	   o There is a new module called messages which contains now the
	  write_{info,
	     warning,fatal} functions and corresponding variables like
	  message(:), stars,
	     hyphens. I was not sure about the push_sub, pop_sub functions,
	  so I put them
	     also in the messages module. Perhaps they belong in a own
	  debug module ...

	   o I modified the write_* functions in order to _really_ flush
	  output in e.g.
	     MPI runs. For that purpose I've introduced a new variable
	  "FlushMessages".
	     If set to "yes" (default is no), octopus opens the files
	  messages.{stdout,stderr}
	     and appends messages for every call of write_*. At the end of
	  the write_* calls
	     the files are closed so that the output is written to disk.
	  Even if the operating
	     system or a queuing system buffers the ordinary stdout and
	  stderr you will get
	     with a tail -f messages.* immediate feedback what octopus
	  does. Of course in MPI
	     runs only node 0 writes.

	     On a SMP machine with two octopus MPI processes it is in this
	  context instructive
	     to monitor the output pattern by running

	      strace -e open -p <pid of first process>
	      strace -e open -p <pid of second process>

	   o The new module syslabels contains all the stuff that is
	  required to run
	     multiple subsystems. Apart from this module and a few init
	  calls the system
	     label support reduces now to a single line in io.F90:

	     before:
		     write(wpath, '(3a)') trim(work_dir), "/", trim(path)

	     now:
		     write(wpath, '(4a)') trim(work_dir), "/",
	  trim(current_label), trim(path)

	     All the old current_label stuff has been removed.

	   o A "use global" is now in many cases accompanied by a "use
	  messages" and a
	     "use syslabels" (the price we have to pay to clean up global).

	   o Added some more $Id$ tags that I forgot in the first round.

	   o The utility programs compile but I didn't check if they
	  produce proper output.
	     Perhaps we should add checks to the testsuite for them as
	  well?

2005-06-05 09:51  appel

	* debian/rules: Add calls to autoheader.

2005-06-05 09:21  appel

	* debian/rules: o Fixing build errors. Replacing the triple

		    aclocal-1.8
		    automake-1.8 --add-missing
		    autoconf

	    by

		    aclocal-1.8
		    automake-1.8 --add-missing
		    autoreconf -i

	  o Adding arpack library.

2005-06-03 07:42  acastro

	* liboct/config.h.in: This file is generated automatically by
	  autoheader when doing autoreconf. So we do need it in the cvs.
	  src/config.h.in is hard-coded, however, so it stays. [I do not
	  know why it is hard-coded, maybe it is possible to do it properly
	  and remove it]

2005-06-02 17:22  acastro

	* acinclude.m4, configure.ac, build/acx_arpack.m4,
	  build/acx_jdqz.m4, src/Makefile.am, src/config.h.in,
	  src/eigen.F90, src/eigen_arpack.F90, src/eigen_jdqz.F90: After
	  some experimenting and reading, I found out that the
	  Jacobi-Davidson scheme would in fact be slower than the
	  Arnoldi/Lanczos iteration eigensolver. So I changed the dummy
	  interface to JDQZ by an interface to the ARPACK library.  For
	  now, only the real symmetric case is implemented. Of course the
	  idea is to put the complex non-Hermitian case, since for the
	  normal case the conjugate gradients seems to be faster.

2005-06-02 14:57  appel

	* debian/rules: Configure the Debian packages with the jdqz
	  library.

2005-06-01 12:20  acastro

	* acinclude.m4, configure.ac, src/Makefile.am, src/config.h.in,
	  src/eigen.F90, src/eigen_jdqz.F90, build/acx_jdqz.m4,
	  liboct/config.h.in: Added the basic infrastructure to allow for
	  the inclusion of the JDQZ package as a diagonalizer. It is a
	  diagonalizer that is able to cope with complex non-Hermitian
	  operators. It already was in an ancient version of octopus (back
	  when we were young), but was removed because it did not improve
	  on the cg stuff. However it could be an option to put the
	  curvilinear coordinates stuff back working.

	  Note that it is not yet done, I just wrote the autoconf macros
	  and figured out how to call the library.

2005-06-01 10:23  appel

	* build/latest_cvs_commit.sh, src/Makefile.am, src/global.F90,
	  src/main.F90: Octopus now prints at startup below the version and
	  build info also rcs info's about the latest cvs changes that are
	  included in the executable at hand.

	  This was Alberto's idea and we hacked the code in a corporative
	  effort to include the feature. Inside latest_cvs_commit.sh we are
	  using GNU'isms for this. If the build platform doesn't support
	  the GNU extensions the rcs info string will be empty.

2005-05-31 12:55  appel

	* debian/rules: There was another \ missing.

2005-05-31 11:18  appel

	* testsuite/oct-run_testsuite: Clean up after testsuite finished.

2005-05-31 11:14  appel

	* testsuite/oct-run_regression_test.pl: Filename should be out.log
	  not log.

2005-05-31 10:22  appel

	* testsuite/oct-run_testsuite: Improve script a bit to include
	  output logs of a run in the mail reports (preparing to start
	  daily reports ...).

2005-05-31 08:28  acastro

	* src/: eigen.F90, eigen_cg2.F90: I finally commit the eigen solver
	  that I built for the quantum dots code.  It is very similar to
	  the one that we already had, or so it looks, one difference being
	  that the one that we had had several steps that I did not
	  understand very well, and was bit less clear.

	  For the moment, I have left both, and they will stay for a while
	  until I make sure that the new one works fine in all cases
	  (complex wavefunctions, etc).  Afterwards, the old one will be
	  substituted (now the new one may be chosen by setting EigenSolver
	  = 6). The default keeps being cg = 5 (the old one).

	  The reason for changing it is that I will try to build a
	  bi-conjugate gradients extension for the non-Hermitian case, and
	  it will be easier with this new one which is much more clear.

	  Eventually we should add preconditioning through multigrid.

2005-05-31 08:28  appel

	* testsuite/oct-run_regression_test.pl: o Search also for
	  octopus_cmplx flavours.  o The program list of a test doesn't
	  need to include the "_debug"	 flavours. If e.g. octopus_cmplx is
	  specified in this list the test   will also be vaild for
	  octopus_cmplx_debug.	o add option -l to copy the output of a run
	  to the local directory.

2005-05-31 08:05  appel

	* src/math.F90: Reverted by mistake both files to the same file.
	  Back to revision 1.32 ...

2005-05-31 07:51  appel

	* src/: math.F90, wave_matching.F90: Sorry. These two slipped in on
	  mistake. Reverting to previous revison.

2005-05-31 07:46  appel

	* src/: broad.F90, casida.F90, centergeom.F90, geom_opt.F90,
	  hgh.F90, lasers.F90, main.F90, math.F90, opt_control.F90,
	  phonon_spectrum.F90, phonons.F90, restart_inc.F90, spectrum.F90,
	  static_pol_lr.F90, td.F90, unocc.F90, wave_matching.F90,
	  xyzanim.F90: Add more system_labels for multi_subsystem mode (I
	  bet I still did not catch all of them).

	  I'm adding the labels in this way, although I believe that the
	  only clean way would be to handle the labels inside the io module
	  (i.e. inside the io_mkdir and io_open functions).  This however
	  would require a "use global" inside the io module which in turn
	  would cause a circular dependency. Something like a "super
	  global" module is missing here .. :) Actually the same need for
	  such a module appears if we want to clean up the use of file
	  descriptors for MPI runs (which is still _not_ MPI clean). The io
	  module should know something about the node number (mpiv%node)
	  which again would cause via "use global" a circular dependency.
	  This "super global" module should only contain the MPI variables
	  which are currently in global.F90 and also the system labels
	  (perhaps something else comes to your mind?).

	  Your opinion on this?

2005-05-30 12:30  acastro

	* src/mesh_create.F90: The argument enarge was totally useless in
	  that subroutine, so I removed it.  Besides, I removed a horribly
	  outdated comment in the begining of the file.

2005-05-29 17:51  appel

	* debian/rules: missing some line continuations ...

2005-05-29 17:43  appel

	* debian/rules: My last commit still didn't fix the segfault. Let's
	  try this one ...

2005-05-29 14:01  appel

	* debian/: changelog, dirs, rules: Changing libraries for the build
	  of the x86_64 Debian package. I'm now not linking to the system
	  blas and lapack libraries anymore, but use my "home compiled"
	  versions instead. This fixes the segfault bug that I mentioned
	  last Friday in the IRC. The spinors.test is now running properly
	  also on x86_64 with nag5. Also thanks to Alberto for helping with
	  the testing ...

2005-05-29 12:09  acastro

	* share/variables.local, src/global.F90, src/main.F90, src/run.F90:
	  Added CalculationMode variable to the list of commented
	  variables.  Also a couple of cosmetic changes.

2005-05-29 07:35  marques

	* src/xc_KLI.F90: By some strange reason this was not working...
	  Now it does ;)

2005-05-28 18:43  marques

	* share/Makefile.am: Now both variables and varinfo are cleaned
	  with make clean

2005-05-28 08:18  marques

	* liboct/varinfo.c, share/variables, share/variables.local,
	  src/varinfo.F90, build/mk_varinfo.pl: The file share/variables
	  are now updated automatically. Note that the data contained in
	  share/variables.local is added to share/variables. In the future
	  I hope to be able to remove *everything* from
	  share/variables.local.

2005-05-28 07:23  marques

	* src/: global.F90, run.F90, v_ks.F90: *) MPI code now only runs
	  for modes td and casida (the ones that are parallelized) *) Added
	  description of Variable SICorrection *) Added keyword 'Section'
	  to variables description

2005-05-28 06:54  marques

	* src/xc_KLI.F90: Memory leak fixed in KLI procedure.  I took the
	  change to clean a little bit the routine.

2005-05-27 14:50  marques

	* share/: Makefile.am, varinfo: There is no need to keep the file
	  varinfo. Now it is automatically generated.  Note that it will
	  not be regenerated, as I did not include any dependences.

2005-05-27 12:53  acastro

	* src/: geometry.F90, mesh_create.F90, opt_control.F90, states.F90,
	  systm.F90: Some little cleaning that I wanted to do since a long
	  time ago.  By the way, it is the first time I use the testsuite
	  to validate the changes :)

2005-05-27 11:22  appel

	* src/: global.F90, states.F90: Need to know the number of states
	  of "neighboring" systems (in multi_system mode) for wave
	  matching.

2005-05-27 11:19  appel

	* src/mesh_create.F90: Allow also for box_shape == PARALLELEPIPED
	  in 1D.

2005-05-26 13:20  marques

	* Makefile.am, build/mk_varinfo.pl, liboct/Makefile.am,
	  liboct/oct_f.c, liboct/varia.c, liboct/varinfo.c,
	  share/Makefile.am, share/varinfo, src/Makefile.am,
	  src/global.F90, src/liboct.F90, src/run.F90, src/string.F90,
	  src/v_ks.F90, src/varinfo.F90, src/xc_OEP_x.F90: This is an
	  attempt to force us, lazy programmers, to take better care of the
	  documentation. The idea is, the input variables can be documented
	  abywhere in the code, that there will be a script reading it, and
	  putting the information in share/varinfo. This information should
	  also be included automatically in the manual (this is still not
	  done). Please look at the variable Dimensions, or
	  NonInteractingElectrons for an example. If you like it, we should
	  start moving things from the manual to the code ;)

2005-05-25 18:32  marques

	* share/variables, src/cf_inc.F90, src/epot.F90, src/f_inc.F90,
	  src/geometry.F90, src/out_inc.F90, src/v_ks.F90,
	  src/v_ks_inc.F90, src/xc_OEP.F90, src/xc_OEP_inc.F90: Added the
	  Amaldi correction to the xc potential. You can now try, Alberto,
	  and see if it helps with your enormous calculations. On the way I
	  found a couple of problems:

	    *) Micael, lines 143-150 of v_ks_inc make me think that
	  non-collinear
	       magnetism does not work when using non-linear core
	  corrections. In this
	       case, rho(:,3:4) will never be initialized!!!

	    *) There is a bug showing in mf2cf when using cubic meshes.
	  Apparently the
	       indices ix, iy, and iz are out of range

2005-05-25 07:38  acastro

	* src/: systm.F90, v_ks.F90, xc.F90, xc_OEP.F90: The "nlcc"
	  component of xc was no longer used, so it may be removed...

2005-05-24 15:29  marques

	* src/main.F90: By some strange reason, the pathscale compiler
	  didn't like it...

2005-05-24 15:09  appel

	* src/derivatives.F90: Neither Alberto, nor I understand why the
	  code crashes if (1:conf%dim) is missing as argument to der%m%h in
	  the call of

	   call stencil_star_coeff_lapl(der%m%h(1:conf%dim), der%order,
	  der%lapl)

2005-05-24 15:06  appel

	* debian/rules: Thanks to the "long lines" macro Alberto was adding
	  yesterday, we can now include also the _debug executables in the
	  Debian Package.

2005-05-24 14:48  marques

	* src/xc_OEP_x.F90: Finally, exact exchange appears to work in
	  parallel.

2005-05-23 18:08  acastro

	* configure.ac, build/acx.m4, liboct/config.h.in, src/config.h.in,
	  src/global.h: Added a macro in build/acx.m4, that checks wether
	  the compiler is able to tackle with long lines (about 150
	  characters).

	  This is called in configure.ac, and defines the preprocessor
	  macro LONG_LINES to 1.

	  This is in turn used in global.h: if no long lines are possible,
	  the assertion sanity check is not defined (this check involves
	  very long lines, and so with the compilers that do not allow
	  this, the code will not compile in debug mode).

	  In general, for this compilers, a macro definition should not
	  expand arbitrarily to any length, or it will not work.

2005-05-23 13:23  appel

	* liboct_parser/parser_f.c: Adapt interface to revised parse_init.

2005-05-23 13:15  appel

	* src/global.h: In my last commit this one was slipping in. Undo
	  changes.

2005-05-23 13:11  appel

	* src/: global.h, restart_inc.F90, specie.F90: Two more places
	  where simultaneous writes were made.

2005-05-23 13:09  appel

	* liboct_parser/liboct_parser.h, liboct_parser/parse.c,
	  src/global.F90, src/liboct_parser.F90: The Octopus parser was not
	  MPI clean (all nodes were writing simultaneously to out.oct).
	  Cleaning up parser calls. Now only node 0 writes to out.oct.

2005-05-22 17:33  appel

	* testsuite/oct-run_testsuite: Yet another renaming missing

2005-05-22 08:54  appel

	* doc/: Makefile.am, octopus.pod: Adding man page for the octopus
	  executable. Currently it's very brief, feel free to update it ...

2005-05-22 08:47  appel

	* testsuite/: oct-run_regression_test.pl,
	  oct-run_regression_test.pl.pod, oct-run_testsuite: Forgot some
	  renames inside the files.

2005-05-22 08:25  acastro

	* doc/: tutorial.tex, img/elf.eps, img/laser.eps, img/pi02.eps,
	  img/pi03.eps, img/pi04.eps, img/spacing.eps, pdf/tutorial.pdf: I
	  had forgot to substitute the old "tutorial.tex" by the new one.
	  Also added the image files, and updated the pdf.  Now the new
	  tutorial also has the Helium example.

2005-05-21 08:49  appel

	* testsuite/: Makefile.am, oct-run_regression_test.pl,
	  oct-run_regression_test.pl.pod, oct-run_testsuite,
	  run_regression.pl, run_regression.pl.pod, run_testsuite: >
	  Heiko, maybe we should rename the script to oct-run-testsuit.
	  Imagine
	  > that it gets installed in /usr/bin, it would be quite hard to
	  realize
	  > that it had something to do with octopus with such general
	  name. What do
	  > you think?

	  :). Came also to my mind when I installed the debs yesterday on
	  our cluster.	Of course you are right. The same holds true for
	  the perl script.

2005-05-20 14:40  acastro

	* src/td.F90: The record-length bug is also now fixed in the head
	  version as well.  Note: I did not modify the io_open subroutine
	  to do it, adding a possible recl optional variable, because it
	  gets compilicated (it would not be valid for unformatted
	  files...). This way it is easier.

2005-05-20 14:37  appel

	* testsuite/: Makefile.am, run_testsuite: Adding wrapper script
	  which runs all tests. The script is member of bin_SCRIPTS and
	  will therefore be installed to /usr/bin. This is especially
	  useful for packaged versions of Octopus (rpm's, deb's) since the
	  user has in this case no makefiles available.

	  If some tests fail a report can be sent to a given mail address
	  using the -m flag.

	   run_testsuite -f -m octopus-devel@tddft.org

	  This is also useful for crontab entries (i.e. we could run tests
	  nightly and send reports to octopus-devel if some of them fail).

2005-05-20 14:26  appel

	* testsuite/.cvsignore: Adding .cvsignore file.

2005-05-20 14:25  appel

	* testsuite/: run_regression.pl, finite_systems_1d/helium.test,
	  finite_systems_3d/sodium.test, finite_systems_3d/spinors.test:
	  Adding "Programs" as new field to the *.test files. We can now
	  distinguish between different executables, or specify several for
	  a given test.  Updating exiting tests accordingly.

2005-05-20 13:54  acastro

	* src/: td.F90, td_write.F90: Bug fixed in the 1.4 version, that
	  will have to be fixed in the head version (I will do it shortly).
	  In some compilers, I/O records are limited to a certain length
	  (1024 bytes in the NAG case). The coordinates file has an
	  enormous length, and there the code may break (for some reason,
	  it only breaks when reading, not when writing...).

2005-05-20 13:47  appel

	* debian/: changelog, rules: Provide all four binaries (ocotpus,
	  octopus_cmplx, octopus-mpi, octopus_cmplx-mpi) in the Debian
	  package.

2005-05-20 10:05  micael

	* liboct/config.h.in, src/epot.F90, src/epot_inc.F90,
	  src/h_inc.F90:  *) We can now have a static electric field.

2005-05-19 09:07  appel

	* src/wave_matching.F90: Remove obsolete comments.

2005-05-19 08:43  appel

	* debian/: changelog, control, rules: Update Debian directory.

2005-05-19 08:41  appel

	* src/: casida.F90, cf.F90, crystal.F90, derivatives.F90,
	  derivatives_inc.F90, eigen_plan.F90, epot.F90, f.F90, f_inc.F90,
	  geometry.F90, h_inc.F90, h_so.F90, lasers.F90, lcao.F90,
	  math_cg_inc.F90, mix.F90, opt_control.F90, poisson.F90,
	  poisson2D.F90, poisson_cg.F90, poisson_corrections.F90, ps.F90,
	  restart_inc.F90, run.F90, states.F90, states_inc.F90,
	  states_kpoints.F90, td.F90, td_exp.F90, td_exp_split.F90,
	  td_rti.F90, td_write.F90, tm.F90, unocc.F90, xc.F90, xc_OEP.F90,
	  xc_OEP_inc.F90, xc_fxc.F90, xc_vxc.F90: Remove unused variables.

2005-05-17 14:58  marques

	* src/xc_OEP_x.F90: I fixed some bugs, but it is still not working
	  in parallel :((

2005-05-17 14:58  marques

	* src/h_inc.F90: Small bug that would only be seen with non uniform
	  meshes.

2005-05-17 14:50  micael

	* src/td.F90:  *) Bug fixed: the stopping of time-dependent runs
	  was not done properly.

2005-05-17 14:02  micael

	* testsuite/finite_systems_3d/spinors.test:  *) Reduced the
	  precision in the local magnetic moments.

2005-05-17 13:16  appel

	* src/.cvsignore: Add Makefile.local to .cvsignore file.

2005-05-17 13:06  appel

	* share/variables: Add wave_matching to the known variables.

2005-05-17 12:43  appel

	* src/: Makefile.am, run.F90, wave_matching.F90: Add new run mode
	  wave-matching. Up to now the mode is not very functional, though
	  :)

2005-05-17 12:38  micael

	* testsuite/finite_systems_3d/spinors.test:  *) Added spinors test.

	   Right now the test is done even if the code was compiled for
	  real wavefuntions.
	  Of course, in that case it fails. Maybe this should be changed...

2005-05-17 12:37  appel

	* src/: main.F90, run.F90: Move some more parser calls from
	  global.F90 to run.F90. Otherwise it would not be possible to run
	  e.g. subsystem #1 with PeriodicDimensions = 2 and subsystem #2
	  with PeriodicDimensions = 1.

2005-05-17 12:36  micael

	* src/states.F90:  *) Program should die when trying to use spinors
	  with an executable compiled
	      for real wavefunctions.

2005-05-17 12:13  appel

	* src/: epot.F90, epot_inc.F90, global.F90, run.F90: Avoid
	  pseudopotential stuff during a run if the input file contains
	  OnlyUserDef = yes

2005-05-17 12:05  appel

	* src/crystal.F90: write only warning if zero determinant is found
	  (always the case for 1D and 2D)

2005-05-17 12:01  appel

	* src/Makefile.am: Add hook to include a user defined local
	  Makefile (called Makefile.local) which is not included in the
	  octopus distribution. If the file is provided by the user it'll
	  be sourced by Makefile.am otherwise it is ignored.

2005-05-17 11:55  appel

	* Makefile.am, acinclude.m4, configure.ac, build/acx.m4,
	  build/acx_fft.m4, doc/Makefile.am, doc/pdf/Makefile.am,
	  liboct/Makefile.am, liboct/grammar.c, liboct/oct_f.c,
	  liboct/oct_gsl_f.c, liboct/recipes.c, liboct/varia.c,
	  liboct/varia.h, liboct/write_iter.c, liboct/ylm.c,
	  liboct_parser/Makefile.am, liboct_parser/grammar.y,
	  liboct_parser/gsl_userdef.c, liboct_parser/gsl_userdef.h,
	  liboct_parser/liboct_parser.h, liboct_parser/parse.c,
	  liboct_parser/parse_exp.c, liboct_parser/parser_f.c,
	  liboct_parser/string_f.c, liboct_parser/string_f.h,
	  liboct_parser/symbols.c, liboct_parser/symbols.h,
	  libxc/Makefile.am, share/Makefile.am, share/PP/Makefile.am,
	  share/PP/HGH/Makefile.am, share/PP/TM2/Makefile.am,
	  share/recipes/Makefile.am, share/recipes/en/Makefile.am,
	  share/recipes/es/Makefile.am, share/recipes/it/Makefile.am,
	  share/samples/Makefile.am, share/util/Makefile.am,
	  src/Makefile.am, src/atomic.F90, src/blas.F90, src/broad.F90,
	  src/casida.F90, src/centergeom.F90, src/cf.F90, src/cf_inc.F90,
	  src/complex.F90, src/curv_briggs.F90, src/curv_gygi.F90,
	  src/curv_modine.F90, src/curvlinear.F90, src/derivatives.F90,
	  src/derivatives_inc.F90, src/eigen.F90, src/eigen_cg2.F90,
	  src/eigen_cg3.F90, src/eigen_plan.F90, src/epot.F90,
	  src/epot_inc.F90, src/f.F90, src/f_inc.F90, src/fft.F90,
	  src/fftw2.F90, src/fftw3.F90, src/geom_opt.F90, src/geometry.F90,
	  src/global.F90, src/global.h, src/gs.F90, src/h.F90,
	  src/h_inc.F90, src/h_so.F90, src/hgh.F90, src/hs_from_acc.F90,
	  src/hs_from_mult.F90, src/lasers.F90, src/lcao.F90,
	  src/liboct.F90, src/liboct_parser.F90, src/libxc.F90,
	  src/linalg_adv.F90, src/linalg_basic.F90,
	  src/linalg_basic_blas.F90, src/linear_response.F90,
	  src/linear_response_inc.F90, src/logrid.F90, src/main.F90,
	  src/make_st.F90, src/math.F90, src/math_cg_inc.F90,
	  src/math_inc.F90, src/mesh.F90, src/mesh_create.F90, src/mf.F90,
	  src/mf_inc.F90, src/mix.F90, src/nl_operator.F90,
	  src/oct_test.F90, src/opt_control.F90, src/out.F90,
	  src/out_inc.F90, src/pes.F90, src/pes_mask.F90, src/pes_rc.F90,
	  src/phonon_spectrum.F90, src/phonons.F90, src/poisson.F90,
	  src/poisson1D.F90, src/poisson2D.F90, src/poisson3D.F90,
	  src/poisson_cg.F90, src/poisson_corrections.F90, src/ps.F90,
	  src/pulpo.F90, src/real.F90, src/restart.F90,
	  src/restart_inc.F90, src/rotational_strength.F90, src/run.F90,
	  src/scf.F90, src/specie.F90, src/spectrum.F90, src/spline.F90,
	  src/states.F90, src/states_inc.F90, src/states_kpoints.F90,
	  src/static_pol.F90, src/static_pol_lr.F90, src/stencil_cube.F90,
	  src/stencil_star.F90, src/stencil_variational.F90,
	  src/strength_function.F90, src/string.F90, src/systm.F90,
	  src/td.F90, src/td_calc.F90, src/td_exp.F90,
	  src/td_exp_split.F90, src/td_init.F90, src/td_rti.F90,
	  src/td_write.F90, src/tm.F90, src/undef.F90, src/units.F90,
	  src/unocc.F90, src/v_ks.F90, src/v_ks_inc.F90, src/xc.F90,
	  src/xc_KLI.F90, src/xc_OEP.F90, src/xc_OEP_SIC.F90,
	  src/xc_OEP_inc.F90, src/xc_OEP_x.F90, src/xc_axc.F90,
	  src/xc_functl.F90, src/xc_fxc.F90, src/xc_vxc.F90,
	  src/xyz_adjust.F90, src/xyz_file.F90, src/xyzanim.F90,
	  testsuite/Makefile.am: Add $Id$ tags to most of the files (right
	  below the GPL header). At every commit cvs is replacing these
	  tags with lines of the following form

	   $Id$

	  In this way it is easy to see who was the last person changing
	  the file, which cvs revision the file has and at what date the
	  last change was made.

	  Miguel: Is there a reason why the *.c files in libxc/ don't have
	  a GPL header?

2005-05-12 15:53  appel

	* src/poisson.F90: Setting poisson_solver = -99 in poisson_end.
	  This was the show stopper for the cf%fft bug.  The new
	  multi_subsystem mode is now working properly.

2005-05-12 15:38  acastro

	* testsuite/Makefile.am: In this way, we make sure that the
	  regression_test.pl runs with the proper octopus_whatever. Also,
	  "make check" triggers the test.

2005-05-12 12:23  marques

	* testsuite/: Makefile.am, run_regression.pl,
	  finite_systems_1d/helium.test: Some very small changes in order
	  for the tests to run in my machine. Now if ../src/octopus[_debug]
	  exists, then it is used to run the tests.

2005-05-11 11:13  acastro

	* src/Makefile.am: Compilation was broken when doing "make check".

2005-05-10 15:07  appel

	* testsuite/: Makefile.am, run_regression.pl,
	  finite_systems_1d/helium.test, finite_systems_3d/sodium.test: -
	  adding entry in *.test files to enable/disable a regression test.
	  - installing testsuite files (during make install).	- improving
	  the regression script a bit.

2005-05-10 15:06  appel

	* share/variables: add multi_subsystem to the list of variables

2005-05-10 15:05  appel

	* src/: Makefile.am, broad.F90, casida.F90, cf_inc.F90,
	  curv_briggs.F90, curv_gygi.F90, curv_modine.F90, curvlinear.F90,
	  derivatives.F90, eigen.F90, eigen_cg3.F90, epot.F90, f.F90,
	  fftw2.F90, fftw3.F90, geom_opt.F90, geometry.F90, global.F90,
	  gs.F90, h.F90, hs_from_acc.F90, hs_from_mult.F90, lasers.F90,
	  linear_response.F90, main.F90, make_st.F90, math.F90,
	  mesh_create.F90, mix.F90, opt_control.F90, out.F90, pes.F90,
	  pes_rc.F90, phonons.F90, poisson.F90, poisson2D.F90,
	  poisson3D.F90, restart.F90, rotational_strength.F90, run.F90,
	  scf.F90, specie.F90, states.F90, states_kpoints.F90,
	  static_pol.F90, static_pol_lr.F90, strength_function.F90,
	  systm.F90, td.F90, td_exp.F90, td_init.F90, td_rti.F90,
	  td_write.F90, units.F90, unocc.F90, v_ks.F90, xc.F90, xc_OEP.F90,
	  xc_functl.F90, xyz_adjust.F90, xyz_file.F90, xyzanim.F90: Octopus
	  can now treat several "subsystems" in a single run (a
	  prerequisite for transport, surfaces, etc.). A simple example for
	  the input file in such a run would be

	  --------------------------------- CalculationMode =
	  multi_subsystem fromScratch = yes

	  %SystemLabels "Soup" | "Dessert" | "Sodium" %

	  %SystemRunModes recipe | recipe | gs %

	  %SystemRunOrder 3 | 1 | 2 %

	  %Coordinates	 "Na" | 0 | 0 | -1.54	"Na" | 0 | 0 |	1.54 %
	  DesertSpacing  = 0.3 SodiumSpacing = 0.4 Radius = 8.0
	  ---------------------------------

	  In this case we run a "calculation" for three subsystems. Of
	  course the "Dessert" system will be treated first :). The systems
	  are distinguished by namespace (SystemLabels), e.g. output
	  directories will have the system label as prefix. In the input
	  you can prepend all of the usual variables with a corresponding
	  system label. If no variable with system label is found the
	  fallback will be the bare variable name without prefix (in the
	  above example the same Radius will be used for all subsystems).
	  This ensures also backward compatibility to the input files used
	  so far.

	  In oder to keep the scheme consistent for all variables I had to
	  change the parser calls from

	   loct_parse_*('SomeVariable', ...)

	  to

	   loct_parse_*(check_inp('SomeVariable'), ...)

	  (This is partly the reason for the large number of files I had to
	  touch.) The function check_inp takes care of label prepending and
	  fallback to default values. Please use the function if you
	  introduce new input variables.

	  As you can imagine there are still some problems with the memory
	  management when running in multi_subsystem mode (e.g. Assertion
	  "associated(cf%fft)" failed in line 89 in file "cf_inc.F90").
	  Nevertheless, single subsystems should run as usual (with the
	  usual input file syntax).

2005-05-05 15:05  appel

	* testsuite/Makefile.am: correcting filenames.

2005-05-05 14:54  appel

	* Makefile.am, configure.ac, testsuite/Makefile.am,
	  testsuite/run_regression.pl, testsuite/run_regression.pl.pod,
	  testsuite/finite_systems_1d/helium.test,
	  testsuite/finite_systems_3d/sodium.test: This is a basic
	  infrastructure for Octopus regression testing.  I've written a
	  man page for the Perl script that controls the regression tests.
	  After a make in the testsuite direcory you can read the man page
	  with "man -l run_regression.pl.1" or after you did make install
	  simply by "man run_regression.pl" if your MANPATH ist set
	  properly.

	  To start the regression test type "make regression_test" in the
	  testsuite directory. This will search recursively for files with
	  extension .test and run the corresponding regression for each of
	  them. A summary of the regression test can be found in
	  regression_test.log.

	  If we plan to run the regression tests nightly the cron job could
	  check if there's a FAIL in this logfile and send it to
	  octopus-devel.

	  I've added two simple tests. Please use the -c option of the Perl
	  script to add own tests. This facilitates the generation of tests
	  considerably.

2005-04-28 11:56  marques

	* src/io.F90: Sorry, there was a small bug here.

2005-04-28 11:03  marques

	* src/: broad.F90, casida.F90, geometry.F90, hgh.F90, io.F90,
	  lasers.F90, opt_control.F90, out_inc.F90, pes_mask.F90,
	  pes_rc.F90, phonon_spectrum.F90, phonons.F90, ps.F90,
	  restart_inc.F90, scf.F90, specie.F90, spectrum.F90,
	  static_pol.F90, static_pol_lr.F90, td.F90, tm.F90, unocc.F90,
	  xyz_file.F90: Following the complain of Francesco, action is no
	  longer optional in calling io_open.

2005-04-25 15:16  marques

	* src/: states.F90, td.F90, xc_OEP_x.F90: exact exchange is working
	  (apparently) in parallel. I will have to do a couple more tests
	  tomorrow, as I am getting sometimes some funny behavior.

2005-04-22 17:16  acastro

	* src/xc_KLI.F90: Bug fixed.  The MPI implementation of the KLI did
	  not work with the NAG compiler.

2005-04-22 14:38  acastro

	* src/td_write.F90: NAG compiler emits a segfault when an empty
	  string is passed to the C interface. I tried to figure out why,
	  but I could not, so I decided to put a dash there, which avoids
	  the problem.

2005-04-22 08:54  acastro

	* src/states.F90: Removed one line of code.  The line was, however,
	  absolutely correct, a fine tautology, as in "I am who I am"
	  (God).

2005-04-21 09:14  acastro

	* src/xc_OEP_SIC.F90: Bug fixed.  Now it seems that the SIC/KLI
	  total energy behaves well (the bug did not affect the evolution
	  itself, only the total energy number). There is still an annoying
	  error in the 9th digit or so, but I hope it is only numerical.

2005-04-14 17:39  marques

	* src/xc_OEP_x.F90: There were some conjg that apparently
	  disappeared some time ago.

2005-04-14 14:11  marques

	* src/: v_ks.F90, xc.F90, xc_OEP.F90: Information about the OEP was
	  not being printed to stdout

2005-04-14 13:15  marques

	* src/xc_OEP.F90: Stupid bug fixed.

2005-04-14 11:27  marques

	* src/: poisson2D.F90, poisson3D.F90, v_ks.F90, xc_OEP.F90,
	  xc_OEP_inc.F90: I think the OEP is working now. In any case, it
	  only works for the ground-state (the generalization to TD is not
	  obvious), and you should be careful with the convergence.

2005-04-13 15:58  marques

	* src/: linear_response.F90, linear_response_inc.F90,
	  static_pol_lr.F90, xc_OEP.F90, xc_OEP_inc.F90: some more changes.
	  Still does not converge fast enough for my taste, but I think I
	  understood why.

2005-04-13 12:22  marques

	* src/scf.F90: I forgot to recalculate the energy before printing
	  it...

2005-04-13 10:40  micael

	* src/: restart_inc.F90, td.F90:  *) Bug fixed: each node was only
	  reading the occupations and eigenvalues of the
	      states assigned to it, but the occupations and eigenvalues
	  were all writen by the
	      first node. This means the data writen to the "occs" file at
	  the end of a TD run
	      was wrong.
	   *) The potentials form previous TD iterations were writen by all
	  the nodes. Even if
	      it was not causing any porblem in my machine, I think only
	  the first node should
	      output.

2005-04-13 07:36  marques

	* src/: linear_response.F90, linear_response_inc.F90,
	  static_pol_lr.F90, xc_OEP.F90, xc_OEP_inc.F90: Some more changes
	  in the OEP. But it's still not fully OK.

2005-04-12 14:50  acastro

	* src/: states.F90, states_inc.F90, td_write.F90: Bug fixed.  The
	  calculation of the projection of the TDKS determinant onto the
	  ground-state KS determinant was broken, both in serial and in
	  parallel.

2005-04-12 12:27  acastro

	* src/td_write.F90: Bug fixed.	The calculation of the projection
	  onto the ground state was broken.

2005-04-11 19:07  acastro

	* src/casida.F90: Bug fixed.  The MPI version of the casida file
	  did not compile.  [I have not actually tested that it works, at
	  least now it compiles ;) ]

2005-04-11 18:59  acastro

	* src/casida.F90: Just trying to do the linear response a bit
	  informative in the output.

2005-04-11 16:10  acastro

	* src/: eigen.F90, eigen_cg2.F90, scf.F90, unocc.F90: I changed a
	  little bit the unoccupied mode, to get a more informative output
	  as it runs (I got tired of the way it was done). Also, it no
	  longer does a number of iterations (it does not make much sense
	  to have an iterative procedure inside another iterative
	  procedure). Moreover, now it no longer touches the occupied
	  states.

2005-04-11 10:39  marques

	* share/variables: Having "verbose" at the same time as a variable
	  name and as a parameter was not a good idea ;) I added "_mode" to
	  the parameters.

2005-04-11 10:37  marques

	* src/scf.F90: Octopus now outputs the total energy at every
	  iteration during scf.

2005-04-11 10:14  acastro

	* src/derivatives.F90, src/nl_operator.F90, src/stencil_cube.F90,
	  src/stencil_star.F90, src/stencil_variational.F90,
	  share/samples/Na2: The Octopus Laboratory for Desperate Solutions
	  has produced a modification of the Maragakis et al. variational
	  discretization. It incorporates to the Laplacian a high-frequency
	  filter. This permits to reduce the norm of the Hamiltonian, which
	  facilitates the work of the propagators, and, consequently,
	  speed-up the evolution.  The drawback is that applying a filter
	  is only justified when the problem is well converged with respect
	  to the grid-spacing.

2005-04-08 17:33  acastro

	* src/specie.F90: Bug fixed.  I added defaults for the filter
	  parameters. Otherwise the code crashed when the element was not
	  read from the "defaults" file, and the filtering parameters were
	  not present in the Species block -- if FilterPotentials was set
	  to yes.

2005-04-08 12:07  acastro

	* src/ps.F90: Bug fixed.  This bug showed up only when using TM
	  pseudos with nonlocal components, and the l=1 or higher component
	  was used as local.  It all boiled down to a couple of lines, that
	  I screwed up (sorry!) when I did the filtering stuff. Difficult
	  (and long) to hunt this one, though.

2005-04-07 21:51  marques

	* src/: Makefile.am, linear_response.F90, linear_response_inc.F90,
	  out_inc.F90, static_pol_lr.F90, xc.F90, xc_KLI.F90, xc_OEP.F90,
	  xc_OEP_inc.F90: Full OEP seems to work (at least it converges).
	  However, it needs some clening and some more work to make it
	  faster. Stay tuned for more info.

2005-04-07 17:16  micael

	* share/variables:  *) Added xc-cdft variables.

2005-04-07 14:47  marques

	* src/: Makefile.am, linear_response.F90, linear_response_inc.F90,
	  static_pol_lr.F90, v_ks.F90, xc_OEP.F90: *) Sorry, there was a
	  small bug that make the code not compile *) Moved linear_response

	  Rgarding this reorganization, I would still like to do 2 things
	  1) "upgrade" states_dim to dimensions, and include it directly in
	  sys 2) include also h in sys

	  In this way, the variable sys contains *all* information that has
	  to be passed around in high level routines. Please let me know if
	  you disagree.

2005-04-07 14:28  marques

	* src/h_xc_OEP.F90: Forgot to remove this file. It is now calles
	  xc_OEP.F90

2005-04-07 14:27  marques

	* src/: Makefile.am, casida.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, gs.F90, h.F90, h_inc.F90, libxc.F90,
	  opt_control.F90, phonons.F90, run.F90, scf.F90, static_pol.F90,
	  static_pol_lr.F90, systm.F90, td.F90, td_rti.F90, unocc.F90,
	  v_ks.F90, v_ks_inc.F90, xc.F90, xc_OEP.F90, xc_OEP_inc.F90,
	  xc_axc.F90, xc_functl.F90, xc_fxc.F90, xc_pot.F90, xc_vxc.F90:
	  Big restructuring   *) dependencies in Makefile.am now only
	  include the #includes. More than	this would mean a lot of
	  compilation time.    *) I created the new modules v_ks and
	  xc_OEP. The second is obvious. The	   objective of the first
	  is to hold all information necessary to create       the
	  Kohn-Sham potential. For now, it is missing the external
	  potential.

	  This was done, in order for the OEP to be able to use the
	  linear_response module (S. Kuemmel's algorithm is absically teh
	  same as the calculation of the static polarization.

2005-04-06 18:33  marques

	* libxc/: lca_lch.c, lca_omc.c: LOL! Calculating derivatives is
	  always a hassle, even if only of simple functions ;))) Please
	  recheck them.

2005-04-06 16:54  micael

	* src/: f_inc.F90, h.F90, h_inc.F90, libxc.F90, xc.F90,
	  xc_functl.F90, xc_pot.F90:  *) Octopus can now use the new CDFT
	  functional. This implied some "funny" changes
	      in the xc modules. All of this still needs to be properly
	  tested.

2005-04-06 16:45  micael

	* libxc/: Makefile.am, lca.c, lca_lch.c, lca_omc.c, util.h, xc.h,
	  xc_f.c:  *) Added the Vignale-Rasolt functional for CDFT to
	  libxc. Two parametrizations
	      are available. This has *not* been tested carefully yet.

2005-04-06 16:40  micael

	* src/: mix.F90, scf.F90:  *) Bug fixed. Some time ago all arrays
	  of the form (3, m%np) where changed
	      to the form (m%np, 3). This was not taken into account in the
	  scf and
	      mixing modules.

2005-04-05 17:30  acastro

	* src/td_exp.F90: Some cleaning of the lanczos routine.

2005-04-04 17:06  micael

	* src/: Makefile.am, atoms_magnet.F90:	*) Removed oct-atoms-magnet
	  utility. Some recent changes made it useless.

2005-04-04 16:48  micael

	* src/: derivatives.F90, derivatives_inc.F90, f.F90, f_inc.F90:  *)
	  Added routines to compute the curl of a vector field. For now it
	  only
	      works in real space.

2005-04-04 14:57  acastro

	* src/nl_operator.F90, libxc/mgga_c_tpss.c: [*] A small change in
	  the "nl_operator_operate" subroutines, which, specially in the
	  complex case, seems to speed up things significantly.  But most
	  likely it does so only in some architecutures/compilers. In the
	  case of the Portland compiler for opterons, the speedup is rather
	  spectacular, probably because before the type conversion was very
	  slow (the opteron was running slower that my laptop!) [*] In
	  mgga_c_tpss, some Portland C compilers complained about those
	  array definitions, I think it is more correct now.

2005-04-01 19:53  acastro

	* src/: epot.F90, td.F90, td_init.F90: A first try to speedup the
	  re-generation of the ionic potential for molecular-dynamics
	  simulations, which has shown up to be rather relevant (specially
	  since it is not parallelized). What I have done is the following:

	  (i) The td_type variable now contains an integer,
	  epot_regenerate, which decides when a "fast regeneration" is
	  wanted: every epot_regenerate iterations, the usual "slow
	  regeneration" is done; otherwise, a fast regeneration is done.
	  (ii) This is done by passing an extra optional variable to
	  epot_generate, "fast_generation".  (iii) And what is a "fast
	  regeneration"?, you are probably wondering. Well, in principle it
	  could be anything -- for example just do nothing, just use the
	  previous potential. However, I have been more conservative for
	  the moment, and I have noticed that most of the time seems to be
	  used in figuring out the points in the non-local spheres. So I
	  have removed that part in the "fast regenerations": in those
	  cases, the previous sphere is used directly.	In this way the
	  potential is actually regenerated, the only difference is that
	  maybe some points are missing in the spheres.

	  I have defaulted the input variable (which I have called
	  TDFastEpotGeneration) to one, so that by default nothing changes.

	  For Na2 in my laptop, it reduces the time from 1.00s to 0.34s.
	  This 0.34s is now mainly used in getting the local potential. If
	  more savings are needed, we could think about changing what a
	  "fast regeneration" is.

2005-04-01 17:03  acastro

	* src/: Makefile.am, expokit_inc.F90, math.F90, td_exp.F90,
	  td_rti.F90: After all, I removed the Lanczos expokit
	  implementation, since I do not like their finish criterion. I
	  will leave the expokit routine for dense matrices, though, since
	  that is clearly better than mine.  I have rewritten my own
	  Lanczos routine.  Remember that to profit from the Lanczos
	  routine, one should increase the TDExpOrder (for example, to 20
	  or 30), and increase the time-step.  One should however do a
	  previous small run with a small time step to make sure that it is
	  going allright.

2005-03-31 10:53  acastro

	* src/restart_inc.F90: "/lib/cpp -C" complains when it finds an
	  unterminated ' in a comment. I do not know if this can be avoided
	  with preprocessor options, but in any case probably the best idea
	  is to avoid putting quotation marks in comments.

2005-03-30 19:53  marques

	* src/: casida.F90, h_xc_OEP.F90, td.F90, td_init.F90, xc.F90,
	  xc_OEP_SIC.F90, xc_fxc.F90, xc_pot.F90: Now, both polarized and
	  unpolarized versions of teh xc potential are initialized. This
	  will be needed in casida soon.

2005-03-30 16:34  marques

	* share/variables: Added a variable for casida run_mode

2005-03-30 16:33  marques

	* src/: Makefile.am, casida.F90, excitations.F90, linear.F90,
	  restart_inc.F90, run.F90, unocc.F90, xc_pot.F90: *) excitations
	  is no longer a separated programs, but a run_mode (9) *)
	  excitations.F90 and linear.F90 merged to casida.F90	 I think
	  "linear.F90" was quite misleading.  *) Spring cleaning of casida
	  routines

2005-03-30 13:10  acastro

	* src/xc_OEP_x.F90: Bug fixed.	A conjugate was missing.

2005-03-29 12:18  micael

	* src/Makefile.am:  *) Bug fixed: a filename was mistyped.

2005-03-29 12:09  acastro

	* src/: static_pol_lr.F90, xc_OEP_x.F90: (*) By making use of the
	  new zpoisson_solve for complex functions, one can clean up the
	  code in xc_OEP_x.F90 and save some lines of code.  (*) The code
	  did not compile with --enable-complex because of some lines in
	  static_pol_lr.F90 and xc_OEP_x.F90.

2005-03-29 11:53  micael

	* src/: h.F90, h_so.F90:  *) Spin-orbit is working for uniform
	  grids.

2005-03-29 11:17  micael

	* src/: atoms_magnet.F90, excitations.F90, geom_opt.F90,
	  geometry.F90, gs.F90, opt_control.F90, phonons.F90, scf.F90,
	  states.F90, states_inc.F90, static_pol.F90, systm.F90, td.F90,
	  td_init.F90, td_rti.F90, td_write.F90, unocc.F90:  *) Cleaned the
	  routines to calculate the magnetic moments (total and local).
	   *) Local magnetic moments are now written to static/info file.
	   *) When using non-collinear spin, the total and local magnetic
	  moments are written
	      during the SCF cycle (this helps a lot understanding how the
	  system is converging).
	   *) It is now possible to output the local magnetic moments
	  during the time-propagation.
	   *) Changed the name of some subroutines.

2005-03-29 10:33  marques

	* src/Makefile.am: reference to linear_response_inc.F90 was missing
	  in Makefile

2005-03-28 12:47  acastro

	* libxc/: Makefile.am, lda.c, lda_x.c, xc.h, xc_f.c: A pretty sick
	  performance hack.

	  The idea is the following: instead of calculating the LDA
	  functionals everytime, one can "spline" them at the beginning,
	  and then interpolate every time, since they are very smooth
	  functions. Some comments:

	  (*) The calculation of the LDA exchange and correlation
	  functionals do not take a significant calculation time, *except*
	  if one wants to use the SIC+LDA within the OEP/KLI approximation
	  for a big molecule.  (*) This commit is still experimental, and
	  in fact the code is still exactly the same as it was, if you do
	  not compile adding the LDA_SPEEDUP preprocessor variable (by
	  doing CFLAGS="-O3 -DLDA_SPEEDUP", for example).  So you do not
	  have to worry at all about this for the moment...  I will make
	  sure that it works well and that it makes sense before making it
	  definive.

2005-03-28 11:59  acastro

	* doc/octopus.info, doc/octopus.texi, doc/pdf/octopus.pdf,
	  src/excitations.F90, share/samples/Na2: Little bug fixed.  The
	  variable that fixes the number of unoccupied states is from now
	  on "NumberUnoccStates". I updated the samples file (variables
	  UnoccConv and UnoccMaximumIter are now gone) and the manual.

2005-03-22 23:25  marques

	* src/: Makefile.am, h_inc.F90, linear.F90, linear_response.F90,
	  linear_response_inc.F90, poisson.F90, static_pol_lr.F90,
	  xc_OEP_SIC.F90, xc_OEP_x.F90: first steps into Sternheimer
	  approach.  Now we have a zpoisson_solve. Alberto, would you mind
	  using this function in xc_OEP_x.F90 (as you wre working on sthis
	  stuff recently, it must be fresh in yout mind ;)? It would save
	  at least 30 lines of code.

2005-03-22 17:12  acastro

	* src/: expokit_inc.F90, math.F90, td_exp.F90: Added the zhexpv
	  subroutine of expokit, that considers the case where the matrix
	  is Hermitian, which is faster. In fact, I modified it a little
	  because our matrix is not Hermitian, but anti-Hermitian (i times
	  the Hamiltonian). It works, and is indeed faster.  Now the
	  lanczos method is only working for Hermitian Hamiltonians. I will
	  put back the general mode whenever I have time -- that is why I
	  have left the previous zgexpv subroutine.

	  One can gain significant speed with the Lanczos method over the
	  standard scheme, but only using the proper TDExpOrder and
	  TDLanczosTol, which now only I know how :)) . I will try to make
	  it user-friendly in the future.

2005-03-21 18:14  marques

	* src/Makefile.am: Some reference to fxc.F90 was still around in
	  the Makefile

2005-03-21 15:28  acastro

	* src/xc_KLI.F90: A little performace hack to speed up the
	  calculation of the KLI/OEP scheme.

2005-03-21 01:12  appel

	* src/config.h.in: my cpp didn't like the backtick `

2005-03-21 01:05  appel

	* src/poisson_cg.F90: need to call now explicitely the d(..)
	  version of conjugate_gradients

2005-03-20 20:19  appel

	* src/: math.F90, math_cg_inc.F90: add complex valued version of CG
	  and BiCG solver.

	  (Note: Both work only with hermitean operators. This is a
	  property of  the CG algorithm. A comment on this can be found in
	  chapter 4.1 of  ftp://ftp.netlib.org/templates/templates.ps)

2005-03-20 20:16  appel

	* src/: out.F90, out_inc.F90: add MeshIndex to fuction
	  output_fill_how

2005-03-20 20:12  appel

	* src/mesh_create.F90: box_offset was missing in fuction in_mesh()

2005-03-18 17:30  marques

	* src/: Makefile.am, config.h.in, fxc.F90, linear_response.F90,
	  static_pol.F90, static_pol_lr.F90: Now, also the static
	  polarization calculation uses libxc to get fxc.  In this way I
	  could remove the file fxc.F90.

2005-03-18 09:46  marques

	* src/xc_fxc.F90: I had forgotten this file...

2005-03-17 21:32  marques

	* libxc/xc_f.c: This file was missing from the previous commit.

2005-03-17 21:23  marques

	* src/: atomic.F90, excitations.F90, geometry.F90, hgh.F90, io.F90,
	  libxc.F90, linear.F90, out_inc.F90, specie.F90, tm.F90, xc.F90,
	  xc_functl.F90: *) Updated the libxc interfaces *) Removed
	  "relativistic" LDA *) excitations now uses libxc to get fxc. All
	  LDAs are now available (and	 not only PZ). Also, adding spin
	  now is quite easy, as fxc is spin    dependent (I did not do it,
	  though). I did not do much testing though...

2005-03-17 19:01  micael

	* src/: h.F90, h_inc.F90:  *) Implemented the effective-mass model.
	  It should be usefull to perform
	      quantum dot calculations.

2005-03-17 18:34  micael

	* src/poisson2D.F90:  *=) I think this line was for debuging
	  purposes, so I removed it.

2005-03-17 18:33  marques

	* libxc/lda.c: Just a small rearrangement.

2005-03-17 18:23  marques

	* libxc/: gga_lb.c, gga_pbe.c, lda.c, lda_c_pw.c, lda_funcs.c,
	  lda_x.c, mgga_x_tpss.c, test.c, util.h, xc.h, xc_f.c: *) Removed
	  "relativistic exchange", as, I am not mistaken, the potential was
	  wrong.  *) Added support for LDA fxc. For now, fxc for exchange
	  and Perdew Wang correlation are analytical, while the rest is
	  calculated through finite differences. Honestly, from the tests
	  I've made, I am inclined to believe that it is actually better to
	  get the numerical derivative. (However, I would not throw away
	  the work of a full day, would I ;)

2005-03-17 16:24  acastro

	* liboct/oct_gsl_f.c, src/fftw3.F90, src/liboct.F90, src/math.F90,
	  src/poisson.F90, src/poisson2D.F90, src/poisson3D.F90: I put one
	  FFT Poisson Solver in 2D, by popular demand. It is the "spherical
	  cutoff" method, but in 2D (to use it, just put "PoissonSolver =
	  fft" as usual). I ported it from the quantum dots code of
	  Benasque.

	  It is way faster than the direct summation that we had. The
	  caveat now is that the initialization step (the construction of
	  the Fourier transform of the screened Coulomb interaction) is
	  rather slow (it involves some funny Bessel functions, instead of
	  the easy cosines in 3d). Maybe there is a way to speed that up,
	  but for the moment I will leave it as it is, and only think about
	  that if it is a real problem.

2005-03-17 15:19  appel

	* share/samples/Na2: update sample file

2005-03-17 15:09  appel

	* doc/: octopus.info, octopus.texi: add OutputGnuplotMode and
	  OutputMeshIndex to the manual.

2005-03-17 15:08  appel

	* share/util/: Makefile.am, display_mesh_index.gp: small Gnuplot
	  script to display internal mesh numbering. Set OutputMeshIndex =
	  yes to produce appropriate data files.

2005-03-17 15:05  appel

	* src/: out.F90, out_inc.F90: new output modes

	   - OutputGnuplotMode
	      If set to yes, extra newline characters will be inserted in
	  the output of
	      Plane{X,Y,Z}. This allows to contour the data in Gnuplot.
	  Disturbing line
	      connections of splot are also avoided in this way.

	   - OutputMeshIndex
	      Generates output files of a given quantity (Density, Wfs,
	  ...) which include
	      the internal numbering of mesh points. Since this mode
	  produces large datafiles
	      this is only useful for small meshes and debugging purposes.

2005-03-17 15:00  appel

	* src/io.F90: create user supplied WorkDir if not present (will not
	  harm if WorkDir is already there)

2005-03-15 17:06  acastro

	* src/expokit_inc.F90: The NAG compiler complained about the
	  interface to the DZNRM2 blas function.

2005-03-15 16:42  acastro

	* src/io.F90: Bug fixed. Just a parenthesis missing.

2005-03-15 15:43  marques

	* src/math.F90: It did not compile.

2005-03-15 15:37  marques

	* src/string.F90: Separated out some routines that handled strings.
	  it's cleaner like that.

2005-03-15 15:35  marques

	* src/: Makefile.am, atoms_magnet.F90, broad.F90, excitations.F90,
	  geom_opt.F90, geometry.F90, global.F90, gs.F90, hgh.F90, io.F90,
	  lasers.F90, linear.F90, main.F90, make_st.F90, opt_control.F90,
	  out_inc.F90, pes_mask.F90, pes_rc.F90, phonon_spectrum.F90,
	  phonons.F90, ps.F90, restart_inc.F90, scf.F90, specie.F90,
	  spectrum.F90, static_pol.F90, static_pol_lr.F90, td.F90,
	  td_write.F90, tm.F90, unocc.F90, xyz_file.F90, xyzanim.F90: Added
	  the suggestion of Sergey Lisenkov. There is now an input variable
	  WorkDir that determines where the files should be read/write. For
	  that, (almost) all files now should be opened with io_open, AND
	  NOT with the regular open. io_open takes care automatically of
	  the working directory.

2005-03-15 15:33  acastro

	* src/expokit_inc.F90: This is the file where the expokit routines
	  are included.

2005-03-15 15:31  acastro

	* src/: Makefile.am, math.F90, math_inc.F90, oct_test.F90, run.F90,
	  td_exp.F90, td_rti.F90: The Lanczos algorithm to perform the
	  exponential was not working. In order to put it back, I thought
	  that may be we could rely on the expokit package subroutines,
	  which are, I hope, better and more sophisticated than my own poor
	  man's lines. I removed the code in math_inc that did the
	  exponential of dense matrices, also.	The code is now a bit ugly,
	  but I will polish it as I find out how.

	  The license of expokit does not seem to cause any problem, but I
	  wrote the author, to be polite.

2005-03-14 18:38  acastro

	* src/static_pol_lr.F90: Bug fixed.  The code did not compile in
	  complex mode.

2005-03-14 17:45  marques

	* src/mesh_create.F90: The bug that was annoying Micael is gone. A
	  2 that should be a 3 ;)

2005-03-08 11:53  acastro

	* src/: epot.F90, epot_inc.F90, geometry.F90: The nonlocal
	  projectors that are null (that is, the ones within the TM whose l
	  number is the one chosen as local) are no longer considered.
	  Before they were built and applied everytime, which was a waste
	  of time.  The waste of time was not relevant if these projectors
	  are well localized.  But if one filters them, they are no longer
	  so well localized, and then it is may be significant.

2005-03-08 10:22  acastro

	* share/samples/Na2: The sample Na2 file was thought for the 1.4
	  version.

2005-03-08 09:36  acastro

	* share/variables: Just added some more mnemonics to the variables
	  file.

2005-03-04 18:11  marques

	* src/: eigen_plan.F90, global.F90, mix.F90, run.F90, unocc.F90,
	  xc.F90: Some of the suggestions of Del Marshall.

2005-03-04 18:10  marques

	* src/: global.F90, mesh.F90, mix.F90, restart_inc.F90, scf.F90,
	  td_rti.F90, unocc.F90, xc.F90: Calculation of unoccupied states
	  was not working.  Also added some of the typos and suggestions of
	  Del Marshall.

2005-03-03 19:15  acastro

	* src/: mesh.F90, specie.F90: * In mesh_write_info, a small bug was
	  corrupting the output.  * In specie.F90, I removed the debugging
	  calls from a couple of functions that are called for every mesh
	  point, which is very inconvenient.

2005-03-03 19:06  acastro

	* src/math_inc.F90: Bug fixed.	Since a lot of time (I think july
	  2004) this extrapolation routine was wrong, which caused almost
	  all of the propagators to go wrong.

2005-03-01 19:44  acastro

	* src/xc_OEP_SIC.F90: Bug fixed.

2005-02-28 20:06  acastro

	* src/: h_xc_OEP.F90, xc.F90, xc_KLI.F90, xc_OEP_SIC.F90,
	  xc_OEP_x.F90: Bugs fixed.  [*] The pointer lxc in data type oep
	  is now only real. It should be defined as either real or complex,
	  depending on wether we have real or complex wavefunctions, i.e.:
	  oep%X(lxc), as usual. This little thing is the reason why the
	  time propagation of OEP-functionals was not stable.  (It has
	  taken me months to figure this out...) [*] The arguments in
	  xc_oep_analyzeeigen and xc_oep_spinfactor had a small bug (the
	  intent(out) should be intent(inout)). This was a problem for some
	  compilers only.

2005-02-28 13:35  acastro

	* src/: h.F90, h_inc.F90, h_xc_OEP.F90, mesh.F90, states.F90,
	  states_inc.F90, td.F90, xc.F90, xc_KLI.F90, xc_OEP_SIC.F90,
	  xc_pot.F90: Parallelization of the OEP functionals up to the KLI
	  level (full OEP not yet). The code is now rather ugly, but I will
	  try to clean it up. The parallelization just follows the model
	  that we have not (on states), which means that it is only done in
	  the td part. In fact, it is possible to put this part also in
	  parallel for the ground state part.

2005-02-25 19:42  acastro

	* share/variables, src/Makefile.am, src/cf.F90, src/eigen.F90,
	  src/oct_test.F90, src/poisson.F90, src/poisson3D.F90,
	  src/poisson_cg.F90, src/poisson_corrections.F90: I thought that
	  the FFT methods were enough mess, so I added yet another method
	  ;)

	  In fact it is nothing else that applying the corrections idea
	  that I put for the CG scheme to the FFT methodology. I believe
	  that now this method is the fastest: it does not require any kind
	  of double box. The overall speed depends on the parameter
	  PoissonSolverCGMaxMultipole, which specifies the order of the
	  corrections. It defaults to two.  It only works for finite
	  systems. It works setting PoissonSolver = fft_corrected in the
	  input file. Of course, take it as experimental for the moment...

	  [The reason for doing this is that I am just trying to speed up
	  the calculation of the KLI-SIC staff -- next step is the
	  parallelization of this procedure]

2005-02-24 12:29  acastro

	* src/td_init.F90, doc/octopus-devel.info, doc/octopus-devel.texi:
	  Temporarily disabled the Verlet algorithm, since it does not
	  start or restart properly. The velocity algorithm works fine.
	  Eventually we should put the Verlet algorithm back. Now it emits
	  a warning, and switches to velocity Verlet.

2005-02-23 15:50  acastro

	* src/xc_pot.F90: Bug fixed.  The SIC-OEP-KLI did not work with
	  unpolarized systems because of this line.

2005-02-23 14:39  acastro

	* src/: h.F90, h_inc.F90, xc.F90, xc_OEP_SIC.F90, xc_functl.F90,
	  xc_pot.F90: Some code simplifications.

2005-02-22 13:03  acastro

	* libxc/lda_funcs.c, src/xc_functl.F90: Bug fixed.  A small bug in
	  the definition of the Slater Xalpha potential.  (Before it just
	  added again the excahnge fucntional)

	  Also, I have changed the definition of the alpha constant, to
	  meet the usual definition in the literature:

	  E_{xc}^{Xalpha} = (3/2)*alpha*E_x^{LDA}

	  which means that the Xalpha correlation potential should be
	  defined as:

	  E_{c}^{Xalpha} = ( (3/2)*alpha - 1)*E_x^{LDA}

	  I have set the default to alpha = 1. In any case, the logical
	  thing would be to define this functional as a exchange
	  functional, rather than as a correlation part to be added to the
	  exchange. But it is not worthed to loose too much time with this
	  functional anyway...

2005-02-22 11:21  acastro

	* doc/: octopus-devel.info, octopus-devel.texi, octopus.texi,
	  version.texi: When two texi files use the version.texi file, one
	  should give them different names, it seems. So I called them
	  vers-octopus-devel.texi and vers-octopus.texi. In any case, one
	  does not need them to include them in the cvs tree since they are
	  generated automatically by the mdate-sh script.

2005-02-18 19:25  marques

	* configure.ac, src/Makefile.am, src/global.F90: flush is now
	  performed for the systems that allow it. To get it working with
	  the ifc compiler, I just added in the ./configure
	  FCEXTRALIBS="-lPEPCF90".

2005-02-17 19:31  acastro

	* doc/octopus.info, doc/octopus.texi, doc/pdf/octopus.pdf,
	  share/variables: * I have put the manual of octopus-1.4 into the
	  head version. It is more updated.  * Added the XC variables to
	  variables file. Updated in the manual the section dedicated to
	  the XC -- it was only valid for the 1.4 version.

2005-02-15 20:19  marques

	* share/util/: mf.cfg, mf.net: Added some nice things. Please take
	  a look, and see if it works...

2005-02-15 19:51  acastro

	* src/: xc.F90, xc_functl.F90, xc_pot.F90: The variable ispin is
	  not necessary in xc_functl module; it only needs to know about
	  spin_channels.

2005-02-15 17:08  micael

	* src/: atoms_magnet.F90, eigen.F90, eigen_cg2.F90, eigen_cg3.F90,
	  epot_inc.F90, excitations.F90, geom_opt.F90, gs.F90, h_inc.F90,
	  h_xc_OEP.F90, lcao.F90, linear_response.F90, make_st.F90,
	  opt_control.F90, pes_mask.F90, pes_rc.F90, phonons.F90, scf.F90,
	  states.F90, states_inc.F90, static_pol.F90, static_pol_lr.F90,
	  td.F90, td_calc.F90, td_rti.F90, td_write.F90, unocc.F90:  *)
	  Removed the duplicated data in the states type.

2005-02-15 14:51  acastro

	* src/atomic.F90, src/h.F90, src/h_inc.F90, src/h_xc_OEP.F90,
	  src/libxc.F90, src/xc_functl.F90, libxc/xc_f.c, doc/Makefile.am,
	  doc/mdate-sh, doc/octopus-devel.info, doc/octopus-devel.texi,
	  doc/version.texi, doc/pdf/Makefile.am, doc/pdf/octopus-devel.pdf:
	  I have put the embryo of what could be the octopus developer's
	  guide.  It just contains the description of one module, which is
	  lib_xc, the interface to Miguel's C library that contains the
	  LDA, GGA and mGGA functionals. And in fact it is not even
	  complete.

	  In the way, I have decided to simplify a little bit the interface
	  to the library, so that it is a little bit more user friendly.

2005-02-14 16:31  acastro

	* doc/: Makefile.am, cosine.eps, gaussian.eps, octopus.texi,
	  octosex.eps, octosex.jpg, ramp.eps, img/cosine.eps,
	  img/gaussian.eps, img/octosex.eps, img/octosex.jpg, img/ramp.eps:
	  Moved the in the doc directory to the doc/img directory, where
	  they belong.

2005-02-14 16:26  micael

	* src/: Makefile.am, atoms_magnet.F90:	*) The oct-atoms-magnet
	  utility now works for spin-polarized calculations
	      and is compiled for both real and complex wavefunctions. This
	  means it
	      is also compile with MPI. If someone kows how to fix this,
	  feel free to
	      do it.

2005-02-14 15:43  acastro

	* configure.ac, doc/Makefile.am, doc/octopus.info, doc/octopus.pdf,
	  doc/tutorial.pdf, doc/pdf/Makefile.am, doc/pdf/octopus.pdf,
	  doc/pdf/tutorial.pdf: Some maintainace operations in the doc
	  directory....

2005-02-14 13:11  acastro

	* doc/octosex.eps: Used a better converter program (img2eps) to
	  transform the jpg octosex.jpg to octosex.eps. This way it is one
	  fourth of the size, with the same quality.  I am also doing
	  serious work, in case you are wondering ;)

2005-02-14 12:37  micael

	* src/systm.F90, doc/octopus.info, doc/octopus.pdf,
	  doc/octopus.texi, share/variables:  *) The way the guess
	  magnetization density was set not was very clear. I think now
	      it is better. Also updated the manual.

2005-02-11 20:40  marques

	* configure.ac: We don't really need libtool, and it was giving
	  problems in the cluster in coimbra. So I got rid of it.

2005-02-11 17:41  micael

	* src/h.F90:  *) Bug fixed: some use statements where missing.

2005-02-09 13:49  acastro

	* src/: cf.F90, derivatives.F90, eigen.F90, epot.F90, f.F90,
	  geometry.F90, gs.F90, lcao.F90, math.F90, mf.F90,
	  opt_control.F90, out.F90, out_inc.F90, poisson_cg.F90, pulpo.F90,
	  run.F90, scf.F90, specie.F90, states.F90, static_pol.F90,
	  static_pol_lr.F90, systm.F90, td.F90, td_exp_split.F90,
	  unocc.F90, xyz_file.F90: "Privatization" of most of the modules,
	  in a (futile) attempt to make octopus compile in San Sebastian
	  cluster. Since I think that it is a good practice, I commit it
	  anyway. So do not worry about the large amount of files, it is
	  only use and private or public statementes.

	  Incidentally, I also patched output module so that it would
	  compile when using the 2.96 gcc preprocessor, which is still
	  running in not properly maintained machines (before it did not
	  work when the netcdf stuff was not included)

2005-02-08 18:15  micael

	* src/lcao.F90:  *) Pathscale compiler did not like the array
	  bounds defined like this...

2005-02-04 19:58  acastro

	* src/: geom_opt.F90, gs.F90, h.F90, out.F90, out_inc.F90,
	  phonons.F90, restart.F90, scf.F90, static_pol.F90,
	  static_pol_lr.F90, td.F90: One preprocessor definition in file
	  out_inc.F90 usually translated to very long lines, usually beyond
	  the limit accepted by the Fortran 90/95 standard. Some compilers
	  do not accept this, and so I have removed it.  This means that
	  now there are quite a few more lines of the code.  [Eventually,
	  the subroutines in out_inc could probably be simplified]

	  In the way, I have "privatized" more modules (that is why so many
	  files are changed, but it is just "use" statements)

2005-02-03 20:17  acastro

	* doc/Makefile.am: Bug fixed.  The compilation attempted to
	  regenerate the pdf, by making texi2dvi -pdf octopus.dvi and it
	  failed (texi2dvi -pdf cannot handle figures properly).  The pdf
	  should be fixed in the distribution, not made at compile time.

2005-02-02 04:07  appel

	* liboct/.cvsignore, libxc/.cvsignore: now we are complete.

2005-02-02 04:02  appel

	* .cvsignore, build/.cvsignore, debian/changelog, debian/control,
	  src/.cvsignore: adding cvsignore files to get a proper update
	  list

2005-02-01 18:55  micael

	* src/: epot.F90, epot_inc.F90, geom_opt.F90, h.F90, h_inc.F90,
	  lasers.F90, phonons.F90, run.F90, static_pol.F90, td.F90,
	  td_calc.F90, td_exp_split.F90, td_rti.F90, td_write.F90:  *) Some
	  cleaning and reorganization of the external fields.
	   *) Added the interaction between the external static magnetic
	  field and the spin.

2005-02-01 14:07  marques

	* liboct_parser/gsl_userdef.c, src/h.F90: heaviside function is now
	  properly defined xc is also defined for 1D

2005-02-01 03:04  appel

	* debian/: README.Debian, changelog, control, copyright, dirs,
	  rules: update debian directory. package building is now possible
	  for i386 and amd64.

2005-02-01 03:03  appel

	* liboct_parser/: Makefile.am, gsl_userdef.c, gsl_userdef.h,
	  symbols.c: add heavyside step function (useful for Kronig-Penney
	  potentials).	user defined species can now contain something like
	  "-step(-r+1)" in the inputfile.

2005-02-01 03:01  appel

	* src/Makefile.am: - add support for exuberant ctags
	  (http://ctags.sourceforge.net).  - actually pass user defined
	  CPPFLAGS to the preprocessor.

2005-02-01 03:00  appel

	* src/states_kpoints.F90: - correct parser calls.  - add
	  push_sub()/pop_sub() calls.

2005-02-01 02:59  appel

	* src/mesh_create.F90: fix parser calls for box shape
	  PARALLELEPIPED (code wasn't running with this shape anymore).
	  add  possibility to shift the simulation box away from the
	  origin. the shifts are read from the block BoxOffset.

2005-02-01 02:57  appel

	* src/mesh.F90: add  box_offset(3) to mesh_type. the array contains
	  shifts of the origin in the respective direction.

2005-02-01 02:56  appel

	* src/h.F90: LDA in 1D is not implemented. stop the code if the
	  user tries to run with NonInteractingElectrons = yes.

2005-02-01 02:56  appel

	* src/global.F90: make debug stack more readable.

2005-02-01 02:55  appel

	* src/: epot.F90, specie.F90: add push_sub()/pop_sub() calls.

2005-01-31 12:25  marques

	* src/excitations.F90: Mismatch in filename (the same as the bug
	  found by Del Marshall in 1.4)

2005-01-31 12:23  marques

	* src/run.F90: Bug found by Del Marshall fixed.

2005-01-28 15:08  marques

	* share/util/: mf.cfg, mf.net: Small bug fixed.

2005-01-27 20:07  marques

	* Makefile.am, src/static_pol_lr.F90: RPMs are now generated in my
	  home directory, and not in /usr/src/redhat

2005-01-27 19:19  marques

	* build/octopus.spec.in: The right way to make rpms in the main
	  branch too.

2005-01-27 19:16  marques

	* build/octopus.spec.in: This is the sane way of making rpms.

2005-01-27 19:12  marques

	* share/util/: mf.cfg, mf.net: Added some neat stuff to be used
	  with periodic systems. Basically you can replicate the unit cell,
	  and "cycle".	Note: you *have* to upgrade to the new version of
	  the chemistry package in order to use this program.

2005-01-27 00:41  acastro

	* doc/: Makefile.am, tutorial.pdf: By popular demand, I setup to
	  start writing a tutorial. I have placed it in the doc directory
	  (tutorial.pdf). It is installed, along with octopus.pdf, in
	  SHARE/octopus/doc. Some comments: (*) As it is obvious if you
	  look at it, I just committed what I have up to now (8 pages),
	  there is still some way to go.  (*) I have just realized that
	  there was already a tutorial.tex. I will merge both materials,
	  since there was interesting stuff there (notably the Helium atom
	  model).  (*) The tutorial is based in the 1.4 version. After
	  completing it, I will update it for the new version -- or for the
	  current state of the new version. One reason for this is that the
	  first people that will use it are using the 1.4 version.

2005-01-24 17:06  acastro

	* doc/: Makefile.am, octopus.dvi, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.pdf: [*] Removed doc/octopus-info-1/2/3
	  which were old and doing nothing there.  [*] Removed octopus.dvi
	  in favour of octopus.pdf, which is a better format.  [*] Changed
	  the doc/Makefile.am so that on installation, a directory called
	  SHARE/octopus/doc is created with the documentation -- now just
	  octopus.pdf is copied there. The idea is that after the "make
	  install" process, every useful stuff should be installed and one
	  can just delete the sources.

2005-01-24 12:26  acastro

	* src/: curv_briggs.F90, curv_gygi.F90, curv_modine.F90,
	  derivatives.F90, eigen.F90, epot.F90, f.F90, fxc.F90,
	  geometry.F90, global.F90, h.F90, h_inc.F90, lasers.F90, lcao.F90,
	  libxc.F90, linear.F90, linear_response.F90, main.F90, mesh.F90,
	  mf.F90, nl_operator.F90, poisson.F90, poisson_cg.F90, run.F90,
	  scf.F90, states.F90, systm.F90, td.F90, td_exp_split.F90,
	  td_rti.F90, units.F90, xc.F90, xc_functl.F90, xyz_adjust.F90,
	  xyz_file.F90: Don't get scared, the changes are small, although
	  they affect a lot of files.

	  [*] Whenever a module is not declared public, all the modules
	  that it uses are passed to the caller. I think that this should
	  not happen, and that a good programming practice should be
	  declaring all modules as private, and then explicitly declaring
	  what types, variables and procedures are public. In that way, a
	  caller to a module has access to those explicitly public things,
	  and not to the modules that the module itself uses. I have done
	  so with a few modules, and as a consequence I have had to include
	  quite a few use statements in other modules.	I believe that in
	  this way the compilers will not get confused so often, and
	  hopefully the "Internal compiler error" message should not appear
	  that often.  A first consequence is that the size of the octopus
	  executable in my laptop is reduced from 3500mb to 2800mb.  [I
	  have not gone all the way with this idea; lots of modules are
	  still public by default.]

	  [*] Some aesthetic changes in the way the some messages are cast.

2005-01-22 18:40  acastro

	* src/: derivatives.F90, derivatives_inc.F90, nl_operator.F90,
	  poisson.F90, poisson3D.F90, poisson_cg.F90: The CG_CORRECTED
	  (PoissonSolver = 5) method is now able to work with curvilinear
	  coordinates. The code will stop and complain if any other Poisson
	  solver is to be used with curvilinear coordinates.

	  However, it does not work with Gygy scheme, only with Modine's
	  and Brigg's. I do not know why, but I thought it was about time
	  to commit. In any case, I think there is a bug in the Gygy's
	  implementation (the grid generated for one single atom in the
	  center looks weird, with higher density of points in the border
	  of the mesh).

2005-01-21 20:43  acastro

	* src/oct_test.F90: Emptied the oct-test program.

2005-01-20 19:07  acastro

	* src/: poisson.F90, poisson3D.F90, poisson_cg.F90: Major
	  modifications in the new (and incidentally, also in the old one)
	  CG Poisson solver to make it *much* faster. The cost is the use
	  of more memory, and some overhead in the initialization part.
	  However, I think it is necessary if we want to run octopus with
	  CG at realistic speed.  Moreover, now two more variables may be
	  set: PoissonSolverCGMaxMultipole (default = 4), which is the
	  maximum order    of the multipole correction for the new method,
	  and of the multipoles    to consider to build the multipole
	  expansion for the old method; PoissonSolverCGThreshold (default =
	  1.0e-5), which is the criterion to	stop the CG procedure.
	  Until we are not done modifying the Poisson solver, I will not
	  update the manual.

2005-01-20 15:47  acastro

	* src/poisson_cg.F90: Both CG Poisson solvers now make use of the
	  conjugate_gradients procedure in math module, instead of making
	  their own. Note that the change of base to allow for curvilinear
	  coordinates is not yet activated (it is trivial, though). If I
	  find that our traditional CG solver is slower than the new one, I
	  will just remove it. I have to make some benchmarks, though.

	  Eventually, the CG thing should be done with preconditioning,
	  which in a real space scheme basicly means multigrid, I think.

2005-01-20 13:38  acastro

	* src/: Makefile.am, math.F90, math_cg_inc.F90: Added a procecudre
	  to the math module (in file math_cg_inc.F90) that solves a
	  general Ax=b problem through the conjugate gradients. In fact,
	  two procedures with a common interface, either for symmetric or
	  non-symmetric A. The form of A is passed through an interface.

	  Essentially, it is the Numerical Recipe without the possibility
	  of using a preconditioner. This could be easily added.

2005-01-14 17:11  marques

	* src/: linear_response.F90, static_pol.F90, static_pol_lr.F90: For
	  what I can see, the linear response static polarizability now
	  works.  I tested it with Na2 only, however ;)

2005-01-12 16:56  micael

	* liboct/config.h.in, src/td.F90:  *) Bug fixed: when restarting a
	  td calculation, wrong iteration number and
	      time were writen to the output files like the multipoles
	  file.

	  This should also be fixed in the 1.4 version.

2005-01-10 18:10  marques

	* src/out_inc.F90: patch sent by Lasse Tunturivuori to solve some
	  small issue with pgi compiler.

2005-01-10 17:26  marques

	* src/: geometry.F90, mesh_create.F90, systm.F90: Bug reported by
	  Qin Rao (RandomVelocityTemp not working) fixed.

2005-01-10 17:03  marques

	* src/: geometry.F90, mesh_create.F90, specie.F90: small bug fized:
	  the default spacing was not correct, as there was a j that should
	  be an i. I took the opportunity to clean a little bit the routine
	  read_from_default_file

2005-01-10 15:45  marques

	* share/samples/bench-gs: [no log message]

2004-12-17 11:22  acastro

	* src/nl_operator.F90: I added a subroutine call
	  nl_operator_transpose that gives back the transpose of a
	  non-local operator (the ones that define the differential
	  operators). Obviously it is completely useless for rectangular
	  regular grids, where these operators are symmetric.  [It is
	  needed for the generalized conjugate gradients routine that
	  solves linear systems with non-symmetric matrices, which I do not
	  commit because it is not working yet]

2004-12-15 16:01  marques

	* libxc/mgga_c_tpss.c, libxc/mgga_x_tpss.c, src/xc_pot.F90: A
	  couple of bugs solved, but I still get non-sense. This functiona
	  is too sensitive to numerical erors in the calculation of
	  derivatives, I think...

2004-12-09 17:34  micael

	* src/td.F90:  *) Another bug in the TD restart. The density and
	  the xc-potential were not computed
	      after reading the wavefunctions. This means the first line of
	  the multipoles file
	      was wrong as well as the propagation from iteration 0 to 1
	  (and probably some other
	      things).

2004-12-09 16:26  micael

	* src/liboct.F90:  *) Bug fixed. Nothing special...

2004-12-08 19:01  acastro

	* src/poisson_cg.F90: Just code cleaning.

2004-12-08 17:41  acastro

	* liboct/oct_gsl_f.c, share/variables, src/liboct.F90,
	  src/oct_test.F90, src/out.F90, src/poisson.F90,
	  src/poisson3D.F90, src/poisson_cg.F90: [1] Bug fixed.      For
	  some reason, in the CG method to solve Poisson's equation, the
	    mult variable was allocated to 2*l+1 instead of (l+1)**2, as it
	  should.      Amazingly, it did not seg-fault, and was not causing
	  big problems, at	least with the Intel compiler.	[2] Added
	  another CG method to solve Poisson's equation, cg_corrected
	  (probably	I will change the name eventually, or even remove
	  the previous method	  completely if I see that it is not
	  worthed). It does not require the	compuation of ghost points,
	  but substracts an auxiliary charge that matches     exactly the
	  multipoles of the problem density (Eq. 6 of our Can J. Phys 81,
	    15 (2003)).

	  I have to work on the performance on the method, but for the
	  moment I will move on to the problem of using improving the
	  conjugate gradient method for non-Hermitian Laplacians...

2004-12-08 15:29  acastro

	* liboct/ylm.c: Bug fixed.  This bug was already warned by Eugene.
	  I made some week ago some tests, and I did not find it (it is a
	  factor sqrt(2) that is only missing for l>2, m.ne.0). Now I think
	  that it is correct.  I am still not sure wether we should put a
	  (-1)^m "Condon-Shortley" factor, or it is already included. In
	  any case, I think that it is an irrelevant phase.

2004-12-07 21:40  marques

	* src/: Makefile.am, h_inc.F90, h_xc_OEP.F90, libxc.F90, xc.F90,
	  xc_OEP_SIC.F90, xc_functl.F90, xc_pot.F90: meta-GGA "runs" but
	  giove non-sense!

2004-12-07 21:40  marques

	* libxc/: mgga.c, mgga_c_tpss.c, xc_f.c: MGGA "runs" but gives
	  non-sense!

2004-12-07 16:46  marques

	* libxc/: gga_pbe.c, mgga.c, mgga_c_tpss.c, test.c, util.h: Bug
	  fixed in correlation PBE (yes, there was a serious bug there)
	  TPSS correlation is apparently working for spin-unpolarized
	  systems. I still did not check the spin-polarized functionals
	  (neither x nor c).

2004-12-06 16:53  acastro

	* src/linalg_adv_lapack.F90: Bug fixed.  Description: apparantely,
	  subroutines ddet and zdet did not give the proper sign.

2004-12-06 12:43  acastro

	* Makefile.am, configure.ac, src/Makefile.am, src/oct_test.F90:
	  Added the first step towards building a test suite for octopus.
	  Currently, typing "make check" will launch a couple of empty
	  steps that will always succeed. This gives the executer a
	  reassuring feeling of comfort but it is completely useless.
	  Eventually we should fill the scripts in the tests directory.
	  Probably we will also need some perl scripts to analyze results.
	  Moreover, make check will build an empty program "oct-test" that
	  it is in turned launched by test2.sh. This I have done because
	  for developing it is nice to have an auxiliary program for
	  testing purposes.

2004-12-04 15:20  acastro

	* share/samples/Na2, src/libxc.F90, src/xc_functl.F90: Bug fixed.
	  One should pass a POINTER_SIZE to xc_info_refs, I think, so that
	  it also works in 64 bits machines.  The expert in C should check
	  this, however.

2004-12-04 12:51  acastro

	* src/: epot.F90, fftw2.F90: Bugs fixed [*] The fftw2 interace had
	  a bug (from time to time it is worth to try to compile with FFTW2
	  to keep compatibility) [*] A compiler bug in the Intel compiler:
	  Intel(R) Fortran Itanium(R) Compiler for Itanium(R)-based
	  applications Version 7.1, Build 20030814 did not permit compiling
	  an apparently harmless line in epot.F90. A stupid change makes it
	  work, Gods know why.

2004-12-03 18:13  micael

	* src/td.F90:  *) TD calculation restart was not working.

2004-12-03 17:02  micael

	* src/td_write.F90:  *) I do not know why, but this change solved a
	  segfault.

2004-12-03 16:53  micael

	* src/restart_inc.F90:	*) Another bug fixed.

2004-12-02 15:53  micael

	* src/gs.F90:  *) Bug fixed: a routine call was missing the X()
	  preprocessor directive.

2004-12-01 17:31  micael

	* src/h_inc.F90:  *) Bug fixed: code was not compiling with complex
	  wavefunctions.

2004-12-01 01:05  marques

	* libxc/: gga_lb.c, gga_pbe.c, lda_c_amgb.c, lda_c_pw.c,
	  lda_c_pz.c, lda_c_vwn.c, lda_funcs.c, lda_x.c, mgga.c,
	  mgga_c_tpss.c, mgga_x_tpss.c, test.c, util.h, xc.h, xc_f.c: code
	  now compiles and runs with -ansi flag. Hope this solves your
	  problems, Alberto.

2004-11-30 20:05  micael

	* src/: td.F90, td_init.F90:  *) The states should be distributed
	  among the nodes before allocating and reading
	      the wavefunctions.

2004-11-30 20:02  micael

	* src/states_inc.F90:  *) Somehow I did not commit this change
	  during the last bug fix to this file.

2004-11-30 20:00  micael

	* src/restart_inc.F90:	*) Bug fixed. Reading of the occupations
	  and eigenvalues was not done when
	      using MPI.

2004-11-29 16:48  micael

	* src/eigen_plan.F90:  *) Just some cleaning of the lanczos
	  routine.

2004-11-29 13:01  micael

	* src/eigen.F90:  *) This change seems to make the filter of the
	  lanczos eigensolver work. At
	      least it looks to be consistent with the previous version of
	  the code
	      (before the implementation of the curvilinear coordinates).

2004-11-23 18:20  micael

	* src/: eigen.F90, eigen_plan.F90:  *) Fixed the lanczos solver.
	  Everything seems to be working, but I am not sure
	      I fixed the filter properly. Could someone who really
	  understands the way the filter
	      works look at it, please?
	      The solver should also work with curvilinear coordinates now.

2004-11-23 18:14  micael

	* src/linalg_adv_lapack.F90:  *) Arguments of routines calling
	  LAPACK where defined like this a(:,:)
	      to avoid	arrays to be copied into memory. Unfortunately,
	  since these routines
	      call the LAPACK passing the first element of the array those
	  copies may be
	      necessary, like when passing parts of arrays to the routines
	  defined in this module.

2004-11-23 16:53  marques

	* libxc/: Makefile.am, mgga.c, mgga_c_tpss.c, mgga_x_tpss.c,
	  test.c, util.h, xc.h: I am implementing the TPSS meta-GGA. The
	  exchange part is probably working, the correlation is still a
	  first draft.

2004-11-23 12:24  micael

	* src/states_inc.F90:  *) Bug fixed in the calculation of the
	  magnetization using MPI.

2004-11-19 16:40  marques

	* src/: libxc.F90, xc_OEP_x.F90: Exact exchange cleaned. The double
	  sum over states is now done one for j>=i and not for all i,j.
	  This should leed to a factor of two speed up for large systems.

2004-11-19 15:21  marques

	* src/xc_functl.F90: Forgot this file...

2004-11-19 15:18  marques

	* src/: Makefile.am, h.F90, h_inc.F90, h_xc_OEP.F90, libxc.F90,
	  xc.F90, xc_KLI.F90, xc_OEP_SIC.F90, xc_OEP_x.F90, xc_pot.F90:
	  Apparently, SIC-KLI is working again (some years after the last
	  time it worked).  I had to change a great deal in the xc part,
	  and there were a couple of bugs...

2004-11-18 12:47  micael

	* src/liboct.F90:  *) Small bug fix.

2004-11-11 17:45  marques

	* src/ps.F90, configure.ac: Small bug in ps.F90, and changes to
	  configure.ac to make it compile under FC3

2004-11-10 19:31  acastro

	* share/PP/defaults: For some reason that I have not discovered
	  yet, the filtering only eliminates the eggbox effect if lloc=0.
	  So I have changed the defaults so that all elements have that
	  default. I will try to find out why...

2004-11-10 18:00  acastro

	* src/: hgh.F90, ps.F90, specie.F90, tm.F90: Added a subroutine
	  that recalculates the radius of the non-local projector sphere.
	  This needs to be done after filtering, because cutting
	  frequencies in Fourier space implies extending the function in
	  real space. Once that this error is corrected, the filtering
	  seems to be working fine (the eggbox effect of, for example, the
	  formaldimine molecule, is almost eliminated).  Now I have to see
	  how this influences the conservation of energy in an
	  evolution....

2004-11-10 13:28  acastro

	* src/: geometry.F90, ps.F90, specie.F90, systm.F90: Reshuffled a
	  bit the way the debugging information is organized. I still have
	  to get rid of the "pseudos" directory (all information should go
	  to "debug"). Now there is a debug/geometry, and a
	  debug/geometry/X, for each specie X. Eventually, we can put a
	  debug/mesh, etc.

2004-11-08 17:18  acastro

	* share/PP/defaults, src/geometry.F90, src/ps.F90, src/specie.F90:
	  Added some defaults for the filtering parameters in default file.
	  Added the corresponding variables in specie data type, and
	  modified ps_filter and specie_filter in order to use them.  Still
	  some cleaning and testing needs to be done, but essentially
	  everything is done. Now we just have to put proper values in
	  default value (now every element has the same values, those that
	  are good for Carbon).

2004-11-08 16:40  acastro

	* src/: geometry.F90, main.F90, specie.F90: [1]. Changed the way in
	  which the information about the species is read.  In the way that
	  it is done now, part of the information may be read from the
	  Species block, and whatever is missing is read from the default
	  file. That is, one can write: %Species "Na" | 23.0 | tm2 % and
	  the lmax and lloc are read from the default file. I have done
	  this so that the parameters that define the filtering are placed
	  in the default file, and the user does not have to worry about
	  such gory details. But in case of necessity, these can be also
	  placed in the input files.

	  [2]. When in debugging mode, a directory called "debug" is
	  created. There some of the variables should be damped for
	  debugging purposes. I will move the "pseudos" directory in
	  following commits. Now part of the contents of each specie
	  variable is written there.

2004-11-05 19:00  acastro

	* src/: epot.F90, epot_inc.F90, ps.F90, specie.F90: 1. Now the
	  input variables LocalPotentialSpace and NonlocalPotentialSpace
	  are no longer used. If the problem is a finite system, the real
	  space is always used. The eggbox effect may be eliminated with
	  the filtering. If the problem is periodic, the filtering is also
	  done, but then one has to use Fourier space nevertheless.

	  2. The routine get_fourier_local_tm is now gone, in favour of the
	  call to the spline library.

	  3. vlocal no longer exists, in favor of vl, which now holds the
	  local part of the pseudopotential, vl(r), and not r*vl(r)+z. The
	  localized part of the local part is now in ps%vlocalized, and is
	  vl(r) + ps%z_val*erf(ps%a_erf*r).  Its Fourier transform is held
	  in ps%vlocal_f.

2004-11-04 17:13  acastro

	* src/systm.F90: Stupid bug fixed.  Thanks, Miguel.

2004-11-04 16:49  acastro

	* src/: ps.F90, specie.F90: Now the derivatives of the
	  pseudopotential functions are done outside ps_init, so that they
	  can be redone after filtering. Also, they are done now thought
	  the spline library, and not throught the function
	  "derivate_in_log_grid" of logrid module. It seems that it is
	  actually even a bit better.

2004-11-04 16:01  acastro

	* src/ps.F90: Bug fixed.  Description: The l=0 nonlocal TM
	  pseudopotential functions had some error for small values of r
	  which was very large in the case of the derivative (although
	  negligible in the function itself). As a result, if a nucleus
	  traversed the vicinity of a mesh point, the force due to that
	  component had probably a big error.  In fact, the error was a bad
	  sampling of the atomic pseudowavefunctions, used to build the KB
	  projectors themselves.  Now I think that it is OK, and cleaner
	  (except for an add-hoc "extrap" function which should be
	  generalized and moved to the math module sometime).  I am still
	  not very confident with the forces nearby the mesh points, I have
	  observed some weird things.

2004-11-04 12:48  rozzi

	* src/states_kpoints.F90: simple name changes for compatibility to
	  the new crystal module

2004-11-04 12:44  rozzi

	* src/math.F90: forgot this files with a couple of functions needed
	  in the crystal module

2004-11-04 09:55  rozzi

	* src/crystal.F90: just some formal cleaning

2004-11-04 09:51  rozzi

	* src/epot.F90: new limit for G_x=0 in the cylindrical finite
	  cutoff

2004-11-04 09:47  rozzi

	* src/: poisson.F90, poisson3D.F90: bug fixed in the new cutoff

2004-11-04 09:44  rozzi

	* src/math.F90: some debug info was left over

2004-11-04 09:38  rozzi

	* src/crystal.F90: small bug fixed

2004-11-03 09:49  acastro

	* liboct/oct_gsl_f.c: Forgot to commit this file.

2004-11-03 09:48  acastro

	* src/spline.F90: Added a function to calculate derivatives of
	  functions in the spline "representation." This is for the forces.
	  However, these derivatives do not coincide with the ones
	  calculated directly on the logarithmic grid, and I remember that
	  for a long time we had problems related to this ("bumps" in the
	  dynamics). I will make sure that they work properly until I use
	  them.

2004-11-01 16:53  acastro

	* src/: geometry.F90, ps.F90, specie.F90, spline.F90, systm.F90:
	  The basic machinery for the filtering. But here all the constants
	  are hard-coded, and not necessarily good for all elements.  I
	  will have to add them maybe to the default file, and allow the
	  user to fine tune them.

2004-11-01 15:22  acastro

	* src/spline.F90: Forgot to implement the interface to the Bessel
	  filter.

2004-11-01 15:10  acastro

	* liboct/oct_gsl_f.c, src/liboct.F90, src/spline.F90: Implemented a
	  Bessel-transform in the spline module, to be able to filter
	  non-local psedopotentials properly.

2004-10-29 13:54  acastro

	* src/mesh.F90: Added a function that returns the Gmax of the grid.
	  I guess this function will have to be more complicated for
	  curvilinear grids, but for the moment it is enough.

2004-10-29 13:13  acastro

	* src/: ps.F90, spline.F90: Improved the way the pseudopotential
	  functions are printed for debugging.	Now it always prints the
	  Fourier transform of the functions, to analyze the frequencies.

2004-10-28 22:34  marques

	* libxc/: gga_pbe.c, lda_x.c, util.h, xc_f.c: several bug fixes.

2004-10-28 22:33  marques

	* src/: Makefile.am, h_inc.F90, h_xc_OEP.F90, libxc.F90, xc.F90,
	  xc_GGA.F90, xc_LDA.F90, xc_OEP_SIC.F90, xc_pot.F90: Big clean-up.
	  Only the OEP functionals are missing. In any case, a quick look
	  at the EXX revealed to me that the guy who programmed it (me) was
	  probably drunk! I will do some cleaning in the next days... let's
	  see if it'll work ;)

2004-10-27 20:35  marques

	* share/variables: Another variable to use LB94.

2004-10-27 20:34  marques

	* libxc/: Makefile.am, gga.c, gga_lb.c, util.h, xc.h, xc_f.c: added
	  lb94 functional. As we all know this functional ahs problems, and
	  I am really not sure if these problems are handled correctly.

2004-10-27 20:33  marques

	* src/: Makefile.am, atomic.F90, libxc.F90, vxc.F90, xc.F90,
	  xc_GGA.F90: LB94 is now in the xc library, so the ugly file
	  vxc.F90 could be obliterated.

2004-10-27 17:03  marques

	* libxc/: Makefile.am, gga.c, gga_pbe.c, lda.c, lda_c_amgb.c,
	  lda_c_pw.c, lda_c_pz.c, lda_c_vwn.c, lda_funcs.c, lda_x.c,
	  util.h, xc.h, xc_f.c: There is now a mechanism to provide
	  informations about the functionals being used.

2004-10-27 17:02  marques

	* src/: atomic.F90, libxc.F90, xc.F90: We now have a nice info
	  output for the xc.

2004-10-27 15:17  rozzi

	* src/: epot.F90, math.F90, poisson.F90, poisson3D.F90, ps.F90: *)
	  A new cutoff, called cylindrical finite, is added *) the cutoff
	  length and the G vectors are passed to the cutoff functions,
	  instead of their product *) The a_erf parameter, used in the
	  subtraction of the long range tail of the potential, is now part
	  of the ps structure

2004-10-26 22:12  marques

	* src/: atomic.F90, libxc.F90, vxc.F90, xc.F90, xc_GGA.F90,
	  xc_pot.F90: PBE is now used from libxc.

2004-10-26 22:12  marques

	* libxc/: Makefile.am, gga.c, gga_pbe.c, lda.c, util.c, util.h,
	  xc.h, xc_f.c: First support for GGAs.  Added PBE.

2004-10-26 22:11  marques

	* share/variables: Added variables for PBE.

2004-10-26 18:39  marques

	* src/: xc_GGA.F90, xc_LDA.F90: When using a LDA exchange and a GGA
	  correlation (or vice-versa) there were problems.

2004-10-26 14:19  rozzi

	* src/Makefile.am: Compile out before poisson to enable
	  output_function also in this module

2004-10-26 14:18  rozzi

	* src/: f_inc.F90, out_inc.F90, restart.F90, states.F90,
	  states_inc.F90: Small changes that make the -C option happy when
	  st%nik > 1

2004-10-25 10:23  acastro

	* src/spline.F90: Improvement on module spline.F90, in order to
	  contain functions that Fourier transform and filter functions --
	  the application of this to the pseudopotentials I will commit
	  later, when I am done with the tests--

	  For a change, I have written a big header with documentation,
	  which is why there are so many lines. Maybe we should agree on a
	  consistent way to write documentation hereafter.

2004-10-22 16:47  acastro

	* src/restart.F90: Bug fixed.  Description: when re-loading the
	  functions in a restart, the subroutine fill in restart_load
	  should put random function in the functions that it does not find
	  in the restart directory. It did not, and now it does.

	  However it is always better to modify the file restart_gs/data,
	  in order to get all the functions needed, for example copying
	  previous function.  One example: if you have done an unpolarized
	  with two electrons, your data file will look like:

	  #	#kpoint 	   #st		  #dim	  filename
	   eigenvalue[a.u.] %Wavefunctions	      1  |	      1  |
		    1  | "000001" |  -0.115192359239688 %

	  In order to restart a spin-polarized calculation, the best way is
	  to duplicate the orbital, and modify data to look like:

	  #	#kpoint 	   #st		  #dim	  filename
	   eigenvalue[a.u.] %Wavefunctions	      1  |	      1  |
		    1  | "000001" |  -0.115192359239688 	   2  |
		 1  |		 1  | "000001" |  -0.115192359239688 %

	  In this way the function stored in 000001 is used twice, which is
	  better than just putting random crap in the file.

2004-10-21 17:01  marques

	* libxc/util.c: removed an erraneous #include

2004-10-20 19:09  marques

	* liboct/oct_gsl_f.c: Cleaned the code of Alberto. Please check if
	  it's working.

2004-10-20 18:54  marques

	* Makefile.am, configure.ac: These files also have to be updated.

2004-10-20 18:46  marques

	* src/libxc.F90: Forgot this file that interfaces the libxc
	  library.

2004-10-20 18:41  marques

	* share/variables, libxc/xc_f.c, src/Makefile.am, src/atomic.F90,
	  src/atoms_magnet.F90, src/excitations.F90, src/geom_opt.F90,
	  src/gs.F90, src/h.F90, src/make_st.F90, src/opt_control.F90,
	  src/out_inc.F90, src/phonons.F90, src/restart_inc.F90,
	  src/scf.F90, src/states_inc.F90, src/static_pol.F90,
	  src/static_pol_lr.F90, src/td.F90, src/td_write.F90,
	  src/unocc.F90, src/vxc.F90, src/xc.F90, src/xc_LDA.F90,
	  src/xc_OEP_SIC.F90, src/xc_pot.F90: *) Changed (again) the
	  restart files because:    1) There was a bug reading the
	  occupations and the eigenvalues    2) It did not work for
	  spin-polarized calculations

	  *) Added support for the libxc LDA functionals. Due to this
	  reason, GGAs	  and the other functionals are desactivated. Now
	  octopus can use the	 13 LDAs provided by libxc.

2004-10-20 16:59  acastro

	* liboct/oct_gsl_f.c: Added some C functions that play with the
	  splines data types. I use them in the code (that I will commit
	  soon) in spline.F90, that implements cutoffs (which are *almost*
	  working), to be used by the pseudopotentials.

	  Due to my lack of knowledge of C, the code is rather obfuscated
	  -- in fact I do not even know why they work, they just work.
	  Please some of you take a look whenever you are bored.

2004-10-20 15:39  marques

	* libxc/: Makefile.am, lda.c, lda_c_amgb.c, lda_c_pw.c, lda_c_pz.c,
	  lda_c_vwn.c, lda_funcs.c, lda_x.c, test.c, util.c, util.h, xc.h,
	  xc_f.c: The begining of our library of xc functionals. There are
	  13 LDA functionals implemented until now. The unpolarized
	  versions work I think. The polarized I have some doubts, and we
	  should do some further checking.

2004-10-20 15:36  marques

	* liboct_parser/: Makefile.am, grammar.y, liboct_parser.h, parse.c,
	  parse_exp.c, parser_f.c, string_f.c, string_f.h, symbols.c,
	  symbols.h: These files are in a new directory to ease the
	  maintenance.

2004-10-20 15:34  marques

	* liboct/: Makefile.am, grammar.y, liboct_parser.h, parse.c,
	  parse_exp.c, parser_f.c, string_f.c, string_f.h, symbols.c,
	  symbols.h: Separated the liboct_parser to a diferent directory.

2004-10-14 15:17  acastro

	* doc/octopus.dvi, doc/octopus.info, doc/octopus.texi,
	  share/samples/Makefile.am, share/samples/Na2, share/samples/inp:
	  Changed the name of the sample "inp" file, in favor of "Na2".
	  The manual is also changed accordingly.

2004-10-14 14:24  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: And yet some more
	  updates to the manual.

	  The manual is certainly far from perfect, and I think that we
	  should do a lot of work for 2.0 version. But I am done with my
	  changes for 1.4.  If you want to take a look and do more changes
	  before release, go ahead.  Specially the auxiliary programs are
	  far from being properly described.

2004-10-14 14:04  marques

	* src/poisson_cg.F90: Yes, apparently I forgot this file.

2004-10-14 13:49  acastro

	* configure.ac, share/Makefile.am, share/samples/Makefile.am,
	  share/samples/Na2, share/samples/bench-gs: Moved also in this
	  head branch the samples to the share directory.

	  I have not checked that it worked, since now the tree is broken:
	  it seems that some poisson_cg.F90 file is missing, right?

2004-10-14 12:28  acastro

	* Makefile.am, configure.ac, share/Makefile.am,
	  share/samples/Makefile.am, share/samples/bench-gs,
	  share/samples/inp: Moved "samples" directory to "share" directory
	  so that it is also "installed".  This also should be done for the
	  head branch.

2004-10-12 17:39  marques

	* src/: Makefile.am, eigen_cg2.F90, mix.F90, poisson.F90,
	  poisson3D.F90: A bit ot reorganization...

2004-10-12 13:47  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Some more updates
	  in the manual.

2004-10-11 18:28  acastro

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.texi: Some more changes in the manual.

2004-10-11 12:18  acastro

	* configure.ac, doc/octopus.dvi, doc/octopus.info,
	  doc/octopus.texi: A small update to the manual. I am not yet done
	  with it so it is not yet time to release 1.4. Maybe tomorrow.

2004-10-08 11:19  marques

	* liboct/config.h.in, liboct/oct_f.c, liboct/recipes.c,
	  src/Makefile.am: more small changed.

2004-10-08 11:17  marques

	* acinclude.m4, configure.ac, share/variables, src/config.h.in,
	  share/PP/defaults: small changes: syncing my tree with the cvs
	  tree.

2004-10-08 11:15  marques

	* build/: acx_fftw.m4, acx_metis.m4, octopus.spec.in: added better
	  support for metis library.

2004-10-08 11:13  marques

	* src/: gs.F90, linear_response.F90, mesh.F90, mesh_create.F90,
	  static_pol_lr.F90: bug fixes.

2004-10-04 14:19  acastro

	* src/out_inc.F90: Bug fixed.  PGF90 compiler got screwed up when
	  using the arguments fname and dir inside the internal
	  subroutines. It is a compiler bug, not ours, but anyways I
	  removed by defining a "basename" variable.

2004-10-04 12:52  acastro

	* src/vxc.F90: Bug fixed.  Same as in the 1.4a branch: The Portland
	  compiler does not like parameters being defined with operations.

2004-10-04 12:51  acastro

	* src/vxc.F90: The picky Portland compiler complained about
	  defining constant with operations.

2004-10-04 12:31  acastro

	* src/liboct.F90: In standard Fortran 90, the "end interface"
	  statement should *not* be followed by the name of the interface.
	  The PGF90 compiler complains about it.

2004-10-04 12:23  acastro

	* src/gs.F90: Bug fixed.  Same bug than in the 1.4a version.

2004-10-04 12:22  acastro

	* src/run.F90: Bug fixed.  Showed up with the Absoft compiler. The
	  state variable must be null there, I think.

2004-10-01 15:11  marques

	* src/global.F90: a message width of 80 characters was not
	  sufficient for eugene's machine, so I increased it to 256.

2004-09-30 21:20  marques

	* src/Makefile.am: sorry, forgot this.

2004-09-30 21:14  marques

	* src/Makefile.am: small change to allow octopus compile in
	  machines that do not sistinguish upper from lower case.

2004-09-30 21:07  marques

	* src/Makefile.am: small change to allow octopus to compile in
	  systems that do not distinguish between upper and lower case.

2004-09-30 18:59  micael

	* src/Makefile.am:  *) h.F90 must be compiled before systm.F90.

2004-09-30 17:49  marques

	* src/: Makefile.am, fxc.F90, linear_response.F90, rsdfpt.F90,
	  run.F90, states_inc.F90, static_pol_lr.F90: I broke the big file
	  of Eugene into smaller pieces, and did some cosmetics.  Of course
	  it does not work... yet.

2004-09-29 16:00  marques

	* share/PP/TM2/Ti.ascii: Titanium pseudopotential from Alberto

2004-09-29 15:51  marques

	* acinclude.m4, configure.ac, src/Makefile.am, src/states.F90,
	  src/vxc.F90, build/acx_fft.m4: bug corrections ported from 1.4a
	  *) PZ spin polarized segfaulted in alphas   *) Problems finding
	  fftw	 *) multipole calculated segfaulted in alphas

2004-09-29 15:45  marques

	* src/states.F90: Anotehr stupid thing that appeared in the alphas
	  with optimization on!

2004-09-29 15:26  marques

	* acinclude.m4, configure.ac, src/Makefile.am, build/acx_fft.m4:
	  small bug fix in configuration (changed a file name for
	  consistency also) bug with the vxc in the alphas was fixed.

2004-09-29 15:19  marques

	* src/vxc.F90: crash in alphas with spin polarized PZ solved. It
	  was quite stupid in any case ;)

2004-09-28 18:04  marques

	* AUTHORS: Should not forget to update the authors list.

2004-09-28 17:47  marques

	* src/: Makefile.am, gs.F90, rsdfpt.F90, run.F90: Added the linear
	  response routine of Eugene. It still has to be cleaned further
	  and broken into pieces, but at least it compiles ;)

2004-09-24 19:31  marques

	* src/global.h: And this one...

2004-09-24 19:31  marques

	* share/PP/defaults: I think I forgot this file.

2004-09-24 18:25  marques

	* share/variables: changed CalculationMode variable

2004-09-24 18:25  marques

	* src/: atoms_magnet.F90, excitations.F90, geom_opt.F90, gs.F90,
	  h.F90, io.F90, make_st.F90, opt_control.F90, out_inc.F90,
	  phonons.F90, restart.F90, restart_inc.F90, run.F90, scf.F90,
	  states.F90, states_inc.F90, static_pol.F90, stencil_cube.F90,
	  systm.F90, td.F90, td_init.F90, td_rti.F90, td_write.F90,
	  unocc.F90: Cleaning up the run.F90 file. I suspect that there are
	  still many things that do not work...

2004-09-24 11:44  acastro

	* src/Makefile.am: The dependencies are now at the end, as it is
	  more standard. Added one comment to explain what the "make
	  depend" thing is.

2004-09-24 09:30  acastro

	* src/Makefile.am: Updated the dependencies in the Makefile.

	  For that purpopse, I have used "makedepf90"
	  (http://www.helsinki.fi/~eedelman/makedepf90.html).  The list of
	  dependencies may now be regenerated by typing "make depend"
	  within the src directory.

2004-09-22 16:52  acastro

	* share/variables: Added some variables (tm2, hgh, ps_tm2, ps_hgh)
	  with the variables that those constants have in the files, in
	  order to ease the writing of the input files.

2004-09-21 21:50  acastro

	* src/liboct_parser.F90: Bug fixed.  (obvious one)

2004-09-21 13:53  acastro

	* src/: f_inc.F90, fft.F90, fftw3.F90, mesh.F90, out.F90,
	  states.F90, states_inc.F90, td_exp.F90, td_exp_split.F90,
	  td_rti.F90: Version 1.4a did not compile with the option of
	  supressing FFTs. Now it does, and I think it works.

2004-09-15 22:54  marques

	* src/: Makefile.am, eigen.F90, eigen_cg2.F90, gs.F90, restart.F90,
	  run.F90, scf.F90, states.F90, unocc.F90: started cleaning up
	  run.F90. Code will be messy for the next days (actually couple of
	  weeks for I will go to Maratea on friday)

2004-09-14 13:54  marques

	* src/Makefile.am, src/global.F90, src/io.F90, src/liboct.F90,
	  src/main.F90, src/pulpo.F90, liboct/recipes.c: Changed a little
	  the io structure.

2004-09-14 11:33  marques

	* liboct/liboct_parser.h, liboct/parse.c, liboct/parser_f.c,
	  src/Makefile.am, src/epot.F90, src/geometry.F90, src/lasers.F90,
	  src/liboct_parser.F90, src/make_st.F90, src/mesh_create.F90,
	  src/pes_rc.F90, src/rotational_strength.F90, src/specie.F90,
	  src/states.F90, src/states_kpoints.F90, src/systm.F90,
	  src/td_init.F90, src/xyz_adjust.F90, src/xyz_file.F90: Changed
	  the way the parser handles blocks. It's a bit more elegant now in
	  my opinion.

2004-09-13 16:25  marques

	* src/: epot.F90, ps.F90, specie.F90, specie1D.F90, specie3D.F90,
	  systm.F90: Changed the species block, and reorganized a little
	  the species code.

2004-09-13 10:07  marques

	* liboct/recipes.c: trivial change I had forgotten.

2004-09-13 09:41  marques

	* liboct/recipes.c: octopus did not print the recipe :)

2004-09-05 20:15  fnog

	* build/: acx_blas.m4, acx_lapack.m4: small changes in the
	  detection of MKL blas and lapack libraries

2004-08-24 14:52  marques

	* src/: Makefile.am, curvlinear.F90, derivatives.F90,
	  derivatives_inc.F90, epot_inc.F90, h.F90, mesh.F90,
	  mesh_create.F90, mf_inc.F90, nl_operator.F90, out_inc.F90,
	  poisson3D.F90, systm.F90: Several bug fixes.

2004-08-23 09:23  marques

	* configure.ac: Forgot to commit this trivial change.

2004-08-22 20:14  marques

	* src/: derivatives.F90, mesh_create.F90, poisson3D.F90: There is a
	  bug, and it doesn't work. I will fix it tomorrow.

2004-08-22 19:03  marques

	* src/: derivatives_inc.F90, excitations.F90, h_inc.F90,
	  h_xc_OEP.F90, linear.F90, poisson.F90, poisson3D.F90,
	  xc_OEP_SIC.F90, xc_OEP_x.F90: poisson conjugated gradients is
	  slow, but apparently works ;)

2004-08-20 22:49  marques

	* src/: curv_modine.F90, derivatives.F90, eigen.F90,
	  eigen_plan.F90, global.F90, mesh.F90, mesh_create.F90,
	  mf_inc.F90, out_inc.F90: Some bug fixes and speed improvements.
	  Hydrogen runs, it seems.

2004-08-19 22:11  marques

	* src/: Makefile.am, curv_briggs.F90, curv_gygi.F90,
	  curv_modine.F90, curvlinear.F90, mesh.F90, mesh_create.F90:
	  Cleaned up a bit curvlinear coordinates. Also added some
	  coordinate transformations. To implement a new transformation one
	  basically just needs the function, and it's laplacian. Very eay,
	  believe me.

2004-08-19 22:09  marques

	* share/variables: Added some values used in curvilinear
	  coordinates.

2004-08-18 18:11  marques

	* share/variables: added names of stencils

2004-08-18 18:10  marques

	* src/: Makefile.am, derivatives.F90, f.F90, mesh.F90, scf.F90,
	  states_inc.F90, stencil_cube.F90, stencil_star.F90,
	  stencil_variational.F90: Cubic stencil added. It is very easy to
	  add new, so feel free to try ;)

2004-08-17 23:26  marques

	* src/derivatives.F90: implemented the variational laplacian of
	  Maragakis et al.

2004-08-16 22:55  marques

	* src/td_exp.F90: commented a couple of lines so that the code
	  compiles.

2004-08-16 22:49  marques

	* src/: Makefile.am, derivatives.F90, derivatives_inc.F90,
	  eigen.F90, eigen_cg2.F90, epot.F90, excitations.F90, f.F90,
	  f_inc.F90, geom_opt.F90, h.F90, h_inc.F90, h_xc_OEP.F90,
	  lcao.F90, mesh.F90, mesh_create.F90, mf.F90, mf_inc.F90,
	  nl_operator.F90, opt_control.F90, out_inc.F90, pes_mask.F90,
	  phonons.F90, poisson.F90, poisson3D.F90, run.F90, scf.F90,
	  states.F90, states_inc.F90, static_pol.F90, systm.F90, td.F90,
	  td_calc.F90, td_exp.F90, td_rti.F90, td_write.F90, unocc.F90,
	  xc_GGA.F90, xc_pot.F90: Several big changes:	 *) the form of
	  calculating derivatives has changed. Next step is adding other
	  stencils and other descritazations   *) all arrays of the form
	  (3, m%np) are now (m%np, 3). This is, in principle, much more
	  efficient. It is likely that I forgot a couple of them!

2004-08-15 10:47  acastro

	* src/linear.F90: Bug fixed.  At least with ifc compiler, passing a
	  variable to lalg_eigensolve both as an intent(in) and an
	  intent(out) was causing a segfault.

2004-08-14 21:42  marques

	* configure.ac, build/octopus.spec.in, doc/octopus-faq.info,
	  doc/octopus.info, doc/octopus.info-1, doc/octopus.info-2,
	  doc/octopus.info-3, doc/octopus.texi, src/Makefile.am: trivial
	  changes to make rpm.

2004-08-02 21:58  marques

	* src/derivatives.F90: Forgot this file.

2004-08-02 19:56  marques

	* src/: Makefile.am, atoms_magnet.F90, curvlinear.F90, eigen.F90,
	  eigen_cg3.F90, eigen_plan.F90, epot.F90, epot_inc.F90, f.F90,
	  h_inc.F90, h_so.F90, h_xc_OEP.F90, linear.F90, make_st.F90,
	  mesh.F90, mesh_create.F90, mf.F90, mf_inc.F90, opt_control.F90,
	  out_inc.F90, poisson1D.F90, poisson2D.F90, poisson3D.F90,
	  states.F90, states_inc.F90, static_pol.F90, systm.F90,
	  td_calc.F90, td_exp_split.F90, xc_GGA.F90, xc_KLI.F90,
	  xc_LDA.F90, xc_OEP_SIC.F90, xc_OEP_x.F90: Support for curvlinear
	  coordinates. This breaks some parts of the code.  It is likely
	  that the HEAD branch of the CVS will not work properly for the
	  next	couple of months. During that time, octopus will be changed
	  to work with curvli near coordinates and parallel in domain.

2004-07-26 17:32  acastro

	* src/: systm.F90, td_exp.F90, td_rti.F90: Believe it or not, all
	  these changes have to be made if one wants to run the code with
	  the Intel 8.0.046 compiler that I have here, and a system with a
	  large mesh is used... that's why I think that this compiler
	  version is still not serious (I have Build 20040412Z).

	  In fact, in my case, line 238 of out_inc.F90 also seg faults if a
	  very large mesh is used, but I don't see a way to solve that
	  problem.

	  The problem of eigen_plan still remains, by the way. I will take
	  a look at it later. Also I am not very happy with the lanczos
	  subroutine.

2004-07-26 17:23  acastro

	* src/math_inc.F90: Moved some explicit size interfaces to assumed
	  sized ones, to avoid creation of temporary arrays.

2004-07-26 17:22  acastro

	* src/: linalg_basic.F90, linalg_basic_blas.F90: Added support for
	  two-component matrix vector multiplication, in the form: y(1:m1,
	  1:m2) = a(1:m1, 1:m2, 1:n)*x(1:n)

2004-07-26 14:46  marques

	* src/: epot.F90, linalg_basic.F90: Small bug found by Micael.

2004-07-26 14:45  marques

	* src/epot.F90: Small bug found by Micael

2004-07-26 14:00  acastro

	* src/: mix.F90, scf.F90: Changes in mix module to avoid errors
	  with Intel 8.0.046 compiler.\ (Removed the (*) arguments, and
	  other stuff...)

2004-07-24 20:08  acastro

	* src/: states.F90, systm.F90: Changed function atom_density to a
	  subroutine. Otherwise Intel compiler version 8.0 crashes, as
	  usual, if the array is big enough.

2004-07-24 19:57  acastro

	* src/eigen_cg2.F90: I changed a simple linear algebra operation to
	  be done with blas. The reason is that otherwise it crashes with
	  the Intel Fortran compiler version 8. Apparently also in these
	  cases it creates temporary arrays in the stack, and if the
	  problem is big enough, dies.

2004-07-24 19:49  acastro

	* src/: lcao.F90, liboct.F90: Changed the call to blas_gemm by
	  sucessive calls to lalg_axpy, which permits to use the new
	  interface. Maybe we can use lalg_gemv and simplfy it a bit, but
	  in fact it could make it more unreadable.

2004-07-24 15:07  acastro

	* src/h_inc.F90: The reshape intrinsic was seg-faulting with the
	  Intel Fortran compiler, at least with my sample input, which is a
	  spinors case with lots of points in the grid. In any case, I
	  think those lines are much simpler now, and equivalent...

2004-07-24 14:52  acastro

	* src/h_so.F90: The calls to lalg_dot were in h_so.F90 were not
	  compatible with the new interface. I also changed the input
	  variables from (m%np, dim) to (:, :).

2004-07-24 12:38  acastro

	* src/fftw3.F90: Use of tabs is also an extension to Fortran 90.

2004-07-24 12:30  acastro

	* src/: blas.F90, linalg_basic.F90: Addig the name of the interface
	  to the "end interface" statement seems to be an extension to the
	  Fortran 90 standard (the ifort compiler emits a warning when
	  compiling with "-e90" option)

2004-07-23 18:03  marques

	* src/blas.F90: Forgot this file, sorry.

2004-07-23 16:33  marques

	* Makefile.am, src/Makefile.am, src/lcao.F90, src/linalg_basic.F90,
	  src/linalg_basic_blas.F90, src/linalg_basic_int.F90: now also the
	  intrinsics work.

2004-07-23 15:27  marques

	* Makefile.am, doc/octopus.info, src/Makefile.am,
	  src/eigen_cg3.F90, src/eigen_plan.F90, src/f_inc.F90,
	  src/fftw2.F90, src/fftw3.F90, src/h_inc.F90, src/h_so.F90,
	  src/lcao.F90, src/linalg_adv_lapack.F90, src/linalg_basic.F90,
	  src/linalg_basic_blas.F90, src/math_inc.F90, src/mesh.F90,
	  src/mf_inc.F90, src/mix.F90, src/out_inc.F90, src/poisson.F90,
	  src/poisson3D.F90, src/specie3D.F90, src/states.F90,
	  src/states_inc.F90, src/systm.F90, src/td_calc.F90,
	  src/td_exp.F90, src/td_rti.F90, src/xc_GGA.F90: The code now
	  works with the intel ifort 8.  Clean up BLAS support.

2004-07-22 15:28  marques

	* configure.ac: Changed version number to 1.4a (alpha)

2004-07-22 15:16  marques

	* doc/octopus.dvi, doc/octopus.texi, src/excitations.F90,
	  src/global.F90, src/h.F90, src/mesh_create.F90: I did some
	  changes to the manual. Actually the manual should be greatly
	  extended but I don't really have the time or the patience to do
	  it now. Of course, if any of you feels like it...

2004-07-06 13:07  acastro

	* build/acx_mpi.m4: Bug fixed.	There was a dollar sign in "-l$mpi"
	  which should not be there.

2004-07-06 12:25  acastro

	* src/restart.F90: Bug fixed.  The SG compiler does not like
	  declaration of functions without parenthesis, even if they are
	  empty.

2004-07-05 16:45  acastro

	* src/: scf.F90, vxc.F90, xc_LDA.F90: Bugs fixed in the 2D LDA.
	  Finally it seems to work properly.

2004-07-05 11:46  acastro

	* src/vxc.F90: Our old PZ parameterization of the LDA was using
	  parameters with no precision enough to match well results for
	  rs<=1 and rs>=1. As a result, there were ugly discontinuities
	  when doing time-evolution. I recalculated the constants, and then
	  rewrote the full subroutine which was not ours anyways...

2004-07-05 11:42  acastro

	* src/xyzanim.F90: oct-xyz-anim program was broken (long time
	  nobody used it...) Now I think it works.

2004-07-04 19:11  marques

	* src/: excitations.F90, linear.F90: Alberto's wish list is one
	  item shorter: linear response now uses information from the
	  previous runs :)

2004-07-04 16:25  marques

	* src/: complex.F90, epot_inc.F90, global.h, h.F90, linear.F90,
	  real.F90, run.F90, states.F90, states_inc.F90, td_calc.F90: MPI
	  could not work in single precision mode.

2004-07-03 10:01  marques

	* AUTHORS: Updated list.

2004-07-03 09:59  marques

	* src/linear.F90: Now the parallel version of excitations works. BTW
	  a first patch for this was given by Sestien Hamel. Thanks
	  Sebastian ;)

2004-06-28 23:36  marques

	* src/: Makefile.am, excitations.F90, liboct.F90, linear.F90:
	  Parallel calculation of the excitation a la Casida.  Unfortunatly
	  I could not test, as the calculation of unoccupied states is
	  broken...

2004-06-28 12:36  acastro

	* src/epot.F90: Maybe better this way.

2004-06-28 11:58  acastro

	* src/epot.F90: This way of handling the problem with the nonlocal
	  pseudopotentials is probably a bit better, although it is still
	  ugly. Whenever we can use better versions of Fortran maybe these
	  problems will be solved..

2004-06-26 18:50  acastro

	* src/: epot.F90, h.F90: Bug fixed.  When ions moved, the non-local
	  pseudopotentials were not updated well.  I think that it was in
	  fact an error of the compiler, unable of properly treating the
	  pointers, but nevertheless I changed a bit the code, and now it
	  seems to work.

2004-06-24 11:21  acastro

	* src/: Makefile.am, choose_st.F90: Removed choose_st (no longer
	  necessary after changing the restart scheme)

2004-06-24 10:38  acastro

	* src/td.F90: Bug fixed.  Description: the energy was not properly
	  calculated in td.F90 (the ionic terms were not properly treated)

2004-06-23 18:06  acastro

	* build/acx_fftw.m4, src/out_inc.F90: Bugs fixed: (*) Code was not
	  configured properly properly with FFTW version 2.  (*) In
	  input_function, some code had to be removed by the preprocessor
	  when	   NetCDF is not present.

2004-06-23 18:03  acastro

	* src/restart.F90: I forgot to add the file restart.F90, sorry...

2004-06-23 15:02  acastro

	* build/acx_fftw.m4: Bug fixed.  Description: If the "--with-fft="
	  argument was passed, the configure script never found fft. (just
	  had to change enableval to withval, since now we use "--with-fft"
	  instead of "--enable-fft=")

2004-06-23 10:32  acastro

	* share/variables, src/Makefile.am, src/atoms_magnet.F90,
	  src/choose_st.F90, src/epot_inc.F90, src/excitations.F90,
	  src/global.h, src/make_st.F90, src/opt_control.F90, src/out.F90,
	  src/out_inc.F90, src/run.F90, src/scf.F90, src/states.F90,
	  src/states_inc.F90, src/td.F90, src/td_calc.F90, src/td_init.F90,
	  src/td_write.F90, src/unocc.F90, src/xc.F90: (1) Changed the
	  restart scheme. Now, in principle, one may (i) save the
	  restart files in binary or in NetCDF, (ii) restart from either
	   binary or NetCDF, either if it was in single or in double
	  precision,	 (iii) restart in parallel a serial job, or
	  viceversa, or change the     number of processors in the run.
	  This still needs *lots* of testing,	  but under some
	  circumstances, it works. NetCDF is encouraged, since	   those
	  files can be directly input by OpenDX.

	  (2) Revomed the MPI_TD directive, which was unused, and was now
	  causing     problems since acx_mpi.m4 changed.

2004-06-21 15:49  acastro

	* src/: eigen_plan.F90, global.F90, mf_inc.F90, out.F90,
	  out_inc.F90, states.F90, states_inc.F90: (1) Changes in  module
	  output.      Now there is, accompanying to the output_function
	  routines, one      input_function that complements it. There is
	  one new output/input	    mode, "Plain" (in addition to "DX",
	  "AxisX", etc). Input may only      be done in NetCDF format or in
	  "Plain". NetCDF now also works for	  complex functions. input
	  function should read any function whose      mesh corresponds
	  well, no matter if it was written in single precision      or
	  not, complex or real. Removed the OutputSinglePrec flat, now the
	      code writes functions in the precision that it was compiled.
	      (Remind me to update the manual!)

	  (2) states_random moved to mf_random, where it is more logical.

2004-06-21 13:19  marques

	* configure.ac: Small annoying bug found by carlo.

2004-06-18 11:36  acastro

	* src/: atomic.F90, global.h, hgh.F90, tm.F90: Finally I removed
	  the annoying bug that hindered the use of octopus in single
	  precision with pseudopotentials. In my laptop, this makes things
	  40% faster for bench-gs, and the results don't differ much.  In
	  any case, I did this because (i) we had to have a bugless single
	  precision octopus anyway, and (ii) when I commit the restart
	  stuff, one should be able to do a gs calculation in single
	  precision, and restart in double precision reading the results,
	  which should be good.

	  It seems that egofv and its child subroutines don't work in
	  single precision, since I monitored some of the variables and
	  they take too large values for single precision. This probably
	  means that the algorithms are not too good, but I am not going to
	  change the algorithms. What I did is to make sure that those
	  routines are always compiled in double precision, and that when
	  egofv is called (just in tm.F90 and hgh.F90), it is called in
	  double precision.

2004-06-17 10:43  acastro

	* build/acx_netcdf.m4: I think that the use of the comma inside the
	  definition of the program was causing troubles. Since I could not
	  find out how to use safely programs inside an m4 argument, I just
	  eliminated it. Now it works...

2004-06-16 15:40  marques

	* build/: acx_mpi.m4, acx_netcdf.m4, acx_trlan.m4: Small fixes of
	  stupid bugs...

2004-06-16 12:40  marques

	* src/Makefile.am: Alberto was right, there was a problem with
	  thios file. I just don't understand why it worked in the first
	  place...

2004-06-14 15:49  marques

	* Makefile.am: I forgot to remove "autogen.sh" from this file

2004-06-14 15:44  marques

	* configure.ac, build/acx.m4: Added default FCFLAGS.  The script is
	  not "proper" but it will work sometimes ;)

2004-06-11 19:34  marques

	* autogen.sh: This script is no longer necessary. Use autoreconf
	  please.

2004-06-11 19:33  marques

	* acinclude.m4, configure.ac: This is the new configuratiopn of
	  octopus. It is much better (in my opinion) than the one we had
	  before. However, there are 2 or 3 details you should be aware of:
	  1) It is based in automake 1.8. It will not work with previous
	  versions, so please upgrade 2) It is experimental (although it
	  works in my machine).

	  Let me know of any bugs you may found.

2004-06-11 19:30  marques

	* src/Makefile.am, liboct/config.h.in, liboct/oct_f.c,
	  liboct/oct_gsl_f.c, liboct/parser_f.c, liboct/recipes.c,
	  liboct/write_iter.c: New build system with automake 1.8

2004-06-11 19:29  marques

	* build/: acx.m4, acx_blas.m4, acx_fftw.m4, acx_lapack.m4,
	  acx_mpi.m4, acx_netcdf.m4, acx_trlan.m4, fortran90.m4: New
	  configuration scripts for the libraries. They are much cleaner
	  now.

2004-06-09 16:33  acastro

	* src/vxc.F90: Bug fixed in PW92 correlation expression (numerical
	  problem that appeared only sometimes)

2004-06-07 12:44  acastro

	* src/: f_inc.F90, global.F90, main.F90, scf.F90, states_inc.F90,
	  td_write.F90: (1) Added a MPI_BARRIER in global_init (2) Added a
	  trim in the call to print_file in main.F90 to get the logo right
	  (sometimes it failed) (3) Fixed the bug in td_write.F90,
	  td_write_angular     (I think it is a MPICH bug, rather than
	  ours, but anyways the     calculation was stopped in MPI runs
	  when the angular momentum	was to be written) (4) Removed
	  mesh_angular_momentum from states_inc, moved to     f_inc (where
	  it belongs). Added subroutine f_l2.  (5) Changed states_inc. Now
	  it allows to calculate L^2 (6) In scf_write_static, now the
	  expectation values of the	three components of the angular
	  momentum, as well as of     L^2 are printed.

2004-05-28 18:44  acastro

	* liboct/write_iter.c, src/liboct.F90, src/td.F90, src/vxc.F90,
	  src/xc.F90: Several fixes: (1) The order of ATTA and PW92 in
	  xc.F90 were wrong.  (2) Some compilers did not like the way I
	  initialized beta in subroutine correlation_lda_3D_pw92 in vxc.F90
	  (3) I added in liboct.F90 interfaces to the write_iter routines
	  defined in write_iter.c, because it was causing troubles. I
	  decided to put them in liboct, and not make an independent
	  module. I don't know if you would prefer the other way.

2004-05-27 11:24  acastro

	* src/: vxc.F90, xc.F90, xc_LDA.F90: Added the correlation
	  parametrization of Attacalite et al.	[C. Attacalite et al, Phys.
	  Rev. Lett. 88, 256601 (2002)] of the correlation energy and
	  potential of the homogeneous electron gas.  Hereafter we can do
	  LDA in 2D (for quantum dots).  I have tested the energy, but have
	  not tested the potential (I will do it in the following days,
	  when I get data from the Attacalite and his friends).
	  Incidentally, I rewrote the PW92 subroutine, with the hope of
	  merging the 2D and 3D expressions, but finally was not possible.
	  In any case we got rid of the old routine, which was not really
	  ours.  In the input file, one has to write CFunctional = "ATTA".
	  (I have not attempted to do any quantum dot yet) Yes, I will put
	  it in the manual soon.

2004-05-26 13:11  micael

	* src/systm.F90:  *) GuessDensitySpin user-defined mode was not
	  working properly.

2004-05-25 15:55  micael

	* src/: atoms_magnet.F90, states_inc.F90:  *) Bug fixed in the
	  magnetization vector calculation (I will skipp the details).
	      The only consequence (I think) was a wrong sign in the y
	  component.

2004-05-19 15:13  micael

	* src/h_inc.F90:  *) Bug fixed. There was a sign wrong in the vlpsi
	  routine when using spinors.

2004-05-18 17:30  micael

	* src/atoms_magnet.F90:  *) Bug fixed in the oct-atoms-magnet
	  utility.

2004-05-18 16:19  marques

	* share/PP/: defaults, TM2/S.ascii: Added pseudopotential for
	  sulfur.

2004-05-17 14:56  micael

	* src/lcao.F90:  *) LCAO was not working for spinors.

2004-05-17 08:20  acastro

	* src/: vxc.F90, xc_LDA.F90: LDA exchange energy and potentials are
	  correct now both in 3D and 2D (not yet correlation). In 1D (if
	  such a thing makes any sense) it is not correct because I did not
	  know how to solve a stupid integral. I will look it up in the
	  tables.  In any case, one of the older routines, exchng, is gone;
	  I had to change it to make general formulae for the one or two
	  dimensions case. I think it looks better now.  CVS
	  :----------------------------------------------------------------------

2004-05-14 18:21  marques

	* src/states.F90: units of electronic energy were nor adjusted on
	  input.

2004-05-05 01:01  acastro

	* src/: f.F90, h_inc.F90, mesh.F90, mesh_create.F90, mf.F90,
	  mf_inc.F90, poisson.F90, poisson3D.F90: Simplified the
	  calculation of the derivatives (removed the lookup_type).  The
	  code is significantly faster now on some machines (e.g. Itanium,
	  and IBM machines).

2004-05-04 17:49  marques

	* share/PP/: defaults, TM2/Cd.ascii, TM2/Se.ascii: Added
	  pseudopotentials for Cd and Se.

2004-05-04 17:08  micael

	* src/: f_inc.F90, h.F90, h_inc.F90, mf_inc.F90, scf.F90,
	  states.F90, xc_GGA.F90:  *) There is now a routine to calculate
	  the physical current (even if it is missing
	      the diamagnetic contribution) and another to calculate the
	  paramagnetic current.
	   *) Changed the name of variable d%current to d%cdft.
	   *) Changed routine mf_divergence in order to remove some
	  "transpose" calls. To do that
	      I had to change some stuff in the xc_GGA module. Could
	  someone check if the GGA is
	      working properly? (the changes where very small, but you
	  never know...)

2004-05-04 14:58  micael

	* src/: scf.F90, states_inc.F90, td_write.F90:	Some changes Miguel
	  asked for:
	    *) The routine that calculated the expectation value of the
	  spin operator
	       now calculates the magnetization.

2004-04-28 17:48  acastro

	* configure.ac: To compile statically in my linux machine with
	  Intel Fortran 8.0 and using the BLAS/LAPACK compiled with gcc, I
	  have needed to add that (otherwise it links BLAS without
	  libg2c.a, but not LAPACK). I don't know why, but I think that
	  this will not harm anyway.

2004-04-28 14:48  micael

	* src/: scf.F90, states_inc.F90, td.F90, td_init.F90, td_write.F90:
	   *) Added a routine to calculate the total spin of the system.
	   *) Octopus can now print the total spin of the system during
	  time-dependent
	      calculations.

2004-04-26 20:00  marques

	* src/: lcao.F90, run.F90, scf.F90: LCAO is now performed even if
	  tehre are local potentials, provided that there are enough basis
	  sets. I needed this to run some CdSe clusters.

2004-04-26 18:26  micael

	* src/systm.F90:  *) Bug fixed in the building of the guess density
	  from a pseudopotential.
	   *) There is now a new option for the guess density when doing
	  non-collinear
	      spin calculations: you can specify a direction for each atoms
	  magnetization.

2004-04-21 15:29  marques

	* src/: poisson.F90, poisson3D.F90: bug? in posisson3D corrected.
	  Can smoeone check this one? spce before '#' caused the
	  preprocessor to complain.

2004-04-20 21:27  marques

	* src/eigen_plan.F90: octopus actually compiles with g95 with this
	  small change. of course it segfaults immediatly ;) But hey, it's
	  a start

2004-04-20 20:46  marques

	* src/run.F90: Segmentation fault resolved

2004-04-20 18:39  acastro

	* src/run.F90: The call to calcdens was useless because the
	  occupations are null, so that a null density is built.

2004-04-19 17:50  acastro

	* liboct/parse.c, share/Makefile.am: Apparently there was no need
	  to change the parse.c file, so I replace the previous version.  I
	  also committed the wrong Makefile.am file for the share
	  directory.  Hope it works now.

2004-04-19 17:15  acastro

	* liboct/parse.c, share/Makefile.am, share/variables,
	  src/global.F90: Moved the variables defined in the global module
	  (gs_start, etc) to a file ("variables") in the share directory,
	  to be installed when octopus is installe. Then the parser reads
	  this "variables" file previous to the inp file. I think this is
	  cleaner...  If the variables is not found (for example, if one is
	  using a statically linked executable compiled in another
	  computer, and octopus is not properly installed), the variables
	  are not defined. But one can easilly just paste them to the inp
	  file.

2004-04-18 00:53  marques

	* src/out_inc.F90: [no log message]

2004-04-18 00:53  marques

	* configure.ac: Small problem corrected. g2c should come from blas,
	  so no need to add at again.

2004-04-16 12:50  micael

	* src/states_kpoints.F90:  *) Bug fixed: routine
	  states_choose_kpoints knew nothing about spinors.

2004-04-16 12:26  acastro

	* configure.ac, build/fortran90.m4: My first commit since ages...
	  * I added "ifort" to the list of Fortran compilers, for those who
	  (like me) have decided to move to version 8 of the intel
	  compiler.  * I changed a bit the configure.ac file regarding the
	  blas library.  Now it searches first for "-lblas" and then for
	  "-lblas -lg2c".  The reason is that Intel is not offering any
	  more the mkl libraries for free, and I have not been able of
	  using version 8 of the compiler with my old mkl libraries. So I
	  decided to use the normal blas and lapack libraries that are
	  installed in any Linux system. Since they are compiled with gcc,
	  you need the library g2c to link them from Fortran (in my system,
	  libg2c.a is in /usr/lib/gcc-lib/i386-redhat-linux/3.2/libg2c.a).
	  I kept first a normal search for the blas library to be used in
	  other systems, and then a search for the joint libblas.a libg2c.a
	  stuff.  In the middle I had to put a strange line (unset
	  ac_cv_lib_blas_ddot) which was the only way that I found to make
	  it work. But I am not familiar with configure.ac languange, so if
	  any of you takes a look and sees a better way to do it...

2004-04-16 11:45  micael

	* src/states.F90:  *) Small bug fixed.

2004-04-11 17:41  marques

	* src/: crystal.F90, geometry.F90, mesh_create.F90: Small changes
	  to make octopus compile on the alphas.

2004-04-11 16:56  marques

	* src/: specie.F90, xyz_file.F90: Label was not long enough for
	  usdef potentials.

2004-04-01 18:34  rozzi

	* src/epot.F90: bug fixed: fft were allocated even for a potential
	  calulated in real space

2004-04-01 18:07  marques

	* src/: geometry.F90, xyz_file.F90: A couple of bug fixes...

2004-04-01 15:29  rozzi

	* src/mesh_create.F90: bug fixed in calculation of volume per point

2004-03-31 16:14  rozzi

	* src/geometry.F90: bug fixed

2004-03-31 15:58  rozzi

	* src/: crystal.F90, epot.F90, ps.F90: bug fixed

2004-03-31 05:40  marques

	* src/ps.F90: modg(0) was not initialized in
	  get_splines_tm_fourier, which caused an error of the GSL. I took
	  the opportunity to clean a bit the routine. By the way, naming an
	  array int(i) is a bit unfortunate ;)

2004-03-31 05:15  marques

	* src/: atoms_magnet.F90, choose_st.F90, epot.F90, excitations.F90,
	  opt_control.F90, ps.F90, run.F90, scf.F90, states.F90,
	  states_kpoints.F90, systm.F90, unocc.F90: Simplified a bit the
	  routine states_choose_kpoints. I had to pass geo to a couple of
	  routines to make it work. Carlo, so check out this one ;)

2004-03-31 04:00  marques

	* share/PP/defaults: I decided to be a bit more conservative... but
	  someone should do serious testing and trying to converge this
	  numbers to better than 0.1 eV.

2004-03-31 03:37  marques

	* src/: atoms_magnet.F90, centergeom.F90, geometry.F90, mesh.F90,
	  mesh_create.F90, specie.F90, specie1D.F90, specie3D.F90,
	  systm.F90: Minimalist inpits seem to work. I will still do a
	  couple more testes.  Enjoy and correct any bugs that may have
	  appeared ;)

2004-03-31 03:36  marques

	* share/PP/: Makefile.am, defaults: Added defaults for some
	  pseudopotentials. Please change/add this file with your own
	  experience. The values here should be "reasonable".

2004-03-29 19:59  rozzi

	* src/crystal.F90: nothing relevant

2004-03-29 19:58  rozzi

	* src/poisson3D.F90: bug fixed: the usual trick to get rid of those
	  1.0e-16 errors in mesh comparisons

2004-03-29 18:49  marques

	* src/: Makefile.am, atom.F90, atoms_magnet.F90, epot.F90,
	  excitations.F90, geom_opt.F90, geometry.F90, h.F90, lcao.F90,
	  mesh.F90, mesh_create.F90, poisson.F90, poisson3D.F90, run.F90,
	  systm.F90, td.F90, xyzanim.F90: box=minimum is working again. I
	  had to shuffle things around a bit to go aroud dependencies in
	  F90, but I think this box is worth it. It doesn't work with
	  absorbing boundary conditions, though :(

2004-03-29 16:31  rozzi

	* src/atom.F90: initial density is summed over atoms in neighour
	  cells (for periodic)

2004-03-29 16:22  rozzi

	* src/global.F90: backward compatibility for names of POissonSolver

2004-03-29 16:21  rozzi

	* src/run.F90: bug fixed: kpoints were lost in run mode 3

2004-03-29 16:20  rozzi

	* src/states.F90: removed an old variable

2004-03-29 01:58  marques

	* src/: lcao.F90, scf.F90, tm.F90: few aestetical changes necessary
	  for my OAT to work. Please do not use continuation lines (i.e. &)
	  in the definition of types!

2004-03-25 18:21  marques

	* src/: xyz_adjust.F90, xyz_file.F90: These two new files were
	  missing. xyz_file handles loading geomtries, and xyz_adjust, as
	  its name indicates, does the work necessary for the
	  oct-center-geom program.

2004-03-25 18:19  marques

	* doc/: octopus.dvi, octopus.info, octopus.info-3, octopus.texi:
	  Added information about the utility oct-center-geom

2004-03-25 17:59  marques

	* src/: Makefile.am, atoms_magnet.F90, centergeom.F90,
	  geometry.F90, global.F90, math.F90, systm.F90, xyzanim.F90:
	  Considerably changed the way of initializing the geometry.

2004-03-25 16:58  rozzi

	* src/epot.F90: *) cutoff variables made local *) db is used to
	  calculate cutoff radius, for consistency with poisson

2004-03-25 14:55  rozzi

	* src/poisson3D.F90: fixed last generated bugs :)

2004-03-25 14:54  rozzi

	* src/poisson.F90: bug fixed in input logic

2004-03-25 14:54  rozzi

	* src/global.F90: added names for poisson solvers

2004-03-25 14:53  rozzi

	* src/eigen.F90: for compatibility to poisson methods cg is
	  renumbered 4

2004-03-24 17:37  rozzi

	* src/epot.F90: bug fix in deallocation of phases for periodic
	  nonlocal potential

2004-03-24 17:03  rozzi

	* src/poisson3D.F90: added two new cutoffs for the Hartree
	  potential

2004-03-24 17:02  rozzi

	* src/poisson.F90: *) added two new cutoff solvers *) NB: now the
	  methods using fft are numbered according to the number	of
	  periodic dimensions. I am going to put names for that.

2004-03-24 16:30  marques

	* src/liboct.F90: Code now compiles. ;)

2004-03-24 15:43  rozzi

	* src/states_kpoints.F90: some comments were erroneously left in

2004-03-24 15:36  rozzi

	* src/epot.F90: *) cutoffs implemented for 0, 1, and 2 periodic
	  directions *) calls splines to calc cutoff potential

2004-03-24 15:33  rozzi

	* src/fftw3.F90:
	  Optimization is performed only for nonperiodic systems. Only
	  temporary

2004-03-24 15:33  rozzi

	* src/fftw2.F90: optimization is performed only for nonperiodic
	  systems. Only temporary

2004-03-24 15:30  rozzi

	* src/crystal.F90: New module to implement Monkhorst-Pack in the
	  reduced Brillouin Zone (thanks Angel)

2004-03-24 15:28  rozzi

	* src/liboct.F90: addedd interface to some gsl Bessel functions

2004-03-24 15:28  rozzi

	* src/Makefile.am: added references to new module crystal

2004-03-24 15:27  rozzi

	* src/math.F90: added shosrtcuts to the fourier space cutoff
	  functions

2004-03-24 15:26  rozzi

	* src/mesh.F90: box *exactly* doubled in periodic dir. Meybe I'll
	  change this again later

2004-03-24 15:25  rozzi

	* src/ps.F90: added subroutine get_splines_tm_fourier to calculate
	  splines for the localized part of the TM pesudopotential in
	  reciprocal space NB: only for TM psudo

2004-03-24 15:24  rozzi

	* src/mesh_create.F90: bugs fixed

2004-03-24 15:22  rozzi

	* src/specie.F90: added function specie_get_local_fourier that
	  calculates the localized part of *the potential in Fourier space
	  using splines

2004-03-24 15:21  rozzi

	* src/states_kpoints.F90: The new module crystal is used Some bugs
	  are fixed.  The geometry has to be read here 'by hand'.

2004-03-24 15:19  rozzi

	* src/states.F90: some bugs fixed

2004-03-24 15:18  rozzi

	* liboct/oct_gsl_f.c: addedd interface to some other Bessel
	  functions

2004-03-23 11:53  marques

	* src/states_inc.F90: Changed subroutine name.

2004-03-21 16:23  marques

	* src/states.F90: Bug found by WangFeng in the calculation of the
	  current fixed.

2004-03-15 12:47  micael

	* src/: epot.F90, f_inc.F90, h.F90, h_inc.F90, mix.F90, scf.F90,
	  states.F90, states_inc.F90:  *) Current DFT implemented for
	  ground state calculations. Warning: It still needs to
	      be tested properly.

2004-03-14 19:31  marques

	* src/: cf.F90, f.F90, f_inc.F90, out.F90, states_inc.F90: Changed
	  the way of calculating the ELF. Now it should be more precise.
	  There is now an ELF in momentum space ;)

2004-03-10 21:12  marques

	* src/: atom.F90, atomic.F90, eigen.F90, eigen_cg2.F90,
	  eigen_plan.F90, epot.F90, epot_inc.F90, geom_opt.F90,
	  geometry.F90, global.F90, global.h, h.F90, h_inc.F90,
	  h_xc_OEP.F90, lcao.F90, linalg_basic_blas.F90, linear.F90,
	  math_inc.F90, mesh.F90, opt_control.F90, out_inc.F90, pes.F90,
	  pes_mask.F90, pes_rc.F90, phonons.F90, ps.F90, scf.F90,
	  states.F90, states_inc.F90, static_pol.F90, td.F90, td_calc.F90,
	  td_exp.F90, td_exp_split.F90, td_rti.F90, td_write.F90, tm.F90,
	  unocc.F90, xc_GGA.F90, xc_OEP_SIC.F90, xc_OEP_x.F90:
	  Beautification of the code, following a distant hope to solve a
	  segfault that did not work at the end. But I could not leave the
	  better indented code in my PC without sharing it with you ;)

2004-03-09 11:53  acastro

	* doc/octopus-faq.info: Added the octopus-faq.info to the
	  distribution, in the same way that octopus.info is in it. The
	  reason is that otherwise the "make" command will try to generate
	  it, and unfortunately it crashes very often due to the very old
	  versions of the texinfo package that are installed in lots of
	  compilers. This way the code will compile without problems even
	  if texinfo is not there or does not work properly.

2004-03-04 23:27  marques

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.texi: added information about compiler
	  options.

2004-03-04 21:40  marques

	* src/global.F90: The NAG compiler didn't like these lines.

2004-03-04 19:11  micael

	* src/tm.F90:  *) Bug fixed: there was a "," instead of a ".".

2004-03-04 19:10  micael

	* doc/: octopus.info, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.texi:   *) There is now the option to
	  choose the spin-polarization of the guess density
	      and even to make it completely non-collinear.

2004-03-04 19:09  micael

	* src/: atom.F90, geometry.F90, run.F90:  *) There is now the
	  option to choose the spin-polarization of the guess density
	      and even to make it completely non-collinear.

2004-03-04 18:59  micael

	* src/: atoms_magnet.F90, scf.F90:  *) Bug fixed: there was a minus
	  sign missing in the y component of the magnetization vector.

2004-03-04 16:17  marques

	* src/: Makefile.am, broad.F90, choose_st.F90, geometry.F90,
	  global.F90, h_xc_OEP.F90, hgh.F90, linear.F90, main.F90,
	  opt_control.F90, out_inc.F90, ps.F90, pulpo.F90, run.F90,
	  scf.F90, spectrum.F90, states.F90, states_inc.F90, td_write.F90,
	  tm.F90, units.F90, xc_OEP_SIC.F90: The code now compiles and runs
	  in the SP4 *) Got rid of the overloading of the strcat operator
	  *) conf now has 3 extra variables descriving the share, version,
	  and build time *) small bug in SIC corrected (the correlation
	  energy was wrong)

2004-03-02 15:30  micael

	* src/lcao.F90:  *) Bug fixed: the public statement in lcao.F90 was
	  wrong.

2004-03-02 13:41  micael

	* src/: Makefile.am, atoms_magnet.F90:	*) I added a small utility
	  to calculate the local magnetization around each atom.

2004-03-02 13:12  micael

	* src/xyzanim.F90:  *) Some small bug fixes.

2004-03-02 03:30  marques

	* src/: Makefile.am, atom.F90, broad.F90, choose_st.F90, eigen.F90,
	  eigen_plan.F90, epot.F90, epot_inc.F90, f.F90, f_inc.F90,
	  fftw3.F90, geometry.F90, global.F90, h.F90, h_inc.F90,
	  h_xc_OEP.F90, hgh.F90, hs_from_acc.F90, hs_from_mult.F90,
	  lasers.F90, lcao.F90, liboct.F90, liboct_parser.F90, linear.F90,
	  math_inc.F90, mesh.F90, mesh_create.F90, mix.F90,
	  opt_control.F90, phonons.F90, poisson2D.F90, poisson3D.F90,
	  ps.F90, pulpo.F90, run.F90, scf.F90, specie.F90, specie3D.F90,
	  spectrum.F90, states.F90, states_inc.F90, states_kpoints.F90,
	  strength_function.F90, systm.F90, td_calc.F90, td_exp.F90,
	  td_exp_split.F90, td_init.F90, td_rti.F90, td_write.F90, tm.F90,
	  vxc.F90, xc_GGA.F90, xc_OEP_SIC.F90, xc_OEP_x.F90, xc_pot.F90,
	  xyzanim.F90: Incipient support for the METRIS library Changes to
	  make octopus compile without warnings in the absoft 64 bit
	  compiler.

2004-03-02 03:29  marques

	* configure.ac, liboct/oct_f.c: Incipient support for the METRIS
	  library

2004-03-01 18:20  marques

	* src/main.F90: trivial bug corrected.

2004-03-01 15:57  marques

	* liboct/Makefile.am, liboct/config.h.in, liboct/liboct_parser.h,
	  liboct/parse.c, liboct/parse_exp.c, liboct/parser.h,
	  liboct/parser_f.c, src/liboct_parser.F90: Little reordering of
	  the parser library, to make it easier to have the parser as a
	  stand-alone library.

2004-02-27 15:25  acastro

	* src/: run.F90, unocc.F90: Fixed a bug related to the
	  magnetizations when calculation of unoccupied states was made for
	  a spinors case.

2004-02-26 10:29  acastro

	* src/atom.F90: Bug fixed.  In the SG machines, not initialized
	  variables may have non-null values, and this was causing problems
	  in "atom_density".

2004-02-25 16:12  acastro

	* src/: epot.F90, geometry.F90, states.F90, states_inc.F90: Bug
	  fixed.  The code crashed now when a pseudopotential with
	  non-linear core correction was used.	Besides that, some minor
	  stuff.

2004-02-25 14:52  micael

	* src/mix.F90:	*) Mixing the components of the density/potential
	  alltogether is now the default
	      option, because mixing them independently is clearly wrong
	  and it is the cause
	      of many convergence problems. If nobody objects nor find a
	  problem with this,
	      I will remove the older option in the near future.
	   *) Weigths in the mixing are gone, since they appear to be
	  useless.

2004-02-24 17:40  acastro

	* src/epot.F90: Solved one small performance problem: when the non
	  local external potential had to be built at each time step, the
	  KB spheres were built once for every operator (after my last
	  changes) and it is necessary only once per atom.

2004-02-23 15:05  acastro

	* src/: epot.F90, epot_inc.F90: Solved a memory leak related to the
	  non local operators, that appeared when the ions were allowed to
	  move.  Note that now the code is a bit slower than before, due to
	  a couple of reasons that I have to solve in the next days,
	  hopefully (especially when the ions are allowed to move)

2004-02-21 20:10  micael

	* src/: atom.F90, geometry.F90:  *) Some reorganization.
	   *) Bug fixed in the calculation of the lcao density.

2004-02-21 12:27  micael

	* src/eigen_cg3.F90:  *) Bug fixed in subroutine eigen_cg3 related
	  to a blas call.

2004-02-21 12:07  micael

	* src/centergeom.F90:  *) "implicit none" was missing in utility
	  centergeom. Because of that there were some
	       bug.

2004-02-20 20:50  acastro

	* share/util/: mf.cfg, mf.net: By popular demand, two isosurfaces
	  can be plotted at the same time, so that the positive and
	  negative part of a wavefunction may be plotted.

2004-02-20 17:19  micael

	* src/mix.F90:	*) User can now choose to mix the density/potential
	  components independently or not
	      using input option "MixComponentsIndep". It is also possible
	  to set weigths for
	      each component when not mixing then independently.

2004-02-20 16:07  micael

	* src/geometry.F90: (Sorry, I forgot this file...)

	  Lots of cleanning...	 *) There is now a new structure called
	  geometry wich includes the atoms and the species   *) Cleaned the
	  arguments of many subroutines. Now only the relevant structures
	  are passed.	*) Moved routines get_wf and lcao_dens from
	  lcao.F90 to atom.F90 and geometry.F90. It makes      more sense.

	   There are still some things that need to be done, like deciding
	  were and how to use the system
	   structure.

2004-02-20 15:58  micael

	* src/: atom.F90, centergeom.F90, eigen.F90, eigen_cg2.F90,
	  eigen_cg3.F90, eigen_plan.F90, epot.F90, epot_inc.F90,
	  geom_opt.F90, h.F90, h_inc.F90, h_so.F90, h_xc_OEP.F90, lcao.F90,
	  mesh.F90, mesh_create.F90, opt_control.F90, phonons.F90, run.F90,
	  scf.F90, states.F90, static_pol.F90, systm.F90, td.F90,
	  td_calc.F90, td_exp.F90, td_exp_split.F90, td_init.F90,
	  td_rti.F90, td_write.F90, unocc.F90, xyzanim.F90, Makefile.am:
	  Lots of cleanning...	 *) There is now a new structure called
	  geometry wich includes the atoms and the species   *) Cleaned the
	  arguments of many subroutines. Now only the relevant structures
	  are passed.	*) Moved routines get_wf and lcao_dens from
	  lcao.F90 to atom.F90 and geometry.F90. It makes      more sense.

	   There are still some things that need to be done, like deciding
	  were and how to use the system
	   structure.

2004-02-19 17:36  acastro

	* src/: atom.F90, eigen.F90, eigen_cg2.F90, eigen_cg3.F90,
	  eigen_plan.F90, epot.F90, epot_inc.F90, h_inc.F90, h_so.F90,
	  h_xc_OEP.F90, lcao.F90, td_calc.F90, td_exp.F90,
	  td_exp_split.F90, td_rti.F90: Removed the nonlocal projectors
	  from the atom structure and put it in the form of a "nonlocal_op"
	  structure in the Hamiltonian.  This means that "sys" has no
	  longer to be passed to everywhere.  I have *not* made the work of
	  looking carefully where sys can be removed from the interface
	  yet; I have only done that for the subroutines in h_inc. For
	  example, it can be also removed from td_exp, probably td_rti,
	  scf_run, and many others. This I will do later...

2004-02-12 13:54  acastro

	* src/static_pol.F90: Bug fixed.  Description: Cannot put a "/"
	  symbol in the format descriptor of a write command to a string
	  (it seems).

2004-02-12 11:27  marques

	* src/: epot_inc.F90, scf.F90: I think I found the memory leak.

2004-02-12 10:02  marques

	* share/util/Makefile.am: Forgot to add README to the files in the
	  distribution.

2004-02-12 09:52  marques

	* src/global.F90: Stupid and annoying bug in global_init corrected.

2004-02-11 18:56  acastro

	* src/scf.F90: Bug fixed.  m_z component of magnetization vector
	  was twice as it should be.

2004-02-11 15:18  marques

	* share/util/README: Added a README file explaining where to get
	  openDX, etc.

2004-02-10 17:17  marques

	* src/td.F90: There was a bug in the calculation of the triplets. I
	  hope it now works.

2004-02-10 15:53  micael

	* src/: global.F90, td.F90:  *) New input option:
	  TDDeltaStrengthMode.
	      - TDDeltaStrengthMode = 1 is the usual mode,
	      - TDDeltaStrengthMode = 2 aplies a kick to the wavefunctions
	  with oposite signs
		depending on the spin of the state.
	      - TDDeltaStrengthMode = 3 is a combination of the previous
	  two and should only
		be used when you have a spin-unpolarized ground state.

2004-02-10 13:08  marques

	* src/out_inc.F90: Also the other output modes know about single
	  and double precision.

2004-02-10 12:01  marques

	* src/: out.F90, out_inc.F90, states_inc.F90: *) Bug corrected in
	  writing/reading formatted/unformatted restart *) NetCDF output
	  can now be in single or double precision controlled by the
	  variable OutputSinglePrec. This makes the files half the size.

2004-02-09 17:14  acastro

	* src/: epot_inc.F90, h.F90, h_inc.F90, h_xc_OEP.F90, lcao.F90,
	  opt_control.F90, run.F90, scf.F90, states.F90, states_inc.F90,
	  states_kpoints.F90, static_pol.F90, td_exp.F90, td_exp_split.F90,
	  td_rti.F90, td_write.F90, unocc.F90, xc_GGA.F90, xc_LDA.F90,
	  xc_OEP_SIC.F90, xc_pot.F90: Lots of files, but it is just some
	  variable reorganization. Hope it is cleaner now.

2004-02-09 16:23  acastro

	* src/fftw2.F90: Some preprocessors complain when they encounter "
	  within Fortran 90 comments.  It is safer to surround the comments
	  by /* */ as in C.

2004-02-09 13:36  marques

	* src/: global.F90, scf.F90, states.F90, states_inc.F90: Octopus
	  can now read/write formatted/unformatted files. This is
	  controlled by the variable RestartFileFormat.

2004-02-07 13:42  marques

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.texi: Changed the order of 2 sections.

2004-02-07 13:32  marques

	* configure.ac, build/acx.m4, doc/octopus.dvi, doc/octopus.info,
	  doc/octopus.info-1, doc/octopus.info-2, doc/octopus.info-3,
	  doc/octopus.texi, liboct/parse.c, liboct/parser.h,
	  liboct/parser_f.c, liboct/symbols.c, src/atomic.F90,
	  src/global.F90, src/liboct_parser.F90, src/poisson.F90,
	  src/poisson3D.F90, src/td_exp.F90: *) Blocks in inp file now
	  accept tabs to separate columns (\t = '|') *) Parser parameters
	  can now be set from the code (see global_init_symbols) *) A lot
	  of new parser parameters defined.  *) WARNING: Due to all of the
	  above, and to have consistent variables, I had to change the
	  input options TDExponentialMethod and PoissonSolver.	*) All
	  these changes are now reflected in the samples/inp and in the
	  manual

2004-02-06 16:25  acastro

	* src/broad.F90: Bug fixed.  Description: The input variable
	  LinBroadening was "LinBroadnening" instead.

2004-02-05 19:05  marques

	* liboct/string_f.c: include was not the way I like it ;)

2004-02-05 11:58  acastro

	* src/fftw2.F90: Bug fixed.

2004-02-04 15:26  marques

	* liboct/: parser.h, parser_f.c, recipes.c, string_f.c: solved a
	  couple of warnings...

2004-02-04 15:20  marques

	* liboct/: parser_f.c, string_f.c: changed comments from // to /*
	  */

2004-02-04 12:57  marques

	* build/octopus.spec.in: More tuning in order to make static RPM in
	  nautilus.

2004-02-03 20:25  marques

	* configure.ac, build/octopus.spec.in, share/util/inp,
	  src/Makefile.am: This makes rpm in my computer (finally)

2004-02-03 19:50  marques

	* build/octopus.spec.in: This makes rpm in my machine.

2004-02-03 19:49  marques

	* Makefile.am, configure.ac: Bug related to moving the util
	  directory corrected.

2004-02-03 17:18  acastro

	* share/util/Makefile.am~: Removed this emacs temporary file...

2004-02-03 15:55  acastro

	* share/: Makefile.am, util/Makefile.am, util/Makefile.am~,
	  util/inp, util/mf.cfg, util/mf.net: Changed places of files.

2004-02-03 15:33  acastro

	* Makefile.am: Bug fixed.  Description: the util directory was not
	  included before in the distributions.

2004-02-03 15:08  acastro

	* src/fftw2.F90: Bug fixed.

2004-02-02 15:25  marques

	* share/PP/TM2/: As.ascii, Ga.ascii: Added Hamann pseudopotentials
	  for Galliuma nd Arsenic.

2004-01-31 16:42  micael

	* src/: Makefile.am, adv_linalg.F90, adv_linalg_lapack.F90,
	  basic_linalg.F90, basic_linalg_blas.F90, basic_linalg_int.F90,
	  linalg_adv.F90, linalg_adv_lapack.F90, linalg_basic.F90,
	  linalg_basic_blas.F90, linalg_basic_int.F90:	*) Changed the
	  names of "linalg" files.

2004-01-30 19:07  acastro

	* src/: h.F90, h_inc.F90: Some initialization stuff (duplicating
	  info from st in h) that was previously done in h_init, is now
	  done in h_calc_vhxc, to make sure everything is all the time
	  "synchronous".

2004-01-30 18:30  micael

	* src/: basic_linalg.F90, basic_linalg_blas.F90,
	  basic_linalg_int.F90, eigen_cg3.F90, eigen_plan.F90, f_inc.F90,
	  fftw2.F90, fftw3.F90, h_inc.F90, h_so.F90, lcao.F90,
	  math_inc.F90, mf_inc.F90, states_inc.F90, td_exp.F90,
	  td_exp_split.F90, xc_GGA.F90:  *) Fixed a lot of bugs in the new
	  system for BLAS calls. I hope now its OK.

2004-01-30 16:58  marques

	* src/epot.F90: Buus in the allocation of the non-linear core stuff
	  when using LocalPotentialSpace=1

2004-01-30 15:29  marques

	* src/linear.F90: missed one name.

2004-01-28 17:17  micael

	* src/: Makefile.am, adv_linalg.F90, adv_linalg_lapack.F90,
	  basic_linalg.F90, basic_linalg_blas.F90, basic_linalg_int.F90,
	  eigen.F90, eigen_plan.F90, f.F90, f_inc.F90, fftw2.F90,
	  fftw3.F90, h.F90, h_inc.F90, h_so.F90, lcao.F90, linalg.F90,
	  linalg_lapack.F90, linear.F90, math.F90, math_inc.F90, mf.F90,
	  mf_inc.F90, mix.F90, phonons.F90, states.F90, states_inc.F90,
	  td_exp.F90, td_exp_split.F90, xc.F90, xc_GGA.F90, xc_KLI.F90:  *)
	  BLAS is now completely isolated.
	   *) There is now the possibility to use the f90 intrinsics
	  instead of the BLAS.
	   *) There are now 2 levels of linear algebra routines: basic and
	  advanced. They are
	      store respectively in modules lib_basic_alg and lib_adv_alg

2004-01-28 13:01  acastro

	* src/: atom.F90, scf.F90, states.F90, td_write.F90: The molecular
	  dipole is now written to the info file after performing the
	  ground state calculation, and not only the dipole moment of the
	  electronic cloud.  Also, "multipoles" files holds now the nuclear
	  dipole.

2004-01-28 12:33  micael

	* src/lcao.F90:  *) Bug fixed. Array was not dealocated.

2004-01-28 11:36  micael

	* src/: eigen_plan.F90, f.F90, mf_inc.F90, states.F90,
	  states_inc.F90, td_exp.F90, xc.F90, xc_GGA.F90:  *) I am
	  reverting the changes I made yesterday.

2004-01-27 17:12  micael

	* src/: eigen_plan.F90, f.F90, mf_inc.F90, states.F90,
	  states_inc.F90, td_exp.F90, xc.F90, xc_GGA.F90:  *) Started
	  hiding BLAS calls.

2004-01-27 16:18  marques

	* configure.ac, build/acx.m4, src/atomic.F90, src/linalg.F90: code
	  compiles and *almost* runs in single precision.

2004-01-27 15:28  marques

	* src/: fftw2.F90, fftw3.F90: FFTW now is in single or double
	  precision.

2004-01-27 15:18  marques

	* liboct/config.h.in, src/epot.F90, src/fftw3.F90, src/lasers.F90,
	  src/lcao.F90, src/ps.F90, src/specie.F90, src/specie3D.F90,
	  src/spline.F90: Now splines are also in single precision.  More
	  namespace (in)sanity.

2004-01-27 15:15  micael

	* src/linalg_lapack.F90:  *) Bug fixed. Two deallocate statements
	  were in the wrong place.

2004-01-27 14:50  micael

	* src/: Makefile.am, eigen_plan.F90, linalg.F90:  *) There was a
	  BLAS interface missing
	   *) Fixed dependecies for object eigen.o in Makefile.am

2004-01-26 20:16  marques

	* src/liboct.F90: stupid bug.

2004-01-26 20:15  marques

	* src/: atom.F90, broad.F90, centergeom.F90, choose_st.F90,
	  eigen.F90, eigen_cg3.F90, eigen_plan.F90, epot.F90,
	  excitations.F90, f.F90, f_inc.F90, fftw2.F90, fftw3.F90,
	  geom_opt.F90, global.F90, h.F90, h_inc.F90, h_so.F90, hgh.F90,
	  hs_from_acc.F90, hs_from_mult.F90, lasers.F90, lcao.F90,
	  liboct.F90, liboct_parser.F90, linalg.F90, linear.F90, main.F90,
	  make_st.F90, math.F90, math_inc.F90, mesh.F90, mesh_create.F90,
	  mf.F90, mf_inc.F90, mix.F90, opt_control.F90, out.F90,
	  out_inc.F90, pes.F90, pes_rc.F90, phonon_spectrum.F90,
	  phonons.F90, poisson.F90, poisson3D.F90, ps.F90, pulpo.F90,
	  rotational_strength.F90, run.F90, scf.F90, specie.F90,
	  specie1D.F90, specie3D.F90, spline.F90, states.F90,
	  states_inc.F90, states_kpoints.F90, static_pol.F90,
	  strength_function.F90, systm.F90, td.F90, td_exp.F90,
	  td_exp_split.F90, td_init.F90, td_rti.F90, tm.F90, units.F90,
	  unocc.F90, vxc.F90, xc.F90, xc_GGA.F90, xyzanim.F90: namespace
	  sanity.  more changes in order for octopus to run in single
	  precision mode.

2004-01-26 17:41  micael

	* src/mesh.F90:  *) Small change. Replaced a sum by a dot_product.

2004-01-26 17:27  micael

	* src/: io.F90, opt_control.F90:  *) There was some non-standart
	  f90 code in these files.

2004-01-26 15:03  micael

	* src/: eigen_cg2.F90, epot.F90:  *) Some more use statements...
	   *) I commented one line in epot.F90 that was giving some stupid
	  error when
	      compiled with the new release of the Intel compiler.
	  Now the code compiles with the new release of the Intel compiler
	  :)

2004-01-26 13:08  micael

	* src/: mf_inc.F90, poisson.F90, ps.F90, pulpo.F90,
	  rotational_strength.F90, run.F90, scf.F90, specie.F90,
	  spectrum.F90, states.F90, static_pol.F90, strength_function.F90,
	  systm.F90, td.F90, td_exp.F90, td_exp_split.F90, units.F90,
	  unocc.F90, xc.F90, xyzanim.F90:  *) More use statements... If
	  someone spots a missing use statement, please, add it up.
	   *) Small change in mf_dotp and mf_nrm2.

2004-01-26 11:25  micael

	* src/: h.F90, hgh.F90, hs_from_acc.F90, hs_from_mult.F90,
	  lasers.F90, lcao.F90, linear.F90, main.F90, make_st.F90,
	  math.F90, mesh.F90, mf.F90, opt_control.F90, out.F90, pes.F90,
	  phonon_spectrum.F90, phonons.F90:  *) More use statements...

2004-01-25 17:32  micael

	* src/: atom.F90, atomic.F90, broad.F90, centergeom.F90, cf.F90,
	  choose_st.F90, eigen.F90, epot.F90, excitations.F90, f.F90,
	  linalg_lapack.F90, xc_KLI.F90:  *) Removed explicit call to
	  LAPACK in xc_KLI.
	   *) Added some use statements.

2004-01-25 10:56  marques

	* liboct/config.h.in, src/atom.F90, src/broad.F90, src/complex.F90,
	  src/eigen.F90, src/eigen_cg3.F90, src/eigen_plan.F90,
	  src/f_inc.F90, src/fftw2.F90, src/fftw3.F90, src/geom_opt.F90,
	  src/h.F90, src/h_inc.F90, src/h_so.F90, src/hs_from_acc.F90,
	  src/hs_from_mult.F90, src/lcao.F90, src/liboct_parser.F90,
	  src/linalg.F90, src/linalg_lapack.F90, src/linear.F90,
	  src/math_inc.F90, src/mesh.F90, src/mesh_create.F90,
	  src/mf_inc.F90, src/mix.F90, src/opt_control.F90,
	  src/phonons.F90, src/real.F90, src/rotational_strength.F90,
	  src/scf.F90, src/specie.F90, src/states.F90, src/states_inc.F90,
	  src/static_pol.F90, src/strength_function.F90, src/td.F90,
	  src/td_exp.F90, src/td_exp_split.F90, src/td_init.F90,
	  src/undef.F90, src/unocc.F90, src/xc.F90, src/xc_GGA.F90: Next
	  step in making a single precision executable.  WARNING: there is
	  still a lapack call in xc_KLI.F90. This will have to be changed!

2004-01-24 19:03  micael

	* src/: Makefile.am, eigen.F90, eigen_plan.F90, lcao.F90,
	  linalg.F90, linalg_lapack.F90, math_inc.F90, mix.F90,
	  phonons.F90, states_inc.F90:	*) There is a new file for the
	  LAPACK-based routines.
	   *) No more LAPACK routines are called from the rest of the code
	  directly.
	   *) Added some use statements.

2004-01-23 18:25  marques

	* src/: atom.F90, atomic.F90, broad.F90, cf.F90, cf_inc.F90,
	  complex.F90, eigen.F90, eigen_cg2.F90, eigen_cg3.F90,
	  eigen_plan.F90, epot.F90, epot_inc.F90, f_inc.F90, fftw2.F90,
	  fftw3.F90, geom_opt.F90, global.F90, global.h, h.F90, h_inc.F90,
	  h_so.F90, h_xc_OEP.F90, hgh.F90, hs_from_acc.F90,
	  hs_from_mult.F90, lasers.F90, lcao.F90, liboct.F90,
	  liboct_parser.F90, linalg.F90, linear.F90, logrid.F90,
	  make_st.F90, math.F90, math_inc.F90, mesh.F90, mesh_create.F90,
	  mf_inc.F90, mix.F90, opt_control.F90, out_inc.F90, pes.F90,
	  pes_mask.F90, pes_rc.F90, phonons.F90, poisson.F90,
	  poisson1D.F90, poisson2D.F90, poisson3D.F90, ps.F90, real.F90,
	  rotational_strength.F90, run.F90, scf.F90, specie.F90,
	  specie3D.F90, spectrum.F90, spline.F90, states.F90,
	  states_inc.F90, states_kpoints.F90, static_pol.F90,
	  strength_function.F90, systm.F90, td.F90, td_calc.F90,
	  td_exp.F90, td_exp_split.F90, td_init.F90, td_rti.F90,
	  td_write.F90, tm.F90, units.F90, unocc.F90, vxc.F90, xc.F90,
	  xc_GGA.F90, xc_KLI.F90, xc_LDA.F90, xc_OEP_SIC.F90, xc_OEP_x.F90,
	  xc_pot.F90, xyzanim.F90: Changed all real(r8), etc. into FLOAT.
	  Also removed the r8

2004-01-23 15:47  micael

	* liboct/: Makefile.am, oct_f.c, oct_gsl_f.c:  *) The GSL
	  interfaces in liboct are now in an independent file.

2004-01-23 15:22  micael

	* configure.ac:  *) Bug fixed in the configure.ac file.

2004-01-23 09:59  acastro

	* src/mix.F90: Bug fixed.  Description: in mix_end, smix should be
	  intent(inout) if it has to be deallocated (Compaq Fortran 90
	  compiler complains otherwise...)

2004-01-23 01:00  marques

	* src/Makefile.am: Sorry, forgot to get rid of these lines that are
	  no longer necessary.

2004-01-23 00:58  marques

	* configure.ac, src/Makefile.am, src/config.h.in: *) First step in
	  the configuration file towards building a single precision code.
	  *) Now the utilities are only generated if complex wfs, single
	  precision, and mpi are turned off. In fact, the utilities should
	  only be generated once.

2004-01-22 17:28  micael

	* src/f.F90:  *) Bug fixed. An end if statement was misplaced.

2004-01-22 16:51  marques

	* src/Makefile.am:
	  epot_inc.F90 was not included in the distribution.

2004-01-22 14:24  acastro

	* src/h.F90: Bug fixed.

2004-01-22 12:46  acastro

	* src/mix.F90: Sorry, I re-committed the old version of mix.F90....

2004-01-22 12:42  acastro

	* src/: eigen.F90, eigen_cg2.F90, eigen_cg3.F90, eigen_plan.F90,
	  h.F90, h_inc.F90, h_so.F90, h_xc_OEP.F90, lcao.F90, mix.F90,
	  td_calc.F90, td_exp.F90: Simplified the interface to the operator
	  calls in the module hamiltonian.  Now the states_type st is no
	  longer passed. Now all the operators have an interface such as
	  subroutine x(h, m, inpsi, outpsi, [sys], [ik], [t]) where sys, ik
	  and t are sometimes there. I would like to remove also those
	  three, although that will have to be thought about.

2004-01-22 11:48  micael

	* src/mix.F90:	First step towards Octopus 1.4... ;)
	   *) Removed BLAS stuff from module mix.

2004-01-21 17:03  marques

	* configure.ac: Version is now 1.3

2004-01-21 16:14  marques

	* doc/Makefile.am: Small bug in Makefile.am

2004-01-21 16:10  micael

	* src/: fftw2.F90, fftw3.F90:  *) Bug fixed: use statement missing.

2004-01-21 12:05  micael

	* doc/octopus.dvi, doc/octopus.info, doc/octopus.info-1,
	  doc/octopus.info-2, doc/octopus.info-3, doc/octopus.texi,
	  src/scf.F90:	*) The name of some input options was not
	  consistent.

2004-01-21 10:01  micael

	* src/scf.F90:	*) Bug fixed.

2004-01-13 19:10  acastro

	* src/lcao.F90: Forgot to remove the "M_HALF", so the density was
	  exactly half what it should be.

2004-01-13 15:06  acastro

	* src/out.F90: Added one comment to explain what output_fill_how
	  does, because of popular demand.

2004-01-13 11:52  acastro

	* src/lcao.F90: Initial density is now built in a different way:
	  atoms which are spin polarized will create a spin-polarized
	  density. Let us see how it works...

2004-01-12 16:26  marques

	* src/states_inc.F90: Small bug corrected that made the code crash
	  in a parallel run if OutputWfns was on.

2004-01-05 11:17  acastro

	* src/epot.F90: Bug fixed.  Description: in module epot, subroutine
	  epot_generate, vpsl should be initialized to zero before starting
	  to add the contributions from the atoms.

2004-01-03 19:51  acastro

	* src/td_rti.F90: Removed one line that was there for debugging.

2003-12-23 21:49  acastro

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.texi: New updates to the manual.  It is
	  more or less consistent now, although I think we have to do a lot
	  more work on the manual (and documentation in general) before
	  Benasque...

2003-12-20 13:48  acastro

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.info-3, octopus.texi: Some updates in the manual.  Note:
	  DON'T release a tagged version 1.3 yet! I am not done yet with
	  the manual. I wanted to commit because I am leaving now for
	  Christmas. Will try to commit the rest over the weekend.

2003-12-18 18:49  acastro

	* src/: td_exp.F90, td_rti.F90: Split operator and Suzuki-Trotter
	  are now also evolution methods (TDEvolutionMethod = 0, 1,
	  respectively), as well as exponential methods. This means that
	  using them as exponential methods is somehow redundant, and
	  problably will be removed in the future. But since it is not
	  completely equivalent, let us leave them for a while.

	  The reason for doing this is that I wanted to write the
	  explanation of the methods in the manual, and realized that the
	  way it should be is this one. I am not done yet with the manual,
	  I am trying to be a bit verbose.

2003-12-18 17:23  acastro

	* src/: Makefile.am, fftw3.F90, rotational_strength.F90,
	  spectrum.F90, td_write.F90: * Added a new little program,
	  oct-rsf, to calculate the complex rotational strength function
	  (whose real part is the rotatory power). It is very similar to
	  oct-sf, and is contained in new file, rotational_strength.F90 I
	  am not going to document it for next release, since it is not
	  really tested, and I have done it in such a way that I have not
	  touched previous code, to avoid introducing bugs. After the
	  release, I will reorder some stuff to avoid repeated code.  *
	  Removed the warning when using FFTW3. I think it is mature
	  enough.

2003-12-15 18:03  micael

	* src/run.F90:	*) Bug fixed. Restarting static calculations with a
	  finite temperature was
	  not working.

2003-12-14 19:01  marques

	* src/: h_inc.F90, td.F90, td_write.F90: *) Added some (commented)
	  code in h_inc that allows the calculation of the RPA spectrum *)
	  Bug in the output of the Electronic Energy was corrected in td
	  (units problem).

2003-12-11 22:37  marques

	* configure.ac: Sorry, forgot to commit this file. Thanks to Tobias
	  for the notice.

2003-12-11 17:40  acastro

	* src/: epot.F90, h.F90, mix.F90, td_init.F90, td_rti.F90: *
	  Removed all pre-initialization of variables on type definitions
	  (such as "type(x), pointer :: x => NULL()", or "integer :: a =
	  0") due to two reasons:     (i) It is not standard Fortran 90,
	  and we have some users using the Portland compiler which does not
	  have that as an extension.	     (ii) Besides that, it seems
	  that it is not currenly well implemented  in the ifc version of
	  my PC cluster here, because after it was causing a strange memory
	  error.

	  * In td_rti, some call to calc_vhxc was asking for the
	  recalculation of the eigenvalues. For the rest of the calls, I
	  think that it is necessary to recalculate them.

2003-12-10 18:47  acastro

	* src/: h.F90, out.F90, out_inc.F90, states_inc.F90: * Subroutine
	  output_function does not need as an input the full derived data
	  type output_type, only the integer "how".

	  * I added an integer function "output_fill_how" to build this
	  "how" number from a string. If that string contains the substring
	  "AxisX", "PlaneY", "DX", etc, it builds the how accordingly. That
	  is:

	  how = output_fill_how("AxisXDX")

	  will build a how integer that, when passed to "output_function",
	  would request the printing of the x axis and of the dx data. This
	  permits a fast way to print functions, for example:

	  call doutputfunction(output_fill_how("AxisX_and_DX"), ".", "f",
	  m, f, M_ONE)

2003-12-10 15:18  acastro

	* src/Makefile.am: Bug fixed.  Description: compilation of
	  "oct-geomcenter" did not work in kadesh..

2003-12-10 13:45  acastro

	* src/Makefile.am: Bug fixed.  Description: I added the liboct.F90
	  source to the x_SOURCES line for some of the auxiliary programs.
	  It seems that the xlf90 compiler in kadesh needs it.

2003-12-09 16:16  marques

	* doc/: octopus.info, octopus.info-1, octopus.info-2, octopus.texi:
	  small bug in the documentation also

2003-12-09 16:16  marques

	* src/: Makefile.am, eigen_cg2.F90, eigen_cg3.F90, geom_opt.F90,
	  h_inc.F90, h_xc_OEP.F90, lasers.F90, opt_control.F90, out.F90,
	  phonons.F90, run.F90, scf.F90, td.F90, td_rti.F90, xc.F90,
	  xc_KLI.F90, xc_OEP_SIC.F90, xc_OEP_x.F90, xc_pot.F90: *) OEP
	  seems to work for a 1D system. It is a bit clumsy still.  *)
	  changed order of calculation in calc_vhxc *) Bug corrected in
	  Lasers (Mode=10 didn't work so well)

2003-12-04 14:54  acastro

	* src/math_inc.F90: CRAY compiler does not accept lines longer that
	  132 characters...

2003-12-04 14:38  acastro

	* src/mesh.F90: Stupid CRAY compiler did not like that line.

2003-12-03 16:15  marques

	* src/: xc_KLI_SIC.F90, xc_KLI_x.F90: Forgot to remove these 2
	  files.

2003-12-03 16:09  marques

	* src/: h_xc_OEP.F90, xc_OEP_SIC.F90, xc_OEP_x.F90: Files
	  xc_KLI_[x|SIC] where renamed to xc_OEP_[x|SIC].

2003-12-03 16:08  marques

	* src/: Makefile.am, h.F90, h_inc.F90, xc.F90, xc_KLI.F90,
	  xc_pot.F90: Changed a couple of things to pave the way for the
	  full OEP solution.  On the way, I added the possibility of
	  running OEP within Slater's approximation (can we now say that
	  octopus performs somekind of Hartree-Fock calculations, now?)

2003-12-03 15:21  micael

	* src/mix.F90:	*) GR-Pulay mixing now works for non-colinear spin
	  calculations.

2003-12-03 12:13  acastro

	* src/td_rti.F90: Bug fixed.

2003-12-03 12:06  acastro

	* src/: math_inc.F90, td_rti.F90: Removed subroutine "xpolate_pot"
	  from td_rti, and built X(extrapolate) in math_inc, where it makes
	  more sense. It is able now to extrapolate /interpolate to orders
	  1-4, instead of only 2 as before.

2003-12-02 20:41  acastro

	* src/: h_inc.F90, td_exp.F90, td_rti.F90: Added the Magnus (4th
	  order) propagation algorithm. It may be useful when very high
	  frequencies are present. The option is TDEvolutionMethod=5 (I
	  will change the manual... sometime.) By the way, it is
	  incompatible with the split-operator or Suzuki-Trotter
	  exponential methods. In fact I think I will move those
	  "exponential methods" to be "propagator methods".

2003-12-02 18:46  marques

	* src/: h.F90, h_inc.F90, lasers.F90, opt_control.F90, scf.F90,
	  td_exp_split.F90: h%vhartree and h%vxc are gone. One the way I
	  corrected a couple of bugs.  There may be some problem if one
	  uses cg to solve the poisson equation, for now we don't have
	  access to the old potential. As nobody is using it right now,
	  we'll think about this later...

2003-12-02 18:07  marques

	* src/: Makefile.am, epot.F90, epot_inc.F90, geom_opt.F90, h.F90,
	  h_external_pot.F90, h_forces.F90, h_inc.F90, opt_control.F90,
	  phonons.F90, run.F90, scf.F90, td.F90, td_calc.F90,
	  td_exp_split.F90, td_init.F90, td_write.F90: *) I broke the
	  hamiltonian module in 2 parts, hamiltonian, and external_pot *)
	  removed some commented code from td_calc (it didn't compile
	  anyway)

2003-12-02 14:01  acastro

	* src/td_rti.F90: * Now the two first iterations of the evolution
	  are performed "self consistently"; that is, they are repeated
	  until the potential at time t+dt does not change (much). Before
	  they were performed with the method that did not require
	  extrapolation.  * The "old reversal method", one of the last
	  heritages of the old code, is gone. Nobody uses it, it has a very
	  unclear theoretical foundation, and does not perform better than,
	  say, the exponential midpoint rule.

2003-12-02 10:27  micael

	* src/: geom_opt.F90, h.F90, h_inc.F90, opt_control.F90,
	  phonons.F90, run.F90, scf.F90, td.F90, td_rti.F90:  *) Combined
	  subroutines hamiltonian_setup and calcvhxc into a single
	  subroutine named h_calc_vhxc.

2003-12-01 19:31  acastro

	* src/: states_inc.F90, td_write.F90: Bug fixed.  Description: the
	  calculation of the angular momentum of the system in parallel did
	  not work.

2003-12-01 18:56  micael

	* doc/octopus.info, doc/octopus.info-1, doc/octopus.info-2,
	  doc/octopus.texi, src/linalg.F90, src/mix.F90:  *) Added a new
	  mixing scheme: GR-Pulay. It seems better than Broyden in
	  certain cases and does not require any parameter. When using it,
	  you can (should?) use a bigger number of steps to extrapolate the
	  new density/potential.  NOTE: for now it DOES NOT work with
	  non-colinear-spin.   *) Rewrote mixing module to allow some other
	  changes in the near future...

2003-12-01 13:41  marques

	* doc/: octopus.info, octopus.info-1, octopus.info-2, octopus.texi:
	  Manual now reflects the changes in the xc part of the code.

2003-12-01 12:54  marques

	* src/: atom.F90, specie.F90: Code didn't compile in my machine.

2003-12-01 12:48  acastro

	* src/: td.F90, td_exp_split.F90, td_rti.F90: Bug fixed.
	  Description: Since some daysm, the application of the Hamiltonian
	  is done considering h%vhxc, and not h%vh or h%vxc individually.
	  The routines in td_rti were not considering this, so there was an
	  inconsistency. The error was numerically small. Anyway it looks
	  much nicer now.  Comment: h%vhartree and h%vxc are now never used
	  outside hamiltonian_setup, in order to properly calculate the KS
	  energy.  Maybe we can think about removing them from h...

2003-11-28 16:58  marques

	* src/: Makefile.am, atom.F90, atomic.F90, broad.F90,
	  centergeom.F90, cf.F90, cf_inc.F90, choose_st.F90, complex.F90,
	  config.h.in, eigen.F90, eigen_cg2.F90, eigen_cg3.F90,
	  eigen_plan.F90, excitations.F90, f.F90, geom_opt.F90, global.F90,
	  global.h, h.F90, h_forces.F90, h_inc.F90, hgh.F90,
	  hs_from_acc.F90, hs_from_mult.F90, lasers.F90, lcao.F90,
	  liboct.F90, liboct_parser.F90, linalg.F90, linear.F90,
	  logrid.F90, main.F90, make_st.F90, math.F90, math_inc.F90,
	  mesh.F90, mix.F90, opt_control.F90, out.F90, out_inc.F90,
	  pes.F90, phonon_spectrum.F90, phonons.F90, poisson.F90, ps.F90,
	  pulpo.F90, real.F90, run.F90, scf.F90, specie.F90, spectrum.F90,
	  spline.F90, states.F90, states_inc.F90, static_pol.F90,
	  strength_function.F90, systm.F90, td_exp.F90, td_exp_split.F90,
	  tm.F90, units.F90, unocc.F90, vxc.F90, xc_KLI_SIC.F90,
	  xc_pot.F90, xyzanim.F90:
	  *) Changed the names of the executables to something sensible
	  (i.e., starting with oct) *) removed the R_FUNC() in favor of X()
	  *) cleaned the use of use. Now I will try to make a map of the
	  modules.  *) more stuff to hide LAPACK from the code (can someone
	  test this?)

2003-11-28 14:13  marques

	* src/: Makefile.am, mf_inc.F90, xc_KLI_SIC.F90: Trivial things I
	  had forgotten in the last commit.

2003-11-28 14:08  marques

	* src/: Makefile.am, h_inc.F90, linalg.F90, math.F90, mf.F90,
	  mf_inc.F90, mix.F90, xc.F90, xc_HJU.F90, xc_KLI.F90,
	  xc_KLI_SIC.F90, xc_KLI_x.F90, xc_LDA.F90, xc_pot.F90: Several
	  changes:   *) created the module linalg that for now contains the
	  BLAS and LAPACK interfaces.	 *) The xc part is finally
	  completed. In particular HJU is removed (who cared anyways?), EXX
	  and SIC are now working. In particular, SIC did not work for 21
	  months ;(

2003-11-27 17:31  micael

	* src/: eigen_plan.F90, math.F90, td_exp.F90: Forgot one
	  interface...

2003-11-27 16:24  micael

	* src/: f.F90, f_inc.F90, h.F90, h_inc.F90, h_so.F90, lcao.F90,
	  linear.F90, math.F90, math_inc.F90, mf.F90, mf_inc.F90, mix.F90,
	  phonons.F90, states_inc.F90, td_exp.F90, td_exp_split.F90,
	  td_rti.F90, xc_GGA.F90:  *) Added explicit interfaces for BLAS
	  and LAPACK routines.
	   *) Fixed some small bugs in some BLAS and LAPACK calls.
	  NOTE: For now on only the first element of an array should be
	  passed to BLAS or LAPACK routines.

2003-11-26 15:34  rozzi

	* src/h_inc.F90: ifdef necessary if we want an explicit interface
	  to blas subroutine axpy

2003-11-24 16:24  acastro

	* src/run.F90: Bug fixed.  Description: the calculation of the
	  hamiltonian spectral range did not work well for dimensions less
	  than 3.

2003-11-24 15:04  acastro

	* src/mix.F90: Bug fixed.  Description: linear mixing was not
	  working.

2003-11-21 19:28  acastro

	* src/xc_GGA.F90: Some cleaning of xc_GGA, as requested. Maybe I
	  should add some comments, but I will leave that for some other
	  day.

2003-11-21 17:05  marques

	* src/scf.F90: Cosmetics   *) Memory should not be alloated by
	  real(8) :: x(m%np), because the compiler may try to allocate this
	  apce in the stack wchich may lead to some nice stack overflows ;)
	  Or even worse, the space may not be deallocated at all. It's
	  better to declare it as allocatable, and allocate it explicitly.
	  Like this the space goes to the heap.

2003-11-21 15:59  micael

	* src/mix_inc.F90: Forgot to remove file mix_inc.F90...

2003-11-21 15:52  micael

	* doc/octopus.info, doc/octopus.info-1, doc/octopus.info-2,
	  doc/octopus.texi, liboct/config.h.in, src/Makefile.am, src/h.F90,
	  src/h_inc.F90, src/lcao.F90, src/mix.F90, src/run.F90,
	  src/scf.F90, src/states.F90, src/states_inc.F90: My first commit
	  :)  *) There is now a new input option called What2Mix. If 0
	  (default) Octopus will mix the density in the SCF cycle. If 1 it
	  will mix the hartree+xc potentials. It seems that mixing the
	  potential is a little bit better. More tests needed...   *)
	  Cleaned the mix module.   *) Moved contents of mix_inc.F90 to
	  states_inc.F90 (makes more sense)   *) Replaced the total energy
	  convergence criteria by a new one: the sum of the eigenvalues. It
	  is more usefull to analize the convergence rate. There is now a
	  new function in states.F90 to compute the eigenvalues sum.

2003-11-21 14:22  marques

	* src/: xc.F90, xc_GGA.F90, xc_LDA.F90, xc_pot.F90: Started
	  cleaning the xc part of the code.    *) The variables XFamily and
	  CFamily no longer exist.    *) PBEX was no longer necessary, so
	  it's gone.	*) Now we use flags to determine the xc functional.
	  *) KLI is commented out for now.

2003-11-20 17:24  marques

	* configure.ac: This line was giving problems in kadesh!

2003-11-20 17:10  marques

	* src/: td.F90, td_write.F90: Took several subroutines out of
	  td_run. Unfortunately, the code still does not compile with '-O5
	  -hot' in SP4 ;(

2003-11-20 02:52  marques

	* src/: Makefile.am, opt_control.F90, run.F90, td.F90, td_exp.F90,
	  td_init.F90, td_rti.F90, td_write.F90: *) I separated td_rti into
	  an independent module *) Sevral other small cleanings in td

2003-11-19 19:18  acastro

	* src/: h.F90, h_inc.F90, spectrum.F90, strength_function.F90: *
	  The cutoff should be multiplied by two when the Laplacian is
	  called, since that seems to be the convention...  * I added a
	  Gaussian damping function to the Lorentzian and Polynomial
	  options for the calculations of the spectra, since that is the
	  best choice for some people called J. Dai and J. Z. Zhang (J.
	  Chem. Phys. 103, 1491 (1995)).

2003-11-19 17:08  marques

	* src/lcao.F90: Solved a segmentation fault in the alphas. The
	  arguments of a BLAS routine were wrong.

2003-11-19 13:44  acastro

	* src/h.F90: Bug fixed.  h%vnl_space variable was unitialized and
	  caused problems when running with the "-C" flag.

2003-11-19 11:56  acastro

	* src/atomic.F90: Bug fixed.  Portland Compiler did not like some
	  old-style stuff in that file.

2003-11-18 12:48  acastro

	* src/: eigen.F90, eigen_plan.F90, f.F90, mesh.F90,
	  mesh_create.F90, mf_inc.F90, poisson.F90, poisson3D.F90, scf.F90:
	  Added the high-frequency filter operator in real space,
	  "mf_filter".	Also some minor modifications  (getting rid of the
	  pointer attribute of some variables...)

2003-11-18 09:03  acastro

	* src/math.F90: Bug fixed.  Description: Forgot one '#'

2003-11-18 02:45  marques

	* src/h_external_pot.F90: just comments, really ;)

2003-11-18 02:38  marques

	* src/: Makefile.am, eigen.F90, eigen_cg1.F90, eigen_cg2.F90,
	  eigen_plan.F90, f.F90, h_external_pot.F90, math.F90, mesh.F90,
	  mesh_create.F90, mf_inc.F90, poisson.F90, poisson3D.F90: Several
	  bug fixes.

2003-11-17 19:13  marques

	* src/: Makefile.am, excitations.F90, h.F90, h_inc.F90,
	  hartree.F90, hartree1D.F90, hartree2D.F90, hartree3D.F90,
	  linear.F90, poisson.F90, poisson1D.F90, poisson2D.F90,
	  poisson3D.F90, xc.F90, xc_HJU.F90, xc_KLI.F90, xc_KLI_SIC.F90,
	  xc_KLI_x.F90, xc_pot.F90: *) Renamed the hartree* into poisson*.
	  It makes much more sense like this *) hartree now uses the new cf
	  infrastructure

2003-11-16 17:09  acastro

	* src/: f.F90, hartree.F90, hartree3D.F90, mesh.F90,
	  mesh_create.F90, mf_inc.F90: Reorganization of the calculation of
	  derivatives in real space.

2003-11-14 02:10  marques

	* src/td_exp.F90: cvs seems to have forgotten these files...

2003-11-14 02:00  marques

	* src/: Makefile.am, eigen_plan.F90, f.F90, f_inc.F90, h.F90,
	  h_inc.F90, mesh.F90, mesh_create.F90, mesh_inc.F90, mf_inc.F90,
	  states.F90, states_inc.F90, static_pol.F90, systm.F90, td.F90,
	  td_exp.F90, td_exp_split.F90, td_init.F90, td_rti.F90,
	  xc_GGA.F90: Lots of cleaning again. mesh_inc is gone, and its
	  functions are now scattered in different places in the code.
	  Everything seems to work, but we will need a lot of testing ;)

2003-11-13 15:06  marques

	* src/global.h: Forgot this file...

2003-11-12 19:29  marques

	* src/: Makefile.am, cf.F90, cf_inc.F90, f.F90, f_inc.F90,
	  fftw2.F90, fftw3.F90, h.F90, h_external_pot.F90, h_forces.F90,
	  mesh_inc.F90, run.F90, specie.F90, specie1D.F90, specie3D.F90:
	  Further cleaning. It is still not ready, but I hope tomorrow it
	  will be ;)   *) mesh_gradq is gone.	 *) the calculation of the
	  external potential and the forces in FS is now done with the new
	  routines.

2003-11-11 11:04  marques

	* src/: Makefile.am, cf.F90, cf_inc.F90, complex.F90, f.F90,
	  f_inc.F90, fft.F90, fftw2.F90, fftw3.F90, global.F90,
	  h_external_pot.F90, h_forces.F90, h_inc.F90, hartree3D.F90,
	  mesh_inc.F90, mf.F90, mf_inc.F90, out.F90, out_inc.F90, real.F90,
	  states.F90, states_inc.F90, systm.F90, undef.F90, xc_GGA.F90:
	  There is a lot of code duplicated, but I am committing so that
	  you can understand what I am currently doing. The code compiles
	  and runs in my machines. Main changes are:   *) Created a
	  cube_function which handles functions defined on a cube   *)
	  Created a functions module that hadles functions in a mesh or in
	  the cube   *) Bug in the calculation of the gradient in Fourier
	  space solved

2003-11-06 18:54  marques

	* src/: Makefile.am, h_inc.F90, hartree.F90, hartree3D.F90,
	  lcao.F90, mesh_inc.F90, mf.F90, mf_inc.F90, mix.F90, states.F90,
	  states_inc.F90, td_calc.F90, xc.F90, xc_GGA.F90, xc_HJU.F90,
	  xc_KLI_x.F90: Cleaning! The major things are:   *) Created mf
	  (mesh_function) that handles stuff rpeviously contained in mesh
	  *) split derivatives in gradient + laplacian.  In the following I
	  will try to break large modules into smaller ones.

2003-11-05 16:57  acastro

	* src/: mesh_inc.F90, states_inc.F90, td.F90, td_init.F90,
	  td_write.F90: By setting TDOutputAngularMomentum=yes, the
	  expectation value of the angular momentum, <L>, may be written to
	  td.general/angular file.  In this way, the rotatory power
	  dispersion can be calculated (at least we will try to).

2003-11-05 12:54  acastro

	* src/: run.F90, td.F90, td_exp.F90: Bug fixed.  Description: the
	  hamiltonian spectral width was not properly calculated, and, as a
	  result, the Chebyshev polynomial expansion did not work properly.

2003-11-03 21:59  acastro

	* src/: h.F90, h_inc.F90, td_exp.F90: * Defined some constants in
	  hamiltonian module, to characterize the borders.  (NO_ABSORBING,
	  IMAGINARY_ABSORBING, MASK_ABSORBING) * Removed the possibility of
	  using the Lanczos exponential method with non-hermitian
	  Hamiltonians. Maybe I will put it back in the future, but it does
	  not seem to work too well.  * I have cleaned and refined the
	  Lanczos method. It is more efficient now.

2003-11-03 21:31  acastro

	* src/math_inc.F90: Bug fixed.	Description: Matrix exponentiation
	  for non-hermitian matrices did not work for matrices of very
	  small norm.

2003-10-29 14:57  marques

	* src/main.F90: Attempt to solve the bug found by Giacomo Mulas
	  (http://www.tddft.org/pipermail/octopus-users/2003-October/000123.html)

2003-10-23 16:26  acastro

	* src/: h_inc.F90, mesh_inc.F90, td.F90, td_exp.F90: Split operator
	  and Suzuki-Trotter methods work again (they were broken). I did
	  some reordering (moved the exponential of the kinetic and
	  potential operators) from the td_exp subroutine to the
	  hamiltonian module.  The caveats are: it does not work for
	  spinors, and probably it does not work for the periodical cases.

2003-10-16 19:07  acastro

	* src/: Makefile.am, atom.F90, centergeom.F90, geom_opt.F90,
	  scf.F90, systm.F90, td_write.F90: octopus no longer adjusts the
	  geometry of the input file (AdjustCoordinates = yes); for this
	  purpose there is a new small program (oct-centergeom) that reads
	  the pdb, inp or xyz files and produces an "adjusted.xyz" file.
	  For this purpose I have made some reorganizing of some stuff: *
	  atom data type has now a "label" component.  * system_write_xyz
	  moved from system module to atom module (now it is called
	  atom_write_xyz) Some things remain to be done (like rotating the
	  molecule to the principal axis by calculating the inertial
	  tensor).  And I will change the names of all the programs to the
	  oct-xxx template, as suggested.

2003-10-15 12:18  acastro

	* src/: eigen.F90, unocc.F90: Bugs fixed.  Calculation of
	  unoccupied states seemed to never converge (although it did)

2003-10-14 20:14  acastro

	* src/eigen.F90: The variation between EigenSolverInitTolerance
	  and EigenSolverFinalTolerance follow now a logarithmic line,
	  instead of being linear. This makes more sense. It seems that:

	  EigenSolverInitTolerance = 1e-1 EigenSolverFinalTolerance = 1e-5
	  EigenSolverFinalToleranceIteration = 10

	  provides a pretty good performance.

2003-10-09 18:56  acastro

	* src/: h_inc.F90, vxc.F90, xc.F90, xc_GGA.F90, xc_pot.F90:
	  Modifications referred to the LB94 xc potential.  I have added
	  some variables to fine-tune it. Basicly it calculates the
	  potential whenever the density has significant value (above a
	  given threshold), and otherwise plugs in the known asymptotic
	  behaviour.  The input variables are: LB94_threshold: the above
	  mentioned threshold (default 1.0e-6) LB94_beta: the "beta"
	  arbitrary parameter that appears in the LB94 formula
	  (default 0.05) LB94_modified: applies a small modification to the
	  LB94 potential, but this	      is not the place to talk
	  about it (default no) Still unclear that this solves all the
	  problems, though: some discontinuities linger, and for some cases
	  the evolution is unstable.

2003-10-09 17:06  marques

	* src/xc_KLI_x.F90: EXX now gives the same numbers as 2 years ago!

2003-10-09 16:17  marques

	* src/main.F90: The code now prints properly where it is running
	  also with MPI.

2003-10-09 14:15  acastro

	* src/hgh.F90: Bug fixed.  Description: some "returns" were deleted
	  in a previous commit, and should be there because otherwise the
	  debugging mode gets screwed up (I think it is the only problem it
	  caused).

2003-10-09 11:49  acastro

	* src/unocc.F90: Bug fixed.  Description: Calculation of unoccupied
	  calculations crashed, due to the wrong allocation of eigens%diff
	  variable. What I have done now is not too elegant, but I need now
	  a quick solution to put the code running

2003-10-08 19:42  acastro

	* src/: out.F90, out_inc.F90, scf.F90: By setting the variable
	  "OutputDuringSCF=yes", the density and the hamiltonian is now
	  plotted at each step during the SCF cycle.  I found it useful so
	  I thought that it wouldn't be too costly to put it there.  Also I
	  changed the preprocessor MFORMAT in out_inc so that the functions
	  are printed with more precision.

2003-10-08 17:28  marques

	* src/excitations.F90: FFTs needed to be initialized.

2003-10-06 20:43  acastro

	* src/: eigen.F90, lcao.F90, run.F90, scf.F90, states.F90: Some
	  (small) changes: 1. The self consistent LCAO calculations
	  (SCFinLCAO=yes) is done now in a smarter way, so that it is
	  faster. It seems to help sometimes to get a good starting point
	  for the Broyden procedure. But it is not as fast as it can get;
	  however to do it faster one would need to code a lot more.  2.
	  The initial density for spin-polarized/spinors calculation was
	  very badly built before. Now it is always spin-unpolarized.  3.
	  Some cosmetic changes (pretty-printing at the end of each SCF
	  cycle iteration...)

2003-10-06 19:19  acastro

	* src/static_pol.F90: Bug fixed.  Did not compile when using
	  complex wavefunctions.

2003-10-03 17:59  acastro

	* liboct/oct_f.c, src/liboct.F90, src/mesh_inc.F90, src/run.F90,
	  src/static_pol.F90: I have changed the way in which the static
	  polarizability is calculated: Before it was:	  alpha(i, j) = [
	  dipole(i, E = k*e_j)-dipole(i,0) ] / k and now it is :  alpha(i,
	  j) = [ dipole(i, E = k*e_j)-dipole(i, E = -k+e_j) ] / (2*k) This
	  seems to be less sensitive to errors.  I also changed the default
	  value for k from 0.001 to 0.01, which seems to be better.

	  I cleaned some things a bit:	  * In oct_f.c, there is a new
	  function oct_rm to remove files.   * In mesh_inc.F90, there is a
	  new function to calculate a given  moment for a given function
	  defined in the mesh.	     * The possibility to restart a broken
	  calculation for the polar.  was broken (Run mode = 8). Now it
	  seems to work, at least in my machine.

2003-10-01 18:17  acastro

	* src/states.F90: Bug fixed.  States are no longer defined from 0
	  to m%np.

2003-09-29 20:39  marques

	* configure.ac, liboct/config.h.in, src/Makefile.am,
	  src/config.h.in, src/fft.F90, src/fftw2.F90, src/fftw3.F90,
	  src/h.F90, src/h_external_pot.F90, src/h_forces.F90,
	  src/hartree.F90, src/hartree3D.F90, src/mesh.F90,
	  src/mesh_inc.F90, src/pes.F90, src/run.F90, src/specie.F90,
	  src/td.F90, src/td_exp.F90, src/td_init.F90, src/td_write.F90,
	  src/xc.F90: Cleaned configuration for the fftw libraries octopus
	  now compiles *without* ffts

2003-09-11 17:45  acastro

	* src/: h_inc.F90, vxc.F90, xc_GGA.F90, xc_pot.F90:
	  Re-implementation of van Leeuwen & Baerends exchange-potential.
	  [PRA 49, 2421 (1994)].

	  I have changed it in a way that I think may avoid most of the
	  numerical instabilities that happened before. A couple of things
	  to note:

	  * Now it has some degree of "self-consistency": that is, its
	  value somehow depends on the value of the last eigenvalue, which
	  varies over the self-consistent cycle.  * The exchange energy is
	  not calculated, so that the total energy should not yet be
	  trusted if LB94 is used. I will fix that.  * Some values are
	  hard-coded. I will allow for more freedom by putting some new
	  variables in xc_type.  * Still, I think that LB94 could be
	  improved, we have to discuss it...

2003-09-11 15:48  acastro

	* src/math_inc.F90: Sorry, I never committed math_inc.F90

2003-09-11 15:45  acastro

	* src/: h.F90, mesh.F90: Bug fixed, and reorganization of code.

	  An important bug showed up when absorbing boundaries were used
	  with a parallelpiped-shaped box. I have removed it (after lots of
	  time lost looking somewhere else) and, on the way, reorganized a
	  bit that part.  Now there is a mesh function defined,
	  "mesh_inborder", which decides about a point being or not in the
	  border.

	  The reason for the reorder, besides aesthetical, is that I will
	  also use the concept of "border" to re-define the LB94 potential,
	  which I have been experimentig with [I think I have some ideas
	  about a safe way to apply it].

2003-09-03 17:03  acastro

	* src/: mesh_inc.F90, xc_GGA.F90: I sorted out the GGA problem
	  mentioned in previous commit. It seems now that we retrieve the
	  results that were obtained with version 1.1.	For that purpose: *
	  The extremely ugly calculation of the divergence of the
	  functional derivative of the "fxc" with respect to the gradient
	  of the density is removed from xc_GGA.  * A new subroutine is
	  defined in mesh: R_FUNC(mesh_divergence), which does the obvious
	  thing. It is now only defined in real space, making use of the
	  "lookup table" stuff. In this way "lxyz", "lxyz_inv" and all that
	  crap is not used in xc_GGA (I don't think those components should
	  be used outside the internal mesh routines... I don't know if
	  there is even a way of declaring them "private")

2003-09-03 12:55  acastro

	* src/xc_GGA.F90: GGA calculations were broken since the derivation
	  method had changed.  Two things to note:    * The way it is done
	  now is extremely ugly.     * I don't retrieve exactly the same
	  results with version 1.1 than  with current version, for GGA
	  calculations (small difference).  Both things should be
	  checked...

2003-09-03 12:18  acastro

	* src/: Makefile.am, math.F90, td_exp.F90: I improved a bit the
	  algorithm that calculates the exponential of a matrix, making it
	  a bit more general. Now it could be applied to matrices with
	  higher norms, and even to real matrices.  Now there is a
	  "math_inc.F90", included from math.F90, to allow for procedures
	  defined for real and complex variables.

2003-09-02 18:17  acastro

	* src/Makefile.am: Bug fixed.  The "==" operator is an extension in
	  bash; Bourne shell only admits "=".

2003-08-28 16:47  acastro

	* configure.ac: Bug fixed.  configure script was not doing what it
	  should about FFTW3/FFTW2.

2003-08-27 21:31  acastro

	* configure.ac, liboct/config.h.in, src/config.h.in, src/fft.F90,
	  src/hartree.F90, src/hartree3D.F90, src/run.F90: * Added support
	  for FFTW, version 3. This required changing octopus since the
	  FFTW team changed the interface to their subroutines. I have left
	  support for FFTW, version 2, however. So now the configure script
	  will try to find FFTW3 first (which should be called libfftw3.a),
	  and if it does not, it will revert to FFTW2. Now there are thus
	  two fft modules, which one is compiled is selected by the
	  preprocessor. The configure option for fftw is called
	  --with-fftw3; FFTW2 may be forced by doing --without-fftw3.

	  Of course, this is provisional; eventually FFTW2 support will
	  die.

	  I still have to do some checks (that is why the program emits a
	  warning when using FFTW3), and some benchmarks to see if FFTW3 is
	  so much faster as they claim.

	  * Bug fixed: Program crased in my computer when finishing
	  CalculationMode=1 in complex mode. It did so in run subroutine,
	  run.F90 file, line 118, when deallocating sys%st%R_FUNC(psi). I
	  believe it is a compiler error. However I avoided it by putting
	  the optional "stat=" argument to deallocate.

2003-08-26 19:18  acastro

	* src/: math.F90, td.F90, td_exp.F90: * Removed "matmul" from
	  td_exp, in favour of BLAS zgemm. The reason is apparently some
	  compilers have problems with matmul.

	  * In the way, removed two bugs in the Lanczos procedure, one of
	  them a compiler bug (ifc, version 7.1.028), and another one mine.
	  Probably this latter one was responsible for some annoying
	  results when using Lanczos method.

	  * Finally, mat_exp has been moved from td_exp, to math module,
	  where I think it belongs better. It also reduces the humongous
	  (yes, that is an English word) td module. Probably I will change
	  again mat_exp later to make it more general.

	  * A number of matmul are still in atom module. I will change them
	  also.

2003-08-25 21:42  acastro

	* configure.ac, liboct/config.h.in: Applied Tobias' patch about the
	  proper trlan web page.

2003-08-21 20:17  marques

	* doc/octopus.texi, src/fft.F90, src/h.F90, src/h_external_pot.F90,
	  src/h_forces.F90, src/hartree.F90, src/hartree3D.F90,
	  src/mesh.F90, src/mesh_create.F90, src/mesh_inc.F90,
	  src/out_inc.F90, src/pes.F90, src/pes_mask.F90, src/run.F90,
	  src/specie.F90, src/specie3D.F90, src/states_inc.F90, src/td.F90,
	  src/td_exp.F90, src/td_init.F90: *) ffts are now abstracted by an
	  interface module. This is, however, not enough to use fftw 3.0.
	  Further changes will be required.  *) got rid of most fft
	  information from inside mesh. This information is now where it is
	  needed.  *) for practical reasons, got rid of
	  nonlocalpseudopotential in FS. We never used it anyway

2003-08-18 16:50  marques

	* src/mesh_create.F90: Bug in the cretion of mesh found by Alberto
	  killed.

2003-08-13 14:38  marques

	* src/: choose_st.F90, eigen_cg2.F90, eigen_cg3.F90,
	  eigen_plan.F90, excitations.F90, global.F90, h_inc.F90, h_so.F90,
	  hartree.F90, hartree3D.F90, lcao.F90, make_st.F90, mesh.F90,
	  mesh_create.F90, mesh_inc.F90, opt_control.F90, run.F90,
	  states.F90, states_inc.F90, td.F90, td_calc.F90, td_exp.F90,
	  td_init.F90, td_rti.F90, td_write.F90, unocc.F90, xc_GGA.F90,
	  xc_KLI.F90, xc_KLI_SIC.F90, xc_KLI_x.F90: Started changing the
	  mesh stuff. Notice *) wfs now start at 1 and not at 0 as before.
	  The 0 is no longer necessary, for the information to calculate
	  the deivatives is in a lookup table *) hartree cg was completely
	  changed. I benchemarked it, but the results were strange. The
	  first time it is called it is 50% slower than before, but the
	  last time it is slightly faster.  *) low frequency is broken now.
	  The correct way to do it is to create a new mesh with a different
	  order for the laplacian (essencially m2 = m; allocate(m2%d);
	  m2%d%norder=1; call mesh_init_derivatives_coeff(m%d); call
	  mesh_init_xyz(m2); and then use this auxiliary mesh for the
	  calculation of the derivatives)

2003-08-05 02:53  marques

	* src/td_write.F90: I'm going to bed! I am forgetting too many
	  things ;(

2003-08-05 02:47  marques

	* configure.ac, src/global.F90, src/td_write.F90: *) changed
	  version number to 1.2 *) cosmetics

2003-08-05 00:14  marques

	* configure.ac: was still not OK... now it seems to work. What is
	  this trlan by the way?

2003-08-05 00:10  marques

	* configure.ac: Sorry, I had by accident delete Alberto's changes
	  to configure.ac

2003-08-05 00:03  marques

	* autogen.sh, configure.ac, doc/octopus.texi, liboct/config.h.in,
	  liboct/oct_f.c, liboct/varia.h, src/Makefile.am, src/atom.F90,
	  src/atomic.F90, src/config.h.in, src/eigen.F90,
	  src/eigen_cg2.F90, src/eigen_cg3.F90, src/eigen_plan.F90,
	  src/geom_opt.F90, src/global.F90, src/h.F90,
	  src/h_external_pot.F90, src/h_forces.F90, src/h_inc.F90,
	  src/h_so.F90, src/hartree.F90, src/hartree1D.F90,
	  src/hartree2D.F90, src/hartree3D.F90, src/hgh.F90,
	  src/lasers.F90, src/lcao.F90, src/main.F90, src/mesh.F90,
	  src/mesh_create.F90, src/mesh_inc.F90, src/mix.F90,
	  src/mix_inc.F90, src/ps.F90, src/run.F90, src/scf.F90,
	  src/specie.F90, src/states.F90, src/states_inc.F90,
	  src/static_pol.F90, src/systm.F90, src/td.F90, src/td_calc.F90,
	  src/td_exp.F90, src/td_init.F90, src/td_rti.F90, src/tm.F90,
	  src/units.F90, src/unocc.F90, src/xc.F90, src/xc_GGA.F90,
	  src/xc_KLI.F90, src/xc_LDA.F90, src/xc_pot.F90: *) octopus now
	  has a --enable debug *) all debug information goes to stderr *)
	  oct_gemem does something sensible now ;) *) sorry for the
	  inconvenience

2003-08-04 15:26  marques

	* liboct/varia.c, src/main.F90: Instead of printing the operating
	  system, octopus now prints the machine and the operating system.
	  This is quite useful, for sometimes I forget where the thing is
	  swimming ;)

2003-08-04 15:14  marques

	* doc/octopus.texi, src/run.F90, src/td.F90, src/td_init.F90,
	  src/td_write.F90: *) Small changes to the td output. Now I
	  consider it *clean* *) The famous projections (occ_analysis) are
	  now back to the code *) The manual is updated with the new names
	  for the TDOutput variables. Sorry for changing them, but you know
	  my opinion about it ;)

2003-08-02 21:33  marques

	* liboct/Makefile.am, liboct/write_iter.c, src/h.F90, src/run.F90,
	  src/td.F90, src/td_calc.F90, src/td_init.F90, src/td_write.F90: I
	  completely changed the output layer of the td part of octopus.
	  Now instead of storing the values in temporary arrays, it prints
	  them into a buffered file that is flushed only every N
	  iterations. Also delete the stuff related to the occupation
	  analysis.

2003-07-31 17:50  marques

	* doc/tutorial.tex: Small patch by Tobias.

2003-07-31 16:06  marques

	* doc/: Makefile.am, tutorial.tex, img/cover.ps, img/spacing.ps:
	  First go at a tutorial for octopus. Kindly prepared by Nicole
	  Helbig.

2003-07-29 17:21  acastro

	* src/: h_inc.F90, mesh.F90: Bug fixed.

2003-07-29 10:54  acastro

	* src/: h.F90, h_inc.F90, mesh.F90, mesh_inc.F90, td_exp.F90: If
	  derivatives are calculated on Fourier space, a cutoff may be
	  applied now to the kinetic operator through the variable
	  "KineticCutoff" in the input file. The operator G^2/2 is now
	  transformed to min(G^2/2, E_c).

2003-07-24 16:30  acastro

	* src/: mesh_inc.F90, td_exp.F90: A new subroutine called
	  R_FUNC(mesh_explaplq) calculates the exponential of the
	  laplacian. It was done previously in td_exp. It is very similar
	  to R_FUNC(mesh_laplq), but I have preferred to keep them
	  differently for the moment.

2003-07-24 11:03  acastro

	* src/td_exp.F90: * Split-operator and Suzuki-Trotter were
	  "potential-referenced" [e^(-i*dt*H) = e^(-i*dt/2*K) e^(-i*dt*V)
	  e^(-i*dt/2*K)  ], which involves four FFTs in our code. Doing it
	  "kinetic-referenced" (the kinetic term in the middle, applied
	  only once) is equivalent and needs only 2 FFTs.  * A bug still
	  lingered in the application of the non-local part of the
	  pseudopotential for split-operator and Suzuki-Trotter methods.

2003-07-23 08:01  acastro

	* src/: h_forces.F90, mesh.F90, mesh_inc.F90: Some reorganising...
	  mesh_laplacian_in_fs and mesh_gradient_in_fs are moved to
	  R_FUNC(mesh_laplq) and R_FUNC(mesh_gradq).  Also, mesh_laplq
	  allows now for a cutoff.

2003-07-22 18:04  acastro

	* doc/octopus.dvi, doc/octopus.info, doc/octopus.info-1,
	  doc/octopus.texi, src/mesh.F90: I have added a line to the output
	  of the code, showing the "cutoff energy" of the mesh. This value
	  is explained in the manual.

2003-07-22 16:38  acastro

	* doc/octopus.dvi, doc/octopus.info, doc/octopus.info-1,
	  doc/octopus.info-2, doc/octopus.texi, src/out_inc.F90: Applied
	  Tobias' patches.  Thanks!

2003-07-22 12:20  acastro

	* configure.ac, src/atom.F90, src/hgh.F90, src/main.F90,
	  src/ps.F90, src/spectrum.F90, src/states.F90, src/states_inc.F90,
	  src/td_write.F90, src/tm.F90, src/units.F90: Some changes needed
	  to compile the code on a SGI O3000:

	  * Weird compiler bug: write(string,'(a)') a//b//c causes the
	  compiler to crash. Substituted, where it appeared, to string =
	  a//b//c.  * All '//' concatenation symbols substituted to the
	  overloaded '+' * In configure.ac, added support for the SCSL
	  library (that comprises BLAS and LAPACK in Silicon Graphics
	  machines)

2003-07-17 18:59  acastro

	* src/states.F90: Removed some tabs, which are not standard to F90.

2003-07-17 15:44  acastro

	* src/: eigen_cg2.F90, states.F90, states_inc.F90: Bug fixed.  In
	  fact it is not a bug, but a serious performance problem.  It
	  seems in Fortran there is no (an easy) way to find out what the
	  hell the processor does when the arguments are passed, specially
	  arrays. In this case, apparently in the alpha as well as in the
	  linux machines, a copy of the wavefunctions was made every time.
	  This is absurd, only the pointer should be passed. Since those
	  copies are stored somewhere called the "stack", and it is a huge
	  variable, some of my alpha machines crashed at this point ("not
	  enough stack").  By doing the change I did, it seems to be OK. On
	  linux machines, I can see that now the memory does not grow when
	  gram_schmidt is called (before it did, and in fact it could grew
	  *a lot*).  This problem could be elsewhere in the code (I am sure
	  it is).

	  * Note: a source of problems, probably related to this, is the
	  fact that functions that will undergo derivation are defined from
	  0 to m%np, to have that auxiliar 0 point. We have to change that.
	  Suggestion: define from 1 to m%np+1, and let the m%np+1 be the
	  auxiliar point?

2003-07-16 15:33  acastro

	* doc/octopus.dvi: Forgot the dvi file.

2003-07-16 15:32  acastro

	* doc/: octopus.info, octopus.info-2, octopus.texi: Applied Tobias
	  patch to the documentation (Actually, I changed it a bit) Thanks!

2003-07-15 11:03  acastro

	* src/static_pol.F90: Bug fixed.  The calculation of the static
	  polarizability was broken.

2003-07-11 10:54  acastro

	* src/mesh_inc.F90: In previous commit I submitted a version which
	  is not yet ready.

2003-07-11 09:30  acastro

	* src/mesh_inc.F90: The low-frequency filter is applied now in a
	  simpler and faster way.

2003-07-10 22:34  acastro

	* src/h_inc.F90: Sorry, I did not really remove the bug...

2003-07-10 22:24  acastro

	* src/h_inc.F90: Bug fixed.  The eigenvalues were not updated in
	  "hamiltonian setup" if the independent particles option was
	  selected.

2003-07-08 17:42  acastro

	* doc/: octopus.dvi, octopus.info, octopus.info-1, octopus.info-2,
	  octopus.texi: * Finished (more or less) the documentation of the
	  wf.net utility. It is also complemented in the octopus manual.  *
	  The files octopus.info-1 and octopus.info-2 should be in the
	  distribution if octopus.info is (or else none of them should be
	  there).

2003-07-07 16:35  acastro

	* src/: run.F90, td.F90: Bug fixed.  The extrapolation potential
	  were not properly written/read to the restart.td.xxx files.

2003-07-04 12:45  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Refined the
	  visualization wf.net.  Added the necessary file wf.cfg, which I
	  had forgotten.  Added documentation about it to the manual.  The
	  embedded documentation is still missing, though.

2003-07-02 18:19  acastro

	* src/Makefile.am: Bug fix.  File vxc.o was passed twice to the
	  linker when linking excitations.  Some compilers don't like it.

2003-06-26 21:07  acastro

	* src/lcao.F90: Bug fixed.  Only showed up in certain calculations
	  of atoms with semicore.

2003-06-24 16:09  acastro

	* src/out_inc.F90: Bug fixed.  dx function output was printing only
	  the real part of a complex function.

2003-06-20 17:37  marques

	* src/: h_external_pot.F90, liboct.F90: Forgot these two files,
	  sorry.

2003-06-20 17:36  marques

	* src/: Makefile.am, atomic.F90, eigen.F90, geom_opt.F90,
	  global.F90, h.F90, h_inc.F90, hartree.F90, liboct_parser.F90,
	  mesh.F90, mix.F90, opt_control.F90, out.F90, pes.F90, run.F90,
	  scf.F90, specie.F90, spline.F90, td.F90, unocc.F90, xc.F90: I
	  broke the liboct in two parts: one containing only the parser,
	  and the rest. I'm doing this because there are persons that use
	  the parser in other programs. Consequently, I had to do very
	  small changes in a lot of files (essencially in use statements).

2003-06-20 17:28  marques

	* liboct/: Makefile.am, interface.c, liboct.h, oct_f.c, parse.c,
	  parse_exp.c, parser.h, parser_f.c, string_f.c, string_f.h: I
	  broke the liboct in two parts: one containing only the parser,
	  and the rest.  I'm doing this because there are persons that use
	  the parser in other programs.  Consequently, I had to do very
	  small changes in a lot of files (essencially in u se statements).

2003-06-18 19:40  rozzi

	* src/h_external_pot.F90: This expression for the external
	  potential looks like a bit better, but maybe we miss a constant
	  factor.

2003-06-18 19:37  rozzi

	* src/atom.F90: Bug fixed (thanks to Alberto)

2003-06-17 17:39  rozzi

	* src/ps.F90: I need the logrid to integrate the local pseudo part,
	  but I am not able to get it as a pointer, so I have awfully
	  copied the part of the structure I need. I hope it will be more
	  elegant in future.

2003-06-17 17:34  rozzi

	* src/h_external_pot.F90: *) Bug fixed in deallocation of
	  atm%phases that is not used in finite systems *) First attempt of
	  getting the correct local potential for periodic 3D (this comment
	  should have be done one commit ago). At the moment I guess it is
	  wrong...

2003-06-17 17:25  rozzi

	* src/atom.F90: Bug fixed in deallocation of atm%phases that is not
	  used in finite systems

2003-06-17 16:51  rozzi

	* src/h_external_pot.F90: Bug fixed: the KB check was not working
	  for cylindrical box

2003-06-17 16:37  acastro

	* src/ps.F90: Bug fixed.  Don't want to explain.

2003-06-17 09:28  acastro

	* liboct/interface.c, liboct/varia.c, src/liboct.F90, src/main.F90:
	  Bug fixed.  Description: The memory calculation in oct_getmem
	  function (interface.c) worked apparently only in linux systems.
	  I have added a function "sysname" in varia.c, where the name of
	  the OS is obtained throught the utsname structure, which seems to
	  be standard.	This way oct_getmem only works if "Linux" is read,
	  and otherwise returns -1.  Fortran subroutines also have access
	  to the OS name throught oct_sysname subroutine.  Note: the
	  oct_getmem function should be improved to work on other OSs, and
	  to work more elegantly on linux, by reading directly the /proc
	  filesystem.

2003-06-16 11:03  rozzi

	* src/h_external_pot.F90: The program is stopped if the KB sphere
	  is larger than the box.

2003-06-12 15:11  rozzi

	* src/states.F90: I always forget the debug stuff. Sorry.

2003-06-12 14:09  marques

	* src/states_inc.F90: Carlo overwrote a simple warning fix for the
	  CRAY ;) Put it back in.

2003-06-12 11:00  rozzi

	* src/unocc.F90: We want bands plotted for unoccupied states too.

2003-06-12 10:59  rozzi

	* src/td_calc.F90: We have to pass the k-point index to subroutine
	  for nonlocal potential

2003-06-12 10:58  rozzi

	* src/states_kpoints.F90: *) Bug fixed for periodicity > 1 in the
	  generation of the k-points mesh.  *) The new input variable
	  CenterOfInversion allows to use only the irreducible part of the
	  BZ (only in 1D :) *) Bug fixed: now the weights are correct ;) *)
	  If verbosity is > 80 the detailed list of k points is written to
	  info file

2003-06-12 10:49  rozzi

	* src/states_inc.F90: Added the routine to output squared modulus
	  of wf.

2003-06-12 10:48  rozzi

	* src/states.F90: I'm afraid I changed many things: *) the
	  subroutine states_write_bands is added to get bands in a
	  gnuplot/xmgrace friendly format; *) the number of k-points now
	  can be choosen on a per-axis basis: the variable NumberKPoints is
	  now a block_integer; *) the default number of k-points is 5,
	  because I like 5 more than 4, and because, if there is no center
	  of inversion, a point is close to G/2; *) no extra states are
	  added for periodic systems: the users must take care if the
	  system may be metallic

2003-06-12 10:42  rozzi

	* src/scf.F90: We want bands plotted for periodic systems. This is
	  the call to the relevant subroutine states_write_bands.

2003-06-12 10:39  rozzi

	* src/out.F90: Since the density output is still buggy for
	  unoccupied states of periodic systems, at least I added the
	  possibility of plotting the square modulus of all the wave
	  functions.

2003-06-12 10:35  rozzi

	* src/mesh_create.F90: *) A small bug is corrected in the logic of
	  mesh selection for periodic systems *) The nearest neighbours
	  images of the atoms used for the folding procedure are built in a
	  more efficient way if the periodicity is < 3.

2003-06-12 10:32  rozzi

	* src/mesh.F90: Beauty farm operation: irrelevant change in the
	  output.

2003-06-12 10:30  rozzi

	* src/h_inc.F90: This is the tragic phase factor that screwed up
	  the calculations in periodic systems with nonlocal potential. We
	  got you, at the end! Thank you Angel.

2003-06-12 10:27  rozzi

	* src/h_external_pot.F90: Now the folding of the nonlocal part of
	  pseudo in periodic systems works for TM2 too.

2003-06-12 10:26  rozzi

	* src/atom.F90: The structure "phases" has been added to store the
	  phase factors exp(ikr) that are used to build the periodic
	  nonlocal part of the pseudopotential

2003-06-11 21:03  acastro

	* src/: Makefile.am, atomic.F90, hgh.F90, mix.F90, ps.F90, tm.F90:
	  Very stupid changes: * Removed all the 0d0, 1d0... bad style
	  constants... (the CRAY complained about them) * Fixed some
	  problem with the linking of the "xyzanim" program.

2003-06-11 16:22  marques

	* liboct/interface.c: Bug fixed. The array c should be alloced to
	  l+1 and not l characters.

2003-06-10 14:56  acastro

	* src/xc_GGA.F90: Bug fixed.

2003-06-09 19:09  marques

	* liboct/config.h.in, liboct/interface.c, liboct/parse.c,
	  src/hartree3D.F90, src/math.F90, src/states_inc.F90, src/td.F90:
	  Code now compiles and runs in the CRAY T3E ;)

2003-06-09 10:58  acastro

	* src/: geom_opt.F90, liboct.F90: Bug fixes: * oct_geom_opt is no
	  longer existent. CRAY compiler compiled because it was declared,
	  although not used.  * Default integer type should be used
	  everywhere to avoid problems...

2003-06-09 01:01  marques

	* liboct/interface.c, src/atom.F90, src/atomic.F90, src/broad.F90,
	  src/choose_st.F90, src/eigen.F90, src/excitations.F90,
	  src/geom_opt.F90, src/global.F90, src/h.F90, src/hartree.F90,
	  src/hgh.F90, src/hs_from_acc.F90, src/hs_from_mult.F90,
	  src/lasers.F90, src/liboct.F90, src/linear.F90, src/main.F90,
	  src/make_st.F90, src/mesh.F90, src/mesh_create.F90, src/mix.F90,
	  src/opt_control.F90, src/out.F90, src/out_inc.F90,
	  src/pes_rc.F90, src/phonon_spectrum.F90, src/phonons.F90,
	  src/ps.F90, src/pulpo.F90, src/run.F90, src/scf.F90,
	  src/specie.F90, src/specie1D.F90, src/specie3D.F90,
	  src/states.F90, src/static_pol.F90, src/strength_function.F90,
	  src/systm.F90, src/td.F90, src/td_init.F90, src/tm.F90,
	  src/units.F90, src/unocc.F90, src/xc.F90, src/xyzanim.F90: Got
	  rid of all the C_string stuff. The string convertion is now
	  completely handl ed by the C. It seems to work in the PCs, alphas
	  and IBM. The code is not, howev er, completely portable. It is
	  not my fault! It is Fortran's fault for not knowi ng what a
	  string is!

2003-06-08 20:43  marques

	* share/PP/HGH/Ag.hgh, share/PP/HGH/Ag_sc.hgh, share/PP/HGH/Al.hgh,
	  share/PP/HGH/Ar.hgh, share/PP/HGH/As.hgh, share/PP/HGH/At.hgh,
	  share/PP/HGH/Au.hgh, share/PP/HGH/Au_sc.hgh, share/PP/HGH/B.hgh,
	  share/PP/HGH/Ba.hgh, share/PP/HGH/Ba_sc.hgh, share/PP/HGH/Be.hgh,
	  share/PP/HGH/Be_sc.hgh, share/PP/HGH/Bi.hgh, share/PP/HGH/Br.hgh,
	  share/PP/HGH/C.hgh, share/PP/HGH/Ca.hgh, share/PP/HGH/Ca_sc.hgh,
	  share/PP/HGH/Cd.hgh, share/PP/HGH/Cd_sc.hgh,
	  share/PP/HGH/Ce_sc.hgh, share/PP/HGH/Cl.hgh, share/PP/HGH/Co.hgh,
	  share/PP/HGH/Co_sc.hgh, share/PP/HGH/Cr.hgh,
	  share/PP/HGH/Cr_sc.hgh, share/PP/HGH/Cs.hgh,
	  share/PP/HGH/Cs_sc.hgh, share/PP/HGH/Cu.hgh,
	  share/PP/HGH/Cu_sc.hgh, share/PP/HGH/Dy_sc.hgh,
	  share/PP/HGH/Er_sc.hgh, share/PP/HGH/Eu_sc.hgh,
	  share/PP/HGH/F.hgh, share/PP/HGH/Fe.hgh, share/PP/HGH/Fe_sc.hgh,
	  share/PP/HGH/Ga.hgh, share/PP/HGH/Ga_sc.hgh,
	  share/PP/HGH/Gd_sc.hgh, share/PP/HGH/Ge.hgh, share/PP/HGH/H.hgh,
	  share/PP/HGH/He.hgh, share/PP/HGH/Hf_sc.hgh, share/PP/HGH/Hg.hgh,
	  share/PP/HGH/Hg_sc.hgh, share/PP/HGH/Ho_sc.hgh,
	  share/PP/HGH/I.hgh, share/PP/HGH/In.hgh, share/PP/HGH/In_sc.hgh,
	  share/PP/HGH/Ir.hgh, share/PP/HGH/Ir_sc.hgh, share/PP/HGH/K.hgh,
	  share/PP/HGH/K_sc.hgh, share/PP/HGH/Kr.hgh,
	  share/PP/HGH/La_sc.hgh, share/PP/HGH/Li.hgh,
	  share/PP/HGH/Li_sc.hgh, share/PP/HGH/Lu_sc.hgh,
	  share/PP/HGH/Mg.hgh, share/PP/HGH/Mg_sc.hgh, share/PP/HGH/Mn.hgh,
	  share/PP/HGH/Mn_sc.hgh, share/PP/HGH/Mo.hgh,
	  share/PP/HGH/Mo_sc.hgh, share/PP/HGH/N.hgh, share/PP/HGH/Na.hgh,
	  share/PP/HGH/Na_sc.hgh, share/PP/HGH/Nb.hgh,
	  share/PP/HGH/Nb_sc.hgh, share/PP/HGH/Nd_sc.hgh,
	  share/PP/HGH/Ne.hgh, share/PP/HGH/Ni.hgh, share/PP/HGH/Ni_sc.hgh,
	  share/PP/HGH/O.hgh, share/PP/HGH/Os.hgh, share/PP/HGH/Os_sc.hgh,
	  share/PP/HGH/P.hgh, share/PP/HGH/Pb.hgh, share/PP/HGH/Pd.hgh,
	  share/PP/HGH/Pd_sc.hgh, share/PP/HGH/Pm_sc.hgh,
	  share/PP/HGH/Po.hgh, share/PP/HGH/Pr_sc.hgh, share/PP/HGH/Pt.hgh,
	  share/PP/HGH/Pt_sc.hgh, share/PP/HGH/Rb.hgh,
	  share/PP/HGH/Rb_sc.hgh, share/PP/HGH/Re.hgh,
	  share/PP/HGH/Re_sc.hgh, share/PP/HGH/Rh.hgh,
	  share/PP/HGH/Rh_sc.hgh, share/PP/HGH/Rn.hgh, share/PP/HGH/Ru.hgh,
	  share/PP/HGH/Ru_sc.hgh, share/PP/HGH/S.hgh, share/PP/HGH/Sb.hgh,
	  share/PP/HGH/Sc.hgh, share/PP/HGH/Sc_sc.hgh, share/PP/HGH/Se.hgh,
	  share/PP/HGH/Si.hgh, share/PP/HGH/Sm_sc.hgh, share/PP/HGH/Sn.hgh,
	  share/PP/HGH/Sr.hgh, share/PP/HGH/Sr_sc.hgh, share/PP/HGH/Ta.hgh,
	  share/PP/HGH/Ta_sc.hgh, share/PP/HGH/Tb_sc.hgh,
	  share/PP/HGH/Tc.hgh, share/PP/HGH/Tc_sc.hgh, share/PP/HGH/Te.hgh,
	  share/PP/HGH/Ti.hgh, share/PP/HGH/Ti_sc.hgh, share/PP/HGH/Tl.hgh,
	  share/PP/HGH/Tl_sc.hgh, share/PP/HGH/Tm_sc.hgh,
	  share/PP/HGH/V.hgh, share/PP/HGH/V_sc.hgh, share/PP/HGH/W.hgh,
	  share/PP/HGH/W_sc.hgh, share/PP/HGH/Xe.hgh, share/PP/HGH/Y.hgh,
	  share/PP/HGH/Y_sc.hgh, share/PP/HGH/Yb_sc.hgh,
	  share/PP/HGH/Zn.hgh, share/PP/HGH/Zn_sc.hgh, share/PP/HGH/Zr.hgh,
	  share/PP/HGH/Zr_sc.hgh, share/PP/HGH/configurations,
	  src/atomic.F90, src/hgh.F90: The file configurations was not
	  closed, which lead to some nice IO error.  As I had to change it,
	  as took the oportunity to put the configurations where they
	  belonged to, i.e., in the .hgh files, instead of in an external
	  file.

2003-06-08 17:43  acastro

	* liboct/interface.c: Let us use gsl_asinh instead of asinh, to
	  make sure it is loaded always.

2003-06-08 17:39  acastro

	* liboct/interface.c, src/td_exp.F90: Bug fixes: * In interface.c,
	  the upper case name of oct_erf was wrong.  * Apparently, (M_ONE,
	  M_ZERO) is not a standard Fortran 90 complex constant...

2003-06-07 21:28  marques

	* doc/octopus.texi, share/PP/TM2/Li.ascii: texi did not compile.
	  Patch by Tobias.  added the Li potential to the cvs.

2003-06-06 20:17  acastro

	* src/Makefile.am: Bug fixed.

2003-05-31 22:04  acastro

	* src/: atomic.F90, hgh.F90, tm.F90: Code-saving change:
	  subroutines "calculate_valence_screening" in hgh and tm modules
	  go away, on behalf of "atomhxc" subroutine in module atomic,
	  where it belongs more naturally.

2003-05-31 17:53  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Bug fixed in
	  octopus.texi

2003-05-30 16:32  acastro

	* src/: atomic.F90, h_external_pot.F90, hgh.F90, lcao.F90, ps.F90,
	  tm.F90: Semicore HGH pseudopotentials are now handled.  (e.g., Na
	  with 2s^2 2p^6 3s configuration) It involved quite a few small
	  changes in a lot of subroutines, so although I checked a few
	  atoms to make sure I did not introduce any bug in the process,
	  the first commit is always buggy...

	  To make use of them, in the "species" block, instead of "Na",
	  "Cr" for the normal valence configuration, one has to put
	  "Na_sc", "Cr_sc", and so on (not that not all the elements have a
	  semicore configuration).  The name changes then accordingly in
	  the "Coordinates" block or in the xyz file. The pdb files pose a
	  problem to this.

2003-05-30 01:37  acastro

	* src/states.F90: Bug fix.  This bug has been there two months
	  unnoticed...

2003-05-28 23:46  acastro

	* share/PP/HGH/Ag.hgh, share/PP/HGH/Al.hgh, share/PP/HGH/Ar.hgh,
	  share/PP/HGH/As.hgh, share/PP/HGH/At.hgh, share/PP/HGH/Au.hgh,
	  share/PP/HGH/B.hgh, share/PP/HGH/Ba.hgh, share/PP/HGH/Be.hgh,
	  share/PP/HGH/Bi.hgh, share/PP/HGH/Br.hgh, share/PP/HGH/C.hgh,
	  share/PP/HGH/Ca.hgh, share/PP/HGH/Cd.hgh, share/PP/HGH/Cl.hgh,
	  share/PP/HGH/Co.hgh, share/PP/HGH/Cr.hgh, share/PP/HGH/Cs.hgh,
	  share/PP/HGH/Cu.hgh, share/PP/HGH/F.hgh, share/PP/HGH/Fe.hgh,
	  share/PP/HGH/Ga.hgh, share/PP/HGH/Ge.hgh, share/PP/HGH/H.hgh,
	  share/PP/HGH/He.hgh, share/PP/HGH/Hg.hgh, share/PP/HGH/I.hgh,
	  share/PP/HGH/Ir.hgh, share/PP/HGH/K.hgh, share/PP/HGH/Kr.hgh,
	  share/PP/HGH/Li.hgh, share/PP/HGH/Mg.hgh, share/PP/HGH/Mn.hgh,
	  share/PP/HGH/Mo.hgh, share/PP/HGH/N.hgh, share/PP/HGH/Na.hgh,
	  share/PP/HGH/Nb.hgh, share/PP/HGH/Ne.hgh, share/PP/HGH/Ni.hgh,
	  share/PP/HGH/O.hgh, share/PP/HGH/Os.hgh, share/PP/HGH/P.hgh,
	  share/PP/HGH/Pb.hgh, share/PP/HGH/Pd.hgh, share/PP/HGH/Po.hgh,
	  share/PP/HGH/Pt.hgh, share/PP/HGH/Rb.hgh, share/PP/HGH/Re.hgh,
	  share/PP/HGH/Rh.hgh, share/PP/HGH/Rn.hgh, share/PP/HGH/Ru.hgh,
	  share/PP/HGH/S.hgh, share/PP/HGH/Sb.hgh, share/PP/HGH/Sc.hgh,
	  share/PP/HGH/Se.hgh, share/PP/HGH/Sn.hgh, share/PP/HGH/Sr.hgh,
	  share/PP/HGH/Ta.hgh, share/PP/HGH/Tc.hgh, share/PP/HGH/Te.hgh,
	  share/PP/HGH/Ti.hgh, share/PP/HGH/Tl.hgh, share/PP/HGH/V.hgh,
	  share/PP/HGH/W.hgh, share/PP/HGH/Xe.hgh, share/PP/HGH/Y.hgh,
	  share/PP/HGH/Zn.hgh, share/PP/HGH/Zr.hgh, src/atomic.F90,
	  src/hgh.F90: (*) Added in module atomic, utilities to read and
	  write atomic valence configurations. Used by hgh to build the
	  pseudo-atomic-wavefunctions.	(**) In hgh module, the occupations
	  are now read through the SHARE_OCTOPUS/PP/HGH/configurations
	  file, not in the first line of the pseudopotential *.hgh file.
	  (***) Removed that first line from all the *.hgh files.

2003-05-28 21:32  acastro

	* share/PP/HGH/Makefile.am: I forgot to change this.

2003-05-28 20:07  acastro

	* share/PP/HGH/configurations: Added a "configurations" file, to
	  characterise the valence configurations used by Goedecker to
	  build his pseudopotentials.

2003-05-28 18:41  acastro

	* share/PP/HGH/W_sc.hgh: Bug fixed.

2003-05-28 18:34  acastro

	* share/PP/HGH/Yb_sc.hgh: Bug fix.  Fixed the number of valence
	  electrons also for Ytterbium.

2003-05-28 17:58  acastro

	* share/PP/HGH/Sm_sc.hgh: Bug fix.  The important "Samarium" atom,
	  whose existence I had completely ignored, and which costs about
	  $5/g, has 16 electrons in its HGH valence configuration.

2003-05-22 19:33  marques

	* doc/octopus.texi: Tobias added an entry to the manual, describing
	  the make_st utility.

2003-05-22 14:12  acastro

	* src/tm.F90: Bug fixed.  Bug found and tracked by Eugene
	  Kadantsev.  Some day I will do the cleaning up of the pseudo
	  stuff, which is in the wish list for next release...

2003-05-22 12:32  acastro

	* src/global.F90: Bug fixed.  This subtle thing crashed in some
	  alpha machine.

2003-05-21 18:42  marques

	* src/make_st.F90: Some bugs fixed.  Also the syntax of the input
	  (that is still not described in the manual) changed.

2003-05-20 10:34  acastro

	* src/xc_GGA.F90: Change of the noncollinear GGA routine.

	  Last version of GGA lead to non-converging calculation (e.g.,
	  Au3).  Now it turns out that everything may be simplified, since
	  apparentyly the operators R(r) (local rotation in spin space to
	  the frame where the density is diagonal) and the gradient
	  commute. So:

	  R(r)*grad[rho(r)]*conjg(R(r)) = grad[R(r)*rho(r)*conjg(R(r))]

	  (conjg(R(r)) is the hermitian conjugate of R(r)).

	  Before the routine was doing R(r)*grad[rho(r)]*conjg(R(r)), it
	  involved the explicit calculation of the matrices R(r), it was
	  complicated and did not work. Now it is doing
	  grad[R(r)*rho(r)*conjg(R(r))], the matrices R don't need to be
	  calculated, and seems to work. The point is that before I thought
	  that grad[R(r)*rho(r)*conjg(R(r))] did not make any sense at all.

	  I think this is what the (few) people that has done non-collinear
	  GGA has done (except for Kleinman, who has added some extra
	  term). I do not know if they are aware of previous equality,
	  because I have not seen it prooved or even stated anywhere.

2003-05-19 16:04  marques

	* liboct/symbols.c: Forgot to deallocate a string (bug tracked by
	  Wang Feng)

2003-05-19 13:34  acastro

	* src/eigen.F90: Bug fixed.  That initialized variable made the
	  code crash sometimes.

2003-05-14 00:26  marques

	* src/Makefile.am: Someone forgot to add this file ;))))

2003-05-13 22:58  marques

	* src/opt_control.F90: A few changes by Tobias.

2003-05-09 16:57  acastro

	* src/xc_GGA.F90: Bug fixed.

2003-05-08 12:11  marques

	* src/h.F90: Corrected bug found by Dr. Wang Feng in the
	  calculation of the absorbing boundaries.

2003-05-07 15:44  acastro

	* src/: states.F90, states_inc.F90, td.F90, td_init.F90,
	  td_write.F90: I have added a facility to calculate the component
	  of the ground state in the time-dependent TDDFT many-electron
	  wave-function. That thing is just the determinant of the matrix
	  formed by the dot-products of the single particle states of one
	  and other Slater determinant.  It is written when the variable
	  TDWriteGSComponent is set to yes in the input file. It is written
	  every OutputEvery iterations, to file "td.general/gs_projection".
	   It took me a while to set the MPI version; some communication is
	  needed.  It is the first version of it, so it might have some
	  bugs, since debugging MPI stuff is awful. Also, I am not very
	  confident about the way partial occupancies are (dis)regarded.
	  But I wanted to finally submit this crap.

	  To do that, I have done some extra things that could very well go
	  away, namely routines "states_copy" and "states_null". But we can
	  talk about that in next octopus meeting.

2003-05-05 12:15  acastro

	* src/specie.F90: Bug fix.  Those not-nullified pointers caused
	  some error in the linux cluster.

2003-04-29 11:33  acastro

	* src/math.F90: Functions cdet and zdet return the determinant of a
	  square matrix a, using LAPACK.

2003-04-27 16:21  acastro

	* src/: eigen_plan.F90, mesh_inc.F90: Bug fixed.

2003-04-23 18:22  acastro

	* src/: eigen.F90, eigen_cg2.F90, scf.F90, states_inc.F90,
	  unocc.F90: (1) The criterium to consider if a given eigenpair is
	  converged within the diagonalization process is now the same for
	  all the methods (CG and preconditioned Lanczos): it considers the
	  norm of the residue (that is, || H|psi> - <psi|H|psi>|psi> ||,
	  for normalized |psi> ). So now the methods can be compared
	  consistently. The variables EigenSolverInitTolerance and
	  EigenSolverFinalTolerance refer to this number and should of the
	  order of 1e-4 or 1e-5, I think.

	  (2) After the diagonalization, the eigenvalues are not calculated
	  again because are already known. I have changed a bit the way the
	  SCF cycle is done because I think this looks better, but I am not
	  sure about this. It does not seem to make much difference, but
	  take a look at the code in case you liked it better before.

2003-04-17 11:55  marques

	* src/eigen_plan.F90: File is now properly indented (my F90
	  compiler was complaining that tabs are an extension to Fortran
	  90!)

2003-04-17 11:43  marques

	* src/states.F90: Bug corrected: calc_current did not compile with
	  MPI.

2003-04-15 17:57  acastro

	* src/: Makefile.am, eigen.F90, eigen_plan.F90, mesh_inc.F90,
	  states.F90, states_inc.F90: Preconditioned Lanczos (PLAN) as
	  implemented by Chelikowsky's group (credit is to be given to Y.
	  Saad and K. Wu, I think) is now available in octopus.
	  Preconditioned is implemented via their idea of filtering (and
	  thus it is good for real space). I think that it is much better
	  that CG as we had it before. I don't know if it is better to
	  preconditioned-CG, since we don't have that yet -- still working
	  on it. Some comments: * Careful bechmarking between the methods
	  is not yet possible, since the convergence checks are now not
	  compatible: in CG it compared previous eigenvalue to current one,
	  and in PLAN it checks out the residuals. I think this is the
	  correct thing, and will change CG in the next days.  * Related to
	  previous comment, the variables EigenSolverInitTolerance,...
	  should now have a much bigger value (1e-4, for example) for PLAN,
	  since we don't need the residuals to be that small (I think).  *
	  Incidentally, I changed the random state builder a bit (a
	  R_FUNC(mesh_random) routine is now defined...)

2003-04-12 10:07  rozzi

	* src/mesh_create.F90: compatibility with spheric and cylindric
	  mesh (when allowed) and calculation of primitive lattice vectors

2003-04-11 10:59  rozzi

	* src/states_kpoints.F90: Bug corrected in output format

2003-04-10 20:28  rozzi

	* src/scf.F90: Added call kpoints_write_info

2003-04-10 20:28  rozzi

	* src/mesh_create.F90: Now it generates primitive vectors and
	  shifts to nearest neighbour primitive cells (necessary for Non
	  local Pesudo folding for periodic systems)

2003-04-10 20:27  rozzi

	* src/mesh.F90: *) Added lattice and reciprocal lattice primitive
	  vectors. Generated shift to reach all the equivalent points in
	  the nearest neighbour primitive cells.  *) Added primitive
	  lattice info in output

2003-04-10 20:26  rozzi

	* src/hartree.F90: Automatically switches to the correct Poisson
	  solver for periodic systems (more user friendly)

2003-04-10 20:25  rozzi

	* src/states_kpoints.F90: Added kpoints_write_info subroutine

2003-04-08 18:44  acastro

	* configure.ac, src/eigen.F90: A couple of bugs created by previous
	  commit are here fixed.

2003-04-08 17:00  acastro

	* configure.ac, src/Makefile.am, src/config.h.in, src/eigen.F90,
	  src/eigen_cg3.F90, src/states.F90: Added a Lanczos
	  diagonalization, by making use of the TRLan package, by K. Wu and
	  H. Simon. If TRLan is not installed, all the stuff is ignored
	  thanks to the preprocessor. I have added some stuff in the
	  configure.ac in order to detect it, although maybe I will have to
	  refine that in the future (I am not very good in writing autoconf
	  scripts). I have put it in my (hopeless?) effort to converge the
	  azobenzene, and also for the sake of comparison. For the moment,
	  I am having some troubles with degeneracies, I am going to ask Dr
	  Wu.  (Note: this used to be in the code in the past)

2003-04-08 13:47  marques

	* src/Makefile.am: Something missing in this file for 5 days and 22
	  hours ;)

2003-04-07 20:39  rozzi

	* src/Makefile.am: states_kpoints.F90 was missing

2003-04-07 18:22  rozzi

	* src/out_inc.F90: Bug corrected: different offset in periodic
	  directions

2003-04-07 18:18  rozzi

	* src/mesh_create.F90: mesh spacing is adjusted to fit the boxsize
	  (irrelevant for finite systems, but necessary for periodic)

2003-04-07 18:16  rozzi

	* src/mesh.F90: Bug corrected: the fourier transfor had the wrong
	  periodicity for polymers

2003-04-07 14:26  rozzi

	* src/out_inc.F90: Now, if OutputDX is set, the .dx files are in
	  native DX format, but, for polymers, only the real part of the
	  wave function is written.

2003-04-05 18:58  marques

	* src/: out_inc.F90, states.F90, states_inc.F90: *) Fixed bug in
	  outputtinh netCDF format. I had forgotten that stupid fortran
	  uses transposed matrices ;( *) I think the ELF is now correct...
	  let us find it if it is also useful ;)

2003-04-05 18:53  marques

	* src/mesh_inc.F90: debug stuff forgotten, now deleted ;)

2003-04-04 20:39  rozzi

	* src/mesh_inc.F90: bug corrected in the folding procedure

2003-04-04 16:30  rozzi

	* src/h.F90: reciprocal space for local potential must be used for
	  periodic systems: inserted a check on input

2003-04-04 16:29  rozzi

	* src/main.F90: info about dimensions are written only after the
	  logo

2003-04-04 14:07  marques

	* src/: mix.F90, states.F90, states_inc.F90: The expression for the
	  TDELF was not correct!!!!! I think it is OK now.

2003-04-04 13:26  marques

	* configure.ac: NetCDF is *not* used by default. Use ./configure
	  --with-netcdf to turn it on.

2003-04-03 18:10  marques

	* configure.ac, doc/octopus.texi, src/Makefile.am, src/config.h.in,
	  src/out.F90, src/out_inc.F90: *) Changes to configuration scripts
	  to look for the netcdf library *) ?octopus-pol* no longer needed,
	  so it was removed from the configuration *) octopus can now
	  output (binary) netcdf things that can be read by openDX.	the
	  files are 3 times smaller than the corresponding text files.

2003-04-03 18:01  rozzi

	* src/states_kpoints.F90: kpoints are generated along the periodic
	  dimension(s) of the system, assuming that a center of inversion
	  exists. k-weights don't take the symmetry into account. At the
	  moment...

2003-04-03 17:59  rozzi

	* src/states_inc.F90: m%zsize -> m%xsize in write_restart

2003-04-03 17:59  rozzi

	* src/states.F90: added some checks on NumberKPoints and
	  PeriodicDimensions

2003-04-03 17:58  rozzi

	* src/run.F90: writes info about PeriodicDimensions

2003-04-03 17:57  rozzi

	* src/mesh_inc.F90: changed boundary, and zero boundary, in the
	  periodic direction(s)

2003-04-03 17:57  rozzi

	* src/mesh_create.F90: last mesh point is removed in periodic
	  direction(s); box check extended

2003-04-03 17:55  rozzi

	* src/mesh.F90: conf%periodic_dim is used to control double box,
	  and fft_optimization

2003-04-03 17:53  rozzi

	* src/hartree.F90: solver method 2 is controlled by
	  conf%periodic_dim

2003-04-03 17:51  rozzi

	* src/h_inc.F90: correct expression for kinetic energy

2003-04-03 17:50  rozzi

	* src/h.F90: cylinder potential has now the axis along x direction

2003-04-03 17:49  rozzi

	* src/global.F90: the new variable conf%periodic_dim obviously
	  indicates the number of periodic dimension of the system: 1=x;
	  2=x,y; 3=x,y,z

2003-04-02 22:06  marques

	* src/states_inc.F90: sorry, file had a bug. This is the correct
	  file.

2003-04-02 21:47  marques

	* src/states_inc.F90: very small changes in the elf routine.

2003-04-02 19:51  acastro

	* src/states_inc.F90: Now the dot products, norms and
	  orthonormalization for the states in Fourier space. Also the
	  transformations between RS and FS.

2003-04-02 19:34  acastro

	* src/: mesh.F90, mesh_inc.F90: * Dot products, norms, and
	  integrations defined now in Fourier space.	The names of the
	  functions are equal but with an extra "q".  * Two subroutines
	  ease the RS<=>FS transformations (mesh_rs2fs/mesh_fs2rs).  * Data
	  type mesh now includes the dnpw/znpw integer, which are the
	  number   of plane waves when using real/complex wavefunction
	  (roughly double in   this latter case). Also, the integration
	  volume in FS, vol_ppw.

	    I have disregarded k points. This stuff should not definitive,
	  but it
	  will do the job for defining a preconditioning in the CG
	  algorithm (which, by the way, finally works -- will commit soon).
	     The definitions are in the "mesh" module; next step is
	  defining all the  stuff also in the states module.

2003-04-02 15:16  acastro

	* src/: Makefile.am, eigen.F90, eigen_cg1.F90, unocc.F90: Removed
	  the "old-style" cg algorithm. The file "eigen_cg1" is now empty,
	  awaiting for the FS version of current algorithm.

2003-04-01 12:17  acastro

	* src/ps.F90: Bug fix.

2003-03-31 20:28  marques

	* share/recipes/en/sugo_zucchini.txt: We are today with a poetic
	  vein. From Carlo.

2003-03-31 20:16  marques

	* share/recipes/en/porc_honey.txt: Why not also a pork recipe ;))))

2003-03-31 18:24  marques

	* configure.ac, share/recipes/Makefile.am,
	  share/recipes/it/Makefile.am,
	  share/recipes/it/polpo_galiziana.txt: Added a recipe in italian.
	  Carlo's translation;)

2003-03-31 15:54  marques

	* src/: Makefile.am, make_st.F90, ps.F90: *) ps.F90 needed a slight
	  change in order to run with the -C flag *) added small utility to
	  add a gaussian wave-packet for octopus. It is    not trivial to
	  use such thing (one has to play with ExtraStates and
	  ExcessCharge), but it seems to work. At least I am throwing an
	  electron    at Na_8^2+ now ;)

2003-03-30 19:07  acastro

	* src/h_external_pot.F90: Bug fix.  Description: Now variable
	  "ps%so_l_max" is -1 if no spin-orbit corrections could be read
	  from the pseudopotential file. In that case, subroutine
	  "specie_get_nl_part" should not be called in "build_nl_part".
	  Also, if l=0, it should not be called (there are no spin-orbit
	  corrections for l=0).

2003-03-30 17:04  acastro

	* src/: ps.F90, tm.F90: Some bugs fixed in tm.F90 and ps.F90. They
	  only showed up when compiling with the "-C" option in the ifc
	  compiler.

2003-03-28 16:07  marques

	* doc/octopus.texi: RecipeLang is no longer needed ;)

2003-03-28 16:05  marques

	* liboct/interface.c, liboct/recipes.c, share/Makefile.am,
	  share/recipes/Makefile.am, share/recipes/disclaimer.txt,
	  share/recipes/en/Makefile.am,
	  share/recipes/en/octopus_gallega.txt,
	  share/recipes/es/Makefile.am, share/recipes/es/pulpo_a_feira.txt,
	  src/pulpo.F90: Rewrote runmode 99. It is much nicer now ;)

2003-03-27 19:31  marques

	* build/octopus.spec.in: Small changes to make make rpm work again.

2003-03-20 16:59  acastro

	* src/atom.F90: Now the initial random velocities are set in such a
	  way that the initial center of mass velocity is null.

2003-03-20 15:15  acastro

	* src/: Makefile.am, nbo2xyz.F90, xyzanim.F90: Bug fix. (first one
	  for octopus-1.1...) The little program "nbo2xyz" was broken. I
	  renamed to a more logical name "xyzanim", and fixed it.

2003-03-18 14:27  marques

	* Makefile.am, build/octopus.spec.in, doc/Makefile.am,
	  liboct/config.h.in: small changes to rpm build.

2003-03-17 17:57  marques

	* debian/info: small bug in debian rules

2003-03-17 17:54  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Removed the
	  warning from the manual.

2003-03-17 17:46  marques

	* configure.ac, debian/changelog: changed version number to 1.1

2003-03-17 17:05  acastro

	* src/: h_external_pot.F90, ps.F90: (Damned) buf fix.  Description:
	  SO was not properly working if the local component of the
	  pseudopotential was not null. The reason was a couple of pretty
	  hidden bugs.

2003-03-17 09:19  acastro

	* doc/: cosine.eps, gaussian.eps, octopus.dvi, octopus.info,
	  octopus.texi, ramp.eps: Finished the propagators stuff. Added
	  some (hopefully) clarifying plots to describe the laser shapes.

2003-03-17 03:39  marques

	* doc/: octopus.dvi, octopus.info, octopus.texi: Some more changes
	  to the manual (By the way, don't you think we should delete the
	  .info and the .dvi from the cvs?)

2003-03-16 21:48  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Some more changes
	  to the manual.

2003-03-16 00:22  marques

	* configure.ac, doc/octopus-faq.texi, doc/octopus.info,
	  doc/octopus.texi, src/broad.F90, src/choose_st.F90,
	  src/excitations.F90, src/global.F90, src/h.F90,
	  src/hs_from_acc.F90, src/hs_from_mult.F90, src/main.F90,
	  src/mesh_create.F90, src/nbo2xyz.F90, src/phonon_spectrum.F90,
	  src/strength_function.F90, src/td_init.F90: Lots of small
	  changes.    *) the "z" had misteriously disappeared when
	  compiling with complex wf. Fixed    *) lsize is now *half* the
	  side of the box. This is consistent with the	     manual, and
	  with the other boxes.    *) Removed "TD" from the variables
	  (TD)OutputLaser, (TD)AbsorbingBoud...,       (TD)AB... I think it
	  is nicer like this.	 *) Dimensions are now print in main.F90
	  *) Updated the manual. There are still things missing, but it is
	  better now ;)

2003-03-14 05:59  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi: Some changes to
	  the manual. A lot has to be done previous to the release (we have
	  to make sure we don't overlap; I will take care of the time
	  propagators and related stuff).

2003-03-14 04:08  acastro

	* src/h_external_pot.F90: Bug fix.  Description: the comparison
	  between the "uvu" pseudopotential variables calculated in the
	  logarithmic grid and in the cartesian grid was no longer working.
	  For two reasons, I think: the expression for the cartesian
	  calculation was wrong, and when using spin-polarized or spinors
	  calculation, the comparison should not work, because the wave
	  functions used in the cartesian expression are the spin-polarized
	  ones, whereas the expression in the logarithmic grid make use of
	  the spin-unpolarized wavefuctions (since these are the ones used
	  to define the KB projectors). So I removed the comparison in this
	  case.  Anyway this should be cleared up a bit more, but I will
	  leave it as is for this release.

2003-03-13 19:57  acastro

	* src/: ps.F90, tm.F90: (*) The threshold value used to define the
	  radius of the nonlocal regions of the pseudopotentials, in
	  "get_cutoff_radii" subroutine (tm.F90), has been relaxed from
	  1e-8 to 1e-6. This reduces the value of the radii, but the new
	  values should be enough. The reason for this is the radius
	  obtained when using Vanderbilt-type function for the local part
	  were unnecesarily big for the old value, and this could be the
	  reason of the reported bug when using that feature (but I am not
	  sure about this).  (**) Vanderbilt function cannot be used if
	  l_max = 0 (e.g. H).  (***) The "cut-off" radius that defines
	  Vanderbilt function has been reduced from 5.0 to 3.0.

2003-03-12 23:04  acastro

	* src/td_exp.F90: Lanczos method works now for both hermitian (no
	  imaginary potential absorption in the boundaries) or
	  non-hermitian hamiltonians (the contrary).

2003-03-10 18:25  acastro

	* src/lcao.F90: Bug fix.  Description: minimum size for work array
	  passed to dsygv in lcao made "sometimes" the routine to crash in
	  an alpha machine. I increased the size from 3*dimension-1 to
	  5*dimension, and it seems to work.  (It is not our bug, but
	  either the compiler, or the dxml fault!)

2003-03-06 01:11  marques

	* doc/octopus.texi: Update from Tobias:   remove TDSaveIter   Make
	  review of TDDFT available to info users

2003-03-03 19:50  acastro

	* src/ps.F90: Bug fix.	Description: wrong limits defining the
	  spin-orbit coupling constants.  Fortunately you warned me you had
	  changed that! I don't know what the ifc complained about, but
	  this is the way it should be.  Anyway, before code release I will
	  try to clean up a bit more that part.

2003-03-03 17:45  marques

	* src/: out.F90, td.F90, td_init.F90, td_write.F90, unocc.F90: *)
	  unoccupied eigenvalues now go to the static directory, as they
	  should *) I cast TDSaveIter to oblivion in favor of OutputIter.

2003-03-03 16:40  acastro

	* src/: td_exp.F90, xc_GGA.F90: (*) Bug fix: In xc_GGA.F90, stupid
	  alpha compiler has a bug that     made the compiler crash with no
	  reason, issuing a compiler bug     message. I finally could make
	  that stupid hack to circunvent it.  (*) Bug fix: In td_exp.F90,
	  subroutine lanczos, the zero-th component	of array v should
	  be initialized to zero, or else the code will     misbehave on
	  alpha machines.  (*) Buf fix: In td_exp.F90, subroutine suzuki,
	  variable ik should not     be defined, since it is a global
	  variable of subroutine td_exp.

2003-03-03 11:28  acastro

	* src/td_exp.F90: Bug fix.  Description: Lanczos exponential
	  method, on some occasions, did not work. I introduced this bug
	  when I corrected the last one.

2003-03-02 19:28  acastro

	* src/run.F90: Bug fix.  Description: in parallel runs,
	  hamiltonian_span crashed on some compilers/platforms and was
	  wrongly calculated on others. The reason is it needs the lowest
	  eigenvalues, known on by process #0. I have put a brodcast before
	  the call to hamiltonian_span.

2003-03-02 17:22  acastro

	* src/ps.F90: Bug fix.	Description : some compilers/platforms
	  (i.e. DIGITAL Fortran 95 v5.3 on alpha OSF1 V4.0) crash if a
	  variable is not initialized explicitly and an operation is
	  performed on it. It happened with "ps%k" in "tm_load".

2003-03-01 01:12  marques

	* doc/octopus-faq.texi, src/Makefile.am, src/global.F90,
	  src/h_external_pot.F90, src/h_forces.F90, src/main.F90,
	  src/scf.F90, src/specie.F90, src/specie1D.F90, src/specie3D.F90:
	  *) More changes to the FAQ from Tobias *) Forces half-cleaned.
	  The rest is just astetics ;) As a side-product I also got the
	  forces working for 1D/2D/usdef systems. Not fast, but works ;) *)
	  Octopus now prints at the beginning not only the version, but the
	  build date. Feature requested by Heiko.

2003-02-28 17:07  marques

	* Makefile.am, configure.ac, doc/Makefile.am, doc/octopus-faq.texi,
	  src/config.h.in, src/opt_control.F90, src/out_inc.F90,
	  src/ps.F90, src/states_inc.F90: *) Got rid of the faq directory
	  (now everything is under docs) *) Applied Tobias patch for
	  octopus-faq *) A couple of details that made ifc -C itch (it does
	  not work properly with states_inc.F90, though) *) out_inc now
	  prints complex wfs also

2003-02-28 11:49  acastro

	* src/atom.F90: Bug fixed.  Description: unformatted read on a
	  formatted file (XYY velocities).

2003-02-26 23:32  acastro

	* share/logo: [no log message]

2003-02-26 23:28  acastro

	* src/: run.F90, unocc.F90: This is the right commit; previous
	  files were the wrong ones.

2003-02-26 23:24  acastro

	* src/: eigen.F90, run.F90, unocc.F90: * Code crashed if LCAOStart
	  = yes and any of the species was not	 a pseudopotential. So I
	  have added a couple of lines to avoid the   call to LCAO if any
	  of the species has the flag "local". Two   comments: (i) the name
	  "local", as previously noted, is a bit   unfortunate, and (ii)
	  maybe in the future LCAO should work in   all cases. But the
	  easiest way out was this one.  * The "unoccupied" states
	  calculation needs not be self-consistent.    This way it is
	  simpler.  * I added a short copyright notice after the logo, with
	  the disclaimer   of warranty, in case someone wants to sue us if
	  they get wrong   results that lead to an airplane crash on a
	  orphanage, for example.    I don't know, maybe it should not be
	  there, what do you think?

2003-02-26 16:40  marques

	* src/: choose_st.F90, eigen_cg2.F90, lasers.F90, mesh_create.F90,
	  opt_control.F90, out_inc.F90, specie.F90, specie1D.F90,
	  states_inc.F90, td_exp.F90, td_rti.F90, unocc.F90: *) Optimum
	  control seems to be working, at least for the 1D harmonic
	  oscillator	with non interacting particles ;) *) I have a
	  concern related to states_dotp: when I used this routine from the
	  optimum control it gava crap *) Several small bugs and itches
	  found when compiling octopus with the "-C"	(check array
	  bounds, etc.) of the intel compiler.	*) Changed slightly the
	  times in the application of the laser field in the
	  split-operator method.

2003-02-24 20:03  acastro

	* src/: mesh.F90, spectrum.F90, td.F90, td_exp.F90: * td_exp.F90:
	  bug fixed in the lanczos method. It only showed up when   using
	  it to calculate the exponential part of the nonlocal part   of
	  the pseudopotential (so it did not show up in real calculation.
	  But it was a bug nevertheless.  * td_exp.F90: bug fixed in the
	  split operator method. It also affected   the nonlocal part of
	  the pseudopotential, but in this case it showed   up always. Now
	  I think that finally split operator and higuer order
	  Suzuki-Trotter behave as they should.  * spectrum.F90: the
	  writing of the files is now formatted. (In some   systems, if it
	  is not formatted, long lines are wrapped).  * mesh.F90: New input
	  variable: FFTOptimize (logical). It decides wether   the FFT
	  grids are optimized or not (that is, wether to add more points
	  in order to have better performance). The reason to have the
	  option   to disconnect it is that, for the split operator method
	  to be accurate,   we need the operation real-space <=> fourier
	  space to be really   inversible, which was not.  * td.F90:
	  Removed my last change in the way the first potential is
	  calculated.

2003-02-24 11:59  acastro

	* src/: Makefile.am, main.F90: Now the code version is written to
	  the output file. I think this was needed for next release of the
	  code (it is a new feature rather than a bug fix, I know, but I
	  thought this just had to be there).

2003-02-21 21:03  acastro

	* src/Makefile.am: Forgot one dx.

2003-02-21 20:42  acastro

	* src/Makefile.am: Removed also the references to the dx stuff in
	  Makefile.am.

2003-02-21 19:44  acastro

	* src/: xc.F90, xc_GGA.F90: Performance hacks for the GGA
	  calculations: (1) Changed a lot of the stuff in the rotation
	  matrix, etc.	(2) GGA correlation mode "PBX" (previously there
	  was only the PBE     possibility) now sets the exchange mode to
	  null, but includes	 exchange in the correlation call. This way
	  a lot of performance	   is gained. I will explain this carefully
	  in the manual since	  it is not very clear and elegant.

	  At the end, for a (pretty fine) grid of 270000 points,
	  calculation of the xc potential is reduced from 167 seconds
	  (!!!!) to 17 seconds in a spinors case. Maybe some more hacks can
	  be done. This has to be really fast, since it is a sequential
	  part of the code.

2003-02-21 18:39  marques

	* doc/octopus.texi, src/dx.F90, src/dx_inc.F90,
	  src/function_to_dx.F90: Removed all traces of not so used utility
	  function_to_dx. Besides, it was not using the correct dx output
	  routine, or interface.

2003-02-21 17:20  marques

	* src/out_inc.F90: DX output is only in one .dx file now => No more
	  absolute filenames

2003-02-21 13:05  acastro

	* src/td.F90: Sorry about last commit, it was an accident. Now the
	  good one.

	  What I have done is: if the delta kick is applied, the potential
	  is calculated with the perturbed density. That is the potential
	  which should be used when the evolustion starts. I have moved
	  back the calculation of the dipole at t=0, so that it is
	  calculated with the unperturbed density. I think this is correct,
	  isn't it?

2003-02-21 12:58  acastro

	* src/td.F90: * A little bug fix in the initialization of td%v_old.
	  * The code is now more informative about the delta field for
	  dipole strength calculations.

2003-02-20 20:09  marques

	* doc/octopus.texi, src/Makefile.am, src/atom.F90,
	  src/choose_st.F90, src/excitations.F90, src/global.F90,
	  src/h_external_pot.F90, src/h_forces.F90, src/h_inc.F90,
	  src/lcao.F90, src/main.F90, src/opt_control.F90, src/ps.F90,
	  src/states.F90: Continuing cleaning - several small changes:	 *)
	  more fixes to the manual by Tobias   *) ps%Ur now *is* the
	  wavefunction and not some funny thing as before   *) added
	  Debuglevel to control the depth of the print in debug mode   *)
	  created a global_init where most things from main now are   *)
	  optimum control still has bugs ;(

2003-02-20 14:27  marques

	* doc/octopus.texi:  From Tobias Burnus
	   this huge patch does:
	   - Remove O(100) spaces before a colon (French spacing)
	   - Use ``nice'' quotes
	   - Use \rm i (for i^2 = -1) and \rm d for the d t in the integral
	   - Fix several typos

2003-02-20 09:59  acastro

	* src/tm.F90: Bug fixed.

2003-02-19 22:40  marques

	* doc/octopus.texi: As Tobias convinced me, there was an umlaut
	  missing!

2003-02-19 22:36  marques

	* doc/octopus.texi: Some corrections to the manual by Tobias
	  Burnus.

2003-02-19 15:35  acastro

	* src/: states.F90, td.F90, td_calc.F90, td_write.F90: * Bug fixed
	  in the calculation/writing of the occupations of the
	  single-particle states.  * The calculation of those occupations
	  is moved from an internal subroutine in td to the states module.

2003-02-19 12:41  acastro

	* src/: td.F90, td_exp.F90: Bug fixes: * The td%v_old was
	  improperly initialized for spinors in td_run_zero_iter.  * An
	  arbitrary cut-off slipped in "kinetic" for the split-operator
	  method,   because of one of my endless tests.  * Removed the "ik"
	  local variable in "local_part", also for the split   operator
	  method. (Note: was there any rationale behind its reappearance?)

	    I am working on a couple of other bugs.

2003-02-19 12:13  marques

	* doc/octopus.texi: Sorry, there were some problems with texinfo
	  versions. File now should work.  Also removed the "Donostia" from
	  the adresses. San Sebastian is clearly enough!

2003-02-19 12:01  marques

	* doc/octopus.texi, src/excitations.F90, src/function_to_dx.F90,
	  src/lasers.F90, src/main.F90, src/opt_control.F90, src/run.F90,
	  src/scf.F90, src/states_inc.F90, src/td.F90, src/td_exp.F90,
	  src/td_init.F90, src/td_rti.F90, src/unocc.F90: *) Merged my code
	  with the one in the cvs   -) Several details in the td
	  calculation	-) Hopefully bug fixes in the optimum control part
	  (still not working)	-) texinfo file did not compile at least in
	  debian.    -) read/write_restart does not assume file to be in
	  ./tmp now.

2003-02-18 15:38  acastro

	* src/: h_forces.F90, h_inc.F90, lcao.F90: Three bugs fixed.

2003-02-14 11:34  acastro

	* liboct/interface.c, src/hartree.F90, src/hartree3D.F90,
	  src/mesh_create.F90: * FFT Poisson solver with spherical cut-off
	  may now be used for all box shapes, either isotropic or not.
	  Maybe useful for quantum dots.  * Little bug fixes.

2003-02-12 21:53  acastro

	* src/td_exp.F90: Horrifying bug fixed in split-operator method.

2003-02-11 17:50  acastro

	* src/h_inc.F90: More signs...

2003-02-11 16:27  acastro

	* src/: h_inc.F90, scf.F90: Bug fixed in the calculation of the
	  total energy:   * A sign flipped that affected *all*
	  calculations.      * In the spinors case, the non-diagonal term
	  was missing.

	  Now, the expression for the energy is:

	  E = sum_i eps_i - 1/2 sum_i <phi_i | V_hartree | phi_i>     -
	  sum_i <phi_i | V_xc | phi_i> =     sum_i eps_i - 1/2
	  IntegralOf{d*v_hartree}     - IntegralOf{rho(1,1)*v_xc(1,1)}
	  - IntegralOf{rho(2,2)*v_xc(2,2)}     - 2*Real[
	  IntegralOf{rho(1,2)*v_xc(2,1)} ]

	  where i is the KS state index, eps_i the eigenvalues, phi_i the
	  eigenvectors, rho and v_xc the 2x2 density and xc-potential
	  matrices in spin space, and d = Tr[rho]

	  This is correct, isn't it?

2003-02-11 14:48  acastro

	* src/: vxc.F90, xc_GGA.F90, xc_LDA.F90: More code cleaning. One
	  bug fixed.  * Now pbexc and pzxc is not called twice; I split
	  them into pbex/pbec, and pzx/pzc.  * Improved a bit xc_GGA. There
	  is still some room to improve the performance (rotation matrix
	  should be calculated only once).

2003-02-10 22:56  acastro

	* src/: h.F90, xc_GGA.F90: "Some kind" of non-collinear magnetism
	  is now implemented also for GGA. Only the orbital-functionals are
	  now missing. Some comments: * I say "some kind" because we agree
	  that, after all, ignoring the non-diagonal terms of the gradients
	  is just wrong. But since it is not crucial for our research, let
	  us leave what apparently everybody else does (to my knowledge).
	  * It is now implemented in a very inefficient way. I will do more
	  commits in the following days to try and sort this out.  * In
	  fact, I have not yet used any non-collinear system, so I have not
	  really tested this. I just tested that spinors or spin-polarized
	  yield the same thing for carbon, gold or sodium atoms.  * IT WAS
	  A PAIN TO IMPLEMENT THIS!

	  Conclusion: this is not definitive. But I felt like committing.

2003-02-10 10:16  acastro

	* src/: ps.F90, xc_LDA.F90: * Removed the annoying segmentation
	  fault that occurred sometimes at the end of the runs. Really
	  subtle.  * Removed a bug that I had slipped in the expression of
	  the rotation in spin space.

2003-02-09 19:44  acastro

	* src/: h_inc.F90, hartree.F90, hartree1D.F90, hartree2D.F90,
	  hartree3D.F90, lcao.F90, linear.F90, mix_inc.F90, vxc.F90,
	  xc.F90, xc_GGA.F90, xc_HJU.F90, xc_KLI_SIC.F90, xc_KLI_x.F90,
	  xc_LDA.F90, xc_pot.F90: A lot of cleaning in the xc part: (i) If
	  dens is the density matrix, rho is now defined as: rho(1) =
	  dens(1, 1); rho(2) = dens(2, 2); rho(3) = Re[dens(1, 2)]; rho(4)
	  = Im[dens(1, 2)]. That is, it looks more like it was before.
	  (ii) All the subroutines in xc_LDA.F90 are gone. The file
	  persists because I moved subroutine R_FUNC(xc_lda) there. A
	  couple of subroutines in xc_GGA are gone. They were the
	  duplicated xc subroutines; now the pseudopotential stuff and the
	  main code itself share them in vxc module.  (iii) Noncollinear
	  GGA is not yet included. I will include it soon.  (iv) Sometimes
	  now the exchange and correlation is calculated twice.  I will
	  change that.	(v) Broyden mixing does not work well when some
	  component of rho is null. I will look into that.

2003-02-07 15:26  acastro

	* src/vxc.F90: This bug slipped in after all this changing of the
	  mathematical parameters names (ONE => M_ONE). You can't imagine
	  how difficult it was to hunt...

2003-02-07 13:37  marques

	* configure.ac, src/Makefile.am, src/eigen.F90, src/eigen_cg1.F90,
	  src/eigen_cg2.F90, src/h.F90, src/h_external_pot.F90,
	  src/h_forces.F90, src/h_inc.F90, src/hartree.F90,
	  src/hartree1D.F90, src/hartree2D.F90, src/hartree3D.F90,
	  src/lcao.F90, src/main.F90, src/mesh_create.F90,
	  src/mesh_inc.F90, src/opt_control.F90, src/out.F90, src/ps.F90,
	  src/ps3D.F90, src/run.F90, src/scf.F90, src/specie.F90,
	  src/specie1D.F90, src/specie3D.F90, src/states.F90,
	  src/states_inc.F90, src/static_pol.F90, src/systm.F90,
	  src/td_calc.F90, src/td_exp.F90, src/unocc.F90, src/xc.F90,
	  src/xc_GGA.F90, src/xc_HJU.F90, src/xc_KLI.F90,
	  src/xc_KLI_SIC.F90, src/xc_pot.F90: *) small bug fixes in
	  calculation of unoccupied states *) there is now more
	  --enable-1d, etc. Now the same code handles 1, 2 and 3D *) moved
	  nlcc from states to system where it makes more sense. By this I
	  increased slightly the entropy in the xc module (that needs to be
	  cleaned in any way)

2003-02-05 21:19  marques

	* Makefile.am, configure.ac, debian/README.Debian,
	  debian/changelog, debian/control, debian/rules,
	  liboct/config.h.in, src/Makefile.am, src/config.h.in,
	  src/lcao.F90, src/ps1D.F90: *) small bug corrected in lcao.F90 *)
	  make deb now makes debian packages (in my machine, at least) *)
	  small things forgotten from the 2D commit

2003-02-05 12:43  marques

	* src/: td.F90, td_exp.F90, td_rti.F90: Bug in rti2 related to spin
	  corrected (the code segfaulted for nspin=1).

2003-02-05 03:53  acastro

	* doc/: octopus.dvi, octopus.info, octopus.texi, texinfo.tex: An
	  update of the manual. I have written it is the manual of octopus
	  1.1, waiting for the next release. However it is still
	  unfinished. But at least quite a few errors have been eliminated.

	  The distribution now includes, besides the octopus.texi source,
	  the octopus.info and octopus.dvi files. The texinfo.tex file has
	  been removed from the distribution, since it should be installed
	  in the computer.

	  For generating other formats, I believe that the latest version
	  of texinfo, 4.4, is needed.

	  I need to improve the "Makefile.am" file. Now it does not work
	  too well.

2003-02-04 19:24  marques

	* configure.ac, src/Makefile.am, src/dx.F90, src/dx_inc.F90,
	  src/function_to_dx.F90, src/global.F90, src/h.F90,
	  src/h_external_pot.F90, src/h_forces.F90, src/hartree.F90,
	  src/hartree2D.F90, src/main.F90, src/mesh.F90, src/mesh1D.F90,
	  src/mesh1D_inc.F90, src/mesh3D.F90, src/mesh3D_inc.F90,
	  src/mesh_create.F90, src/mesh_inc.F90, src/out.F90,
	  src/specie.F90, src/specie1D.F90, src/states_inc.F90,
	  src/systm.F90, src/td_calc.F90, src/td_write.F90: *) Code now
	  runs in 2D! At least the non-interacting harmonic oscillator
	  gives the correct eigenspectrum in 1, 2, and 3D ;) *) Derivatives
	  and (local) potential can be calculated in Fourier space for 1D
	  and 2D 3) Neither LCAO nor the forces are working properly for 1
	  or 2D

2003-01-31 04:45  marques

	* src/: h_inc.F90, hartree3D.F90, lcao.F90, mesh.F90, mesh1D.F90,
	  mesh1D_create.F90, mesh1D_inc.F90, mesh3D.F90, mesh3D_create.F90,
	  mesh3D_inc.F90, mesh_create.F90, mesh_inc.F90, opt_control.F90,
	  out_inc.F90, pes_mask.F90, ps.F90, ps1D.F90, scf.F90, specie.F90,
	  specie1D.F90, specie3D.F90, static_pol.F90, td.F90, td_calc.F90,
	  td_exp.F90, td_init.F90, vxc.F90, xc.F90, xc_GGA.F90, xc_HJU.F90,
	  xc_LDA.F90: Cleaning the code for it to work better in 1 and 2D.
	  This is the first strike, so thinks may not work still!

2003-01-30 00:36  acastro

	* src/td_rti.F90: Finally I could fix this damned bug, after four
	  beers and a lot of beers and blaspheming. It only showed up in
	  spinors calculations, so don't worry otherwise. Energy is
	  conserved again, blessed be the gods.

2003-01-29 18:41  marques

	* src/: Makefile.am, eigen_cg1.F90, eigen_cg2.F90, geom_opt.F90,
	  h.F90, h_inc.F90, h_so.F90, lasers.F90, lcao.F90, mix.F90,
	  opt_control.F90, phonons.F90, run.F90, scf.F90, td.F90,
	  td_calc.F90, td_exp.F90, td_rti.F90, unocc.F90: First strike at
	  optimum control. There are changes all over the place, for I
	  changed the interface to some standard (basic) routines.

2003-01-29 18:29  marques

	* Makefile.in, aclocal.m4, config.guess, config.sub, configure,
	  depcomp, install-sh, ltmain.sh, missing, mkinstalldirs,
	  doc/Makefile.in, liboct/Makefile.in, share/Makefile.in,
	  share/PP/Makefile.in, share/PP/HGH/Makefile.in,
	  share/PP/TM2/Makefile.in, src/Makefile.in: Removed autottols
	  automatic generated files. Now you are forced to run ./autogen.sh
	  when taking the src from the cvs.

2003-01-29 08:44  acastro

	* liboct/varia.c: This will probably avoid problems compiling in
	  some systems.

2003-01-28 12:53  acastro

	* src/mesh3D_inc.F90: Bug fixed.  (laplacian was not properly
	  calculated with anysotropic grids)

2003-01-27 18:06  acastro

	* src/: h.F90, h_forces.F90, mix_inc.F90, specie.F90, td_calc.F90:
	  Those things seem to be bugs for the alpha compiler (I don't know
	  if it is a bug in "theoretical" standard Fortran 90, but anyway
	  it is safer now).  (The things are the "if(present(x).and.x)"
	  constructs, which crash if x is not present in the kerma alpha
	  machine)

2003-01-27 16:33  acastro

	* liboct/varia.c: Now varia.c compiles both on alpha and linux
	  machines. Probably also on the IBMs.	(Don't know wether the
	  progress line works, though. I think it does.)

2003-01-27 15:28  acastro

	* src/: Makefile.am, Makefile.in, atomic.F90, h.F90, h_inc.F90,
	  hgh.F90, ps.F90, ps_kb.F90, ps_xc.F90, tm.F90, vxc.F90, xc.F90,
	  xc_GGA.F90: (*) Fixed, at least in a temporary way, a bug in the
	  GGA part (after changing the way rho stores the information, it
	  did not work any more). It is not the definitive way it will
	  look.  (**) Changed the names of a couple of files ("ps_kb" and
	  "ps_xc", rather odd). Removed some unnecessary code. The fact is
	  there is quite a lot of duplicated code in previous ps_xc.F90
	  (now vxc.F90) and xc_LDA/xc_GGA files, and I want to put it only
	  in one place (did not do it, yet).  (***) I think that now the
	  total energy is well calculated, even with spin, collinear or
	  not.

2003-01-24 23:47  acastro

	* src/: global.F90, h.F90, h_inc.F90, hartree1D.F90, hartree3D.F90,
	  lcao.F90, linear.F90, mix_inc.F90, ps_xc.F90, run.F90,
	  states.F90, xc.F90, xc_GGA.F90, xc_HJU.F90, xc_KLI_SIC.F90,
	  xc_KLI_x.F90, xc_LDA.F90, xc_pot.F90: Finally I commit the
	  non-collinear magnetism stuff. Now we can proudly say that
	  octopus does "fully unconstrained noncollinear magnetism", as it
	  is pompously said in the literature.	The catch is I have not
	  been able to do it for nothing else but LDA.	I have been quite a
	  lot of time working and reading about the GGA case, but could not
	  do it.  Technically, now when working with spinors, rho has four
	  components, being the trace of the density matrix the first one,
	  and the magnetisation density vector the other three. When
	  working in the spin polarized case, rho has still two componets,
	  but instead of being respectively the (11) and (22) component of
	  the density matrix, they are the trace and (11)-(22),
	  respectively.  The exchange and correlation potential has now as
	  many components as the density in each case. The "nondiagonal" or
	  noncollinear components of the hamiltonian data type now are
	  gone.

2003-01-15 01:45  acastro

	* liboct/interface.c, src/h.F90, src/liboct.F90, src/run.F90,
	  src/td.F90, src/td_exp.F90, src/td_init.F90, src/td_rti.F90: *
	  Added Suzuki-Trotter supposedly 5th order method to calculate the
	  exponential of a matrix. Does not seem to work very well.  *
	  Reshaped the Split-Operator method. I am not yet sure if it is
	  implemented in the proper way. If it is not, it may be the reason
	  why the Suzuki-Trotter is not working (ST is based in SO).  *
	  Added the Chebyshev expansion of the exponential of the
	  hamiltonian.	For high orders it is much better than previous
	  expansion in the canonical polynomial base {1, x, x^2, ...}.

	  In any case, it seems the Lanczos method works better.

2003-01-08 23:53  acastro

	* src/: run.F90, td_exp.F90, td_init.F90, td_rti.F90: Bugs fixed.
	  Small performance enhancements.

2003-01-08 13:42  acastro

	* src/: states_inc.F90, td_exp.F90: Bug fixed.

2003-01-07 12:28  acastro

	* doc/octopus.info, doc/octopus.texi, src/Makefile.am,
	  src/Makefile.in, src/h.F90, src/h_forces.F90, src/h_inc.F90,
	  src/run.F90, src/td.F90, src/td_calc.F90, src/td_exp.F90,
	  src/td_init.F90, src/td_rti.F90, src/td_rti3.F90,
	  src/td_write.F90: Some of the new evolution methods. Check out
	  the manual to see how to setup the input file. I don't have yet
	  final conclusions, and think that some bugs still linger in the
	  code for some of the options, so I left previous methods as
	  default. For safe runs, use the previous stuff. I will keep on
	  looking at the problem....

2002-12-18 05:56  acastro

	* liboct/interface.c, src/global.F90, src/liboct.F90, src/td.F90:
	  Two little things...		- The time meter should not fail
	  now as it sometimes did -- removed  the "elapsed_time" function,
	  in favour of the C clock function.	- In debugging mode, now
	  the size of the process (of the node 0)  is printed. This way
	  maybe I am able of finding where the memory leakage takes place
	  in the IBM machine.

2002-12-09 18:33  marques

	* liboct/Makefile.am, liboct/Makefile.in, liboct/geom_opt.c,
	  share/PP/TM2/Si.ascii, src/Makefile.am, src/Makefile.in,
	  src/geom_opt.F90, src/phonons.F90, src/ps3D.F90, src/run.F90,
	  src/scf.F90: *) Code did not work for TM pseudos withonly one
	  spin component. Hack to    go around it.

	  *) Changed geometry optimization to a simple steepest descents
	  with an    adaptative step, for the old GSL code did not work
	  properly.

	  *) Experimental utility to calculate vibrational frequencies.

2002-12-05 02:01  acastro

	* configure, configure.ac, src/Makefile.am, src/Makefile.in,
	  src/linear.F90, src/mesh.F90, src/mesh3D_create.F90,
	  src/mesh3D_inc.F90: Several changes: 1. The most important:
	  convergence speedup! By changing the way in	 which the
	  laplacian was calculated, the speed of that part is	 multiplied
	  by 3 something. Basicly what I do is creating an integer    array
	  which contains the indexes of the neighbours of one given
	  point, instead of using the lxyz_inv intermediate, which saves
	  some memory, but slows down things. For the tests I have done,
	  (carbon atom) the code runs 2.2 times faster! 2. When the code is
	  compiled for complex wave functions, the executables	  are now
	  called "zoctopus", "zoctopus-mpi", etc. In the spirit of
	  LAPACK.  3. linear.F90 did not compile for complex wf. I changed
	  one type, I	 think it is OK to do it and corrects the bug. But
	  please check that    since I don't control that part of the code.

2002-11-29 16:33  marques

	* share/PP/HGH/Ag.hgh: too much whitespace removed.

2002-11-29 16:29  marques

	* src/hgh.F90: routine hgh_occ was no longer used and was therefore
	  removed.

2002-11-29 16:27  marques

	* share/PP/HGH/Ag.hgh, share/PP/HGH/Ag_sc.hgh, share/PP/HGH/Al.hgh,
	  share/PP/HGH/Ar.hgh, share/PP/HGH/As.hgh, share/PP/HGH/At.hgh,
	  share/PP/HGH/Au.hgh, share/PP/HGH/Au_sc.hgh, share/PP/HGH/B.hgh,
	  share/PP/HGH/Ba.hgh, share/PP/HGH/Be.hgh, share/PP/HGH/Bi.hgh,
	  share/PP/HGH/Br.hgh, share/PP/HGH/C.hgh, share/PP/HGH/Ca.hgh,
	  share/PP/HGH/Cd.hgh, share/PP/HGH/Cd_sc.hgh, share/PP/HGH/Cl.hgh,
	  share/PP/HGH/Co.hgh, share/PP/HGH/Cr.hgh, share/PP/HGH/Cs.hgh,
	  share/PP/HGH/Cu.hgh, share/PP/HGH/Cu_sc.hgh, share/PP/HGH/F.hgh,
	  share/PP/HGH/Fe.hgh, share/PP/HGH/Ga.hgh, share/PP/HGH/Ga_sc.hgh,
	  share/PP/HGH/Ge.hgh, share/PP/HGH/H.hgh, share/PP/HGH/He.hgh,
	  share/PP/HGH/Hg.hgh, share/PP/HGH/Hg_sc.hgh, share/PP/HGH/I.hgh,
	  share/PP/HGH/In.hgh, share/PP/HGH/In_sc.hgh, share/PP/HGH/Ir.hgh,
	  share/PP/HGH/K.hgh, share/PP/HGH/Kr.hgh, share/PP/HGH/Li.hgh,
	  share/PP/HGH/Mg.hgh, share/PP/HGH/Mn.hgh, share/PP/HGH/Mo.hgh,
	  share/PP/HGH/N.hgh, share/PP/HGH/Na.hgh, share/PP/HGH/Nb.hgh,
	  share/PP/HGH/Ne.hgh, share/PP/HGH/Ni.hgh, share/PP/HGH/O.hgh,
	  share/PP/HGH/Os.hgh, share/PP/HGH/P.hgh, share/PP/HGH/Pb.hgh,
	  share/PP/HGH/Pd.hgh, share/PP/HGH/Po.hgh, share/PP/HGH/Pt.hgh,
	  share/PP/HGH/Rb.hgh, share/PP/HGH/Re.hgh, share/PP/HGH/Rh.hgh,
	  share/PP/HGH/Rn.hgh, share/PP/HGH/Ru.hgh, share/PP/HGH/S.hgh,
	  share/PP/HGH/Sb.hgh, share/PP/HGH/Sc.hgh, share/PP/HGH/Se.hgh,
	  share/PP/HGH/Si.hgh, share/PP/HGH/Sn.hgh, share/PP/HGH/Sr.hgh,
	  share/PP/HGH/Ta.hgh, share/PP/HGH/Tc.hgh, share/PP/HGH/Te.hgh,
	  share/PP/HGH/Ti.hgh, share/PP/HGH/Tl.hgh, share/PP/HGH/V.hgh,
	  share/PP/HGH/W.hgh, share/PP/HGH/Xe.hgh, share/PP/HGH/Y.hgh,
	  share/PP/HGH/Zn.hgh, share/PP/HGH/Zn_sc.hgh, share/PP/HGH/Zr.hgh,
	  src/hgh.F90: Fixed bug that prevented hgh pseudopotential for H
	  and He to work.  occupation numbers are now in pp file.

2002-11-29 14:51  marques

	* src/: broad.F90, excitations.F90, lcao.F90, linear.F90: small bug
	  fixes.  the routine now outputs the eigenvectors in casida's
	  approach.

2002-11-18 18:12  acastro

	* src/h_inc.F90: Bug fixed.

2002-11-18 17:57  acastro

	* src/tm.F90: Bug fixed.

2002-11-18 03:31  acastro

	* src/: atom.F90, h_external_pot.F90, h_so.F90, ps3D.F90: OK, after
	  several hours and four beers from  previous commit, I think I
	  have a pretty definitive version of SO. The gradient is moved
	  from the wavefuntion to the projector, thus speeding the code to
	  almost a factor of two. The price to pay is that I think only I
	  would be able to understand the code I wrote. But now
	  calculations with SO are almost as fast as without it.  Pretty
	  productive night, but I am running out of beers.

2002-11-17 22:18  acastro

	* src/: atom.F90, h.F90, h_external_pot.F90, h_forces.F90,
	  h_inc.F90, h_so.F90, ps3D.F90, specie.F90, td_rti3.F90, tm.F90:
	  Two things: (i)  The most important, finally SO finally works
	  also for TM. It took	    me some time. I had to add new
	  components to the ps_type.  (ii) More performance changes, for
	  application of nonlocal projectors.	    Basicly, duplicating
	  the atom%uv... components to both real and	   complex types.
	  Of course, they are always real, but it is better	  to use
	  real with real wavefunctions, and complex with complex
	  wavefunctions. The speed is really noticeable (type conversion
	     sucks at least for the Intel compiler).

	  I did *not* clean the pseudo part, of course. I did *not* remove
	  the stupid occupation number database from the code, of course.
	  Some day.

	  Application of SO is slow due to the gradient calculation of the
	  wavefunctions. Derivation may be moved to the projector, instead;
	  that should increase speed dramatically.

2002-11-17 13:26  acastro

	* src/: atom.F90, h_external_pot.F90, h_inc.F90, h_so.F90,
	  specie.F90: Cannot move uv to complex without screwing up things.

2002-11-17 02:46  acastro

	* src/: atom.F90, h_external_pot.F90, h_inc.F90, h_so.F90, hgh.F90,
	  specie.F90: This is a performance enhancement. Changes are:
	    (i) the way the nonlocal projectors are applied (both in the
	  nonlocal part of the normal potential, and in the spin-orbit
	  correction) is modified in a stupid way which seems to work
	  faster.   (ii) For the complex wave functions case, the atm%uv,
	  etc.	arrays are now complex. This seems to be important for the
	  previous trick to work. I am not yet sure that this is going to
	  work for all cases.	   (iii) The radius of the nonlocal
	  components in the Goedecker  case are now reduced.

		  This seems to reduce by a factor of 3-5 the time of
	  calculations
	  for Goedecker-gold with spin-orbit.

2002-11-16 21:30  acastro

	* src/run.F90: New (in fact, the same but in other place) bug
	  fixed.

2002-11-15 19:20  marques

	* src/lcao.F90: Nothing!

2002-11-15 18:24  acastro

	* src/run.F90: Bug fixed.

2002-11-15 18:15  marques

	* share/PP/TM2/: Ar.ascii, Ne.ascii, Xe.ascii: Added Ne, Ar and Xe
	  Troullier-Martins pseudopotential.

2002-11-15 18:06  marques

	* src/tm.F90: Code did not compile in the alphas.

2002-11-15 13:03  acastro

	* src/: h.F90, lcao.F90, run.F90: LCAO also works now for spinors.
	  The price to pay is that (i)	the "CPUIntensive" mode does not
	  longer exist. So it is always      memory intensive.	(ii) The
	  kinetic + external field is not calculated once and for all,
	  but calculated every time lcao_wf is called. Usually lcao_wf is
	  called      only once, anyway.  Of course, these drawbacks are
	  not unavoidable and could be recovered.  But the code gets ugly
	  and confusing, due to the spinors and k-points treatment. So I
	  will leave it as it is.

2002-11-13 04:21  acastro

	* configure, configure.ac, src/Makefile.am, src/Makefile.in,
	  src/atom.F90, src/h.F90, src/h_external_pot.F90, src/h_inc.F90,
	  src/h_so.F90, src/hgh.F90, src/lcao.F90, src/linear.F90,
	  src/ps3D.F90, src/run.F90, src/specie.F90, src/states.F90,
	  src/tm.F90: Spin-Orbit coupling seems to work now. It is however
	  restricted to the case where only Goedecker-pseudos are used as
	  species.

	  Some other bugs are corrected.

	  However, a lot remains to be done, specially in the lcao, hgh, tm
	  and ps3D modules. But I submit before this gets unmanageable.

2002-10-25 03:23  marques

	* build/octopus.spec.in, src/Makefile.am, src/Makefile.in,
	  src/broad.F90, src/excitations.F90, src/hs_from_acc.F90: * Added
	  small utility to broaden the spectra calculated with the
	  excitations	program * Minor fixes

2002-10-18 16:29  marques

	* src/: excitations.F90, linear.F90: Calculation of the excitations
	  in Fourier space (a la Petersilka, and a la Casida is now
	  possible. The excited states have to have good quality for it to
	  work.

2002-10-18 16:23  marques

	* liboct/: Makefile.am, Makefile.in, config.h.in, geom_opt.c,
	  interface.c, varia.c, varia.h: Added progress bar.

2002-10-18 13:42  acastro

	* src/: eigen.F90, global.F90, h.F90, h_inc.F90, run.F90, scf.F90,
	  states.F90, xc.F90, xc_pot.F90: Mostly all changes that allow to
	  do spinors calculations.

2002-10-03 19:42  marques

	* src/: atom.F90, scf.F90: small bug in atom_adjust corrected (only
	  appeared in very special circunstances) scf now prints dipole
	  information in 'info'

2002-10-03 13:18  acastro

	* src/: hgh.F90, ps3D.F90, tm.F90: The debugging information for
	  the pseudopotentials is now placed in a directory called
	  "pseudos".

2002-10-02 12:39  acastro

	* src/hgh.F90: Couple of bugs fixed in hgh subroutine. They only
	  showed up in some of the alpha machines.

2002-10-01 16:36  acastro

	* Makefile.in, configure, configure.ac, liboct/config.h.in,
	  src/Makefile.am, src/Makefile.in, src/complex.F90, src/dx.F90,
	  src/dx_inc.F90, src/eigen_cg2.F90, src/function_to_dx.F90,
	  src/lcao.F90, src/xc.F90: * By adding the option
	  "--enable-complex" to configure, now the code is built with
	  complex wavefunctions also for the ground state. So the spin
	  orbit coupling may be added.	* For that purpose, I have removed
	  quite a few bugs that only appeared when using complex
	  wavefunctions.  * Also, the Makefile.in has now the trick for the
	  debian package (I guess Heiko forgot to submit this one)

2002-10-01 13:06  appel

	* Makefile.am: running make deb on Debian systems makes octopus
	  debs and sends them to the web page. Can be run as user.  Note
	  this works only if:  - CVSROOT/val-tags on nautilus is changed to
	  group (cvsusers) writable    (otherwise cvs-buildpackage fails)
	  - the local cvsdeb.conf contains
	  conf_rootdir='/usr/src/debain/debs/i386/octopus'    and
	  conf_rootdir has write permissions for the respective user

2002-10-01 12:17  appel

	* debian/: README.Debian, changelog, control, copyright, dirs,
	  info, rules: debianizing octopus. This directory contains all
	  information to create deb packages. On a Debian system run simply
	  debuild in the top level directory of the octopus tree.

2002-09-30 15:58  marques

	* Makefile.am, Makefile.in, configure, configure.ac,
	  build/octopus.spec.in: make rpm now makes an rpm and sends it to
	  the web page. Must be run as root.

2002-09-30 12:43  acastro

	* share/PP/HGH/Ag_sc.hgh, share/PP/HGH/Au_sc.hgh,
	  share/PP/HGH/Ba_sc.hgh, share/PP/HGH/Be_sc.hgh,
	  share/PP/HGH/Ca_sc.hgh, share/PP/HGH/Cd_sc.hgh,
	  share/PP/HGH/Ce_sc.hgh, share/PP/HGH/Co_sc.hgh,
	  share/PP/HGH/Cr_sc.hgh, share/PP/HGH/Cs_sc.hgh,
	  share/PP/HGH/Cu_sc.hgh, share/PP/HGH/Dy_sc.hgh,
	  share/PP/HGH/Er_sc.hgh, share/PP/HGH/Eu_sc.hgh,
	  share/PP/HGH/Fe_sc.hgh, share/PP/HGH/Ga_sc.hgh,
	  share/PP/HGH/Gd_sc.hgh, share/PP/HGH/Hf_sc.hgh,
	  share/PP/HGH/Hg_sc.hgh, share/PP/HGH/Ho_sc.hgh,
	  share/PP/HGH/In_sc.hgh, share/PP/HGH/Ir_sc.hgh,
	  share/PP/HGH/K_sc.hgh, share/PP/HGH/La_sc.hgh,
	  share/PP/HGH/Li_sc.hgh, share/PP/HGH/Lu_sc.hgh,
	  share/PP/HGH/Mg_sc.hgh, share/PP/HGH/Mn_sc.hgh,
	  share/PP/HGH/Mo_sc.hgh, share/PP/HGH/Na_sc.hgh,
	  share/PP/HGH/Nb_sc.hgh, share/PP/HGH/Nd_sc.hgh,
	  share/PP/HGH/Ni_sc.hgh, share/PP/HGH/Os_sc.hgh,
	  share/PP/HGH/Pd_sc.hgh, share/PP/HGH/Pm_sc.hgh,
	  share/PP/HGH/Pr_sc.hgh, share/PP/HGH/Pt_sc.hgh,
	  share/PP/HGH/Rb_sc.hgh, share/PP/HGH/Re_sc.hgh,
	  share/PP/HGH/Rh_sc.hgh, share/PP/HGH/Ru_sc.hgh,
	  share/PP/HGH/Sc_sc.hgh, share/PP/HGH/Sm_sc.hgh,
	  share/PP/HGH/Sr_sc.hgh, share/PP/HGH/Ta_sc.hgh,
	  share/PP/HGH/Tb_sc.hgh, share/PP/HGH/Tc_sc.hgh,
	  share/PP/HGH/Ti_sc.hgh, share/PP/HGH/Tl_sc.hgh,
	  share/PP/HGH/Tm_sc.hgh, share/PP/HGH/V_sc.hgh,
	  share/PP/HGH/W_sc.hgh, share/PP/HGH/Y_sc.hgh,
	  share/PP/HGH/Yb_sc.hgh, share/PP/HGH/Zn_sc.hgh,
	  share/PP/HGH/Zr_sc.hgh, src/hgh.F90: HGH pseudos with semicore
	  should work now - at least the gold one does, now.

2002-09-29 18:48  acastro

	* configure, configure.ac: Another change to the mkl stuff

2002-09-28 20:15  marques

	* README, liboct/geom_opt.c, liboct/interface.c,
	  src/excitations.F90, src/linear.F90: nothing special... just
	  synching trees

2002-09-27 16:57  acastro

	* liboct/interface.c: This little bug made the code crash in the
	  cluster.

2002-09-25 02:51  acastro

	* src/: mix.F90, td.F90: Two bug fixes: (i) td.F90: just affected
	  the kick to the ions, which has never been seriously used.  (ii)
	  mix.F90: the broyden mixing cracked when one of the densities is
	  null (e.g. there is only one electron and it is a spin polarized
	  calculation)

2002-09-25 02:37  acastro

	* configure: This changed after doing autogen.sh

2002-09-25 02:08  acastro

	* configure.ac, src/ps_kb.F90: I guess that: (i) configure.ac has
	  changed to permit compilation with the intel compiler.  (ii)
	  ps_kb.F90 had some bug? Was it Fernando who found it?

2002-09-24 00:48  acastro

	* src/states_inc.F90: Bug in the preprocessor directive: it is not
	  #elseif but #elif.  At least it made octopus crash in the alphas.

2002-09-13 02:46  acastro

	* share/PP/TM2/Au.ascii: Gold rel gga pseudopotential with core
	  correction. Needed to remove the ugly wiggle in the core region.

2002-09-10 17:53  acastro

	* src/: hgh.F90, lcao.F90, ps3D.F90, xc_GGA.F90: (1) New bug fixed
	  in xc_GGA.F90. When some value of the density is negative (may
	  happen when using Broyden) it crashed when using spin polarized
	  calculations.  (2) Bug fixed in lcao.F90. Now the LCAO
	  calculations also work even if spin polarized calculations are
	  set (it crashed before).  (3) Now the occupations of the
	  pseudo-atomic states are correctly read, and the initial density
	  is constructed accordingly (important when the filling order S,
	  P, D is not followed, as it is the case of gold, titanium, etc)

2002-09-10 13:49  acastro

	* share/PP/TM2/Au.ascii: Uzi Landman gold pseudopotential added.

2002-09-10 11:38  acastro

	* src/xc_GGA.F90: GGA bug fixed. But I will do some tests to see if
	  it really works as it should...

2002-09-09 15:17  acastro

	* src/: Makefile.am, Makefile.in: [no log message]

2002-09-09 14:27  acastro

	* src/phonon_spectrum.F90: [no log message]

2002-09-09 14:23  acastro

	* liboct/interface.c, src/liboct.F90: The utility phonon-spectrum
	  will (eventually) calculate it from the velocity autocorrelation
	  function. But it doew not do it yet.

	  The liboct function number_of_lines(file) has been added and
	  seems to work. It returns the number of lines of the file if it
	  can open it, and -1 otherwise.

2002-09-05 10:32  acastro

	* src/td.F90: Now the kick on the electronic wave functions is also
	  applied to the ions, which means an instantaneous modification of
	  the velocities.

2002-08-30 21:15  acastro

	* share/logo: [no log message]

2002-08-30 21:12  acastro

	* src/h.F90, src/h_external_pot.F90, src/hgh.F90, src/liboct.F90,
	  src/main.F90, src/out.F90, src/out_inc.F90, src/ps3D.F90,
	  src/tm.F90, share/Makefile.am, share/Makefile.in,
	  liboct/interface.c: Bug fixes, and cosmetic changes. Besides
	  that: * Now the output layer admits printing the functions in a
	  given axis (x y or z) * The logo gets out of main and goes as a
	  file to share/logo. It is printed   via a new C function in
	  liboct: print_function.

2002-08-29 02:35  acastro

	* src/: hgh.F90, lcao.F90, ps3D.F90: Solved the problem with H and
	  He.

2002-08-28 23:21  acastro

	* src/: hgh.F90, logrid.F90, ps3D.F90, tm.F90: Finally LCAO works
	  also for the hgh case. The pseudo-wavefunctions are properly
	  calculated now. Code is also a bit cleaner (again).  BUT: *
	  Problems with H and He, regarding the occupations. In fact, I
	  think atomic occupations have not been properly treated also in
	  the case of Troullier-Martins. I will solve that asap.  * It
	  takes a couple of minutes to calculate the pseudo-wavefunctions
	  for some elements (I have not checked all of them, of course).
	  This is a bit annoying. We may think of directly storing the
	  pseudo-wavefunctions in the share directory. I don't know how big
	  that database would be. If it is not huge, we should do it.

2002-08-27 02:10  acastro

	* src/logrid.F90: As usual, forgot something.

2002-08-27 01:46  acastro

	* src/: Makefile.am, Makefile.in, h_external_pot.F90, hgh.F90,
	  ps.F90, ps1D.F90, ps3D.F90, specie.F90, tm.F90: Another step in
	  the cleanup of the pseudopotential mess. Just intermediate, but I
	  commit before it gets too messy. From the user's point of view,
	  the infomative output about the pseudoptentials is gone. Info now
	  only comes up if verbose mode is chosen. In that case, a
	  directory with each species name appears, and info is there.

2002-08-26 14:31  marques

	* src/: Makefile.am, Makefile.in, excitations.F90, linear.F90,
	  xc_LDA.F90: Added utility to calculate linear response
	  excitations a la Petersilka It also calculates the dipole matrix
	  elements.

2002-08-25 15:49  marques

	* src/: run.F90, td_calc.F90: Unimportant bug fixes.

2002-08-20 12:06  acastro

	* liboct/interface.c: Forgot to commit interface.c

2002-08-20 12:01  acastro

	* src/: Makefile.am, Makefile.in, global.F90, liboct.F90, main.F90:
	  * main.F90: removed the useless test function.

	  * Timing is now done throught the C library clock() function, for
	  which there is now an interface in liboct. Previous timing was
	  giving crap sometimes. That means:  - Added the interface to
	  liboct/interface.c  - Added the second interface to
	  src/liboct.F90 as usual.   - Now global uses liboct, and not the
	  other way around.   - As a consequence, I had to change
	  Makefile.am (hence Makefile.in) so	 that liboct.F90 is
	  compiled first. config_F90.h also now depends on     liboct.F90
	  as well as on global.F90

	  * Suggestion: should liboct be organised somehow? Maybe three
	  different libraries should look prettier: one for the parser, one
	  for the gsl interface and one for auxiliary stuff -- such as
	  interfaces to the C standard library as clock().

2002-07-24 21:01  marques

	* src/: h.F90, h_external_pot.F90: New classic potential for QM/MM

2002-07-24 09:07  acastro

	* src/strength_function.F90: Bug fixed.

2002-07-24 08:27  acastro

	* src/strength_function.F90: Bug fixed.

2002-07-23 13:42  marques

	* src/xc_HJU.F90: now this functional seems to work :)

2002-07-23 13:02  acastro

	* src/geom_opt.F90: Bug fixed.

2002-07-22 19:32  acastro

	* src/h_external_pot.F90: Bug fix (this bug showed only in the
	  alphas when the local potential space is represented in Fourier
	  space...)

2002-07-22 19:11  acastro

	* src/atom.F90, src/global.F90, src/liboct.F90, liboct/interface.c:
	  A Mawxwell-Boltzmann initial velocity distribution may now be
	  assigned to the ions, by using the variable "RandomVelocityTemp",
	  which must be given as value the desired temperature (default =
	  0).  TODO: Update the manual!!!

2002-07-19 13:29  marques

	* src/: xc.F90, xc_HJU.F90: A couple of bug fixes in the HJU
	  functional.

2002-07-19 12:15  marques

	* src/td.F90: Alberto: you reentered this bug in your commit!

2002-07-19 12:05  acastro

	* src/: Makefile.am, Makefile.in, h_inc.F90, mesh3D_inc.F90,
	  ps3D.F90, specie.F90, td.F90, td_calc.F90, td_write.F90: * td.F90
	  split: td_calc and td_write are included by the preprocessor.  *
	  Bug in ps3D.F90 fixed (origin was not correctly treated for
	  Troullier-   Martins nonlocal components of the pseudopotentials)
	  * The optional argument "alpha" in the derivatives definition in
	  mesh3D_inc.F90 is now either real or complex.  * Bug fixed in
	  specie.F90: the limits of the nonlocal pseudopotential
	  components when r goes to zero were not properly fixed.  * And
	  td_calc_tacc now works! Finally! So the harmonic spectrum may
	  now be calculated, with the next considerations:    - Ions should
	  *not* move.	  - When using hgh, don't know what happens.	 -
	  When using user defined potentials, don't know what happens.

2002-07-16 02:18  marques

	* src/: Makefile.am, Makefile.in, td.F90, xc.F90, xc_HJU.F90,
	  xc_KLI.F90: First attempt at Hans-Juergen SIC functional.

2002-07-10 19:17  acastro

	* doc/: octopus.info, octopus.texi: Ready for tag.

2002-07-10 19:00  marques

	* share/PP/TM2/: N.ascii, O.ascii: Added TM pseudopotential for N
	  and O

2002-07-10 18:50  acastro

	* doc/: octopus.info, octopus.texi: New version of the manual.

2002-07-10 16:03  marques

	* src/td.F90: Alberto forgot to also change the error message :)

2002-07-10 15:55  acastro

	* src/td.F90: Little stupid bug corrected.

2002-07-10 14:11  acastro

	* src/out.F90: OutputXYZ is not used.

2002-07-09 20:33  acastro

	* src/mesh1D_create.F90: It was rather stupid before...

2002-07-09 19:50  marques

	* src/: hs_from_acc.F90, hs_from_mult.F90, main.F90, spectrum.F90,
	  strength_function.F90: inp can now be read from standard input!
	  Changed filenames for spectra.

2002-07-09 19:31  acastro

	* src/out_inc.F90: It was not "#else if" nor "#elseif" but "#elif"!

2002-07-09 19:18  marques

	* configure, configure.ac: changed version number to 1.0. cvs will
	  be tagged soon!

2002-07-09 19:08  marques

	* configure, build/fortran90.m4: Changed ifc default options.

2002-07-09 18:24  acastro

	* src/: global.F90, lcao.F90, main.F90, nbo2xyz.F90: verbose mode
	  if and only if Verbose > 999. Now it is clear.

2002-07-09 17:59  acastro

	* src/: Makefile.am, Makefile.in: Forgot to change these two files
	  (to remove the nbo2xyz_main thing).

2002-07-09 17:10  marques

	* src/: atom.F90, global.F90: Bug regarding coordinate ajusts fixed
	  (compiler bug, not mine, I think)

2002-07-09 16:45  acastro

	* src/: nbo2xyz.F90, nbo2xyz.h, nbo2xyz_main.c: nbo2xyz compilation
	  should not crash now in alphas.  (but command-line flags are no
	  longer possible. Whenever I find out the way to do it in a fully
	  standard and easy way I will do it...)

2002-06-25 19:35  acastro

	* src/mix.F90: Refixing what already was fixed.

2002-06-25 18:53  acastro

	* src/mix.F90: Little bug fixed.

2002-06-25 11:45  acastro

	* src/: mix.F90, td.F90: Bug fixes.

2002-06-25 00:17  acastro

	* src/: td.F90, td_init.F90: Now the HS may be calculated from
	  Ehrenfest theorem also with nonlocal potentials. However: (i)
	  user defined potentials are not considered, and (ii) movement of
	  the ions is also not considered. This will come later.

2002-06-24 23:15  acastro

	* src/run.F90: LCAO also when static restart file is not found.

2002-06-24 23:13  acastro

	* src/: out_inc.F90, states_inc.F90: Bug fixes in preprocessor
	  directives.

2002-06-18 12:40  acastro

	* AUTHORS: George wants this slight modification.

2002-06-17 19:31  acastro

	* src/spectrum.F90: strength-function took *ages* to calculate a
	  spectrum when the "pol" damping was used... This way it should be
	  only one second (OK, it was just maybe half a minute before, but
	  it was annoying!)

2002-06-17 18:53  acastro

	* src/spectrum.F90: Just two stupid changes, so that
	  strength-function can keep on working after you changed the way
	  output files are named...

2002-06-17 14:30  acastro

	* src/scf.F90: Sorry, submitted the wrong file...

2002-06-17 14:18  acastro

	* src/scf.F90: Had to add that stupid line because Intel 6.0
	  compiler issued an "Address Error". I think it was proper Fortran
	  before, but nevertheless this way it works. (It was a nightmare
	  to find the bug...)

2002-06-12 16:46  acastro

	* configure, configure.ac: I think that the proper way to include
	  BLAS/LAPACK libraries when using the intel compiler is through
	  the Math Kernel Library (mkl) of Intel.  Please Miguel check
	  wether I changed properly the configure.ac file, it works in my
	  computer but I am not an expert in those macros.

2002-06-05 03:36  marques

	* src/: mix.F90, mix_inc.F90, states_inc.F90: Added subroutine to
	  calculate the current ELF needed an extra term in case we have
	  complex wave-functions

2002-06-05 01:52  marques

	* src/: out_inc.F90, run.F90, scf.F90, states.F90, states_inc.F90,
	  td.F90, td_init.F90, unocc.F90: OK, finished rewritting output
	  layer. Now it creates (lots of) directories everywhere ;) See if
	  you like it better! Also one can output density, etc with time.

2002-06-04 17:25  marques

	* ChangeLog, src/mesh1D_inc.F90, src/mesh3D_inc.F90, src/run.F90,
	  src/scf.F90, src/states.F90, src/states_inc.F90,
	  src/static_pol.F90, src/td_init.F90, src/unocc.F90: Elf now seems
	  to work (funny bug in derivatives fixed) Second step at
	  rewritting the output systems (only td left)

2002-05-31 10:52  marques

	* src/states.F90: stupid units! The ELF is dimensionless!!!!

2002-05-31 10:42  marques

	* ChangeLog, liboct/interface.c, src/Makefile.am, src/Makefile.in,
	  src/geom_opt.F90, src/h.F90, src/h_external_pot.F90,
	  src/lasers.F90, src/liboct.F90, src/out.F90, src/ps3D.F90,
	  src/scf.F90, src/states.F90, src/systm.F90, src/xc.F90: Started
	  rewitting the output system (first attempt at elf) funny thing
	  with strings (hard to explain... fortran...)

2002-05-31 03:12  marques

	* src/: hs_from_acc.F90, hs_from_mult.F90, spectrum.F90: Now we can
	  ask for a lower limit for the calculation of the spectra.

2002-05-30 17:14  marques

	* liboct/interface.c, src/lasers.F90: New laser mode '10' (read
	  amplitude and phase from a file)

2002-05-29 15:32  marques

	* configure, configure.ac, src/nbo2xyz.F90, src/nbo2xyz_main.c:
	  Sorry, screwed up the configuratino in the last commit.  Also a
	  couple of changes not to get compiler warnings ;)

2002-05-29 15:16  marques

	* configure, configure.ac, src/eigen_cg1.F90, src/h_inc.F90,
	  src/scf.F90, src/states.F90, src/xc_pot.F90: Code merge - a
	  couple of new things on non-collinear spin   (still doesn't
	  converge), and a couple of bug fixes.

2002-05-28 17:21  acastro

	* src/: dx.F90, function_to_dx.F90, global.F90, mesh1D_inc.F90: The
	  alpha argument was not passed to the derivatives subroutine in 1D
	  version, so it did not compile. Besides that, I have overloaded
	  the + operator to concatenate strings; this way the operator '//'
	  should not be used because it interacts badly with the
	  preprocessor - I had problems compiling the 1D version because of
	  that. So, from now on, '+' instead of '//'.

2002-05-21 20:06  acastro

	* src/: td_init.F90, td_rti.F90: TDEvolution = 4. Let's try it...

2002-05-21 12:23  acastro

	* configure, configure.ac: So that C and Fortran blas/lapack
	  libraries can coexist peacefully in the same computer (relevant
	  for linux).

2002-05-21 11:17  acastro

	* src/: nbo2xyz.F90, nbo2xyz_main.c: Bug fixed.

2002-05-20 17:33  acastro

	* src/: global.F90, h_inc.F90, mesh3D_inc.F90, td.F90: Two things:
	  (i) In stdout, the annoying dipole is not printed any longer,
	  but the elapsed time in each iteration. This will ease
	  benchmarking, since I have seen that debuggin mode changes the
	  execution time of some of the subroutines sometimes, specially
	  when using the optimizer.    (ii) A *very* stupid hack in the
	  laplacian allows to increase	the overall speed in 10% (test made
	  with the formaldiminium molecule).

2002-05-19 23:03  acastro

	* src/: Makefile.am, Makefile.in, nbo2xyz.F90, nbo2xyz.h,
	  nbo2xyz_main.c: By using the GNU "gengetopt" it is very easy to
	  allow the external utilities to accept command line options; I
	  have included it in the nbo2xyz. It now is a 4 lines C program
	  (in nbo2xyc.c) that calls a Fortran subroutine. The rest of the
	  file nbo2xyz.c is automatically generated by gengetopt.  This
	  will eventually free nbo2xyz of the existence of the "inp" file,
	  and wil not need to call "atom_init". And the user will not have
	  to modify the inp file to change the sampling rate.

2002-05-17 18:27  acastro

	* src/nbo2xyz.F90: alpha compiler is annoyingly picky.

2002-05-17 17:00  acastro

	* src/: Makefile.am, Makefile.in: Better this way

2002-05-17 16:42  marques

	* src/function_to_dx.F90: simple mistype corrected.

2002-05-17 16:27  acastro

	* src/: Makefile.am, Makefile.in, nbo2xyz.F90: The utility nbo2xyz
	  now reads a nbo file and prints out a xyz file with a sequence of
	  configurations to make a movie.

2002-05-17 05:21  acastro

	* src/: Makefile.in, dx.F90, function_to_dx.F90: Some bug fixes

2002-05-15 09:57  acastro

	* configure: This was missing

2002-05-15 09:42  acastro

	* Makefile.am, Makefile.in, configure.ac:	Started the faq
	  section with some question about units. I did not
	  finish them, though.

2002-05-14 20:01  acastro

	* src/: dx.F90, function_to_dx.F90: Sorry, last commit was not
	  complete..

2002-05-14 19:40  acastro

	* liboct/interface.c, src/Makefile.am, src/liboct.F90: A first
	  attempt of module dx -- that builds the necessary interface to dx
	  -- has been added. Also, a first version of an auxiliary utility,
	  function-to-dx. It will read a restart/cont file and build the
	  necessary data and header files for dx. It is very preliminary!!

2002-05-14 13:25  acastro

	* src/: mesh.F90, mesh1D_create.F90, mesh3D_create.F90,
	  mesh3D_inc.F90: The laplacian/gradient is calculated now
	  differently if aa isotropical mesh is used. The reason is
	  efficiency. Using abf90 in linux, the td part now seems to go 50%
	  faster.

2002-05-14 13:02  acastro

	* src/td_rti.F90: I need this to benchmark.

2002-05-13 16:15  marques

	* src/out.F90: New output layer.  New output layer (forgot this
	  file, sorry!)

2002-05-13 16:13  marques

	* ChangeLog, liboct/interface.c, src/Makefile.am, src/Makefile.in,
	  src/h.F90, src/h_external_pot.F90, src/h_inc.F90,
	  src/hamiltonian.F90, src/hamiltonian_inc.F90, src/liboct.F90,
	  src/systm.F90: Rename files.	Started rewritting the output
	  layer.

2002-05-13 16:07  marques

	* src/: states.F90, states_inc.F90, systm.F90, td.F90: Restart is
	  now done from .nbo file.

2002-05-09 18:56  acastro

	* src/: states.F90, states_inc.F90, systm.F90: The restart may now
	  be made with the ions moving.

2002-05-08 20:38  acastro

	* src/: h_external_pot.F90, mesh1D_inc.F90, ps1D.F90: The 1D part
	  had to be updated after the hgh ps were introduced (it did not
	  compile)

2002-05-06 14:03  marques

	* share/PP/HGH/: Ag.hgh, Ag_sc.hgh, Al.hgh, Ar.hgh, As.hgh, At.hgh,
	  Au.hgh, Au_sc.hgh, B.hgh, Ba.hgh, Ba_sc.hgh, Be.hgh, Be_sc.hgh,
	  Bi.hgh, Br.hgh, C.hgh, Ca.hgh, Ca_sc.hgh, Cd.hgh, Cd_sc.hgh,
	  Ce_sc.hgh, Cl.hgh, Co.hgh, Co_sc.hgh, Cr.hgh, Cr_sc.hgh, Cs.hgh,
	  Cs_sc.hgh, Cu.hgh, Cu_sc.hgh, Dy_sc.hgh, Er_sc.hgh, Eu_sc.hgh,
	  F.hgh, Fe.hgh, Fe_sc.hgh, Ga.hgh, Ga_sc.hgh, Gd_sc.hgh, Ge.hgh,
	  H.hgh, He.hgh, Hf_sc.hgh, Hg.hgh, Hg_sc.hgh, Ho_sc.hgh, I.hgh,
	  In.hgh, In_sc.hgh, Ir.hgh, Ir_sc.hgh, K.hgh, K_sc.hgh, Kr.hgh,
	  La_sc.hgh, Li.hgh, Li_sc.hgh, Lu_sc.hgh, Mg.hgh, Mg_sc.hgh,
	  Mn.hgh, Mn_sc.hgh, Mo.hgh, Mo_sc.hgh, N.hgh, Na.hgh, Na_sc.hgh,
	  Nb.hgh, Nb_sc.hgh, Nd_sc.hgh, Ne.hgh, Ni.hgh, Ni_sc.hgh, O.hgh,
	  Os.hgh, Os_sc.hgh, P.hgh, Pb.hgh, Pd.hgh, Pd_sc.hgh, Pm_sc.hgh,
	  Po.hgh, Pr_sc.hgh, Pt.hgh, Pt_sc.hgh, Rb.hgh, Rb_sc.hgh, Re.hgh,
	  Re_sc.hgh, Rh.hgh, Rh_sc.hgh, Rn.hgh, Ru.hgh, Ru_sc.hgh, S.hgh,
	  Sb.hgh, Sc.hgh, Sc_sc.hgh, Se.hgh, Si.hgh, Sm_sc.hgh, Sn.hgh,
	  Sr.hgh, Sr_sc.hgh, Ta.hgh, Ta_sc.hgh, Tb_sc.hgh, Tc.hgh,
	  Tc_sc.hgh, Te.hgh, Ti.hgh, Ti_sc.hgh, Tl.hgh, Tl_sc.hgh,
	  Tm_sc.hgh, V.hgh, V_sc.hgh, W.hgh, W_sc.hgh, Xe.hgh, Y.hgh,
	  Y_sc.hgh, Yb_sc.hgh, Zn.hgh, Zn_sc.hgh, Zr.hgh, Zr_sc.hgh: Added
	  the rest of the pseudopotential files.  Someone should check it
	  they are OK!

2002-05-05 23:21  marques

	* Makefile.am, Makefile.in: Delete config.status and config.log
	  when make dist-clean

2002-05-05 22:47  marques

	* ChangeLog, liboct/parse.c, share/PP/HGH/B.hgh,
	  share/PP/HGH/Be.hgh, share/PP/HGH/Be_sc.hgh, share/PP/HGH/C.hgh,
	  share/PP/HGH/H.hgh, share/PP/HGH/He.hgh, share/PP/HGH/Li.hgh,
	  share/PP/HGH/Li_sc.hgh, share/PP/HGH/N.hgh, share/PP/HGH/Na.hgh,
	  share/PP/HGH/Ti.hgh: Added a couple of .hgh files

2002-05-05 22:46  marques

	* src/: h_external_pot.F90, hgh.F90, ps3D.F90: A couple of bug
	  fixes.

2002-05-05 20:34  marques

	* src/: hgh.F90, ps3D.F90, tm.F90: Fixed input/output bugs!

2002-05-05 20:09  marques

	* src/: hamiltonian_inc.F90, hgh.F90, td_rti3.F90: Code now
	  compiles without errors.

2002-05-05 19:40  acastro

	* src/: h_external_pot.F90, specie.F90: Bug fixed.

2002-05-05 19:26  marques

	* ChangeLog, configure, configure.ac, share/PP/Makefile.am,
	  share/PP/Makefile.in, share/PP/HGH/Makefile.am,
	  share/PP/HGH/Makefile.in, share/PP/TM2/C.ascii,
	  share/PP/TM2/H.ascii, src/Makefile.am, src/Makefile.in,
	  src/hamiltonian_inc.F90, src/ps.F90, src/td.F90, src/td_init.F90,
	  src/td_rti.F90, src/td_rti3.F90: Created Makefiles for HGH share
	  directory Added split-operator propagator (do *not* use with
	  velocity gauge)

2002-05-04 21:42  acastro

	* share/PP/HGH/C.hgh, share/PP/HGH/H.hgh, share/PP/HGH/He.hgh,
	  share/PP/HGH/Na.hgh, share/PP/HGH/Ti.hgh, src/hgh.F90,
	  src/tm.F90: hgh ps added to the share/PP/HGH directory, that I
	  created. The program tries to read them from there. *BUT* the
	  building process has probably to be touched, and I don't know how
	  to do it :((

2002-05-03 19:15  acastro

	* src/: atom.F90, h_external_pot.F90, h_forces.F90,
	  hamiltonian_inc.F90, hgh.F90, lcao.F90, liboct.F90, ps.F90,
	  ps3D.F90, specie.F90, tm.F90: Goedecker pseudopotentials added.
	  Some comments: (1) LCAO calculations don't work properly, because
	  the Goedecker pseudoeigenfunctions are badly calculated. It can
	  be fixed, but it will take time.  (2) The files ps3D.F90, tm.F90
	  and hgh.F90 are still a mess, but they are on their way of
	  looking nice. Need some work.  (3) The pseudopotential files for
	  Goedecker may be obtained from their paper, just copying 10 or 12
	  numbers, in the same format they use in their paper. Those files
	  should go into the share directory, as Miguel did for the TM2 ps.
	  Question: do I just have to add a "HGH" directory to share/PP,
	  and it is done? (4) The "Species" input format changed (one more
	  field to specify "tm" or "hgh"). I will change the manual.

2002-05-03 18:31  marques

	* liboct/interface.c: Comment was out of place.

2002-05-03 18:24  acastro

	* liboct/interface.c: Gamma function added to liboct

2002-04-29 23:06  marques

	* ChangeLog, Makefile.am, Makefile.in, acinclude.m4, aclocal.m4,
	  autogen.sh, configure, configure.ac, build/acx.m4,
	  build/fortran90.m4, doc/octopus.info, liboct/geom_opt.c,
	  liboct/grammar.c, liboct/grammar.y, liboct/interface.c,
	  liboct/liboct.h, liboct/parse.c, liboct/parse_exp.c,
	  liboct/recipes.c, liboct/symbols.c, liboct/symbols.h,
	  liboct/varia.c, liboct/ylm.c, share/Makefile.am,
	  share/Makefile.in, share/PP/Makefile.am, share/PP/Makefile.in,
	  share/PP/TM2/Makefile.am, share/PP/TM2/Makefile.in,
	  share/PP/TM2/Na.ascii, src/Makefile.am, src/Makefile.in,
	  src/atom.F90, src/complex.F90, src/eigen.F90, src/eigen_cg1.F90,
	  src/eigen_cg2.F90, src/fft.F90, src/geom_opt.F90, src/global.F90,
	  src/h_external_pot.F90, src/h_forces.F90, src/hamiltonian.F90,
	  src/hamiltonian_inc.F90, src/hartree.F90, src/hartree1D.F90,
	  src/hartree3D.F90, src/hs_from_acc.F90, src/hs_from_mult.F90,
	  src/lasers.F90, src/lcao.F90, src/liboct.F90, src/main.F90,
	  src/math.F90, src/mesh.F90, src/mesh1D.F90,
	  src/mesh1D_create.F90, src/mesh1D_inc.F90, src/mesh3D.F90,
	  src/mesh3D_create.F90, src/mesh3D_inc.F90, src/mesh_inc.F90,
	  src/mix.F90, src/mix_inc.F90, src/pes.F90, src/pes_mask.F90,
	  src/pes_rc.F90, src/ps.F90, src/ps1D.F90, src/ps3D.F90,
	  src/pulpo.F90, src/real.F90, src/run.F90, src/scf.F90,
	  src/specie.F90, src/spectrum.F90, src/spline.F90, src/states.F90,
	  src/states_inc.F90, src/states_kpoints.F90, src/static_pol.F90,
	  src/strength_function.F90, src/systm.F90, src/td.F90,
	  src/td_init.F90, src/td_rti.F90, src/undef.F90, src/units.F90,
	  src/unocc.F90, src/xc.F90, src/xc_GGA.F90, src/xc_KLI.F90,
	  src/xc_KLI_SIC.F90, src/xc_KLI_x.F90, src/xc_LDA.F90,
	  src/xc_pot.F90: Added GPL header to (almost) all files Added
	  share directory to put pseudopotentials

2002-04-26 16:37  marques

	* liboct/parse.c: Alberto had changed parse_block_int, but not
	  parse_int

2002-04-26 16:33  marques

	* liboct/parse.c: Cosmetics

2002-04-26 11:05  acastro

	* liboct/parse.c: Negative integer numbers were not well handled in
	  parse_block_int.

2002-04-24 12:44  acastro

	* src/: h_external_pot.F90, ps3D.F90, specie.F90: Removed the
	  unnecesary dividing by r**l in the definition of uv. This
	  simplifies calculating the gradient for the forces.  Also, in
	  h_external_pot, the uvu terms are always calculated in both ways
	  (numerically and analytically) and consistency check is
	  performed.  However, the analytical form is always used.

2002-04-23 13:27  marques

	* ChangeLog, src/hamiltonian_inc.F90: Memory leak fixed in Hpsi
	  (hamiltonian_inc.F90)

2002-04-23 10:09  marques

	* ChangeLog, src/atom.F90, src/geom_opt.F90,
	  src/h_external_pot.F90, src/hamiltonian.F90,
	  src/hamiltonian_inc.F90, src/run.F90, src/specie.F90,
	  src/states.F90, src/systm.F90, src/xc_GGA.F90, src/xc_KLI.F90,
	  src/xc_KLI_SIC.F90, src/xc_pot.F90: Bug fix in restart in mpi
	  mode (run.F90) Cleaned up non-linear core corrections (faster,
	  smaller)

2002-04-20 20:34  marques

	* ChangeLog, configure, build/fortran90.m4, src/Makefile.am,
	  src/Makefile.in, src/h_external_pot.F90, src/hamiltonian.F90,
	  src/hamiltonian_inc.F90, src/hs_from_acc.F90,
	  src/hs_from_mult.F90, src/mesh3D_create.F90, src/mix_inc.F90,
	  src/spectrum.F90: Changed AIX compiler options in fortran.m4 Bug
	  fix related to the reading of OutputPotential...  Added utility
	  to calculate harmonic spectrum from accelaration file  (currently
	  only works for local potentials)

2002-04-18 16:54  acastro

	* src/: hartree3D.F90, mesh3D.F90, states.F90: Bug fixes.

2002-04-17 11:47  marques

	* ChangeLog, Makefile.am, Makefile.in, configure, configure.ac,
	  build/octopus.spec.in, liboct/config.h.in, src/Makefile.am,
	  src/Makefile.in, src/config.h.in, src/hamiltonian_inc.F90,
	  src/hartree3D.F90, src/mesh3D.F90, src/mesh3D_create.F90,
	  src/mesh3D_inc.F90, src/states.F90, src/states_kpoints.F90: First
	  round at polymers.

2002-04-16 19:50  marques

	* ChangeLog, src/spectrum.F90, src/strength_function.F90: bug fix
	  in spectrum.F90

2002-04-16 18:14  cvsusers

	* src/: hamiltonian_inc.F90, lcao.F90, run.F90, scf.F90: LCAO is
	  done now calculating all matrix elements at the beginning, except
	  that part that has to be updated every step.

2002-04-16 18:10  marques

	* AUTHORS, ChangeLog, INSTALL: This should have been done a long
	  time ago!

2002-04-16 17:40  marques

	* Makefile.am, Makefile.in, acinclude.m4, aclocal.m4, configure,
	  configure.ac, fortran90.m4, build/acx.m4, build/fortran90.m4,
	  doc/Makefile.in, liboct/Makefile.in, liboct/config.h.in,
	  liboct/geom_opt.c, liboct/recipes.c, src/Makefile.am,
	  src/Makefile.in, src/config.h.in, src/h_forces.F90,
	  src/hamiltonian_inc.F90, src/mix_inc.F90, src/pes.F90,
	  src/pes_mask.F90, src/run.F90, src/states_inc.F90, src/td.F90:
	  MPI code now working build system simplifyed a bit (GSL part)

2002-04-12 08:42  marques

	* src/: geom_opt.F90, scf.F90: Geometry optimization seems to work
	  for:	 steepest descents   alphas (code crashes miserably in i686
	  god know why!)

2002-04-12 08:39  marques

	* src/states.F90: changed EmptyStates -> ExtraStates to avoid
	  confusion.

2002-04-12 08:38  marques

	* src/units.F90: Force factor was wrong.

2002-04-12 03:21  cvsusers

	* src/: lcao.F90, run.F90, scf.F90: SCF within LCAO subspace (not
	  very smart yet...)

2002-04-11 14:13  cvsusers

	* src/lcao.F90: Bug fixed. Pointers caused troubles, I just removed
	  them because I think they will always cause trouble in Fortran...

2002-04-10 16:52  cvsusers

	* src/atom.F90: Nullify instead of allocating to zero. To keep
	  Compaq compiler happy.

2002-04-10 16:25  cvsusers

	* src/: h_external_pot.F90, mesh3D_inc.F90: Functionality of
	  mesh_write_function improved. Local potential may now be printed
	  in a line or plane. Should keep improving, nevertheless.

2002-04-10 02:32  marques

	* TODO, liboct/Makefile.am, liboct/Makefile.in, liboct/f77_func.h,
	  liboct/geom_opt.c, liboct/interface.c, src/Makefile.am,
	  src/Makefile.in, src/geom_opt.F90, src/hamiltonian.F90,
	  src/hamiltonian_inc.F90, src/pes.F90, src/pes_mask.F90,
	  src/run.F90, src/td_init.F90: Added geometry optimization (using
	  GSL) Ansorbing boundaries now work with parallelepiped box.

2002-04-09 12:55  cvsusers

	* src/: atom.F90, lcao.F90: Stupid Compaq compiler does not like to
	  be passed an unallocated array, so I allocate ca%atom to zero.
	  Also, the compiler did not like something about lcao, I don't
	  know very well why. Since it is not very important, I left it as
	  it was before, which worked.

2002-04-07 00:00  marques

	* configure, configure.ac, src/Makefile.am, src/Makefile.in,
	  src/complex.F90, src/hamiltonian.F90, src/hamiltonian_inc.F90,
	  src/hs_from_mult.F90, src/liboct.F90, src/mix_inc.F90,
	  src/ps_xc.F90, src/real.F90, src/run.F90, src/spectrum.F90,
	  src/states.F90, src/states_inc.F90, src/strength_function.F90,
	  src/td.F90, src/td_rti.F90, src/undef.F90, src/xc.F90,
	  src/xc_KLI.F90, src/xc_KLI_SIC.F90, src/xc_LDA.F90,
	  src/xc_pot.F90: Added non-collineal spin (not tested) Added a
	  couple of utilities to calculate spectra.

2002-04-05 18:47  cvsusers

	* src/: mesh.F90, mesh1D.F90, mesh1D_inc.F90, mesh3D.F90,
	  mesh3D_inc.F90, mesh_inc.F90: Common code in 1D and 3D
	  indentified. Some more simplifications in the 1D part may be done

2002-04-05 17:03  cvsusers

	* src/: h_forces.F90, td.F90: Bug fixed in mesh1D_inc.F90,
	  h_forces, and td.F90...

2002-04-04 16:54  cvsusers

	* src/mesh1D_inc.F90: Bug fixed: gradient wasn not properly
	  calculated

2002-04-03 16:36  marques

	* TODO: [no log message]

2002-04-03 16:35  marques

	* TODO: nada de especial

2002-04-02 16:28  marques

	* src/td.F90: small bug fix

2002-04-02 16:24  marques

	* src/td.F90: Correction to the calculation of the acceleration.

2002-04-02 01:10  marques

	* Makefile.am, Makefile.in, TODO, acinclude.m4, aclocal.m4,
	  configure, configure.ac, fortran90.m4, doc/Makefile.in,
	  liboct/Makefile.in, liboct/config.h.in, liboct/interface.c,
	  liboct/recipes.c, src/Makefile.am, src/Makefile.in,
	  src/config.h.in, src/global.F90, src/h_external_pot.F90,
	  src/h_forces.F90, src/mesh1D_inc.F90, src/mesh3D_inc.F90,
	  src/run.F90, src/td.F90, src/td_init.F90, src/xc.F90:
	  --enable-mpi now works Cleaned up build system

2002-03-30 23:37  cvsusers

	* src/td.F90: A sligth change in td_calc_tacc

2002-03-29 19:37  cvsusers

	* src/: td.F90, td_init.F90, units.F90: Horrible bug fixed in
	  td.F90! It seems that the laser was not updated for the ionic
	  force! And I think this is the second time I slip that bug in the
	  code...  Besides that, system dipole acceleration may now be
	  output on the fly.

2002-03-28 22:28  cvsusers

	* src/: h_external_pot.F90, ps.F90, ps1D.F90, ps3D.F90, specie.F90:
	  ps1D cleaned. Now the 1D atoms potentials should be read from
	  input file, parsing the appropriate potential. Also, user defined
	  potentials are now available in 1D, too.

2002-03-28 14:23  cvsusers

	* src/: h_external_pot.F90, mesh1D_inc.F90, mesh3D_inc.F90: Within
	  mesh, the utility RFUNC(write_mesh_function) is added to write a
	  function defined in the mesh to a given file. More sophisticated
	  things of this sort should be added, I think, or either this one
	  improved.  I use it at the end of h_external_pot, now, to output
	  the local potential if desired.

2002-03-28 12:14  cvsusers

	* src/h_forces.F90: Bug fix: the local part was not added...

2002-03-27 05:51  marques

	* liboct/interface.c, src/h_forces.F90, src/hartree3D.F90,
	  src/lcao.F90, src/specie.F90: Several bug fixes (now userdef
	  potential works better)

2002-03-26 23:36  marques

	* liboct/interface.c, liboct/parse.c, liboct/symbols.c,
	  liboct/symbols.h, src/h_external_pot.F90, src/liboct.F90,
	  src/mesh3D_create.F90, src/specie.F90, src/states_inc.F90,
	  src/td_init.F90: User defined potentials now work (they are cute)
	  Removed restrictions regarding the mesh inputs Couple irrelevant
	  bug fixes

2002-03-26 15:42  marques

	* src/: eigen_cg2.F90, ps3D.F90, run.F90, states.F90,
	  states_inc.F90: Better initialization of zpsi Pseudopotentials
	  can be read from .ascii file

2002-03-14 16:01  marques

	* Makefile.am, Makefile.in, acinclude.m4, aclocal.m4, configure,
	  src/Makefile.in, src/eigen_cg1.F90, src/eigen_cg2.F90,
	  src/mix.F90: Bug in broyden caught and smashed! Let us hope this
	  is the last of the BIG bugs! Updated the inp file which was
	  outdated.

2002-03-14 08:59  marques

	* src/: Makefile.am, eigen_cg2.F90, mix_inc.F90, pes_mask.F90,
	  states_inc.F90, td_init.F90: Small fixes.  Major bug present in
	  the code!!! In the scf cycle (somewhere) Beware!

2002-03-14 05:23  marques

	* liboct/symbols.c, src/mesh1D.F90, src/mesh3D.F90,
	  src/mesh3D_create.F90: Missplels corrected   cilinder -> cylinder
	  parallelpe.. -> pasallelepe..  This means two options
	  changed!!!

2002-03-14 04:51  marques

	* acinclude.m4, aclocal.m4, configure, configure.ac,
	  doc/octopus.info, doc/octopus.texi, src/atom.F90, src/global.F90,
	  src/td.F90, src/units.F90: Troubleshooting section in the manual.
	  Code now compiles seemleesly with the intel compiler.

2002-03-14 02:09  marques

	* acinclude.m4, aclocal.m4, configure, src/atom.F90, src/lcao.F90,
	  src/ps3D.F90: Code now works on the Intel compiler for Linux.

2002-03-14 00:47  marques

	* acinclude.m4, aclocal.m4, configure, configure.ac,
	  doc/octopus.info, doc/octopus.texi, liboct/interface.c,
	  liboct/liboct.h, liboct/parse.c, liboct/recipes.c,
	  liboct/symbols.c, liboct/symbols.h, liboct/varia.c, liboct/ylm.c:
	  Bug fixes to make octopus run in the IBM preliminary support for
	  the intel compiler

2002-03-13 22:44  marques

	* doc/octopus.texi: Some aditions to the manual.

2002-03-13 19:14  marques

	* doc/octopus.texi: Angel's additions to manual.

2002-03-12 19:24  cvsusers

	* src/: atom.F90, h_external_pot.F90, systm.F90, td.F90: I have
	  moved kinetic_energy, ion_ion_energy and geom_write_xyz from
	  module systm to module atom, where I think it should belong. This
	  way systm is small :)

2002-03-12 12:04  marques

	* acinclude.m4, aclocal.m4, configure, doc/octopus.info,
	  doc/octopus.texi, src/Makefile.am, src/Makefile.in,
	  src/config_F90.h, src/global.F90, src/hamiltonian.F90,
	  src/lcao.F90, src/pes.F90, src/pes_mask.F90, src/pes_rc.F90,
	  src/scf.F90, src/states_inc.F90, src/td.F90, src/td_init.F90:
	  Included Photo-electron analysis Several bug fixes, derived from
	  the attempt to run retinal in kerma.	Most were workarounds to
	  compiler bugs ;)

2002-03-12 11:19  cvsusers

	* src/: h_external_pot.F90, h_forces.F90, mesh1D.F90, mesh3D.F90,
	  specie.F90: Local potential may be calculated in FS now also in
	  ONE_D Also, phase_factor is moved to mesh, where I think it
	  belongs

2002-03-12 04:38  cvsusers

	* src/: h_external_pot.F90, h_forces.F90, mesh1D.F90,
	  mesh1D_inc.F90: In 1D, code should work now also with derivatives
	  calculated in Fourier space.

2002-03-11 06:19  marques

	* Makefile.in, configure, configure.ac, doc/Makefile.in,
	  liboct/Makefile.in, liboct/symbols.c, src/Makefile.am,
	  src/Makefile.in, src/atom.F90, src/h_external_pot.F90,
	  src/lcao.F90: Bug fixes! Code now runs on alpha-osf, and was
	  successfully compiled in a HP 9000/800

2002-03-11 02:15  marques

	* mkinstalldirs: Removed annoying line!

2002-03-11 02:12  marques

	* Makefile.am, Makefile.in, acinclude.m4, aclocal.m4, autogen.sh,
	  automake, config.guess, config.sub, configure, configure.ac,
	  configure.in, depcomp, libtool, ltconfig, ltmain.sh, missing,
	  mkinstalldirs, doc/Makefile.am, doc/Makefile.in,
	  doc/octopus.info, doc/octopus.texi, liboct/Makefile.am,
	  liboct/Makefile.in, liboct/config.h.in, liboct/f77_func.h,
	  liboct/stamp-h1.in, src/Makefile.am, src/Makefile.in,
	  src/config_F90.h, src/eigen.F90, src/fft.F90, src/global.F90,
	  src/hamiltonian.F90, src/hartree.F90, src/lasers.F90,
	  src/lcao.F90, src/main.F90, src/math.F90, src/mesh.F90,
	  src/mesh1D_inc.F90, src/mix.F90, src/ps.F90, src/ps_kb.F90,
	  src/ps_xc.F90, src/run.F90, src/scf.F90, src/specie.F90,
	  src/spline.F90, src/stamp-h2.in, src/states.F90,
	  src/static_pol.F90, src/td.F90, src/undef.F90, src/unocc.F90,
	  src/xc.F90: Upgraded autoconf/automake/libtool Cleaned up build
	  files configure/make/make install now works in Linux (ix86/alpha)
	  and OSF Have to try other machines ;))

2002-03-10 20:20  cvsusers

	* src/: h_external_pot.F90, xc_KLI_x.F90: A couple of bug fixes to
	  avoid memory growth when doing the ionic movement. The change in
	  h_external_pot does not seem to me as definitive.

2002-03-10 18:15  cvsusers

	* src/hamiltonian.F90: Small bug fixed (h%vpsl => h%nextra)

2002-03-09 16:15  marques

	* Makefile.in, configure, configure.in, mkinstalldirs,
	  doc/octopus.texi, src/atom.F90: Changes to make octopus run in
	  linux alpha with Compac's fort.  And it seems to work!

2002-03-09 14:32  marques

	* ltconfig: This file was needed to build in the alphas, so we
	  include it!

2002-03-09 12:44  marques

	* configure, configure.in, mkinstalldirs, doc/octopus.info,
	  doc/octopus.texi, liboct/symbols.c, src/atom.F90: Couple of bug
	  fixes. Nothing special!

2002-03-09 12:32  marques

	* doc/: GPL, octopus.texi: Documentation has grown considerably
	  this night. I think we can already call it a manual now :))

2002-03-09 08:14  marques

	* doc/octopus.texi: Quite some work in manual. But still quite some
	  work to do :))

2002-03-09 02:29  marques

	* liboct/stamp-h1.in, src/stamp-h2.in: These files were missing!

2002-03-09 02:24  marques

	* Makefile, Makefile.in, doc/Makefile, liboct/Makefile,
	  liboct/config.h, src/Makefile, src/config.h: Build was still not
	  OK. Let us see if it improves now!

2002-03-09 02:13  marques

	* Makefile, Makefile.am, Makefile.in, config.guess, config.status,
	  config.sub, configure, configure.in, libtool, ltmain.sh, missing,
	  mkinstalldirs, doc/Makefile, doc/octopus.texinfo,
	  liboct/Makefile, liboct/Makefile.am, liboct/Makefile.in,
	  src/Makefile, src/Makefile.am, src/Makefile.in, src/atom.F90,
	  src/config.h, src/specie.F90, src/systm.F90: Fixed small issues
	  in build system Added missing libtool files Added subroutine to
	  adjust atomic coordinates Couple of bug fixes regarding units

2002-03-07 20:56  marques

	* src/config.h.in: and this one :))

2002-03-07 20:56  marques

	* liboct/grammar.c: forgot this file :)

2002-03-07 20:55  marques

	* AUTHORS, COPYING, ChangeLog, INSTALL, Make.i686, Makefile,
	  Makefile.am, Makefile.in, NEWS, README, acinclude.m4, aclocal.m4,
	  automake, config.guess, config.status, config.sub, configure,
	  configure.in, install-sh, doc/Makefile, doc/Makefile.am,
	  doc/Makefile.in, doc/octopus.texi, doc/texinfo.tex,
	  liboct/Makefile, liboct/Makefile.am, liboct/Makefile.in,
	  liboct/config.h, liboct/config.h.in, liboct/f77_func.h,
	  liboct/interface.c, liboct/recipes.c, src/Makefile,
	  src/Makefile.am, src/Makefile.in, src/atom.F90, src/config.h,
	  src/hartree.F90, src/hartree1D.F90, src/hartree3D.F90,
	  src/mesh.F90, src/mesh1D.F90, src/mesh3D.F90, src/ps.F90,
	  src/states.F90: new build system!

2002-03-07 12:58  cvsusers

	* src/: systm.F90, td.F90, units.F90, xc_KLI_x.F90: Ions should
	  move now (at least velocity verlet has been checked).  I added
	  mass to units module. In xc_KLI_x I had to define ex for the case
	  nst = 1, nspin = 1. In systm.F90 I added the subroutine
	  kinetic_energy, but I think both kinetic_energy and
	  ion_ion_energy should migrate to atom module.

2002-03-06 17:12  marques

	* src/states.F90: Added the possibility to fix the occupations.

2002-03-06 16:38  marques

	* liboct/: Makefile, interface.c, liboct.h, symbols.c, varia.c:
	  added a couple of predefined symbols routine to optimize the size
	  of the ffts

2002-03-06 16:25  marques

	* src/: atom.F90, fft.F90, h_external_pot.F90, h_forces.F90,
	  hamiltonian.F90, liboct.F90, mesh3D.F90, mesh3D_inc.F90,
	  states.F90: Cleaning up.  size of the FFTS is now optimized.

2002-03-05 11:51  cvsusers

	* src/: main.F90, td.F90: In td.F90, ions do not move yet, but file
	  *.nbo is printed, with its proper format (the units are missing).
	  In main.F90, the comments have been removed.

2002-03-05 08:09  cvsusers

	* doc/octopus.texinfo: Installation almost done

2002-03-05 07:32  cvsusers

	* src/: mesh1D.F90, mesh1D_inc.F90: Subroutines
	  mesh_laplacian_in_FS and mesh_gradient_in_FS adapted to 1D.

2002-03-05 05:51  cvsusers

	* doc/: GPL, octopus.texinfo: GPL separated as an @include file.
	  Implementation of @include is not too good in texinfo, to put it
	  nicely (a fucking mess is my bare opinion). So I will have to
	  think how to keep going in a smart way.

2002-03-03 17:04  marques

	* src/: mesh3D.F90, mesh3D_inc.F90: Derivatives in fourier space
	  now seem to work!

2002-03-02 13:22  marques

	* src/: eigen.F90, h_external_pot.F90, h_forces.F90, mesh3D.F90,
	  mesh3D_inc.F90: A couple of bug fixes, but derivatives in Fourier
	  space and local forces in Fourier space still don't work.

2002-03-02 11:18  marques

	* src/: Makefile, global.F90, h_external_pot.F90, h_forces.F90,
	  hamiltonian.F90, mesh3D.F90, mesh3D_inc.F90, scf.F90, specie.F90:
	  Added force calculation.  It works more or less... there are
	  still bugs that I could not find! Try it out, and see if you can
	  find them!

2002-03-02 01:50  marques

	* TODO, src/h_external_pot.F90: Ooops in build_kb_sphere corrected.

2002-03-02 01:37  marques

	* liboct/: Makefile, symbols.c: Changed .true. => true, etc in
	  symbols. It was mistaking the dots at the for numbers!

2002-03-02 01:29  marques

	* src/h_external_pot.F90: There was a (funny) phase missing in the
	  Fourier interpolation scheme.  Now it does seem to work ;))

2002-03-01 13:57  cvsusers

	* src/hamiltonian_inc.F90: Bug fixed...

2002-02-28 20:15  cvsusers

	* src/: ps.F90, ps3D.F90: name changes

2002-02-28 20:12  cvsusers

	* src/: Makefile, atom.F90, h_external_pot.F90, hamiltonian.F90,
	  hamiltonian_inc.F90, hartree1D.F90, lcao.F90, mesh1D.F90,
	  mesh1D_create.F90, mesh1D_inc.F90, ps1D.F90, run.F90, scf.F90,
	  specie.F90, states.F90, states_inc.F90, td.F90, td_rti.F90,
	  xc_KLI.F90, xc_KLI_x.F90: 1D works. Some bugs fixed (the
	  gram_schmidt!)

2002-02-28 09:44  marques

	* src/: Makefile, h_external_pot.F90, hamiltonian.F90, specie.F90:
	  Fourier interpolation stuff for the non-local part of the
	  pseudopotential I think it is not working...

2002-02-26 14:21  cvsusers

	* liboct/parse_exp.c: Parser now accepts descriptors with
	  underscores. But should not be used.

2002-02-26 14:15  cvsusers

	* src/mesh3D_create.F90: Now Box_Shape => BoxShape

2002-02-26 14:09  cvsusers

	* src/mesh3D_create.F90: Box_Shape turned into BoxShape. As a
	  convention, descriptors should *not* contain underscores, even if
	  the parser now considers them.

2002-02-25 20:39  cvsusers

	* liboct/interface.c: Bug fixed.

2002-02-25 20:24  cvsusers

	* liboct/symbols.c: "yes" and "no" are now accepted

2002-02-25 18:40  marques

	* liboct/: parse.c, parse_exp.c: small bug fix!

2002-02-25 15:16  cvsusers

	* src/specie.F90: Bug fixed

2002-02-25 13:55  cvsusers

	* doc/octopus.texinfo: Updated

2002-02-25 13:54  cvsusers

	* src/: h_external_pot.F90, hartree.F90, hartree1D.F90, mesh3D.F90,
	  mesh3D_create.F90, mesh3D_inc.F90, static_pol.F90, td_init.F90,
	  xc_GGA.F90: Different spacings for each direction

2002-02-25 10:51  marques

	* liboct/Makefile, liboct/grammar.y, liboct/interface.c,
	  liboct/liboct.h, liboct/main.c, liboct/math.c, liboct/parse.c,
	  liboct/parse_exp.c, liboct/symbols.c, liboct/symbols.h,
	  liboct/ylm.c, src/Makefile, src/atom.F90, src/eigen.F90,
	  src/fdf.F90, src/global.F90, src/hamiltonian.F90,
	  src/hartree.F90, src/hartree1D.F90, src/io.F90, src/lasers.F90,
	  src/lcao.F90, src/liboct.F90, src/main.F90, src/math.F90,
	  src/mesh1D.F90, src/mesh1D_create.F90, src/mesh3D.F90,
	  src/mesh3D_create.F90, src/mix.F90, src/ps.F90, src/pulpo.F90,
	  src/run.F90, src/scf.F90, src/specie.F90, src/states.F90,
	  src/states_inc.F90, src/static_pol.F90, src/systm.F90,
	  src/td.F90, src/td_init.F90, src/units.F90, src/unocc.F90,
	  src/xc.F90, src/xc_GGA.F90, src/xc_KLI.F90, src/xc_KLI_SIC.F90,
	  src/xc_KLI_x.F90, src/xc_pot.F90: Added calculation of unoccupied
	  states Got rid of fdf library (now we have our own parser in C)

2002-02-21 20:36  cvsusers

	* doc/octopus.texinfo: Bug fixed

2002-02-21 20:29  cvsusers

	* doc/: Makefile, octopus.texinfo: New updates in the doc!

2002-02-21 17:40  marques

	* src/mix.F90: Bug fix: Broyden mixing was not working, but now it
	  is ;)

2002-02-21 15:29  marques

	* src/: atom.F90, eigen.F90, h_external_pot.F90: 3 bug fixes from
	  Alberto

2002-02-20 21:07  cvsusers

	* doc/octopus.texinfo: Some more doc

2002-02-20 18:09  marques

	* src/: Makefile, run.F90, scf.F90, static_pol.F90: Added run_modes
	  7 and 8 (static polarizability calculation)

2002-02-20 16:44  marques

	* src/: h_external_pot.F90, hamiltonian.F90, specie.F90: Non-local
	  in Fourier space seems to be worse than nl in real space.  And I
	  think I understand why now!

2002-02-20 12:06  marques

	* src/: h_external_pot.F90, hamiltonian.F90, mesh3D.F90,
	  specie.F90: non-local part of pp now in fourier space - will it
	  work?

2002-02-20 04:40  marques

	* src/: h_external_pot.F90, hamiltonian.F90, mesh3D.F90,
	  mesh3D_inc.F90: Bug fixes.  Now local potential in Fourier space
	  seems to work again!

2002-02-20 01:00  marques

	* src/: global.F90, h_external_pot.F90, hamiltonian.F90,
	  hartree.F90, mesh3D.F90, mesh3D_inc.F90: refurbished fft
	  interface.  Local potential in Fourier space now uses ffts in
	  double grid.

2002-02-19 16:26  marques

	* TODO: A couple of this were already done...

2002-02-19 16:24  marques

	* src/eigen_cg2.F90: Forgot this file yesterday ;)

2002-02-19 05:07  marques

	* Makefile, src/Makefile, src/atom.F90, src/complex.F90,
	  src/eigen.F90, src/eigen_cg1.F90, src/global.F90,
	  src/h_external_pot.F90, src/hamiltonian.F90,
	  src/hamiltonian_inc.F90, src/hartree.F90, src/hartree1D.F90,
	  src/lcao.F90, src/mesh1D_inc.F90, src/mesh3D_inc.F90,
	  src/mix.F90, src/real.F90, src/run.F90, src/specie.F90,
	  src/states.F90, src/states_inc.F90, src/systm.F90: Lots of
	  changes! Second cg eigensolver, broyden mixing, lcao wfs, read
	  pdbs (for biology), classical charges, bug fixes, etc.  The 1D
	  compilation is broken.  Also changed Makefiles.

2002-02-19 04:11  cvsusers

	* doc/Makefile, doc/octopus.dvi, doc/octopus.info,
	  doc/octopus.texinfo, src/hartree1D.F90: Small update in doc. The
	  hartree 1D part could work now, who knows.

2002-02-19 00:53  cvsusers

	* src/: Makefile, h_external_pot.F90, hartree1D.F90, mesh1D.F90,
	  ps1D.F90, specie.F90, states.F90: Some more things for the 1D
	  stuff.

2002-02-18 22:04  cvsusers

	* doc/: Makefile, octopus.dvi, octopus.info, octopus.texinfo:
	  Manual updated. No real "manual" yet, but some technicalities
	  have been solved.

2002-02-18 04:28  cvsusers

	* src/: mesh1D.F90, mesh1D_create.F90, mesh1D_inc.F90, ps1D.F90:
	  The 1D counterpart of mesh3D*.F90 and ps.F90.

2002-02-18 04:20  cvsusers

	* Makefile, src/Makefile, src/atom.F90, src/global.F90,
	  src/main.F90, src/specie.F90: Small changes aimed to include the
	  1d part (which does not work yet!) Typing "make 1d" you get the
	  "1doctopus.x" executable.

2002-02-15 18:50  marques

	* src/td_rti.F90: Bug fix: velocity gauge now works for local
	  potentials.

2002-02-15 18:38  marques

	* src/: lasers.F90, ps.F90, run.F90, scf.F90, states.F90, td.F90,
	  td_init.F90, td_rti.F90: Velocity gauge does not work!!!

2002-02-15 09:42  marques

	* liboct/math.c, liboct/recipes.c, src/global.F90, src/main.F90,
	  src/states.F90, src/states_inc.F90, src/td.F90: A couple of bug
	  fixes TD part saves multipoles and laser now

2002-02-15 03:17  marques

	* src/: Makefile, hamiltonian.F90, lasers.F90, mesh3D_inc.F90,
	  ps.F90, run.F90, scf.F90, states.F90, td.F90, td_init.F90,
	  td_rti.F90, units.F90, xc_LDA.F90, xc_pot.F90: TD part already
	  works, although the rewrite is not completed.  A couple of bugs
	  were sprayed.  Things are now looking a bit more complete :)

2002-02-14 13:20  marques

	* src/: Makefile, hamiltonian.F90, lasers.F90, mix.F90,
	  mix_inc.F90, run.F90, states.F90, systm.F90, td.F90, td_init.F90:
	  First attempt at time-dependent evolution.  Still doesn't work,
	  but almost ;)

2002-02-13 03:06  marques

	* TODO: more things TODO :)

2002-02-13 02:51  marques

	* src/: Makefile, atom.F90, global.F90, mix.F90, run.F90, scf.F90,
	  states_inc.F90: restart now works :)

2002-02-13 00:43  marques

	* src/: eigen_cg1.F90, h_external_pot.F90, mix.F90, ps.F90,
	  states.F90: Non-local part of the pseudopotential now seems to
	  work.  There were some funny bugs, if anyone is interested, that
	  were corrected.

2002-02-11 07:39  marques

	* Make.i686, liboct/Makefile, liboct/config.h, liboct/math.c,
	  liboct/recipes.c: Our liboct got some new math functions...
	  Make.i386 had to be changed to include GSL.

2002-02-11 07:38  marques

	* src/: asinh.F90, eigen_cg1.F90, h_external_pot.F90,
	  hamiltonian.F90, hamiltonian_inc.F90, hartree.F90, main.F90,
	  math.F90, mesh3D.F90, mesh3D_create.F90, mesh3D_inc.F90, mix.F90,
	  ps.F90, pulpo.F90, run.F90, scf.F90, specie.F90, spline.F90,
	  states.F90, xc_GGA.F90: I already does something :)) Lots of bugs
	  killed. Mode 1 now seems to work reasonably.	Started purging
	  copyrighted code. Most of math.F90 and spline.F90 are gone, and
	  mostly replaced by GSL.

2002-02-03 17:43  cvsusers

	* doc/octopus.texinfo: Manual update

2002-01-31 11:22  cvsusers

	* doc/: octosex.eps, octosex.jpg: Better pictures

2002-01-31 11:09  marques

	* TODO: What we have yet to do ;))

2002-01-31 10:27  cvsusers

	* doc/: Makefile, octopus.dvi, octopus.info, octopus.texinfo,
	  octosex.eps, octosex.jpg: Documentation started in texinfo
	  format. (The documentation itself is empty, I have just put the
	  structure...)

2002-01-31 07:36  marques

	* src/: Makefile, eigen.F90, eigen_cg1.F90, fdf.F90, global.F90,
	  hamiltonian.F90, hamiltonian_inc.F90, hartree.F90, lcao.F90,
	  mesh3D.F90, mesh3D_create.F90, mesh3D_inc.F90, mix.F90, run.F90,
	  scf.F90, states.F90, states_inc.F90, systm.F90, xc_GGA.F90,
	  xc_LDA.F90: The nights work. Still not doing much, but almost!
	  Basic SCF cycle programmed, but there are still bugs left ;))

2002-01-29 23:34  marques

	* src/hamiltonian.F90: forgot this file

2002-01-29 23:33  marques

	* src/: Makefile, fdf.F90, h_external_pot.F90, hamiltonian_inc.F90,
	  mesh3D.F90, run.F90, states.F90, systm.F90, xc.F90, xc_pot.F90:
	  another afternoon's work... it is getting there (slowly)

2002-01-29 18:39  marques

	* liboct/: Makefile, recipes.c~: removed bogus file + small fix in
	  the Makefile

2002-01-29 18:37  marques

	* Makefile, liboct/Makefile, liboct/main.c, liboct/recipes.c,
	  liboct/recipes.c~, src/Makefile, src/fdf.F90, src/pulpo.F90,
	  src/run.F90: added liboct (now we have a C library ;))

2002-01-29 14:07  cvsusers

	* src/: Makefile, run.F90: Recipe added.

2002-01-29 11:14  cvsusers

	* src/: mesh3D.F90, mesh3D_create.F90: Parameteres added

2002-01-28 21:49  cvsusers

	* src/mesh3D.F90: Added some parameters to ease the reading of the
	  code

2002-01-28 21:35  marques

	* src/: Makefile, config.h, hamiltonian.F90, hartree.F90, math.F90,
	  mesh3D.F90, mesh3D_inc.F90, run.F90, specie.F90, states.F90,
	  states_inc.F90, systm.F90, xc.F90, xc_GGA.F90, xc_LDA.F90,
	  xc_pot.F90: slowly rewritting the program...	now I added
	  hartree+xc+ a couple of things.

2002-01-25 20:08  marques

	* src/: global.F90, hamiltonian.F90, mesh3D.F90, mesh3D_inc.F90:
	  making the code cleaner by adding some sall but helpful
	  subroutines

2002-01-25 13:18  marques

	* src/mesh.F90: renamed this file to mesh3D

2002-01-25 13:15  marques

	* src/: Makefile, atom.F90, complex.F90, config.h, fdf.F90,
	  fft.F90, global.F90, hamiltonian.F90, kb.F90, mesh3D.F90,
	  mesh3D_create.F90, mesh3D_inc.F90, ps.F90, ps_kb.F90, ps_xc.F90,
	  real.F90, run.F90, specie.F90, states.F90, systm.F90, undef.F90,
	  units.F90, xc_old.F90: Slowly rewritting the animal

2001-12-04 04:51  marques

	* src/: Makefile, asinh.F90, atom.F90, config.h, fdf.F90,
	  global.F90, kb.F90, main.F90, math.F90, mesh.F90, ps.F90,
	  run.F90, specie.F90, spline.F90, systm.F90, units.F90,
	  xc_old.F90: Very preliminary version of new tddft code now
	  baptized octopus ;))

