2013-01-04 11:48  xavier

	* [r9805] Missing build dependency.

2013-01-05 13:51  xavier

	* [r9806] Removed useless return statments from the json code.

2013-01-05 13:58  xavier

	* [r9807] More cleaning of the json module.

2013-01-05 14:41  xavier

	* [r9808] The json code is causing problems with the Blue Gene/Q,
	  so I disabled the json output of the geometry. This should not be
	  a problem since this output is not used.

2013-01-06 10:54  xavier

	* [r9809] Removed PUSH_SUB/POP_SUB from a subroutine and declared
	  it pure to avoid recursive I/O.

2013-01-06 11:10  xavier

	* [r9810] Some integer values were initialized using M_ZERO.

2013-01-06 12:11  xavier

	* [r9811] Declared pure and removed PUSH_SUB/POP_SUB from two
	  functions that are called from an I/O statement.

2013-01-06 12:22  xavier

	* [r9812] * More fixes about recursive I/O.
	  * Fixed a FLOAT literal declaration.

2013-01-06 15:00  xavier

	* [r9813] Increased the tolerance for the Fortran derivatives
	  tests, as it appears
	  that this implementation is more compiler dependent that the C
	  version.

2013-01-07 15:19  xavier

	* [r9814] A reduction of size 0 caused a problem on the Blue Gene
	  Q.

2013-01-07 15:58  xavier

	* [r9815] Added a check for size 0 in reductions of dimension 2.

2013-01-07 18:11  xavier

	* [r9816] A fix to my last commit. An optional value was used, even
	  when not present.

2013-01-11 09:44  joseba

	* [r9817] Updated the label of the PFFT plans to be properly
	  printed.

2013-01-14 19:25  dstrubbe

	* [r9818] * Typos.
	  * Putting warning about 1D and 2D ion-ion interaction in variable
	  reference too.

2013-01-14 20:49  dstrubbe

	* [r9819] Added directory names to TestGroups for each test, as
	  suggested by Carlo.

2013-01-14 22:16  dstrubbe

	* [r9820] * Removed 'oct' test group, now superseded by
	  'optimal_control'.
	  * Updated TestGroups file.

2013-01-14 23:56  dstrubbe

	* [r9821] * Error message if no coordinates are given in input.
	  * Clarification to documentation.

2013-01-15 02:51  dstrubbe

	* [r9822] Clarification and separation lines.

2013-01-15 09:27  joseba

	* [r9823] * Added the possibility to disable the execution of the
	  partition, since it is used only with the only purpose of
	  printing information. The importance of this changes comes from
	  the fact that computing this part in big systems with large
	  number of processes takes longer and longer (even hours),
	  consuming almost useless core-hours.
	  * Added the possibility to disable the execution of symmetries
	  calculation
	  * Some line breaks

2013-01-15 12:43  marques

	* [r9824] Let's see if this corrects the bug with B97-like
	  functionals

2013-01-15 12:47  marques

	* [r9825] Added interface as noted by Fabien Tran.

2013-01-15 13:56  marques

	* [r9827] The same kind of bug was also present in TPSS.

2013-01-15 15:03  marques

	* [r9828] And again the same error in vsxc

2013-01-15 19:31  dstrubbe

	* [r9829] Improvements to r9823: 'SymmetriesCompute' disables all
	  symmetry calculations, not just for finite systems, and does
	  leave proper initialization to identity. Also, fixed typo and
	  unnecessarily added variables.

2013-01-16 09:47  marques

	* [r9831] Still another POLARIZED missing in a functional that uses
	  the stoll decomposition.

2013-01-16 13:42  marques

	* [r9832] Added new metagga functionals: X_MS0, X_MS1, X_MS2, and
	  X_MS2H (a hybrid version of MS2)

2013-01-16 20:37  dstrubbe

	* [r9833] Improvements to Poisson solver info, including reference
	  to recent arXiV paper.

2013-01-16 21:12  dstrubbe

	* [r9834] Clarifications to documentation and output regarding
	  Poisson solvers.

2013-01-17 21:26  dstrubbe

	* [r9835] Reducing verbosity of warnings by making only one comment
	  about Lsize or Spacing not matching the recommended value if they
	  were specified as one value rather than separately for each
	  direction in the input file.

2013-01-17 21:49  dstrubbe

	* [r9836] * Small bugfix: condition for warning about Smearing
	  needing ExtraStates was mistaken for spin-polarized calculations.
	  * Message when disabling symmetries for user-defined species now
	  says only that non-spherically symmetric species "may" be
	  present, rather than definitely are present, since we are not
	  actually analyzing that.

2013-01-17 23:19  dstrubbe

	* [r9837] * Corrected misplaced PUSH_SUB.
	  * Warning about no XSF except in 3D now states which function it
	  is talking about.

2013-01-18 00:06  dstrubbe

	* [r9838] * For 2D systems periodic in 2D, the default Poisson FFT
	  kernel was set to be the planar one, but that was not even
	  considered a possibility in later code, leading to an assertion
	  failure and/or nonsensical results. Now the default is fft_nocut,
	  which seems to have been the intention from the rest of the code.
	  * The default for PoissonFFTKernel are enumerated in the
	  documentation.
	  * Removed attempts at HTML formatting in output.

2013-01-18 08:59  marques

	* [r9839] Small bug fixes. Micael can you check if any of the
	  segfaults disapears?

2013-01-18 18:46  dstrubbe

	* [r9841] Removed keyword 'OnlyUserDef' from input files which does
	  not exist, and is presumably obsolete.

2013-01-18 21:52  dstrubbe

	* [r9842] Added tests for total energy components in sodium chain
	  test. I am surprised that we get a negative number for the
	  Hartree energy here.

2013-01-18 21:59  dstrubbe

	* [r9843] Fix of uninitialized use of 'idir' as flagged by
	  valgrind.

2013-01-18 22:08  dstrubbe

	* [r9844] svn:ignore for new file 'test-driver'

2013-01-19 05:37  dstrubbe

	* [r9845] More specific and helpful error messages when an
	  incompatible Poisson solver is chosen.

2013-01-19 05:41  dstrubbe

	* [r9846] Removed variable DELTA_R in favor of M_EPSILON which is
	  our standard tolerance for floating-point comparisons.

2013-01-19 20:25  dstrubbe

	* [r9847] Restored if-condition accidentally removed in r9845,
	  which broke a lot of tests.

2013-01-19 20:55  dstrubbe

	* [r9848] * Direct3D Poisson solver (at least in serial case) was
	  only working for curvilinear coordinates. Now it works for
	  regular grids too.
	  * Added a test for this solver.

2013-01-19 22:15  dstrubbe

	* [r9849] * The serial version of the direct3D Poisson solver was
	  mistakenly using a prefactor copied from the 2D case. Also, the
	  parallel case used two subtly different values for no good
	  reason. Now the same prefactor is always used.
	  * This improves slightly the accuracy of the integration in the
	  test.

2013-01-19 22:40  dstrubbe

	* [r9850] Documenting a secret variable and specifying when it
	  applies.

2013-01-19 23:01  dstrubbe

	* [r9851] Consolidated useless repeated code in select statement.

2013-01-19 23:10  dstrubbe

	* [r9852] Consolidated options for direct-sum Poisson solver into
	  one, rather than separately for each dimension. It is better to
	  select automatically the correct dimensionality than to just
	  complain or give a wrong answer if a different dimensionality was
	  selected.

2013-01-19 23:22  dstrubbe

	* [r9853] Removed useless routine zpoisson1D_solve for complex
	  scaling: it adds unnecessary complexity and computational
	  expense, compared to the approach used for the other solvers.

2013-01-19 23:28  dstrubbe

	* [r9854] Now the direct Poisson solver actually tries to work in
	  curvilinear mode, as claimed by the code elsewhere.

2013-01-19 23:48  dstrubbe

	* [r9855] Updating name in testsuite file.

2013-01-20 00:01  dstrubbe

	* [r9856] * In 3D direct solver, simplified code in parallel branch
	  with volume_element and vol_pp, and in serial branch, removed
	  unstated assumption that the spacing is identical in all
	  directions. (At this point, I think that this solver existing
	  only for "testing" is actually correct...)
	  * Began generalizing to arbitrary number of dimensions.

2013-01-20 00:04  dstrubbe

	* [r9857] Removed explicit reference to 3D and useless variable xg.

2013-01-20 00:12  dstrubbe

	* [r9858] The 2D direct Poisson solver is decommissioned in favor
	  of a general 2D/3D one. This corrects several problems with the
	  2D one which I recently fixed in the 3D one.

2013-01-20 00:35  dstrubbe

	* [r9859] Removing 2D direct solver since the general 2D/3D one is
	  now used.

2013-01-20 00:40  dstrubbe

	* [r9860] Fixing exponent on volume which is 1/3 in 3D but 1/2 in
	  2D. Moving to prefactor when not curvilinear to help performance.

2013-01-20 00:49  dstrubbe

	* [r9861] It is better not to have so many if's in the inner do
	  loop.

2013-01-20 01:04  dstrubbe

	* [r9862] Removed unneeded PoissonSolver lines in input files that
	  have TheoryLevel = independent_particles.

2013-01-20 01:09  dstrubbe

	* [r9863] Fixing syntax errors.

2013-01-20 03:25  dstrubbe

	* [r9864] Allowing compilation with BerkeleyGW and
	  --with-max-dim=4.

2013-01-20 03:30  dstrubbe

	* [r9865] Explicit bounds to avoid an issue with max dim = 4 on
	  lascar. Also, a 3 was accidentally left in one place that would
	  cause trouble for 2D direct sum Poisson.

2013-01-20 03:43  dstrubbe

	* [r9866] intel doesn't seem to like my syntax. Bringing back the
	  temporary variable 'xg'.

2013-01-20 04:27  dstrubbe

	* [r9867] * Documenting secret variable PoissonCutoffRadius. I am
	  not sure why you would wish to adjust this though.
	  * Some combinations of dimensionality did not parse the variable
	  or write output, now they all do the same thing.
	  * The default, and condition for warning, should be based only on
	  finite directions, not on periodic directions -- in the case that
	  a periodic direction was larger than a finite direction (unusual
	  but certainly possible), I think you would get the wrong answer.

2013-01-21 10:11  marques

	* [r9868] No more NaNs in optc ;)

2013-01-21 10:23  marques

	* [r9869] No more NaN in gga_c_wl

2013-01-21 12:29  marques

	* [r9870] This fixes the NaNs that were appearing on the HJS_B88
	  functional

2013-01-21 12:34  marques

	* [r9871] Fixed NaNs in the TPSS and PKZB

2013-01-21 14:40  micael

	* [r9872] * Some NaN were still appearing.

2013-01-21 16:37  micael

	* [r9874] * Tagging Libxc version 2.0.1.

2013-01-22 12:25  marques

	* [r9875] Added interfaces to get/set hybrid and cam parameters

2013-01-22 13:15  marques

	* [r9876] Added the variant PBE (vPBE) functional. From my tests
	  this is virtually identical to the PBE.

2013-01-22 13:20  marques

	* [r9877] Reset of the testsuite after all the bug corrections

2013-01-22 13:28  mjv500

	* [r9878] bug in normalization of propag spectrum, for non kick
	  case - this has been patched before...

2013-01-22 13:40  marques

	* [r9879] Added revisedTPSS correlation

2013-01-23 09:23  marques

	* [r9880] Corrected reference. Thanks David.

2013-01-23 09:52  marques

	* [r9881] Removed interface to _set_cam and _set_exx.
	  Added interface to set mixing of both pbe0 and hse

2013-01-23 11:52  marques

	* [r9882] Changed the name of a variable and a comment. Thanks
	  Fabien.

2013-01-24 10:39  joseba

	* [r9883] Corrections in the explanations of Hamiltonian/Poisson
	  input variables
	  Deleted unused input variables
	  
	  Changes by Pablo Garcia Risue√±o

2013-01-24 14:41  joseba

	* [r9884] Removed useless white spaces
	  Added few doxygen comments

2013-01-24 14:49  joseba

	* [r9885] More useless white spaces

2013-01-24 17:14  dstrubbe

	* [r9886] Little cleanups of documentation.

2013-01-24 17:34  joseba

	* [r9887] Adapted the configuration to the new library of LIBFM
	  included in the general ScaFaCos.
	  Cleaning of variables in the code.

2013-01-24 17:39  joseba

	* [r9888] Updated my name in the (c)

2013-01-24 20:04  dstrubbe

	* [r9889] References.

2013-01-25 17:35  dstrubbe

	* [r9890] Making a routine name more specific.

2013-01-25 18:24  dstrubbe

	* [r9891] Blocking multipole corrections for Poisson in periodic
	  systems.

2013-01-27 12:24  xavier

	* [r9892] Missing call to opencl_finish.

2013-01-27 12:34  xavier

	* [r9893] Removed some PUSH_SUBs from routines that are called too
	  often.

2013-01-27 13:09  xavier

	* [r9894] * Added clamdblas and clamdfft to the list of optional
	  libraries and
	  config options.

2013-01-27 13:13  xavier

	* [r9895] Added a test for the OpenCL Poisson solver.

2013-01-28 15:11  xavier

	* [r9896] * Added the new tests to the makefile.
	  * Changed the title of the specific Hatree tests.

2013-01-28 16:58  xavier

	* [r9897] Bugfix: the size of the Fourier space operator was wrong
	  for OpenCL.

2013-01-28 17:05  dstrubbe

	* [r9898] Removed unnecessary output.

2013-01-28 17:51  dstrubbe

	* [r9899] Comments and more checking.

2013-01-28 18:10  dstrubbe

	* [r9900] Removed unused variables 'gx'.

2013-01-28 21:08  dstrubbe

	* [r9901] * Fixed confusing names of arguments to intcoslog: its gx
	  and gy were named in reverse from other occurrences.
	  * Making sure to use double precision in converting integer to
	  float.
	  * Removed useless variable 'vec'.
	  * Some comments.
	  * Formatting.

2013-01-29 10:59  acastro

	* [r9902] Initialized a variable that sometimes could be used
	  uninitialized.
	  
	  Added gsl_set_error_handler_off in oct_1dminimize routine, since
	  the code
	  should continue even if the minimization is not successful.
	  (Perhaps we should
	  think about a general policy for gsl_set_error_handler_off?)

2013-01-29 16:16  xavier

	* [r9903] The opencl implementation of mesh_to_cube was wrong.

2013-01-29 19:43  dstrubbe

	* [r9904] Just as the spherical cut-off FFT kernel takes the
	  maximum box size for a finite direction as the one to use in all
	  directions, the cylindrical cut-off FFT kernel should take the
	  maximum box size for the two finite directions to use in both of
	  those. This was not happening and could easily give spurious
	  interactions.

2013-01-29 21:06  dstrubbe

	* [r9905] * The unocc mode now obeys 'OutputEvery' so you can get
	  restart data written for calculations that get killed by a
	  scheduler.
	  * Clarified and updated documentation on OutputEvery, which was
	  quite misleading. Note: the Sternheimer modes write restart data
	  on every iteration always.

2013-01-30 02:01  dstrubbe

	* [r9906] Option for testing to show convergence of occupied states
	  too in unocc mode.

2013-01-30 02:28  dstrubbe

	* [r9907] Clarifications to documentation about mesh partitioners.

2013-01-30 03:51  dstrubbe

	* [r9908] Some comments regarding mesh partitioning.

2013-01-30 11:02  xavier

	* [r9909] Missing condition for an if.

2013-01-30 19:13  dstrubbe

	* [r9910] Fixing race condition in clean_stop: proc 0 might find
	  the file 'stop' present, delete it, and then exit the loop, but
	  other processors arriving in the routine later would not see the
	  file there anymore, and not exit the loop, so the code would hang
	  rather than exit cleanly.

2013-01-30 19:42  dstrubbe

	* [r9911] * Fixed intent.
	  * Indentation.

2013-01-30 22:43  dstrubbe

	* [r9912] Missing deallocation.

2013-01-31 05:20  dstrubbe

	* [r9913] Formatting, indentation, push/pop.

2013-01-31 18:07  dstrubbe

	* [r9914] * Improved usefulness of DebugLevel = 1 output from CG
	  eigensolver by expressing residual in scientific notation.
	  * Added similar output for CG_new and evolution solvers.
	  * Fixed indentation in LOBPCG.

2013-01-31 23:03  dstrubbe

	* [r9915] On chum intel mpich2, my recent change to clean_stop
	  involving MPI_Bcast (r9910) caused the CAETRS test to hang
	  because it uses 'task parallelization' with slave nodes for the
	  Poisson equation. The slaves do not enter the "calculation mode"
	  routine and thus do not call clean_stop. That routine, therefore,
	  should broadcast only over the communicator for the masters, not
	  MPI world. To do so, we must now pass the multicomm object in
	  some more places.

2013-02-01 16:52  dstrubbe

	* [r9916] Initialization to zero of the eigensolver errors for each
	  state. Otherwise, if you do rmmdiis without subspace
	  diagonalization (or with independent particles), since the
	  routine for the initial minimization steps does not calculate
	  residuals, you will may get scary NaN or 10^200 or something in
	  the Error column since it was uninitialized. Now you will have
	  zero there instead, which still looks odd but doesn't imply that
	  the calculation has gone crazy.

2013-02-01 17:41  dstrubbe

	* [r9917] Reducing error verbosity a little.

2013-02-01 17:42  dstrubbe

	* [r9918] Increasing the label length for profiling tags since some
	  were being cut off.

2013-02-01 18:03  dstrubbe

	* [r9919] Typo in variable documentation.

2013-02-01 20:18  dstrubbe

	* [r9920] Revision to documentation on ParallelizationGroupRanks,
	  which seemed to suggest there was no way of specifying
	  domain/other parallelization.

2013-02-01 21:50  dstrubbe

	* [r9921] Removed conflicting duplicated input tag.

2013-02-01 22:46  dstrubbe

	* [r9922] Adding an option to require convergence of the individual
	  eigenvectors.

2013-02-01 23:49  dstrubbe

	* [r9923] Two more errors should be only_root_writes in casida.

2013-02-02 05:29  dstrubbe

	* [r9924] Inserting a note when a test run wants more than 4 MPI
	  tasks. This can be done (in moderation) to increase the
	  likelihood of finding race conditions, says Xavier.

2013-02-02 19:23  dstrubbe

	* [r9925] Comment about running with more than 4 MPI tasks in the
	  testsuite.

2013-02-04 09:43  marques

	* [r9926] Added the functionals MGGA_X_MN12_L and MGGA_X_MN12_SX

2013-02-04 11:10  marques

	* [r9927] Made PW91 code a bit more general.
	  Reset of the testsuite

2013-02-04 12:16  marques

	* [r9928] Added more flexibility to Becke95

2013-02-04 12:34  marques

	* [r9929] Added mgga_xc_pwb6k and mgga_xc_pw6b95

2013-02-04 13:17  marques

	* [r9930] Added mgga_xc_tpsslyp1w

2013-02-04 13:47  marques

	* [r9931] Added hyb_gga_xc_mpwlyp1m

2013-02-05 09:31  marques

	* [r9932] Added the functionals GGA_X_N12 and GGA_X_N12_SX. Note
	  that the library "Minnesota Functional Module" seems to have a
	  bug: F1 is initialized, so Pi=acos(-F1) gets the value of Pi/2
	  ;(((

2013-02-05 11:46  marques

	* [r9933] Added GGA_C_N12 and GGA_C_N12_SX.
	  Corrected the spelling of Minnesota.

2013-02-05 13:34  marques

	* [r9934] Added functionals MGGA_C_M08_HX, MGGA_C_M08_SO,
	  MGGA_C_M11, MGGA_C_M11_L, MGGA_C_MN12_L, and MGGA_C_MN12_SX

2013-02-05 15:53  marques

	* [r9935] Added the functionals hyb_mgga_x_m11 and mgga_x_m11_l. I
	  guess that most of the functionals of Truhlar are now in.

2013-02-05 22:59  xavier

	* [r9936] Removed 5 from the factors used for the OpenCL FFT. This
	  fixes an
	  error (fpe) and improves performance.

2013-02-06 00:33  acastro

	* [r9937] One variable could be used uninitialized sometimes.

2013-02-06 14:25  marques

	* [r9938] Added functional mgga_c_cc06

2013-02-06 22:04  dstrubbe

	* [r9939] Adding an extra initialization to stop the test failure
	  which began with r9922.

2013-02-07 08:45  marques

	* [r9940] Added the functionals MGGA_X_MK00 and MGGA_X_MK00B. Now
	  we have all functionals of molpro.
	  Corrected bug in the evaluation of fxc for the metaggas that
	  depend both in tau and nabla^2 n (only br89 up to now, actually).

2013-02-08 13:25  marques

	* [r9941] Default is now to calculate the symmetries if there are
	  less than 100
	  atoms.

2013-02-08 13:49  marques

	* [r9942] Updated functional list for libxc 2.0.1 I explicitly
	  removed from the
	  list kinetic energy functionals and the CAM hybrids.

2013-02-08 13:50  marques

	* [r9943] Changed documentation of SymmetriesCompute in order to
	  reflect the new
	  default

2013-02-08 21:48  xavier

	* [r9944] * Move the direct 3d poisson test takes too long. So I
	  moved it to an
	  independent long-run test.

2013-02-08 21:50  xavier

	* [r9945] Added explicit boundaries to the operations in the direct
	  poisson
	  solver.

2013-02-08 22:11  xavier

	* [r9946] Added ks_inversion to the list of functionals and to the
	  generator script.

2013-02-09 01:39  xavier

	* [r9947] Declared mixed periodicity systems as experimental.

2013-02-09 03:42  xavier

	* [r9948] .: Created the 4.1 branch.

2013-02-09 13:53  xavier

	* [r9952] src/poisson/solver_3d_inc.F90: Backport of 9951: The
	  direct 3D test started failing in parallel. It
	  seems to me that there was an obvious error in the code, but I
	  don't
	  understand why the test was working before.

2013-02-17 20:56  xavier

	* [r9991] src/basic/getopt_f.c: Backport: A space was missing in
	  the configuration output.

2013-02-18 04:29  xavier

	* [r9994] debian/changelog: Changed the changelog for deb packages
	  to 4.1.0.

2013-02-18 05:16  xavier

	* [r9996] src/ions/simul_box.F90: Backport: Declared non-orthogonal
	  cells as experimental.

2013-02-18 05:55  xavier

	* [r9998] src/hamiltonian/hamiltonian_inc.F90: Backport: Fixed the
	  problem with periodic systems and spinors reported by Fabiana Da
	  Pieve.

2013-02-19 05:26  dstrubbe

	* [r10005] src/basic/json.F90: The PUSH_SUB/POP_SUB's in json.F90
	  seem to be responsible for (occasional) internal compiler errors
	  with PGI 12.9 on Cray machines. I am committing only to the 4.1.x
	  branch since I hope newer versions of the compiler and/or
	  environment will not continue to have this problem, whatever it
	  is.

2013-02-19 16:22  dstrubbe

	* [r10007] testsuite/linear_response/05-polarizability.test:
	  Backport of 10006 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10006 | dstrubbe | 2013-02-19 11:19:00 -0500 (Tue, 19 Feb 2013)
	  | 2 lines
	  
	  Loosening tolerance very slightly, since polarizability xx for
	  finite diffs failed with discrepancy 0.0011 on chum pgi test.
	  
	  ------------------------------------------------------------------------

2013-02-19 16:55  dstrubbe

	* [r10008] src/utils/casida_spectrum.F90: Backport of 9981 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r9981 | dstrubbe | 2013-02-16 10:27:53 -0500 (Sat, 16 Feb 2013) |
	  2 lines
	  
	  Bugfix: the x,y,z columns from oct-casida_spectrum were not
	  physically meaningful. They need to be the sum of the squares of
	  the matrix elements from each transition, not just the sum of the
	  matrix elements, or else this quantity is dependent on the
	  arbitrary phase of the wavefunctions. Now they are really the
	  cross sections for each polarization.
	  
	  ------------------------------------------------------------------------

2013-02-19 18:42  dstrubbe

	* [r10009] src/utils/casida_spectrum.F90: Backport of 10004 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10004 | dstrubbe | 2013-02-19 00:03:31 -0500 (Tue, 19 Feb 2013)
	  | 2 lines
	  
	  Bugfix: oct-casida_spectrum would misinterpret the columns for a
	  spin-polarized eps_diff or petersilka calculation.
	  
	  ------------------------------------------------------------------------

2013-02-19 20:37  dstrubbe

	* [r10017] src/main/casida.F90: Backport of r10016, taking into
	  account recent refactoring.

2013-02-19 20:44  dstrubbe

	* [r10018] src/main/casida.F90,
	  testsuite/linear_response/01-casida.03-casida.inp: Backport of
	  10015 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10015 | dstrubbe | 2013-02-19 15:01:43 -0500 (Tue, 19 Feb 2013)
	  | 2 lines
	  
	  Adding some caveats for Casida: triplets, Tamm-Dancoff, CV(2),
	  and CasidaMomentumTransfer are experimental. k-points and partial
	  occupations are not implemented. CasidaQuadratureOrder need only
	  be read when CasidaMomentumTransfer is set; made documentation
	  reflect this.
	  
	  ------------------------------------------------------------------------

2013-02-19 23:19  dstrubbe

	* [r10022] testsuite/linear_response/05-polarizability.test:
	  Backport of 10021 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10021 | dstrubbe | 2013-02-19 18:18:04 -0500 (Tue, 19 Feb 2013)
	  | 2 lines
	  
	  Fixing silly mistake in r10006.
	  
	  ------------------------------------------------------------------------

2013-02-20 15:28  dstrubbe

	* [r10032] src/basic/multicomm.F90, src/main/casida.F90,
	  src/utils/casida_spectrum.F90,
	  testsuite/linear_response/01-casida.03-casida.inp,
	  testsuite/linear_response/01-casida.test: Backport of 10026 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10026 | dstrubbe | 2013-02-19 22:36:21 -0500 (Tue, 19 Feb 2013)
	  | 6 lines
	  
	  Pure 'other' parallelization is a bad default. Trying to solve
	  Poisson separately on each node consumes excessive memory and
	  time. In principle, we would have joint domain/other
	  parallelization, but 'other' parallelization takes precedence,
	  especially since multicomm_init does not know the actual problem
	  size and uses a fictitious value of 10000, making it impossible
	  to choose joint parallelization wisely, and generally resulting
	  in a choice of only one domain group. This should be fixed later.
	  
	  * For now, I have made domain parallelization the default for
	  Casida.
	  * Clarified that the parallelization is not in e-h pairs really,
	  but their matrix elements (i.e. between two e-h pairs).
	  * Using hybrid domain/other parallelization for the Casida test.
	  
	  ------------------------------------------------------------------------

2013-02-20 15:35  dstrubbe

	* [r10033] src/basic/multicomm.F90, src/main/casida.F90: Backport
	  of 10028 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10028 | dstrubbe | 2013-02-20 00:28:37 -0500 (Wed, 20 Feb 2013)
	  | 3 lines
	  
	  * Fixing mistaken 'clarification' from r10026: yes it really is
	  e-h pairs, not matrix elements; I misunderstood the code.
	  * Comment on reuse of Poisson solution in Casida.
	  
	  ------------------------------------------------------------------------

2013-02-20 17:08  dstrubbe

	* [r10035] src/hamiltonian/lasers.F90: Backport of 10031 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10031 | dstrubbe | 2013-02-20 10:02:03 -0500 (Wed, 20 Feb 2013)
	  | 2 lines
	  
	  Clarification to variable reference.
	  
	  ------------------------------------------------------------------------

2013-02-20 18:04  dstrubbe

	* [r10036] src/basic/multicomm.F90: Backport of 10034 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10034 | dstrubbe | 2013-02-20 12:03:12 -0500 (Wed, 20 Feb 2013)
	  | 2 lines
	  
	  ParallelizationGroupRanks writes a warning for each
	  parallelization strategy that is not available, no matter what
	  you write in the corresponding column. This is not helpful. Let's
	  warn only if the value is not 1, i.e. there was an attempt to use
	  that strategy.
	  
	  ------------------------------------------------------------------------

2013-02-20 23:00  dstrubbe

	* [r10041] src/species/ps.F90, src/species/species.F90: Backport of
	  10039 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10039 | dstrubbe | 2013-02-20 15:29:23 -0500 (Wed, 20 Feb 2013)
	  | 2 lines
	  
	  Changing warnings to fatal errors about bad values of lmax and
	  lloc, since Micael points out (and I verified with -g -C) that
	  all kinds of things go wrong if these values are not ok, even if
	  the run would superficially seem ok otherwise.
	  
	  ------------------------------------------------------------------------

2013-02-21 00:04  dstrubbe

	* [r10043] src/main/unocc.F90, src/states/states.F90: Backport of
	  10042 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10042 | dstrubbe | 2013-02-20 18:04:47 -0500 (Wed, 20 Feb 2013)
	  | 3 lines
	  
	  * Declaring unocc + spinors experimental. This kind of run is not
	  tested, and in my tests I found it destroys the gs wfns and makes
	  everything unpolarized, even in LCAO is not used. gs +
	  ExtraStates seems fine though.
	  * The variable SpinComponents accepts 'non_collinear' and
	  'spinors' as equivalent, but the way the info is displayed on the
	  website, only 'spinors' shows up. Both are used extensively in
	  the testsuite, and appear in other documentation, so I won't
	  remove one, but just make sure the documentation makes clear that
	  both can be used. (This was added in r1581.)
	  
	  ------------------------------------------------------------------------

2013-02-22 00:17  dstrubbe

	* [r10057] src/ions/geometry.F90, src/scf/lcao.F90,
	  src/species/species.F90: Backport of 10054 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10054 | dstrubbe | 2013-02-21 14:52:21 -0500 (Thu, 21 Feb 2013)
	  | 5 lines
	  
	  * Simplifying documentation for Species block: column 4 is
	  basically always the same.
	  * More explanation about LCAO orbitals.
	  * LCAOStart = lcao_none should be default for species_from_file
	  and spec_jelli_slab and spec_charge_density, not just for
	  spec_user_def, since these three have in common that they do not
	  represent an atom and so we do not know where (if anywhere) it
	  would be appropriate to have the orbitals centered.
	  * Message tells how many LCAO orbitals are available for
	  pseudopotential species.
	  
	  ------------------------------------------------------------------------

2013-02-22 00:18  dstrubbe

	* [r10058] src/scf/lcao.F90: Backport of 10056 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10056 | dstrubbe | 2013-02-21 17:32:32 -0500 (Thu, 21 Feb 2013)
	  | 2 lines
	  
	  Documentation on atomic guess densities.
	  
	  ------------------------------------------------------------------------

2013-02-22 01:14  dstrubbe

	* [r10061] src/ions/simul_box.F90: Backport of 10059 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10059 | dstrubbe | 2013-02-21 19:56:52 -0500 (Thu, 21 Feb 2013)
	  | 2 lines
	  
	  I am pretty sure any 'experiment' with non-orthogonal cells will
	  fail.
	  
	  ------------------------------------------------------------------------

2013-02-22 01:23  dstrubbe

	* [r10063] src/grid/mesh.F90: Backport of 10062 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10062 | dstrubbe | 2013-02-21 20:19:07 -0500 (Thu, 21 Feb 2013)
	  | 2 lines
	  
	  The big box test has such a large volume/point that it overflowed
	  the format statement.
	  
	  ------------------------------------------------------------------------

2013-02-22 03:44  dstrubbe

	* [r10065] src/scf/lcao.F90: Backport of 10064 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10064 | dstrubbe | 2013-02-21 22:39:17 -0500 (Thu, 21 Feb 2013)
	  | 2 lines
	  
	  Typo.
	  
	  ------------------------------------------------------------------------

2013-02-22 17:50  dstrubbe

	* [r10072] src/main/casida.F90: Backport of 10071 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10071 | dstrubbe | 2013-02-22 12:48:24 -0500 (Fri, 22 Feb 2013)
	  | 2 lines
	  
	  Clarifying that Tamm-Dancoff calculations are ok with complex
	  wavefunctions, actually.
	  
	  ------------------------------------------------------------------------

2013-02-24 16:51  acastro

	* [r10109] src/hamiltonian/hamiltonian.F90: Backport of 10067 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10067 | acastro | 2013-02-22 13:24:12 +0100 (Fri, 22 Feb 2013) |
	  5 lines
	  
	  Fix of a bug reported by Maria Tsoneva: the use of a laser field
	  with spinors
	  was unphysical. The reason is that the non-diagonal parts of the
	  local
	  potential were also populated with the electric potential.
	  
	  
	  ------------------------------------------------------------------------

2013-02-27 16:16  dstrubbe

	* [r10126] src/main/casida.F90: Backport of 10125 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10125 | dstrubbe | 2013-02-27 11:12:20 -0500 (Wed, 27 Feb 2013)
	  | 2 lines
	  
	  While Tamm-Dancoff calculations with complex wavefunctions are
	  possible in principle, the current code assumes things are real
	  in some places that will make the result incorrect.
	  
	  ------------------------------------------------------------------------

2013-02-27 16:18  dstrubbe

	* [r10127] src/main/casida.F90: Backport of part of r10124: Making
	  messages_experimental arguments singular, so the resulting
	  sentence is more grammatical.

2013-02-28 20:59  dstrubbe

	* [r10136] src/main/casida.F90: Backport of 10135 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10135 | dstrubbe | 2013-02-28 15:56:32 -0500 (Thu, 28 Feb 2013)
	  | 2 lines
	  
	  Clarified warnings about bad excitation energies in Casida.
	  
	  ------------------------------------------------------------------------

2013-03-07 20:36  dstrubbe

	* [r10173] src/main/casida.F90: Backport of 10172 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10172 | dstrubbe | 2013-03-07 15:24:47 -0500 (Thu, 07 Mar 2013)
	  | 2 lines
	  
	  Clarifications about complex wavefunctions in Casida, and nature
	  of Petersilka theory level.
	  
	  ------------------------------------------------------------------------

2013-03-10 02:48  dstrubbe

	* [r10185] m4/libxc.m4: Backport of 10163 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10163 | dstrubbe | 2013-03-06 18:04:01 -0500 (Wed, 06 Mar 2013)
	  | 2 lines
	  
	  Enabling use of environment variables LIBS_LIBXC and
	  FCFLAGS_LIBXC as alternative to --with-libxc-prefix.
	  
	  ------------------------------------------------------------------------

2013-03-10 02:50  dstrubbe

	* [r10186] m4/libxc.m4: Backport of 10165 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10165 | dstrubbe | 2013-03-06 18:14:07 -0500 (Wed, 06 Mar 2013)
	  | 2 lines
	  
	  Using a more explicit syntax for linking libxc. I think this
	  should help with the problems users are always reporting, that
	  earlier versions of libxc are interfing in the linking and giving
	  errors about unresolved symbols.
	  
	  ------------------------------------------------------------------------

2013-03-10 02:53  dstrubbe

	* [r10187] m4/libxc.m4: Backport of 10176 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10176 | dstrubbe | 2013-03-07 17:04:29 -0500 (Thu, 07 Mar 2013)
	  | 2 lines
	  
	  The libxc m4 macro now tries to link dynamically after trying
	  static linkage. This is necessary to keep my change in r10165
	  from breaking compilation with libxc supplied by a package.
	  
	  ------------------------------------------------------------------------

2013-03-12 19:21  dstrubbe

	* [r10217] src/ions/geometry.F90,
	  testsuite/components/14-center-geom.01-run.inp,
	  testsuite/components/14-center-geom.test: Backport of 10208 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10208 | dstrubbe | 2013-03-11 18:34:14 -0400 (Mon, 11 Mar 2013)
	  | 3 lines
	  
	  * Adding a test for oct-center-geom.
	  * Clarifications to documentation.
	  
	  ------------------------------------------------------------------------

2013-03-12 19:23  dstrubbe

	* [r10218] src/utils/xyzanim.F90: Backport of 10214 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10214 | dstrubbe | 2013-03-12 15:11:31 -0400 (Tue, 12 Mar 2013)
	  | 2 lines
	  
	  oct-xyz-anim was broken for max-dim=4 (non-alphanumeric
	  characters were written as dim=4 of the coordinates, even for a
	  3D system). Simply using the routine available elsewhere for
	  writing xyz files fixes this.
	  
	  ------------------------------------------------------------------------

2013-03-12 22:13  dstrubbe

	* [r10223] src/main/geom_opt.F90: Backport of 10219 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10219 | dstrubbe | 2013-03-12 15:36:20 -0400 (Tue, 12 Mar 2013)
	  | 2 lines
	  
	  Correcting and clarifying documentation about geometry
	  optimization convergence criteria.
	  
	  ------------------------------------------------------------------------

2013-03-12 22:56  dstrubbe

	* [r10226] src/ions/simul_box.F90, src/main/geom_opt.F90: Backport
	  of 10222 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10222 | dstrubbe | 2013-03-12 17:42:15 -0400 (Tue, 12 Mar 2013)
	  | 2 lines
	  
	  If an atom moves outside the box during geometry optimization,
	  results will be meaningless afterward, so the run should
	  terminate with an error.
	  
	  ------------------------------------------------------------------------

2013-03-13 00:40  dstrubbe

	* [r10228] src/ions/geometry.F90, src/ions/xyz_file.F90: Backport
	  of 10224 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10224 | dstrubbe | 2013-03-12 18:24:39 -0400 (Tue, 12 Mar 2013)
	  | 3 lines
	  
	  * The code now identifies how coordinates are read in (filename,
	  or block).
	  * Clarifying comments about Coordinates inputs.
	  
	  ------------------------------------------------------------------------

2013-03-13 00:55  dstrubbe

	* [r10229] src/main/geom_opt.F90: Backport of 10225 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10225 | dstrubbe | 2013-03-12 18:54:50 -0400 (Tue, 12 Mar 2013)
	  | 2 lines
	  
	  Adding units to geometry optimization output, and a message about
	  min.xyz.
	  
	  ------------------------------------------------------------------------

2013-03-15 02:07  dstrubbe

	* [r10244] src/ions/xyz_adjust.F90: Backport of 10243 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10243 | dstrubbe | 2013-03-14 21:59:25 -0400 (Thu, 14 Mar 2013)
	  | 2 lines
	  
	  Correcting variable section, to the utility's actual name.
	  
	  ------------------------------------------------------------------------

2013-03-15 02:18  dstrubbe

	* [r10245] src/sternheimer/phonons_lr.F90: Backport of 10240 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10240 | dstrubbe | 2013-03-14 15:15:57 -0400 (Thu, 14 Mar 2013)
	  | 2 lines
	  
	  Vibrational calculations with max-dim=4 (specifically the Casida
	  one) had a small discrepancy from the proper values. Changing
	  MAX_DIM to ndim in some places seems to fix it. (Also for
	  simplicity used this shortcut for some longer references to the
	  same value.)
	  
	  ------------------------------------------------------------------------

2013-03-15 15:19  dstrubbe

	* [r10248] src/main/geom_opt.F90: Backport of 10247 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10247 | dstrubbe | 2013-03-14 23:27:20 -0400 (Thu, 14 Mar 2013)
	  | 4 lines
	  
	  * Link to GSL optimization documentation.
	  * Only use 1:sb%dim of forces, not up to MAX_DIM.
	  * With GOMethod = simplex, a spurious line of output (message(6)
	  was not assigned, and was the correlation energy from a previous
	  write) was being written for each iteration. I converted to the
	  new style of message writing, and fixed it.
	  
	  ------------------------------------------------------------------------

2013-03-15 20:10  dstrubbe

	* [r10252] src/opt_control/target.F90: Backport of 10251 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10251 | dstrubbe | 2013-03-15 15:58:33 -0400 (Fri, 15 Mar 2013)
	  | 2 lines
	  
	  Better formatting in variable reference.
	  
	  ------------------------------------------------------------------------

2013-03-16 01:39  dstrubbe

	* [r10255] src/grid/submesh.F90, src/hamiltonian/projector.F90:
	  Backport of 10250 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10250 | dstrubbe | 2013-03-15 15:40:34 -0400 (Fri, 15 Mar 2013)
	  | 2 lines
	  
	  Changing two intent's that were causing errors about
	  uninitialized value created by a stack allocation, from valgrind,
	  with linear_response/04-vib_modes.01-gs.inp.
	  
	  ------------------------------------------------------------------------

2013-03-16 01:49  dstrubbe

	* [r10256] src/grid/submesh.F90: Backport of 10254 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10254 | dstrubbe | 2013-03-15 17:55:45 -0400 (Fri, 15 Mar 2013)
	  | 2 lines
	  
	  Fixing another intent problem flagged by valgrind, with max-dim =
	  4.
	  
	  ------------------------------------------------------------------------

2013-03-21 02:16  dstrubbe

	* [r10277] src/utils/vibrational.F90: Backport of 10276 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10276 | dstrubbe | 2013-03-20 17:29:11 -0400 (Wed, 20 Mar 2013)
	  | 2 lines
	  
	  Typo in call to input_error.
	  
	  ------------------------------------------------------------------------

2013-03-26 18:44  dstrubbe

	* [r10290] doc/Makefile.am, doc/oct-vibrational.pod,
	  doc/oct-vibrational_spectrum.pod: Backport of 10280 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10280 | dstrubbe | 2013-03-20 22:47:48 -0400 (Wed, 20 Mar 2013)
	  | 2 lines
	  
	  Correcting name of utility.
	  
	  ------------------------------------------------------------------------

2013-03-26 19:05  dstrubbe

	* [r10292] src/hamiltonian/lasers.F90, src/states/restart.F90:
	  Backport of 10285 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10285 | umberto | 2013-03-22 10:54:52 -0700 (Fri, 22 Mar 2013) |
	  3 lines
	  
	  Documentiation:
	  * possible choices of file format in UserDefinedStates
	  * documenting the carrier phase option in TDExternalFields
	  ------------------------------------------------------------------------

2013-04-06 18:17  xavier

	* [r10297] src/hamiltonian/hamiltonian.F90: Backport of 10296 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10296 | xavier | 2013-04-06 13:24:49 -0400 (Sat, 06 Apr 2013) |
	  3 lines
	  
	  Bugfix: the periodic boundary conditions were not properly set
	  for calculations done only with the gamma point.
	  
	  
	  ------------------------------------------------------------------------

2013-04-08 12:48  xavier

	* [r10311] src/ions/kpoints.F90: Backport of 10309 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10309 | xavier | 2013-04-07 20:36:06 -0400 (Sun, 07 Apr 2013) |
	  3 lines
	  
	  Fixed some out of bound errors I introduced in [9793].
	  
	  
	  ------------------------------------------------------------------------

2013-04-13 03:46  xavier

	* [r10328] src/grid/batch.F90: Backport of 10326 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10326 | xavier | 2013-04-12 23:43:11 -0400 (Fri, 12 Apr 2013) |
	  5 lines
	  
	  Bugfix: an error in the batch_copy routine caused problems in the
	  rmmdiis eigensolver for spinors. Thanks David for reporting this
	  problem.
	  
	  
	  ------------------------------------------------------------------------

2013-04-15 00:45  dstrubbe

	* [r10335] src/hamiltonian/hamiltonian_base.F90: Backport of 10263
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10263 | dstrubbe | 2013-03-17 16:11:19 -0400 (Sun, 17 Mar 2013)
	  | 3 lines
	  
	  * I think we should be checking overlaps provided there are any
	  projectors, not just if they are KB projectors (i.e. include HGH
	  and RKB too).
	  * Skip overlap check if there are no projectors, to avoid seg
	  faulting for lmax = 0.
	  
	  ------------------------------------------------------------------------

2013-04-16 04:00  dstrubbe

	* [r10344] src/basic/profiling.F90: Backport of 10343 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10343 | dstrubbe | 2013-04-15 23:54:16 -0400 (Mon, 15 Apr 2013)
	  | 2 lines
	  
	  Widening the profiling label field so things don't get cut off,
	  and making sure the header formatting matches.
	  
	  ------------------------------------------------------------------------

2013-04-16 23:19  dstrubbe

	* [r10353]
	  testsuite/periodic_systems/08-benzene_supercell.01-gs.inp,
	  testsuite/periodic_systems/08-benzene_supercell.test,
	  testsuite/periodic_systems/Makefile.am: Backport of 10299 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10299 | xavier | 2013-04-06 22:06:59 -0400 (Sat, 06 Apr 2013) |
	  5 lines
	  
	  Added a short test for benzene in a supercell with the rmmdiis
	  eigensolver. This test would have detected the two bugs I fixed
	  previously.
	  
	  
	  ------------------------------------------------------------------------

2013-04-18 18:14  dstrubbe

	* [r10367] src/td/td_write.F90: Backport of 10354 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10354 | dstrubbe | 2013-04-16 21:12:02 -0400 (Tue, 16 Apr 2013)
	  | 3 lines
	  
	  * Renamed TDDipoleLmax to TDMultipoleLmax, since we have
	  multipoles beyond dipoles whenever this is greater than 1.
	  * A needless restriction to multipoles of order < 4 (or < 5,
	  according to documentation...) was being enforced. There does not
	  seem to be any maximum we need to check for. I ran with lmax = 7
	  with no problem.
	  
	  ------------------------------------------------------------------------

2013-04-18 18:15  dstrubbe

	* [r10368] src/td/td_write.F90: Backport of 10358 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10358 | dstrubbe | 2013-04-16 23:52:13 -0400 (Tue, 16 Apr 2013)
	  | 2 lines
	  
	  Cleaned up documentation and setting of defaults regarding
	  TDOutput variable.
	  
	  ------------------------------------------------------------------------

2013-04-19 14:48  xavier

	* [r10376] src/basic/messages.F90: Backport of 10362 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10362 | xavier | 2013-04-17 09:13:03 -0400 (Wed, 17 Apr 2013) |
	  4 lines
	  
	  * Added a message at the end of the run warning (and hopefully
	  frightening) users about experimental features.
	  
	  
	  ------------------------------------------------------------------------

2013-04-19 14:51  xavier

	* [r10377] src/basic/messages.F90: Backport of 10363 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10363 | xavier | 2013-04-17 10:29:13 -0400 (Wed, 17 Apr 2013) |
	  7 lines
	  
	  * Now the error messages for experimental variables points to the
	  website and does not mention the ExperimentalFeatures variable.
	  
	  * The url form experimental features is given in the
	  documentation for
	  the variable.
	  
	  
	  ------------------------------------------------------------------------

2013-04-19 14:52  xavier

	* [r10378] src/basic/messages.F90: Backport of 10374 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10374 | xavier | 2013-04-19 10:28:19 -0400 (Fri, 19 Apr 2013) |
	  5 lines
	  
	  Added an alias for the experimental features url. This shortens
	  the
	  url and allows to keep the link updated if we change the website
	  in
	  the future.
	  
	  
	  ------------------------------------------------------------------------

2013-04-19 19:19  dstrubbe

	* [r10379] src/main/unocc.F90: Backport of 10371 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10371 | dstrubbe | 2013-04-18 15:04:10 -0400 (Thu, 18 Apr 2013)
	  | 2 lines
	  
	  Enabling all output from unocc mode.
	  
	  ------------------------------------------------------------------------

2013-04-20 13:19  xavier

	* [r10383] src/hamiltonian/hamiltonian_base.F90: Backport of 10382
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10382 | xavier | 2013-04-19 18:34:18 -0400 (Fri, 19 Apr 2013) |
	  3 lines
	  
	  The atom coloring algorithm was not working due to last changes.
	  
	  
	  ------------------------------------------------------------------------

2013-04-22 03:35  dstrubbe

	* [r10394] src/hamiltonian/kick.F90: Backport of 10392 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10392 | dstrubbe | 2013-04-21 19:14:29 -0400 (Sun, 21 Apr 2013)
	  | 2 lines
	  
	  Adding a reference.
	  
	  ------------------------------------------------------------------------

2013-04-25 15:50  dstrubbe

	* [r10421] src/hamiltonian/kick.F90: Backport of 10398 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10398 | dstrubbe | 2013-04-22 13:23:28 -0400 (Mon, 22 Apr 2013)
	  | 2 lines
	  
	  The TDDeltaStrengthMode was being written out for all calculation
	  modes. This is confusing for non-td calculations, where it is not
	  going to be used anyway, and is unnecessary for td, since more
	  complete information about the kick is written out later.
	  
	  ------------------------------------------------------------------------

2013-04-25 16:44  dstrubbe

	* [r10424] src/ions/symmetries.F90: Backport of 10400 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10400 | dstrubbe | 2013-04-22 17:38:12 -0400 (Mon, 22 Apr 2013)
	  | 2 lines
	  
	  Filtering out symmetry operations with fractional translations
	  when the system is a supercell, in accordance with treatment by
	  Quantum ESPRESSO. This is to be sure the operations form a group.
	  
	  ------------------------------------------------------------------------

2013-04-25 16:54  dstrubbe

	* [r10425] src/ions/kpoints.F90: Backport of 10401 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10401 | dstrubbe | 2013-04-22 21:18:51 -0400 (Mon, 22 Apr 2013)
	  | 2 lines
	  
	  Checking that k-point weights are positive, and renormalizing
	  them to sum to 1.
	  
	  ------------------------------------------------------------------------

2013-04-25 17:00  dstrubbe

	* [r10426] src/main/unocc.F90, src/sternheimer/em_resp.F90:
	  Backport of 10402 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10402 | dstrubbe | 2013-04-22 21:22:42 -0400 (Mon, 22 Apr 2013)
	  | 3 lines
	  
	  * unocc should say what kind of wavefunctions it is using.
	  * Sternheimer should not say it is SCF in the corresponding
	  message.
	  
	  ------------------------------------------------------------------------

2013-04-25 17:10  dstrubbe

	* [r10427] src/ions/symmetries.F90: Backport of 10410 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10410 | dstrubbe | 2013-04-23 12:16:40 -0400 (Tue, 23 Apr 2013)
	  | 2 lines
	  
	  Disabling fractional translation for a supercell does not really
	  need to be a warning.
	  
	  ------------------------------------------------------------------------

2013-04-25 17:12  dstrubbe

	* [r10428] src/poisson/poisson.F90, src/poisson/solver_3d_inc.F90:
	  Backport of 10414 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10414 | dstrubbe | 2013-04-24 22:35:04 -0400 (Wed, 24 Apr 2013)
	  | 2 lines
	  
	  Clarifications to Poisson solver info.
	  
	  ------------------------------------------------------------------------

2013-04-25 17:14  dstrubbe

	* [r10429] src/sternheimer/em_resp.F90: Backport of 10416 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10416 | dstrubbe | 2013-04-24 23:47:02 -0400 (Wed, 24 Apr 2013)
	  | 2 lines
	  
	  Blocking em_resp calculations where the k-points were reduced by
	  symmetries, because some more sophisticated operations need to be
	  performed to get the right answer for a tensor, rather than a
	  scalar such as total energy.
	  
	  ------------------------------------------------------------------------

2013-04-26 11:03  micael

	* [r10433] src/poisson/poisson_fft.F90: Backport of 10432 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10432 | micael | 2013-04-26 12:01:52 +0100 (Fri, 26 Apr 2013) |
	  2 lines
	  
	  * Bug fix: an index was wrong in the Poisson solver for 3d
	  periodic systems when looping over the cube points. This only
	  affected calculations that had different sizes along the y and z
	  directions.
	  
	  ------------------------------------------------------------------------

2013-04-27 19:27  dstrubbe

	* [r10447] m4/fft.m4, m4/pfft.m4: Backport of r10443, parts of
	  r10439 and r10438.

2013-04-27 19:40  dstrubbe

	* [r10448] src/poisson/poisson.F90, src/system/v_ks.F90: Backport
	  of 10444 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10444 | dstrubbe | 2013-04-27 01:49:32 -0400 (Sat, 27 Apr 2013)
	  | 2 lines
	  
	  Labeling the initialization output of the Poisson solver on the
	  fine mesh.
	  
	  ------------------------------------------------------------------------

2013-04-27 19:48  dstrubbe

	* [r10449] m4/gsl.m4: Backport of parts of r10437 and r10438.

2013-04-27 21:17  dstrubbe

	* [r10452] src/hamiltonian/hamiltonian.F90,
	  src/opt_control/check_input_inc.F90, src/opt_control/target.F90,
	  src/td/ob_mem.F90, src/td/ob_propagator.F90, src/td/ob_src.F90,
	  src/td/propagator.F90: Backport of 10450 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10450 | dstrubbe | 2013-04-27 17:09:27 -0400 (Sat, 27 Apr 2013)
	  | 2 lines
	  
	  "Crank-Nicolson" was systematically misspelled as
	  "Crank-Nicholson" (compare
	  http://link.springer.com/article/10.1007%2FBF02127704). I have
	  removed the extra "h" everywhere. The input options using
	  'nicholson' still exist as synonyms to the corrected ones with
	  'nicolson'.
	  
	  ------------------------------------------------------------------------

2013-04-27 21:43  dstrubbe

	* [r10454]
	  testsuite/open_systems/01-wavepacket.01-deriv_order_1.inp,
	  testsuite/open_systems/01-wavepacket.02-deriv_order_4.inp,
	  testsuite/open_systems/02-wavepacket_2d.01-full_q.inp,
	  testsuite/open_systems/04-propagate_eigenstate.02-ring_leads_2d.inp,
	  testsuite/optimal_control/03-localtarget.03-tdoct.inp,
	  testsuite/optimal_control/08-velocities.01-ground_state.inp,
	  testsuite/optimal_control/08-velocities.02-oct.inp,
	  testsuite/optimal_control/09-density+current.03-tdoct.inp:
	  Backport of 10453 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10453 | dstrubbe | 2013-04-27 17:40:26 -0400 (Sat, 27 Apr 2013)
	  | 2 lines
	  
	  Changing input variables in testsuite from Nicholson to Nicolson.
	  
	  ------------------------------------------------------------------------

2013-04-27 22:16  dstrubbe

	* [r10455] src/poisson/poisson.F90, src/system/v_ks.F90: Undoing
	  r10448 (a backport of r10444).

2013-04-28 02:19  dstrubbe

	* [r10461] testsuite/real_time/Makefile.am: Backport of 10459 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10459 | dstrubbe | 2013-04-27 22:13:54 -0400 (Sat, 27 Apr 2013)
	  | 2 lines
	  
	  Missing files for testsuite installation.
	  
	  ------------------------------------------------------------------------

2013-04-29 22:09  dstrubbe

	* [r10476] src/sternheimer/em_resp_calc.F90: Backport of 10474 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10474 | dstrubbe | 2013-04-29 15:27:15 -0400 (Mon, 29 Apr 2013)
	  | 2 lines
	  
	  Fixing critical bug in lr_calc_current. A tautologous
	  initialization "np = NP" was not caught when the NP macro was
	  removed in r5114 (2009!), leaving np uninitialized, so probably
	  the arrays in this function were not allocated at all.
	  Fortunately, I don't think this function has been used much.
	  
	  ------------------------------------------------------------------------

2013-05-01 22:13  dstrubbe

	* [r10487] src/math/sparskit_inc.F90: Backport of 10479 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10479 | dstrubbe | 2013-04-30 22:18:52 -0400 (Tue, 30 Apr 2013)
	  | 4 lines
	  
	  * Setting default for SPARSKITSolver to sk_bcg, as recommended by
	  Danilo, since this one actually works in the propagator, unlike
	  sk_cg.
	  * All but one of the other SPARSKIT variables had incorrect
	  defaults listed.
	  * Clarified what the default -1 means anyway for SPARSKITIterOut.
	  
	  ------------------------------------------------------------------------

2013-05-03 18:39  dstrubbe

	* [r10503] src/grid/basins.F90: Backport of 10500 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10500 | dstrubbe | 2013-05-03 12:51:05 -0400 (Fri, 03 May 2013)
	  | 2 lines
	  
	  The Bader analysis was broken since mesh%vol_pp was made
	  allocated for all the points only for curvilinear. Now it is
	  fixed with mesh%volume_element.
	  
	  ------------------------------------------------------------------------

2013-05-03 18:41  dstrubbe

	* [r10504] src/td/propagator.F90: Backport of 10494 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10494 | dstrubbe | 2013-05-02 15:25:53 -0400 (Thu, 02 May 2013)
	  | 2 lines
	  
	  The SPARSKIT propagator does not work parallel in domains. (I
	  believe it is for the reason as discussed in r10486, i.e. the dot
	  product and norm being done by SPARSKIT is not collective.)
	  
	  ------------------------------------------------------------------------

2013-05-03 19:10  dstrubbe

	* [r10506] src/td/propagator.F90: Backport of 10477 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10477 | nitsche | 2013-04-30 18:02:17 -0400 (Tue, 30 Apr 2013) |
	  1 line
	  
	  Rewrote Crank-Nicolson propagator for SPARSKIT to fix the problem
	  with different times found by David. It also supports the Complex
	  scaling. If one wants to use it, 'SPARSKITSolver = sk_bcg' should
	  be added to the input file. The default sk_cg will not work.
	  ------------------------------------------------------------------------

2013-05-03 21:38  dstrubbe

	* [r10509] src/td/propagator.F90: Backport of 10486 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10486 | dstrubbe | 2013-05-01 18:11:50 -0400 (Wed, 01 May 2013)
	  | 2 lines
	  
	  I think this fixes the failure of the Crank-Nicolson
	  (non-SPARSKIT) propagator when parallel in domains. The problem
	  was that collective operations for dot products and norms were
	  not being defined. This is the same problem that was fixed for
	  QMR in the context of Sternheimer in r4811. Danilo, I believe
	  that ob_lippman_schwinger.F90 still suffers from the same
	  problem.
	  
	  ------------------------------------------------------------------------

2013-05-04 00:12  dstrubbe

	* [r10511] src/scf/ob_lippmann_schwinger.F90,
	  src/td/ob_propagator.F90: Backport of 10489 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10489 | nitsche | 2013-05-02 05:19:38 -0400 (Thu, 02 May 2013) |
	  1 line
	  
	  Fixed problems with the QMR solver when parallel in domains for
	  Lippmann-Schwinger and Open-Boundary propagator pointed out by
	  David. I think there are still some issues left related to
	  parallel in domains, but the parallelization strategy should be
	  k-points as it is trivial.
	  ------------------------------------------------------------------------

2013-05-04 19:20  dstrubbe

	* [r10528] src/sternheimer/phonons_lr.F90,
	  testsuite/linear_response/04-vib_modes.test: Backport of 10514 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10514 | dstrubbe | 2013-05-03 21:00:04 -0400 (Fri, 03 May 2013)
	  | 3 lines
	  
	  * Bugfix: the 'average' column for infrared activity in vib_modes
	  was in fact the sum. Corrected corresponding test match.
	  * Linear-response vib_modes assumes real wavefunctions in various
	  places.
	  
	  ------------------------------------------------------------------------

2013-05-07 15:48  dstrubbe

	* [r10553] src/ions/symmetries_finite.c: Backport of 10550 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10550 | dstrubbe | 2013-05-06 20:01:43 -0400 (Mon, 06 May 2013)
	  | 2 lines
	  
	  Fixing memory leak in symmetries_finite: improper axes were not
	  being deallocated. This was showing up in the valgrind
	  buildslave, for finite_systems_3d/20-eigensolver. Apparently that
	  is the only test with a structure possessing an improper axis.
	  
	  ------------------------------------------------------------------------

2013-05-07 18:46  dstrubbe

	* [r10554] src/states/states.F90, src/states/states_calc_inc.F90:
	  Backport of 10545 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10545 | dstrubbe | 2013-05-06 16:50:09 -0400 (Mon, 06 May 2013)
	  | 5 lines
	  
	  For some reason, we have been using the term 'Gram-Schmidt' to
	  refer to orthogonalization in general. Seems to date back to
	  r5549. In fact, none of the methods that can be set by
	  StatesOrthogonalization are Gram-Schmidt any more: there is
	  'modified Gram-Schmidt', but the ones called gram_schmidt and
	  par_gram_schmidt are actually Cholesky decomposition.
	  
	  * Clarified documentation regarding meaning and range of validity
	  of orthogonalization methods.
	  * Warnings and errors refer more specifically to the actual
	  method being used.
	  
	  ------------------------------------------------------------------------

2013-05-13 14:18  dstrubbe

	* [r10586] src/grid/io_function_inc.F90, src/system/output.F90:
	  Backport of 10578 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10578 | dstrubbe | 2013-05-11 21:38:47 -0400 (Sat, 11 May 2013)
	  | 2 lines
	  
	  Bugfix to r10577: I guess -1 by two's complement is equivalent to
	  having all bits set in the flag OutputHow. This caused runtime
	  errors for most of the slaves due to an attempt to perform
	  ETSF_IO output when the library is not linked, in almost all the
	  tests.
	  
	  ------------------------------------------------------------------------
	  
	  Backport of 10577 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10577 | dstrubbe | 2013-05-11 19:25:11 -0400 (Sat, 11 May 2013)
	  | 1 line
	  
	  Initializing outp%how to an illegal value, so that it can later
	  be checked for having been set properly.
	  ------------------------------------------------------------------------

2013-05-13 14:22  dstrubbe

	* [r10587]
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/20-eigensolver.test: Backport of
	  10579 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10579 | dstrubbe | 2013-05-12 14:38:58 -0400 (Sun, 12 May 2013)
	  | 3 lines
	  
	  * Reducing EigensolverTolerance for lobpcg test as it could fail
	  sometimes with a small discrepancy with ifort 13.
	  * Correcting the name of the molecule involved.
	  
	  ------------------------------------------------------------------------

2013-05-13 14:30  dstrubbe

	* [r10588] src/main/invert_ks.F90: Backport of 10580 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10580 | dstrubbe | 2013-05-12 17:50:42 -0400 (Sun, 12 May 2013)
	  | 2 lines
	  
	  TheKS inversion test could fail when writing final output, with
	  50% probability, if compiled with MPI, because there was a call
	  to MPI_Barrier with an unitialized communicator (if < 0, the call
	  was skipped, that is the only reason it ever worked). The problem
	  is that the aux_st states object is only partly initialized.
	  
	  ------------------------------------------------------------------------

2013-05-13 14:37  dstrubbe

	* [r10589] src/ions/kpoints.F90: Backport of 10584 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10584 | dstrubbe | 2013-05-12 21:18:37 -0400 (Sun, 12 May 2013)
	  | 1 line
	  
	  Fix to r10581: line was in the wrong place, needs to be only if
	  user-defined block is present.
	  ------------------------------------------------------------------------
	  
	  Backport of 10581 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10581 | dstrubbe | 2013-05-12 18:14:33 -0400 (Sun, 12 May 2013)
	  | 2 lines
	  
	  Symmetries are not used with a user-defined k-grid.
	  
	  ------------------------------------------------------------------------

2013-05-15 15:32  dstrubbe

	* [r10597] src/system/output.F90: Backport of 10591 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10591 | dstrubbe | 2013-05-14 11:29:58 -0700 (Tue, 14 May 2013)
	  | 1 line
	  
	  Fix to r10577, r10578: better way to make sure outp%how is
	  initialized, and avoiding valgrind error 'Uninitialised value was
	  created by a stack allocation' coming from trying to set it in
	  declaration.
	  ------------------------------------------------------------------------

2013-05-15 15:34  dstrubbe

	* [r10598] src/opt_control/target.F90: Backport of 10592 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10592 | dstrubbe | 2013-05-14 13:24:11 -0700 (Tue, 14 May 2013)
	  | 2 lines
	  
	  Fix to memory leak in optimal control: missing calls to
	  parse_block_end.
	  
	  ------------------------------------------------------------------------

2013-05-15 15:37  dstrubbe

	* [r10599] src/opt_control/controlfunction.F90: Backport of 10593
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10593 | dstrubbe | 2013-05-14 13:27:30 -0700 (Tue, 14 May 2013)
	  | 1 line
	  
	  Fixing memory leak in optimal control: controlfunction_copy now
	  calls end rather than nullify to make sure the old one is
	  deallocated (there were many loops containing copies but no
	  ends), and controlfunction_copy is made safe to call even on a
	  nullified object.
	  ------------------------------------------------------------------------

2013-05-15 16:11  dstrubbe

	* [r10600] src/opt_control/opt_control.F90: Backport of 10594 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10594 | dstrubbe | 2013-05-14 13:30:35 -0700 (Tue, 14 May 2013)
	  | 1 line
	  
	  Fixing memory leak in optimal_control: par_ was never ended.
	  Also, removing some controlfunction_end calls, no longer
	  necessary since this is now included in controlfunction_copy.
	  ------------------------------------------------------------------------

2013-05-16 16:19  dstrubbe

	* [r10606] src/system/output.F90: Backport of 10601 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10601 | dstrubbe | 2013-05-15 14:24:04 -0400 (Wed, 15 May 2013)
	  | 2 lines
	  
	  Removing keywords from call to BerkeleyGW library, since the
	  renaming of one of the argument names there between versions can
	  cause compilation failure.
	  
	  ------------------------------------------------------------------------

2013-05-17 03:24  dstrubbe

	* [r10616] testsuite/finite_systems_3d/11-sic.test: Backport of
	  10613 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10613 | dstrubbe | 2013-05-16 17:06:58 -0400 (Thu, 16 May 2013)
	  | 2 lines
	  
	  Widening precision for SIC test, since mauchly just failed on
	  this. Probably indicates numerical issues that need to be fixed.
	  
	  ------------------------------------------------------------------------

2013-05-17 14:48  dstrubbe

	* [r10629] src/ions/xyz_adjust.F90: Backport of 10615 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10615 | dstrubbe | 2013-05-16 23:03:32 -0400 (Thu, 16 May 2013)
	  | 2 lines
	  
	  Adding a caveat: oct-center-geom is currently assuming 3D in many
	  places.
	  
	  ------------------------------------------------------------------------

2013-05-17 14:50  dstrubbe

	* [r10630] src/ions/xyz_adjust.F90: Backport of 10617 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10617 | dstrubbe | 2013-05-17 00:02:22 -0400 (Fri, 17 May 2013)
	  | 5 lines
	  
	  * Bugfix to oct-center-geom: the formula for moment of inertia
	  was wrong, and not even dimensionally correct. Seems to have
	  involved some false analogy to quadrupole moments. Does not
	  affect the results of the test I added recently though.
	  * Incorrect default was listed for MainAxis.
	  
	  These problems go all the way back to initial implementation of
	  this utility in r745-r746.
	  
	  ------------------------------------------------------------------------

2013-05-19 23:37  dstrubbe

	* [r10646] src/system/eigen_plan_inc.F90: Backport of 10633 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10633 | xavier | 2013-05-17 21:37:16 -0400 (Fri, 17 May 2013) |
	  3 lines
	  
	  Fixed the article reference for the plan eigensolver.
	  
	  
	  ------------------------------------------------------------------------

2013-05-20 19:39  dstrubbe

	* [r10650] src/scf/lcao_inc.F90: Backport of 10644 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10644 | dstrubbe | 2013-05-19 16:21:06 -0400 (Sun, 19 May 2013)
	  | 3 lines
	  
	  Bugfix: LCAO (standard, not alternative) produced incorrect
	  real-space wavefunctions when parallel in states. The problem was
	  confusion between 'lcao_start' in its original meaning of the
	  lowest state to be used from LCAO, and its new value assigned as
	  max(lcao_start, st%st_start). This led to the states not being
	  properly initialized to zero before accumulation of contributions
	  from the atomic orbitals. Also, only processors in states-group 0
	  had the full list of eigenvalues, even though they are supposed
	  to be global; this probably was not a problem though. I have
	  converted use of st%X(psi) to states_set_state in the
	  initialization to zero, and also removed the distinction between
	  initialization when lcao_start == 1 and when it is not. Finally,
	  I had to rename the integer 'max' which interfered with the
	  ability to use the 'max' intrinsic Fortran function -- don't use
	  a Fortran keyword as a variable!
	  reported by Varadharajan Srinivasan.
	  
	  ------------------------------------------------------------------------

2013-05-21 07:49  micael

	* [r10656] src/states/states.F90: Backport of 10648 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10648 | micael | 2013-05-20 13:43:28 +0100 (Mon, 20 May 2013) |
	  2 lines
	  
	  * Bug fix: k-points parallelization for spin-polarized
	  calculations was not done properly in states_calc_quantities.
	  
	  ------------------------------------------------------------------------

2013-05-22 17:24  dstrubbe

	* [r10687] src/hamiltonian/epot.F90,
	  testsuite/periodic_systems/03-sodium_chain.test: Backport of
	  10675 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10675 | dstrubbe | 2013-05-21 17:12:13 -0400 (Tue, 21 May 2013)
	  | 2 lines
	  
	  Bugfix: external potential in periodic systems could be incorrect
	  if a pseudopotential projector spanned the whole cell. This is
	  the case for the sodium test, resulting in some slightly
	  different values. The problem is an ambiguous vector assignment,
	  dating back to r3830. The index sphere%map has duplicate values,
	  making it not entirely clear what the assignment means. Hence
	  this sort of thing is forbidden by the Fortran standard,
	  6.2.2.3.2((http://j3-fortran.org/doc/standing/archive/007/97-007r2/pdf/97-007r2.pdf).
	  Problem reported by Vittorio.
	  
	  ------------------------------------------------------------------------

2013-05-23 08:11  micael

	* [r10691] Makefile.am, doc/ChangeLog.2009.gz,
	  doc/ChangeLog.2010.gz, doc/ChangeLog.2011.gz: Backport of 10690
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10690 | micael | 2013-05-23 09:09:26 +0100 (Thu, 23 May 2013) |
	  2 lines
	  
	  Updated ChangeLog archive.
	  
	  ------------------------------------------------------------------------

2013-05-23 08:20  micael

	* [r10693] Makefile.am, doc/ChangeLog.2012.gz: Backport of 10692 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10692 | micael | 2013-05-23 09:20:13 +0100 (Thu, 23 May 2013) |
	  2 lines
	  
	  I forgot the ChangeLog from 2012.
	  
	  ------------------------------------------------------------------------

2013-05-23 08:22  micael

	* [r10694] ChangeLog: Updating ChangeLog in 4.1.x.

2013-05-23 09:44  micael

	* [r10696] testsuite/linear_response/Makefile.am: Backport of 10695
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10695 | micael | 2013-05-23 10:41:30 +0100 (Thu, 23 May 2013) |
	  2 lines
	  
	  A file was missing from the tarball.
	  
	  ------------------------------------------------------------------------

2013-05-24 17:04  micael

	* [r10718] testsuite/finite_systems_2d/04-biot_savart.01-gs.inp:
	  Backport of 10707 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10707 | micael | 2013-05-24 09:04:17 +0100 (Fri, 24 May 2013) |
	  2 lines
	  
	  Changed the eigensolver of the Biot-Savart test to to make its
	  SCF convergence more stable.
	  
	  ------------------------------------------------------------------------

2013-06-07 21:45  dstrubbe

	* [r10789] src/system/eigensolver.F90,
	  testsuite/finite_systems_3d/21-lobpcg.02-spinors.inp: Backport of
	  10774 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10774 | dstrubbe | 2013-06-06 13:14:06 -0400 (Thu, 06 Jun 2013)
	  | 2 lines
	  
	  Marking lobpcg with more than one block as experimental. This is
	  quite unfortunate, given the name "locally optimal *block*
	  preconditioned conjugate gradients", but in all cases with more
	  than one block which I tried, except for
	  finite_systems_3d/21-lobpcg.02-spinors.inp, the results were
	  totally wrong. For example, a large fraction of eigenvalues were
	  0.00000 after a few iterations.
	  
	  ------------------------------------------------------------------------

2013-06-08 04:02  dstrubbe

	* [r10795]
	  testsuite/finite_systems_3d/20-eigensolver.01-lobpcg.inp,
	  testsuite/finite_systems_3d/21-lobpcg.01-spin_polarized.inp:
	  Backport of 10794 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10794 | dstrubbe | 2013-06-07 22:37:52 -0400 (Fri, 07 Jun 2013)
	  | 2 lines
	  
	  Apparently the block size is different on the CL intel slave, so
	  we need to set ExperimentalFeatures for two more tests.
	  
	  ------------------------------------------------------------------------

2013-06-11 14:38  dstrubbe

	* [r10828] src/system/output_states_inc.F90: Backport of 10818 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10818 | dstrubbe | 2013-06-10 16:48:51 -0400 (Mon, 10 Jun 2013)
	  | 2 lines
	  
	  Bugfix: the CurrentThroughPlane output in 2D accidentally used
	  uninitalized outp%plane%origin instead of the appropriate
	  outp%line%origin. Thanks to Vittorio Zecca for reporting the
	  issue.
	  
	  ------------------------------------------------------------------------

2013-06-11 14:46  dstrubbe

	* [r10829] src/states/states.F90: Backport of 10823 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10823 | dstrubbe | 2013-06-10 19:03:38 -0400 (Mon, 10 Jun 2013)
	  | 2 lines
	  
	  Bugfix: when running parallel in states with spinors, the
	  reported spin directions <Sx>, <Sy>, <Sz> were scrambled among
	  states and directions, due to incorrect usage of the allgatherv
	  routine. Passing arrays with specified indices BEFORE colons will
	  usually not give what you want. The test
	  finite_systems_3d/21-lobpcg.02-spinors.inp had this problem, but
	  unfortunately the spin directions were not being checked.
	  
	  ------------------------------------------------------------------------

2013-06-15 01:52  dstrubbe

	* [r10852] src/system/eigensolver.F90: Backport of 10835 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10835 | dstrubbe | 2013-06-11 18:54:13 -0400 (Tue, 11 Jun 2013)
	  | 2 lines
	  
	  Bugfix: when parallel in k-points, the number of matrix-vector
	  operations, and the number of converged vectors, were not
	  reduced/gathered among processors in the k-points group. As a
	  result, the calculation would almost certainly warn that some
	  states were unconverged, even if they all were.
	  
	  ------------------------------------------------------------------------

2013-06-15 02:04  dstrubbe

	* [r10853] src/ions/simul_box.F90: Backport of 10791 (partly) to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10791 | dstrubbe | 2013-06-07 20:16:47 -0400 (Fri, 07 Jun 2013)
	  | 3 lines
	  
	  Bugfix: The coordinate conversion for the image was flipped
	  vertically, due to confusion about the origin convention.
	  
	  ------------------------------------------------------------------------

2013-06-20 15:22  dstrubbe

	* [r10881] m4/check_cl.m4: Backport of 10858 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10858 | dstrubbe | 2013-06-17 00:55:35 -0400 (Mon, 17 Jun 2013)
	  | 2 lines
	  
	  The OpenCL m4 macro is unnecessarily complicating matters by
	  putting X11 libraries on the link lines in the tests, even though
	  they are not necessary for octopus to link with OpenCL, as far as
	  I can tell.
	  
	  ------------------------------------------------------------------------

2013-06-20 15:25  dstrubbe

	* [r10882] src/math/splines.F90: Backport of 10851 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10851 | dstrubbe | 2013-06-14 20:16:04 -0400 (Fri, 14 Jun 2013)
	  | 4 lines
	  
	  Bugfix: FilterPotentials = filter_TS caused an uninitialized
	  value to be returned for spline_cutoff_radius and used in the
	  initialization of the pseudopotential. This is because
	  'oct_spline_fit' was used within splines.F90 to initialize spline
	  objects, rather than the wrapper 'spline_fit', which also
	  includes initialization of x_limit.
	  * Now, the wrapper is used everywhere, which simplifies the call
	  anyway.
	  * x_limit is initialized to illegal values, and then we assert
	  they are ok in the routines that use x_limit. ('ASSERT' makes
	  spline_cutoff_radius no longer pure. I don't see any particular
	  reason it was pure though.)
	  
	  ------------------------------------------------------------------------

2013-06-20 15:32  dstrubbe

	* [r10883] src/system/eigen_mg_inc.F90: Backport of 10870 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10870 | dstrubbe | 2013-06-18 16:36:36 -0400 (Tue, 18 Jun 2013)
	  | 2 lines
	  
	  Bugfix: The multigrid eigensolver did not deallocate anything.
	  
	  ------------------------------------------------------------------------

2013-06-20 15:39  dstrubbe

	* [r10884] src/system/eigen_mg_inc.F90, src/system/eigensolver.F90:
	  Backport of 10871 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10871 | dstrubbe | 2013-06-18 16:59:32 -0400 (Tue, 18 Jun 2013)
	  | 4 lines
	  
	  * Declaring Eigensolver = multigrid experimental, in accordance
	  with the variable reference, and the fact that it doesn't seem to
	  work (and is not in the testsuite at all).
	  * Providing proper debug output from multigrid eigensolver.
	  * Fixing incorrect reference to vol_pp which would cause a seg
	  fault except for curvilinear coordinates.
	  
	  ------------------------------------------------------------------------

2013-06-20 15:47  dstrubbe

	* [r10885] testsuite/components/01-derivatives_1d.test: Backport of
	  10876 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10876 | dstrubbe | 2013-06-19 13:26:08 -0400 (Wed, 19 Jun 2013)
	  | 2 lines
	  
	  ifort 11.1 needs a slightly looser tolerance on
	  testsuite/components/01-derivatives_1d.01-inp.
	  
	  ------------------------------------------------------------------------

2013-06-28 18:18  dstrubbe

	* [r10922] src/states/excited_states.F90, src/td/td_write.F90:
	  Backport of 10918 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10918 | dstrubbe | 2013-06-27 15:04:55 -0400 (Thu, 27 Jun 2013)
	  | 3 lines
	  
	  * Bugfix: condition for when to read TDProjStateStart was
	  accidentally reversed in r3597 (6 yrs ago!).
	  * Improvement of documentation regarding TDOutput = td_occup,
	  populations.
	  
	  ------------------------------------------------------------------------

2013-07-10 21:35  dstrubbe

	* [r10963] src/scf/scf.F90: Backport of 10953 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10953 | dstrubbe | 2013-07-09 13:40:18 -0400 (Tue, 09 Jul 2013)
	  | 2 lines
	  
	  Clarification about MaximumIter = 0.
	  
	  ------------------------------------------------------------------------

2013-07-10 21:39  dstrubbe

	* [r10964] src/grid/curv_modine.F90: Backport of 10959 and 10962 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10959 | dstrubbe | 2013-07-10 14:54:12 -0400 (Wed, 10 Jul 2013)
	  | 2 lines
	  
	  Documenting secret variables.
	  
	  ------------------------------------------------------------------------
	  
	  ------------------------------------------------------------------------
	  r10962 | dstrubbe | 2013-07-10 17:33:36 -0400 (Wed, 10 Jul 2013)
	  | 2 lines
	  
	  Better documentation for curv_modine.
	  
	  ------------------------------------------------------------------------

2013-07-11 15:28  micael

	* [r10978] COPYING, Makefile.am, build/Makefile.am,
	  build/mk_functionals_list.pl, build/mk_varinfo.pl,
	  build/var2html.pl, configure.ac, doc/Makefile.am,
	  doc/doxygen/create_documentation.sh, doc/doxygen/index.html,
	  doc/doxygen/menu.html, doc/html/Makefile.am,
	  doc/html/icons/Makefile.am, doc/html/js/Makefile.am,
	  doc/html/vars/Makefile.am, doc/pdf/Makefile.am,
	  external_libs/Makefile.am, external_libs/bpdn/Makefile.am,
	  external_libs/fortrancl/Makefile.am,
	  external_libs/fortrancl/string_f.h,
	  external_libs/metis-4.0/Makefile.am,
	  external_libs/newuoa/Makefile.am,
	  external_libs/qshep/Makefile.am,
	  external_libs/slatec/Makefile.am,
	  external_libs/zoltan/GNU_Lesser_GPL.txt,
	  external_libs/zoltan/ZoltanComponent/config/config.guess,
	  external_libs/zoltan/ZoltanComponent/config/config.sub,
	  liboct_parser/Makefile.am, liboct_parser/grammar.y,
	  liboct_parser/gsl_userdef.c, liboct_parser/gsl_userdef.h,
	  liboct_parser/liboct_parser.h, liboct_parser/parse.c,
	  liboct_parser/parse_exp.c, liboct_parser/parser_f.c,
	  liboct_parser/string_f.h, liboct_parser/symbols.c,
	  liboct_parser/symbols.h, libxc/Makefile.am,
	  libxc/build/Makefile.am, libxc/configure.ac, libxc/m4/acx.m4,
	  libxc/m4/fc_integer.m4, libxc/m4/fcflags.m4,
	  libxc/src/Makefile.am, libxc/src/libxc_master.F90,
	  libxc/src/string_f.h, libxc/testsuite/Makefile.am, m4/arch.m4,
	  m4/fc_command_line.m4, m4/fc_f2003_c_ptr.m4, m4/fc_integer.m4,
	  m4/fc_sizeof.m4, m4/fcflags.m4, m4/fft.m4, m4/fortran.m4,
	  m4/libfm.m4, m4/nfft.m4, m4/octopus_compilation_info.m4,
	  m4/openmp.m4, m4/papi.m4, m4/pfft.m4, m4/pspio.m4,
	  perl/Makefile.am, share/Makefile.am, share/PP/HGH/Makefile.am,
	  share/PP/Makefile.am, share/PP/PSF/Makefile.am,
	  share/PP/UPF/Makefile.am, share/logo, share/opencl/Makefile.am,
	  share/opencl/axpy.cl, share/opencl/cl_complex.h,
	  share/opencl/cl_global.h, share/opencl/cl_rtype.h,
	  share/opencl/convert.cl, share/opencl/copy.cl,
	  share/opencl/density.cl, share/opencl/mesh_batch.cl,
	  share/opencl/mesh_to_cube.cl, share/opencl/mul.cl,
	  share/opencl/operate.cl, share/opencl/pack.cl,
	  share/opencl/phase.cl, share/opencl/points.cl,
	  share/opencl/projector.cl, share/opencl/rotate.cl,
	  share/opencl/set_zero.cl, share/opencl/subarray.cl,
	  share/opencl/trsm.cl, share/opencl/vpsi.cl,
	  share/recipes/Makefile.am, share/recipes/en/Makefile.am,
	  share/recipes/es/Makefile.am, share/recipes/it/Makefile.am,
	  share/util/Makefile.am, src/Makefile.am, src/basic/Makefile.am,
	  src/basic/blacs.F90, src/basic/blacs_proc_grid.F90,
	  src/basic/c_pointer.F90, src/basic/calc_mode.F90,
	  src/basic/comm.F90, src/basic/comm_inc.F90,
	  src/basic/command_line.F90, src/basic/datasets.F90,
	  src/basic/distributed.F90, src/basic/getopt_f.c,
	  src/basic/global.F90, src/basic/hardware.F90,
	  src/basic/ialist.F90, src/basic/iihash.F90, src/basic/io.F90,
	  src/basic/io_binary.c, src/basic/io_binary.h,
	  src/basic/io_binary_f.F90, src/basic/io_csv.c,
	  src/basic/io_csv.h, src/basic/io_csv_f.F90, src/basic/json.F90,
	  src/basic/json_parser.F90, src/basic/loct.F90,
	  src/basic/loct_pointer.F90, src/basic/loct_pointer_inc.F90,
	  src/basic/lookup.F90, src/basic/messages.F90, src/basic/mpi.F90,
	  src/basic/mpi_debug.F90, src/basic/mpi_debug_inc.F90,
	  src/basic/mpi_lib.F90, src/basic/mpi_lib_inc.F90,
	  src/basic/multicomm.F90, src/basic/oct_f.c,
	  src/basic/oct_gdlib_f.c, src/basic/octcl_kernel.F90,
	  src/basic/opencl.F90, src/basic/opencl_inc.F90, src/basic/papi.c,
	  src/basic/papi_f.F90, src/basic/parser.F90,
	  src/basic/profiling.F90, src/basic/recipes.c,
	  src/basic/signals.c, src/basic/space.F90, src/basic/string.F90,
	  src/basic/topology.F90, src/basic/types.F90, src/basic/unit.F90,
	  src/basic/unit_system.F90, src/basic/utils.F90,
	  src/basic/varia.c, src/basic/varia.h, src/basic/varinfo.F90,
	  src/basic/varinfo_low.c, src/basic/write_iter.F90,
	  src/basic/write_iter_low.c, src/common-rules.make,
	  src/frozen/Makefile.am, src/grid/Makefile.am,
	  src/grid/basins.F90, src/grid/batch.F90, src/grid/batch_inc.F90,
	  src/grid/batch_ops.F90, src/grid/batch_ops_inc.F90,
	  src/grid/boundaries.F90, src/grid/boundaries_inc.F90,
	  src/grid/cube.F90, src/grid/cube_function.F90,
	  src/grid/cube_function_inc.F90, src/grid/curv_briggs.F90,
	  src/grid/curv_gygi.F90, src/grid/curv_modine.F90,
	  src/grid/curvilinear.F90, src/grid/derivatives.F90,
	  src/grid/derivatives_inc.F90, src/grid/double_grid.F90,
	  src/grid/double_grid_apply_inc.F90, src/grid/fourier_shell.F90,
	  src/grid/fourier_space.F90, src/grid/fourier_space_inc.F90,
	  src/grid/grid.F90, src/grid/hypercube.F90, src/grid/index.F90,
	  src/grid/io_function.F90, src/grid/io_function_inc.F90,
	  src/grid/mesh.F90, src/grid/mesh_batch.F90,
	  src/grid/mesh_batch_inc.F90, src/grid/mesh_cube_map.F90,
	  src/grid/mesh_cube_parallel_map.F90, src/grid/mesh_function.F90,
	  src/grid/mesh_function_inc.F90, src/grid/mesh_init.F90,
	  src/grid/mesh_partition.F90, src/grid/metis.c,
	  src/grid/modelmb_1part.F90, src/grid/multigrid.F90,
	  src/grid/multigrid_inc.F90, src/grid/nl_operator.F90,
	  src/grid/nl_operator_inc.F90, src/grid/ob_grid.F90,
	  src/grid/ob_interface.F90, src/grid/operate.c,
	  src/grid/operate_f.F90, src/grid/operate_inc.c,
	  src/grid/par_vec.F90, src/grid/par_vec_inc.F90,
	  src/grid/partition.F90, src/grid/partition_transfer.F90,
	  src/grid/partition_transfer_inc.F90, src/grid/partitioner.F90,
	  src/grid/stencil.F90, src/grid/stencil_cube.F90,
	  src/grid/stencil_star.F90, src/grid/stencil_starplus.F90,
	  src/grid/stencil_variational.F90, src/grid/subarray.F90,
	  src/grid/subarray_inc.F90, src/grid/submesh.F90,
	  src/grid/submesh_inc.F90, src/grid/symmetrizer.F90,
	  src/grid/symmetrizer_inc.F90, src/grid/transfer_table.F90,
	  src/grid/zoltan.F90, src/grid/zoltan_low.c,
	  src/hamiltonian/Makefile.am, src/hamiltonian/berry.F90,
	  src/hamiltonian/born_charges.F90, src/hamiltonian/energy.F90,
	  src/hamiltonian/epot.F90, src/hamiltonian/gauge_field.F90,
	  src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90,
	  src/hamiltonian/hamiltonian_inc.F90,
	  src/hamiltonian/hgh_projector.F90,
	  src/hamiltonian/hgh_projector_inc.F90,
	  src/hamiltonian/kb_projector.F90,
	  src/hamiltonian/kb_projector_inc.F90, src/hamiltonian/kick.F90,
	  src/hamiltonian/lasers.F90, src/hamiltonian/lasers_inc.F90,
	  src/hamiltonian/ob_lead.F90, src/hamiltonian/projector.F90,
	  src/hamiltonian/projector_inc.F90,
	  src/hamiltonian/projector_matrix.F90,
	  src/hamiltonian/rkb_projector.F90, src/hamiltonian/scf_tol.F90,
	  src/hamiltonian/species_pot.F90, src/include/Makefile.am,
	  src/include/complex.F90, src/include/global.h,
	  src/include/integer.F90, src/include/real.F90,
	  src/include/undef.F90, src/include/vectors.h,
	  src/ions/Makefile.am, src/ions/geometry.F90,
	  src/ions/ion_dynamics.F90, src/ions/kpoints.F90,
	  src/ions/simul_box.F90, src/ions/solids.F90, src/ions/spglib_f.c,
	  src/ions/symmetries.F90, src/ions/vibrations.F90,
	  src/ions/xyz_adjust.F90, src/ions/xyz_file.F90,
	  src/main/Makefile.am, src/main/casida.F90,
	  src/main/casida_inc.F90, src/main/gcm.F90, src/main/geom_opt.F90,
	  src/main/invert_ks.F90, src/main/main.F90, src/main/memory.F90,
	  src/main/one_shot.F90, src/main/phonons_fd.F90,
	  src/main/pulpo.F90, src/main/run.F90, src/main/static_pol.F90,
	  src/main/test.F90, src/main/unocc.F90, src/math/Makefile.am,
	  src/math/blas.F90, src/math/checksum.c,
	  src/math/checksum_interface.F90, src/math/dablas.c,
	  src/math/fft.F90, src/math/fft_inc.F90, src/math/fftw.F90,
	  src/math/fftw_low.c, src/math/gauss_legendre.F90,
	  src/math/lalg_adv.F90, src/math/lalg_adv_lapack_inc.F90,
	  src/math/lalg_adv_scalapack_inc.F90, src/math/lalg_basic.F90,
	  src/math/lalg_basic_blas_inc.F90, src/math/lapack.F90,
	  src/math/loct_math.F90, src/math/math.F90, src/math/math_inc.F90,
	  src/math/matrix.F90, src/math/matrix_inc.F90, src/math/mix.F90,
	  src/math/mix_inc.F90, src/math/nfft.F90, src/math/nfft_f.c,
	  src/math/nfft_inc.F90, src/math/oct_gsl_f.c,
	  src/math/oct_gsl_min_f.c, src/math/ode_solver.F90,
	  src/math/ode_solver_inc.F90, src/math/pblas.F90,
	  src/math/permutations.F90, src/math/pfft.F90,
	  src/math/root_solver.F90, src/math/root_solver_inc.F90,
	  src/math/scalapack.F90, src/math/solvers.F90,
	  src/math/solvers_inc.F90, src/math/sparskit.F90,
	  src/math/sparskit_inc.F90, src/math/spline_filter.F90,
	  src/math/splines.F90, src/math/symm_op.F90,
	  src/math/symm_op_inc.F90, src/math/tdfunction.F90,
	  src/math/ylm.c, src/math/young.F90, src/opt_control/Makefile.am,
	  src/opt_control/check_input_inc.F90,
	  src/opt_control/controlfunction.F90,
	  src/opt_control/controlfunction_trans_inc.F90,
	  src/opt_control/filters.F90, src/opt_control/finalcheck_inc.F90,
	  src/opt_control/initst.F90, src/opt_control/opt_control.F90,
	  src/opt_control/opt_control_c_inc.F90,
	  src/opt_control/opt_control_global.F90,
	  src/opt_control/opt_control_iter.F90,
	  src/opt_control/opt_control_state.F90,
	  src/opt_control/propagation.F90, src/opt_control/target.F90,
	  src/poisson/Makefile.am, src/poisson/poisson.F90,
	  src/poisson/poisson_cg.F90, src/poisson/poisson_corrections.F90,
	  src/poisson/poisson_cutoff.F90, src/poisson/poisson_fft.F90,
	  src/poisson/poisson_fmm.F90, src/poisson/poisson_isf.F90,
	  src/poisson/poisson_multigrid.F90, src/poisson/poisson_sete.F90,
	  src/poisson/scaling_function.F90, src/poisson/solver_1d_inc.F90,
	  src/poisson/solver_2d_inc.F90, src/poisson/solver_3d_inc.F90,
	  src/scf/Makefile.am, src/scf/ground_state.F90, src/scf/lcao.F90,
	  src/scf/lcao_inc.F90, src/scf/ob_lippmann_schwinger.F90,
	  src/scf/rdmft.F90, src/scf/scf.F90, src/species/Makefile.am,
	  src/species/atomic.F90, src/species/logrid.F90,
	  src/species/periodic_table.F90, src/species/ps.F90,
	  src/species/ps_cpi.F90, src/species/ps_cpi_file.F90,
	  src/species/ps_fhi.F90, src/species/ps_fhi_file.F90,
	  src/species/ps_hgh.F90, src/species/ps_in_grid.F90,
	  src/species/ps_psf.F90, src/species/ps_psf_file.F90,
	  src/species/ps_pspio_inc.F90, src/species/ps_upf.F90,
	  src/species/species.F90, src/states/Makefile.am,
	  src/states/density.F90, src/states/excited_states.F90,
	  src/states/excited_states_inc.F90,
	  src/states/linear_response.F90,
	  src/states/linear_response_inc.F90,
	  src/states/modelmb_density_matrix.F90,
	  src/states/modelmb_density_matrix_inc.F90,
	  src/states/modelmb_exchange_syms.F90,
	  src/states/modelmb_exchange_syms_inc.F90,
	  src/states/modelmb_particles.F90, src/states/ob_green.F90,
	  src/states/physics_op.F90, src/states/physics_op_inc.F90,
	  src/states/restart.F90, src/states/restart_inc.F90,
	  src/states/smear.F90, src/states/states.F90,
	  src/states/states_block.F90, src/states/states_block_inc.F90,
	  src/states/states_calc.F90, src/states/states_calc_inc.F90,
	  src/states/states_dim.F90, src/states/states_inc.F90,
	  src/states/states_io.F90, src/sternheimer/Makefile.am,
	  src/sternheimer/em_resp.F90, src/sternheimer/em_resp_calc.F90,
	  src/sternheimer/em_resp_calc_inc.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/kdotp_calc.F90,
	  src/sternheimer/kdotp_calc_inc.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/sternheimer.F90,
	  src/sternheimer/sternheimer_inc.F90, src/sternheimer/vdw.F90,
	  src/system/Makefile.am, src/system/eigen_arpack_inc.F90,
	  src/system/eigen_cg.F90, src/system/eigen_cg_inc.F90,
	  src/system/eigen_evolution_inc.F90, src/system/eigen_lobpcg.F90,
	  src/system/eigen_lobpcg_inc.F90, src/system/eigen_mg_inc.F90,
	  src/system/eigen_plan_inc.F90, src/system/eigen_rmmdiis.F90,
	  src/system/eigen_rmmdiis_inc.F90, src/system/eigensolver.F90,
	  src/system/elf.F90, src/system/energy_calc.F90,
	  src/system/energy_calc_inc.F90, src/system/exponential.F90,
	  src/system/forces.F90, src/system/forces_inc.F90,
	  src/system/linear_solver.F90, src/system/linear_solver_inc.F90,
	  src/system/magnetic.F90, src/system/output.F90,
	  src/system/output_berkeleygw_inc.F90,
	  src/system/output_etsf_inc.F90, src/system/output_h_inc.F90,
	  src/system/output_linear_response_inc.F90,
	  src/system/output_me.F90, src/system/output_me_inc.F90,
	  src/system/output_modelmb_inc.F90,
	  src/system/output_states_inc.F90, src/system/pert.F90,
	  src/system/pert_inc.F90, src/system/preconditioners.F90,
	  src/system/preconditioners_inc.F90, src/system/subspace.F90,
	  src/system/subspace_inc.F90, src/system/system.F90,
	  src/system/v_ks.F90, src/system/xc_kli_inc.F90,
	  src/system/xc_ks_inversion.F90, src/system/xc_oep.F90,
	  src/system/xc_oep_inc.F90, src/system/xc_oep_sic_inc.F90,
	  src/system/xc_oep_x_inc.F90, src/td/Makefile.am, src/td/cpmd.F90,
	  src/td/cpmd_inc.F90, src/td/ob_mem.F90, src/td/ob_propagator.F90,
	  src/td/ob_src.F90, src/td/ob_terms.F90, src/td/pes.F90,
	  src/td/pes_mask.F90, src/td/pes_mask_out_inc.F90,
	  src/td/pes_rc.F90, src/td/propagator.F90,
	  src/td/propagator_qoct_inc.F90, src/td/spectrum.F90,
	  src/td/td.F90, src/td/td_calc.F90, src/td/td_init_inc.F90,
	  src/td/td_write.F90, src/td/tdpsf.F90, src/utils/Makefile.am,
	  src/utils/casida_spectrum.F90, src/utils/centergeom.F90,
	  src/utils/dielectric_function.F90,
	  src/utils/harmonic_spectrum.F90, src/utils/help.F90,
	  src/utils/infrared.F90, src/utils/liquid.F90,
	  src/utils/oscillator_strength.F90,
	  src/utils/photoelectron_spectrum.F90,
	  src/utils/propagation_spectrum.F90,
	  src/utils/rotatory_strength.F90, src/utils/vibrational.F90,
	  src/utils/xyzanim.F90, src/xc/Makefile.am,
	  src/xc/functionals.F90, src/xc/fxc_inc.F90, src/xc/kxc_inc.F90,
	  src/xc/vxc_inc.F90, src/xc/xc.F90, testsuite/Makefile.am,
	  testsuite/components/Makefile.am,
	  testsuite/finite_systems_1d/Makefile.am,
	  testsuite/finite_systems_2d/Makefile.am,
	  testsuite/finite_systems_3d/Makefile.am,
	  testsuite/functionals/Makefile.am,
	  testsuite/linear_response/Makefile.am,
	  testsuite/oct-run_regression_test.pl,
	  testsuite/oct-run_testsuite.in,
	  testsuite/open_systems/Makefile.am,
	  testsuite/optimal_control/Makefile.am,
	  testsuite/periodic_systems/Makefile.am,
	  testsuite/photo_electron/Makefile.am,
	  testsuite/real_time/Makefile.am: Corrected the FSF address in the
	  copyright.

2013-07-11 18:52  dstrubbe

	* [r10984] src/basic/io.F90: Backport of 10961 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10961 | dstrubbe | 2013-07-10 17:28:39 -0400 (Wed, 10 Jul 2013)
	  | 2 lines
	  
	  Bugfix: an error was not sent to standard error.
	  
	  ------------------------------------------------------------------------

2013-07-12 10:11  acastro

	* [r10989] src/hamiltonian/hamiltonian.F90,
	  src/hamiltonian/hamiltonian_base.F90,
	  src/hamiltonian/hamiltonian_base_inc.F90: Backport of 10988 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10988 | acastro | 2013-07-12 12:08:07 +0200 (Fri, 12 Jul 2013) |
	  5 lines
	  
	  The code allows the possibility of changing the mass of the
	  particles, but
	  then forgets to consider this change of mass when applying the
	  magnetic terms
	  of the Hamiltonian.
	  
	  
	  ------------------------------------------------------------------------

2013-07-12 17:30  dstrubbe

	* [r10995] src/main/geom_opt.F90: Backport of 10981 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10981 | dstrubbe | 2013-07-11 13:05:22 -0400 (Thu, 11 Jul 2013)
	  | 2 lines
	  
	  It seems GOMinimumMove and GOTolerance have to be negative to be
	  definitely not used as convergence criteria, since tolgrad or
	  toldr exactly zero is possible. Setting them negative makes the
	  condition impossible.
	  
	  ------------------------------------------------------------------------

2013-07-12 17:32  dstrubbe

	* [r10996] src/grid/io_function.F90, src/grid/io_function_inc.F90:
	  Backport of 10983 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10983 | dstrubbe | 2013-07-11 14:45:35 -0400 (Thu, 11 Jul 2013)
	  | 3 lines
	  
	  * Fixing possible loss of precision in netcdf and cube output
	  where 'real' is used.
	  * Noting which options in OutputHow give only the real part.
	  
	  ------------------------------------------------------------------------

2013-07-17 11:55  acastro

	* [r11014] src/td/td_write.F90: Backport of 11013 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11013 | acastro | 2013-07-17 13:54:31 +0200 (Wed, 17 Jul 2013) |
	  4 lines
	  
	  Bug fix for the problem reported by several users: the laser
	  printed in file
	  td.general/laser changes after performing a restart.
	  
	  
	  ------------------------------------------------------------------------

2013-07-17 20:51  dstrubbe

	* [r11015] src/basic/getopt_f.c, src/basic/utils.F90: Backport of
	  11003 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11003 | dstrubbe | 2013-07-13 20:47:17 -0400 (Sat, 13 Jul 2013)
	  | 2 lines
	  
	  newuoa should be in the list of configuration options.
	  
	  ------------------------------------------------------------------------

2013-07-22 02:15  dstrubbe

	* [r11028] m4/zoltan.m4: Specifying --without-external_zoltan in
	  configure would trigger an attempt to compile zoltan, even if MPI
	  is not being used, which would inevitably result in failure to
	  find 'mpif.h'. COMPILE_ZOLTAN should be false unless MPI is
	  enabled.
	  
	  (This problem does not exist anymore in trunk since zoltan
	  support was decommissioned.)

2013-07-22 15:01  dstrubbe

	* [r11030] share/util/README: Backport of 10779 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r10779 | dstrubbe | 2013-06-07 14:12:21 -0400 (Fri, 07 Jun 2013)
	  | 2 lines
	  
	  Typos, updated link.
	  
	  ------------------------------------------------------------------------

2013-07-22 15:06  dstrubbe

	* [r11031] share/util/README, src/grid/io_function_inc.F90:
	  Backport of 11019 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11019 | dstrubbe | 2013-07-19 11:48:10 -0400 (Fri, 19 Jul 2013)
	  | 3 lines
	  
	  * Expanding format for mesh_index since there can easily be more
	  than a million points. More than a trillion is probably unlikely
	  ;-)
	  * Documentation about display_mesh_index.gp.
	  
	  ------------------------------------------------------------------------

2013-07-22 16:02  dstrubbe

	* [r11032] build/svn_release_number.sh, build/true_compiler.sh,
	  m4/octopus_compilation_info.m4: Backport of 11025 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11025 | dstrubbe | 2013-07-21 17:31:46 -0400 (Sun, 21 Jul 2013)
	  | 6 lines
	  
	  Fixing two small issues with the extraction of the "true
	  compiler":
	  * echo from sh, at least on MacOS, does not support the -n
	  option, so this was ending up in the output from
	  true_compiler.sh. However, if we use bash everywhere, this seems
	  portable.
	  * MPI compilers/wrappers usually, but not always, called mpicc
	  and mpif90. For example, MacPorts openmpi calls them openmpicc
	  and openmpif90; Intel MPI calls the mpiicc and mpiifort. I made
	  true_compiler.sh be a bit more general, and try -show as long as
	  the name contains 'mpi', which includes all these cases.
	  
	  Also, for consistency and general good practice, I used
	  /usr/bin/env bash rather than just bash, and did the same for
	  svn_release_number.sh.
	  
	  ------------------------------------------------------------------------

2013-07-22 16:37  dstrubbe

	* [r11033] testsuite/real_time/06-caetrs.test: Backport of 11027 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11027 | dstrubbe | 2013-07-21 20:22:42 -0400 (Sun, 21 Jul 2013)
	  | 2 lines
	  
	  This test, with task parallelization, requires MPI2.
	  
	  ------------------------------------------------------------------------

2013-07-23 16:13  dstrubbe

	* [r11036] build/true_compiler.sh: Backport of 11035 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11035 | dstrubbe | 2013-07-22 14:47:16 -0400 (Mon, 22 Jul 2013)
	  | 2 lines
	  
	  "true compiler" support for Cray compiler wrappers cc and ftn
	  (which may or may not be in parallel).
	  
	  ------------------------------------------------------------------------

2013-08-09 18:48  dstrubbe

	* [r11097] src/poisson/poisson_fft.F90: Backport of 11056 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11056 | dstrubbe | 2013-08-01 14:37:17 -0700 (Thu, 01 Aug 2013)
	  | 2 lines
	  
	  Bugfix: loop went only to 2 instead of 3 in a poisson_fft
	  routine. Fortunately, I don't think this mattered in most casees.
	  (I caused this in r8523.)
	  
	  ------------------------------------------------------------------------

2013-08-09 18:52  dstrubbe

	* [r11098] src/main/unocc.F90: Backport of 11068 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11068 | dstrubbe | 2013-08-05 16:31:06 -0700 (Mon, 05 Aug 2013)
	  | 2 lines
	  
	  Initialization, for the case UnoccMaximumIter = 0.
	  
	  ------------------------------------------------------------------------

2013-08-09 18:53  dstrubbe

	* [r11099] src/states/restart.F90: Backport of 11079 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11079 | dstrubbe | 2013-08-07 11:45:53 -0700 (Wed, 07 Aug 2013)
	  | 2 lines
	  
	  Ensuring initializations in restart.
	  
	  ------------------------------------------------------------------------

2013-08-09 20:54  dstrubbe

	* [r11100] src/hamiltonian/hamiltonian_inc.F90, src/main/gcm.F90:
	  Backport of 11091 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11091 | dstrubbe | 2013-08-08 11:39:55 -0700 (Thu, 08 Aug 2013)
	  | 2 lines
	  
	  Hartree-Fock was broken for parallelization in k-points (and
	  probably states too) due to incorrect communication in the
	  Poisson solve. I think I fixed the same problem in the OCT
	  exchange, and I suspect it is present in GCM and RDMFT too (which
	  I commented on but did not change).
	  
	  ------------------------------------------------------------------------

2013-08-14 00:16  dstrubbe

	* [r11114] src/system/eigensolver.F90: Backport of 11092 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11092 | dstrubbe | 2013-08-08 12:11:42 -0700 (Thu, 08 Aug 2013)
	  | 2 lines
	  
	  Bugfix: the check for more than one block in lobpcg was not very
	  accurate. (r10774)
	  
	  ------------------------------------------------------------------------

2013-08-14 00:20  dstrubbe

	* [r11115] src/system/eigensolver.F90: Fix to allow previous
	  backport to compile: the structure was altered a bit since the
	  4.1.x branch split off.

2013-08-14 00:21  dstrubbe

	* [r11116] src/hamiltonian/hamiltonian_inc.F90: Backport of 11101
	  to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11101 | dstrubbe | 2013-08-09 15:27:26 -0700 (Fri, 09 Aug 2013)
	  | 2 lines
	  
	  Blocking Hartree-Fock calculations parallel in states, which will
	  crash or be wrong.
	  
	  ------------------------------------------------------------------------

2013-08-14 00:23  dstrubbe

	* [r11117] src/sternheimer/em_resp.F90, src/sternheimer/kdotp.F90,
	  src/sternheimer/phonons_lr.F90, src/sternheimer/vdw.F90: Backport
	  of 11104 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11104 | dstrubbe | 2013-08-09 16:51:29 -0700 (Fri, 09 Aug 2013)
	  | 2 lines
	  
	  Sternheimer calculations should read with 'exact' since a
	  different grid is not acceptable.
	  
	  ------------------------------------------------------------------------

2013-08-28 13:53  micael

	* [r11183] src/species/atomic.F90: Backport of 11182 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11182 | micael | 2013-08-28 14:49:31 +0100 (Wed, 28 Aug 2013) |
	  2 lines
	  
	  Bug fix: in some specific situations, the total number of atomic
	  wavefunctions for a given species could exceed the hard-wired
	  value of 6.
	  
	  ------------------------------------------------------------------------

2013-08-30 22:39  xavier

	* [r11211] external_libs/fortrancl/cl_kernel_low.c: Backport of
	  11210 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11210 | xavier | 2013-08-30 18:36:57 -0400 (Fri, 30 Aug 2013) |
	  2 lines
	  
	  Bugfix: A function had the wrong uppercase name.
	  
	  ------------------------------------------------------------------------

2013-08-30 23:46  xavier

	* [r11213] external_libs/fortrancl/cl_platform.f90: Backport of
	  11212 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11212 | xavier | 2013-08-30 19:45:56 -0400 (Fri, 30 Aug 2013) |
	  4 lines
	  
	  Bugfix: fixed out of bounds access when the number of platforms
	  in the
	  system is larger than the requested number of platforms.
	  
	  
	  ------------------------------------------------------------------------

2013-09-02 17:29  micael

	* [r11226] src/species/ps_upf.F90: Backport of 11224 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11224 | micael | 2013-09-02 18:26:34 +0100 (Mon, 02 Sep 2013) |
	  2 lines
	  
	  * More informative error message when not finding a tag in the
	  UPF file format.
	  
	  ------------------------------------------------------------------------

2013-09-02 17:31  micael

	* [r11227] src/species/species.F90: Backport of 11225 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11225 | micael | 2013-09-02 18:29:04 +0100 (Mon, 02 Sep 2013) |
	  2 lines
	  
	  * Clarified supported UPF versions in the Species block
	  documentation.
	  
	  ------------------------------------------------------------------------

2013-09-03 13:31  micael

	* [r11230] ChangeLog: * Updating ChangeLog in 4.1.x.
	  * Tagging version 4.1.1.

2013-10-08 16:19  dstrubbe

	* [r11300] src/grid/nl_operator.F90: Backport of 11292 to
	  branches/4.1.x
	  URL::
	  ------------------------------------------------------------------------
	  r11292 | dstrubbe | 2013-10-04 10:38:22 -0400 (Fri, 04 Oct 2013)
	  | 2 lines
	  
	  The debug output for finite-difference weights overflowed the
	  format for derivatives 1D test. I made it much larger.
	  
	  ------------------------------------------------------------------------

2013-10-24 21:19  dstrubbe

	* [r11390] src/basic/multicomm.F90: Backport of 11302 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11302 | dstrubbe | 2013-10-08 18:10:46 -0400 (Tue, 08 Oct 2013)
	  | 3 lines
	  
	  * Minor bugfix to r7250: the sanity check for parallelization
	  gives misleading information when there are slaves, since
	  real_group_sizes is compared to the total number of MPI tasks in
	  the output, whereas the error condition is flagged when
	  mc%group_sizes and MPI tasks do not match.
	  * Typo.
	  
	  ------------------------------------------------------------------------

2013-10-24 21:31  dstrubbe

	* [r11391] src/system/v_ks.F90: Backport of 11356 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11356 | dstrubbe | 2013-10-17 17:14:35 -0400 (Thu, 17 Oct 2013)
	  | 2 lines
	  
	  A variable was not initialized for independent particles.
	  
	  ------------------------------------------------------------------------

2013-10-24 22:56  dstrubbe

	* [r11393] src/hamiltonian/hamiltonian_inc.F90,
	  src/system/v_ks.F90: Backport of 11380 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11380 | dstrubbe | 2013-10-22 19:12:23 -0400 (Tue, 22 Oct 2013)
	  | 2 lines
	  
	  Making messages_not_implemented calls for H(F) with k-points at
	  the point of reading TheoryLevel, and broadening the condition in
	  X(exchange_operator): what matters is the number of k-points in
	  the full, not symmetry-reduced, Brillouin zone.
	  
	  ------------------------------------------------------------------------

2013-10-24 23:04  dstrubbe

	* [r11394] src/system/xc_oep.F90, src/system/xc_oep_inc.F90:
	  Backport of 11386 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11386 | dstrubbe | 2013-10-23 17:13:10 -0400 (Wed, 23 Oct 2013)
	  | 4 lines
	  
	  One of the three parts is relevant to 4.1.x:
	  
	  * Bugfix: an attempt to block full OEP parallel in states was
	  ineffective since it was placed before initialization of the OEP
	  method.
	  
	  ------------------------------------------------------------------------

2013-10-30 22:48  dstrubbe

	* [r11436] src/basic/multicomm.F90: Backport of 11422 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11422 | dstrubbe | 2013-10-29 16:12:25 -0400 (Tue, 29 Oct 2013)
	  | 2 lines
	  
	  Making an error message more informative.
	  
	  ------------------------------------------------------------------------

2013-11-01 15:07  dstrubbe

	* [r11439] src/utils/casida_spectrum.F90: Backport of 11435 (most
	  of it) to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11435 | dstrubbe | 2013-10-30 18:04:17 -0400 (Wed, 30 Oct 2013)
	  | 6 lines
	  
	  Bugfixes for the three directions of the spectrum in
	  oct-casida_spectrum; the isotropic average is not affected.
	  * The length units for the x, y, z dipole matrix elements were
	  not considered, so the results were incorrect when using
	  eV_Angstrom units.
	  * The spectrum for x, y, z was mistakenly divided by the
	  dimensionality of space; this is only supposed to be done for the
	  isotropic average.
	  * Corresponding updates to test values.
	  
	  ------------------------------------------------------------------------

2013-11-09 23:41  dstrubbe

	* [r11502] src/sternheimer/phonons_lr.F90: Backport of part of
	  r11498 to 4.1.x:
	  
	  Bugfix (regarding performance) to r8180: when I moved to use
	  forces_derivative instead of pert_expectation_value, I
	  accidentally left it inside a loop over modes. As a result,
	  rather than reducing the amount of work a bit, instead it
	  multiplied the work by the number of modes. Now this is fixed.

2013-11-14 20:42  dstrubbe

	* [r11523] src/system/xc_oep_inc.F90: Backport of 11517 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11517 | dstrubbe | 2013-11-14 12:58:24 -0500 (Thu, 14 Nov 2013)
	  | 2 lines
	  
	  Correcting misleading output from full OEP: it always said
	  "converged" even when it was not.
	  
	  ------------------------------------------------------------------------

2013-11-14 22:29  dstrubbe

	* [r11524] src/xc/vxc_inc.F90: Backport of 11508 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11508 | micael | 2013-11-12 05:56:46 -0500 (Tue, 12 Nov 2013) |
	  2 lines
	  
	  * Bug fix: the calculation of GGA and MGGA xc potentials was
	  completely wrong due to a misplaced "end if". This bug was
	  introduced in [9729].
	  
	  ------------------------------------------------------------------------
	  
	  Comment: I checked that the 1D, 2D, and 3D functionals tests in
	  trunk are passed by 4.1.x as of this change, with two exceptions
	  below. The reference value for gga_x_pbea had been changed in
	  trunk due to a change in libxc. The 1D full OEP test differs by
	  only a small amount, should not be affected by GGA/mGGA, and has
	  convergence problems anyway. So everything seems fine.
	  
	  {{{
	  Using input file : ./03-xc.gga_x_pbea.inp
	  
	  Match gga_x_pbea Exchange :
	  
	  Calculated value : -0.31167167
	  Reference value : -0.31200606
	  Difference : 0.000334389999999962
	  Tolerance : 0.0001
	  
	  gga_x_pbea Exchange : [ FAIL ]
	  
	  Match gga_x_pbea Int[n*v_xc] :
	  
	  Calculated value : -0.39996075
	  Reference value : -0.40021553
	  Difference : 0.00025478000000001
	  Tolerance : 0.0001
	  
	  gga_x_pbea Int[n*v_xc] : [ FAIL ]
	  
	  Using input file : ./01-xc_1d.oep_exx.inp
	  
	  OEP Exact Exchange : [ OK ] (Calculated value = -1.07717830)
	  
	  -----------------------------------------
	  
	  Match OEP EXX Int[n*v_xc] :
	  
	  Calculated value : -2.14114269
	  Reference value : -2.14242036
	  Difference : 0.0012776699999999
	  Tolerance : 0.0001
	  
	  OEP EXX Int[n*v_xc] : [ FAIL ]
	  
	  -----------------------------------------
	  }}}

2013-11-15 00:35  dstrubbe

	* [r11525] src/basic/messages.F90: Backport of 11511 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11511 | dstrubbe | 2013-11-12 23:39:03 -0500 (Tue, 12 Nov 2013)
	  | 2 lines
	  
	  More space for info in error message from SAFE_ALLOCATE and
	  SAFE_DEALLOCATE_A, SAFE_DEALLOCATE_P.
	  
	  ------------------------------------------------------------------------

2013-11-15 16:11  dstrubbe

	* [r11527] src/states/states.F90: Backport of 11526 to
	  branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11526 | dstrubbe | 2013-11-14 20:02:09 -0500 (Thu, 14 Nov 2013)
	  | 2 lines
	  
	  Although current DFT was removed in r8079, the variable
	  CurrentDFT remained around to confuse users.
	  
	  ------------------------------------------------------------------------

2013-11-16 02:10  dstrubbe

	* [r11531] src/xc/vxc_inc.F90: Backport of 11528 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11528 | dstrubbe | 2013-11-15 16:32:27 -0500 (Fri, 15 Nov 2013)
	  | 2 lines
	  
	  Bugfix: gga_x_lb with max-dim > 3 caused a segmentation fault.
	  Correcting allocation.
	  
	  ------------------------------------------------------------------------

2013-11-18 09:00  micael

	* [r11533] src/xc/vxc_inc.F90: Backport of 11532 to branches/4.1.x:
	  ------------------------------------------------------------------------
	  r11532 | micael | 2013-11-18 08:59:49 +0000 (Mon, 18 Nov 2013) |
	  2 lines
	  
	  * Fixed bug pointed out by Xavier: vtau should be divided by 2
	  outside the space loop.
	  
	  ------------------------------------------------------------------------

