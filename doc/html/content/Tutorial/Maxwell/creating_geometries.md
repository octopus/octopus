# Creating a geometry for the linear medium

Octopus uses the [CGAL](https://www.cgal.org) library, which allows to parse standard geometry files, as used e.g. for 3D printing. Currently, we support the [OFF](https://en.wikipedia.org/wiki/OFF_(file_format)) file format.

There are many software packages around to generate such files, but we recommend [openSCAD](https://www.openscad.org/index.html) and `ctmconv` which is part of [OpenCTM](http://openctm.sourceforge.net/).

???+Info
    In Debian style systems, these can be installed using
    ```sh
    apt-get install openscad
    apt-get install openctm-tools
    ```

OpenSCAD provides its own scripting language for creating geometries, which can be created in a GUI, but also can be rendered on the command line.
The documentation of OpenSCAD can be found [here](https://www.openscad.org/documentation.html).

???+Example
    Here is an example script for a lense, generated from the intersection of two spheres:
    ```
    $fs=0.5;
    $fa=0.5;
    intersection(){
      translate([-22,0,0]) sphere(r=25);
      translate([ 22,0,0]) sphere(r=25);
    }; 
    ```
    For details on the syntax of this, see the OpenSCAD [tutorials](https://www.openscad.org/documentation.html).

    This creates the following lense:
    ![Lense image](../img/Lense.png)

If you copy the above code into a file `lense.scad`, you can generate the required `OFF` file by the command:
```sh
openscad -o lense.off lense.scad
```

???Warning
    The `OFF` files, generated by openSCAD are malformed. If you want to further manipulate them with `ctmconv`, the header needs to be fixed:
    ```
    OFF 1162 2320 0
    1.81312 4.79828 5.90861 
    1.73416 3.80751 6.86969 
    1.98506 3.84776 5.90861 
    1.72673 7.81373 -0.993913 
    1.39732 8.75085 -0.993913 
    1.41584 8.75777 0 
    ...
    ```
    The first line needs to be `OFF` only, and the first line of the data block needs to contain the number of vertices, planes and (optional) connections.
    Comments (starting with `#` of empty lines are allowed after the header) 
    ```
    OFF
    # This is a lense (generated with OpenSCAD)

    1162 2320 0
    1.81312 4.79828 5.90861 
    1.73416 3.80751 6.86969 
    1.98506 3.84776 5.90861 
    1.72673 7.81373 -0.993913 
    1.39732 8.75085 -0.993913 
    1.41584 8.75777 0 
    ...
    ```





