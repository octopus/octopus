# RPM spec file for @PACKAGE@.
# This file is used to build Redhat Package Manager packages for the
# @PACKAGE@.  Such packages make it easy to install and uninstall
# the library and related files from binaries or source.
#
# This spec file is for version @VERSION@ of @PACKAGE@; the appropriate
# version numbers are automatically substituted in to @PACKAGE@.spec.in
# by the configure script.  However, @PACKAGE@.spec.in may need to be
# modified for future releases, if the list of installed files
# or build commands change.
#
# The icon associated with this package can be downloaded from:
#     http://www.fftw.org/fftw-logo-thumb.gif
# and will need to be placed in /usr/src/redhat/SOURCES, along with
# the @PACKAGE@-@VERSION@.tar.gz file, to build the RPM.  To build, use
# the command: rpm --clean -ba @PACKAGE@.spec
#
# Alternatively, you can just use 'make rpm' (as root).
#
Name: @PACKAGE@
Summary: real-space, real-time, TDDFT code
Version: @VERSION@
Release: 1
Copyright: GPL 2.0
Group: Programs
BuildRoot: %{_tmppath}/%{name}-buildroot
Source: http://www.tddft.org/programs/octopus/download/@PACKAGE@-@VERSION@.tar.gz
URL: http://www.tddft.org/programs/octopus
%description
octopus is a computer package aimed at the simulation of the electron-ion 
dynamics of finite systems, both in one and three dimensions, under the 
influence of time-dependent electromagnetic fields. The electronic degrees 
of freedom are treated quantum mechanically within the time-dependent 
Kohn-Sham formalism, while the ions are handled classically. All quantities 
are expanded in a regular mesh in real space, and the simulations are 
performed in real time. Although not optimized for that purpose, the 
program is also able to obtain static properties like ground-state geometries,
or static polarizabilities. The method employed proved quite reliable and 
general, and has been successfully used to calculate linear and non-linear 
absorption spectra, harmonic spectra, laser induced fragmentation, etc. 
of a variety of systems, from small clusters to medium sized quantum dots.

%prep
rm -rf $RPM_BUILD_ROOT
%setup -q

%build

%configure \
  F90=ifc \
  F90FLAGS="-nbs -pc80 -pad -align -O3 -tpp6 -I/home/marques/include" \
  CFLAGS="-Wall -O2 -I/home/marques/include" \
  LDFLAGS="-L/home/marques/lib -L/opt/intel/mkl/lib/32" \
  LIB_LAPACK="-lmkl_lapack" \
  LDF90FLAGS="-static -lpthread"

make
(cd doc; make octopus.ps; gzip octopus.ps)

%install

%makeinstall

%clean
rm -rf ${RPM_BUILD_ROOT}

%files
%defattr(-,root,root,0755)
%doc README NEWS COPYING AUTHORS doc/octopus.ps.*
%doc %{_infodir}/octopus*
%{_bindir}/*
%{_datadir}/octopus/*
